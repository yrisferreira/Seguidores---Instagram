/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ 9336:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addonName: () => (/* binding */ addonName),
/* harmony export */   addonVersion: () => (/* binding */ addonVersion),
/* harmony export */   application: () => (/* binding */ application),
/* harmony export */   applicationVersion: () => (/* binding */ applicationVersion),
/* harmony export */   baseName: () => (/* binding */ baseName),
/* harmony export */   platform: () => (/* binding */ platform),
/* harmony export */   platformVersion: () => (/* binding */ platformVersion)
/* harmony export */ });
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

let addonName = "adblockchrome";
let baseName = "adblock";
let addonVersion = "6.21.0";
let application = null;
let applicationVersion;
let platform = "chromium";
let platformVersion = null;

let regexp = /(\S+)\/(\S+)(?:\s*\(.*?\))?/g;
let match;

while (match = regexp.exec(navigator.userAgent))
{
  let app = match[1];
  let ver = match[2];

  if (app == "Chrome" || app == "HeadlessChrome")
  {
    platformVersion = ver;
  }
  else if (app != "Mozilla" && app != "AppleWebKit" && app != "Safari")
  {
    // For compatibility with legacy websites, Chrome's UA
    // also includes a Mozilla, AppleWebKit and Safari token.
    // Any further name/version pair indicates a fork.
    application = app == "OPR" ? "opera" : app.toLowerCase();
    applicationVersion = ver;
  }
}

// not a Chromium-based UA, probably modifed by the user
if (!platformVersion)
{
  application = "unknown";
  applicationVersion = platformVersion = "0";
}

// no additional name/version, so this is upstream Chrome
if (!application)
{
  application = "chrome";
  applicationVersion = platformVersion;
}


/***/ }),

/***/ 7996:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   z: () => (/* binding */ FlavorType)
/* harmony export */ });
var FlavorType;
(function (FlavorType) {
    FlavorType["chrome"] = "E";
    FlavorType["edge"] = "CM";
    FlavorType["firefox"] = "F";
})(FlavorType || (FlavorType = {}));


/***/ }),

/***/ 1589:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  n: () => (/* binding */ start)
});

// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
;// CONCATENATED MODULE: ./node_modules/@eyeo/snippets/webext/isolated-full.mjs
/*!
 * This file is part of eyeo's Anti-Circumvention Snippets module (@eyeo/snippets),
 * Copyright (C) 2006-present eyeo GmbH
 * 
 * @eyeo/snippets is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 * 
 * @eyeo/snippets is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with @eyeo/snippets.  If not, see <http://www.gnu.org/licenses/>.
 */

const callback = (environment, ...filters) => {
const e=Proxy,{apply:t,bind:n,call:r}=Function,a=r.bind(t),o=r.bind(n),u=r.bind(r),i={get:(e,t)=>o(r,e[t])},c=t=>new e(t,i),l={get:(e,t)=>o(e[t],e)},s=t=>new e(t,l),{assign:p,defineProperties:f,freeze:h,getOwnPropertyDescriptor:d,getOwnPropertyDescriptors:m,getPrototypeOf:y}=s(Object),{hasOwnProperty:g}=c({}),{species:v}=Symbol,w={get(e,t){const n=e[t];class r extends n{}const a=m(n.prototype);delete a.constructor,h(f(r.prototype,a));const o=m(n);return delete o.length,delete o.prototype,o[v]={value:r},h(f(r,o))}},A=t=>new e(t,w),x="undefined"!=typeof environment?environment:{};"undefined"==typeof globalThis&&(window.globalThis=window);const{apply:B,ownKeys:b}=s(Reflect),E="world"in x,N=E&&"ISOLATED"===x.world,T=E&&"MAIN"===x.world,I="object"==typeof chrome&&!!chrome.runtime,C="object"==typeof browser&&!!browser.runtime,F=!T&&(N||I||C),O=e=>F?e:S(e,U(e)),{create:S,defineProperties:G,defineProperty:D,freeze:R,getOwnPropertyDescriptor:k,getOwnPropertyDescriptors:U}=s(Object),M=s(globalThis),H=F?globalThis:A(globalThis),{Map:P,RegExp:j,Set:X,WeakMap:L,WeakSet:Y}=H,Q=(e,t,n=null)=>{const r=b(t);for(const a of b(e)){if(r.includes(a))continue;const o=k(e,a);if(n&&"value"in o){const{value:e}=o;"function"==typeof e&&(o.value=n(e))}D(t,a,o)}},J=e=>{const t=H[e];class n extends t{}const{toString:r,valueOf:a}=t.prototype;G(n.prototype,{toString:{value:r},valueOf:{value:a}});const o=e.toLowerCase(),u=e=>function(){const t=B(e,this,arguments);return typeof t===o?new n(t):t};return Q(t,n,u),Q(t.prototype,n.prototype,u),n},K=R({frozen:new L,hidden:new Y,iframePropertiesToAbort:{read:new X,write:new X},abortedIframes:new L}),q=new j("^[A-Z]");var _=new Proxy(new P([["chrome",F&&(I&&chrome||C&&browser)||void 0],["isExtensionContext",F],["variables",K],["console",O(console)],["document",globalThis.document],["JSON",O(JSON)],["Map",P],["Math",O(Math)],["Number",F?Number:J("Number")],["RegExp",j],["Set",X],["String",F?String:J("String")],["WeakMap",L],["WeakSet",Y],["MouseEvent",MouseEvent]]),{get(e,t){if(e.has(t))return e.get(t);let n=globalThis[t];return"function"==typeof n&&(n=(q.test(t)?H:M)[t]),e.set(t,n),n},has:(e,t)=>e.has(t)});const V={WeakSet:WeakSet,WeakMap:WeakMap,WeakValue:class{has(){return!1}set(){}}},{apply:W}=Reflect;const{Map:Z,WeakMap:$,WeakSet:z,setTimeout:ee}=_;let te=!0,ne=e=>{e.clear(),te=!te};var re=function(e){const{WeakSet:t,WeakMap:n,WeakValue:r}=this||V,a=new t,o=new n,u=new r;return function(t){if(a.has(t))return t;if(o.has(t))return o.get(t);if(u.has(t))return u.get(t);const n=W(e,this,arguments);return a.add(n),n!==t&&("object"==typeof t&&t?o:u).set(t,n),n}}.bind({WeakMap:$,WeakSet:z,WeakValue:class extends Z{set(e,t){return te&&(te=!te,ee(ne,0,this)),super.set(e,t)}}});const{concat:ae,includes:oe,join:ue,reduce:ie,unshift:ce}=c([]),le=A(globalThis),{Map:se,WeakMap:pe}=le,fe=new se,he=t=>{const n=(e=>{const t=[];let n=e;for(;n;){if(fe.has(n))ce(t,fe.get(n));else{const e=m(n);fe.set(n,e),ce(t,e)}n=y(n)}return ce(t,{}),a(p,null,t)})("function"==typeof t?t.prototype:t),r={get(e,t){if(t in n){const{value:r,get:a}=n[t];if(a)return u(a,e);if("function"==typeof r)return o(r,e)}return e[t]},set(e,t,r){if(t in n){const{set:a}=n[t];if(a)return u(a,e,r),!0}return e[t]=r,!0}};return t=>new e(t,r)},{isExtensionContext:de,Array:me,Number:ye,String:ge,Object:ve}=_,{isArray:we}=me,{getOwnPropertyDescriptor:Ae,setPrototypeOf:xe}=ve,{toString:Be}=ve.prototype,{slice:be}=ge.prototype,{get:Ee}=Ae(Node.prototype,"nodeType"),Ne=de?{}:{Attr:he(Attr),CanvasRenderingContext2D:he(CanvasRenderingContext2D),CSSStyleDeclaration:he(CSSStyleDeclaration),Document:he(Document),Element:he(Element),HTMLCanvasElement:he(HTMLCanvasElement),HTMLElement:he(HTMLElement),HTMLImageElement:he(HTMLImageElement),HTMLScriptElement:he(HTMLScriptElement),MutationRecord:he(MutationRecord),Node:he(Node),ShadowRoot:he(ShadowRoot),get CSS2Properties(){return Ne.CSSStyleDeclaration}},Te=(e,t)=>{if("Element"!==t&&t in Ne)return Ne[t](e);if(we(e))return xe(e,me.prototype);const n=(e=>u(be,u(Be,e),8,-1))(e);if(n in Ne)return Ne[n](e);if(n in _)return xe(e,_[n].prototype);if("nodeType"in e)switch(u(Ee,e)){case 1:if(!(t in Ne))throw new Error("unknown hint "+t);return Ne[t](e);case 2:return Ne.Attr(e);case 3:return Ne.Node(e);case 9:return Ne.Document(e)}throw new Error("unknown brand "+n)};var Ie=de?e=>e===window||e===globalThis?_:e:re(((e,t="Element")=>{if(e===window||e===globalThis)return _;switch(typeof e){case"object":return e&&Te(e,t);case"string":return new ge(e);case"number":return new ye(e);default:throw new Error("unsupported value")}}));let Ce=!1;function Fe(){return Ce}let{console:Oe,document:Se,getComputedStyle:Ge,isExtensionContext:De,variables:Re,Array:ke,MutationObserver:Ue,Object:Me,XPathEvaluator:He,XPathExpression:Pe,XPathResult:je}=Ie(window);const{querySelectorAll:Xe}=Se,Le=Xe&&o(Xe,Se);function Ye(e,t=!1){try{const n=navigator.userAgent.includes("Firefox")?e.openOrClosedShadowRoot:browser.dom.openOrClosedShadowRoot(e);return null===n&&Fe()&&!t&&Oe.log("Shadow root not found or not added in element yet",e),n}catch(n){return Fe()&&!t&&Oe.log("Error while accessing shadow root",e,n),null}}function Qe(e,t=!1){return qe(e,Le.bind(Se),Se,t)}function Je(e,t,n,r){const a=t.getAttribute("xlink:href")||t.getAttribute("href");if(a){const u=Le(a)[0];if(!u&&Fe())return Oe.log("No elements found matching",a),!1;if(!(o=e)||0===o.length||o.every((e=>""===e.trim()))){const e=r.length>0?r:[];return n.push({element:u,rootParents:[...e,t]}),!1}const i=u.querySelectorAll.bind(u);return{nextBoundElement:u,nestedSelectorsString:e.join("^^"),next$$:i}}var o}function Ke(e,t){const n=Ye(t);if(n){const{querySelectorAll:r}=n,a=r&&o(r,n).bind(n);return{nextBoundElement:t,nestedSelectorsString:":host "+e.join("^^"),next$$:a}}return!1}function qe(e,t,n,r,a=[]){if(e.includes("^^")){const[o,u,...i]=e.split("^^");let c,l;switch(u){case"svg":l=Je;break;case"sh":l=Ke;break;default:return Fe()&&Oe.log(u," is not supported. Supported commands are: \n^^sh^^\n^^svg^^"),[]}c=""===o.trim()?[n]:t(o);const s=[];for(const e of c){const t=l(i,e,s,a);if(!t)continue;const{next$$:n,nestedSelectorsString:o,nextBoundElement:u}=t,c=qe(o,n,u,r,[...a,e]);c&&s.push(...c)}return s}const o=t(e);return r?[...o].map((e=>({element:e,rootParents:a.length>0?a:[]}))):o}function _e(e,t,n=[]){if(t.includes("^^svg^^")&&(t=t.split("^^svg^^")[0]),t.includes("^^sh^^")){const r=t.split("^^sh^^"),a=r.length-1;if(t=`:host ${r[a]}`,a===n.length)return e.closest(t);return n[a].closest(t)}return n[0]?n[0].closest(t):e.closest(t)}const{assign:Ve,setPrototypeOf:We}=Me;class Ze extends Pe{evaluate(...e){return We(a(super.evaluate,this,e),je.prototype)}}class $e extends He{createExpression(...e){return We(a(super.createExpression,this,e),Ze.prototype)}}function ze(e){if(Re.hidden.has(e))return!1;!function(e){De&&"function"==typeof checkElement&&checkElement(e)}(e),Re.hidden.add(e);let{style:t}=Ie(e),n=Ie(t,"CSSStyleDeclaration"),r=Ie([]),{debugCSSProperties:a}=x;for(let[e,t]of a||[["display","none"]])n.setProperty(e,t,"important"),r.push([e,n.getPropertyValue(e)]);return new Ue((()=>{for(let[e,t]of r){let r=n.getPropertyValue(e),a=n.getPropertyPriority(e);r==t&&"important"==a||n.setProperty(e,t,"important")}})).observe(e,{attributes:!0,attributeFilter:["style"]}),!0}function et(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let e=t.slice(6,-1),n=(new $e).createExpression(e,null),r=je.ORDERED_NODE_SNAPSHOT_TYPE;return e=>{if(!e)return;let t=n.evaluate(Se,r,null),{snapshotLength:a}=t;for(let n=0;n<a;n++)e(t.snapshotItem(n))}}return t=>Qe(e).forEach(t)}function tt(e,t,n,r){let a;null==n&&(n=t);const o=()=>{for(const{element:o,rootParents:u}of Qe(n,!0)){const n=_e(Ie(o),t,u);n&&e(o,n,u)&&(a(),ze(n)&&"function"==typeof r&&r(n))}};return Ve(new Ue(o),{race(e){a=e,this.observe(Se,{childList:!0,characterData:!0,subtree:!0}),o()}})}function nt(e,t,n,r){let a=Ie(t,"CSSStyleDeclaration");if("none"==a.getPropertyValue("display"))return!1;let o=a.getPropertyValue("visibility");if("hidden"==o||"collapse"==o)return!1;if(!n||e==n)return!0;let u=Ie(e).parentElement;if(!u){if(!r||!r.length)return!0;u=r[r.length-1],r=r.slice(0,-1)}return nt(u,Ge(u),n,r)}function rt(e){let t=Ge(e),{cssText:n}=t;if(n)return n;for(let e of t)n+=`${e}: ${t[e]}; `;return Ie(n).trim()}let{Array:at,Math:ot,RegExp:ut}=Ie(window);function it(e){let{length:t}=e;if(t>1&&"/"===e[0]){let n="/"===e[t-1];if(n||t>2&&Ie(e).endsWith("/i")){let t=[Ie(e).slice(1,n?-1:-2)];return n||t.push("i"),new ut(...t)}}return new ut(Ie(e).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"))}function ct(e){return Ie(at.from(e)).map((e=>`'${e}'`)).join(" ")}let{Math:lt,setInterval:st,performance:pt}=Ie(window);const ft={mark(){},end(){},toString:()=>"{mark(){},end(){}}"};let ht=!0;function dt(e,t=10){if(ht)return ft;function n(){let e=Ie([]);for(let{name:t,duration:n}of pt.getEntriesByType("measure"))e.push({name:t,duration:n});e.length&&pt.clearMeasures()}return dt[e]||(dt[e]=st(n,lt.round(6e4/lt.min(60,t)))),{mark(){pt.mark(e)},end(t=!1){const r=pt.measure(e,e);console.log("PROFILER:",r),pt.clearMarks(e),t&&(clearInterval(dt[e]),delete dt[e],n())}}}const{console:mt}=Ie(window),yt=()=>{};function gt(...e){let{mark:t,end:n}=dt("log");if(Fe()){const t=["%c DEBUG","font-weight: bold;"],n=e.indexOf("error"),r=e.indexOf("warn"),a=e.indexOf("success"),o=e.indexOf("info");-1!==n?(t[0]+=" - ERROR",t[1]+="color: red; border:2px solid red",Ie(e).splice(n,1)):-1!==r?(t[0]+=" - WARNING",t[1]+="color: orange; border:2px solid orange ",Ie(e).splice(r,1)):-1!==a?(t[0]+=" - SUCCESS",t[1]+="color: green; border:2px solid green",Ie(e).splice(a,1)):-1!==o&&(t[1]+="color: black;",Ie(e).splice(o,1)),Ie(e).unshift(...t)}t(),mt.log(...e),n()}function vt(e){return o(Fe()?gt:yt,null,e)}let{Array:wt,Error:At,Map:xt,parseInt:Bt}=Ie(window),bt=null,Et=null;function Nt(e,t){if(null===bt)return yt;let n=bt,{participants:r}=n;return r.set(a,t),a;function a(){if(n.winners<1)return;if(vt("race")("success",`${e} won the race`),n===bt)Et.push(a);else if(r.delete(a),--n.winners<1){for(let e of r.values())e();r.clear()}}}const Tt={get(e,t){const n=e;for(;!g(e,t);)e=y(e);const{get:r,set:o}=d(e,t);return function(){return arguments.length?a(o,n,arguments):u(r,n)}}};var It;function Ct(e,t,n){var r,a;n?"load"===n?(e("info","Waiting until window.load"),window.addEventListener("load",(()=>{e("info","Window.load fired."),t()}))):"loading"===n||"interactive"===n||"complete"===n?(e("info","Waiting document state until :",n),document.addEventListener("readystatechange",(()=>{e("info","Document state changed:",document.readyState),document.readyState===n&&t()}))):(e("info","Waiting until ",n," event is triggered on document"),(r=document,a=n,new Promise((e=>{const t=()=>{r.removeEventListener(a,t),e()};r.addEventListener(a,t)}))).then((()=>{e("info",n," is triggered on document, starting the snippet"),t()})).catch((t=>{e("error","There was an error while waiting for the event.",t)}))):t()}Ie(window),It=window,new e(It,Tt),Ie(/^\d+$/);let{MutationObserver:Ft,WeakSet:Ot,getComputedStyle:St}=Ie(window);let{clearTimeout:Gt,fetch:Dt,getComputedStyle:Rt,setTimeout:kt,Map:Ut,MutationObserver:Mt,Uint8Array:Ht}=Ie(window);let Pt=new Ut;function jt(e,{as:t="arrayBuffer",cleanup:n=6e4}={}){let r=t+":"+e,a=Pt.get(r)||{remove:()=>Pt.delete(r),result:null,timer:0};return Gt(a.timer),a.timer=kt(a.remove,n),a.result||(a.result=Dt(e).then((e=>e[t]())).catch(a.remove),Pt.set(r,a)),a.result}const{parseFloat:Xt,Math:Lt,MutationObserver:Yt,WeakSet:Qt}=Ie(window),{min:Jt}=Lt,Kt=(e,t)=>{const n=e.length+1,r=t.length+1,a=[[0]];let o=0,u=0;for(;++o<r;)a[0][o]=o;for(o=0;++o<n;){const n=e[u];let i=0,c=0;for(a[o]=[o];++i<r;)a[o][i]=Jt(a[u][i]+1,a[o][c]+1,a[u][c]+(n!=t[c])),++c;++u}return a[n-1][r-1]};let{getComputedStyle:qt,Map:_t,WeakSet:Vt,parseFloat:Wt,DOMMatrix:Zt,Math:$t}=Ie(window);const{ELEMENT_NODE:zt,TEXT_NODE:en}=Node;let{MutationObserver:tn,WeakSet:nn,getComputedStyle:rn}=Ie(window);let{getComputedStyle:an,MutationObserver:on,WeakSet:un}=Ie(window);let{MutationObserver:cn,WeakSet:ln}=Ie(window);const{ELEMENT_NODE:sn}=Node;let{MutationObserver:pn,WeakSet:fn}=Ie(window);const{ELEMENT_NODE:hn}=Node;let{parseInt:dn,setTimeout:mn,Error:yn,MouseEvent:gn,MutationObserver:vn,WeakSet:wn}=Ie(window);const An=["auxclick","click","dblclick","gotpointercapture","lostpointercapture","mouseenter","mousedown","mouseleave","mousemove","mouseout","mouseover","mouseup","pointerdown","pointerenter","pointermove","pointerover","pointerout","pointerup","pointercancel","pointerleave"];let{isNaN:xn,MutationObserver:Bn,parseInt:bn,parseFloat:En,setTimeout:Nn}=Ie(window);const Tn={log:gt,race:function(e,t="1"){switch(e){case"start":bt={winners:Bt(t,10)||1,participants:new xt},Et=new wt;break;case"end":case"finish":case"stop":bt=null;for(let e of Et)e();Et=null;break;default:throw new At(`Invalid action: ${e}`)}},debug:function(){Ce=!0},profile:function(){ht=!1},"hide-if-matches-xpath":function(e,t,n){const{mark:r,end:a}=dt("hide-if-matches-xpath"),o=ct(arguments),u=vt("hide-if-matches-xpath");Ct(u,(()=>{const n=n=>{const i=et(`xpath(${e})`),c=new ln,l=e=>{c.add(e),f(),Ie(e).nodeType===sn?ze(e):Ie(e).textContent="",u("success","Matched: ",e,"\nFILTER: hide-if-matches-xpath",o)},s=()=>{r(),i((e=>{if(c.has(e))return!1;if(t){et(`xpath(${t})`)((t=>{if(!t.contains(e))return!1;l(e)}))}else l(e)})),a()},p=new cn(s),f=Nt("hide-if-matches-xpath",(()=>p.disconnect()));p.observe(n,{characterData:!0,childList:!0,subtree:!0}),s()};if(t){let e,r=0;const a=et(`xpath(${t})`),o=()=>{a((e=>{n(e),r++})),r>0&&e.disconnect()};e=new cn(o),e.observe(document,{characterData:!0,childList:!0,subtree:!0}),o()}else n(document)}),n)},"hide-if-matches-computed-xpath":function(e,t,n,r){const{mark:a,end:o}=dt("hide-if-matches-computed-xpath"),u=ct(arguments),i=vt("hide-if-matches-computed-xpath");if(!t||!e)return void i("error","No query or searchQuery provided.");const c=t=>{const n=(t=>e.replace("{{}}",t))(t);i("info","Starting hiding elements that match query: ",n);const r=et(`xpath(${n})`),c=new fn,l=()=>{a(),r((e=>{if(c.has(e))return!1;c.add(e),p(),Ie(e).nodeType===hn?ze(e):Ie(e).textContent="",i("success","Matched: ",e,"\nFILTER: hide-if-matches-computed-xpath",u)})),o()},s=new pn(l),p=Nt("hide-if-matches-computed-xpath",(()=>s.disconnect()));s.observe(document,{characterData:!0,childList:!0,subtree:!0}),l()},l=it(n);Ct(i,(()=>{if(t){i("info","Started searching for: ",t);const e=new fn;let n;const r=et(`xpath(${t})`),a=()=>{r((t=>{if(e.has(t))return!1;if(e.add(t),i("info","Found node: ",t),t.innerHTML){i("info","Searching in: ",t.innerHTML);const e=t.innerHTML.match(l);if(e&&e.length){let t="";t=e[1]?e[1]:e[0],i("info","Matched search query: ",t),c(t)}}}))};n=new pn(a),n.observe(document,{characterData:!0,childList:!0,subtree:!0}),a()}}),r)},"hide-if-contains":function(e,t="*",n=null){const r=ct(arguments),a=vt("hide-if-contains"),{mark:o,end:u}=dt("hide-if-contains");let i=it(e);const c=tt((e=>i.test(Ie(e).textContent)),t,n,(e=>{o(),a("success","Matched: ",e,"\nFILTER: hide-if-contains",r),u()}));c.race(Nt("hide-if-contains",(()=>{c.disconnect()})))},"hide-if-contains-similar-text":function(e,t,n=null,r=0,a=0){const o=new Qt,u=ct(arguments),i=vt("hide-if-contains-similar-text"),{mark:c,end:l}=dt("hide-if-contains-similar-text"),s=Ie(e),{length:p}=s,f=p+Xt(r)||0,h=Ie([...s]).sort(),d=Xt(a)||1/0;null==n&&(n=t),i("info","Looking for similar text: "+s);const m=()=>{c();for(const{element:e,rootParents:a}of Qe(n,!0)){if(o.has(e))continue;o.add(e);const{innerText:n}=Ie(e),c=Jt(d,n.length-f+1);for(let o=0;o<c;o++){const c=Ie(n).substr(o,f);if(Kt(h,Ie([...c]).sort())-r<=0){const n=_e(Ie(e),t,a);if(i("success","Found similar text: "+s,n,"\nFILTER: hide-if-contains-similar-text",u),n){g(),ze(n);break}}}}l()};let y=new Yt(m),g=Nt("hide-if-contains-similar-text",(()=>y.disconnect()));y.observe(document,{childList:!0,characterData:!0,subtree:!0}),m()},"hide-if-contains-visible-text":function(e,t,n=null,...r){const{mark:a,end:o}=dt("hide-if-contains-visible-text"),u=ct(arguments);let i=Ie([]);const c=new _t([["-snippet-box-margin","2"],["-disable-bg-color-check","false"],["-check-is-contained","false"],["-pseudo-box-margin","2"]]);for(let e of r){e=Ie(e);let t=e.indexOf(":");if(t<0)continue;let n=e.slice(0,t).trim().toString(),r=e.slice(t+1).trim().toString();n&&r&&(c.has(n)?c.set(n,r):i.push([n,r]))}let l=Ie([["opacity","0"],["font-size","0px"],["color","rgba(0, 0, 0, 0)"]]),s=new _t(l.concat(i));function p(e,t,{bgColorCheck:n=!0}={}){t||(t=qt(e)),t=Ie(t);for(const[e,n]of s){if(it(n).test(t.getPropertyValue(e)))return!1}let r=t.getPropertyValue("color");return!n||t.getPropertyValue("background-color")!=r}function f(e,t=null){let n=qt(e,t).transform;return"none"===n&&(n="matrix(1, 0, 0, 1, 0, 0)"),new Zt(n)}function h(e,t,n,{bgColorCheck:r=!0,translateThresh:a=2}={}){let o=qt(e,t);if(!nt(e,o)||!p(e,o,{bgColorCheck:r}))return"";let{content:u}=Ie(o);if(u&&"none"!==u){let r=Ie([]);const o=f(e,t),i=n.multiply(o),c=$t.atan2(i.b,i.a)*(180/$t.PI);if($t.abs(c)>5)return"";return $t.abs(i.e)>a||$t.abs(i.f)>a?"":(u=Ie(u).trim().replace(/(["'])(?:(?=(\\?))\2.)*?\1/g,(e=>""+(r.push(Ie(e).slice(1,-1))-1))),u=u.replace(/\s*attr\(\s*([^\s,)]+)[^)]*?\)\s*/g,((t,n)=>Ie(e).getAttribute(n)||"")),u.replace(/\x01(\d+)/g,((e,t)=>r[t])))}return""}function d(e,t,{boxMargin:n=2}={}){const r=Ie(e).getBoundingClientRect(),a=Ie(t).getBoundingClientRect(),o=a.left-n,u=a.right+n,i=a.top-n,c=a.bottom+n;return o<=r.left&&r.left<=u&&i<=r.top&&r.top<=c&&i<=r.bottom&&r.bottom<=c&&o<=r.right&&r.right<=u}function m(e,t,n,r,a,o,u,{boxMargin:i=2,bgColorCheck:c,checkIsContained:l,translateThresh:s}={}){let y=!n;if(y&&(n=qt(e)),!nt(e,n,y&&t,o))return"";r||"hidden"!==Ie(n).getPropertyValue("overflow-x")&&"hidden"!==Ie(n).getPropertyValue("overflow-y")||(r=e);let g=h(e,":before",u=u?u.multiply(f(e)):f(e),{bgColorCheck:c,translateThresh:s});for(let t of function(e,t=!0){const n=Ye(e,t);return n?n.childNodes:Ie(e).childNodes}(Ie(e)))switch(Ie(t).nodeType){case zt:g+=m(t,e,qt(t),r,a,o,u,{boxMargin:i,bgColorCheck:c,checkIsContained:l,translateThresh:s});break;case en:if(r)d(e,r,{boxMargin:i})&&p(e,n,{bgColorCheck:c})&&(g+=Ie(t).nodeValue);else if(p(e,n,{bgColorCheck:c})){if(l&&!d(e,a,{boxMargin:i}))continue;g+=Ie(t).nodeValue}}return g+=h(e,":after",u,{bgColorCheck:c,translateThresh:s}),g}const y=c.get("-snippet-box-margin"),g=Wt(y)||0,v=!("true"===c.get("-disable-bg-color-check")),w="true"===c.get("-check-is-contained"),A=c.get("-pseudo-box-margin"),x=Wt(A)||0;let B=it(e),b=new Vt;const E=tt(((e,t,n)=>{if(a(),b.has(e))return!1;b.add(e);let r=m(e,t,null,null,e,n,null,{boxMargin:g,bgColorCheck:v,checkIsContained:w,translateThresh:x}),i=B.test(r);return Fe()&&r.length&&(i?gt("success",i,B,r,"\nFILTER: hide-if-contains-visible-text",u):gt("info",i,B,r)),o(),i}),t,n);E.race(Nt("hide-if-contains-visible-text",(()=>{E.disconnect()})))},"hide-if-contains-and-matches-style":function(e,t="*",n=null,r=null,a=null,o,u=null,i=null){const c=ct(arguments),l=vt("hide-if-contains-and-matches-style"),{mark:s,end:p}=dt("hide-if-contains-and-matches-style"),f=new Ot,h=Fe()&&new Ot;null==n&&(n=t);const d=it(e),m=r?it(r):null,y=a?it(a):null;Ct(l,(()=>{const e=()=>{if(s(),!(u&&window.innerWidth<u||i&&window.innerWidth>i)){for(const{element:e,rootParents:r}of Qe(n,!0))if(!f.has(e)&&d.test(Ie(e).textContent))if(!y||y.test(rt(e))){const n=_e(Ie(e),t,r);if(!n)continue;if(!m||m.test(rt(n)))a(),ze(n),f.add(e),l("success","Matched: ",n,"which contains: ",e,"\nFILTER: hide-if-contains-and-matches-style",c);else{if(!h||h.has(n))continue;l("info","In this element the searchStyle matched but style didn't:\n",n,St(n),c),h.add(n)}}else{if(!h||h.has(e))continue;l("info","In this element the searchStyle didn't match:\n",e,St(e),c),h.add(e)}p()}},r=new Ft(e),a=Nt("hide-if-contains-and-matches-style",(()=>r.disconnect()));r.observe(document,{childList:!0,characterData:!0,subtree:!0}),e()}),o)},"hide-if-has-and-matches-style":function(e,t="*",n=null,r=null,a=null,o=null,u=null,i=null){const c=ct(arguments),l=vt("hide-if-has-and-matches-style"),{mark:s,end:p}=dt("hide-if-has-and-matches-style"),f=new nn,h=Fe()&&new nn;null==n&&(n=t);const d=r?it(r):null,m=a?it(a):null;Ct(l,(()=>{const r=()=>{if(s(),!(u&&window.innerWidth<u||i&&window.innerWidth>i)){for(const{element:r,rootParents:a}of Qe(n,!0))if(!f.has(r))if(!Ie(r).querySelector(e)||m&&!m.test(rt(r))){if(!h||h.has(r))continue;l("info","In this element the searchStyle didn't match:\n",r,rn(r),...arguments),h.add(r)}else{const e=_e(Ie(r),t,a);if(!e||d&&!d.test(rt(e))){if(!h||h.has(e))continue;l("info","In this element the searchStyle matchedbut style didn't:\n",e,rn(e),...arguments),h.add(e)}else o(),ze(e),f.add(r),l("success","Matched: ",e,"which contains: ",r,"\nFILTER: hide-if-has-and-matches-style",c)}p()}},a=new tn(r),o=Nt("hide-if-has-and-matches-style",(()=>a.disconnect()));a.observe(document,{childList:!0,subtree:!0}),r()}),o)},"hide-if-labelled-by":function(e,t,n=null){const{mark:r,end:a}=dt("hide-if-labelled-by");let o=null==n,u=it(e),i=new un,c=()=>{r();for(const{element:e,rootParents:r}of Qe(t,!0)){let t=o?e:_e(Ie(e),n,r);if(!t||!nt(e,an(e),t))continue;let a=Ie(e).getAttribute("aria-labelledby"),c=()=>{i.has(t)||u.test(Ie(e).getAttribute("aria-label")||"")&&(s(),i.add(t),ze(t))};if(a)for(let e of Ie(a).split(/\s+/)){let n=Ie(document).getElementById(e);n?!i.has(n)&&u.test(n.innerText)&&(s(),i.add(n),ze(t)):c()}else c()}a()},l=new on(c),s=Nt("hide-if-labelled-by",(()=>l.disconnect()));l.observe(document,{characterData:!0,childList:!0,subtree:!0}),c()},"hide-if-contains-image":function(e,t,n){null==n&&(n=t);let r=it(e);const a=ct(arguments),o=vt("hide-if-contains-image"),{mark:u,end:i}=dt("hide-if-contains-image");let c=()=>{u();for(const{element:e,rootParents:u}of Qe(n,!0)){let n=Rt(e),i=Ie(n["background-image"]).match(/^url\("(.*)"\)$/);i&&jt(i[1]).then((n=>{if(r.test(new Ht(n).reduce(((e,t)=>e+function(e,t=2){let n=Ie(e).toString(16);n.length<t&&(n=Ie("0").repeat(t-n.length)+n);return n}(t)),""))){let n=_e(Ie(e),t,u);n&&(s(),ze(n),o("success","Matched: ",n,"\nFILTER: hide-if-contains-image",a))}}))}i()},l=new Mt(c),s=Nt("hide-if-contains-image",(()=>l.disconnect()));l.observe(document,{childList:!0,subtree:!0}),c()},"simulate-mouse-event":function(...e){const t=ct(arguments),n=vt("simulate-mouse-event"),{mark:r,end:a}=dt("simulate-mouse-event");if(e.length<1)throw new yn("[simulate-mouse-event snippet]: No selector provided.");e.length>7&&(e=e.slice(0,7));const o=Ie([]);function u(){return o.forEach((e=>{if(!e.found){(function(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let t=et(e);return()=>{let e=Ie([]);return t((t=>e.push(t))),e}}return()=>ke.from(Qe(e))})(e.selector)().length>0&&(e.found=!0)}})),o.every((e=>e.found))}function i(e,r,a){e&&r&&("click"===r&&e.click?(e.click(),n("success","Clicked on this node:\n",e,"\nwith a delay of",a,"ms",`n\nFILTER: simulate-mouse-event ${t}`)):(e.dispatchEvent(new gn(r,{bubbles:!0,cancelable:!0})),n("success","A",r,"event was dispatched with a delay of",a,"ms on this node:\n",e,`n\nFILTER: simulate-mouse-event ${t}`)))}Ie(e).forEach((e=>{const t=function(e){if(!e)return null;const t={selector:"",continue:!1,trigger:!1,event:"click",delay:"500",clicked:!1,found:!1},r=e.split("$");let a=[];r.length>=2&&(a=r[1].toLowerCase().split(",")),[t.selector]=r;for(const e of a)if("trigger"===e)t.trigger=!0;else if("continue"===e)t.continue=!0;else if(e.startsWith("event")){const n=e.toLowerCase().split("=");n[1]?t.event=n[1]:t.event="click"}else if(e.startsWith("delay")){const n=e.toLowerCase().split("=");n[1]?t.delay=n[1]:t.delay="500"}return An.includes(t.event)||n("warn",t.event," might be misspelled, check for typos.\n","These are the supported events:",An),t}(e);o.push(t)}));let c=!1;const[l]=o.slice(-1);l.trigger=!0;let s=new wn;function p(){if(r(),c||(c=u()),c)for(const e of o){const t=et(e.selector),n=dn(e.delay,10);e.trigger&&t((t=>{s.has(t)||(s.add(t),e.continue?setInterval((()=>{i(t,e.event,e.delay)}),n):mn((()=>{i(t,e.event,e.delay)}),n))}))}a()}new vn(p).observe(document,{childList:!0,subtree:!0}),p()},"skip-video":function(e,t,...n){const r=ct(arguments),a=new Map([["-max-attempts","10"],["-retry-ms","10"],["-run-once","false"],["-wait-until",""],["-skip-to","-0.1"],["-stop-on-video-end","false"],["-start-from","0"],["-mute-video-when-skipping","true"]]);for(let e of n){e=Ie(e);let t=e.indexOf(":");if(t<0)continue;let n=e.slice(0,t).trim().toString(),r=e.slice(t+1).trim().toString();n&&r&&a.has(n)&&a.set(n,r)}const o=a.get("-max-attempts"),u=bn(o||10,10),i=a.get("-retry-ms"),c=bn(i||10,10),l="true"===a.get("-run-once"),s=a.get("-skip-to"),p=En(s||-.1),f=a.get("-start-from"),h=bn(f||0,10),d=a.get("-wait-until"),m="true"===a.get("-stop-on-video-end"),y=!("false"===a.get("-mute-video-when-skipping")),g=vt("skip-video"),{mark:v,end:w}=dt("skip-video"),A=et(`xpath(${t})`);let x=!1;Ct(g,(()=>{v();const n=new WeakSet,a=(s=0)=>{x&&l?o&&o.disconnect():A((o=>{let l,f=n.has(o);f||(g("info","Matched:",o," for selector: ",t),g("info","Running video skipping logic."));const d=Qe(e);let v=!1;for(const e of d){if(!e||xn(e.duration)||xn(e.currentTime))continue;v=!0;const t=e.duration-e.currentTime<.5;!(e.duration>0&&e.currentTime<e.duration)||m&&t||(y&&(e.muted=!0,f||g("success","Muted video...")),h<=1e3*e.currentTime&&(p<=0?e.currentTime=e.duration+p:e.currentTime+=p,l!==e.duration&&(g("success","Skipped video, currentTime: ",e.currentTime,"s.","\nFILTER: skip-video",r),n.add(o),l=e.duration),e.paused&&e.play(),x=!0,i()))}!v&&s<u&&Nn((()=>{const e=s+1;g("info","Running video skipping logic. Attempt: ",e),a(e)}),c)}))},o=new Bn(a),i=Nt("skip-video",(()=>o.disconnect()));o.observe(document,{characterData:!0,childList:!0,subtree:!0}),a(),w()}),d)}};let{MutationObserver:In}=Ie(window);const{ELEMENT_NODE:Cn}=Node;Tn["hide-if-matches-xpath3"]=function(e,t){let{mark:n,end:r}=dt("hide-if-matches-xpath3");const a=e=>""===e&&"http://www.w3.org/1999/xhtml";function o(e){return fontoxpath.evaluateXPathToNodes(e,document,null,null,{language:fontoxpath.evaluateXPath.XQUERY_3_1_LANGUAGE,namespaceResolver:a})}const u=ct(arguments);let i=vt("hide-if-matches-xpath3");const c=t=>{const a=new WeakSet,c=()=>{n();const t=o(e);for(const e of Ie(t)){if(a.has(e))return!1;a.add(e),s(),Ie(e).nodeType===Cn?ze(e):Ie(e).textContent="",i("success","Matched: ",e,"\nFILTER: hide-if-matches-xpath3",u)}r()},l=new In(c),s=Nt("hide-if-matches-xpath3",(()=>l.disconnect()));l.observe(t,{characterData:!0,childList:!0,subtree:!0}),c()};if(t){let e,n=0;const r=o(t),a=()=>{for(const e of Ie(r))c(e),n++;n>0&&e.disconnect()};e=new In(a),e.observe(document,{characterData:!0,childList:!0,subtree:!0}),a()}else c(document)};
const snippets=Tn;
let context;
for (const [name, ...args] of filters) {
if (snippets.hasOwnProperty(name)) {
try { context = snippets[name].apply(context, args); }
catch (error) { console.error(error); }
}
}
context = void 0;
};
const graph = new Map([["log",null],["race",null],["debug",null],["profile",null],["hide-if-matches-xpath",null],["hide-if-matches-computed-xpath",null],["hide-if-contains",null],["hide-if-contains-similar-text",null],["hide-if-contains-visible-text",null],["hide-if-contains-and-matches-style",null],["hide-if-has-and-matches-style",null],["hide-if-labelled-by",null],["hide-if-contains-image",null],["simulate-mouse-event",null],["skip-video",null],["hide-if-matches-xpath3",function(){var e,t,n,r,a,o;e=this,function(e){function t(e,t,n,r){const a={op:t,func:n,data:r};return e.push(a),a}function n(e,t){return e}class r{constructor(){this.program=[]}test(e,n){return t(this.program,5,e,void 0===n?null:n)}jump(e){return t(this.program,3,null,e)}record(e,r){return t(this.program,4,void 0===r?n:r,e)}bad(e=1){return t(this.program,1,null,e)}accept(){return t(this.program,0,null,null)}fail(e){return t(this.program,2,e||null,null)}}class a{constructor(e,t,n){this.programLength=e,this.maxFromByPc=t,this.maxSurvivorFromByPc=n}static fromProgram(e){const t=e.length,n=[],r=[];return e.forEach((e=>{n.push(0),r.push(0)})),e.forEach(((e,a)=>{switch(e.op){case 2:if(null===e.func)return;if(a+1>=t)throw new Error("Invalid program: program could run past end");n[a+1]+=1;break;case 1:case 4:if(a+1>=t)throw new Error("Invalid program: program could run past end");n[a+1]+=1;break;case 3:e.data.forEach((e=>{if(e<0||e>=t)throw new Error("Invalid program: program could run past end");n[e]+=1}));break;case 5:if(a+1>=t)throw new Error("Invalid program: program could run past end");r[a+1]+=1;break;case 0:r[a]+=1}})),new a(t,n,r)}static createStub(e){const t=[],n=[];for(let r=0;r<e;++r)t.push(e),n.push(e);return new a(e,t,n)}}class o{constructor(e){this.acceptingTraces=e,this.success=e.length>0}}const u=255;class i{constructor(e){this.t=0,this.i=0,this.h=new Uint16Array(e),this.l=new Uint8Array(e)}getBadness(e){return this.l[e]}add(e,t){this.l[e]=t>u?u:t;const n=function(e,t,n,r,a){let o=r,u=a;for(;o<u;){const r=o+u>>>1;n<t[e[r]]?u=r:o=r+1}return o}(this.h,this.l,t,this.i,this.t);this.h.copyWithin(n+1,n,this.t),this.h[n]=e,this.t+=1}reschedule(e,t){const n=Math.max(this.l[e],t>u?u:t);if(this.l[e]!==n){const t=this.h.indexOf(e,this.i);if(t<0||t>=this.t)return void(this.l[e]=n);this.h.copyWithin(t,t+1,this.t),this.t-=1,this.add(e,n)}}getNextPc(){return this.i>=this.t?null:this.h[this.i++]}reset(){this.t=0,this.i=0,this.l.fill(0)}}class c{constructor(e){this.o=[];let t=e.length;e.forEach((e=>{this.o.push(e>0?t:-1),t+=e})),this.u=new Uint16Array(t)}clear(){this.u.fill(0,0,this.o.length)}add(e,t){const n=this.u[t],r=this.o[t];this.u[t]+=1,this.u[r+n]=e}has(e){return this.u[e]>0}forEach(e,t){const n=this.u[e],r=this.o[e];for(let e=r;e<r+n;++e)t(this.u[e])}}function l(e,t,n=!1){return null===e?t:Array.isArray(e)?(-1===e.indexOf(t)&&(n&&(e=e.slice()),e.push(t)),e):e===t?e:[e,t]}class s{constructor(e,t){this.prefixes=e,this.record=t}}function p(e,t){let n;if(null===t){if(!Array.isArray(e))return e;n=e}else n=e===s.EMPTY?[]:Array.isArray(e)?e:[e];return new s(n,t)}s.EMPTY=new s([],null);class f{constructor(e){this.p=[],this.v=[];for(let t=0;t<e;++t)this.p.push(0),this.v.push(null)}mergeTraces(e,t,n,r,a,o){let u=!1;return n.forEach(t,(t=>{const n=this.trace(t,r,a,o);var i,c,s;c=n,s=u,e=null===(i=e)?c:null===c?i:Array.isArray(c)?c.reduce(((e,t)=>l(e,t,e===c)),i):l(i,c,s),u=e===n})),e}trace(e,t,n,r){switch(this.p[e]){case 2:return this.v[e];case 1:return null}this.p[e]=1;let a=null;const o=t[e];if(null!==o)a=o;else if(!n.has(e))throw new Error(`Trace without source at pc ${e}`);if(a=this.mergeTraces(a,e,n,t,n,r),null!==a){const t=r[e];null!==t&&(a=p(a,t))}return this.v[e]=a,this.p[e]=2,a}buildSurvivorTraces(e,t,n,r,a){for(let o=0,u=e.length;o<u;++o){if(!n.has(o)){t[o]=null;continue}this.v.fill(null),this.p.fill(0);const u=this.mergeTraces(null,o,n,e,r,a);if(null===u)throw new Error(`No non-cyclic paths found to survivor ${o}`);t[o]=p(u,null)}this.v.fill(null)}}class h{constructor(e){this.g=[],this.k=[],this.m=[],this.A=new c(e.maxFromByPc),this.T=new c(e.maxSurvivorFromByPc),this.S=new f(e.programLength);for(let t=0;t<e.programLength;++t)this.g.push(null),this.k.push(null),this.m.push(null);this.k[0]=s.EMPTY}reset(e){this.A.clear(),this.T.clear(),this.g.fill(null),e&&(this.k.fill(null),this.m.fill(null),this.k[0]=s.EMPTY)}record(e,t){this.g[e]=t}has(e){return this.A.has(e)||null!==this.k[e]}add(e,t){this.A.add(e,t)}hasSurvivor(e){return this.T.has(e)}addSurvivor(e,t){this.T.add(e,t)}buildSurvivorTraces(){const e=this.k;this.S.buildSurvivorTraces(e,this.m,this.T,this.A,this.g),this.k=this.m,this.m=e}getTraces(e){const t=e.reduce(((e,t)=>l(e,this.k[t])),null);return null===t?[]:Array.isArray(t)?t:[t]}}class d{constructor(e){this.I=[],this.M=new i(e.programLength),this.N=new i(e.programLength),this.j=new h(e)}reset(){this.M.reset(),this.M.add(0,0),this.I.length=0,this.j.reset(!0)}getNextThreadPc(){return this.M.getNextPc()}step(e,t,n){const r=this.j.has(t);this.j.add(e,t);const a=this.M.getBadness(e)+n;r?this.M.reschedule(t,a):this.M.add(t,a)}stepToNextGeneration(e,t){const n=this.j.hasSurvivor(t);this.j.addSurvivor(e,t);const r=this.M.getBadness(e);n?this.N.reschedule(t,r):this.N.add(t,r)}accept(e){this.I.push(e),this.j.addSurvivor(e,e)}fail(e){}record(e,t){this.j.record(e,t)}nextGeneration(){this.j.buildSurvivorTraces(),this.j.reset(!1);const e=this.M;e.reset(),this.M=this.N,this.N=e}getAcceptingTraces(){return this.j.getTraces(this.I)}}class m{constructor(e){this.P=[],this.U=e,this.G=a.fromProgram(e),this.P.push(new d(this.G))}execute(e,t){const n=this.P.pop()||new d(this.G);n.reset();const r=e.length;let a,u=-1;do{let o=n.getNextThreadPc();if(null===o)break;for(++u,a=u>=r?null:e[u];null!==o;){const e=this.U[o];switch(e.op){case 0:null===a?n.accept(o):n.fail(o);break;case 2:{const r=e.func;if(null===r||r(t)){n.fail(o);break}n.step(o,o+1,0);break}case 1:n.step(o,o+1,e.data);break;case 5:if(null===a){n.fail(o);break}if(!(0,e.func)(a,e.data,t)){n.fail(o);break}n.stepToNextGeneration(o,o+1);break;case 3:{const t=e.data,r=t.length;if(0===r){n.fail(o);break}for(let e=0;e<r;++e)n.step(o,t[e],0);break}case 4:{const r=(0,e.func)(e.data,u,t);null!=r&&n.record(o,r),n.step(o,o+1,0);break}}o=n.getNextThreadPc()}n.nextGeneration()}while(null!==a);const i=new o(n.getAcceptingTraces());return n.reset(),this.P.push(n),i}}function y(e){const t=new r;return e(t),new m(t.program)}var g={Assembler:r,VM:m,compileVM:y};e.Assembler=r,e.VM=m,e.compileVM=y,e.default=g,Object.defineProperty(e,"V",{value:!0})}((e="undefined"!=typeof globalThis?globalThis:e||self).whynot={}),t=this,function(e){function t(e,t){return{success:!0,offset:e,value:t}}function n(e){return t(e,void 0)}function r(e,t,n=!1){return{success:!1,offset:e,expected:t,fatal:n}}function a(e){return e>65535?2:1}function o(e,t){return(o,u)=>{const i=o.codePointAt(u);return void 0!==i&&e(i)?n(u+a(i)):r(u,t)}}function u(e,n){return(r,a)=>{const o=e(r,a);return o.success?t(o.offset,n(o.value)):o}}function i(e){return(n,r)=>{let a=[],o=r;for(;;){const t=e(n,o);if(!t.success){if(t.fatal)return t;break}if(a.push(t.value),t.offset===o)break;o=t.offset}return t(o,a)}}function c(e){return(t,r)=>{let a=r;for(;;){const n=e(t,a);if(!n.success){if(n.fatal)return n;break}if(n.offset===a)break;a=n.offset}return n(a)}}function l(e,n,r){return(a,o)=>{const u=e(a,o);if(!u.success)return u;const i=n(a,u.offset);return i.success?t(i.offset,r(u.value,i.value)):i}}function s(e,t){return e}function p(e,t){return t}function f(e,t){return l(e,t,p)}function h(e,t){return l(e,t,s)}function d(e,t){return(a,o)=>e(a,o).success?r(o,t):n(o)}function m(e){return(t,n)=>{const a=e(t,n);return a.success?a:r(a.offset,a.expected,!0)}}const y=(e,t)=>e.length===t?n(t):r(t,["end of input"]);function g(e){const t=[];let n=e.next();for(;!n.done;)t.push(n.value),n=e.next();return[t,n.value]}e.codepoint=o,e.codepoints=function(e,t){return(a,o)=>{const u=o;for(;;){const t=a.codePointAt(o);if(void 0===t)break;if(!e(t))break;o+=t>65535?2:1}return void 0!==t&&o===u?r(o,t):n(o)}},e.collect=g,e.complete=function(e){return l(e,y,s)},e.consume=function(e){return u(e,(()=>{}))},e.cut=m,e.delimited=function(e,t,n,r=!1){return f(e,r?m(h(t,n)):h(t,n))},e.dispatch=function(e,t,n=0,a=[]){return(o,u)=>{const i=o.codePointAt(u+n);if(void 0===i)return r(u,a);const c=e[i];return void 0===c?void 0===t?r(u,a):t(o,u):c(o,u)}},e.end=y,e.error=r,e.except=function(e,t,n){return f(d(t,n),e)},e.filter=function(e,t,n,a){return(o,u)=>{const i=e(o,u);return i.success?t(i.value)?i:r(u,n,a):i}},e.filterUndefined=function(e){return u(e,(e=>e.filter((e=>void 0!==e))))},e.first=s,e.followed=h,e.map=u,e.not=d,e.ok=n,e.okWithValue=t,e.optional=function(e){return(n,r)=>{const a=e(n,r);return a.success||a.fatal?a:t(r,null)}},e.or=function(e,t){return(n,a)=>{let o=null;for(const r of e){const e=r(n,a);if(e.success)return e;if(null===o||e.offset>o.offset?o=e:e.offset===o.offset&&void 0===t&&(o.expected=o.expected.concat(e.expected)),e.fatal)return e}return t=t||(null==o?void 0:o.expected)||[],o&&(o.expected=t),o||r(a,t)}},e.peek=function(e){return(n,r)=>{const a=e(n,r);return a.success?t(r,a.value):a}},e.plus=function(e){return l(e,i(e),((e,t)=>[e].concat(t)))},e.plusConsumed=function(e){return l(e,c(e),p)},e.preceded=f,e.range=function(e,t,n){return o((n=>e<=n&&n<=t),n||[`${String.fromCodePoint(e)}-${String.fromCodePoint(t)}`])},e.recognize=function(e){return(n,r)=>{const a=e(n,r);return a.success?t(a.offset,n.slice(r,a.offset)):a}},e.second=p,e.sequence=function(...e){return(n,r)=>{const a=[];for(const t of e){const e=t(n,r);if(!e.success)return e;r=e.offset,a.push(e.value)}return t(r,a)}},e.sequenceConsumed=function(...e){return(t,r)=>{for(const n of e){const e=n(t,r);if(!e.success)return e;r=e.offset}return n(r)}},e.skipChars=function(e){return(t,o)=>{let u=e;for(;u>0;){const e=t.codePointAt(o);if(void 0===e)return r(o,["any character"]);o+=a(e),u-=1}return n(o)}},e.star=i,e.starConsumed=c,e.start=(e,t)=>0===t?n(t):r(t,["start of input"]),e.streaming=function(e){return function*(t,n){const r=e(t,n);return r.success&&(yield r.value),r}},e.streamingComplete=function(e){return function*(t,n){const r=yield*e(t,n);return r.success?y(t,r.offset):r}},e.streamingFilterUndefined=function(e){return function*(t,n){const r=e(t,n);let a=r.next();for(;!a.done;){const e=a.value;void 0!==e&&(yield e),a=r.next()}return a.value}},e.streamingOptional=function(e){return function*(t,r){const[a,o]=g(e(t,r));return o.success?(yield*a,o):o.fatal?o:n(r)}},e.streamingStar=function(e){return function*(t,r){for(;;){const[a,o]=g(e(t,r));if(!o.success)return o.fatal?o:n(r);if(yield*a,r===o.offset)return n(r);r=o.offset}}},e.streamingThen=function(e,t){return function*(n,r){const a=yield*e(n,r);return a.success?yield*t(n,a.offset):a}},e.then=l,e.token=function(e){return(n,a)=>{const o=a+e.length;return n.slice(a,o)===e?t(o,e):r(a,[e])}},Object.defineProperty(e,"__esModule",{value:!0})}((t="undefined"!=typeof globalThis?globalThis:t||self).prsc={}),n=this,function(e,t){function n(e){return t=>t===e}function r(e,t){if(null===e||null===t)throw new Error("unescaped hyphen may not be used as a range endpoint");if(t<e)throw new Error("character range is in the wrong order");return n=>e<=n&&n<=t}function a(e){return!0}function o(){return!1}function u(e,t){return n=>e(n)||t(n)}const i=-1,c=-2;function l(e,t){switch(t.kind){case"predicate":return void e.test(t.value);case"regexp":return void p(e,t.value,!1)}}function s(e,t){t.forEach((t=>{!function(e,t){const[n,{min:r,max:a}]=t;if(null!==a){for(let t=0;t<r;++t)l(e,n);for(let t=r;t<a;++t){const t=e.jump([]);t.data.push(e.program.length),l(e,n),t.data.push(e.program.length)}}else if(r>0){for(let t=0;t<r-1;++t)l(e,n);const t=e.program.length;l(e,n),e.jump([t]).data.push(e.program.length)}else{const t=e.program.length,r=e.jump([]);r.data.push(e.program.length),l(e,n),e.jump([t]),r.data.push(e.program.length)}}(e,t)}))}function p(e,t,n){const r=e.program.length,a=e.jump([]);n&&(a.data.push(e.program.length),e.test((()=>!0)),e.jump([r]));const o=[];if(t.forEach((t=>{a.data.push(e.program.length),s(e,t),o.push(e.jump([]))})),o.forEach((t=>{t.data.push(e.program.length)})),n){const t=e.program.length,n=e.jump([]);n.data.push(e.program.length),e.test((()=>!0)),e.jump([t]),n.data.push(e.program.length)}}function f(e,t){return{success:!0,offset:e,value:t}}function h(e){return f(e,void 0)}function d(e,t,n=!1){return{success:!1,offset:e,expected:t,fatal:n}}function m(e){return(t,n)=>{const r=n+e.length;return t.slice(n,r)===e?f(r,e):d(n,[e])}}function y(e,t){return(n,r)=>{const a=e(n,r);return a.success?f(a.offset,t(a.value)):a}}function g(e,t,n,r){return(a,o)=>{const u=e(a,o);return u.success?t(u.value)?u:d(o,n,r):u}}function v(e,t){return(n,r)=>{let a=null;for(const o of e){const e=o(n,r);if(e.success)return e;if(null===a||e.offset>a.offset?a=e:e.offset===a.offset&&void 0===t&&(a.expected=a.expected.concat(e.expected)),e.fatal)return e}return t=t||(null==a?void 0:a.expected)||[],a&&(a.expected=t),a||d(r,t)}}function w(e){return(t,n)=>{const r=e(t,n);return r.success||r.fatal?r:f(n,null)}}function A(e){return(t,n)=>{let r=[],a=n;for(;;){const n=e(t,a);if(!n.success){if(n.fatal)return n;break}if(r.push(n.value),n.offset===a)break;a=n.offset}return f(a,r)}}function x(e,t,n){return(r,a)=>{const o=e(r,a);if(!o.success)return o;const u=t(r,o.offset);return u.success?f(u.offset,n(o.value,u.value)):u}}function B(e){return x(e,A(e),((e,t)=>[e].concat(t)))}function b(e,t){return e}function E(e,t){return t}function N(e,t){return x(e,t,E)}function T(e,t){return x(e,t,b)}function I(e,t,n,r=!1){return N(e,r?F(T(t,n)):T(t,n))}function C(e,t){return(n,r)=>e(n,r).success?d(r,t):h(r)}function F(e){return(t,n)=>{const r=e(t,n);return r.success?r:d(r.offset,r.expected,!0)}}const O=(e,t)=>e.length===t?h(t):d(t,["end of input"]),S=["Lu","Ll","Lt","Lm","Lo","Mn","Mc","Me","Nd","Nl","No","Pc","Pd","Ps","Pe","Pi","Pf","Po","Zs","Zl","Zp","Sm","Sc","Sk","So","Cc","Cf","Co","Cn"],G={};function D(e){return e.codePointAt(0)}"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("").forEach(((e,t)=>{G[e]=t}));const R=e=>e===i||e===c;function k(e){return t=>!R(t)&&!e(t)}function U(e,t){return null===t?e:n=>e(n)&&!t(n)}const M=function(e,t){const n=new Map;let a=0;return e.forEach(((e,o)=>{const i=t[o];null!==e&&e.split("|").forEach((e=>{const t=n.get(e),o=r(a,a+i-1);n.set(e,t?u(t,o):o)})),a+=i})),n}(["BasicLatin","Latin-1Supplement","LatinExtended-A","LatinExtended-B","IPAExtensions","SpacingModifierLetters","CombiningDiacriticalMarks","GreekandCoptic|Greek","Cyrillic","CyrillicSupplement","Armenian","Hebrew","Arabic","Syriac","ArabicSupplement","Thaana","NKo","Samaritan","Mandaic","SyriacSupplement","ArabicExtended-B","ArabicExtended-A","Devanagari","Bengali","Gurmukhi","Gujarati","Oriya","Tamil","Telugu","Kannada","Malayalam","Sinhala","Thai","Lao","Tibetan","Myanmar","Georgian","HangulJamo","Ethiopic","EthiopicSupplement","Cherokee","UnifiedCanadianAboriginalSyllabics","Ogham","Runic","Tagalog","Hanunoo","Buhid","Tagbanwa","Khmer","Mongolian","UnifiedCanadianAboriginalSyllabicsExtended","Limbu","TaiLe","NewTaiLue","KhmerSymbols","Buginese","TaiTham","CombiningDiacriticalMarksExtended","Balinese","Sundanese","Batak","Lepcha","OlChiki","CyrillicExtended-C","GeorgianExtended","SundaneseSupplement","VedicExtensions","PhoneticExtensions","PhoneticExtensionsSupplement","CombiningDiacriticalMarksSupplement","LatinExtendedAdditional","GreekExtended","GeneralPunctuation","SuperscriptsandSubscripts","CurrencySymbols","CombiningDiacriticalMarksforSymbols|CombiningMarksforSymbols","LetterlikeSymbols","NumberForms","Arrows","MathematicalOperators","MiscellaneousTechnical","ControlPictures","OpticalCharacterRecognition","EnclosedAlphanumerics","BoxDrawing","BlockElements","GeometricShapes","MiscellaneousSymbols","Dingbats","MiscellaneousMathematicalSymbols-A","SupplementalArrows-A","BraillePatterns","SupplementalArrows-B","MiscellaneousMathematicalSymbols-B","SupplementalMathematicalOperators","MiscellaneousSymbolsandArrows","Glagolitic","LatinExtended-C","Coptic","GeorgianSupplement","Tifinagh","EthiopicExtended","CyrillicExtended-A","SupplementalPunctuation","CJKRadicalsSupplement","KangxiRadicals",null,"IdeographicDescriptionCharacters","CJKSymbolsandPunctuation","Hiragana","Katakana","Bopomofo","HangulCompatibilityJamo","Kanbun","BopomofoExtended","CJKStrokes","KatakanaPhoneticExtensions","EnclosedCJKLettersandMonths","CJKCompatibility","CJKUnifiedIdeographsExtensionA","YijingHexagramSymbols","CJKUnifiedIdeographs","YiSyllables","YiRadicals","Lisu","Vai","CyrillicExtended-B","Bamum","ModifierToneLetters","LatinExtended-D","SylotiNagri","CommonIndicNumberForms","Phags-pa","Saurashtra","DevanagariExtended","KayahLi","Rejang","HangulJamoExtended-A","Javanese","MyanmarExtended-B","Cham","MyanmarExtended-A","TaiViet","MeeteiMayekExtensions","EthiopicExtended-A","LatinExtended-E","CherokeeSupplement","MeeteiMayek","HangulSyllables","HangulJamoExtended-B","HighSurrogates","HighPrivateUseSurrogates","LowSurrogates","PrivateUseArea|PrivateUse","CJKCompatibilityIdeographs","AlphabeticPresentationForms","ArabicPresentationForms-A","VariationSelectors","VerticalForms","CombiningHalfMarks","CJKCompatibilityForms","SmallFormVariants","ArabicPresentationForms-B","HalfwidthandFullwidthForms","Specials","LinearBSyllabary","LinearBIdeograms","AegeanNumbers","AncientGreekNumbers","AncientSymbols","PhaistosDisc",null,"Lycian","Carian","CopticEpactNumbers","OldItalic","Gothic","OldPermic","Ugaritic","OldPersian",null,"Deseret","Shavian","Osmanya","Osage","Elbasan","CaucasianAlbanian","Vithkuqi",null,"LinearA","LatinExtended-F",null,"CypriotSyllabary","ImperialAramaic","Palmyrene","Nabataean",null,"Hatran","Phoenician","Lydian",null,"MeroiticHieroglyphs","MeroiticCursive","Kharoshthi","OldSouthArabian","OldNorthArabian",null,"Manichaean","Avestan","InscriptionalParthian","InscriptionalPahlavi","PsalterPahlavi",null,"OldTurkic",null,"OldHungarian","HanifiRohingya",null,"RumiNumeralSymbols","Yezidi","ArabicExtended-C","OldSogdian","Sogdian","OldUyghur","Chorasmian","Elymaic","Brahmi","Kaithi","SoraSompeng","Chakma","Mahajani","Sharada","SinhalaArchaicNumbers","Khojki",null,"Multani","Khudawadi","Grantha",null,"Newa","Tirhuta",null,"Siddham","Modi","MongolianSupplement","Takri",null,"Ahom",null,"Dogra",null,"WarangCiti","DivesAkuru",null,"Nandinagari","ZanabazarSquare","Soyombo","UnifiedCanadianAboriginalSyllabicsExtended-A","PauCinHau","DevanagariExtended-A",null,"Bhaiksuki","Marchen",null,"MasaramGondi","GunjalaGondi",null,"Makasar","Kawi",null,"LisuSupplement","TamilSupplement","Cuneiform","CuneiformNumbersandPunctuation","EarlyDynasticCuneiform",null,"Cypro-Minoan","EgyptianHieroglyphs","EgyptianHieroglyphFormatControls",null,"AnatolianHieroglyphs",null,"BamumSupplement","Mro","Tangsa","BassaVah","PahawhHmong",null,"Medefaidrin",null,"Miao",null,"IdeographicSymbolsandPunctuation","Tangut","TangutComponents","KhitanSmallScript","TangutSupplement",null,"KanaExtended-B","KanaSupplement","KanaExtended-A","SmallKanaExtension","Nushu",null,"Duployan","ShorthandFormatControls",null,"ZnamennyMusicalNotation",null,"ByzantineMusicalSymbols","MusicalSymbols","AncientGreekMusicalNotation",null,"KaktovikNumerals","MayanNumerals","TaiXuanJingSymbols","CountingRodNumerals",null,"MathematicalAlphanumericSymbols","SuttonSignWriting",null,"LatinExtended-G","GlagoliticSupplement","CyrillicExtended-D",null,"NyiakengPuachueHmong",null,"Toto","Wancho",null,"NagMundari",null,"EthiopicExtended-B","MendeKikakui",null,"Adlam",null,"IndicSiyaqNumbers",null,"OttomanSiyaqNumbers",null,"ArabicMathematicalAlphabeticSymbols",null,"MahjongTiles","DominoTiles","PlayingCards","EnclosedAlphanumericSupplement","EnclosedIdeographicSupplement","MiscellaneousSymbolsandPictographs","Emoticons","OrnamentalDingbats","TransportandMapSymbols","AlchemicalSymbols","GeometricShapesExtended","SupplementalArrows-C","SupplementalSymbolsandPictographs","ChessSymbols","SymbolsandPictographsExtended-A","SymbolsforLegacyComputing",null,"CJKUnifiedIdeographsExtensionB",null,"CJKUnifiedIdeographsExtensionC","CJKUnifiedIdeographsExtensionD","CJKUnifiedIdeographsExtensionE","CJKUnifiedIdeographsExtensionF",null,"CJKCompatibilityIdeographsSupplement",null,"CJKUnifiedIdeographsExtensionG","CJKUnifiedIdeographsExtensionH",null,"Tags",null,"VariationSelectorsSupplement",null,"SupplementaryPrivateUseArea-A|PrivateUse","SupplementaryPrivateUseArea-B|PrivateUse"],[128,128,128,208,96,80,112,144,256,48,96,112,256,80,48,64,64,64,32,16,48,96,128,128,128,128,128,128,128,128,128,128,128,128,256,160,96,256,384,32,96,640,32,96,32,32,32,32,128,176,80,80,48,96,32,32,144,80,128,64,64,80,48,16,48,16,48,128,64,64,256,256,112,48,48,48,80,64,112,256,256,64,32,160,128,32,96,256,192,48,16,256,128,128,256,256,96,32,128,48,80,96,32,128,128,224,16,16,64,96,96,48,96,16,32,48,16,256,256,6592,64,20992,1168,64,48,320,96,96,32,224,48,16,64,96,32,48,48,32,96,32,96,32,96,32,48,64,80,64,11184,80,896,128,1024,6400,512,80,688,16,16,16,32,32,144,240,16,128,128,64,80,64,48,128,32,64,32,48,32,48,32,64,32,80,48,48,80,48,64,80,64,384,64,64,64,32,32,48,48,32,32,32,64,32,96,96,32,32,32,64,64,32,32,48,80,80,48,128,64,288,32,64,64,48,64,64,48,32,128,80,48,80,48,96,32,80,48,48,80,128,128,128,96,160,128,96,32,80,48,80,176,80,80,96,96,64,96,80,96,16,64,96,160,112,80,64,96,80,304,32,96,80,16,64,1024,128,208,2624,112,1072,48,4e3,640,8576,576,48,96,48,144,688,96,96,160,64,32,6144,768,512,128,8816,16,256,48,64,400,2304,160,16,4688,208,48,256,256,80,112,32,32,96,32,128,1024,688,1104,256,48,96,112,80,320,48,64,464,48,736,32,224,32,96,784,80,64,80,176,256,256,48,112,96,256,256,768,80,48,128,128,128,256,256,112,144,256,1024,42720,32,4160,224,5776,7488,3088,544,1504,4944,4192,711760,128,128,240,65040,65536,65536]),H=function(e){const t=new Map,a=e.split(""),i=S.map((()=>[]));let c=0,l=0;for(;l<a.length;){const e=G[a[l]],t=(31&e)-2;let o=1+G[a[l+1]];switch(32&e?(o+=G[a[l+2]]<<6,o+=G[a[l+3]]<<12,o+=G[a[l+4]]<<18,l+=5):l+=2,t){case-2:{let e=0;for(let t=c;t<c+o;++t)i[e].push(n(t)),e=(e+1)%2;break}case-1:break;default:{const e=i[t];1===o?e.push(n(c)):e.push(r(c,c+o-1));break}}c+=o}const s=new Map;return S.forEach(((e,n)=>{const r=i[n].reduce(u,o);t.set(e,r);const a=e.charAt(0),c=s.get(a)||[];s.set(a,c),c.push(r)})),s.forEach(((e,n)=>{t.set(n,e.reduce(u,o))})),t}("bfUATCYATCPAQATAXATAOATBKJTBXCTBCZPATAQAZANAZADZPAXAQAXAbgUATAYDaATAZAaAGARAXAcAaAZAaAXAMBZADATBZAMAGASAMCTACWXACGDXXADHA3DAAPDAAtCAAFDBCAADCAABCCDBCCABCAABCCDCCAABCAAFCAADDAABCAABCBADCBDBGACADCGDCAEADACAEADACAEADAAPDAARDACAEADAABCBA7DFCAABCBDBABCCAJjDBAAGADaFRZDFLZNFEZGFAZAFAZQnvBAAADFAZACADABBFADCTACABDZBCATACCBACABACAABCQBACIDiCADBCCDCAXDDCADAXAABCBDBCyDvAhaAHEJBA1CAANDAgfBAABAClBBFATFDoTAOABBaBYABAHsOAHATAHBTAHBTAHABHGaBDGDTBBKcFXCTBYATBaBHKTAcATCGfFAGJHUKJTDGBHAmiBAATAGAHGcAaAHFFBHBaAHDGBKJGCaBGATNBAcAGAHAGdHaBBmYBAAHKGABNKJGgHIFBaATCFABBHAYBGVHDFAHIFAHCFAHEBBTOBAGYHCBBTABAGKBEGXZAGFBAcBBFHHGoFAHXcAHfIAG1HAIAHAGAICHHIDHAIBGAHGGJHBTBKJTAFAGOHAIBBAGHBBGBBBGVBAGGBAGABCGDBBHAGAICHDBBIBBBIBHAGABHIABDGBBAGCHBBBKJGBYBMFaAYAGATAHABBHBIABAGFBDGBBBGVBAGGBAGBBAGBBAGBBBHABAICHBBDHBBBHCBCHABGGDBAGABGKJHBGCHATABJHBIABAGIBAGCBAGVBAGGBAGBBAGEBBHAGAICHEBAHBIABAIBHABBGABOGBHBBBKJTAYABGGAHFBAHAIBBAGHBBGBBBGVBAGGBAGBBAGEBBHAGAIAHAIAHDBBIBBBIBHABGHBIABDGBBAGCHBBBKJaAGAMFBJHAGABAGFBCGCBAGDBCGBBAGABAGBBCGBBCGCBCGLBDIBHAIBBCICBAICHABBGABFIABNKJMCaFYAaABEHAICHAGHBAGCBAGWBAGPBBHAGAHCIDBAHCBAHDBGHBBAGCBBGABBGBHBBBKJBGTAMGaAGAHAIBTAGHBAGCBAGWBAGJBAGEBBHAGAIAHAIEBAHAIBBAIBHBBGIBBFGBBAGBHBBBKJBAGBIABLHBIBGIBAGCBAGoHBGAICHDBAICBAICHAGAaABDGCIAMGGCHBBBKJMIaAGFBAHAIBBAGRBCGXBAGIBAGABBGGBCHABDICHCBAHABAIHBFKJBBIBTABLGvHAGBHGBDYAGFFAHHTAKJTBBkGBBAGABAGEBAGXBAGABAGJHAGBHIGABBGEBAFABAHGBAKJBBGDBfGAaCTOaATAaCHBaFKJMJaAHAaAHAaAHAPAQAPAQAIBGHBAGjBDHNIAHETAHBGEHKBAHjBAaHHAaFBAaBTEaDTBBkGqIBHDIAHFIAHBIBHBGAKJTFGFIBHBGDHCGAICGBIGGCHDGMHAIBHBIFHAGAIAKJICHAaBClBACABECABBDqTAFADCmIFAABAGDBBGGBAGABAGDBBGoBAGDBBGgBAGDBBGGBAGABAGDBBGOBAG4BAGDBBmCBAABBHCTIMTBCGPaJBFiVBAABBDFBBOAmrJAAaATAGQUAGZPAQABCmKBAATCLCGHBGGRHCIABIGSHBIATBBIGRHBBLGMBAGCBAHBBLGzHBIAHGIHHAIBHKTCFATCYAGAHABBKJBFMJBFTFOATDHCcAHAKJBFGiFAG0BGGEHBGhHAGABEmFBAABJGeBAHCIDHBICBDIBHAIFHCBDaABCTBKJGdBBGEBKGrBDGZBFKJMABCahGWHBIBHABBTBG0IAHAIAHGBAHAIAHAIBHHIFHJBBHAKJBFKJBFTGFATFBBHNJAHPBwHDIAGuHAIAHEIAHAIEHAIBGHBCKJTGaJHIaITBBAHBIAGdIAHDIBHBIAHCGBKJGrHAIAHBICHAIAHCIBBHTDGjIHHHIBHBBCTEKJBCGCKJGdFFTBDIBGCqBBCCTHBHHCTAHMIAHGGDHAGFHAGBIAHBGABEDrF+DMFADhFkH/gVCAADHghBAADHCHDFBBCFBBDHCHDHCHDFBBCFBBDHBACABACABACABACADHCHDNBBDHEHDHEHDHEHDEBADBCDEAZADAZCDCBADBCDEAZCDDBBDBCDBAZCDHCEZCBBDCBADBCDEAZBBAUKcEOFTBRASAPARBSAPARATHVAWAcEUATIRASATDNBTCXAPAQATKXATANATJUAcEBAcJMAFABBMFXCPAQAFAMJXCPAQABAFMBCYgBOHMJDHAJCHLBOaBCAaDCAaBDACCDBCCDAaACAaBXACEaFCAaACAaACAaACDaADACDDAGDDAaBDBCBXECADDaAXAaBDAaAMPLiCADALDMAaBBDXEaEXBaDXAaBXAaBXAaGXAaeXBaBXAaAXAae3LEAAaHPAQAPAQAaTXBaGPAQA6QBAAXAadXYanXF6EBAABYaKBUM76NBAAMV62CAAXAaIXAa1XH6uBAAXA63DAAPAQAPAQAPAQAPAQAPAQAPAQAPAQAMdarXEPAQAXePAQAPAQAPAQAPAQAPAQAXP6/DAA3CCAAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQAX+PAQAPAQAXfPAQA3BEAAavXUaBXFamBBafBA6oBAACvDvABCCDBAFCCADDACADFFBCBgjBAADAaFADHCCADABETDMATBDlBADABEDABBG3BGFATABNHAGWBIGGBAGGBAGGBAGGBAGGBAGGBAGGBAGGBAHfTBRASARASATCRASATARASATIOATBOATARASATBRASAPAQAPAQAPAQAPAQATEFATJOBTDOATAPATMaBTCPAQAPAQAPAQAPAQAOABhaZBA6YBAABL6VDAABZaLBDUATCaAFAGALAPAQAPAQAPAQAPAQAPAQAaBPAQAPAQAPAQAPAQAOAPAQBaALIHDIBOAFEaBLCFAGATAaBBAmVBAABBHBZBFBGAOAmZBAATAFCGABEGqBAmdBAABAaBMDaJGfajBLGPaeBAMJadMHaAMOafMJamMO6/EAAm/mBAa/mUIFAFAm2RAABCa2BIGnFFTBmLEAAFATCGPKJGBBTAtGAHAJCTAHJTAFAAbFBHBmFBAALJHBTFBHZWFIZBANDBA9FADHADCAAJFAZBADGAADDBATCDABCDAPCCADBECADABADABADAADBXFCCADAGAFBDAGGHAGCHAGDHAGWIBHBIAaDHABCMFaBYAaABFGzTDBHIBGxIPHBBHTBKJBFHRGFTCGATAGBHAKJGbHHTBGWHKIBBKTAGcBCHCIAGuHAIBHDIBHBICTMBAFAKJBDTBGEHAFAGIKJGEBAGoHFIBHBIBHBBIGCHAGHHAIABBKJBBTDGPFAGFaCGAIAHAIAGxHAGAHCGBHBGEHBGAHAGABXGBFATBGKIAHBIBTBGAFBIAHABJGFBBGFBBGFBIGGBAGGBADqZAFDDIFAZBBDjPBAAGiIBHAIBHAIBTAIAHABBKJBFmjuCABLGWBDGwhDgAA9/jBAmtFAABBmpBAABlDGBLDEBEGAHAGJXAGMBAGEBAGABAGBBAGBBAmrBAAZQBPmqFAAQAPAaPG/BBG1BGaABfGLYAaCHPTGPAQATABFHPTAOBNBPAQAPAQAPAQAPAQAPAQAPAQAPAQAPAQATBPAQATDNCTCBATDOAPAQAPAQAPAQATCXAOAXCBATAYATBBDGEBAmGCAABBcABATCYATCPAQATAXATAOATBKJTBXCTBCZPATAQAZANAZADZPAXAQAXAPAQATAPAQATBGJFAGsFBGeBCGFBBGFBBGFBBGCBCYBXAZAaAYBBAaAXDaBBJcCaBBBGLBAGZBAGSBAGBBAGOBBGNBhm6BAABETCBDMsBCaIL0MDaQMBaCBAaMBCaABuasHAhBCAAGcBCGwBOHAMaBDGfMDBIGTLAGHLABEGlHEBEGdBATAGjBDGHTALEBpCnDnmNBAABBKJBFCjBDDjBDGnBHGzBKTACKBACOBACGBACBBADKBADOBADGBADBhCBAAm2EAABIGVBJGHBXFFBAFpBAFIhEBAAGFBBGABAGrBAGBBCGABBGWBATAMHGWaBMGGeBHMIBvGSBAGBBEMEGVMFBCTAGZBETAB/G3BDMBGBMPBBMtGAHCBAHBBEHDGDBAGCBAGcBBHCBDHAMIBGTIBGGcMBTAGcMCBfGHaAGbHBBDMETGBIG1BCTGGVBBMHGSBEMHGRBGTDBLMGhPBAAmIBAAB2CyBMDyBGMFGjHDBHKJhlEAAMeBAGpBAHBOABBGBhKBAAHCGcMJGABHGVHKMDTEBVGRHDTDBlGUMGBTGWBIIAHAIAG0HOTGBDMTKJHAGBHBGABIHCIAGsICHDIBHBTBcATDHABJcABBGYBGKJBFHCGjHEIAHHBAKJTDGAIBGABHGiHATBGABIHBIAGvICHIIBGDTDHDTAIAHAKJGATAGATCBAMTBKGRBAGYICHCIBHAIAHBTFHAGBHAB9GGBAGABAGDBAGOBAGJTABFGuHAICHHBEKJBFHBIBBAGHBBGBBBGVBAGGBAGBBAGEBAHBGAIBHAIDBBIBBBICBBGABFIABEGEIBBBHGBCHEhKCAAG0ICHHIBHCIAHAGDTEKJTBBATAHAGCBdGvICHFIAHAIDHBIAHBGBTAGABHKJhlCAAGuICHDBBIDHBIAHBTWGDHBBhGvICHHIBHAIAHBTCGABKKJBFTMBSGqHAIAHAIBHFIAHAGATABFKJB1GaBBHCIBHDIAHEBDKJMBTCaAGGh4CAAGrICHIIAHBTAhjBAACfDfKJMIBLGHBBGABBGHBAGBBAGXIFBAIBBBHBIAHAGAIAGAIAHATCBIKJhFBAAGHBBGmICHDBBHBIDHAGATAGAIABaGAHJGnHFIAGAHDTHHABHGAHFIBHCGtHMIAHBTCGATEBMmIBAABGTJh1DAAGIBAGkIAHGBAHFIAHAGATEBJKJMSBCTBGdBBHVBAIAHGIAHBIAHBhIBAAGGBAGBBAGlHFBCHABAHBBAHGGAHABHKJBFGFBAGBBAGfIEBAHBBAIBHAIAHAGABGKJh1EAAGSHBIBTBBGHBGAIAGMBAGhIBHEBCIBHAIAHATMKJhVBAAGABOMUaHYDaQBMTAmZOAAhlBAAruBAABATEBKmDDAAhLpAAmgBAATBBMmvQAAcPHAGFHOhp+AAmGJAAh4GCAm4IAABGGeBAKJBDTBmOBAABAKJBFGdBBHETABJGvHGTEaDFDTAaABJKJBAMGBAGUBEGShvKAACfDfMWTDhkBAAmKBAABDHAGAI2BGHDFMB/FBTAFAHABKIBBNm3fBABHmVTAABpGIhmLCAFDBAFGBAFBBAmiEAABOGABcGCBBGABNGDBHmLGAAhDkAAmqBAABEGMBCGIBGGJBBaAHBTAcDhbJBAHtBBHWBI6zBAAB761DAABJamBBa7IBHCaCIFcHHHaBHGadHDa8BU6BBAAHCaAh5BAAMTBLMTBL6WBAABIMYhGCAACZDZCZDGBADRCZDZCABACBBBCABBCBBBCDBACHDDBADABADGBADKCZDZCBBACDBBCHBACGBADZCBBACDBACEBACABCCGBADZCZDZCZDZCZDZCZDZCZDZCZDbBBCYXADYXADFCYXADYXADFCYXADYXADFCYXADYXADFCYXADYXADFCADABBKx6/HAAH2aDHxaHHAaNHAaBTEBOHEBAHOhPRAADJGADTBFDFhUDAAHGBAHQBBHGBAHBBAHEBEF9BgHAhvBAAGsBCHGFGBBKJBDGAaAh/EAAGdHABQGrHDKJBEYAhPHAAGaFAHDKJhlLAAGGBAGDBAGBBAGOBAmEDAABBMIHGBoChDhHGFABDKJBDTBhQMAAM6aAMCYAMDhLBAAMsaAMOhBDAAGDBAGaBAGBBAGABBGABAGJBAGDBAGABAGABFGABDGABAGABAGABAGCBAGBBAGABBGABAGABAGABAGABAGABAGBBAGABBGDBAGGBAGDBAGDBAGABAGJBAGQBEGCBAGEBAGQBzXBhNEAAarBD6jBAABLaOBBaOBAaOBAakBJMM6gCAAB3acBMarBDaIBGaBBNaFhZCAA66DAAZE6XLAABDaQBCaMBC62BAABD6eBAABFaLBDaABOaLBDa3BHaJBFanBHadBBaBhNBAA6TFAABLaNBBaMBCaIBGatBAaGBHaNBDaIBGaIBG6SCAABAa2BkKJhFQAAmfbKABfm5ABABFmdDAABBmBaBABNmw0BAhewAAmdIAAhhXAAmKNBABEmfBBAhQxtCcABd8fBAAh/BAAnvDAAhP4PA99/PABB99/PA");function P(e){return 32===e||9===e||10===e||13===e}const j=[n(D(":")),r(D("A"),D("Z")),n(D("_")),r(D("a"),D("z")),r(192,214),r(216,246),r(192,214),r(216,246),r(248,767),r(880,893),r(895,8191),r(8204,8205),r(8304,8591),r(11264,12271),r(12289,55295),r(63744,64975),r(65008,65533),r(65536,983039)].reduce(u),X=[j,n(D("-")),n(D(".")),r(D("0"),D("9")),n(183),r(768,879),r(8255,8256)].reduce(u),L=H.get("Nd"),Y=k(L),Q=U(r(0,1114111),[H.get("P"),H.get("Z"),H.get("C")].reduce(u)),J=k(Q);function K(e){return 10!==e&&13!==e&&!R(e)}const q={s:P,S:k(P),i:j,I:k(j),c:X,C:k(X),d:L,D:Y,w:Q,W:J},_=m("*"),V=m("\\"),W=m("{"),Z=m("}"),$=m("["),z=m("]"),ee=m("^"),te=m("$"),ne=m(","),re=m("-"),ae=m("("),oe=m(")"),ue=m("."),ie=m("|"),ce=m("+"),le=m("?"),se=m("-["),pe=D("0");function fe(e){function t(e){return new Set(e.split("").map((e=>D(e))))}function o(e,t){const n=e.codePointAt(t);return void 0===n?d(t,["any character"]):f(t+String.fromCodePoint(n).length,n)}const l="xpath"===e.language?N(V,v([y(m("n"),(()=>10)),y(m("r"),(()=>13)),y(m("t"),(()=>9)),y(v([V,ie,ue,re,ee,le,_,ce,W,Z,te,ae,oe,$,z]),(e=>D(e)))])):N(V,v([y(m("n"),(()=>10)),y(m("r"),(()=>13)),y(m("t"),(()=>9)),y(v([V,ie,ue,re,ee,le,_,ce,W,Z,ae,oe,$,z]),(e=>D(e)))]));function s(e,n){const r=t(n);return x(m(e),w(g(o,(e=>r.has(e)),n.split(""))),((e,t)=>function(e){const t=H.get(e);if(null==t)throw new Error(`${e} is not a valid unicode category`);return t}(null===t?e:e+String.fromCodePoint(t))))}const p=v([s("L","ultmo"),s("M","nce"),s("N","dlo"),s("P","cdseifo"),s("Z","slp"),s("S","mcko"),s("C","cfon")]),h=[r(D("a"),D("z")),r(D("A"),D("Z")),r(D("0"),D("9")),n(45)].reduce(u),E=y(N(m("Is"),function(e){return(t,n)=>{const r=e(t,n);return r.success?f(r.offset,t.slice(n,r.offset)):r}}(B(g(o,h,["block identifier"])))),(t=>function(e,t){const n=M.get(e);if(void 0===n){if(t)return a;throw new Error(`The unicode block identifier "${e}" is not known.`)}return n}(t,"xpath"!==e.language))),S=v([p,E]),G=I(m("\\p{"),S,Z,!0),R=y(I(m("\\P{"),S,Z,!0),k),P=N(V,y(v("sSiIcCdDwW".split("").map((e=>m(e)))),(e=>q[e]))),j=y(ue,(()=>K)),X=v([P,G,R]),L=t("\\[]"),Y=g(o,(e=>!L.has(e)),["unescaped character"]),Q=v([l,Y]),J=v([y(re,(()=>null)),Q]),fe=x(J,N(re,J),r);function he(e,t){return[e].concat(t||[])}const de=y(function(e){return(t,n)=>{const r=e(t,n);return r.success?f(n,r.value):r}}(v([z,se])),(()=>null)),me=D("-"),ye=v([y(T(T(re,C($,["not ["])),de),(()=>me)),N(C(re,["not -"]),Q)]),ge=v([x(y(ye,n),v([function(e,t){return ge(e,t)},de]),he),x(v([fe,X]),v([we,de]),he)]),ve=v([x(y(Q,n),v([ge,de]),he),x(v([fe,X]),v([we,de]),he)]);function we(e,t){return ve(e,t)}const Ae=y(ve,(e=>e.reduce(u))),xe=y(N(ee,Ae),k),Be=x(v([N(C(ee,["not ^"]),Ae),xe]),w(N(re,(function(e,t){return be(e,t)}))),U),be=I($,Be,z,!0),Ee="xpath"===e.language?v([y(l,n),X,be,j,y(ee,(()=>e=>e===i)),y(te,(()=>e=>e===c))]):v([y(l,n),X,be,j]),Ne="xpath"===e.language?t(".\\?*+{}()|^$[]"):t(".\\?*+{}()|[]"),Te=g(o,(e=>!Ne.has(e)),["NormalChar"]),Ie=y(N(V,x(y(g(o,r(D("1"),D("9")),["digit"]),(e=>e-pe)),A(y(g(o,r(pe,D("9")),["digit"]),(e=>e-pe))),((e,t)=>{t.reduce(((e,t)=>10*e+t),e)}))),(e=>{throw new Error("Backreferences in XPath patterns are not yet implemented.")})),Ce="xpath"===e.language?v([y(Te,(e=>({kind:"predicate",value:n(e)}))),y(Ee,(e=>({kind:"predicate",value:e}))),y(I(ae,N(w(m("?:")),ke),oe,!0),(e=>({kind:"regexp",value:e}))),Ie]):v([y(Te,(e=>({kind:"predicate",value:n(e)}))),y(Ee,(e=>({kind:"predicate",value:e}))),y(I(ae,ke,oe,!0),(e=>({kind:"regexp",value:e})))]),Fe=y(B(y(g(o,r(pe,D("9")),["digit"]),(e=>e-pe))),(e=>e.reduce(((e,t)=>10*e+t)))),Oe=v([x(Fe,N(ne,Fe),((e,t)=>{if(t<e)throw new Error("quantifier range is in the wrong order");return{min:e,max:t}})),x(Fe,ne,(e=>({min:e,max:null}))),y(Fe,(e=>({min:e,max:e})))]),Se="xpath"===e.language?x(v([y(le,(()=>({min:0,max:1}))),y(_,(()=>({min:0,max:null}))),y(ce,(()=>({min:1,max:null}))),I(W,Oe,Z,!0)]),w(le),((e,t)=>e)):v([y(le,(()=>({min:0,max:1}))),y(_,(()=>({min:0,max:null}))),y(ce,(()=>({min:1,max:null}))),I(W,Oe,Z,!0)]),Ge=x(Ce,y(w(Se),(e=>null===e?{min:1,max:1}:e)),((e,t)=>[e,t])),De=A(Ge),Re=x(De,A(N(ie,F(De))),((e,t)=>[e].concat(t)));function ke(e,t){return Re(e,t)}const Ue=function(e){return x(e,O,b)}(Re);return function(e){let t;try{t=Ue(e,0)}catch(t){throw new Error(`Error parsing pattern "${e}": ${t instanceof Error?t.message:t}`)}return t.success?t.value:function(e,t,n){const r=n.map((e=>`"${e}"`));throw new Error(`Error parsing pattern "${e}" at offset ${t}: expected ${r.length>1?"one of "+r.join(", "):r[0]} but found "${e.slice(t,t+1)}"`)}(e,t.offset,t.expected)}}function he(e){return[...e].map((e=>e.codePointAt(0)))}e.compile=function(e,n={language:"xsd"}){const r=fe(n)(e),a=t.compileVM((e=>{p(e,r,"xpath"===n.language),e.accept()}));return function(e){const t="xpath"===n.language?[i,...he(e),c]:he(e);return a.execute(t).success}},Object.defineProperty(e,"__esModule",{value:!0})}((n="undefined"!=typeof globalThis?globalThis:n||self).xspattern={},n.whynot),(r=this).fontoxpath=(a=r.xspattern,o=r.prsc,function(e,t){const n="3.29.0",r={};var a;function o(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var u="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function i(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var c=i(this);function l(e,t){if(t)e:{var n=c;e=e.split(".");for(var r=0;r<e.length-1;r++){var a=e[r];if(!(a in n))break e;n=n[a]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&u(n,e,{configurable:!0,writable:!0,value:t})}}function s(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function p(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:o(e)}}function f(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function h(e){return e instanceof Array?e:f(p(e))}l("Symbol",(function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(r+(e||"")+"_"+a++,e)}function n(e,t){this.h=e,u(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;n.prototype.toString=function(){return this.h};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",a=0;return t})),l("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var r=c[t[n]];"function"==typeof r&&"function"!=typeof r.prototype[e]&&u(r.prototype,e,{configurable:!0,writable:!0,value:function(){return s(o(this))}})}return e})),l("Symbol.asyncIterator",(function(e){return e||Symbol("Symbol.asyncIterator")}));var d,m="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)d=Object.setPrototypeOf;else{var y;e:{var g={a:!0},v={};try{v.__proto__=g,y=v.a;break e}catch(e){}y=!1}d=y?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var w=d;function A(e,t){if(e.prototype=m(t.prototype),e.prototype.constructor=e,w)w(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(t,n);r&&Object.defineProperty(e,n,r)}else e[n]=t[n];e.zc=t.prototype}function x(){this.B=!1,this.o=null,this.l=void 0,this.h=1,this.da=0,this.v=null}function B(e){if(e.B)throw new TypeError("Generator is already running");e.B=!0}function b(e,t){e.v={kc:t,mc:!0},e.h=e.da}function E(e){this.h=new x,this.o=e}function N(e,t){B(e.h);var n=e.h.o;return n?T(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.h.return):(e.h.return(t),I(e))}function T(e,t,n,r){try{var a=t.call(e.h.o,n);if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");if(!a.done)return e.h.B=!1,a;var o=a.value}catch(t){return e.h.o=null,b(e.h,t),I(e)}return e.h.o=null,r.call(e.h,o),I(e)}function I(e){for(;e.h.h;)try{var t=e.o(e.h);if(t)return e.h.B=!1,{value:t.value,done:!1}}catch(t){e.h.l=void 0,b(e.h,t)}if(e.h.B=!1,e.h.v){if(t=e.h.v,e.h.v=null,t.mc)throw t.kc;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function C(e){this.next=function(t){return B(e.h),e.h.o?t=T(e,e.h.o.next,t,e.h.s):(e.h.s(t),t=I(e)),t},this.throw=function(t){return B(e.h),e.h.o?t=T(e,e.h.o.throw,t,e.h.s):(b(e.h,t),t=I(e)),t},this.return=function(t){return N(e,t)},this[Symbol.iterator]=function(){return this}}function F(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise((function(r,a){function o(e){e.done?r(e.value):Promise.resolve(e.value).then(t,n).then(o,a)}o(e.next())}))}function O(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}x.prototype.s=function(e){this.l=e},x.prototype.return=function(e){this.v={return:e},this.h=this.da},l("Promise",(function(e){function t(e){this.o=0,this.v=void 0,this.h=[],this.da=!1;var t=this.B();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.h=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.o=function(e){if(null==this.h){this.h=[];var t=this;this.v((function(){t.l()}))}this.h.push(e)};var a=c.setTimeout;n.prototype.v=function(e){a(e,0)},n.prototype.l=function(){for(;this.h&&this.h.length;){var e=this.h;this.h=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.B(e)}}}this.h=null},n.prototype.B=function(e){this.v((function(){throw e}))},t.prototype.B=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.la),reject:e(this.l)}},t.prototype.la=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.ab(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.S(e):this.s(e)}},t.prototype.S=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.Ba(t,e):this.s(e)},t.prototype.l=function(e){this.ta(2,e)},t.prototype.s=function(e){this.ta(1,e)},t.prototype.ta=function(e,t){if(0!=this.o)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.o);this.o=e,this.v=t,2===this.o&&this.pa(),this.A()},t.prototype.pa=function(){var e=this;a((function(){if(e.K()){var t=c.console;void 0!==t&&t.error(e.v)}}),1)},t.prototype.K=function(){if(this.da)return!1;var e=c.CustomEvent,t=c.Event,n=c.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=c.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.v,n(e))},t.prototype.A=function(){if(null!=this.h){for(var e=0;e<this.h.length;++e)o.o(this.h[e]);this.h=null}};var o=new n;return t.prototype.ab=function(e){var t=this.B();e.rb(t.resolve,t.reject)},t.prototype.Ba=function(e,t){var n=this.B();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{a(e(t))}catch(e){o(e)}}:t}var a,o,u=new t((function(e,t){a=e,o=t}));return this.rb(r(e,a),r(n,o)),u},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.rb=function(e,t){function n(){switch(r.o){case 1:e(r.v);break;case 2:t(r.v);break;default:throw Error("Unexpected state: "+r.o)}}var r=this;null==this.h?o.o(n):this.h.push(n),this.da=!0},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var a=p(e),o=a.next();!o.done;o=a.next())r(o.value).rb(t,n)}))},t.all=function(e){var n=p(e),a=n.next();return a.done?r([]):new t((function(e,t){function o(t){return function(n){u[t]=n,0==--i&&e(u)}}var u=[],i=0;do{u.push(void 0),i++,r(a.value).rb(o(u.length-1),t),a=n.next()}while(!a.done)}))},t}));var G="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var a in r)S(r,a)&&(e[a]=r[a])}return e};function D(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function R(e,t){return e=void 0!==e?String(e):" ",0<t&&e?e.repeat(Math.ceil(t/e.length)).substring(0,t):""}function k(e,t,n){e instanceof String&&(e=String(e));for(var r=e.length,a=0;a<r;a++){var o=e[a];if(t.call(n,o,a,e))return{Jb:a,Qb:o}}return{Jb:-1,Qb:void 0}}function U(e){return e||Array.prototype.fill}function M(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}function H(e,t){if(!("0"!==e&&"-0"!==e||"0"!==t&&"-0"!==t))return 0;var n=/(?:\+|(-))?(\d+)?(?:\.(\d+))?/;e=n.exec(e+"");var r=n.exec(t+""),a=!e[1],o=!r[1];return t=(e[2]||"").replace(/^0*/,""),n=(r[2]||"").replace(/^0*/,""),e=e[3]||"",r=r[3]||"",a&&!o?1:!a&&o?-1:(a=a&&o,t.length>n.length?a?1:-1:t.length<n.length?a?-1:1:t>n?a?1:-1:t<n?a?-1:1:(t=Math.max(e.length,r.length),(n=e.padEnd(t,"0"))>(t=r.padEnd(t,"0"))?a?1:-1:n<t?a?-1:1:0))}function P(e,t){return!(-1<(e=e.toString()).indexOf(".")&&0===t)&&(!(e=/^[-+]?0*([1-9]\d*)?(?:\.((?:\d*[1-9])*)0*)?$/.exec(e))[2]||e[2].length<=t)}function j(){return function(e,t){return 1>H(e,t)}}function X(){return function(e,t){return 0>H(e,t)}}function L(){return function(e,t){return-1<H(e,t)}}function Y(){return function(e,t){return 0<H(e,t)}}function Q(e,t){switch(t){case"required":return/(Z)|([+-])([01]\d):([0-5]\d)$/.test(e.toString());case"prohibited":return!/(Z)|([+-])([01]\d):([0-5]\d)$/.test(e.toString());case"optional":return!0}}function J(e){switch(e){case 1:case 0:case 6:case 3:case 18:case 22:case 21:case 20:case 23:case 44:return{};case 4:return{na:P,ya:j(),xc:X(),za:L(),yc:Y()};case 9:case 8:case 7:case 11:case 12:case 13:case 15:case 14:return{Ea:Q};default:return null}}l("Object.assign",(function(e){return e||G})),l("String.prototype.repeat",(function(e){return e||function(e){var t=D(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),l("String.prototype.padEnd",(function(e){return e||function(e,t){var n=D(this,null,"padStart");return n+R(t,e-n.length)}})),l("WeakMap",(function(e){function t(e){if(this.h=(c+=Math.random()+1).toString(),e){e=p(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function r(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function a(e){if(!S(e,i)){var t=new n;u(e,i,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&a(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),r=new e([[t,2],[n,3]]);return 2==r.get(t)&&3==r.get(n)&&(r.delete(t),r.set(n,4),!r.has(t)&&4==r.get(n))}catch(e){return!1}}())return e;var i="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var c=0;return t.prototype.set=function(e,t){if(!r(e))throw Error("Invalid WeakMap key");if(a(e),!S(e,i))throw Error("WeakMap key fail: "+e);return e[i][this.h]=t,this},t.prototype.get=function(e){return r(e)&&S(e,i)?e[i][this.h]:void 0},t.prototype.has=function(e){return r(e)&&S(e,i)&&S(e[i],this.h)},t.prototype.delete=function(e){return!!(r(e)&&S(e,i)&&S(e[i],this.h))&&delete e[i][this.h]},t})),l("Map",(function(e){function t(){var e={};return e.Ga=e.next=e.head=e}function n(e,t){var n=e.h;return s((function(){if(n){for(;n.head!=e.h;)n=n.Ga;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function r(e,t){var n=t&&typeof t;"object"==n||"function"==n?o.has(t)?n=o.get(t):(n=""+ ++u,o.set(t,n)):n="p_"+t;var r=e.o[n];if(r&&S(e.o,n))for(e=0;e<r.length;e++){var a=r[e];if(t!=t&&a.key!=a.key||t===a.key)return{id:n,list:r,index:e,ka:a}}return{id:n,list:r,index:-1,ka:void 0}}function a(e){if(this.o={},this.h=t(),this.size=0,e){e=p(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(p([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var r=n.entries(),a=r.next();return!a.done&&a.value[0]==t&&"s"==a.value[1]&&!((a=r.next()).done||4!=a.value[0].x||"t"!=a.value[1]||!r.next().done)}catch(e){return!1}}())return e;var o=new WeakMap;a.prototype.set=function(e,t){var n=r(this,e=0===e?0:e);return n.list||(n.list=this.o[n.id]=[]),n.ka?n.ka.value=t:(n.ka={next:this.h,Ga:this.h.Ga,head:this.h,key:e,value:t},n.list.push(n.ka),this.h.Ga.next=n.ka,this.h.Ga=n.ka,this.size++),this},a.prototype.delete=function(e){return!(!(e=r(this,e)).ka||!e.list||(e.list.splice(e.index,1),e.list.length||delete this.o[e.id],e.ka.Ga.next=e.ka.next,e.ka.next.Ga=e.ka.Ga,e.ka.head=null,this.size--,0))},a.prototype.clear=function(){this.o={},this.h=this.h.Ga=t(),this.size=0},a.prototype.has=function(e){return!!r(this,e).ka},a.prototype.get=function(e){return(e=r(this,e).ka)&&e.value},a.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},a.prototype.keys=function(){return n(this,(function(e){return e.key}))},a.prototype.values=function(){return n(this,(function(e){return e.value}))},a.prototype.forEach=function(e,t){for(var n,r=this.entries();!(n=r.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},a.prototype[Symbol.iterator]=a.prototype.entries;var u=0;return a})),l("Array.prototype.find",(function(e){return e||function(e,t){return k(this,e,t).Qb}})),l("String.prototype.startsWith",(function(e){return e||function(e,t){var n=D(this,e,"startsWith"),r=n.length,a=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var o=0;o<a&&t<r;)if(n[t++]!=e[o++])return!1;return o>=a}})),l("Array.prototype.fill",(function(e){return e||function(e,t,n){var r=this.length||0;for(0>t&&(t=Math.max(0,r+t)),(null==n||n>r)&&(n=r),0>(n=Number(n))&&(n=Math.max(0,r+n)),t=Number(t||0);t<n;t++)this[t]=e;return this}})),l("Int8Array.prototype.fill",U),l("Uint8Array.prototype.fill",U),l("Uint8ClampedArray.prototype.fill",U),l("Int16Array.prototype.fill",U),l("Uint16Array.prototype.fill",U),l("Int32Array.prototype.fill",U),l("Uint32Array.prototype.fill",U),l("Float32Array.prototype.fill",U),l("Float64Array.prototype.fill",U),l("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var r=[],a="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof a){e=a.call(e);for(var o=0;!(a=e.next()).done;)r.push(t.call(n,a.value,o++))}else for(a=e.length,o=0;o<a;o++)r.push(t.call(n,e[o],o));return r}})),l("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}})),l("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(t=t||0)&&(t=Math.max(t+r,0));t<r;t++){var a=n[t];if(a===e||Object.is(a,e))return!0}return!1}})),l("String.prototype.includes",(function(e){return e||function(e,t){return-1!==D(this,e,"includes").indexOf(e,t||0)}})),l("Number.MAX_SAFE_INTEGER",(function(){return 9007199254740991})),l("Number.MIN_SAFE_INTEGER",(function(){return-9007199254740991})),l("Math.trunc",(function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}})),l("Number.isFinite",(function(e){return e||function(e){return"number"==typeof e&&!isNaN(e)&&1/0!==e&&-1/0!==e}})),l("String.prototype.padStart",(function(e){return e||function(e,t){var n=D(this,null,"padStart");return R(t,e-n.length)+n}})),l("Array.prototype.keys",(function(e){return e||function(){return M(this,(function(e){return e}))}})),l("Number.isInteger",(function(e){return e||function(e){return!!Number.isFinite(e)&&e===Math.floor(e)}})),l("Number.isSafeInteger",(function(e){return e||function(e){return Number.isInteger(e)&&Math.abs(e)<=Number.MAX_SAFE_INTEGER}})),l("Array.prototype.findIndex",(function(e){return e||function(e,t){return k(this,e,t).Jb}})),l("String.prototype.endsWith",(function(e){return e||function(e,t){var n=D(this,e,"endsWith");void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var r=e.length;0<r&&0<t;)if(n[--t]!=e[--r])return!1;return 0>=r}})),l("String.fromCodePoint",(function(e){return e||function(e){for(var t="",n=0;n<arguments.length;n++){var r=Number(arguments[n]);if(0>r||1114111<r||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);65535>=r?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(r>>>10&1023|55296),t+=String.fromCharCode(1023&r|56320))}return t}})),l("String.prototype.codePointAt",(function(e){return e||function(e){var t=D(this,null,"codePointAt"),n=t.length;if(0<=(e=Number(e)||0)&&e<n){e|=0;var r=t.charCodeAt(e);return 55296>r||56319<r||e+1===n||56320>(e=t.charCodeAt(e+1))||57343<e?r:1024*(r-55296)+e+9216}}})),l("Set",(function(e){function t(e){if(this.h=new Map,e){e=p(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.h.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(p([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var r=n.entries(),a=r.next();return!a.done&&a.value[0]==t&&a.value[1]==t&&!(a=r.next()).done&&a.value[0]!=t&&4==a.value[0].x&&a.value[1]==a.value[0]&&r.next().done}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.h.set(e,e),this.size=this.h.size,this},t.prototype.delete=function(e){return e=this.h.delete(e),this.size=this.h.size,e},t.prototype.clear=function(){this.h.clear(),this.size=0},t.prototype.has=function(e){return this.h.has(e)},t.prototype.entries=function(){return this.h.entries()},t.prototype.values=function(){return this.h.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.h.forEach((function(r){return e.call(t,r,r,n)}))},t)})),l("Math.log10",(function(e){return e||function(e){return Math.log(e)/Math.LN10}})),l("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)S(e,t)&&n.push(e[t]);return n}})),l("Number.isNaN",(function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}})),l("Array.prototype.values",(function(e){return e||function(){return M(this,(function(e,t){return t}))}})),l("Object.getOwnPropertySymbols",(function(e){return e||function(){return[]}}));var K={},q={};function _(e){return/^([+-]?(\d*(\.\d*)?([eE][+-]?\d*)?|INF)|NaN)$/.test(e)}function V(e){return/^[_:A-Za-z][-._:A-Za-z0-9]*$/.test(e)}function W(e){return V(e)&&/^[_A-Za-z]([-._A-Za-z0-9])*$/.test(e)}function Z(e){return 1===(e=e.split(":")).length?W(e[0]):2===e.length&&W(e[0])&&W(e[1])}function $(e){return!/[\u0009\u000A\u000D]/.test(e)}function z(e){return W(e)}var ee=new Map([[45,function(){return!0}],[46,function(){return!0}],[1,function(){return!0}],[0,function(e){return/^(0|1|true|false)$/.test(e)}],[6,function(e){return _(e)}],[3,_],[4,function(e){return/^[+-]?\d*(\.\d*)?$/.test(e)}],[18,function(e){return/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.test(e)}],[9,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])T(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[8,function(e){return/^(([01][0-9]|2[0-3]):[0-5][0-9]:[0-5][0-9](\.[0-9]+)?|(24:00:00(\.0+)?))(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[7,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[11,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})-(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[12,function(e){return/^-?([1-9][0-9]{3,}|0[0-9]{3})(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[13,function(e){return/^--(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[15,function(e){return/^---(0[1-9]|[12][0-9]|3[01])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[14,function(e){return/^--(0[1-9]|1[0-2])(Z|(\+|-)((0[0-9]|1[0-3]):[0-5][0-9]|14:00))?$/.test(e)}],[22,function(e){return/^([0-9A-Fa-f]{2})*$/.test(e)}],[21,function(e){return new RegExp(/^((([A-Za-z0-9+/] ?){4})*((([A-Za-z0-9+/] ?){3}[A-Za-z0-9+/])|(([A-Za-z0-9+/] ?){2}[AEIMQUYcgkosw048] ?=)|(([A-Za-z0-9+/] ?)[AQgw] ?= ?=)))?$/).test(e)}],[20,function(){return!0}],[44,Z],[48,$],[52,function(e){return $(e)&&!/^ | {2,}| $/.test(e)}],[51,function(e){return/^[a-zA-Z]{1,8}(-[a-zA-Z0-9]{1,8})*$/.test(e)}],[50,function(e){return/^[-._:A-Za-z0-9]+$/.test(e)}],[25,V],[23,Z],[24,W],[42,z],[41,z],[26,function(e){return W(e)}],[5,function(e){return/^[+-]?\d+$/.test(e)}],[16,function(e){return/^-?P[0-9]+(Y([0-9]+M)?|M)$/.test(e)}],[17,function(e){return/^-?P([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9]+)?S)?)?$/.test(e)}]]),te=Object.create(null);function ne(e,t){if(!te[t])throw Error("Unknown type");return{type:t,value:e}}[{D:0,name:59},{D:0,name:46,parent:59,L:{whiteSpace:"preserve"}},{D:0,name:19,parent:46},{D:0,name:1,parent:46},{D:0,name:0,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:4,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:6,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:3,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:18,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:9,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:8,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:7,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:11,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:12,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:13,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:15,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:14,parent:46,L:{Ea:"optional",whiteSpace:"collapse"}},{D:0,name:22,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:21,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:20,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:23,parent:46,L:{whiteSpace:"collapse"}},{D:0,name:44,parent:46,L:{whiteSpace:"collapse"}},{D:1,name:10,T:9,L:{whiteSpace:"collapse",Ea:"required"}},{D:1,name:48,T:1,L:{whiteSpace:"replace"}},{D:1,name:52,T:48,L:{whiteSpace:"collapse"}},{D:1,name:51,T:52,L:{whiteSpace:"collapse"}},{D:1,name:50,T:52,L:{whiteSpace:"collapse"}},{D:2,name:49,type:50,L:{minLength:1,whiteSpace:"collapse"}},{D:1,name:25,T:52,L:{whiteSpace:"collapse"}},{D:1,name:24,T:25,L:{whiteSpace:"collapse"}},{D:1,name:42,T:24,L:{whiteSpace:"collapse"}},{D:1,name:41,T:24,L:{whiteSpace:"collapse"}},{D:2,name:43,type:41,L:{minLength:1,whiteSpace:"collapse"}},{D:1,name:26,T:24,L:{whiteSpace:"collapse"}},{D:2,name:40,type:26,L:{minLength:1,whiteSpace:"collapse"}},{D:0,name:5,parent:4,L:{na:0,whiteSpace:"collapse"}},{D:1,name:27,T:5,L:{na:0,ya:"0",whiteSpace:"collapse"}},{D:1,name:28,T:27,L:{na:0,ya:"-1",whiteSpace:"collapse"}},{D:1,name:31,T:5,L:{na:0,ya:"9223372036854775807",za:"-9223372036854775808",whiteSpace:"collapse"}},{D:1,name:32,T:31,L:{na:0,ya:"2147483647",za:"-2147483648",whiteSpace:"collapse"}},{D:1,name:33,T:32,L:{na:0,ya:"32767",za:"-32768",whiteSpace:"collapse"}},{D:1,name:34,T:33,L:{na:0,ya:"127",za:"-128",whiteSpace:"collapse"}},{D:1,name:30,T:5,L:{na:0,za:"0",whiteSpace:"collapse"}},{D:1,name:36,T:30,L:{na:0,ya:"18446744073709551615",za:"0",whiteSpace:"collapse"}},{D:1,name:35,T:36,L:{na:0,ya:"4294967295",za:"0",whiteSpace:"collapse"}},{D:1,name:38,T:35,L:{na:0,ya:"65535",za:"0",whiteSpace:"collapse"}},{D:1,name:37,T:38,L:{na:0,ya:"255",za:"0",whiteSpace:"collapse"}},{D:1,name:29,T:30,L:{na:0,za:"1",whiteSpace:"collapse"}},{D:1,name:16,T:18,L:{whiteSpace:"collapse"}},{D:1,name:17,T:18,L:{whiteSpace:"collapse"}},{D:1,name:60,T:59},{D:3,name:39,Fa:[]},{D:1,name:61,T:60},{D:1,name:62,T:60},{D:0,name:53,parent:59},{D:1,name:54,T:53},{D:1,name:58,T:53},{D:1,name:47,T:53},{D:1,name:56,T:53},{D:1,name:57,T:53},{D:1,name:55,T:53},{D:3,name:2,Fa:[4,5,6,3]},{D:3,name:63,Fa:[]}].forEach((function(e){var t=e.name,n=e.L||{};switch(e.D){case 0:e=e.parent?te[e.parent]:null;var r=ee.get(t)||null;te[t]={D:0,type:t,Na:n,parent:e,kb:r,Pa:J(t),Fa:[]};break;case 1:e=te[e.T],r=ee.get(t)||null,te[t]={D:1,type:t,Na:n,parent:e,kb:r,Pa:e.Pa,Fa:[]};break;case 2:te[t]={D:2,type:t,Na:n,parent:te[e.type],kb:null,Pa:K,Fa:[]};break;case 3:e=e.Fa.map((function(e){return te[e]})),te[t]={D:3,type:t,Na:n,parent:null,kb:null,Pa:q,Fa:e}}}));var re=ne(!0,0),ae=ne(!1,0);function oe(e){return Error("FORG0006: "+(void 0===e?"A wrong argument type was specified in a function call.":e))}function ue(e,t){this.done=e,this.value=t}var ie=new ue(!0,void 0);function ce(e){return new ue(!1,e)}function le(e,t){if(3===t.D)return!!t.Fa.find((function(t){return le(e,t)}));for(;e;){if(e.type===t.type)return!0;if(3===e.D)return!!e.Fa.find((function(e){return se(e.type,t.type)}));e=e.parent}return!1}function se(e,t){return e===t||le(te[e],te[t])}function pe(e){this.o=Ie,this.h=e;var t=-1;this.value={next:function(){return++t>=e.length?ie:ce(e[t])}}}function fe(){this.value={next:function(){return ie}}}function he(e,t){this.type=e,this.value=t}(a=pe.prototype).sb=function(){return this},a.filter=function(e){var t=this,n=-1;return this.o.create({next:function(){for(n++;n<t.h.length&&!e(t.h[n],n,t);)n++;return n>=t.h.length?ie:ce(t.h[n])}})},a.first=function(){return this.h[0]},a.O=function(){return this.h},a.ha=function(){if(se(this.h[0].type,53))return!0;throw oe("Cannot determine the effective boolean value of a sequence with a length higher than one.")},a.Qa=function(){return this.h.length},a.G=function(){return!1},a.wa=function(){return!1},a.map=function(e){var t=this,n=-1;return this.o.create({next:function(){return++n>=t.h.length?ie:ce(e(t.h[n],n,t))}},this.h.length)},a.M=function(e){return e(this.h)},a.Z=function(e){return e.multiple?e.multiple(this):e.default(this)},(a=fe.prototype).sb=function(){return this},a.filter=function(){return this},a.first=function(){return null},a.O=function(){return[]},a.ha=function(){return!1},a.Qa=function(){return 0},a.G=function(){return!0},a.wa=function(){return!1},a.map=function(){return this},a.M=function(e){return e([])},a.Z=function(e){return e.empty?e.empty(this):e.default(this)};var de={},me=(de[0]="xs:boolean",de[1]="xs:string",de[2]="xs:numeric",de[3]="xs:double",de[4]="xs:decimal",de[5]="xs:integer",de[6]="xs:float",de[7]="xs:date",de[8]="xs:time",de[9]="xs:dateTime",de[10]="xs:dateTimeStamp",de[11]="xs:gYearMonth",de[12]="xs:gYear",de[13]="xs:gMonthDay",de[14]="xs:gMonth",de[15]="xs:gDay",de[16]="xs:yearMonthDuration",de[17]="xs:dayTimeDuration",de[18]="xs:duration",de[19]="xs:untypedAtomic",de[20]="xs:anyURI",de[21]="xs:base64Binary",de[22]="xs:hexBinary",de[23]="xs:QName",de[24]="xs:NCName",de[25]="xs:Name",de[26]="xs:ENTITY",de[27]="xs:nonPositiveInteger",de[28]="xs:negativeInteger",de[29]="xs:positiveInteger",de[30]="xs:nonNegativeInteger",de[31]="xs:long",de[32]="xs:int",de[33]="xs:short",de[34]="xs:byte",de[35]="xs:unsignedInt",de[36]="xs:unsignedLong",de[37]="xs:unsignedByte",de[38]="xs:unsignedShort",de[39]="xs:error",de[40]="xs:ENTITIES",de[41]="xs:IDREF",de[42]="xs:ID",de[43]="xs:IDREFS",de[44]="xs:NOTATION",de[45]="xs:anySimpleType",de[46]="xs:anyAtomicType",de[47]="attribute()",de[48]="xs:normalizedString",de[49]="xs:NMTOKENS",de[50]="xs:NMTOKEN",de[51]="xs:language",de[52]="xs:token",de[53]="node()",de[54]="element()",de[55]="document-node()",de[56]="text()",de[57]="processing-instruction()",de[58]="comment()",de[59]="item()",de[60]="function(*)",de[61]="map(*)",de[62]="array(*)",de[63]="none",de),ye={"xs:boolean":0,"xs:string":1,"xs:numeric":2,"xs:double":3,"xs:decimal":4,"xs:integer":5,"xs:float":6,"xs:date":7,"xs:time":8,"xs:dateTime":9,"xs:dateTimeStamp":10,"xs:gYearMonth":11,"xs:gYear":12,"xs:gMonthDay":13,"xs:gMonth":14,"xs:gDay":15,"xs:yearMonthDuration":16,"xs:dayTimeDuration":17,"xs:duration":18,"xs:untypedAtomic":19,"xs:anyURI":20,"xs:base64Binary":21,"xs:hexBinary":22,"xs:QName":23,"xs:NCName":24,"xs:Name":25,"xs:ENTITY":26,"xs:nonPositiveInteger":27,"xs:negativeInteger":28,"xs:positiveInteger":29,"xs:nonNegativeInteger":30,"xs:long":31,"xs:int":32,"xs:short":33,"xs:byte":34,"xs:unsignedInt":35,"xs:unsignedLong":36,"xs:unsignedByte":37,"xs:unsignedShort":38,"xs:error":39,"xs:ENTITIES":40,"xs:IDREF":41,"xs:ID":42,"xs:IDREFS":43,"xs:NOTATION":44,"xs:anySimpleType":45,"xs:anyAtomicType":46,"attribute()":47,"xs:normalizedString":48,"xs:NMTOKENS":49,"xs:NMTOKEN":50,"xs:language":51,"xs:token":52,"node()":53,"element()":54,"document-node()":55,"text()":56,"processing-instruction()":57,"comment()":58,"item()":59,"function(*)":60,"map(*)":61,"array(*)":62};function ge(e){return 2===e.g?me[e.type]+"*":1===e.g?me[e.type]+"+":0===e.g?me[e.type]+"?":me[e.type]}function ve(e){if("none"===e)throw Error('XPST0051: The type "none" could not be found');if(!e.startsWith("xs:")&&0<=e.indexOf(":"))throw Error("XPST0081: Invalid prefix for input "+e);var t=ye[e];if(void 0===t)throw Error('XPST0051: The type "'+e+'" could not be found');return t}function we(e){switch(e[e.length-1]){case"*":return{type:ve(e.substr(0,e.length-1)),g:2};case"?":return{type:ve(e.substr(0,e.length-1)),g:0};case"+":return{type:ve(e.substr(0,e.length-1)),g:1};default:return{type:ve(e),g:3}}}function Ae(e){switch(e){case"*":return 2;case"?":return 0;case"+":return 1;default:return 3}}function xe(e){var t=e.value;if(se(e.type,53))return!0;if(se(e.type,0))return t;if(se(e.type,1)||se(e.type,20)||se(e.type,19))return 0!==t.length;if(se(e.type,2))return!isNaN(t)&&0!==t;throw oe("Cannot determine the effective boolean value of a value with the type "+me[e.type])}function Be(e,t){var n=this;this.B=Ie,this.value={next:function(t){return null!==n.o&&n.h>=n.o?ie:void 0!==n.v[n.h]?ce(n.v[n.h++]):(t=e.next(t)).done?(n.o=n.h,t):((n.l||2>n.h)&&(n.v[n.h]=t.value),n.h++,t)}},this.l=!1,this.v=[],this.h=0,this.o=void 0===t?null:t}function be(e,t){e.h=void 0===t?0:t}function Ee(e){this.v=Ie,this.h=e;var t=!1;this.value={next:function(){return t?ie:(t=!0,ce(e))}},this.o=null}(a=Be.prototype).sb=function(){return this.B.create(this.O())},a.filter=function(e){var t=this,n=-1,r=this.value;return this.B.create({next:function(a){for(n++,a=r.next(a);!a.done&&!e(a.value,n,t);)n++,a=r.next(0);return a}})},a.first=function(){if(void 0!==this.v[0])return this.v[0];var e=this.value.next(0);return be(this),e.done?null:e.value},a.O=function(){if(this.h>this.v.length&&this.o!==this.v.length)throw Error("Implementation error: Sequence Iterator has progressed.");var e=this.value;this.l=!0;for(var t=e.next(0);!t.done;)t=e.next(0);return this.v},a.ha=function(){var e=this.value,t=this.h;be(this);var n=e.next(0);if(n.done)return be(this,t),!1;if(se((n=n.value).type,53))return be(this,t),!0;if(!e.next(0).done)throw oe("Cannot determine the effective boolean value of a sequence with a length higher than one.");return be(this,t),xe(n)},a.Qa=function(e){if(null!==this.o)return this.o;if(void 0!==e&&e)return-1;e=this.h;var t=this.O().length;return be(this,e),t},a.G=function(){return 0===this.o||null===this.first()},a.wa=function(){if(null!==this.o)return 1===this.o;var e=this.value,t=this.h;return be(this),e.next(0).done?(be(this,t),!1):(e=e.next(0),be(this,t),e.done)},a.map=function(e){var t=this,n=0,r=this.value;return this.B.create({next:function(a){return(a=r.next(a)).done?ie:ce(e(a.value,n++,t))}},this.o)},a.M=function(e,t){var n,r=this.value,a=[],o=!0;return function(){for(var u=r.next(o?0:t);!u.done;u=r.next(t))o=!1,a.push(u.value);n=e(a).value}(),this.B.create({next:function(){return n.next(0)}})},a.Z=function(e){function t(e){r=e.value,-1!==(e=e.Qa(!0))&&(n.o=e)}var n=this,r=null;return this.B.create({next:function(a){return r?r.next(a):n.G()?(t(e.empty?e.empty(n):e.default(n)),r.next(a)):n.wa()?(t(e.m?e.m(n):e.default(n)),r.next(a)):(t(e.multiple?e.multiple(n):e.default(n)),r.next(a))}})},(a=Ee.prototype).sb=function(){return this},a.filter=function(e){return e(this.h,0,this)?this:this.v.create()},a.first=function(){return this.h},a.O=function(){return[this.h]},a.ha=function(){return null===this.o&&(this.o=xe(this.h)),this.o},a.Qa=function(){return 1},a.G=function(){return!1},a.wa=function(){return!0},a.map=function(e){return this.v.create(e(this.h,0,this))},a.M=function(e){return e([this.h])},a.Z=function(e){return e.m?e.m(this):e.default(this)};var Ne=new fe;function Te(e,t){if(null===(e=void 0===e?null:e))return Ne;if(Array.isArray(e))switch(e.length){case 0:return Ne;case 1:return new Ee(e[0]);default:return new pe(e)}return e.next?new Be(e,void 0===t?null:t):new Ee(e)}var Ie={create:Te,m:function(e){return new Ee(e)},empty:function(){return Te()},ba:function(){return Te(re)},W:function(){return Te(ae)}};function Ce(e){var t=[],n=e.value;return function(){var e=0;return Ie.create({next:function(){if(void 0!==t[e])return t[e++];var r=n.next(0);return r.done?r:t[e++]=r}})}}function Fe(e,t,n){this.namespaceURI=t||null,this.prefix=e||"",this.localName=n}function Oe(e){var t=e.j,n=e.arity,r=void 0!==e.Sa&&e.Sa,a=void 0!==e.I&&e.I,o=e.localName,u=e.namespaceURI,i=e.i;for(e=e.value,he.call(this,60,null),this.value=e,this.I=a,a=-1,e=0;e<t.length;e++)4===t[e]&&(a=e);-1<a&&(e=Array(n-(t.length-1)).fill(t[a-1]),t=t.slice(0,a).concat(e)),this.o=t,this.v=n,this.da=r,this.B=o,this.l=u,this.s=i}function Se(e,t){var n=e.value,r=t.map((function(e){return null===e?null:Ce(e)}));return t=new Oe({j:t=t.reduce((function(t,n,r){return null===n&&t.push(e.o[r]),t}),[]),arity:t.length,Sa:!0,I:e.I,localName:"boundFunction",namespaceURI:e.l,i:e.s,value:function(e,t,a){var o=Array.from(arguments).slice(3),u=r.map((function(e){return null===e?o.shift():e()}));return n.apply(void 0,[e,t,a].concat(u))}}),Ie.m(t)}function Ge(e,t){var n=[];return 2!==e&&1!==e||n.push("type-1-or-type-2"),n.push("type-"+e),t&&n.push("name-"+t),n}function De(e){var t=e.node.nodeType;if(2===t||1===t)var n=e.node.localName;return Ge(t,n)}function Re(e){var t=e.nodeType;if(2===t||1===t)var n=e.localName;return Ge(t,n)}function ke(){}function Ue(){}Fe.prototype.Ca=function(){return this.prefix?this.prefix+":"+this.localName:this.localName},A(Oe,he),Oe.prototype.Sa=function(){return this.da},ke.prototype.getAllAttributes=function(e,t){return t=void 0===t?null:t,1!==e.nodeType?[]:(e=Array.from(e.attributes),null===t?e:e.filter((function(e){return Re(e).includes(t)})))},ke.prototype.getAttribute=function(e,t){return 1!==e.nodeType?null:e.getAttribute(t)},ke.prototype.getChildNodes=function(e,t){return t=void 0===t?null:t,e=Array.from(e.childNodes),null===t?e:e.filter((function(e){return Re(e).includes(t)}))},ke.prototype.getData=function(e){return 2===e.nodeType?e.value:e.data},ke.prototype.getFirstChild=function(e,t){for(t=void 0===t?null:t,e=e.firstChild;e;e=e.nextSibling)if(null===t||Re(e).includes(t))return e;return null},ke.prototype.getLastChild=function(e,t){for(t=void 0===t?null:t,e=e.lastChild;e;e=e.previousSibling)if(null===t||Re(e).includes(t))return e;return null},ke.prototype.getNextSibling=function(e,t){for(t=void 0===t?null:t,e=e.nextSibling;e;e=e.nextSibling)if(null===t||Re(e).includes(t))return e;return null},ke.prototype.getParentNode=function(e,t){return t=void 0===t?null:t,(e=2===e.nodeType?e.ownerElement:e.parentNode)&&(null===t||Re(e).includes(t))?e:null},ke.prototype.getPreviousSibling=function(e,t){for(t=void 0===t?null:t,e=e.previousSibling;e;e=e.previousSibling)if(null===t||Re(e).includes(t))return e;return null},(a=Ue.prototype).insertBefore=function(e,t,n){return e.insertBefore(t,n)},a.removeAttributeNS=function(e,t,n){return e.removeAttributeNS(t,n)},a.removeChild=function(e,t){return e.removeChild(t)},a.setAttributeNS=function(e,t,n,r){e.setAttributeNS(t,n,r)},a.setData=function(e,t){e.data=t};var Me=new Ue;function He(e){this.h=e}function Pe(e){return void 0!==e.Ta}function je(e,t,n){var r=null;return t&&(Pe(t.node)?r={F:t.F,offset:n,parent:t.node}:t.F&&(r=t.F)),{node:e,F:r}}function Xe(e){this.h=e,this.o=[]}function Le(e,t,n){return e.getAllAttributes(t.node,void 0===n?null:n).map((function(e){return je(e,t,e.nodeName)}))}function Ye(e,t,n){return Pe(t=t.node)?(e=t.attributes.find((function(e){return n===e.name})))?e.value:null:(e=e.h.getAttribute(t,n))?e:null}function Qe(e,t,n){return e.getChildNodes(t.node,void 0===n?null:n).map((function(e,n){return je(e,t,n)}))}function Je(e,t){return e.getData(t.node)}function Ke(e,t,n){var r=t.node;return Pe(r)?e=r.childNodes[0]:((n=e.h.getFirstChild(r,void 0===n?null:n))&&10===n.nodeType&&(n=e.h.getNextSibling(n)),e=n),e?je(e,t,0):null}function qe(e,t,n){n=void 0===n?null:n;var r=t.node;return Pe(r)?(e=r.childNodes.length-1,r=r.childNodes[e]):((r=e.h.getLastChild(r,n))&&10===r.nodeType&&(r=e.h.getPreviousSibling(r)),e=e.getChildNodes(t.node,n).length-1),r?je(r,t,e):null}function _e(e,t,n){n=void 0===n?null:n;var r=t.node,a=t.F;if(Pe(r)){if(a)var o=a.offset+1,u=a.parent.childNodes[o]}else{if(!a){for(u=r;u&&(!(u=e.h.getNextSibling(u,n))||10===u.nodeType););return u?{node:u,F:null}:null}o=a.offset+1;var i=Ve(e,t,null);u=e.getChildNodes(i.node,n)[o]}return u?je(u,i||Ve(e,t,n),o):null}function Ve(e,t,n){n=void 0===n?null:n;var r=t.node,a=t.F;if(a)"number"==typeof a.offset&&r===a.parent.childNodes[a.offset]||"string"==typeof a.offset&&r===a.parent.attributes.find((function(e){return a.offset===e.nodeName}))?(e=a.parent,t=a.F):(e=e.getParentNode(r,n),t=a);else{if(Pe(r))return null;e=e.getParentNode(r,n),t=null}return e?{node:e,F:t}:null}function We(e,t,n){n=void 0===n?null:n;var r=t.node,a=t.F;if(Pe(r)){if(a)var o=a.offset-1,u=a.parent.childNodes[o]}else{if(!a){for(u=r;u&&(!(u=e.h.getPreviousSibling(u,n))||10===u.nodeType););return u?{node:u,F:null}:null}o=a.offset-1;var i=Ve(e,t,null);u=e.getChildNodes(i.node,n)[o]}return u?je(u,i||Ve(e,t,n),o):null}function Ze(e,t,n,r,a){return a.M((function(e){var t=p(e).next().value;return r.M((function(e){e=p(e).next().value;var n=t.value;if(0>=n||n>e.P.length)throw Error("FOAY0001: array position out of bounds.");return e.P[n-1]()}))}))}function $e(e){Oe.call(this,{value:function(e,n,r,a){return Ze(e,n,r,Ie.m(t),a)},localName:"get",namespaceURI:"http://www.w3.org/2005/xpath-functions/array",j:[{type:5,g:3}],arity:1,i:{type:59,g:2}});var t=this;this.type=62,this.P=e}function ze(e){switch(e.node.nodeType){case 2:return 47;case 1:return 54;case 3:case 4:return 56;case 7:return 57;case 8:return 58;case 9:return 55;default:return 53}}function et(e){return{type:ze(e),value:e}}function tt(e,t){return e=e.map((function(e){return e.first()})),t(e)}function nt(e,t){var n=se(e.type,1)||se(e.type,20)||se(e.type,19),r=se(t.type,1)||se(t.type,20)||se(t.type,19);return n&&r?e.value===t.value:(n=se(e.type,4)||se(e.type,3)||se(e.type,6),r=se(t.type,4)||se(t.type,3)||se(t.type,6),n&&r?!(!isNaN(e.value)||!isNaN(t.value))||e.value===t.value:(n=se(e.type,0)||se(e.type,22)||se(e.type,18)||se(e.type,23)||se(e.type,44),r=se(t.type,0)||se(t.type,22)||se(t.type,18)||se(t.type,23)||se(t.type,44),!(!n||!r)&&e.value===t.value))}function rt(e,t,n,r,a){return tt([r,a],(function(e){var t=(e=p(e)).next().value,n=e.next().value;return(e=t.h.find((function(e){return nt(e.key,n)})))?e.value():Ie.empty()}))}function at(e){Oe.call(this,{j:[{type:59,g:3}],arity:1,localName:"get",namespaceURI:"http://www.w3.org/2005/xpath-functions/map",value:function(e,n,r,a){return rt(e,n,r,Ie.m(t),a)},i:{type:59,g:2}});var t=this;this.type=61,this.h=e}function ot(){}function ut(e,t){return e.eb()===t.eb()&&e.fb()===t.fb()}function it(e){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error("FODT0002: Number of seconds given to construct DayTimeDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER");this.ea=e}function ct(e){var t=Math.abs(e.bb()),n=Math.abs(e.getHours()),r=Math.abs(e.getMinutes());return n=(n?n+"H":"")+(r?r+"M":"")+((e=Math.abs(e.getSeconds()))?e+"S":""),(t=t?t+"D":"")&&n?t+"T"+n:t||(n?"T"+n:"T0S")}function lt(e,t,n,r,a,o){return e=86400*e+3600*t+60*n+r+a,new it(o||0===e?e:-e)}function st(e){return(e=/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.exec(e))?lt(e[4]?parseInt(e[4],10):0,e[5]?parseInt(e[5],10):0,e[6]?parseInt(e[6],10):0,e[7]?parseInt(e[7],10):0,e[8]?parseFloat(e[8]):0,!e[1]):null}function pt(e){return"Z"===(e=/^(Z)|([+-])([01]\d):([0-5]\d)$/.exec(e))[1]?lt(0,0,0,0,0,!0):lt(0,e[3]?parseInt(e[3],10):0,e[4]?parseInt(e[4],10):0,0,0,"+"===e[2])}function ft(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot multiply xs:dayTimeDuration by NaN");if((e=e.ea*t)>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while multiplying xs:dayTimeDuration");return new it(e<Number.MIN_SAFE_INTEGER||Object.is(-0,e)?0:e)}function ht(e){return e?parseInt(e,10):null}function dt(e){var t=(e+="").startsWith("-");return t&&(e=e.substring(1)),(t?"-":"")+e.padStart(4,"0")}function mt(e){return(e+"").padStart(2,"0")}function yt(e){return 1===(e+="").split(".")[0].length&&(e=e.padStart(e.length+1,"0")),e}function gt(e){return 0===e.getHours()&&0===e.getMinutes()?"Z":(e.qa()?"+":"-")+mt(Math.abs(e.getHours()))+":"+mt(Math.abs(e.getMinutes()))}function vt(e,t,n,r,a,o,u,i,c){this.v=e,this.h=t,this.o=n+(24===r?1:0),this.l=24===r?0:r,this.s=a,this.B=o,this.sa=u,this.Y=i,this.type=void 0===c?9:c}function wt(e){var t=/^(?:(-?\d{4,}))?(?:--?(\d\d))?(?:-{1,3}(\d\d))?(T)?(?:(\d\d):(\d\d):(\d\d))?(\.\d+)?(Z|(?:[+-]\d\d:\d\d))?$/.exec(e);e=t[1]?parseInt(t[1],10):null;var n=ht(t[2]),r=ht(t[3]),a=t[4],o=ht(t[5]),u=ht(t[6]),i=ht(t[7]),c=t[8]?parseFloat(t[8]):0;if(t=t[9]?pt(t[9]):null,e&&(-271821>e||273860<e))throw Error("FODT0001: Datetime year is out of bounds");return a?new vt(e,n,r,o,u,i,c,t,9):null!==o&&null!==u&&null!==i?new vt(1972,12,31,o,u,i,c,t,8):null!==e&&null!==n&&null!==r?new vt(e,n,r,0,0,0,0,t,7):null!==e&&null!==n?new vt(e,n,1,0,0,0,0,t,11):null!==n&&null!==r?new vt(1972,n,r,0,0,0,0,t,13):null!==e?new vt(e,1,1,0,0,0,0,t,12):null!==n?new vt(1972,n,1,0,0,0,0,t,14):new vt(1972,12,r,0,0,0,0,t,15)}function At(e,t){switch(t){case 15:return new vt(1972,12,e.o,0,0,0,0,e.Y,15);case 14:return new vt(1972,e.h,1,0,0,0,0,e.Y,14);case 12:return new vt(e.v,1,1,0,0,0,0,e.Y,12);case 13:return new vt(1972,e.h,e.o,0,0,0,0,e.Y,13);case 11:return new vt(e.v,e.h,1,0,0,0,0,e.Y,11);case 8:return new vt(1972,12,31,e.l,e.s,e.B,e.sa,e.Y,8);case 7:return new vt(e.v,e.h,e.o,0,0,0,0,e.Y,7);default:return new vt(e.v,e.h,e.o,e.l,e.s,e.B,e.sa,e.Y,9)}}function xt(e,t){return t=e.Y||t||pt("Z"),new Date(Date.UTC(e.v,e.h-1,e.o,e.l-t.getHours(),e.s-t.getMinutes(),e.B,1e3*e.sa))}function Bt(e,t,n){var r=xt(e,n).getTime();return r===(n=xt(t,n).getTime())?e.sa===t.sa?0:e.sa>t.sa?1:-1:r>n?1:-1}function bt(e,t,n){return 0===Bt(e,t,n)}function Et(e,t,n){return new it(e=(xt(e,n).getTime()-xt(t,n).getTime())/1e3)}function Nt(e){throw Error("Not implemented: adding durations to "+me[e.type])}function Tt(e){throw Error("Not implemented: subtracting durations from "+me[e.type])}function It(e,t){if(null===e)return null;switch(typeof e){case"boolean":return e?re:ae;case"number":return ne(e,3);case"string":return ne(e,1);case"object":if("nodeType"in e)return et({node:e,F:null});if(Array.isArray(e))return new $e(e.map((function(e){return void 0===e?function(){return Ie.empty()}:Ce(e=null===(e=It(e))?Ie.empty():Ie.m(e))})));if(e instanceof Date){var n=wt(e.toISOString());return ne(n,n.type)}return new at(Object.keys(e).filter((function(t){return void 0!==e[t]})).map((function(t){var n=It(e[t]);return n=null===n?Ie.empty():Ie.m(n),{key:ne(t,1),value:Ce(n)}})))}throw Error("Value "+String(e)+' of type "'+typeof e+'" is not adaptable to an XPath value.')}function Ct(e,t){if("number"!=typeof e&&("string"!=typeof e||!ee.get(t)(e)))throw Error("Cannot convert JavaScript value '"+e+"' to the XPath type "+me[t]+" since it is not valid.")}function Ft(e,t,n){if(null===t)return null;switch(e){case 0:return t?re:ae;case 1:return ne(t+"",1);case 3:case 2:return Ct(t,3),ne(+t,3);case 4:return Ct(t,e),ne(+t,4);case 5:return Ct(t,e),ne(0|t,5);case 6:return Ct(t,e),ne(+t,6);case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:if(!(t instanceof Date))throw Error("The JavaScript value "+t+" with type "+typeof t+" is not a valid type to be converted to an XPath "+me[e]+".");return ne(At(wt(t.toISOString()),e),e);case 53:case 47:case 55:case 54:case 56:case 57:case 58:if("object"!=typeof t||!("nodeType"in t))throw Error("The JavaScript value "+t+" with type "+typeof t+" is not a valid type to be converted to an XPath "+me[e]+".");return et({node:t,F:null});case 59:case 61:return It(t);default:throw Error('Values of the type "'+me[e]+'" can not be adapted from JavaScript to equivalent XPath values.')}}function Ot(e,t,n){if(0===n.g)return null===(t=Ft(n.type,t))?[]:[t];if(2===n.g||1===n.g){if(!Array.isArray(t))throw Error("The JavaScript value "+t+" should be an array if it is to be converted to "+ge(n)+".");return t.map((function(e){return Ft(n.type,e)})).filter((function(e){return null!==e}))}var r=Ft(n.type,t);if(null===r)throw Error("The JavaScript value "+t+" should be a single entry if it is to be converted to "+ge(n)+".");return[r]}function St(e,t,n){return n=void 0===n?{type:59,g:0}:n,Ie.create(Ot(e,t,n))}function Gt(){var e=void 0===e?Math.floor(Math.random()*Dt):e;this.h=Math.abs(e%Dt)}(a=He.prototype).insertBefore=function(e,t,n){return this.h.insertBefore(e,t,n)},a.removeAttributeNS=function(e,t,n){return this.h.removeAttributeNS(e,t,n)},a.removeChild=function(e,t){return this.h.removeChild(e,t)},a.setAttributeNS=function(e,t,n,r){this.h.setAttributeNS(e,t,n,r)},a.setData=function(e,t){this.h.setData(e,t)},Xe.prototype.getAllAttributes=function(e,t){return Pe(e)?e.attributes:this.h.getAllAttributes(e,void 0===t?null:t)},Xe.prototype.getChildNodes=function(e,t){return t=Pe(e)?e.childNodes:this.h.getChildNodes(e,void 0===t?null:t),9===e.nodeType?t.filter((function(e){return 10!==e.nodeType})):t},Xe.prototype.getData=function(e){return Pe(e)?2===e.nodeType?e.value:e.data:this.h.getData(e)||""},Xe.prototype.getParentNode=function(e,t){return this.h.getParentNode(e,void 0===t?null:t)},A($e,Oe),A(at,Oe),(a=ot.prototype).bb=function(){return 0},a.getHours=function(){return 0},a.getMinutes=function(){return 0},a.cb=function(){return 0},a.eb=function(){return 0},a.fb=function(){return 0},a.getSeconds=function(){return 0},a.gb=function(){return 0},a.qa=function(){return!0},A(it,ot),(a=it.prototype).bb=function(){return Math.trunc(this.ea/86400)},a.getHours=function(){return Math.trunc(this.ea%86400/3600)},a.getMinutes=function(){return Math.trunc(this.ea%3600/60)},a.fb=function(){return this.ea},a.getSeconds=function(){var e=this.ea%60;return Object.is(-0,e)?0:e},a.qa=function(){return!Object.is(-0,this.ea)&&0<=this.ea},a.toString=function(){return(this.qa()?"P":"-P")+ct(this)},(a=vt.prototype).getDay=function(){return this.o},a.getHours=function(){return this.l},a.getMinutes=function(){return this.s},a.getMonth=function(){return this.h},a.getSeconds=function(){return this.B},a.getYear=function(){return this.v},a.toString=function(){switch(this.type){case 9:return dt(this.v)+"-"+mt(this.h)+"-"+mt(this.o)+"T"+mt(this.l)+":"+mt(this.s)+":"+yt(this.B+this.sa)+(this.Y?gt(this.Y):"");case 7:return dt(this.v)+"-"+mt(this.h)+"-"+mt(this.o)+(this.Y?gt(this.Y):"");case 8:return mt(this.l)+":"+mt(this.s)+":"+yt(this.B+this.sa)+(this.Y?gt(this.Y):"");case 15:return"---"+mt(this.o)+(this.Y?gt(this.Y):"");case 14:return"--"+mt(this.h)+(this.Y?gt(this.Y):"");case 13:return"--"+mt(this.h)+"-"+mt(this.o)+(this.Y?gt(this.Y):"");case 12:return dt(this.v)+(this.Y?gt(this.Y):"");case 11:return dt(this.v)+"-"+mt(this.h)+(this.Y?gt(this.Y):"")}throw Error("Unexpected subType")};var Dt=Math.pow(2,32);function Rt(e,t,n){t=void 0===t?{yb:null,Db:null,tb:!1}:t,n=void 0===n?new Gt:n,this.h=t,this.Ka=e.Ka,this.Da=e.Da,this.N=e.N,this.Aa=e.Aa||Object.create(null),this.o=n}function kt(e,t){var n=0,r=t.value;return{next:function(a){return(a=r.next(a)).done?ie:ce(Pt(e,n++,a.value,t))}}}function Ut(e){return e.h.tb||(e.h.tb=!0,e.h.yb=wt((new Date).toISOString()),e.h.Db=st("PT0S")),e.h.yb}function Mt(e){return e.h.tb||(e.h.tb=!0,e.h.yb=wt((new Date).toISOString()),e.h.Db=st("PT0S")),e.h.Db}function Ht(e,t){return e=29421*(null!=(t=void 0===t?null:t)?t:e.o.h)%Dt,{zb:Math.floor(e),jc:e/Dt}}function Pt(e,t,n,r){return new Rt({N:n,Ka:t,Da:r||e.Da,Aa:e.Aa},e.h,e.o)}function jt(e,t){return new Rt({N:e.N,Ka:e.Ka,Da:e.Da,Aa:Object.assign(Object.create(null),e.Aa,t)},e.h,e.o)}function Xt(e,t,n,r,a,o,u,i,c){this.debug=e,this.La=t,this.h=n,this.o=r,this.B=a,this.l=o,this.da=u,this.s=i,this.v=c}function Lt(e){var t=0,n=null,r=!0;return Ie.create({next:function(a){for(;t<e.length;){n||(n=e[t].value,r=!0);var o=n.next(r?0:a);if(r=!1,!o.done)return o;t++,n=null}return ie}})}function Yt(e,t,n){return Error("FORG0001: Cannot cast "+e+" to "+me[t]+(n?", "+n:""))}function Qt(e){return Error("XPDY0002: "+e)}function Jt(e){return Error("XPTY0004: "+e)}function Kt(e){return Error("FOTY0013: Atomization is not supported for "+me[e]+".")}function qt(e){return Error("XPST0081: The prefix "+e+" could not be resolved.")}function _t(e,t){if(se(e.type,46)||se(e.type,19)||se(e.type,0)||se(e.type,4)||se(e.type,3)||se(e.type,6)||se(e.type,5)||se(e.type,2)||se(e.type,23)||se(e.type,1))return Ie.create(e);var n=t.h;if(se(e.type,53)){var r=e.value;if(2===r.node.nodeType||3===r.node.nodeType)return Ie.create(ne(Je(n,r),19));if(8===r.node.nodeType||7===r.node.nodeType)return Ie.create(ne(Je(n,r),1));var a=[];return function e(t){if(8!==r.node.nodeType&&7!==r.node.nodeType){var o=t.nodeType;3===o||4===o?a.push(n.getData(t)):1!==o&&9!==o||n.getChildNodes(t).forEach((function(t){e(t)}))}}(r.node),Ie.create(ne(a.join(""),19))}if(se(e.type,60)&&!se(e.type,62))throw Kt(e.type);if(se(e.type,62))return Lt(e.P.map((function(e){return Vt(e(),t)})));throw Error("Atomizing "+e.type+" is not implemented.")}function Vt(e,t){var n=!1,r=e.value,a=null;return Ie.create({next:function(){for(;!n;){if(!a){var e=r.next(0);if(e.done){n=!0;break}a=_t(e.value,t).value}if(!(e=a.next(0)).done)return e;a=null}return ie}})}function Wt(e){for(e=te[e];e&&0!==e.D;)e=e.parent;return e?e.type:null}function Zt(e,t){var n=(t=te[t]).Na;if(!n||!n.whiteSpace)return t.parent?Zt(e,t.parent.type):e;switch(t.Na.whiteSpace){case"replace":return e.replace(/[\u0009\u000A\u000D]/g," ");case"collapse":return e.replace(/[\u0009\u000A\u000D]/g," ").replace(/ {2,}/g," ").replace(/^ | $/g,"")}return e}function $t(e,t){for(t=te[t];t&&null===t.kb;){if(2===t.D||3===t.D)return!0;t=t.parent}return!t||t.kb(e)}function zt(e,t){for(;e;){if(e.Pa&&e.Pa[t])return e.Pa[t];e=e.parent}return function(){return!0}}function en(e,t){for(var n=te[t];n;){if(n.Na&&!Object.keys(n.Na).every((function(t){if("whiteSpace"===t)return!0;var r=zt(n,t);return!r||r(e,n.Na[t])})))return!1;n=n.parent}return!0}function tn(e){return!e||2===e.g||0===e.g}function nn(e){return e(1)||e(19)?function(e){return{u:!0,value:ne(e,20)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:anyURI or any of its derived types.")}}}function rn(e){return e(22)?function(e){for(var t="",n=0;n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return{u:!0,value:ne(btoa(t),21)}}:e(1)||e(19)?function(e){return{u:!0,value:ne(e,21)}}:function(){return{error:Error("XPTY0004: Casting not supported from given type to xs:base64Binary or any of its derived types."),u:!1}}}function an(e){return e(2)?function(e){return{u:!0,value:0===e||isNaN(e)?ae:re}}:e(1)||e(19)?function(e){switch(e){case"true":case"1":return{u:!0,value:re};case"false":case"0":return{u:!0,value:ae};default:return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.")}}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:boolean or any of its derived types.")}}}function on(e){return e(9)?function(e){return{u:!0,value:ne(At(e,7),7)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),7)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:date or any of its derived types.")}}}function un(e){return e(7)?function(e){return{u:!0,value:ne(At(e,9),9)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),9)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:dateTime or any of its derived types.")}}}function cn(e){return e(18)&&!e(16)?function(e){return{u:!0,value:ne(e.Ja,17)}}:e(16)?function(){return{u:!0,value:ne(st("PT0.0S"),17)}}:e(19)||e(1)?function(e){var t=st(e);return t?{u:!0,value:ne(t,17)}:{u:!1,error:Error("FORG0001: Can not cast "+e+" to xs:dayTimeDuration")}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:dayTimeDuration or any of its derived types.")}}}function ln(e){return e(5)?function(e){return{u:!0,value:ne(e,4)}}:e(6)||e(3)?function(e){return isNaN(e)||!isFinite(e)?{u:!1,error:Error("FOCA0002: Can not cast "+e+" to xs:decimal")}:Math.abs(e)>Number.MAX_VALUE?{u:!1,error:Error("FOAR0002: Can not cast "+e+" to xs:decimal, it is out of bounds for JavaScript numbers")}:{u:!0,value:ne(e,4)}}:e(0)?function(e){return{u:!0,value:ne(e?1:0,4)}}:e(1)||e(19)?function(e){var t=parseFloat(e);return!isNaN(t)||isFinite(t)?{u:!0,value:ne(t,4)}:{u:!1,error:Error("FORG0001: Can not cast "+e+" to xs:decimal")}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:decimal or any of its derived types.")}}}function sn(e,t){return e(2)?function(e){return{u:!0,value:e}}:e(0)?function(e){return{u:!0,value:e?1:0}}:e(1)||e(19)?function(e){switch(e){case"NaN":return{u:!0,value:NaN};case"INF":case"+INF":return{u:!0,value:1/0};case"-INF":return{u:!0,value:-1/0};case"0":case"+0":return{u:!0,value:0};case"-0":return{u:!0,value:-0}}var n=parseFloat(e);return isNaN(n)?{u:!1,error:Yt(e,t)}:{u:!0,value:n}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to "+t+" or any of its derived types.")}}}function pn(e){var t=sn(e,3);return function(e){return(e=t(e)).u?{u:!0,value:ne(e.value,3)}:e}}function fn(e){if(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)throw Error("FODT0002: Number of months given to construct YearMonthDuration overflows MAX_SAFE_INTEGER or MIN_SAFE_INTEGER");this.ga=e}function hn(e){var t=Math.abs(e.gb());return(t?t+"Y":"")+((e=Math.abs(e.cb()))?e+"M":"")||"0M"}function dn(e){var t=/^(-)?P(\d+Y)?(\d+M)?(\d+D)?(?:T(\d+H)?(\d+M)?(\d+(\.\d*)?S)?)?$/.exec(e);if(t){if(e=!t[1],(t=12*(t[2]?parseInt(t[2],10):0)+(t[3]?parseInt(t[3],10):0))>Number.MAX_SAFE_INTEGER||!Number.isFinite(t))throw Error("FODT0002: Value overflow while constructing xs:yearMonthDuration");e=new fn(e||0===t?t:-t)}else e=null;return e}function mn(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot multiply xs:yearMonthDuration by NaN");if((e=Math.round(e.ga*t))>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while constructing xs:yearMonthDuration");return new fn(e<Number.MIN_SAFE_INTEGER||0===e?0:e)}function yn(e,t){this.Wa=e,this.Ja=t}function gn(e){return e(16)?function(e){return{u:!0,value:ne(new yn(e,new it(e.qa()?0:-0)),18)}}:e(17)?function(e){return{u:!0,value:ne(e=new yn(new fn(e.qa()?0:-0),e),18)}}:e(18)?function(e){return{u:!0,value:ne(e,18)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(new yn(dn(e),st(e)),18)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:duration or any of its derived types.")}}}function vn(e){var t=sn(e,6);return function(e){return(e=t(e)).u?{u:!0,value:ne(e.value,6)}:e}}function wn(e){return e(7)||e(9)?function(e){return{u:!0,value:ne(At(e,15),15)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),15)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gDay or any of its derived types.")}}}function An(e){return e(7)||e(9)?function(e){return{u:!0,value:ne(At(e,14),14)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),14)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gMonth or any of its derived types.")}}}function xn(e){return e(7)||e(9)?function(e){return{u:!0,value:ne(At(e,13),13)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),13)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gMonthDay or any of its derived types.")}}}function Bn(e){return e(7)||e(9)?function(e){return{u:!0,value:ne(At(e,12),12)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),12)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gYear or any of its derived types.")}}}function bn(e){return e(7)||e(9)?function(e){return{u:!0,value:ne(At(e,11),11)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),11)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:gYearMonth or any of its derived types.")}}}function En(e){return e(21)?function(e){for(var t="",n=0,r=(e=atob(e)).length;n<r;n++)t+=Number(e.charCodeAt(n)).toString(16);return{u:!0,value:ne(t.toUpperCase(),22)}}:e(1)||e(19)?function(e){return{u:!0,value:ne(e,22)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:hexBinary or any of its derived types.")}}}function Nn(e){return e(0)?function(e){return{u:!0,value:ne(e?1:0,5)}}:e(2)?function(e){var t=Math.trunc(e);return!isFinite(t)||isNaN(t)?{u:!1,error:Error("FOCA0002: can not cast "+e+" to xs:integer")}:Number.isSafeInteger(t)?{u:!0,value:ne(t,5)}:{u:!1,error:Error("FOAR0002: can not cast "+e+" to xs:integer, it is out of bounds for JavaScript numbers.")}}:e(1)||e(19)?function(e){var t=parseInt(e,10);return isNaN(t)?{u:!1,error:Yt(e,5)}:Number.isSafeInteger(t)?{u:!0,value:ne(t,5)}:{u:!1,error:Error("FOCA0003: can not cast "+e+" to xs:integer, it is out of bounds for JavaScript numbers.")}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:integer or any of its derived types.")}}}A(fn,ot),(a=fn.prototype).cb=function(){var e=this.ga%12;return 0===e?0:e},a.eb=function(){return this.ga},a.gb=function(){return Math.trunc(this.ga/12)},a.qa=function(){return!Object.is(-0,this.ga)&&0<=this.ga},a.toString=function(){return(this.qa()?"P":"-P")+hn(this)},A(yn,ot),(a=yn.prototype).bb=function(){return this.Ja.bb()},a.getHours=function(){return this.Ja.getHours()},a.getMinutes=function(){return this.Ja.getMinutes()},a.cb=function(){return this.Wa.cb()},a.eb=function(){return this.Wa.eb()},a.fb=function(){return this.Ja.fb()},a.getSeconds=function(){return this.Ja.getSeconds()},a.gb=function(){return this.Wa.gb()},a.qa=function(){return this.Wa.qa()&&this.Ja.qa()},a.toString=function(){var e=this.qa()?"P":"-P",t=hn(this.Wa),n=ct(this.Ja);return"0M"===t?e+n:"T0S"===n?e+t:e+t+n};var Tn=[3,6,4,5];function In(e){var t=Rn;return function(n){for(var r=p(Tn),a=r.next();!a.done;a=r.next())if((a=t(e,a.value)(n)).u)return a;return{u:!1,error:Error('XPTY0004: Casting not supported from "'+n+'" given type to xs:numeric or any of its derived types.')}}}function Cn(e){if(e(1)||e(19))return function(e){return{u:!0,value:e+""}};if(e(20))return function(e){return{u:!0,value:e}};if(e(23))return function(e){return{u:!0,value:e.prefix?e.prefix+":"+e.localName:e.localName}};if(e(44))return function(e){return{u:!0,value:e.toString()}};if(e(2)){if(e(5)||e(4))return function(e){return{u:!0,value:(e+"").replace("e","E")}};if(e(6)||e(3))return function(e){return isNaN(e)?{u:!0,value:"NaN"}:isFinite(e)?Object.is(e,-0)?{u:!0,value:"-0"}:{u:!0,value:(e+"").replace("e","E").replace("E+","E")}:{u:!0,value:(0>e?"-":"")+"INF"}}}return e(9)||e(7)||e(8)||e(15)||e(14)||e(13)||e(12)||e(11)||e(16)||e(17)||e(18)?function(e){return{u:!0,value:e.toString()}}:e(22)?function(e){return{u:!0,value:e.toUpperCase()}}:function(e){return{u:!0,value:e+""}}}function Fn(e){var t=Cn(e);return function(e){return(e=t(e)).u?{u:!0,value:ne(e.value,1)}:e}}function On(e){return e(9)?function(e){return{u:!0,value:ne(At(e,8),8)}}:e(19)||e(1)?function(e){return{u:!0,value:ne(wt(e),8)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:time or any of its derived types.")}}}function Sn(e){var t=Cn(e);return function(e){return(e=t(e)).u?{u:!0,value:ne(e.value,19)}:e}}function Gn(e){return e(18)&&!e(17)?function(e){return{u:!0,value:ne(e.Wa,16)}}:e(17)?function(){return{u:!0,value:ne(dn("P0M"),16)}}:e(19)||e(1)?function(e){var t=dn(e);return t?{u:!0,value:ne(t,16)}:{u:!1,error:Yt(e,16)}}:function(){return{u:!1,error:Error("XPTY0004: Casting not supported from given type to xs:yearMonthDuration or any of its derived types.")}}}var Dn=[2,5,17,16];function Rn(e,t){function n(t){return se(e,t)}if(39===t)return function(){return{u:!1,error:Error("FORG0001: Casting to xs:error is always invalid.")}};switch(t){case 19:return Sn(n);case 1:return Fn(n);case 6:return vn(n);case 3:return pn(n);case 4:return ln(n);case 5:return Nn(n);case 2:return In(e);case 18:return gn(n);case 16:return Gn(n);case 17:return cn(n);case 9:return un(n);case 8:return On(n);case 7:return on(n);case 11:return bn(n);case 12:return Bn(n);case 13:return xn(n);case 15:return wn(n);case 14:return An(n);case 0:return an(n);case 21:return rn(n);case 22:return En(n);case 20:return nn(n);case 23:throw Error("Casting to xs:QName is not implemented.")}return function(){return{u:!1,error:Error("XPTY0004: Casting not supported from "+e+" to "+t+".")}}}var kn=Object.create(null);function Un(e,t){if(19===e&&1===t)return function(e){return{u:!0,value:ne(e,1)}};if(44===t)return function(){return{u:!1,error:Error("XPST0080: Casting to xs:NOTATION is not permitted.")}};if(39===t)return function(){return{u:!1,error:Error("FORG0001: Casting to xs:error is not permitted.")}};if(45===e||45===t)return function(){return{u:!1,error:Error("XPST0080: Casting from or to xs:anySimpleType is not permitted.")}};if(46===e||46===t)return function(){return{u:!1,error:Error("XPST0080: Casting from or to xs:anyAtomicType is not permitted.")}};if(se(e,60)&&1===t)return function(){return{u:!1,error:Error("FOTY0014: Casting from function item to xs:string is not permitted.")}};if(e===t)return function(e){return{u:!0,value:{type:t,value:e}}};var n=Dn.includes(e)?e:Wt(e),r=Dn.includes(t)?t:Wt(t);if(null===r||null===n)return function(){return{u:!1,error:Error("XPST0081: Can not cast: type "+(r?me[e]:me[t])+" is unknown.")}};var a=[];return 1!==n&&19!==n||a.push((function(e){var n=Zt(e,t);return $t(n,t)?{u:!0,value:n}:{u:!1,error:Yt(e,t,"pattern validation failed.")}})),n!==r&&(a.push(Rn(n,r)),a.push((function(e){return{u:!0,value:e.value}}))),19!==r&&1!==r||a.push((function(e){return $t(e,t)?{u:!0,value:e}:{u:!1,error:Yt(e,t,"pattern validation failed.")}})),a.push((function(e){return en(e,t)?{u:!0,value:e}:{u:!1,error:Yt(e,t,"pattern validation failed.")}})),a.push((function(e){return{u:!0,value:{type:t,value:e}}})),function(e){e={u:!0,value:e};for(var t=0,n=a.length;t<n&&!1!==(e=a[t](e.value)).u;++t);return e}}function Mn(e,t){var n=e.type+1e4*t,r=kn[n];return r||(r=kn[n]=Un(e.type,t)),r.call(void 0,e.value,t)}function Hn(e,t){if(!0===(e=Mn(e,t)).u)return e.value;throw e.error}function Pn(e){var t=!1;return{next:function(){return t?ie:(t=!0,ce(e))}}}function jn(e,t){return e===t||!(!e||!t||e.offset!==t.offset||e.parent!==t.parent)&&jn(e.F,t.F)}function Xn(e,t){return!!(e===t||e.node===t.node&&jn(e.F,t.F))}function Ln(e,t,n){var r=Ve(e,t,null);e=Qe(e,r,null),r=0;for(var a=e.length;r<a;++r){var o=e[r];if(Xn(o,t))return-1;if(Xn(o,n))return 1}}function Yn(e,t){for(var n=[];t;t=Ve(e,t,null))n.unshift(t);return n}function Qn(e,t){for(var n=[];t;t=e.getParentNode(t,null))n.unshift(t);return n}function Jn(e,t,n,r){if(n.F||r.F||Pe(n.node)||Pe(r.node)){if(Xn(n,r))return 0;n=Yn(t,n),r=Yn(t,r);var a=n[0],o=r[0];if(!Xn(a,o))return t=e.findIndex((function(e){return Xn(e,a)})),n=e.findIndex((function(e){return Xn(e,o)})),-1===t&&(t=e.push(a)),-1===n&&(n=e.push(o)),t-n;e=1;for(var u=Math.min(n.length,r.length);e<u&&Xn(n[e],r[e]);++e);return n[e]?r[e]?Ln(t,n[e],r[e]):1:-1}if((n=n.node)===(r=r.node))return 0;if(n=Qn(t,n),r=Qn(t,r),n[0]!==r[0]){var i={node:n[0],F:null},c={node:r[0],F:null};return t=e.findIndex((function(e){return Xn(e,i)})),n=e.findIndex((function(e){return Xn(e,c)})),-1===t&&(t=e.push(i)),-1===n&&(n=e.push(c)),t-n}for(u=1,e=Math.min(n.length,r.length);u<e&&n[u]===r[u];++u);if(e=n[u],n=r[u],!e)return-1;if(!n)return 1;for(t=t.getChildNodes(r[u-1],null),r=0,u=t.length;r<u;++r){var l=t[r];if(l===e)return-1;if(l===n)return 1}}function Kn(e,t,n,r){var a=se(n.type,47),o=se(r.type,47);if(a&&!o){if(Xn(n=Ve(t,n.value),r=r.value))return 1}else if(o&&!a){if(Xn(n=n.value,r=Ve(t,r.value)))return-1}else if(a&&o){if(Xn(Ve(t,r.value),Ve(t,n.value)))return n.value.node.localName>r.value.node.localName?1:-1;n=Ve(t,n.value),r=Ve(t,r.value)}else n=n.value,r=r.value;return Jn(e,t,n,r)}function qn(e,t,n){return Kn(e.o,e,t,n)}function _n(e,t){return Wn(t,(function(t,n){return Kn(e.o,e,t,n)})).filter((function(e,t,n){return 0===t||!Xn(e.value,n[t-1].value)}))}function Vn(e,t){return e<t?-1:0}function Wn(e,t){if(t=void 0===t?Vn:t,1>=e.length)return e;var n=Math.floor(e.length/2),r=Wn(e.slice(0,n),t);for(e=Wn(e.slice(n),t),n=[];r.length&&e.length;)0>t(r[0],e[0])?n.push(r.shift()):n.push(e.shift());return n.concat(r.concat(e))}var Zn=e;function $n(e,t){if(se(e.type,2)){if(se(e.type,6))return 3===t?ne(e.value,3):null;if(se(e.type,4)){if(6===t)return ne(e.value,6);if(3===t)return ne(e.value,3)}return null}return se(e.type,20)&&1===t?ne(e.value,1):null}function zn(e,t,n,r,a){if(se(e.type,t.type))return e;if(se(t.type,46)&&se(e.type,53)&&(e=_t(e,n).first()),se(e.type,t.type)||46===t.type)return e;if(se(e.type,19)){if(!(n=Hn(e,t.type)))throw Error("XPTY0004 Unable to convert "+(a?"return":"argument")+" of type "+me[e.type]+" to type "+ge(t)+" while calling "+r);return n}if(!(n=$n(e,t.type)))throw Error("XPTY0004 Unable to cast "+(a?"return":"argument")+" of type "+me[e.type]+" to type "+ge(t)+" while calling "+r);return n}function er(e){switch(e){case 2:return"*";case 1:return"+";case 0:return"?";case 3:return""}}function tr(e,t,n,r,a){return 0===e.g?t.Z({default:function(){return t.map((function(t){return zn(t,e,n,r,a)}))},multiple:function(){throw Error("XPTY0004: Multiplicity of "+(a?"function return value":"function argument")+" of type "+me[e.type]+er(e.g)+" for "+r+' is incorrect. Expected "?", but got "+".')}}):1===e.g?t.Z({empty:function(){throw Error("XPTY0004: Multiplicity of "+(a?"function return value":"function argument")+" of type "+me[e.type]+er(e.g)+" for "+r+' is incorrect. Expected "+", but got "empty-sequence()"')},default:function(){return t.map((function(t){return zn(t,e,n,r,a)}))}}):2===e.g?t.map((function(t){return zn(t,e,n,r,a)})):t.Z({m:function(){return t.map((function(t){return zn(t,e,n,r,a)}))},default:function(){throw Error("XPTY0004: Multiplicity of "+(a?"function return value":"function argument")+" of type "+me[e.type]+er(e.g)+" for "+r+" is incorrect. Expected exactly one")}})}function nr(e,t){return se(e,5)?ne(t,5):se(e,6)?ne(t,6):se(e,3)?ne(t,3):ne(t,4)}var rr=[{oa:"M",ma:1e3},{oa:"CM",ma:900},{oa:"D",ma:500},{oa:"CD",ma:400},{oa:"C",ma:100},{oa:"XC",ma:90},{oa:"L",ma:50},{oa:"XL",ma:40},{oa:"X",ma:10},{oa:"IX",ma:9},{oa:"V",ma:5},{oa:"IV",ma:4},{oa:"I",ma:1}];function ar(e,t){var n=parseInt(e,10);if(e=0>n,!(n=Math.abs(n)))return"-";var r=rr.reduce((function(e,t){var r=Math.floor(n/t.ma);return n-=r*t.ma,e+t.oa.repeat(r)}),"");return t&&(r=r.toLowerCase()),e&&(r="-"+r),r}var or="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");function ur(e,t){var n=0>(e=parseInt(e,10));if(!(e=Math.abs(e)))return"-";for(var r,a="";0<e;)r=(e-1)%or.length,a=or[r]+a,e=(e-r)/or.length|0;return t&&(a=a.toLowerCase()),n&&(a="-"+a),a}function ir(e){if(Math.floor(e)===e||isNaN(e))return 0;var t=(e=/\d+(?:\.(\d*))?(?:[Ee](-)?(\d+))*/.exec(""+e))[1]?e[1].length:0;return e[3]?e[2]?t+parseInt(e[3],10):0>(e=t-parseInt(e[3],10))?0:e:t}function cr(e,t,n){return t&&0==e*n%1%.5?0==Math.floor(e*n)%2?Math.floor(e*n)/n:Math.ceil(e*n)/n:Math.round(e*n)/n}function lr(e,t,n,r,a,o){var u=!1;return Ie.create({next:function(){if(u)return ie;var t,n=a.first();if(!n)return u=!0,ie;if((se(n.type,6)||se(n.type,3))&&(0===n.value||isNaN(n.value)||1/0===n.value||-1/0===n.value))return u=!0,ce(n);if(t=o?o.first().value:0,u=!0,ir(n.value)<t)return ce(n);var r=[5,4,3,6].find((function(e){return se(n.type,e)}));switch(t=cr(Hn(n,4).value,e,Math.pow(10,t)),r){case 4:return ce(ne(t,4));case 3:return ce(ne(t,3));case 6:return ce(ne(t,6));case 5:return ce(ne(t,5))}}})}function sr(e,t,n,r){return Vt(r,t).Z({empty:function(){return Ie.m(ne(NaN,3))},m:function(){var e=Mn(r.first(),3);return e.u?Ie.m(e.value):Ie.m(ne(NaN,3))},multiple:function(){throw Error("fn:number may only be called with zero or one values")}})}function pr(e){for(var t=5381,n=0;n<e.length;++n)t=33*t+e.charCodeAt(n),t%=Number.MAX_SAFE_INTEGER;return t}function fr(e,t,n,r){function a(t){function n(n,r,a,o){if(o.G()||o.wa())return o;for(n=o.O(),r=t,a=n.length-1;1<a;a--){var u=n[o=(r=Ht(e,r).zb)%a];n[o]=n[a],n[a]=u}return Ie.create(n)}return Ie.m(new at([{key:ne("number",1),value:function(){return Ie.m(ne(Ht(e,t).jc,3))}},{key:ne("next",1),value:function(){return Ie.m(new Oe({value:function(){return a(Ht(e,t).zb)},Sa:!0,localName:"",namespaceURI:"",j:[],arity:0,i:{type:61,g:3}}))}},{key:ne("permute",1),value:function(){return Ie.m(new Oe({value:n,Sa:!0,localName:"",namespaceURI:"",j:[{type:59,g:2}],arity:1,i:{type:59,g:2}}))}}]))}return a(((r=void 0===r?Ie.empty():r).G()?Ht(e):Ht(e,pr(Hn(r.first(),1).value))).zb)}var hr=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"abs",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return nr(e.type,Math.abs(e.value))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"format-integer",j:[{type:5,g:0},{type:1,g:3}],i:{type:1,g:3},callFunction:function(e,t,n,r,a){if(e=r.first(),a=a.first(),r.G())return Ie.m(ne("",1));switch(a.value){case"I":return r=ar(e.value),Ie.m(ne(r,1));case"i":return r=ar(e.value,!0),Ie.m(ne(r,1));case"A":return Ie.m(ne(ur(e.value),1));case"a":return Ie.m(ne(ur(e.value,!0),1));default:throw Error("Picture: "+a.value+' is not implemented yet. The supported picture strings are "A", "a", "I", and "i"')}}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ceiling",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return nr(e.type,Math.ceil(e.value))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"floor",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return nr(e.type,Math.floor(e.value))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:lr.bind(null,!1)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round",j:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},callFunction:lr.bind(null,!1)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round-half-to-even",j:[{type:2,g:0}],i:{type:2,g:0},callFunction:lr.bind(null,!0)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"round-half-to-even",j:[{type:2,g:0},{type:5,g:3}],i:{type:2,g:0},callFunction:lr.bind(null,!0)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"number",j:[{type:46,g:0}],i:{type:3,g:3},callFunction:sr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"number",j:[],i:{type:3,g:3},callFunction:function(e,t,n){var r=e.N&&tr({type:46,g:0},Ie.m(e.N),t,"fn:number",!1);if(!r)throw Qt("fn:number needs an atomizable context item.");return sr(e,t,n,r)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"random-number-generator",j:[],i:{type:61,g:3},callFunction:fr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"random-number-generator",j:[{type:46,g:0}],i:{type:61,g:3},callFunction:fr}];function dr(){throw Error("FOCH0002: No collations are supported")}function mr(e,t,n,r){if(null===t.N)throw Qt("The function which was called depends on dynamic context, which is absent.");return e(t,n,r,Ie.m(t.N))}function yr(e,t,n,r){return r.Z({empty:function(){return Ie.m(ne("",1))},default:function(){return r.map((function(e){if(se(e.type,53)){var n=_t(e,t).first();return se(e.type,47)?Hn(n,1):n}return Hn(e,1)}))}})}function gr(e,t,n,r,a){return tt([a],(function(e){var n=p(e).next().value;return Vt(r,t).M((function(e){return e=e.map((function(e){return Hn(e,1).value})).join(n.value),Ie.m(ne(e,1))}))}))}function vr(e,t,n,r){return r.G()?Ie.m(ne(0,5)):(e=r.first().value,Ie.m(ne(Array.from(e).length,5)))}function wr(e,t,n,r,a,o){var u=lr(!1,e,t,n,a,null),i=null!==o?lr(!1,e,t,n,o,null):null,c=!1,l=null,s=null,p=null;return Ie.create({next:function(){return c?ie:l||null!==(l=r.first())?(s||(s=u.first()),!p&&o&&(p=null,p=i.first()),c=!0,ce(ne(Array.from(l.value).slice(Math.max(s.value-1,0),o?s.value+p.value-1:void 0).join(""),1))):(c=!0,ce(ne("",1)))}})}function Ar(e,t,n,r,a){return r.G()||0===r.first().value.length?Ie.empty():(e=r.first().value,a=Er(a=a.first().value),Ie.create(e.split(a).map((function(e){return ne(e,1)}))))}function xr(e,t,n,r){return r.G()?Ie.m(ne("",1)):(e=r.first().value.trim(),Ie.m(ne(e.replace(/\s+/g," "),1)))}var Br=new Map,br=new Map;function Er(e){if(br.has(e))return br.get(e);try{var t=new RegExp(e,"g")}catch(e){throw Error("FORX0002: "+e)}if(t.test(""))throw Error("FORX0003: the pattern "+e+" matches the zero length string");return br.set(e,t),t}var Nr=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"compare",j:[{type:1,g:0},{type:1,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r,a){return r.G()||a.G()?Ie.empty():(e=r.first().value)>(a=a.first().value)?Ie.m(ne(1,5)):e<a?Ie.m(ne(-1,5)):Ie.m(ne(0,5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"compare",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:5,g:0},callFunction:dr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"concat",j:[{type:46,g:0},{type:46,g:0},4],i:{type:1,g:3},callFunction:function(e,t,n){var r=O.apply(3,arguments);return tt(r=r.map((function(e){return Vt(e,t).M((function(e){return Ie.m(ne(e.map((function(e){return null===e?"":Hn(e,1).value})).join(""),1))}))})),(function(e){return Ie.m(ne(e.map((function(e){return e.value})).join(""),1))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"contains",j:[{type:1,g:0},{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:dr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"contains",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:function(e,t,n,r,a){return e=r.G()?"":r.first().value,0===(a=a.G()?"":a.first().value).length?Ie.ba():0===e.length?Ie.W():e.includes(a)?Ie.ba():Ie.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ends-with",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:function(e,t,n,r,a){return 0===(e=a.G()?"":a.first().value).length?Ie.ba():0===(r=r.G()?"":r.first().value).length?Ie.W():r.endsWith(e)?Ie.ba():Ie.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"ends-with",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},callFunction:dr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"normalize-space",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:xr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"normalize-space",j:[],i:{type:1,g:3},callFunction:mr.bind(null,(function(e,t,n,r){return xr(e,t,n,yr(e,t,n,r))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"starts-with",j:[{type:1,g:0},{type:1,g:0}],i:{type:0,g:3},callFunction:function(e,t,n,r,a){return 0===(e=a.G()?"":a.first().value).length?Ie.ba():0===(r=r.G()?"":r.first().value).length?Ie.W():r.startsWith(e)?Ie.ba():Ie.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"starts-with",j:[{type:1,g:0},{type:1,g:0},{type:1,g:3}],i:{type:0,g:3},callFunction:dr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string",j:[{type:59,g:0}],i:{type:1,g:3},callFunction:yr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string",j:[],i:{type:1,g:3},callFunction:mr.bind(null,yr)},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring-before",j:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},callFunction:function(e,t,n,r,a){return e=r.G()?"":r.first().value,""===(a=a.G()?"":a.first().value)||-1===(a=e.indexOf(a))?Ie.m(ne("",1)):Ie.m(ne(e.substring(0,a),1))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring-after",j:[{type:1,g:0},{type:1,g:0}],i:{type:1,g:3},callFunction:function(e,t,n,r,a){return e=r.G()?"":r.first().value,""===(a=a.G()?"":a.first().value)?Ie.m(ne(e,1)):-1===(t=e.indexOf(a))?Ie.m(ne("",1)):Ie.m(ne(e.substring(t+a.length),1))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring",j:[{type:1,g:0},{type:3,g:3}],i:{type:1,g:3},callFunction:wr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"substring",j:[{type:1,g:0},{type:3,g:3},{type:3,g:3}],i:{type:1,g:3},callFunction:wr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"upper-case",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:function(e,t,n,r){return r.G()?Ie.m(ne("",1)):r.map((function(e){return ne(e.value.toUpperCase(),1)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"lower-case",j:[{type:1,g:0}],i:{type:1,g:3},callFunction:function(e,t,n,r){return r.G()?Ie.m(ne("",1)):r.map((function(e){return ne(e.value.toLowerCase(),1)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-join",j:[{type:46,g:2},{type:1,g:3}],i:{type:1,g:3},callFunction:gr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-join",j:[{type:46,g:2}],i:{type:1,g:3},callFunction:function(e,t,n,r){return gr(e,t,n,r,Ie.m(ne("",1)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-length",j:[{type:1,g:0}],i:{type:5,g:3},callFunction:vr},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"string-length",j:[],i:{type:5,g:3},callFunction:mr.bind(null,(function(e,t,n,r){return vr(e,t,n,yr(e,t,n,r))}))},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],i:{type:1,g:2},callFunction:function(){throw Error("Not implemented: Using flags in tokenize is not supported")}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",j:[{type:1,g:0},{type:1,g:3}],i:{type:1,g:2},callFunction:Ar},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"tokenize",j:[{type:1,g:0}],i:{type:1,g:2},callFunction:function(e,t,n,r){return Ar(e,t,n,xr(e,t,n,r),Ie.m(ne(" ",1)))}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],callFunction:function(e,t,n,r,a,o){return tt([r,a,o],(function(e){var t=p(e),n=t.next().value;e=t.next().value,t=t.next().value,n=Array.from(n?n.value:"");var r=Array.from(e.value),a=Array.from(t.value);return e=n.map((function(e){return r.includes(e)?(e=r.indexOf(e))<=a.length?a[e]:void 0:e})),Ie.m(ne(e.join(""),1))}))},localName:"translate",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:5,g:2}],callFunction:function(e,t,n,r){return r.M((function(e){return e=e.map((function(e){if(9===(e=e.value)||10===e||13===e||32<=e&&55295>=e||57344<=e&&65533>=e||65536<=e&&1114111>=e)return String.fromCodePoint(e);throw Error("FOCH0001")})).join(""),Ie.m(ne(e,1))}))},localName:"codepoints-to-string",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0}],callFunction:function(e,t,n,r){return tt([r],(function(e){return 0===(e=(e=p(e).next().value)?e.value.split(""):[]).length?Ie.empty():Ie.create(e.map((function(e){return ne(e.codePointAt(0),5)})))}))},localName:"string-to-codepoints",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{j:[{type:1,g:0}],callFunction:function(e,t,n,r){return tt([r],(function(e){return null===(e=p(e).next().value)||0===e.value.length?Ie.create(ne("",1)):Ie.create(ne(encodeURIComponent(e.value).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})),1))}))},localName:"encode-for-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0}],callFunction:function(e,t,n,r){return tt([r],(function(e){return null===(e=p(e).next().value)||0===e.value.length?Ie.create(ne("",1)):Ie.create(ne(e.value.replace(/([\u00A0-\uD7FF\uE000-\uFDCF\uFDF0-\uFFEF "<>{}|\\^`/\n\u007f\u0080-\u009f]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,(function(e){return encodeURI(e)})),1))}))},localName:"iri-to-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0},{type:1,g:0}],callFunction:function(e,t,n,r,a){return tt([r,a],(function(e){var t=p(e);if(e=t.next().value,t=t.next().value,null===e||null===t)return Ie.empty();if(e=e.value,t=t.value,e.length!==t.length)return Ie.W();e=e.split(""),t=t.split("");for(var n=0;n<e.length;n++)if(e[n].codePointAt(0)!==t[n].codePointAt(0))return Ie.W();return Ie.ba()}))},localName:"codepoint-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:0}},{j:[{type:1,g:0},{type:1,g:3}],callFunction:function(e,t,n,r,a){return tt([r,a],(function(e){var t=p(e);e=t.next().value,t=t.next().value,e=e?e.value:"",t=t.value;var n=Br.get(t);if(!n){try{n=Zn.compile(t,{language:"xpath"})}catch(e){throw Error("FORX0002: "+e)}Br.set(t,n)}return n(e)?Ie.ba():Ie.W()}))},localName:"matches",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3}],callFunction:function(e,t,n,r,a,o){return tt([r,a,o],(function(e){var t=p(e);e=t.next().value;var n=t.next().value;if(t=t.next().value,e=e?e.value:"",n=n.value,(t=t.value).includes("$0"))throw Error("Using $0 in fn:replace to replace substrings with full matches is not supported.");return t=t.split(/((?:\$\$)|(?:\\\$)|(?:\\\\))/).map((function(e){switch(e){case"\\$":return"$$";case"\\\\":return"\\";case"$$":throw Error('FORX0004: invalid replacement: "$$"');default:return e}})).join(""),n=Er(n),e=e.replace(n,t),Ie.m(ne(e,1))}))},localName:"replace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:1,g:0},{type:1,g:3},{type:1,g:3},{type:1,g:3}],localName:"replace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3},callFunction:function(){throw Error("Not implemented: Using flags in replace is not supported")}}];function Tr(e,t,n,r,a){if(null===n.N)throw Qt("The function "+e+" depends on dynamic context, which is absent.");return t(n,r,a,Ie.m(n.N))}function Ir(e,t,n,r){return tt([r],(function(e){if(null===(e=p(e).next().value))return Ie.empty();switch((e=e.value).node.nodeType){case 1:case 2:return Ie.m(ne(new Fe(e.node.prefix,e.node.namespaceURI,e.node.localName),23));case 7:return Ie.m(ne(new Fe("","",e.node.target),23));default:return Ie.empty()}}))}function Cr(e,t,n,r){return r.Z({default:function(){return yr(e,t,n,Ir(e,t,n,r))},empty:function(){return Ie.m(ne("",1))}})}function Fr(e,t,n,r){return Vt(r,t)}function Or(e,t,n,r){return tt([r],(function(e){return null!==(e=(e=p(e).next().value)?e.value:null)&&Ke(t.h,e,null)?Ie.ba():Ie.W()}))}function Sr(e,t,n,r){return tt([r],(function(e){function n(e){for(var t=0,n=e;null!==n;)(e.node.nodeType!==n.node.nodeType?0:1===n.node.nodeType?n.node.localName===e.node.localName&&n.node.namespaceURI===e.node.namespaceURI:7===n.node.nodeType?n.node.target===e.node.target:1)&&t++,n=We(a,n,null);return t}var r=p(e).next().value;if(null===r)return Ie.empty();var a=t.h;for(e="",r=r.value;null!==Ve(t.h,r,null);r=Ve(t.h,r,null))switch(r.node.nodeType){case 1:var o=r;e="/Q{"+(o.node.namespaceURI||"")+"}"+o.node.localName+"["+n(o)+"]"+e;break;case 2:e="/@"+((o=r).node.namespaceURI?"Q{"+o.node.namespaceURI+"}":"")+o.node.localName+e;break;case 3:e="/text()["+n(r)+"]"+e;break;case 7:e="/processing-instruction("+(o=r).node.target+")["+n(o)+"]"+e;break;case 8:e="/comment()["+n(r)+"]"+e}return 9===r.node.nodeType?Ie.create(ne(e||"/",1)):Ie.create(ne("Q{http://www.w3.org/2005/xpath-functions}root()"+e,1))}))}function Gr(e,t,n,r){return r.map((function(e){return ne(e.value.node.namespaceURI||"",20)}))}function Dr(e,t,n,r){return r.Z({default:function(){return r.map((function(e){return 7===e.value.node.nodeType?ne(e.value.node.target,1):ne(e.value.node.localName||"",1)}))},empty:function(){return Ie.m(ne("",1))}})}function Rr(e,t,n){if(2===t.node.nodeType)return Xn(t,n);for(;n;){if(Xn(t,n))return!0;if(9===n.node.nodeType)break;n=Ve(e,n,null)}return!1}function kr(e,t,n,r){return r.map((function(e){if(!se(e.type,53))throw Error("XPTY0004 Argument passed to fn:root() should be of the type node()");for(e=e.value;e;){var n=e;e=Ve(t.h,n,null)}return et(n)}))}var Ur=[{j:[{type:53,g:0}],callFunction:Cr,localName:"name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[],callFunction:Tr.bind(null,"name",Cr),localName:"name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:53,g:3}],callFunction:Gr,localName:"namespace-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:20,g:3}},{j:[],callFunction:Tr.bind(null,"namespace-uri",Gr),localName:"namespace-uri",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:20,g:3}},{j:[{type:53,g:2}],callFunction:function(e,t,n,r){return r.M((function(e){return e.length?(e=_n(t.h,e).reduceRight((function(e,n,r,a){return r===a.length-1?(e.push(n),e):(Rr(t.h,n.value,e[0].value)||e.unshift(n),e)}),[]),Ie.create(e)):Ie.empty()}))},localName:"innermost",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:2}},{j:[{type:53,g:2}],callFunction:function(e,t,n,r){return r.M((function(e){return e.length?(e=_n(t.h,e).reduce((function(e,n,r){return 0===r?(e.push(n),e):(Rr(t.h,e[e.length-1].value,n.value)||e.push(n),e)}),[]),Ie.create(e)):Ie.empty()}),1)},localName:"outermost",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:2}},{j:[{type:53,g:0}],callFunction:Or,localName:"has-children",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[],callFunction:Tr.bind(null,"has-children",Or),localName:"has-children",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:53,g:0}],callFunction:Sr,localName:"path",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{j:[],callFunction:Tr.bind(null,"path",Sr),localName:"path",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:0}},{j:[{type:53,g:0}],callFunction:Ir,localName:"node-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{j:[],callFunction:Tr.bind(null,"node-name",Ir),localName:"node-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{j:[{type:53,g:0}],callFunction:Dr,localName:"local-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[],callFunction:Tr.bind(null,"local-name",Dr),localName:"local-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}},{j:[{type:53,g:0}],callFunction:kr,localName:"root",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:0}},{j:[],callFunction:Tr.bind(null,"root",kr),localName:"root",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:53,g:0}},{j:[],callFunction:Tr.bind(null,"data",Fr),localName:"data",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:59,g:2}],callFunction:Fr,localName:"data",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}}];function Mr(e,t){var n=0,r=e.length,a=!1,o=null;return{next:function(){if(!a){for(;n<r;){o||(o=t(e[n],n,e));var u=o.next(0);if(o=null,!u.value)return ce(!1);n++}return a=!0,ce(!0)}return ie}}}function Hr(e){return 1===(e=e.node.nodeType)||3===e}function Pr(e,t){if((se(e.type,4)||se(e.type,6))&&(se(t.type,4)||se(t.type,6))){var n=Hn(e,6),r=Hn(t,6);return n.value===r.value||isNaN(e.value)&&isNaN(t.value)}return(se(e.type,4)||se(e.type,6)||se(e.type,3))&&(se(t.type,4)||se(t.type,6)||se(t.type,3))?(n=Hn(e,3),r=Hn(t,3),n.value===r.value||isNaN(e.value)&&isNaN(t.value)):se(e.type,23)&&se(t.type,23)?e.value.namespaceURI===t.value.namespaceURI&&e.value.localName===t.value.localName:(se(e.type,9)||se(e.type,7)||se(e.type,8)||se(e.type,11)||se(e.type,12)||se(e.type,13)||se(e.type,14)||se(e.type,15))&&(se(t.type,9)||se(t.type,7)||se(t.type,8)||se(t.type,11)||se(t.type,12)||se(t.type,13)||se(t.type,14)||se(t.type,15))?bt(e.value,t.value):(se(e.type,16)||se(e.type,17)||se(e.type,18))&&(se(t.type,16)||se(t.type,17)||se(t.type,17))?ut(e.value,t.value):e.value===t.value}function jr(e,t,n){return n=p([t,n].map((function(t){return{type:1,value:t.reduce((function(t,n){return t+_t(n,e).first().value}),"")}}))),ce(Pr(t=n.next().value,n=n.next().value))}function Xr(e,t,n,r){for(;e.value&&se(e.value.type,56);){t.push(e.value);var a=_e(r,e.value.value);if(e=n.next(0),a&&3!==a.node.nodeType)break}return e}function Lr(e,t,n,r,a){var o,u=t.h,i=r.value,c=a.value,l=null,s=null,p=null,f=[],h=[];return{next:function(){for(;!o;)if(l||(l=i.next(0)),l=Xr(l,f,i,u),s||(s=c.next(0)),s=Xr(s,h,c,u),f.length||h.length){var r=jr(t,f,h);if(f.length=0,h.length=0,!1===r.value)return o=!0,r}else{if(l.done||s.done)return o=!0,ce(l.done===s.done);if(p||(p=_r(e,t,n,l.value,s.value)),r=p.next(0),p=null,!1===r.value)return o=!0,r;s=l=null}return ie}}}function Yr(e,t,n,r,a){return r.h.length!==a.h.length?Pn(!1):Mr(r.h,(function(r){var o=a.h.find((function(e){return Pr(e.key,r.key)}));return o?Lr(e,t,n,r.value(),o.value()):Pn(!1)}))}function Qr(e,t,n,r,a){return r.P.length!==a.P.length?Pn(!1):Mr(r.P,(function(r,o){return o=a.P[o],Lr(e,t,n,r(),o())}))}function Jr(e,t,n,r,a){return r=Qe(t.h,r.value),a=Qe(t.h,a.value),r=r.filter((function(e){return Hr(e)})),a=a.filter((function(e){return Hr(e)})),Lr(e,t,n,r=Ie.create(r.map((function(e){return et(e)}))),a=Ie.create(a.map((function(e){return et(e)}))))}function Kr(e,t,n,r,a){var o=Lr(e,t,n,Ir(e,t,n,Ie.m(r)),Ir(e,t,n,Ie.m(a))),u=Jr(e,t,n,r,a);r=Le(t.h,r.value).filter((function(e){return"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI})).sort((function(e,t){return e.node.nodeName>t.node.nodeName?1:-1})).map((function(e){return et(e)})),a=Le(t.h,a.value).filter((function(e){return"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI})).sort((function(e,t){return e.node.nodeName>t.node.nodeName?1:-1})).map((function(e){return et(e)}));var i=Lr(e,t,n,Ie.create(r),Ie.create(a)),c=!1;return{next:function(){if(c)return ie;var e=o.next(0);return!e.done&&!1===e.value||!(e=i.next(0)).done&&!1===e.value?(c=!0,e):(e=u.next(0),c=!0,e)}}}function qr(e,t,n,r,a){var o=Lr(e,t,n,Ir(e,t,n,Ie.m(r)),Ir(e,t,n,Ie.m(a))),u=!1;return{next:function(){if(u)return ie;var e=o.next(0);return e.done||!1!==e.value?ce(Pr(_t(r,t).first(),_t(a,t).first())):(u=!0,e)}}}function _r(e,t,n,r,a){if(se(r.type,46)&&se(a.type,46))return Pn(Pr(r,a));if(se(r.type,61)&&se(a.type,61))return Yr(e,t,n,r,a);if(se(r.type,62)&&se(a.type,62))return Qr(e,t,n,r,a);if(se(r.type,53)&&se(a.type,53)){if(se(r.type,55)&&se(a.type,55))return Jr(e,t,n,r,a);if(se(r.type,54)&&se(a.type,54))return Kr(e,t,n,r,a);if(se(r.type,47)&&se(a.type,47)||se(r.type,57)&&se(a.type,57)||se(r.type,58)&&se(a.type,58))return qr(e,t,n,r,a)}return Pn(!1)}function Vr(e){return Error("XUST0001: "+(void 0===e?"Can not execute an updating expression in a non-updating context.":e))}function Wr(e){return Error("XUTY0004: The attribute "+e.name+'="'+e.value+'" follows a node that is not an attribute node.')}function Zr(){return Error("XUTY0005: The target of a insert expression with into must be a single element or document node.")}function $r(){return Error("XUTY0006: The target of a insert expression with before or after must be a single element, text, comment, or processing instruction node.")}function zr(){return Error("XUTY0008: The target of a replace expression must be a single element, attribute, text, comment, or processing instruction node.")}function ea(){return Error("XUTY0012: The target of a rename expression must be a single element, attribute, or processing instruction node.")}function ta(e){return Error("XUDY0017: The target "+e.outerHTML+" is used in more than one replace value of expression.")}function na(e){return Error("XUDY0021: Applying the updates will result in the XDM instance violating constraint: '"+e+"'")}function ra(e){return Error("XUDY0023: The namespace binding "+e+" is conflicting.")}function aa(e){return Error("XUDY0024: The namespace binding "+e+" is conflicting.")}function oa(){return Error("XUDY0027: The target for an insert, replace, or rename expression expression should not be empty.")}function ua(e,t,n,r,a){n=void 0===n?{C:!1,X:!1,R:"unsorted",subtree:!1}:n,this.o=e,this.da=n.R||"unsorted",this.subtree=!!n.subtree,this.X=!!n.X,this.C=!!n.C,this.ta=t,this.I=!1,this.ab=null,this.Yb=void 0!==r&&r,this.type=a}function ia(e,t,n){return t&&null!==t.N&&e.C?(null===e.ab&&(e.ab=Ce(e.h(null,n).sb())),e=e.ab()):e=e.h(t,n),e}function ca(e,t){this.J=e,this.fa=t}function la(e){e&&"object"==typeof e&&"nodeType"in e&&"function"==typeof(e=e.ownerDocument||e).createElementNS&&"function"==typeof e.createProcessingInstruction&&"function"==typeof e.createTextNode&&"function"==typeof e.createComment&&(this.h=e),this.h||(this.h=null)}function sa(e,t,n,r){var a=Ve(n,e).node,o=(e=_e(n,e))?e.node:null;t.forEach((function(e){r.insertBefore(a,e.node,o)}))}function pa(e,t,n,r){var a=Ve(n,e).node;t.forEach((function(t){r.insertBefore(a,t.node,e.node)}))}function fa(e,t,n,r){var a=(n=Ke(n,e))?n.node:null;t.forEach((function(t){r.insertBefore(e.node,t.node,a)}))}function ha(e,t,n){t.forEach((function(t){n.insertBefore(e.node,t.node,null)}))}function da(e,t,n,r){t.forEach((function(t){var a=t.node.nodeName;if(Ye(n,e,a))throw na("An attribute "+a+" already exists.");r.setAttributeNS(e.node,t.node.namespaceURI,a,Je(n,t))}))}function ma(e,t,n,r,a){switch(r||(r=new la(e?e.node:null)),e.node.nodeType){case 1:var o=n.getAllAttributes(e.node),u=n.getChildNodes(e.node),i=r.createElementNS(t.namespaceURI,t.Ca()),c={node:i,F:null};o.forEach((function(e){a.setAttributeNS(i,e.namespaceURI,e.nodeName,e.value)})),u.forEach((function(e){a.insertBefore(i,e,null)}));break;case 2:(t=r.createAttributeNS(t.namespaceURI,t.Ca())).value=Je(n,e),c={node:t,F:null};break;case 7:c={node:r.createProcessingInstruction(t.Ca(),Je(n,e)),F:null}}if(!Ve(n,e))throw Error("Not supported: renaming detached nodes.");ga(e,[c],n,a)}function ya(e,t,n,r){n.getChildNodes(e.node).forEach((function(t){return r.removeChild(e.node,t)})),t&&r.insertBefore(e.node,t.node,null)}function ga(e,t,n,r){var a=Ve(n,e),o=e.node.nodeType;if(2===o){if(t.some((function(e){return 2!==e.node.nodeType})))throw Error('Constraint "If $target is an attribute node, $replacement must consist of zero or more attribute nodes." failed.');var u=a?a.node:null;r.removeAttributeNS(u,e.node.namespaceURI,e.node.nodeName),t.forEach((function(e){var t=e.node.nodeName;if(Ye(n,a,t))throw na("An attribute "+t+" already exists.");r.setAttributeNS(u,e.node.namespaceURI,t,Je(n,e))}))}if(1===o||3===o||8===o||7===o){var i=(o=_e(n,e))?o.node:null;r.removeChild(a.node,e.node),t.forEach((function(e){r.insertBefore(a.node,e.node,i)}))}}function va(e,t,n,r){if(wa(e,t),e.filter((function(e){return-1!==["insertInto","insertAttributes","replaceValue","rename"].indexOf(e.type)})).forEach((function(e){switch(e.type){case"insertInto":ha(e.target,e.content,r);break;case"insertAttributes":da(e.target,e.content,t,r);break;case"rename":ma(e.target,e.o,t,n,r);break;case"replaceValue":var a=e.target;if(e=e.o,2===a.node.nodeType){var o=Ve(t,a);o?r.setAttributeNS(o.node,a.node.namespaceURI,a.node.nodeName,e):a.node.value=e}else r.setData(a.node,e)}})),e.filter((function(e){return-1!==["insertBefore","insertAfter","insertIntoAsFirst","insertIntoAsLast"].indexOf(e.type)})).forEach((function(e){switch(e.type){case"insertAfter":sa(e.target,e.content,t,r);break;case"insertBefore":pa(e.target,e.content,t,r);break;case"insertIntoAsFirst":fa(e.target,e.content,t,r);break;case"insertIntoAsLast":ha(e.target,e.content,r)}})),e.filter((function(e){return"replaceNode"===e.type})).forEach((function(e){ga(e.target,e.o,t,r)})),e.filter((function(e){return"replaceElementContent"===e.type})).forEach((function(e){ya(e.target,e.text,t,r)})),e.filter((function(e){return"delete"===e.type})).forEach((function(e){e=e.target;var n=Ve(t,e);(n=n?n.node:null)&&(2===e.node.nodeType?r.removeAttributeNS(n,e.node.namespaceURI,e.node.nodeName):r.removeChild(n,e.node))})),e.some((function(e){return"put"===e.type})))throw Error('Not implemented: the execution for pendingUpdate "put" is not yet implemented.')}function wa(e,t){function n(e){return new Fe(e.node.prefix,e.node.namespaceURI,e.node.localName)}function r(t,n){var r=new Set;e.filter((function(e){return e.type===t})).map((function(e){return e.target})).forEach((function(e){e=e?e.node:null,r.has(e)&&n(e),r.add(e)}))}r("rename",(function(e){throw Error("XUDY0015: The target "+e.outerHTML+" is used in more than one rename expression.")})),r("replaceNode",(function(e){throw Error("XUDY0016: The target "+e.outerHTML+" is used in more than one replace expression.")})),r("replaceValue",(function(e){throw ta(e)})),r("replaceElementContent",(function(e){throw ta(e)}));var a=new Map;e.filter((function(e){return"replaceNode"===e.type&&2===e.target.node.nodeType})).forEach((function(e){var r=Ve(t,e.target);r=r?r.node:null;var o=a.get(r);o?o.push.apply(o,h(e.o.map(n))):a.set(r,e.o.map(n))})),e.filter((function(e){return"rename"===e.type&&2===e.target.node.nodeType})).forEach((function(e){var n=Ve(t,e.target);if(n){n=n.node;var r=a.get(n);r?r.push(e.o):a.set(n,[e.o])}})),a.forEach((function(e){var t={};e.forEach((function(e){if(t[e.prefix]||(t[e.prefix]=e.namespaceURI),t[e.prefix]!==e.namespaceURI)throw aa(e.namespaceURI)}))}))}function Aa(e){return e.concat.apply(e,h(O.apply(1,arguments).filter(Boolean)))}function xa(e,t,n,r){ua.call(this,e,t,n,!0,r),this.I=!0}function Ba(e){return e.I?function(t,n){return e.s(t,n)}:function(t,n){var r=e.h(t,n);return{next:function(){return ce({fa:[],J:r.O()})}}}}function ba(e,t){return t((e=e.next(0)).value.fa),Ie.create(e.value.J)}function Ea(e,t,n,r){xa.call(this,e,t,n,r),this.I=this.ta.some((function(e){return e.I}))}function Na(e){e.ta.some((function(e){return e.I}))&&(e.I=!0)}ua.prototype.B=function(){return null},ua.prototype.v=function(e){if(this.ta.forEach((function(t){return t.v(e)})),!this.Yb&&this.ta.some((function(e){return e.I})))throw Vr()},(a=la.prototype).createAttributeNS=function(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createAttributeNS(e,t)},a.createCDATASection=function(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createCDATASection(e)},a.createComment=function(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createComment(e)},a.createDocument=function(){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.implementation.createDocument(null,null,null)},a.createElementNS=function(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createElementNS(e,t)},a.createProcessingInstruction=function(e,t){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createProcessingInstruction(e,t)},a.createTextNode=function(e){if(!this.h)throw Error("Please pass a node factory if an XQuery script uses node constructors");return this.h.createTextNode(e)},A(xa,ua),xa.prototype.h=function(){throw Vr()},A(Ea,xa),Ea.prototype.h=function(e,t){return this.A(e,t,this.ta.map((function(e){return function(n){return e.h(n,t)}})))},Ea.prototype.s=function(e,t){var n=[],r=this.A(e,t,this.ta.map((function(e){return e.I?function(r){return ba(r=e.s(r,t),(function(e){return n=Aa(n,e)}))}:function(n){return e.h(n,t)}}))),a=!1;return{next:function(){if(a)return ie;var e=r.O();return a=!0,ce(new ca(e,n))}}},Ea.prototype.v=function(e){xa.prototype.v.call(this,e),Na(this)};var Ta=["external","attribute","nodeName","nodeType","universal"],Ia=Ta.length;function Ca(e){if(this.h=Ta.map((function(t){return e[t]||0})),Object.keys(e).some((function(e){return!Ta.includes(e)})))throw Error("Invalid specificity kind passed")}function Fa(e,t){for(var n=0;n<Ia;++n){if(t.h[n]<e.h[n])return 1;if(t.h[n]>e.h[n])return-1}return 0}function Oa(){return Jt("Expected base expression of a function call to evaluate to a sequence of single function item")}function Sa(e,t,n,r){for(var a=[],o=0;o<t.length;++o)if(null===t[o])a.push(null);else{var u=tr(e[o],t[o],n,r,!1);a.push(u)}return a}function Ga(e,t){if(!se(e.type,60))throw Jt("Expected base expression to evaluate to a function item");if(e.v!==t)throw Oa();return e}function Da(e,t,n,r,a,o,u){var i=0;return a=a.map((function(e){return e?null:o[i++](n)})),0<=(a=Sa(e.o,a,r,e.B)).indexOf(null)?Se(e,a):(t=t.apply(void 0,[n,r,u].concat(h(a))),tr(e.s,t,r,e.B,!0))}function Ra(e,t,n){var r={};Ea.call(this,new Ca((r.external=1,r)),[e].concat(t.filter((function(e){return!!e}))),{R:"unsorted",X:!1,subtree:!1,C:!1},n),this.la=t.length,this.S=t.map((function(e){return null===e})),this.K=null,this.pa=e,this.Ba=t}function ka(e,t,n,r,a,o){return tt([r,a,o],(function(e){var t=p(e);e=t.next().value;var n=t.next().value;if(t=t.next().value,n=n.value,t=t.value,n>e.P.length||0>=n)throw Error("FOAY0001: subarray start out of bounds.");if(0>t)throw Error("FOAY0002: subarray length out of bounds.");if(n+t>e.P.length+1)throw Error("FOAY0001: subarray start + length out of bounds.");return Ie.m(new $e(e.P.slice(n-1,t+n-1)))}))}function Ua(e,t,n,r,a){return tt([r],(function(e){var t=p(e).next().value;return a.M((function(e){e=e.map((function(e){return e.value})).sort((function(e,t){return t-e})).filter((function(e,t,n){return n[t-1]!==e}));for(var n=t.P.concat(),r=0,a=e.length;r<a;++r){var o=e[r];if(o>t.P.length||0>=o)throw Error("FOAY0001: subarray position out of bounds.");n.splice(o-1,1)}return Ie.m(new $e(n))}))}))}function Ma(e){return se(e,1)||se(e,20)||se(e,19)}function Ha(e,t,n,r,a){return 0===r.length?0!==a.length:0!==a.length&&_r(e,t,n,r[0],a[0]).next(0).value?Ha(e,t,n,r.slice(1),a.slice(1)):r[0].value!=r[0].value||(Ma(r[0].type)&&0!==a.length&&Ma(a[0].type)||0!==a.length)&&r[0].value<a[0].value}function Pa(e,t,n,r){return r.sort((function(r,a){return Lr(e,t,n,Ie.create(r),Ie.create(a)).next(0).value?0:Ha(e,t,n,r,a)?-1:1})),Ie.m(new $e(r.map((function(e){return function(){return Ie.create(e)}}))))}function ja(e,t){return se(t.type,62)?t.P.reduce((function(e,t){return t().M((function(t){return t.reduce(ja,e)}))}),e):Lt([e,Ie.m(t)])}Ca.prototype.add=function(e){var t=this;return new Ca(Ta.reduce((function(n,r,a){return n[r]=t.h[a]+e.h[a],n}),Object.create(null)))},A(Ra,Ea),Ra.prototype.s=function(e,t){var n=this;if(!this.l||!this.l.I)return Ea.prototype.s.call(this,e,t);var r=[],a=Da(this.l,(function(e,t,a){return ba(n.l.value.apply(n.l,[e,t,a].concat(h(O.apply(3,arguments)))),(function(e){r=Aa(r,e)}))}),e,t,this.S,this.Ba.map((function(n){return function(){return n.I?ba(n.s(e,t),(function(e){r=Aa(r,e)})):ia(n,e,t)}})),this.K),o=!1;return{next:function(){if(o)return ie;var e=a.O();return o=!0,ce({fa:r,J:e})}}},Ra.prototype.A=function(e,t,n){var r=this,a=(n=p(n)).next().value,o=f(n);if(this.l)return Da(this.l,(function(e,t,n){return r.l.value.apply(r.l,[e,t,n].concat(h(O.apply(3,arguments))))}),e,t,this.S,o,this.K);var u=a(e);return u.Z({default:function(){throw Oa()},m:function(){return u.M((function(n){if((n=Ga(n=p(n).next().value,r.la)).I)throw Error("XUDY0038: The function returned by the PrimaryExpr of a dynamic function invocation can not be an updating function");return Da(n,n.value,e,t,r.S,o,r.K)}))}})},Ra.prototype.v=function(e){if(this.K=So(e),Ea.prototype.v.call(this,e),this.pa.C){if(!(e=ia(this.pa,null,null)).wa())throw Oa();this.l=Ga(e.first(),this.la),this.l.I&&(this.I=!0)}};var Xa=[{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"size",j:[{type:62,g:3}],i:{type:5,g:3},callFunction:function(e,t,n,r){return tt([r],(function(e){return e=p(e).next().value,Ie.m(ne(e.P.length,5))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"get",j:[{type:62,g:3},{type:5,g:3}],i:{type:59,g:2},callFunction:Ze},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"put",j:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:function(e,t,n,r,a,o){return tt([a,r],(function(e){var t=p(e);if(e=t.next().value,t=t.next().value,0>=(e=e.value)||e>t.P.length)throw Error("FOAY0001: array position out of bounds.");return(t=t.P.concat()).splice(e-1,1,Ce(o)),Ie.m(new $e(t))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"append",j:[{type:62,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:function(e,t,n,r,a){return tt([r],(function(e){return e=p(e).next().value.P.concat([Ce(a)]),Ie.m(new $e(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"subarray",j:[{type:62,g:3},{type:5,g:3},{type:5,g:3}],i:{type:62,g:3},callFunction:ka},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"subarray",j:[{type:62,g:3},{type:5,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r,a){var o=Ie.m(ne(r.first().value.length-a.first().value+1,5));return ka(e,t,n,r,a,o)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"remove",j:[{type:62,g:3},{type:5,g:2}],i:{type:62,g:3},callFunction:Ua},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"insert-before",j:[{type:62,g:3},{type:5,g:3},{type:59,g:2}],i:{type:62,g:3},callFunction:function(e,t,n,r,a,o){return tt([r,a],(function(e){var t=p(e);if(e=t.next().value,(t=t.next().value.value)>e.P.length+1||0>=t)throw Error("FOAY0001: subarray position out of bounds.");return(e=e.P.concat()).splice(t-1,0,Ce(o)),Ie.m(new $e(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"head",j:[{type:62,g:3}],i:{type:59,g:2},callFunction:function(e,t,n,r){return Ze(e,t,n,r,Ie.m(ne(1,5)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"tail",j:[{type:62,g:3}],i:{type:59,g:2},callFunction:function(e,t,n,r){return Ua(e,t,n,r,Ie.m(ne(1,5)))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"reverse",j:[{type:62,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r){return tt([r],(function(e){return e=p(e).next().value,Ie.m(new $e(e.P.concat().reverse()))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"join",j:[{type:62,g:2}],i:{type:62,g:3},callFunction:function(e,t,n,r){return r.M((function(e){return e=e.reduce((function(e,t){return e.concat(t.P)}),[]),Ie.m(new $e(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"for-each",j:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r,a){return tt([r,a],(function(r){var a=(r=p(r)).next().value,o=r.next().value;if(1!==o.v)throw Jt("The callback passed into array:for-each has a wrong arity.");return r=a.P.map((function(r){return Ce(o.value.call(void 0,e,t,n,Sa(o.o,[r()],t,"array:for-each")[0]))})),Ie.m(new $e(r))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"filter",j:[{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r,a){return tt([r,a],(function(r){var a=(r=p(r)).next().value,o=r.next().value;if(1!==o.v)throw Jt("The callback passed into array:filter has a wrong arity.");var u=a.P.map((function(r){return r=Sa(o.o,[r()],t,"array:filter")[0],(0,o.value)(e,t,n,r)})),i=[],c=!1;return Ie.create({next:function(){if(c)return ie;for(var e=0,t=a.P.length;e<t;++e){var n=u[e].ha();i[e]=n}return e=a.P.filter((function(e,t){return i[t]})),c=!0,ce(new $e(e))}})}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"fold-left",j:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},callFunction:function(e,t,n,r,a,o){return tt([r,o],(function(r){var o=(r=p(r)).next().value,u=r.next().value;if(2!==u.v)throw Jt("The callback passed into array:fold-left has a wrong arity.");return o.P.reduce((function(r,a){return a=Sa(u.o,[a()],t,"array:fold-left")[0],u.value.call(void 0,e,t,n,r,a)}),a)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"fold-right",j:[{type:62,g:3},{type:59,g:2},{type:60,g:3}],i:{type:59,g:2},callFunction:function(e,t,n,r,a,o){return tt([r,o],(function(r){var o=(r=p(r)).next().value,u=r.next().value;if(2!==u.v)throw Jt("The callback passed into array:fold-right has a wrong arity.");return o.P.reduceRight((function(r,a){return a=Sa(u.o,[a()],t,"array:fold-right")[0],u.value.call(void 0,e,t,n,r,a)}),a)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"for-each-pair",j:[{type:62,g:3},{type:62,g:3},{type:60,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r,a,o){return tt([r,a,o],(function(r){var a=p(r);r=a.next().value;var o=a.next().value;if(2!==(a=a.next().value).v)throw Jt("The callback passed into array:for-each-pair has a wrong arity.");for(var u=[],i=0,c=Math.min(r.P.length,o.P.length);i<c;++i){var l=p(Sa(a.o,[r.P[i](),o.P[i]()],t,"array:for-each-pair")),s=l.next().value;l=l.next().value,u[i]=Ce(a.value.call(void 0,e,t,n,s,l))}return Ie.m(new $e(u))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"sort",j:[{type:62,g:3}],i:{type:62,g:3},callFunction:function(e,t,n,r){return tt([r],(function(r){return r=p(r).next().value.P.map((function(e){return e().O()})),Pa(e,t,n,r)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/array",localName:"flatten",j:[{type:59,g:2}],i:{type:59,g:2},callFunction:function(e,t,n,r){return r.M((function(e){return e.reduce(ja,Ie.empty())}))}}];function La(e,t,n,r,a){return a.G()?a:Ie.m(Hn(a.first(),e))}var Ya=[{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"untypedAtomic",j:[{type:46,g:0}],i:{type:19,g:0},callFunction:La.bind(null,19)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"error",j:[{type:46,g:0}],i:{type:39,g:0},callFunction:La.bind(null,39)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"string",j:[{type:46,g:0}],i:{type:1,g:0},callFunction:La.bind(null,1)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"boolean",j:[{type:46,g:0}],i:{type:0,g:0},callFunction:La.bind(null,0)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"decimal",j:[{type:46,g:0}],i:{type:4,g:0},callFunction:La.bind(null,4)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"float",j:[{type:46,g:0}],i:{type:6,g:0},callFunction:La.bind(null,6)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"double",j:[{type:46,g:0}],i:{type:3,g:0},callFunction:La.bind(null,3)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"duration",j:[{type:46,g:0}],i:{type:18,g:0},callFunction:La.bind(null,18)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTime",j:[{type:46,g:0}],i:{type:9,g:0},callFunction:La.bind(null,9)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTimeStamp",j:[{type:46,g:0}],i:{type:10,g:0},callFunction:La.bind(null,10)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"time",j:[{type:46,g:0}],i:{type:8,g:0},callFunction:La.bind(null,8)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"date",j:[{type:46,g:0}],i:{type:7,g:0},callFunction:La.bind(null,7)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gYearMonth",j:[{type:46,g:0}],i:{type:11,g:0},callFunction:La.bind(null,11)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gYear",j:[{type:46,g:0}],i:{type:12,g:0},callFunction:La.bind(null,12)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gMonthDay",j:[{type:46,g:0}],i:{type:13,g:0},callFunction:La.bind(null,13)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gDay",j:[{type:46,g:0}],i:{type:15,g:0},callFunction:La.bind(null,15)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"gMonth",j:[{type:46,g:0}],i:{type:14,g:0},callFunction:La.bind(null,14)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"hexBinary",j:[{type:46,g:0}],i:{type:22,g:0},callFunction:La.bind(null,22)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"base64Binary",j:[{type:46,g:0}],i:{type:21,g:0},callFunction:La.bind(null,21)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"QName",j:[{type:46,g:0}],i:{type:23,g:0},callFunction:function(e,t,n,r){if(r.G())return r;if(se((e=r.first()).type,2))throw Error("XPTY0004: The provided QName is not a string-like value.");if(!$t(e=Zt(e=Hn(e,1).value,23),23))throw Error("FORG0001: The provided QName is invalid.");if(!e.includes(":"))return n=n.aa(""),Ie.m(ne(new Fe("",n,e),23));if(t=(r=p(e.split(":"))).next().value,r=r.next().value,!(n=n.aa(t)))throw Error("FONS0004: The value "+e+" can not be cast to a QName. Did you mean to use fn:QName?");return Ie.m(ne(new Fe(t,n,r),23))}},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"anyURI",j:[{type:46,g:0}],i:{type:20,g:0},callFunction:La.bind(null,20)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"normalizedString",j:[{type:46,g:0}],i:{type:48,g:0},callFunction:La.bind(null,48)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"token",j:[{type:46,g:0}],i:{type:52,g:0},callFunction:La.bind(null,52)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"language",j:[{type:46,g:0}],i:{type:51,g:0},callFunction:La.bind(null,51)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NMTOKEN",j:[{type:46,g:0}],i:{type:50,g:0},callFunction:La.bind(null,50)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NMTOKENS",j:[{type:46,g:0}],i:{type:49,g:2},callFunction:La.bind(null,49)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"Name",j:[{type:46,g:0}],i:{type:25,g:0},callFunction:La.bind(null,25)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"NCName",j:[{type:46,g:0}],i:{type:24,g:0},callFunction:La.bind(null,24)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ID",j:[{type:46,g:0}],i:{type:42,g:0},callFunction:La.bind(null,42)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"IDREF",j:[{type:46,g:0}],i:{type:41,g:0},callFunction:La.bind(null,41)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"IDREFS",j:[{type:46,g:0}],i:{type:43,g:2},callFunction:La.bind(null,43)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ENTITY",j:[{type:46,g:0}],i:{type:26,g:0},callFunction:La.bind(null,26)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"ENTITIES",j:[{type:46,g:0}],i:{type:40,g:2},callFunction:La.bind(null,40)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"integer",j:[{type:46,g:0}],i:{type:5,g:0},callFunction:La.bind(null,5)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"nonPositiveInteger",j:[{type:46,g:0}],i:{type:27,g:0},callFunction:La.bind(null,27)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"negativeInteger",j:[{type:46,g:0}],i:{type:28,g:0},callFunction:La.bind(null,28)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"long",j:[{type:46,g:0}],i:{type:31,g:0},callFunction:La.bind(null,31)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"int",j:[{type:46,g:0}],i:{type:32,g:0},callFunction:La.bind(null,32)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"short",j:[{type:46,g:0}],i:{type:33,g:0},callFunction:La.bind(null,33)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"byte",j:[{type:46,g:0}],i:{type:34,g:0},callFunction:La.bind(null,34)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"nonNegativeInteger",j:[{type:46,g:0}],i:{type:30,g:0},callFunction:La.bind(null,30)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedLong",j:[{type:46,g:0}],i:{type:36,g:0},callFunction:La.bind(null,36)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedInt",j:[{type:46,g:0}],i:{type:35,g:0},callFunction:La.bind(null,35)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedShort",j:[{type:46,g:0}],i:{type:38,g:0},callFunction:La.bind(null,38)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"unsignedByte",j:[{type:46,g:0}],i:{type:37,g:0},callFunction:La.bind(null,37)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"positiveInteger",j:[{type:46,g:0}],i:{type:29,g:0},callFunction:La.bind(null,29)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"yearMonthDuration",j:[{type:46,g:0}],i:{type:16,g:0},callFunction:La.bind(null,16)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dayTimeDuration",j:[{type:46,g:0}],i:{type:17,g:0},callFunction:La.bind(null,17)},{namespaceURI:"http://www.w3.org/2001/XMLSchema",localName:"dateTimeStamp",j:[{type:46,g:0}],i:{type:10,g:0},callFunction:La.bind(null,10)}];function Qa(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getYear(),5))}function Ja(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getMonth(),5))}function Ka(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getDay(),5))}function qa(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getHours(),5))}function _a(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getMinutes(),5))}function Va(e,t,n,r){return r.G()||(t=(e=Ie).m,r=r.first().value,r=t.call(e,ne(r.B+r.sa,4))),r}function Wa(e,t,n,r){return r.G()?r:(e=r.first().value.Y)?Ie.m(ne(e,17)):Ie.empty()}var Za=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"dateTime",j:[{type:7,g:0},{type:8,g:0}],i:{type:9,g:0},callFunction:function(e,t,n,r,a){if(r.G())return r;if(a.G())return a;if(e=r.first().value,a=a.first().value,t=e.Y,n=a.Y,t||n){if(!t||n)if(!t&&n)t=n;else if(!ut(t,n))throw Error("FORG0008: fn:dateTime: got a date and time value with different timezones.")}else t=null;return Ie.m(ne(new vt(e.getYear(),e.getMonth(),e.getDay(),a.getHours(),a.getMinutes(),a.getSeconds(),a.sa,t),9))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"year-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Qa},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"month-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Ja},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"day-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:Ka},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:qa},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-dateTime",j:[{type:9,g:0}],i:{type:5,g:0},callFunction:_a},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-dateTime",j:[{type:9,g:0}],i:{type:4,g:0},callFunction:Va},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-dateTime",j:[{type:9,g:0}],i:{type:17,g:0},callFunction:Wa},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"year-from-date",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:Qa},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"month-from-date",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:Ja},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"day-from-date",j:[{type:7,g:0}],i:{type:5,g:0},callFunction:Ka},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-date",j:[{type:7,g:0}],i:{type:17,g:0},callFunction:Wa},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-time",j:[{type:8,g:0}],i:{type:5,g:0},callFunction:qa},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-time",j:[{type:8,g:0}],i:{type:5,g:0},callFunction:_a},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-time",j:[{type:8,g:0}],i:{type:4,g:0},callFunction:Va},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"timezone-from-time",j:[{type:8,g:0}],i:{type:17,g:0},callFunction:Wa}];function $a(e,t){var n=t.h,r=t.o,a=t.B;switch(e.node.nodeType){case 1:var o=r.createElementNS(e.node.namespaceURI,e.node.nodeName);for(n.getAllAttributes(e.node).forEach((function(e){return a.setAttributeNS(o,e.namespaceURI,e.nodeName,e.value)})),e=(r=p(Qe(n,e))).next();!e.done;e=r.next())e=$a(e.value,t),a.insertBefore(o,e.node,null);return{node:o,F:null};case 2:return(t=r.createAttributeNS(e.node.namespaceURI,e.node.nodeName)).value=Je(n,e),{node:t,F:null};case 4:return{node:r.createCDATASection(Je(n,e)),F:null};case 8:return{node:r.createComment(Je(n,e)),F:null};case 9:for(r=r.createDocument(),e=(n=p(Qe(n,e))).next();!e.done;e=n.next())e=$a(e.value,t),a.insertBefore(r,e.node,null);return{node:r,F:null};case 7:return{node:r.createProcessingInstruction(e.node.target,Je(n,e)),F:null};case 3:return{node:r.createTextNode(Je(n,e)),F:null}}}function za(e,t){var n=t.B,r=t.o,a=t.h;if(!Pe(e.node))return $a(e,t).node;switch(e.node.nodeType){case 2:return(r=r.createAttributeNS(e.node.namespaceURI,e.node.nodeName)).value=Je(a,e),r;case 8:return r.createComment(Je(a,e));case 1:var o=e.node.prefix,u=e.node.localName,i=r.createElementNS(e.node.namespaceURI,o?o+":"+u:u);return Qe(a,e).forEach((function(e){e=za(e,t),n.insertBefore(i,e,null)})),Le(a,e).forEach((function(e){n.setAttributeNS(i,e.node.namespaceURI,e.node.nodeName,Je(a,e))})),i.normalize(),i;case 7:return r.createProcessingInstruction(e.node.target,Je(a,e));case 3:return r.createTextNode(Je(a,e))}}function eo(e,t,n){var r=e;for(e=Ve(n,r);null!==e;){if(2===r.node.nodeType)t.push(r.node.nodeName);else{var a=Qe(n,e);t.push(a.findIndex((function(e){return Xn(e,r)})))}e=Ve(n,r=e)}return r}function to(e,t,n){for(var r={};0<t.length;)r.$a=t.pop(),e="string"==typeof r.$a?Le(n,e).find(function(e){return function(t){return t.node.nodeName===e.$a}}(r)):Qe(n,e)[r.$a],r={$a:r.$a};return e.node}function no(e,t,n){var r=e.node;if(!(Pe(r)||n||e.F))return r;r=t.da;var a=[];return n?za(e,t):(e=eo(e,a,t.h),(n=r.get(e.node))||(n={node:za(e,t),F:null},r.set(e.node,n)),to(n,a,t.h))}function ro(e,t,n,r,a){return r.M((function(e){for(var n="",r=0;r<e.length;r++){var o=e[r],u=t.v&&se(o.type,53)?t.v.serializeToString(no(o.value,t,!1)):Vt(Ie.m(o),t).map((function(e){return Hn(e,1)})).first().value;n+="{type: "+me[o.type]+", value: "+u+"}\n"}return void 0!==a&&(n+=a.first().value),t.s.trace(n),Ie.create(e)}))}var ao=[{j:[{type:59,g:2}],callFunction:ro,localName:"trace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:1,g:3}],callFunction:ro,localName:"trace",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}}];function oo(e,t,n,r,a){throw e=void 0===r||r.G()?new Fe("err","http://www.w3.org/2005/xqt-errors","FOER0000"):r.first().value,t="",void 0===a||a.G()||(t=": "+a.first().value),Error(""+e.localName+t)}var uo=[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[],i:{type:63,g:3},callFunction:oo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[{type:23,g:0}],i:{type:63,g:3},callFunction:oo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[{type:23,g:0},{type:1,g:3}],i:{type:63,g:3},callFunction:oo},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"error",j:[{type:23,g:0},{type:1,g:3},{type:59,g:2}],i:{type:63,g:3},callFunction:function(){throw Error("Not implemented: Using an error object in error is not supported")}}];function io(e){return"string"==typeof e?e:(e=(new ke).getChildNodes(e).find((function(e){return 8===e.nodeType})))?e.data:"some expression"}function co(e,t){e=Error.call(this,e),this.message=e.message,"stack"in e&&(this.stack=e.stack),this.position={end:{ja:t.end.ja,line:t.end.line,offset:t.end.offset},start:{ja:t.start.ja,line:t.start.line,offset:t.start.offset}}}function lo(e,t){if(t instanceof Error)throw t;"string"!=typeof e&&(e=io(e));var n=ni(t);e=e.replace("\r","").split("\n");var r=Math.floor(Math.log10(Math.min(n.end.line+2,e.length)))+1;throw e=e.reduce((function(e,t,a){var o=a+1;if(2<n.start.line-o||2<o-n.end.line)return e;if(a=Array(r).fill(" ",0,Math.floor(Math.log10(o))+1-r).join("")+o+": ",e.push(a+t),o>=n.start.line&&o<=n.end.line){var u=o<n.end.line?t.length+a.length:n.end.ja-1+a.length;o=o>n.start.line?a.length:n.start.ja-1+a.length,t=" ".repeat(a.length)+Array.from(t.substring(0,o-a.length),(function(e){return"\t"===e?"\t":" "})).join("")+"^".repeat(u-o),e.push(t)}return e}),[]),t=ri(t).join("\n"),new co(e.join("\n")+"\n\n"+t,n)}A(co,Error);var so=Object.create(null);function po(e,t){for(var n=[],r=0;r<e.length+1;++r)n[r]=[];return function r(a,o){if(0===a)return o;if(0===o)return a;if(void 0!==n[a][o])return n[a][o];var u=0;return e[a-1]!==t[o-1]&&(u=1),u=Math.min(r(a-1,o)+1,r(a,o-1)+1,r(a-1,o-1)+u),n[a][o]=u}(e.length,t.length)}function fo(e){var t=so[e]?so[e]:Object.keys(so).map((function(t){return{name:t,Ab:po(e,t.slice(t.lastIndexOf(":")+1))}})).sort((function(e,t){return e.Ab-t.Ab})).slice(0,5).filter((function(t){return t.Ab<e.length/2})).reduce((function(e,t){return e.concat(so[t.name])}),[]).slice(0,5);return t.length?t.map((function(e){return'"Q{'+e.namespaceURI+"}"+e.localName+" ("+e.j.map((function(e){return 4===e?"...":ge(e)})).join(", ")+')"'})).reduce((function(e,t,n,r){return 0===n?e+t:e+(n!==r.length-1?", ":" or ")+t}),"Did you mean ")+"?":"No similar functions found."}function ho(e,t,n){var r=so[e+":"+t];return r&&(r=r.find((function(e){return e.j.some((function(e){return 4===e}))?e.j.length-1<=n:e.j.length===n})))?{j:r.j,arity:n,callFunction:r.callFunction,I:r.I,localName:t,namespaceURI:e,i:r.i}:null}function mo(e,t,n,r,a){so[e+":"+t]||(so[e+":"+t]=[]),so[e+":"+t].push({j:n,arity:n.length,callFunction:a,I:!1,localName:t,namespaceURI:e,i:r})}var yo={},go=(yo.xml="http://www.w3.org/XML/1998/namespace",yo.xs="http://www.w3.org/2001/XMLSchema",yo.fn="http://www.w3.org/2005/xpath-functions",yo.map="http://www.w3.org/2005/xpath-functions/map",yo.array="http://www.w3.org/2005/xpath-functions/array",yo.math="http://www.w3.org/2005/xpath-functions/math",yo.fontoxpath="http://fontoxml.com/fontoxpath",yo.local="http://www.w3.org/2005/xquery-local-functions",yo);function vo(e,t,n,r){this.Ha=[Object.create(null)],this.Ia=Object.create(null),this.s=e,this.da=Object.keys(t).reduce((function(e,n){return void 0===t[n]||(e[n]="Q{}"+n+"[0]"),e}),Object.create(null)),this.o=Object.create(null),this.h=Object.create(null),this.v=n,this.l=r,this.B=[]}function wo(e){return Error("XPTY0004: "+e)}function Ao(e,t){return e=2===e.node.nodeType?e.node.nodeName+'="'+Je(t,e)+'"':e.node.outerHTML,Error("XQTY0024: The node "+e+" follows a node that is not an attribute node or a namespace node.")}function xo(e){return Error('XQDY0044: The node name "'+e.Ca()+'" is invalid for a computed attribute constructor.')}function Bo(){return Error("XQST0045: Functions and variables may not be declared in one of the reserved namespace URIs.")}function bo(){return Error("XQST0060: Functions declared in a module or as an external function must reside in a namespace.")}function Eo(){return Error("XQST0066: A Prolog may contain at most one default function namespace declaration.")}function No(){return Error("XQST0070: The prefixes xml and xmlns may not be used in a namespace declaration or be bound to another namespaceURI.")}function To(e){return Error('XQDY0074: The value "'+e+'" of a name expressions cannot be converted to an expanded QName.')}function Io(e){return Error('XPST0081: The prefix "'+e+'" could not be resolved')}function Co(e,t){return"Q{"+(e||"")+"}"+t}function Fo(e,t){for(var n=e.length-1;0<=n;--n)if(t in e[n])return e[n][t]}function Oo(e){this.o=e,this.s=this.h=0,this.B=[Object.create(null)],this.l=Object.create(null),this.v=null,this.Ia=e&&e.Ia,this.Ha=e&&e.Ha}function So(e){for(var t=new Oo(e.o),n=0;n<e.h+1;++n)t.B=[Object.assign(Object.create(null),t.B[0],e.B[n])],t.Ha=[Object.assign(Object.create(null),t.Ha[0],e.Ha[n])],t.l=Object.assign(Object.create(null),e.l),t.Ia=e.Ia,t.v=e.v;return t}function Go(e){e.s++,e.h++,e.B[e.h]=Object.create(null),e.Ha[e.h]=Object.create(null)}function Do(e,t,n){return(e=e.Ia[Co(t,n)])?e:null}function Ro(e,t,n,r,a){if(r=Co(t,n)+"~"+r,e.l[r])throw Error('XQST0049: The function or variable "Q{'+t+"}"+n+'" is declared more than once.');e.l[r]=a}function ko(e,t,n){e.B[e.h][t]=n}function Uo(e,t,n){return t=Co(t||"",n),e.Ha[e.h][t]=t+"["+e.s+"]"}function Mo(e,t,n,r){e.Ia[Co(t||"",n)+"["+e.s+"]"]=r}function Ho(e){e.B.length=e.h,e.Ha.length=e.h,e.h--}function Po(e,t){"*"===t||Array.isArray(t)||(t=[t]);for(var n=1;n<e.length;++n)if(Array.isArray(e[n])){var r=e[n];if("*"===t||t.includes(r[0]))return r}return null}function jo(e){return 2>e.length?"":"object"==typeof e[1]?e[2]||"":e[1]||""}function Xo(e,t){return Array.isArray(e)?"object"!=typeof(e=e[1])||Array.isArray(e)?null:t in e?e[t]:null:null}function Lo(e,t){return t.reduce(Po,e)}function Yo(e,t){for(var n=[],r=1;r<e.length;++r)if(Array.isArray(e[r])){var a=e[r];"*"!==t&&a[0]!==t||n.push(a)}return n}function Qo(e){return{localName:jo(e),namespaceURI:Xo(e,"URI"),prefix:Xo(e,"prefix")}}function Jo(e){function t(e){switch(e[0]){case"documentTest":return 55;case"elementTest":return 54;case"attributeTest":return 47;case"piTest":return 57;case"commentTest":return 58;case"textTest":return 56;case"anyKindTest":return 53;case"anyItemType":return 59;case"anyFunctionTest":case"functionTest":case"typedFunctionTest":return 60;case"anyMapTest":case"typedMapTest":return 61;case"anyArrayTest":case"typedArrayTest":return 62;case"atomicType":return ve([Xo(e,"prefix"),jo(e)].join(":"));case"parenthesizedItemType":return t(Po(e,"*"));default:throw Error('Type declaration "'+Po(n,"*")[0]+'" is not supported.')}}var n=Po(e,"typeDeclaration");if(!n||Po(n,"voidSequenceType"))return{type:59,g:2};e={type:t(Po(n,"*")),g:3};var r=null,a=Po(n,"occurrenceIndicator");switch(a&&(r=jo(a)),r){case"*":return e.g=2,e;case"?":return e.g=0,e;case"+":return e.g=1,e;case"":case null:return e}}function Ko(e,t,n){if("object"!=typeof e[1]||Array.isArray(e[1])){var r={};r[t]=n,e.splice(1,0,r)}else e[1][t]=n}function qo(e){var t={type:62,g:3};return Ko(e,"type",t),t}function _o(e,t){if(!t||!t.ia)return{type:59,g:2};var n=Po(e,"EQName");if(!n)return{type:59,g:2};var r=Qo(n);n=r.localName;var a=r.prefix;return r=Yo(Po(e,"arguments"),"*"),(n=t.ia.Ua({localName:n,prefix:a},r.length))&&(t=t.ia.xa(n.namespaceURI,n.localName,r.length+1))?(59!==t.i.type&&Ko(e,"type",t.i),t.i):{type:59,g:2}}function Vo(e,t,n){return(e<<20)+(t<<12)+(n.charCodeAt(0)<<8)+n.charCodeAt(1)}vo.prototype.xa=function(e,t,n){return ho(e,t,n)},vo.prototype.ib=function(e,t){return e?null:(e=this.da[t],this.o[t]||(this.o[t]={name:t}),e)},vo.prototype.Ua=function(e,t){var n=this.l(e,t);if(n)this.B.push({nc:e,arity:t,Lb:n});else if(""===e.prefix){if(this.v)return{namespaceURI:this.v,localName:e.localName}}else if(t=this.aa(e.prefix,!0))return{namespaceURI:t,localName:e.localName};return n},vo.prototype.aa=function(e,t){return void 0===t||t?go[e]?go[e]:(t=this.s(e),this.h[e]||(this.h[e]={namespaceURI:t,prefix:e}),void 0!==t||e?t:null):null},Oo.prototype.xa=function(e,t,n,r){r=void 0!==r&&r;var a=this.l[Co(e,t)+"~"+n];return!a||r&&a.Eb?null===this.o?null:this.o.xa(e,t,n,r):a},Oo.prototype.ib=function(e,t){var n=Fo(this.Ha,Co(e,t));return n||(null===this.o?null:this.o.ib(e,t))},Oo.prototype.Ua=function(e,t){var n=e.prefix,r=e.localName;return""===n&&this.v?{localName:r,namespaceURI:this.v}:n&&(n=this.aa(n,!1))?{localName:r,namespaceURI:n}:null===this.o?null:this.o.Ua(e,t)},Oo.prototype.aa=function(e,t){var n=Fo(this.B,e||"");return void 0===n?null===this.o?void 0:this.o.aa(e||"",void 0===t||t):n};var Wo={},Zo=(Wo[Vo(2,2,"idivOp")]=5,Wo[Vo(16,16,"addOp")]=16,Wo[Vo(16,16,"subtractOp")]=16,Wo[Vo(16,16,"divOp")]=4,Wo[Vo(16,2,"multiplyOp")]=16,Wo[Vo(16,2,"divOp")]=16,Wo[Vo(2,16,"multiplyOp")]=16,Wo[Vo(17,17,"addOp")]=17,Wo[Vo(17,17,"subtractOp")]=17,Wo[Vo(17,17,"divOp")]=4,Wo[Vo(17,2,"multiplyOp")]=17,Wo[Vo(17,2,"divOp")]=17,Wo[Vo(2,17,"multiplyOp")]=17,Wo[Vo(9,9,"subtractOp")]=17,Wo[Vo(7,7,"subtractOp")]=17,Wo[Vo(8,8,"subtractOp")]=17,Wo[Vo(9,16,"addOp")]=9,Wo[Vo(9,16,"subtractOp")]=9,Wo[Vo(9,17,"addOp")]=9,Wo[Vo(9,17,"subtractOp")]=9,Wo[Vo(7,16,"addOp")]=7,Wo[Vo(7,16,"subtractOp")]=7,Wo[Vo(7,17,"addOp")]=7,Wo[Vo(7,17,"subtractOp")]=7,Wo[Vo(8,17,"addOp")]=8,Wo[Vo(8,17,"subtractOp")]=8,Wo[Vo(9,16,"addOp")]=9,Wo[Vo(9,16,"subtractOp")]=9,Wo[Vo(9,17,"addOp")]=9,Wo[Vo(9,17,"subtractOp")]=9,Wo[Vo(7,17,"addOp")]=7,Wo[Vo(7,17,"subtractOp")]=7,Wo[Vo(7,16,"addOp")]=7,Wo[Vo(7,16,"subtractOp")]=7,Wo[Vo(8,17,"addOp")]=8,Wo[Vo(8,17,"subtractOp")]=8,Wo),$o={},zo=($o[Vo(2,2,"addOp")]=function(e,t){return e+t},$o[Vo(2,2,"subtractOp")]=function(e,t){return e-t},$o[Vo(2,2,"multiplyOp")]=function(e,t){return e*t},$o[Vo(2,2,"divOp")]=function(e,t){return e/t},$o[Vo(2,2,"modOp")]=function(e,t){return e%t},$o[Vo(2,2,"idivOp")]=function(e,t){return Math.trunc(e/t)},$o[Vo(16,16,"addOp")]=function(e,t){return new fn(e.ga+t.ga)},$o[Vo(16,16,"subtractOp")]=function(e,t){return new fn(e.ga-t.ga)},$o[Vo(16,16,"divOp")]=function(e,t){return e.ga/t.ga},$o[Vo(16,2,"multiplyOp")]=mn,$o[Vo(16,2,"divOp")]=function(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot divide xs:yearMonthDuration by NaN");if((e=Math.round(e.ga/t))>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while dividing xs:yearMonthDuration");return new fn(e<Number.MIN_SAFE_INTEGER||0===e?0:e)},$o[Vo(2,16,"multiplyOp")]=function(e,t){return mn(t,e)},$o[Vo(17,17,"addOp")]=function(e,t){return new it(e.ea+t.ea)},$o[Vo(17,17,"subtractOp")]=function(e,t){return new it(e.ea-t.ea)},$o[Vo(17,17,"divOp")]=function(e,t){if(0===t.ea)throw Error("FOAR0001: Division by 0");return e.ea/t.ea},$o[Vo(17,2,"multiplyOp")]=ft,$o[Vo(17,2,"divOp")]=function(e,t){if(isNaN(t))throw Error("FOCA0005: Cannot divide xs:dayTimeDuration by NaN");if((e=e.ea/t)>Number.MAX_SAFE_INTEGER||!Number.isFinite(e))throw Error("FODT0002: Value overflow while dividing xs:dayTimeDuration");return new it(e<Number.MIN_SAFE_INTEGER||Object.is(-0,e)?0:e)},$o[Vo(2,17,"multiplyOp")]=function(e,t){return ft(t,e)},$o[Vo(9,9,"subtractOp")]=Et,$o[Vo(7,7,"subtractOp")]=Et,$o[Vo(8,8,"subtractOp")]=Et,$o[Vo(9,16,"addOp")]=Nt,$o[Vo(9,16,"subtractOp")]=Tt,$o[Vo(9,17,"addOp")]=Nt,$o[Vo(9,17,"subtractOp")]=Tt,$o[Vo(7,16,"addOp")]=Nt,$o[Vo(7,16,"subtractOp")]=Tt,$o[Vo(7,17,"addOp")]=Nt,$o[Vo(7,17,"subtractOp")]=Tt,$o[Vo(8,17,"addOp")]=Nt,$o[Vo(8,17,"subtractOp")]=Tt,$o[Vo(9,16,"addOp")]=Nt,$o[Vo(9,16,"subtractOp")]=Tt,$o[Vo(9,17,"addOp")]=Nt,$o[Vo(9,17,"subtractOp")]=Tt,$o[Vo(7,17,"addOp")]=Nt,$o[Vo(7,17,"subtractOp")]=Tt,$o[Vo(7,16,"addOp")]=Nt,$o[Vo(7,16,"subtractOp")]=Tt,$o[Vo(8,17,"addOp")]=Nt,$o[Vo(8,17,"subtractOp")]=Tt,$o);function eu(e,t){return se(e,5)&&se(t,5)?5:se(e,4)&&se(t,4)?4:se(e,6)&&se(t,6)?6:3}var tu=[2,16,17,9,7,8];function nu(e,t,n){function r(e,t){return{U:a?a(e):e,V:o?o(t):t}}var a=null,o=null;se(t,19)&&(a=function(e){return Hn(e,3)},t=3),se(n,19)&&(o=function(e){return Hn(e,3)},n=3);var u=tu.filter((function(e){return se(t,e)})),i=tu.filter((function(e){return se(n,e)}));if(u.includes(2)&&i.includes(2)){var c=zo[Vo(2,2,e)],l=Zo[Vo(2,2,e)];return l||(l=eu(t,n)),"divOp"===e&&5===l&&(l=4),"idivOp"===e?au(r,c)[0]:function(e,t){return e=r(e,t),ne(c(e.U.value,e.V.value),l)}}for(var s=(u=p(u)).next();!s.done;s=u.next()){s=s.value;for(var f={},h=p(i),d=h.next();!d.done;f={nb:f.nb,qb:f.qb},d=h.next())if(d=d.value,f.nb=zo[Vo(s,d,e)],f.qb=Zo[Vo(s,d,e)],f.nb&&void 0!==f.qb)return function(e){return function(t,n){return t=r(t,n),ne(e.nb(t.U.value,t.V.value),e.qb)}}(f)}}function ru(e,t,n){function r(e,t){return{U:o?o(e):e,V:u?u(t):t}}var a=[2,53,59,46,47];if(a.includes(t)||a.includes(n))return 2;var o=null,u=null;se(t,19)&&(o=function(e){return Hn(e,3)},t=3),se(n,19)&&(u=function(e){return Hn(e,3)},n=3);var i=tu.filter((function(e){return se(t,e)}));if(a=tu.filter((function(e){return se(n,e)})),i.includes(2)&&a.includes(2))return void 0===(a=Zo[Vo(2,2,e)])&&(a=eu(t,n)),"divOp"===e&&5===a&&(a=4),"idivOp"===e?au(r,(function(e,t){return Math.trunc(e/t)}))[1]:a;for(var c=(i=p(i)).next();!c.done;c=i.next()){c=c.value;for(var l=p(a),s=l.next();!s.done;s=l.next())if(void 0!==(s=Zo[Vo(c,s.value,e)]))return s}}function au(e,t){return[function(n,r){if(n=(r=e(n,r)).U,0===(r=r.V).value)throw Error("FOAR0001: Divisor of idiv operator cannot be (-)0");if(Number.isNaN(n.value)||Number.isNaN(r.value)||!Number.isFinite(n.value))throw Error("FOAR0002: One of the operands of idiv is NaN or the first operand is (-)INF");return Number.isFinite(n.value)&&!Number.isFinite(r.value)?ne(0,5):ne(t(n.value,r.value),5)},5]}var ou=Object.create(null);function uu(e,t,n,r,a){ua.call(this,t.o.add(n.o),[t,n],{C:!1},!1,r),this.A=t,this.K=n,this.l=e,this.s=a}function iu(e,t){for(var n=wu,r=!1,a=1;a<e.length;a++)switch(e[a][0]){case"letClause":Fu(t);var o=e[a],u=t,i=n,c=Lo(o,["letClauseItem","typedVariableBinding","varName"]);c=Qo(c),i=i((o=Lo(o,["letClauseItem","letExpr"]))[1],u),Cu(u,c.localName,i);break;case"forClause":r=!0,Fu(t),cu(e[a],t,n);break;case"whereClause":Fu(t),n(u=e[a],t),Ko(u,"type",{type:0,g:3});break;case"orderByClause":Fu(t);break;case"returnClause":return u=n,Ko(n=Lo(a=e[a],["*"]),"type",t=u(n,t)),Ko(a,"type",t),(n=t)?(r&&(n={type:n.type,g:2}),59!==n.type&&Ko(e,"type",n),n):{type:59,g:2};default:return(n=n(e[a],t))?(r&&(n={type:n.type,g:2}),59!==n.type&&Ko(e,"type",n),n):{type:59,g:2}}if(!(0<t.h))throw Error("Variable scope out of bound");t.h--,t.o.pop(),t.v.pop()}function cu(e,t,n){var r=Qo(Lo(e,["forClauseItem","typedVariableBinding","varName"]));(e=Lo(e,["forClauseItem","forExpr","sequenceExpr"]))&&((e=Yo(e,"*").map((function(e){return n(e,t)}))).includes(void 0)||e.includes(null)||1===(e=lu(e)).length&&Cu(t,r.localName,e[0]))}function lu(e){return e.filter((function(e,t,n){return n.findIndex((function(t){return t.type===e.type&&t.g===e.g}))===t}))}function su(e,t){if(!t||!t.ia)return{type:59,g:2};var n=Po(e,"functionName"),r=Qo(n),a=r.localName,o=r.prefix,u=r.namespaceURI;if(r=Yo(Po(e,"arguments"),"*"),null===u){if(!(o=t.ia.Ua({localName:a,prefix:o},r.length)))return{type:59,g:2};a=o.localName,Ko(n,"URI",u=o.namespaceURI),n[2]=a}return(t=t.ia.xa(u,a,r.length))&&63!==t.i.type?(59!==t.i.type&&Ko(e,"type",t.i),t.i):{type:59,g:2}}function pu(e){var t={type:61,g:3};return Ko(e,"type",t),t}function fu(e,t){if(!t||!t.ia)return{type:59,g:2};var n=Po(e,"functionName"),r=Qo(n),a=r.localName,o=r.namespaceURI,u=r.prefix;if(r=Number(Lo(e,["integerConstantExpr","value"])[1]),!o){if(!(o=t.ia.Ua({localName:a,prefix:u},r)))return{type:59,g:2};a=o.localName,Ko(n,"URI",o=o.namespaceURI)}return(t=t.ia.xa(o,a,r)||null)?(59!==t.i.type&&63!==t.i.type&&Ko(e,"type",t.i),t.i):{type:59,g:2}}function hu(e,t){var n=Yo(e,"stepExpr");if(!n)return{type:59,g:2};for(var r=(n=p(n)).next();!r.done;r=n.next()){var a=r.value;r=t;var o=null;if(a){for(var u=Yo(a,"*"),i="",c=(u=p(u)).next();!c.done;c=u.next())switch(c=c.value,c[0]){case"filterExpr":o=Xo(Lo(c,["*"]),"type");break;case"xpathAxis":e:{switch(i=c[1]){case"attribute":o={type:47,g:2};break e;case"child":case"decendant":case"self":case"descendant-or-self":case"following-sibling":case"following":case"namespace":case"parent":case"ancestor":case"preceding-sibling":case"preceding":case"ancestor-or-self":o={type:53,g:2};break e}o=void 0}break;case"nameTest":var l=Qo(c);if(null!==l.namespaceURI)break;if("attribute"===i&&!l.prefix)break;void 0!==(l=r.aa(l.prefix||""))&&Ko(c,"URI",l);break;case"lookup":o={type:59,g:2}}o&&59!==o.type&&Ko(a,"type",o)}a=Xo(a,"type")}return a&&59!==a.type&&Ko(e,"type",a),a}function du(e){var t={type:0,g:3};return Ko(e,"type",t),t}function mu(e,t,n){return(t=0===t?{type:53,g:2}:1===t?n[0]:n.includes(void 0)||n.includes(null)||1<(t=lu(n)).length?{type:59,g:2}:{type:t[0].type,g:2})&&59!==t.type&&Ko(e,"type",t),t}function yu(e,t,n,r){if(!t||n.includes(void 0))return{type:59,g:2};for(var a=Yo(e,"typeswitchExprCaseClause"),o=0;o<n.length;o++){var u=Po(a[o],"*");switch(u[0]){case"sequenceType":if(u=gu(u,t,n[o]))return 59!==u.type&&Ko(e,"type",u),u;continue;case"sequenceTypeUnion":for(r=Yo(u,"*"),a=0;2>a;a++)if(u=gu(r[a],t,n[o]))return 59!==u.type&&Ko(e,"type",u),u;default:return{type:59,g:2}}}return 59!==r.type&&Ko(e,"type",r),r}function gu(e,t,n){var r=Yo(e,"*"),a=Po(e,"atomicType");if(!a)return{type:59,g:2};if(ve(Xo(a,"prefix")+":"+a[2])===t.type)if(1===r.length){if(3===t.g)return n}else if(e=Po(e,"occurrenceIndicator")[1],t.g===Ae(e))return n}function vu(e,t){wu(e,t)}function wu(e,t){var n=Tu.get(e[0]);if(n)return n(e,t);for(n=1;n<e.length;n++)e[n]&&wu(e[n],t)}function Au(e,t){var n=wu(Po(e,"firstOperand")[1],t),r=wu(Po(e,"secondOperand")[1],t),a=e[0];if(n&&r){if(!(t=ru(a,n.type,r.type)))throw Error("XPTY0004: "+a+" not available for types "+ge(n)+" and "+ge(r));n={type:t,g:n.g},2!==t&&59!==t&&Ko(e,"type",n),e=n}else e={type:2,g:3};return e}function xu(e,t){wu(Po(e,"firstOperand")[1],t),wu(Po(e,"secondOperand")[1],t);e:{switch(e[0]){case"orOp":case"andOp":Ko(e,"type",t={type:0,g:3}),e=t;break e}e=void 0}return e}function Bu(e,t){wu(Po(e,"firstOperand")[1],t),wu(Po(e,"secondOperand")[1],t);e:{switch(e[0]){case"unionOp":case"intersectOp":case"exceptOp":Ko(e,"type",t={type:53,g:2}),e=t;break e}e=void 0}return e}function bu(e,t){return wu(Po(e,"firstOperand")[1],t),wu(Po(e,"secondOperand")[1],t),Ko(e,"type",t={type:0,g:3}),t}function Eu(e,t){wu(Po(e,"firstOperand")[1],t),wu(Po(e,"secondOperand")[1],t),t=Xo(Lo(e,["firstOperand","*"]),"type");var n=Xo(Lo(e,["secondOperand","*"]),"type");return Ko(e,"type",t={type:0,g:tn(t)||tn(n)?0:3}),t}function Nu(e,t){wu(Po(e,"firstOperand")[1],t),wu(Po(e,"secondOperand")[1],t),t=Xo(Lo(e,["firstOperand","*"]),"type");var n=Xo(Lo(e,["secondOperand","*"]),"type");return Ko(e,"type",t={type:0,g:tn(t)||tn(n)?0:3}),t}A(uu,ua),uu.prototype.h=function(e,t){var n=this;return Vt(ia(this.A,e,t),t).M((function(r){return 0===r.length?Ie.empty():Vt(ia(n.K,e,t),t).M((function(e){if(0===e.length)return Ie.empty();if(1<r.length||1<e.length)throw Error('XPTY0004: the operands of the "'+n.l+'" operator should be empty or singleton.');var t=r[0];if(e=e[0],n.s&&n.type)return Ie.m(n.s(t,e));var a=t.type,o=e.type,u=n.l,i=a+"~"+o+"~"+u,c=ou[i];if(c||(c=ou[i]=nu(u,a,o)),!(a=c))throw Error("XPTY0004: "+n.l+" not available for types "+me[t.type]+" and "+me[e.type]);return Ie.m(a(t,e))}))}))};var Tu=new Map([["unaryMinusOp",function(e,t){return(t=wu(Po(e,"operand")[1],t))?se(t.type,2)?(Ko(e,"type",t={type:t.type,g:t.g}),e=t):(Ko(e,"type",t={type:3,g:3}),e=t):(Ko(e,"type",t={type:2,g:2}),e=t),e}],["unaryPlusOp",function(e,t){return(t=wu(Po(e,"operand")[1],t))?se(t.type,2)?(Ko(e,"type",t={type:t.type,g:t.g}),e=t):(Ko(e,"type",t={type:3,g:3}),e=t):(Ko(e,"type",t={type:2,g:2}),e=t),e}],["addOp",Au],["subtractOp",Au],["divOp",Au],["idivOp",Au],["modOp",Au],["multiplyOp",Au],["andOp",xu],["orOp",xu],["sequenceExpr",function(e,t){var n=Yo(e,"*"),r=n.map((function(e){return wu(e,t)}));return mu(e,n.length,r)}],["unionOp",Bu],["intersectOp",Bu],["exceptOp",Bu],["stringConcatenateOp",function(e,t){return wu(Po(e,"firstOperand")[1],t),wu(Po(e,"secondOperand")[1],t),Ko(e,"type",t={type:1,g:3}),t}],["rangeSequenceExpr",function(e,t){return wu(Po(e,"startExpr")[1],t),wu(Po(e,"endExpr")[1],t),Ko(e,"type",t={type:5,g:1}),t}],["equalOp",bu],["notEqualOp",bu],["lessThanOrEqualOp",bu],["lessThanOp",bu],["greaterThanOrEqualOp",bu],["greaterThanOp",bu],["eqOp",Eu],["neOp",Eu],["ltOp",Eu],["leOp",Eu],["gtOp",Eu],["geOp",Eu],["isOp",Nu],["nodeBeforeOp",Nu],["nodeAfterOp",Nu],["pathExpr",function(e,t){var n=Po(e,"rootExpr");return n&&n[1]&&wu(n[1],t),Yo(e,"stepExpr").map((function(e){return wu(e,t)})),hu(e,t)}],["contextItemExpr",function(){return{type:59,g:2}}],["ifThenElseExpr",function(e,t){wu(Po(Po(e,"ifClause"),"*"),t);var n=wu(Po(Po(e,"thenClause"),"*"),t);return t=wu(Po(Po(e,"elseClause"),"*"),t),n&&t&&n.type===t.type&&n.g===t.g?(59!==n.type&&Ko(e,"type",n),e=n):e={type:59,g:2},e}],["instanceOfExpr",function(e,t){return wu(Po(e,"argExpr"),t),wu(Po(e,"sequenceType"),t),Ko(e,"type",t={type:0,g:3}),t}],["integerConstantExpr",function(e){var t={type:5,g:3};return Ko(e,"type",t),t}],["doubleConstantExpr",function(e){var t={type:3,g:3};return Ko(e,"type",t),t}],["decimalConstantExpr",function(e){var t={type:4,g:3};return Ko(e,"type",t),t}],["stringConstantExpr",function(e){var t={type:1,g:3};return Ko(e,"type",t),t}],["functionCallExpr",function(e,t){return Yo(Po(e,"arguments"),"*").map((function(e){return wu(e,t)})),su(e,t)}],["arrowExpr",function(e,t){return wu(Po(e,"argExpr")[1],t),_o(e,t)}],["dynamicFunctionInvocationExpr",function(e,t){return wu(Lo(e,["functionItem","*"]),t),(e=Po(e,"arguments"))&&wu(e,t),{type:59,g:2}}],["namedFunctionRef",function(e,t){return fu(e,t)}],["inlineFunctionExpr",function(e,t){return wu(Po(e,"functionBody")[1],t),Ko(e,"type",t={type:60,g:3}),t}],["castExpr",function(e){var t=Lo(e,["singleType","atomicType"]);return 59!==(t={type:ve(Xo(t,"prefix")+":"+t[2]),g:3}).type&&Ko(e,"type",t),t}],["castableExpr",function(e){var t={type:0,g:3};return Ko(e,"type",t),t}],["simpleMapExpr",function(e,t){for(var n,r=Yo(e,"pathExpr"),a=0;a<r.length;a++)n=wu(r[a],t);return null!=n?(59!==(t={type:n.type,g:2}).type&&Ko(e,"type",t),e=t):e={type:59,g:2},e}],["mapConstructor",function(e,t){return Yo(e,"mapConstructorEntry").map((function(e){return{key:wu(Lo(e,["mapKeyExpr","*"]),t),value:wu(Lo(e,["mapValueExpr","*"]),t)}})),pu(e)}],["arrayConstructor",function(e,t){return Yo(Po(e,"*"),"arrayElem").map((function(e){return wu(e,t)})),qo(e)}],["unaryLookup",function(e){return Po(e,"NCName"),{type:59,g:2}}],["typeswitchExpr",function(e,t){return yu(e,wu(Po(e,"argExpr")[1],t),Yo(e,"typeswitchExprCaseClause").map((function(e){return wu(Lo(e,["resultExpr"])[1],t)})),wu(Lo(e,["typeswitchExprDefaultClause","resultExpr"])[1],t))}],["quantifiedExpr",function(e,t){return Yo(e,"*").map((function(e){return wu(e,t)})),du(e)}],["x:stackTrace",function(e,t){return wu((e=Yo(e,"*"))[0],t)}],["queryBody",function(e,t){return wu(e[1],t)}],["flworExpr",function(e,t){return iu(e,t)}],["varRef",function(e,t){var n,r=Qo(Po(e,"name"));e:{for(n=t.h;0<=n;n--){var a=t.o[n][r.localName];if(a){n=a;break e}}n=void 0}return n&&59!==n.type&&Ko(e,"type",n),null===r.namespaceURI&&void 0!==(t=t.aa(r.prefix))&&Ko(e,"URI",t),n}]]);function Iu(e){this.h=0,this.ia=e,this.o=[{}],this.v=[{}]}function Cu(e,t,n){if(e.o[e.h][t])throw Error("Another variable of in the scope "+e.h+" with the same name "+t+" already exists");e.o[e.h][t]=n}function Fu(e){e.h++,e.o.push({}),e.v.push({})}function Ou(e,t){var n={};ua.call(this,new Ca((n.external=1,n)),e,{C:e.every((function(e){return e.C}))},!1,t),this.l=e}function Su(e,t){var n={};ua.call(this,new Ca((n.external=1,n)),e,{C:e.every((function(e){return e.C}))},!1,t),this.l=e}function Gu(e){if(null===e)throw Qt("context is absent, it needs to be present to use axes.");if(!se(e.type,53))throw Error("XPTY0020: Axes can only be applied to nodes.");return e.value}function Du(e,t,n){var r=t;return{next:function(){if(!r)return ie;var t=r;return r=Ve(e,t,n),ce(et(t))}}}function Ru(e,t){t=t||{Ra:!1},ua.call(this,e.o,[e],{R:"reverse-sorted",X:!1,subtree:!1,C:!1}),this.l=e,this.s=!!t.Ra}Iu.prototype.aa=function(e){for(var t=this.h;0<=t;t--){var n=this.v[t][e];if(void 0!==n)return n}return this.ia?this.ia.aa(e):void 0},A(Ou,ua),Ou.prototype.h=function(e,t){return 0===this.l.length?Ie.m(new $e([])):ia(this.l[0],e,t).M((function(e){return Ie.m(new $e(e.map((function(e){return Ce(Ie.m(e))}))))}))},A(Su,ua),Su.prototype.h=function(e,t){return Ie.m(new $e(this.l.map((function(n){return Ce(ia(n,e,t))}))))},A(Ru,ua),Ru.prototype.h=function(e,t){var n=this;t=t.h,e=Gu(e.N);var r=this.l.B();return r=r&&(r.startsWith("name-")||"type-1"===r)?"type-1":null,Ie.create(Du(t,this.s?e:Ve(t,e,r),r)).filter((function(e){return n.l.l(e)}))};var ku=new Map([["type-1-or-type-2",["name","type-1","type-2"]],["type-1",["name"]],["type-2",["name"]]]);function Uu(e,t){if(null===e)return t;if(null===t||e===t)return e;var n=e.startsWith("name-")?"name":e,r=t.startsWith("name-")?"name":t,a=ku.get(n);return void 0!==a&&a.includes(r)?t:void 0!==(t=ku.get(r))&&t.includes(n)?e:"empty"}function Mu(e,t){var n={};ua.call(this,new Ca((n.attribute=1,n)),[e],{R:"unsorted",subtree:!0,X:!0,C:!1}),this.l=e,this.s=Uu(this.l.B(),t)}function Hu(e,t){ua.call(this,e.o,[e],{R:"sorted",subtree:!0,X:!0,C:!1}),this.s=e,this.l=Uu(t,e.B())}function Pu(e,t,n){var r=t.node.nodeType;if(1!==r&&9!==r)return{next:function(){return ie}};var a=Ke(e,t,n);return{next:function(){if(!a)return ie;var t=a;return a=_e(e,a,n),ce(t)}}}function ju(e,t,n){var r=[Pn(t)];return{next:function(t){if(0<r.length&&1&t&&r.shift(),!r.length)return ie;for(t=r[0].next(0);t.done;){if(r.shift(),!r.length)return ie;t=r[0].next(0)}return r.unshift(Pu(e,t.value,n)),ce(et(t.value))}}}function Xu(e,t){t=t||{Ra:!1},ua.call(this,e.o,[e],{C:!1,X:!1,R:"sorted",subtree:!0}),this.l=e,this.s=!!t.Ra,this.A=(e=this.l.B())&&(e.startsWith("name-")||"type-1"===e)||"type-1-or-type-2"===e?"type-1":null}function Lu(e,t,n){var r=e.node.nodeType;if(1!==r&&9!==r)return e;for(r=qe(t,e,n);null!==r;){if(1!==r.node.nodeType)return r;r=qe(t,e=r,n)}return e}function Yu(e,t,n,r){if(void 0!==n&&n){var a=t,o=!1;return{next:function(){if(o)return ie;if(Xn(a,t))return Xn(a=Lu(t,e,r),t)?(o=!0,ie):ce(et(a));var n=a.node.nodeType,u=9===n||2===n?null:We(e,a,r);return null!==u?ce(et(a=Lu(u,e,r))):Xn(a=9===n?null:Ve(e,a,r),t)?(o=!0,ie):ce(et(a))}}}var u=[Pu(e,t,r)];return{next:function(){if(!u.length)return ie;for(var t=u[0].next(0);t.done;){if(u.shift(),!u.length)return ie;t=u[0].next(0)}return u.unshift(Pu(e,t.value,r)),ce(et(t.value))}}}function Qu(e,t,n){for(var r=[];t&&9!==t.node.nodeType;t=Ve(e,t,null)){var a=_e(e,t,n);a&&r.push(a)}var o=null;return{next:function(){for(;o||r.length;){if(!o){o=Yu(e,r[0],!1,n);var t=ce(et(r[0])),a=_e(e,r[0],n);return a?r[0]=a:r.shift(),t}if(!(t=o.next(0)).done)return t;o=null}return ie}}}function Ju(e){ua.call(this,e.o,[e],{R:"sorted",X:!0,subtree:!1,C:!1}),this.l=e,this.s=(e=this.l.B())&&(e.startsWith("name-")||"type-1"===e)?"type-1":null}function Ku(e,t,n){return{next:function(){return(t=t&&_e(e,t,n))?ce(et(t)):ie}}}function qu(e,t){ua.call(this,e.o,[e],{R:"sorted",X:!0,subtree:!1,C:!1}),this.l=e,this.s=Uu(this.l.B(),t)}function _u(e,t){ua.call(this,e.o,[e],{R:"reverse-sorted",X:!0,subtree:!0,C:!1}),this.l=e,this.s=Uu(t,this.l.B())}function Vu(e,t,n){for(var r=[];t&&9!==t.node.nodeType;t=Ve(e,t,null)){var a=We(e,t,n);null!==a&&r.push(a)}var o=null;return{next:function(){for(;o||r.length;){o||(o=Yu(e,r[0],!0,n));var t=o.next(0);if(t.done){o=null,t=We(e,r[0],n);var a=ce(et(r[0]));return null===t?r.shift():r[0]=t,a}return t}return ie}}}function Wu(e){ua.call(this,e.o,[e],{C:!1,X:!0,R:"reverse-sorted",subtree:!1}),this.l=e,this.s=(e=this.l.B())&&(e.startsWith("name-")||"type-1"===e)?"type-1":null}function Zu(e,t,n){return{next:function(){return(t=t&&We(e,t,n))?ce(et(t)):ie}}}function $u(e,t){ua.call(this,e.o,[e],{C:!1,X:!0,R:"reverse-sorted",subtree:!1}),this.l=e,this.s=Uu(this.l.B(),t)}function zu(e,t){ua.call(this,e.o,[e],{R:"sorted",subtree:!0,X:!0,C:!1}),this.l=e,this.s=Uu(this.l.B(),t)}function ei(e,t,n,r){var a=e.o.add(t.o).add(n.o);Ea.call(this,a,[e,t,n],{C:e.C&&t.C&&n.C,X:t.X===n.X&&t.X,R:t.da===n.da?t.da:"unsorted",subtree:t.subtree===n.subtree&&t.subtree},r),this.l=e}function ti(e,t,n){this.location=e,this.o=t,this.h=n}function ni(e){return e.h instanceof Error?e.location:ni(e.h)}function ri(e){var t=e.h instanceof co?["Inner error:",e.h.message]:e.h instanceof Error?[e.h.toString()]:ri(e.h);return t.push("  at <"+e.o+">:"+e.location.start.line+":"+e.location.start.ja+" - "+e.location.end.line+":"+e.location.end.ja),t}function ai(e,t,n){Ea.call(this,n.o,[n],{C:n.C,X:n.X,R:n.da,subtree:n.subtree}),this.l=t,this.K={end:{ja:e.end.ja,line:e.end.line,offset:e.end.offset},start:{ja:e.start.ja,line:e.start.line,offset:e.start.offset}}}function oi(e,t,n,r){ua.call(this,e,t,n,!0),this.l=r,this.I=this.l.I}function ui(e,t,n,r){var a=[],o=e.K(t,n,r,(function(n){if(e.l instanceof oi)return ba(ui(e.l,t,n,r),(function(e){return a=e}));var o=null;return Ie.create({next:function(){for(;;){if(!o){var t=n.next(0);if(t.done)return ie;t=e.l.s(t.value,r),o=ba(t,(function(e){return a=Aa(a,e)})).value}if(!(t=o.next(0)).done)return t;o=null}}})})),u=!1;return{next:function(){if(u)return ie;var e=o.O();return u=!0,ce(new ca(e,a))}}}function ii(e,t,n,r){return e.K(t,n,r,(function(n){if(e.l instanceof oi)return ii(e.l,t,n,r);var a=null;return Ie.create({next:function(){for(;;){if(!a){var t=n.next(0);if(t.done)return ie;a=ia(e.l,t.value,r).value}if(!(t=a.next(0)).done)return t;a=null}}})}))}function ci(e,t,n,r){oi.call(this,t.o.add(r.o),[t,r],{C:!1},r),this.S=e.prefix,this.la=e.namespaceURI,this.Xb=e.localName,this.Gb=null,this.A=n,this.Ba=null,this.pa=t}function li(e,t,n){var r={};ua.call(this,new Ca((r.external=1,r)),[n],{C:!1,R:"unsorted"}),this.S=e.map((function(e){return e.name})),this.A=e.map((function(e){return e.type})),this.s=null,this.K=t,this.l=n}function si(e,t,n){if(oi.call(this,t.o.add(n.o),[t,n],{C:!1,X:n.X,R:n.da,subtree:n.subtree},n),e.prefix||e.namespaceURI)throw Error("Not implemented: let expressions with namespace usage.");this.A=e.prefix,this.S=e.namespaceURI,this.Ba=e.localName,this.la=t,this.pa=null}function pi(e,t){switch(ua.call(this,new Ca({}),[],{C:!0,R:"sorted"},!1,t),t.type){case 5:var n=ne(parseInt(e,10),t.type);break;case 1:n=ne(e,t.type);break;case 4:case 3:n=ne(parseFloat(e),t.type);break;default:throw new TypeError("Type "+t+" not expected in a literal")}this.l=function(){return Ie.m(n)}}function fi(e,t){var n={};ua.call(this,new Ca((n.external=1,n)),e.reduce((function(e,t){return e.concat(t.key,t.value)}),[]),{C:!1},!1,t),this.l=e}function hi(e,t,n){var r={};ua.call(this,new Ca((r.external=1,r)),[],{C:!0},!1,n),this.s=t,this.A=e,this.l=null}A(Mu,ua),Mu.prototype.h=function(e,t){var n=this;return t=t.h,1!==(e=Gu(e.N)).node.nodeType?Ie.empty():(e=Le(t,e,this.s).filter((function(e){return"http://www.w3.org/2000/xmlns/"!==e.node.namespaceURI})).map((function(e){return et(e)})).filter((function(e){return n.l.l(e)})),Ie.create(e))},Mu.prototype.B=function(){return"type-1"},A(Hu,ua),Hu.prototype.h=function(e,t){var n=this,r=t.h,a=Gu(e.N);if(1!==(e=a.node.nodeType)&&9!==e)return Ie.empty();var o=null,u=!1;return Ie.create({next:function(){for(;!u;){if(!o){if(!(o=Ke(r,a,n.l))){u=!0;continue}return ce(et(o))}if(o=_e(r,o,n.l))return ce(et(o));u=!0}return ie}}).filter((function(e){return n.s.l(e)}))},A(Xu,ua),Xu.prototype.h=function(e,t){var n=this;return e=ju(t=t.h,e=Gu(e.N),this.A),this.s||e.next(0),Ie.create(e).filter((function(e){return n.l.l(e)}))},A(Ju,ua),Ju.prototype.h=function(e,t){var n=this;return t=t.h,e=Gu(e.N),Ie.create(Qu(t,e,this.s)).filter((function(e){return n.l.l(e)}))},A(qu,ua),qu.prototype.h=function(e,t){var n=this;return t=t.h,e=Gu(e.N),Ie.create(Ku(t,e,this.s)).filter((function(e){return n.l.l(e)}))},A(_u,ua),_u.prototype.h=function(e,t){return(e=Ve(t=t.h,e=Gu(e.N),this.s))?(e=et(e),this.l.l(e)?Ie.m(e):Ie.empty()):Ie.empty()},A(Wu,ua),Wu.prototype.h=function(e,t){var n=this;return t=t.h,e=Gu(e.N),Ie.create(Vu(t,e,this.s)).filter((function(e){return n.l.l(e)}))},A($u,ua),$u.prototype.h=function(e,t){var n=this;return t=t.h,e=Gu(e.N),Ie.create(Zu(t,e,this.s)).filter((function(e){return n.l.l(e)}))},A(zu,ua),zu.prototype.h=function(e){return Gu(e.N),this.l.l(e.N)?Ie.m(e.N):Ie.empty()},zu.prototype.B=function(){return this.s},A(ei,Ea),ei.prototype.A=function(e,t,n){var r=null,a=n[0](e);return Ie.create({next:function(t){return r||(r=(a.ha()?n[1](e):n[2](e)).value),r.next(t)}})},ei.prototype.v=function(e){if(Ea.prototype.v.call(this,e),this.l.I)throw Vr()},A(ai,Ea),ai.prototype.A=function(e,t,n){var r=this;t=p(n).next().value;try{var a=t(e)}catch(e){throw new ti(this.K,this.l,e)}return Ie.create({next:function(e){try{return a.value.next(e)}catch(e){throw new ti(r.K,r.l,e)}}})},ai.prototype.v=function(e){try{Ea.prototype.v.call(this,e)}catch(e){throw new ti(this.K,this.l,e)}},A(oi,ua),oi.prototype.h=function(e,t){var n=this;return this.K(e,Pn(e),t,(function(r){if(n.l instanceof oi)return ii(n.l,e,r,t);var a=null;return Ie.create({next:function(e){for(;;){if(!a){var o=r.next(0);if(o.done)return ie;a=ia(n.l,o.value,t).value}if(!(o=a.next(e)).done)return o;a=null}}})}))},oi.prototype.s=function(e,t){return ui(this,e,Pn(e),t)},oi.prototype.v=function(e){ua.prototype.v.call(this,e),this.I=this.l.I;for(var t=(e=p(this.ta)).next();!t.done;t=e.next())if((t=t.value)!==this.l&&t.I)throw Vr()},A(ci,oi),ci.prototype.K=function(e,t,n,r){var a=this,o=null,u=null,i=0;return r({next:function(){for(var e={};;){if(!o){var r=t.next(0);if(r.done)return ie;u=r.value,i=0,o=ia(a.pa,u,n).value}if(e.mb=o.next(0),!e.mb.done)return i++,(r={})[a.Gb]=function(e){return function(){return Ie.m(e.mb.value)}}(e),e=r,a.Ba&&(e[a.Ba]=function(){return Ie.m(new he(5,i))}),ce(jt(u,e));o=null,e={mb:e.mb}}}})},ci.prototype.v=function(e){if(this.S&&(this.la=e.aa(this.S),!this.la&&this.S))throw Error("XPST0081: Could not resolve namespace for prefix "+this.S+" in a for expression");if(this.pa.v(e),Go(e),this.Gb=Uo(e,this.la,this.Xb),this.A){if(this.A.prefix&&(this.A.namespaceURI=e.aa(this.A.prefix),!this.A.namespaceURI&&this.A.prefix))throw Error("XPST0081: Could not resolve namespace for prefix "+this.S+" in the positionalVariableBinding in a for expression");this.Ba=Uo(e,this.A.namespaceURI,this.A.localName)}if(this.l.v(e),Ho(e),this.pa.I)throw Vr();this.l.I&&(this.I=!0)},A(li,ua),li.prototype.h=function(e,t){var n=this,r=new Oe({j:this.A,arity:this.A.length,Sa:!0,I:this.l.I,localName:"dynamic-function",namespaceURI:"",i:this.K,value:function(r,a,o){var u=O.apply(3,arguments),i=jt(Pt(e,-1,null,Ie.empty()),n.s.reduce((function(e,t,n){return e[t]=Ce(u[n]),e}),Object.create(null)));return ia(n.l,i,t)}});return Ie.m(r)},li.prototype.v=function(e){if(Go(e),this.s=this.S.map((function(t){return Uo(e,t.namespaceURI,t.localName)})),this.l.v(e),Ho(e),this.l.I)throw Error("Not implemented: inline functions can not yet be updating.")},A(si,oi),si.prototype.K=function(e,t,n,r){var a=this;return r({next:function(){var e=t.next(0);if(e.done)return ie;var r={};return ce(e=jt(e=e.value,(r[a.pa]=Ce(ia(a.la,e,n)),r)))}})},si.prototype.v=function(e){if(this.A&&(this.S=e.aa(this.A),!this.S&&this.A))throw Error("XPST0081: Could not resolve namespace for prefix "+this.A+" using in a for expression");if(this.la.v(e),Go(e),this.pa=Uo(e,this.S,this.Ba),this.l.v(e),Ho(e),this.I=this.l.I,this.la.I)throw Vr()},A(pi,ua),pi.prototype.h=function(){return this.l()},A(fi,ua),fi.prototype.h=function(e,t){var n=this;return tt(this.l.map((function(n){return Vt(ia(n.key,e,t),t).Z({default:function(){throw Error("XPTY0004: A key of a map should be a single atomizable value.")},m:function(e){return e}})})),(function(r){return Ie.m(new at(r.map((function(r,a){return{key:r,value:Ce(ia(n.l[a].value,e,t))}}))))}))},A(hi,ua),hi.prototype.h=function(){var e=new Oe({j:this.l.j,I:this.l.I,arity:this.s,localName:this.l.localName,namespaceURI:this.l.namespaceURI,i:this.l.i,value:this.l.callFunction});return Ie.m(e)},hi.prototype.v=function(e){var t=this.A.namespaceURI,n=this.A.localName,r=this.A.prefix;if(null===t){var a=e.Ua({localName:n,prefix:r},this.s);if(!a)throw Error("XPST0017: The function "+(r?r+":":"")+n+" with arity "+this.s+" could not be resolved. "+fo(n));t=a.namespaceURI,n=a.localName}if(this.l=e.xa(t,n,this.s)||null,!this.l)throw e=this.A,Error("XPST0017: Function "+(e.namespaceURI?"Q{"+e.namespaceURI+"}":e.prefix?e.prefix+":":"")+e.localName+" with arity of "+this.s+" not registered. "+fo(n));ua.prototype.v.call(this,e)};var di={},mi=(di[5]=5,di[27]=5,di[28]=5,di[31]=5,di[32]=5,di[33]=5,di[34]=5,di[30]=5,di[36]=5,di[35]=5,di[38]=5,di[37]=5,di[29]=5,di[4]=4,di[6]=6,di[3]=3,di);function yi(e,t,n){ua.call(this,t.o,[t],{C:!1},!1,n),this.s=t,this.l=e}function gi(e,t){ua.call(this,e.reduce((function(e,t){return e.add(t.o)}),new Ca({})),e,{C:e.every((function(e){return e.C}))},!1,t),this.l=e,this.s=e.reduce((function(e,t){return Uu(e,t.B())}),null)}function vi(e,t){var n,r=e.reduce((function(e,t){return 0<Fa(e,t.o)?e:t.o}),new Ca({}));for(ua.call(this,r,e,{C:e.every((function(e){return e.C}))},!1,t),t=0;t<e.length&&(void 0===n&&(n=e[t].B()),null!==n);++t)if(n!==e[t].B()){n=null;break}this.s=n,this.l=e}function wi(e,t){var n;return Ie.create({next:function(r){for(;;){if(!n){var a=e.value.next(r);if(a.done)return ie;n=_t(a.value,t)}if(!(a=n.value.next(r)).done)return a;n=null}}})}function Ai(e,t){if("eqOp"===e)return function(e,n){return e=(n=t(e,n)).U,n=n.V,e.value.namespaceURI===n.value.namespaceURI&&e.value.localName===n.value.localName};if("neOp"===e)return function(e,n){return e=(n=t(e,n)).U,n=n.V,e.value.namespaceURI!==n.value.namespaceURI||e.value.localName!==n.value.localName};throw Error('XPTY0004: Only the "eq" and "ne" comparison is defined for xs:QName')}function xi(e,t){switch(e){case"eqOp":return function(e,n){return(e=t(e,n)).U.value===e.V.value};case"neOp":return function(e,n){return(e=t(e,n)).U.value!==e.V.value};case"ltOp":return function(e,n){return(e=t(e,n)).U.value<e.V.value};case"leOp":return function(e,n){return(e=t(e,n)).U.value<=e.V.value};case"gtOp":return function(e,n){return(e=t(e,n)).U.value>e.V.value};case"geOp":return function(e,n){return(e=t(e,n)).U.value>=e.V.value}}}function Bi(e,t){switch(e){case"ltOp":return function(e,n){return(e=t(e,n)).U.value.ga<e.V.value.ga};case"leOp":return function(e,n){return e=(n=t(e,n)).U,n=n.V,ut(e.value,n.value)||e.value.ga<n.value.ga};case"gtOp":return function(e,n){return(e=t(e,n)).U.value.ga>e.V.value.ga};case"geOp":return function(e,n){return e=(n=t(e,n)).U,n=n.V,ut(e.value,n.value)||e.value.ga>n.value.ga}}}function bi(e,t){switch(e){case"eqOp":return function(e,n){return ut((e=t(e,n)).U.value,e.V.value)};case"ltOp":return function(e,n){return(e=t(e,n)).U.value.ea<e.V.value.ea};case"leOp":return function(e,n){return e=(n=t(e,n)).U,n=n.V,ut(e.value,n.value)||e.value.ea<n.value.ea};case"gtOp":return function(e,n){return(e=t(e,n)).U.value.ea>e.V.value.ea};case"geOp":return function(e,n){return e=(n=t(e,n)).U,n=n.V,ut(e.value,n.value)||e.value.ea>n.value.ea}}}function Ei(e,t){switch(e){case"eqOp":return function(e,n){return ut((e=t(e,n)).U.value,e.V.value)};case"neOp":return function(e,n){return!ut((e=t(e,n)).U.value,e.V.value)}}}function Ni(e,t){switch(e){case"eqOp":return function(e,n,r){return bt((e=t(e,n)).U.value,e.V.value,Mt(r))};case"neOp":return function(e,n,r){return!bt((e=t(e,n)).U.value,e.V.value,Mt(r))};case"ltOp":return function(e,n,r){return e=t(e,n),r=Mt(r),0>Bt(e.U.value,e.V.value,r)};case"leOp":return function(e,n,r){var a;return e=(n=t(e,n)).U,n=n.V,(a=bt(e.value,n.value,Mt(r)))||(r=Mt(r),a=0>Bt(e.value,n.value,r)),a};case"gtOp":return function(e,n,r){return e=t(e,n),r=Mt(r),0<Bt(e.U.value,e.V.value,r)};case"geOp":return function(e,n,r){var a;return e=(n=t(e,n)).U,n=n.V,(a=bt(e.value,n.value,Mt(r)))||(r=Mt(r),a=0<Bt(e.value,n.value,r)),a}}}function Ti(e,t){switch(e){case"eqOp":return function(e,n,r){return bt((e=t(e,n)).U.value,e.V.value,Mt(r))};case"neOp":return function(e,n,r){return!bt((e=t(e,n)).U.value,e.V.value,Mt(r))}}}function Ii(e,t,n){function r(e,t){return{U:u?u(e):e,V:i?i(t):t}}function a(e){return se(t,e)&&se(n,e)}function o(e){return 0<e.filter((function(e){return se(t,e)})).length&&0<e.filter((function(e){return se(n,e)})).length}var u=null,i=null;if(se(t,19)&&se(n,19)?t=n=1:se(t,19)?(u=function(e){return Hn(e,n)},t=n):se(n,19)&&(i=function(e){return Hn(e,t)},n=t),se(t,23)&&se(n,23))return Ai(e,r);if(a(0)||o([1,47,61])||o([2,47,61])||a(20)||a(22)||a(21)||o([1,20])){var c=xi(e,r);if(void 0!==c)return c}if(a(16)&&void 0!==(c=Bi(e,r))||a(17)&&void 0!==(c=bi(e,r))||a(18)&&void 0!==(c=Ei(e,r)))return c;if((a(9)||a(7)||a(8))&&void 0!==(c=Ni(e,r)))return c;if((a(11)||a(12)||a(13)||a(14)||a(15))&&void 0!==(c=Ti(e,r)))return c;throw Error("XPTY0004: "+e+" not available for "+me[t]+" and "+me[n])}A(yi,ua),yi.prototype.h=function(e,t){var n=this;return Vt(ia(this.s,e,t),t).M((function(e){if(0===e.length)return Ie.empty();var t=e[0];if(n.type)return e="+"===n.l?+t.value:-t.value,0===t.type&&(e=Number.NaN),Ie.m(ne(e,n.type.type));if(1<e.length)throw Error("XPTY0004: The operand to a unary operator must be a sequence with a length less than one");return se(t.type,19)?(t=Hn(t,3).value,Ie.m(ne("+"===n.l?t:-t,3))):se(t.type,2)?"+"===n.l?Ie.m(t):Ie.m(ne(-1*t.value,mi[t.type])):Ie.m(ne(Number.NaN,3))}))},A(gi,ua),gi.prototype.h=function(e,t){var n=this,r=0,a=null,o=!1,u=null;if(null!==e){var i=e.N;null!==i&&se(i.type,53)&&(u=De(i.value))}return Ie.create({next:function(){if(!o){for(;r<n.l.length;){if(!a){var i=n.l[r];if(null!==u&&null!==i.B()&&!u.includes(i.B()))return r++,o=!0,ce(ae);a=ia(i,e,t)}if(!1===a.ha())return o=!0,ce(ae);a=null,r++}return o=!0,ce(re)}return ie}})},gi.prototype.B=function(){return this.s},A(vi,ua),vi.prototype.h=function(e,t){var n=this,r=0,a=null,o=!1,u=null;if(null!==e){var i=e.N;null!==i&&se(i.type,53)&&(u=De(i.value))}return Ie.create({next:function(){if(!o){for(;r<n.l.length;){if(!a){var i=n.l[r];if(null!==u&&null!==i.B()&&!u.includes(i.B())){r++;continue}a=ia(i,e,t)}if(!0===a.ha())return o=!0,ce(re);a=null,r++}return o=!0,ce(ae)}return ie}})},vi.prototype.B=function(){return this.s};var Ci=Object.create(null);function Fi(e,t,n){var r=t+"~"+n+"~"+e,a=Ci[r];return a||(a=Ci[r]=Ii(e,t,n)),a}function Oi(e,t,n){ua.call(this,t.o.add(n.o),[t,n],{C:!1}),this.l=t,this.A=n,this.s=e}A(Oi,ua),Oi.prototype.h=function(e,t){var n=this,r=ia(this.l,e,t),a=ia(this.A,e,t),o=wi(r,t),u=wi(a,t);return o.Z({empty:function(){return Ie.empty()},m:function(){return u.Z({empty:function(){return Ie.empty()},m:function(){var t=o.first(),r=u.first();return Fi(n.s,t.type,r.type)(t,r,e)?Ie.ba():Ie.W()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton.")}})},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton.")}})};var Si={},Gi=(Si.equalOp="eqOp",Si.notEqualOp="neOp",Si.lessThanOrEqualOp="leOp",Si.lessThanOp="ltOp",Si.greaterThanOrEqualOp="geOp",Si.greaterThanOp="gtOp",Si);function Di(e,t,n,r){return e=Gi[e],n.M((function(n){return t.filter((function(t){for(var a=0,o=n.length;a<o;++a){var u=n[a],i=void 0,c=void 0,l=t.type,s=u.type;if((se(l,19)||se(s,19))&&(se(l,2)?i=3:se(s,2)?c=3:se(l,17)?i=17:se(s,17)?c=17:se(l,16)?i=16:se(s,16)?c=16:se(l,19)?c=s:se(s,19)&&(i=l)),i=(c=p([c,i])).next().value,c=c.next().value,i?t=Hn(t,i):c&&(u=Hn(u,c)),Fi(e,t.type,u.type)(t,u,r))return!0}return!1})).Z({default:function(){return Ie.ba()},empty:function(){return Ie.W()}})}))}function Ri(e,t,n){ua.call(this,t.o.add(n.o),[t,n],{C:!1}),this.l=t,this.A=n,this.s=e}function ki(e,t,n,r){if(!se(n,53)||!se(r,53))throw Error("XPTY0004: Sequences to compare are not nodes");switch(e){case"isOp":return Ui(n,r);case"nodeBeforeOp":return t?function(e,n){return 0>qn(t,e.first(),n.first())}:void 0;case"nodeAfterOp":return t?function(e,n){return 0<qn(t,e.first(),n.first())}:void 0;default:throw Error("Unexpected operator")}}function Ui(e,t){return e!==t||47!==e&&53!==e&&54!==e&&55!==e&&56!==e&&57!==e&&58!==e?function(){return!1}:function(e,t){return Xn(e.first().value,t.first().value)}}function Mi(e,t,n){ua.call(this,t.o.add(n.o),[t,n],{C:!1}),this.l=t,this.A=n,this.s=e}function Hi(e,t,n,r){return n.M((function(n){if(n.some((function(e){return!se(e.type,53)})))throw Error("XPTY0004: Sequences given to "+e+" should only contain nodes.");return"sorted"===r?Ie.create(n):"reverse-sorted"===r?Ie.create(n.reverse()):Ie.create(_n(t,n))}))}function Pi(e,t,n,r){ua.call(this,0<Fa(t.o,n.o)?t.o:n.o,[t,n],{C:t.C&&n.C},!1,r),this.l=e,this.s=t,this.A=n}function ji(e,t){Ea.call(this,e.reduce((function(e,t){return e.add(t.o)}),new Ca({})),e,{R:"unsorted",C:e.every((function(e){return e.C}))},t)}function Xi(e,t,n){ua.call(this,new Ca({}).add(e.o),[e,t],{C:e.C&&t.C},!1,n),this.l=e,this.s=t}function Li(e,t,n){if(ua.call(this,e.o,[e],{C:!1}),this.l=ve(t.prefix?t.prefix+":"+t.localName:t.localName),46===this.l||45===this.l||44===this.l)throw Error("XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.");if(t.namespaceURI)throw Error("Not implemented: castable as expressions with a namespace URI.");this.A=e,this.s=n}function Yi(e,t,n){if(ua.call(this,e.o,[e],{C:!1}),this.l=ve(t.prefix?t.prefix+":"+t.localName:t.localName),46===this.l||45===this.l||44===this.l)throw Error("XPST0080: Casting to xs:anyAtomicType, xs:anySimpleType or xs:NOTATION is not permitted.");if(t.namespaceURI)throw Error("Not implemented: casting expressions with a namespace URI.");this.A=e,this.s=n}function Qi(e,t){var n=e.value,r=null,a=!1;return Ie.create({next:function(){for(;!a;){if(!r){var e=n.next(0);if(e.done)return a=!0,ce(re);r=t(e.value)}if(e=r.ha(),r=null,!1===e)return a=!0,ce(ae)}return ie}})}function Ji(e,t,n,r){ua.call(this,e.o,[e],{C:!1},!1,r),this.A=e,this.s=t,this.l=n}function Ki(e,t){return!(null===e||null===t||!se(e.type,53)||!se(t.type,53))&&Xn(e.value,t.value)}function qi(e){var t=e.next(0);if(t.done)return Ie.empty();var n=null,r=null;return Ie.create({next:function(a){if(t.done)return ie;n||(n=t.value.value);do{var o=n.next(a);if(o.done){if((t=e.next(0)).done)return o;n=t.value.value}}while(o.done||Ki(o.value,r));return r=o.value,o}})}function _i(e,t){var n=[];!function(){for(var e=t.next(0),r={};!e.done;)r.ob=e.value.value,(e={current:r.ob.next(0),next:function(e){return function(t){return e.ob.next(t)}}(r)}).current.done||n.push(e),e=t.next(0),r={ob:r.ob}}();var r=null,a=!1,o={};return Ie.create((o[Symbol.iterator]=function(){return this},o.next=function(){a||(a=!0,n.every((function(e){return se(e.current.value.type,53)}))&&n.sort((function(t,n){return qn(e,t.current.value,n.current.value)})));do{if(!n.length)return ie;var t=n.shift(),o=t.current;if(t.current=t.next(0),!se(o.value.type,53))return o;if(!t.current.done){for(var u=0,i=n.length-1,c=0;u<=i;){c=Math.floor((u+i)/2);var l=qn(e,t.current.value,n[c].current.value);if(0===l){u=c;break}0<l?u=c+1:i=c-1}n.splice(u,0,t)}}while(Ki(o.value,r));return r=o.value,o},o))}function Vi(e,t){var n=e.reduce((function(e,t){return 0<Fa(e,t.o)?e:t.o}),new Ca({}));ua.call(this,n,e,{C:e.every((function(e){return e.C}))},!1,t),this.l=e}function Wi(e){return e.every((function(e){return null===e||se(e.type,5)||se(e.type,4)}))||null!==e.map((function(e){return e?Wt(e.type):null})).reduce((function(e,t){return null===t||t===e?e:null}))?e:e.every((function(e){return null===e||se(e.type,1)||se(e.type,20)}))?e.map((function(e){return e?Hn(e,1):null})):e.every((function(e){return null===e||se(e.type,4)||se(e.type,6)}))?e.map((function(e){return e?Hn(e,6):e})):e.every((function(e){return null===e||se(e.type,4)||se(e.type,6)||se(e.type,3)}))?e.map((function(e){return e?Hn(e,3):e})):null}function Zi(e){return(e=e.find((function(e){return!!e})))?Wt(e.type):null}function $i(e,t){var n=new Ca({});oi.call(this,n,[t].concat(h(e.map((function(e){return e.ca})))),{C:!1,X:!1,R:"unsorted",subtree:!1},t),this.A=e}function zi(e){ua.call(this,e?e.o:new Ca({}),e?[e]:[],{R:"sorted",subtree:!1,X:!1,C:!1}),this.l=e}function ec(e){ua.call(this,new Ca({}),[],{R:"sorted"},!1,e)}function tc(e,t){var n=!1,r=!1;if(t.forEach((function(e){se(e.type,53)?n=!0:r=!0})),r&&n)throw Error("XPTY0018: The path operator should either return nodes or non-nodes. Mixed sequences are not allowed.");return n?_n(e,t):t}function nc(e,t){var n=e.every((function(e){return e.X})),r=e.every((function(e){return e.subtree}));ua.call(this,e.reduce((function(e,t){return e.add(t.o)}),new Ca({})),e,{C:!1,X:n,R:t?"sorted":"unsorted",subtree:r}),this.l=e,this.s=t}function rc(e,t){ua.call(this,e.o.add(t.o),[e,t],{C:e.C&&t.C,X:e.X,R:e.da,subtree:e.subtree}),this.s=e,this.l=t}function ac(e,t,n){if(n=[n],se(e.type,62))if("*"===t)n.push.apply(n,h(e.P.map((function(e){return e()}))));else{if(!se(t.type,5))throw wo("The key specifier is not an integer.");var r=t.value;if(e.P.length<r||0>=r)throw Error("FOAY0001: Array index out of bounds");n.push(e.P[r-1]())}else{if(!se(e.type,61))throw wo("The provided context item is not a map or an array.");"*"===t?n.push.apply(n,h(e.h.map((function(e){return e.value()})))):(e=e.h.find((function(e){return nt(e.key,t)})))&&n.push(e.value())}return Lt(n)}function oc(e,t,n,r,a){return"*"===t?ac(e,t,n):Lt([n,t=Ce(t=ia(t,r,a))().M((function(t){return t.reduce((function(t,n){return ac(e,n,t)}),new fe)}))])}function uc(e,t){ua.call(this,e.o,[e].concat("*"===t?[]:[t]),{C:e.C,R:e.da,subtree:e.subtree}),this.l=e,this.s=t}function ic(e,t){var n={};ua.call(this,new Ca((n.external=1,n)),"*"===e?[]:[e],{C:!1},!1,t),this.l=e}function cc(e,t,n,r){var a=t.map((function(e){return e.jb}));t=t.map((function(e){return e.name}));var o=a.reduce((function(e,t){return e.add(t.o)}),n.o);ua.call(this,o,a.concat(n),{C:!1},!1,r),this.s=e,this.A=t,this.K=a,this.S=n,this.l=null}function lc(e){ua.call(this,e,[],{C:!1})}function sc(e){var t={};lc.call(this,new Ca((t.nodeType=1,t))),this.s=e}function pc(e,t){t=void 0===t?{kind:null}:t;var n=e.prefix,r=e.namespaceURI,a={};"*"!==(e=e.localName)&&(a.nodeName=1),a.nodeType=1,lc.call(this,new Ca(a)),this.s=e,this.K=r,this.A=n,this.S=t.kind}function fc(e){var t={};lc.call(this,new Ca((t.nodeName=1,t))),this.s=e}function hc(e){lc.call(this,new Ca({})),this.s=e}function dc(e,t,n){ua.call(this,new Ca({}),[],{C:!1,R:"unsorted"}),this.A=n,this.s=t,this.K=e,this.l=null}function mc(e,t){var n=new Ca({});oi.call(this,n,[e,t],{C:!1,X:!1,R:"unsorted",subtree:!1},t),this.A=e}function yc(e){this.type=e}function gc(e){this.type="delete",this.target=e}function vc(e,t,n){this.type=n,this.target=e,this.content=t}function wc(e,t){vc.call(this,e,t,"insertAfter")}function Ac(e,t){this.type="insertAttributes",this.target=e,this.content=t}function xc(e,t){vc.call(this,e,t,"insertBefore")}function Bc(e,t){vc.call(this,e,t,"insertIntoAsFirst")}function bc(e,t){vc.call(this,e,t,"insertIntoAsLast")}function Ec(e,t){vc.call(this,e,t,"insertInto")}function Nc(e,t){this.type="rename",this.target=e,this.o=t.Ca?t:new Fe(t.prefix,t.namespaceURI,t.localName)}function Tc(e,t){this.type="replaceElementContent",this.target=e,this.text=t}function Ic(e,t){this.type="replaceNode",this.target=e,this.o=t}function Cc(e,t){this.type="replaceValue",this.target=e,this.o=t}function Fc(e,t){return new Ic(e,t)}function Oc(e){xa.call(this,new Ca({}),[e],{C:!1,R:"unsorted"}),this.l=e}function Sc(e,t,n,r,a,o){var u=t.h;return e.reduce((function e(t,n){return se(n.type,62)?(n.P.forEach((function(n){return n().O().forEach((function(n){return e(t,n)}))})),t):(t.push(n),t)}),[]).forEach((function(e,i,c){if(se(e.type,47)){if(a)throw o(e.value,u);n.push(e.value.node)}else if(se(e.type,46)||se(e.type,53)&&3===e.value.node.nodeType){var l=se(e.type,46)?Hn(_t(e,t).first(),1).value:Je(u,e.value);0!==i&&se(c[i-1].type,46)&&se(e.type,46)?(r.push({data:" "+l,Ta:!0,nodeType:3}),a=!0):l&&(r.push({data:""+l,Ta:!0,nodeType:3}),a=!0)}else if(se(e.type,55)){var s=[];Qe(u,e.value).forEach((function(e){return s.push(et(e))})),a=Sc(s,t,n,r,a,o)}else{if(!se(e.type,53)){if(se(e.type,60))throw Kt(e.type);throw Error("Atomizing "+e.type+" is not implemented.")}r.push(e.value.node),a=!0}})),a}function Gc(e,t,n){var r=[],a=[],o=!1;return e.forEach((function(e){o=Sc(e,t,r,a,o,n)})),{attributes:r,Xa:a}}function Dc(e,t,n,r,a){var o=[];switch(e){case 4:r.length&&o.push(new Ac(t,r)),a.length&&o.push(new Bc(t,a));break;case 5:r.length&&o.push(new Ac(t,r)),a.length&&o.push(new bc(t,a));break;case 3:r.length&&o.push(new Ac(t,r)),a.length&&o.push(new Ec(t,a));break;case 2:r.length&&o.push(new Ac(n,r)),a.length&&o.push(new xc(t,a));break;case 1:r.length&&o.push(new Ac(n,r)),a.length&&o.push(new wc(t,a))}return o}function Rc(e,t,n){xa.call(this,new Ca({}),[e,n],{C:!1,R:"unsorted"}),this.K=e,this.l=t,this.A=n}function kc(){return Jt("Casting not supported from given type to a single xs:string or xs:untypedAtomic or any of its derived types.")}A(Ri,ua),Ri.prototype.h=function(e,t){var n=this,r=ia(this.l,e,t),a=ia(this.A,e,t);return r.Z({empty:function(){return Ie.W()},default:function(){return a.Z({empty:function(){return Ie.W()},default:function(){var o=wi(r,t),u=wi(a,t);return Di(n.s,o,u,e)}})}})},A(Mi,ua),Mi.prototype.h=function(e,t){var n=this,r=ia(this.l,e,t),a=ia(this.A,e,t);return r.Z({empty:function(){return Ie.empty()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton")},m:function(){return a.Z({empty:function(){return Ie.empty()},multiple:function(){throw Error("XPTY0004: Sequences to compare are not singleton")},m:function(){var o=r.first(),u=a.first();return ki(n.s,t.h,o.type,u.type)(r,a,e)?Ie.ba():Ie.W()}})}})},A(Pi,ua),Pi.prototype.h=function(e,t){var n=this,r=Hi(this.l,t.h,ia(this.s,e,t),this.s.da);e=Hi(this.l,t.h,ia(this.A,e,t),this.A.da);var a=r.value,o=e.value,u=null,i=null,c=!1,l=!1;return Ie.create({next:function(){if(c)return ie;for(;!l;){if(!u){var e=a.next(0);if(e.done)return c=!0,ie;u=e.value}if(!i){if((e=o.next(0)).done){l=!0;break}i=e.value}if(Xn(u.value,i.value)){if(e=ce(u),i=u=null,"intersectOp"===n.l)return e}else if(0>qn(t.h,u,i)){if(e=ce(u),u=null,"exceptOp"===n.l)return e}else i=null}return"exceptOp"===n.l?null!==u?(e=ce(u),u=null,e):a.next(0):(c=!0,ie)}})},A(ji,Ea),ji.prototype.A=function(e,t,n){return n.length?Lt(n.map((function(t){return t(e)}))):Ie.empty()},A(Xi,ua),Xi.prototype.h=function(e,t){var n=this,r=kt(e,ia(this.l,e,t)),a=null,o=null,u=!1;return Ie.create({next:function(e){for(;!u;){if(!a&&(a=r.next(e)).done)return u=!0,ie;o||(o=ia(n.s,a.value,t));var i=o.value.next(e);if(!i.done)return i;a=o=null}}})},A(Li,ua),Li.prototype.h=function(e,t){var n=this,r=Vt(ia(this.A,e,t),t);return r.Z({empty:function(){return n.s?Ie.ba():Ie.W()},m:function(){return r.map((function(e){return Mn(e,n.l).u?re:ae}))},multiple:function(){return Ie.W()}})},A(Yi,ua),Yi.prototype.h=function(e,t){var n=this,r=Vt(ia(this.A,e,t),t);return r.Z({empty:function(){if(!n.s)throw Error("XPTY0004: Sequence to cast is empty while target type is singleton.");return Ie.empty()},m:function(){return r.map((function(e){return Hn(e,n.l)}))},multiple:function(){throw Error("XPTY0004: Sequence to cast is not singleton or empty.")}})},A(Ji,ua),Ji.prototype.h=function(e,t){var n=this,r=ia(this.A,e,t);return r.Z({empty:function(){return"?"===n.l||"*"===n.l?Ie.ba():Ie.W()},multiple:function(){return"+"===n.l||"*"===n.l?Qi(r,(function(r){var a=Ie.m(r);return r=Pt(e,0,r,a),ia(n.s,r,t)})):Ie.W()},m:function(){return Qi(r,(function(r){var a=Ie.m(r);return r=Pt(e,0,r,a),ia(n.s,r,t)}))}})},A(Vi,ua),Vi.prototype.h=function(e,t){var n=this;if(this.l.every((function(e){return"sorted"===e.da}))){var r=0;return _i(t.h,{next:function(){return r>=n.l.length?ie:ce(ia(n.l[r++],e,t))}}).map((function(e){if(!se(e.type,53))throw Error("XPTY0004: The sequences to union are not of type node()*");return e}))}return Lt(this.l.map((function(n){return ia(n,e,t)}))).M((function(e){if(e.some((function(e){return!se(e.type,53)})))throw Error("XPTY0004: The sequences to union are not of type node()*");return e=_n(t.h,e),Ie.create(e)}))},A($i,oi),$i.prototype.K=function(e,t,n,r){if(this.A[1])throw Error("More than one order spec is not supported for the order by clause.");var a,o,u=[],i=!1,c=null,l=this.A[0];return Ie.create({next:function(){if(!i){for(var s=t.next(0);!s.done;)u.push(s.value),s=t.next(0);if((s=u.map((function(e){return l.ca.h(e,n)})).map((function(e){return Vt(e,n)}))).find((function(e){return!e.G()&&!e.wa()})))throw wo("Order by only accepts empty or singleton sequences");if(Zi(a=(a=s.map((function(e){return e.first()}))).map((function(e){return null===e?e:se(19,e.type)?Hn(e,1):e})))&&!(a=Wi(a)))throw wo("Could not cast values");s=a.length,o=a.map((function(e,t){return t}));for(var f=0;f<s;f++)if(f+1!==s)for(var h=f;0<=h;h--){var d=h,m=h+1;if(m!==s){var y=a[o[d]],g=a[o[m]];if(null!==g||null!==y){if(l.lc){if(null===y)continue;if(null===g&&null!==y){y=p([o[m],o[d]]),o[d]=y.next().value,o[m]=y.next().value;continue}if(isNaN(g.value)&&null!==y&&!isNaN(y.value)){y=p([o[m],o[d]]),o[d]=y.next().value,o[m]=y.next().value;continue}}else{if(null===g)continue;if(null===y&&null!==g){y=p([o[m],o[d]]),o[d]=y.next().value,o[m]=y.next().value;continue}if(isNaN(y.value)&&null!==g&&!isNaN(g.value)){y=p([o[m],o[d]]),o[d]=y.next().value,o[m]=y.next().value;continue}}Fi("gtOp",y.type,g.type)(y,g,e)&&(y=p([o[m],o[d]]),o[d]=y.next().value,o[m]=y.next().value)}}}var v=l.Kb?0:a.length-1;c=r({next:function(){return l.Kb?v>=a.length?ie:ce(u[o[v++]]):0>v?ie:ce(u[o[v--]])}}).value,i=!0}return c.next(0)}})},A(zi,ua),zi.prototype.h=function(e,t){if(null===e.N)throw Qt("context is absent, it needs to be present to use paths.");for(var n=t.h,r=e.N.value;9!==r.node.nodeType;)if(null===(r=Ve(n,r)))throw Error("XPDY0050: the root node of the context node is not a document node.");return n=Ie.m(et(r)),this.l?ia(this.l,Pt(e,0,n.first(),n),t):n},A(ec,ua),ec.prototype.h=function(e){if(null===e.N)throw Qt('context is absent, it needs to be present to use the "." operator');return Ie.m(e.N)},A(nc,ua),nc.prototype.h=function(e,t){var n=this,r=!0;return this.l.reduce((function(a,o,u){var i=null===a?Pn(e):kt(e,a);if(a={next:function(e){if((e=i.next(e)).done)return ie;if(null!==e.value.N&&!se(e.value.N.type,53)&&0<u)throw Error("XPTY0019: The result of E1 in a path expression E1/E2 should not evaluate to a sequence of nodes.");return ce(ia(o,e.value,t))}},n.s)switch(o.da){case"reverse-sorted":var c=a;a={next:function(e){return(e=c.next(e)).done?e:ce(e.value.M((function(e){return Ie.create(e.reverse())})))}};case"sorted":if(o.subtree&&r){var l=qi(a);break}l=_i(t.h,a);break;case"unsorted":return qi(a).M((function(e){return Ie.create(tc(t.h,e))}))}else l=qi(a);return r=r&&o.X,l}),null)},nc.prototype.B=function(){return this.l[0].B()},A(rc,ua),rc.prototype.h=function(e,t){var n=this,r=ia(this.s,e,t);if(this.l.C){var a=ia(this.l,e,t);if(a.G())return a;var o=a.first();if(se(o.type,2)){var u=o.value;if(!Number.isInteger(u))return Ie.empty();var i=r.value,c=!1;return Ie.create({next:function(){if(!c){for(var e=i.next(0);!e.done;e=i.next(0))if(1==u--)return c=!0,e;c=!0}return ie}})}return a.ha()?r:Ie.empty()}var l=r.value,s=null,p=0,f=null;return Ie.create({next:function(a){for(var o=!1;!(s&&s.done||(s||(s=l.next(o?0:a),o=!0),s.done));){f||(f=ia(n.l,Pt(e,p,s.value,r),t));var u=f.first();u=null!==u&&(se(u.type,2)?u.value===p+1:f.ha()),f=null;var i=s.value;if(s=null,p++,u)return ce(i)}return s}})},rc.prototype.B=function(){return this.s.B()},A(uc,ua),uc.prototype.h=function(e,t){var n=this;return ia(this.l,e,t).M((function(r){return r.reduce((function(r,a){return oc(a,n.s,r,e,t)}),new fe)}))},uc.prototype.B=function(){return this.l.B()},A(ic,ua),ic.prototype.h=function(e,t){return oc(e.N,this.l,new fe,e,t)},A(cc,ua),cc.prototype.h=function(e,t){var n=this,r=e,a=this.l.map((function(a,o){var u=ia(n.K[o],r,t).O();return r=jt(e,((o={})[a]=function(){return Ie.create(u)},o)),u}));if(a.some((function(e){return 0===e.length})))return"every"===this.s?Ie.ba():Ie.W();var o=Array(a.length).fill(0);o[0]=-1;for(var u=!0;u;){u=!1;for(var i=0,c=o.length;i<c;++i){var l=a[i];if(!(++o[i]>l.length-1)){for(u=Object.create(null),i={},c=0;c<o.length;i={xb:i.xb},c++)i.xb=a[c][o[c]],u[this.l[c]]=function(e){return function(){return Ie.m(e.xb)}}(i);if(u=jt(e,u),(u=ia(this.S,u,t)).ha()&&"some"===this.s)return Ie.ba();if(!u.ha()&&"every"===this.s)return Ie.W();u=!0;break}o[i]=0}}return"every"===this.s?Ie.ba():Ie.W()},cc.prototype.v=function(e){this.l=[];for(var t=0,n=this.A.length;t<n;++t){this.K[t].v(e),Go(e);var r=this.A[t],a=r.prefix?e.aa(r.prefix):null;r=Uo(e,a,r.localName),this.l[t]=r}for(this.S.v(e),t=0,n=this.A.length;t<n;++t)Ho(e)},A(lc,ua),lc.prototype.h=function(e){return this.l(e.N)?Ie.ba():Ie.W()},A(sc,lc),sc.prototype.l=function(e){return!!se(e.type,53)&&(e=e.value.node.nodeType,3===this.s&&4===e||this.s===e)},sc.prototype.B=function(){return"type-"+this.s},A(pc,lc),pc.prototype.l=function(e){var t=se(e.type,54),n=se(e.type,47);return!(!t&&!n||(e=e.value,null!==this.S&&(1===this.S&&!t||2===this.S&&!n)||(null!==this.A||""===this.K||"*"!==this.s)&&("*"===this.A?"*"!==this.s&&this.s!==e.node.localName:"*"!==this.s&&this.s!==e.node.localName||(e.node.namespaceURI||null)!==((""===this.A?t?this.K:null:this.K)||null))))},pc.prototype.B=function(){return"*"===this.s?null===this.S?"type-1-or-type-2":"type-"+this.S:"name-"+this.s},pc.prototype.v=function(e){if(null===this.K&&"*"!==this.A&&(this.K=e.aa(this.A||"")||null,!this.K&&this.A))throw Error("XPST0081: The prefix "+this.A+" could not be resolved.")},A(fc,lc),fc.prototype.l=function(e){return se(e.type,57)&&e.value.node.target===this.s},fc.prototype.B=function(){return"type-7"},A(hc,lc),hc.prototype.l=function(e){return se(e.type,ve(this.s.prefix?this.s.prefix+":"+this.s.localName:this.s.localName))},A(dc,ua),dc.prototype.h=function(e,t){if(!e.Aa[this.l]){if(this.S)return this.S(e,t);throw Error("XQDY0054: The variable "+this.A+" is declared but not in scope.")}return e.Aa[this.l]()},dc.prototype.v=function(e){if(null===this.s&&this.K&&(this.s=e.aa(this.K)),this.l=e.ib(this.s||"",this.A),!this.l)throw Error("XPST0008, The variable "+this.A+" is not in scope.");(e=e.Ia[this.l])&&(this.S=e)},A(mc,oi),mc.prototype.K=function(e,t,n,r){var a=this,o=null,u=null;return r({next:function(){for(;;){if(!u){var e=t.next(0);if(e.done)return ie;o=e.value,u=ia(a.A,o,n)}e=u.ha();var r=o;if(u=o=null,e)return ce(r)}}})},A(gc,yc),gc.prototype.h=function(e){var t={};return t.type=this.type,t.target=no(this.target,e,!1),t},A(vc,yc),vc.prototype.h=function(e){var t={};return t.type=this.type,t.target=no(this.target,e,!1),t.content=this.content.map((function(t){return no(t,e,!0)})),t},A(wc,vc),A(Ac,yc),Ac.prototype.h=function(e){var t={};return t.type=this.type,t.target=no(this.target,e,!1),t.content=this.content.map((function(t){return no(t,e,!0)})),t},A(xc,vc),A(Bc,vc),A(bc,vc),A(Ec,vc),A(Nc,yc),Nc.prototype.h=function(e){var t={},n={};return n.type=this.type,n.target=no(this.target,e,!1),n.newName=(t.prefix=this.o.prefix,t.namespaceURI=this.o.namespaceURI,t.localName=this.o.localName,t),n},A(Tc,yc),Tc.prototype.h=function(e){var t={};return t.type=this.type,t.target=no(this.target,e,!1),t.text=this.text?no(this.text,e,!0):null,t},A(Ic,yc),Ic.prototype.h=function(e){var t={};return t.type=this.type,t.target=no(this.target,e,!1),t.replacement=this.o.map((function(t){return no(t,e,!0)})),t},A(Cc,yc),Cc.prototype.h=function(e){var t={};return t.type=this.type,t.target=no(this.target,e,!1),t["string-value"]=this.o,t},A(Oc,xa),Oc.prototype.s=function(e,t){var n,r,a=Ba(this.l)(e,t),o=t.h;return{next:function(){if(!n){var e=a.next(0);if(e.value.J.some((function(e){return!se(e.type,53)})))throw Error("XUTY0007: The target of a delete expression must be a sequence of zero or more nodes.");n=e.value.J,r=e.value.fa}return ce({fa:Aa((n=n.filter((function(e){return Ve(o,e.value)}))).map((function(e){return new gc(e.value)})),r),J:[]})}}},A(Rc,xa),Rc.prototype.s=function(e,t){var n,r,a,o,u,i,c=this,l=Ba(this.K)(e,t),s=Ba(this.A)(e,t),p=t.h;return{next:function(){if(!n){var e=l.next(0),f=Gc([e.value.J],t,Wr);n=f.attributes.map((function(e){return{node:e,F:null}})),r=f.Xa.map((function(e){return{node:e,F:null}})),a=e.value.fa}if(!o){if(0===(e=s.next(0)).value.J.length)throw oa();if(3<=c.l){if(1!==e.value.J.length)throw Zr();if(!se(e.value.J[0].type,54)&&!se(e.value.J[0].type,55))throw Zr()}else{if(1!==e.value.J.length)throw $r();if(!(se(e.value.J[0].type,54)||se(e.value.J[0].type,56)||se(e.value.J[0].type,58)||se(e.value.J[0].type,57)))throw $r();if(null===(i=Ve(p,e.value.J[0].value,null)))throw Error("XUDY0029: The target "+e.value.J[0].value.outerHTML+" for inserting a node before or after must have a parent.")}o=e.value.J[0],u=e.value.fa}if(n.length){if(3<=c.l){if(!se(o.type,54))throw Error("XUTY0022: An insert expression specifies the insertion of an attribute node into a document node.")}else if(1!==i.node.nodeType)throw Error("XUDY0030: An insert expression specifies the insertion of an attribute node before or after a child of a document node.");n.reduce((function(e,t){var n=t.node.prefix||"",r=t.node.prefix||"",a=t.node.namespaceURI,u=r?o.value.node.lookupNamespaceURI(r):null;if(u&&u!==a)throw ra(a);if((r=e[r])&&a!==r)throw aa(a);return e[n]=t.node.namespaceURI,e}),{})}return ce({J:[],fa:Aa(Dc(c.l,o.value,i||null,n,r),a,u)})}}};var Uc=/([A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])/,Mc=new RegExp(Uc.source+new RegExp("("+Uc.source+"|[-.0-9-])").source+"*","g");function Hc(e){return!!(e=e.match(Mc))&&1===e.length}function Pc(e,t){return Vt(t,e).Z({m:function(e){if(se((e=e.first()).type,1)||se(e.type,19)){if(!Hc(e.value))throw Error('XQDY0041: The value "'+e.value+'" of a name expressions cannot be converted to a NCName.');return Ie.m(e)}throw kc()},default:function(){throw kc()}}).value}function jc(e,t,n){return Vt(n,t).Z({m:function(t){if(se((t=t.first()).type,23))return Ie.m(t);if(se(t.type,1)||se(t.type,19)){if(1===(t=t.value.split(":")).length)t=t[0];else{var n=t[0],r=e.aa(n);t=t[1]}if(!Hc(t)||n&&!Hc(n))throw To(n?n+":"+t:t);if(n&&!r)throw To(n+":"+t);return Ie.m({type:23,value:new Fe(n,r,t)})}throw kc()},default:function(){throw kc()}}).value}function Xc(e,t){xa.call(this,new Ca({}),[e,t],{C:!1,R:"unsorted"}),this.A=e,this.K=t,this.l=void 0}function Lc(e,t,n){var r,a,o;return{next:function(){if(!r){var u=n.next(0),i=Gc([u.value.J],e,aa);r={attributes:i.attributes.map((function(e){return{node:e,F:null}})),Xa:i.Xa.map((function(e){return{node:e,F:null}}))},a=u.value.fa}if(0===(i=t.next(0)).value.J.length)throw oa();if(1!==i.value.J.length)throw zr();if(!(se(i.value.J[0].type,54)||se(i.value.J[0].type,47)||se(i.value.J[0].type,56)||se(i.value.J[0].type,58)||se(i.value.J[0].type,57)))throw zr();if(null===(o=Ve(e.h,i.value.J[0].value,null)))throw Error("XUDY0009: The target "+i.value.J[0].value.outerHTML+" for replacing a node must have a parent.");if(u=i.value.J[0],i=i.value.fa,se(u.type,47)){if(r.Xa.length)throw Error("XUTY0011: When replacing an attribute the new value must be zero or more attribute nodes.");r.attributes.reduce((function(e,t){var n=t.node.prefix||"";t=t.node.namespaceURI;var r=o.node.lookupNamespaceURI(n);if(r&&r!==t)throw ra(t);if((r=e[n])&&t!==r)throw aa(t);return e[n]=t,e}),{})}else if(r.attributes.length)throw Error("XUTY0010: When replacing an an element, text, comment, or processing instruction node the new value must be a single node.");return ce({J:[],fa:Aa([Fc(u.value,[].concat(r.attributes,r.Xa))],a,i)})}}}function Yc(e,t,n){var r,a,o,u,i=!1;return{next:function(){if(i)return ie;if(!o){var c=n.next(0),l=Vt(Ie.create(c.value.J),e).map((function(e){return Hn(e,1)})).O().map((function(e){return e.value})).join(" ");o=0===l.length?null:{node:e.o.createTextNode(l),F:null},u=c.value.fa}if(!r){if(0===(c=t.next(0)).value.J.length)throw oa();if(1!==c.value.J.length)throw zr();if(!(se(c.value.J[0].type,54)||se(c.value.J[0].type,47)||se(c.value.J[0].type,56)||se(c.value.J[0].type,58)||se(c.value.J[0].type,57)))throw zr();r=c.value.J[0],a=c.value.fa}if(se(r.type,54))return i=!0,ce({J:[],fa:Aa([new Tc(r.value,o)],u,a)});if(se(r.type,47)||se(r.type,56)||se(r.type,58)||se(r.type,57)){if(c=o?Je(e.h,o):"",se(r.type,58)&&(c.includes("--")||c.endsWith("-")))throw Error('XQDY0072: The content "'+c+'" for a comment node contains two adjacent hyphens or ends with a hyphen.');if(se(r.type,57)&&c.includes("?>"))throw Error('XQDY0026: The content "'+c+'" for a processing instruction node contains "?>".');return i=!0,ce({J:[],fa:Aa([new Cc(r.value,c)],u,a)})}}}}function Qc(e,t,n){xa.call(this,new Ca({}),[t,n],{C:!1,R:"unsorted"}),this.K=e,this.l=t,this.A=n}function Jc(e){switch(e.type){case"delete":return new gc({node:e.target,F:null});case"insertAfter":return new wc({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertBefore":return new xc({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertInto":return new Ec({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertIntoAsFirst":return new Bc({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertIntoAsLast":return new bc({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"insertAttributes":return new Ac({node:e.target,F:null},e.content.map((function(e){return{node:e,F:null}})));case"rename":return new Nc({node:e.target,F:null},e.newName);case"replaceNode":return new Ic({node:e.target,F:null},e.replacement.map((function(e){return{node:e,F:null}})));case"replaceValue":return new Cc({node:e.target,F:null},e["string-value"]);case"replaceElementContent":return new Tc({node:e.target,F:null},e.text?{node:e.text,F:null}:null);default:throw Error('Unexpected type "'+e.type+'" when parsing a transferable pending update.')}}function Kc(e,t,n){if(t.find((function(t){return Xn(t,e)})))return!0;var r=Ve(n,e);return!!r&&Kc(r,t,n)}function qc(e,t,n){xa.call(this,new Ca({}),e.reduce((function(e,t){return e.push(t.jb),e}),[t,n]),{C:!1,R:"unsorted"}),this.l=e,this.K=t,this.A=n,this.I=null}function _c(e,t){return{node:{nodeType:2,Ta:!0,nodeName:e.Ca(),namespaceURI:e.namespaceURI,prefix:e.prefix,localName:e.localName,name:e.Ca(),value:t},F:null}}function Vc(e,t){var n=t.wb||[];n=n.concat(e.Oa||[]),ua.call(this,new Ca({}),n,{C:!1,R:"unsorted"}),e.Oa?this.s=e.Oa:this.name=new Fe(e.prefix,e.namespaceURI,e.localName),this.l=t,this.A=void 0}function Wc(e){ua.call(this,e?e.o:new Ca({}),e?[e]:[],{C:!1,R:"unsorted"}),this.l=e}function Zc(e,t,n,r){ua.call(this,new Ca({}),r.concat(t).concat(e.Oa||[]),{C:!1,R:"unsorted"}),e.Oa?this.s=e.Oa:this.l=new Fe(e.prefix,e.namespaceURI,e.localName),this.S=n.reduce((function(e,t){if(t.prefix in e)throw Error("XQST0071: The namespace declaration with the prefix "+t.prefix+" has already been declared on the constructed element.");return e[t.prefix||""]=t.uri,e}),{}),this.K=t,this.la=r,this.A=void 0}function $c(e){if(/^xml$/i.test(e))throw Error('XQDY0064: The target of a created PI may not be "'+e+'"')}function zc(e,t){return{node:{data:t,Ta:!0,nodeName:e,nodeType:7,target:e},F:null}}function el(e,t){var n=e.Fb?[e.Fb].concat(t):[t];ua.call(this,n.reduce((function(e,t){return e.add(t.o)}),new Ca({})),n,{C:!1,R:"unsorted"}),this.l=e,this.s=t}function tl(e){ua.call(this,e?e.o:new Ca({}),e?[e]:[],{C:!1,R:"unsorted"}),this.l=e}function nl(e,t,n,r){var a,o=new Ca({});Ea.call(this,o,(a=[e].concat(h(t.map((function(e){return e.ic}))),[n])).concat.apply(a,h(t.map((function(e){return e.Pb.map((function(e){return e.Ob}))})))),{C:!1,X:!1,R:"unsorted",subtree:!1},r),this.K=e,this.l=t.length,this.S=t.map((function(e){return e.Pb}))}A(Xc,xa),Xc.prototype.s=function(e,t){var n=this,r=Ba(this.A)(e,t),a=Ba(this.K)(e,t);return{next:function(){var e=r.next(0),o=e.value.J;if(0===o.length)throw oa();if(1!==o.length)throw ea();if(!se(o[0].type,54)&&!se(o[0].type,47)&&!se(o[0].type,57))throw ea();o=o[0];var u=a.next(0);e:{var i=n.l,c=Ie.create(u.value.J);switch(o.type){case 54:if(i=jc(i,t,c).next(0).value.value,(c=o.value.node.lookupNamespaceURI(i.prefix))&&c!==i.namespaceURI)throw ra(i.namespaceURI);break e;case 47:if((i=jc(i,t,c).next(0).value.value).namespaceURI&&(c=o.value.node.lookupNamespaceURI(i.prefix))&&c!==i.namespaceURI)throw ra(i.namespaceURI);break e;case 57:i=new Fe("",null,i=Pc(t,c).next(0).value.value);break e}i=void 0}return ce({J:[],fa:Aa([new Nc(o.value,i)],e.value.fa,u.value.fa)})}}},Xc.prototype.v=function(e){this.l=So(e),xa.prototype.v.call(this,e)},A(Qc,xa),Qc.prototype.s=function(e,t){var n=Ba(this.l)(e,t);return e=Ba(this.A)(e,t),this.K?Yc(t,n,e):Lc(t,n,e)},A(qc,xa),qc.prototype.h=function(e,t){return ba(e=this.s(e,t),(function(){}))},qc.prototype.s=function(e,t){var n,r,a,o=this,u=t.h,i=t.o,c=t.B,l=[],s=[],p=[];return{next:function(){if(s.length!==o.l.length)for(var f={},d=s.length;d<o.l.length;f={lb:f.lb},d++){var m=o.l[d],y=l[d];if(y||(l[d]=y=Ba(m.jb)(e,t)),1!==(y=y.next(0)).value.J.length||!se(y.value.J[0].type,53))throw Error("XUTY0013: The source expression of a copy modify expression must return a single node.");f.lb=et($a(y.value.J[0].value,t)),s.push(f.lb.value),p.push(y.value.fa),e=jt(e,((y={})[m.qc]=function(e){return function(){return Ie.m(e.lb)}}(f),y))}return a||(n||(n=Ba(o.K)(e,t)),a=n.next(0).value.fa),a.forEach((function(e){if(e.target&&!Kc(e.target,s,u))throw Error("XUDY0014: The target "+e.target.node.outerHTML+" must be a node created by the copy clause.");if("put"===e.type)throw Error("XUDY0037: The modify expression of a copy modify expression can not contain a fn:put.")})),va(f=a.map((function(e){return Jc(e=e.h(t))})),u,i,c),r||(r=Ba(o.A)(e,t)),ce({J:(f=r.next(0)).value.J,fa:Aa.apply(null,[f.value.fa].concat(h(p)))})}}},qc.prototype.v=function(e){Go(e),this.l.forEach((function(t){return t.qc=Uo(e,t.Rb.namespaceURI,t.Rb.localName)})),xa.prototype.v.call(this,e),Ho(e),this.I=this.l.some((function(e){return e.jb.I}))||this.A.I},A(Vc,ua),Vc.prototype.h=function(e,t){var n,r,a,o=this,u=!1;return Ie.create({next:function(){if(u)return ie;if(!r){if(o.s){if(!n){var i=o.s.h(e,t);n=jc(o.A,t,i)}r=n.next(0).value.value}else r=o.name;if(r){if("xmlns"===r.prefix)throw xo(r);if(""===r.prefix&&"xmlns"===r.localName)throw xo(r);if("http://www.w3.org/2000/xmlns/"===r.namespaceURI)throw xo(r);if("xml"===r.prefix&&"http://www.w3.org/XML/1998/namespace"!==r.namespaceURI)throw xo(r);if(""!==r.prefix&&"xml"!==r.prefix&&"http://www.w3.org/XML/1998/namespace"===r.namespaceURI)throw xo(r)}}return o.l.wb?(i=o.l.wb,a||(a=Lt(i.map((function(n){return Vt(n.h(e,t),t).M((function(e){return Ie.m(ne(e.map((function(e){return e.value})).join(" "),1))}))}))).M((function(e){return Ie.m(et(_c(r,e.map((function(e){return e.value})).join(""))))})).value),a.next(0)):(u=!0,ce(et(_c(r,o.l.value))))}})},Vc.prototype.v=function(e){if(this.A=So(e),this.name&&this.name.prefix&&!this.name.namespaceURI){var t=e.aa(this.name.prefix);if(void 0===t&&this.name.prefix)throw qt(this.name.prefix);this.name.namespaceURI=t||null}ua.prototype.v.call(this,e)},A(Wc,ua),Wc.prototype.h=function(e,t){var n={data:"",Ta:!0,nodeType:8},r={node:n,F:null};return this.l?Vt(e=ia(this.l,e,t),t).M((function(e){if(-1!==(e=e.map((function(e){return Hn(e,1).value})).join(" ")).indexOf("--\x3e"))throw Error('XQDY0072: The contents of the data of a comment may not include "--\x3e"');return n.data=e,Ie.m(et(r))})):Ie.m(et(r))},A(Zc,ua),Zc.prototype.h=function(e,t){var n,r,a,o,u,i=this,c=!1,l=!1,s=!1;return Ie.create({next:function(){if(s)return ie;if(c||(n||(n=Lt(i.K.map((function(n){return ia(n,e,t)})))),r=n.O(),c=!0),!l){a||(a=i.la.map((function(n){return ia(n,e,t)})));for(var p=[],f=0;f<a.length;f++){var h=a[f].O();p.push(h)}o=p,l=!0}if(i.s&&(u||(p=i.s.h(e,t),u=jc(i.A,t,p)),p=u.next(0),i.l=p.value.value),"xmlns"===i.l.prefix||"http://www.w3.org/2000/xmlns/"===i.l.namespaceURI||"xml"===i.l.prefix&&"http://www.w3.org/XML/1998/namespace"!==i.l.namespaceURI||i.l.prefix&&"xml"!==i.l.prefix&&"http://www.w3.org/XML/1998/namespace"===i.l.namespaceURI)throw Error('XQDY0096: The node name "'+i.l.Ca()+'" is invalid for a computed element constructor.');var d={nodeType:1,Ta:!0,attributes:[],childNodes:[],nodeName:i.l.Ca(),namespaceURI:i.l.namespaceURI,prefix:i.l.prefix,localName:i.l.localName};for(p={node:d,F:null},r.forEach((function(e){d.attributes.push(e.value.node)})),(f=Gc(o,t,Ao)).attributes.forEach((function(e){if(d.attributes.find((function(t){return t.namespaceURI===e.namespaceURI&&t.localName===e.localName})))throw Error("XQDY0025: The attribute "+e.name+" does not have an unique name in the constructed element.");d.attributes.push(e)})),f.Xa.forEach((function(e){d.childNodes.push(e)})),f=0;f<d.childNodes.length;f++)if(Pe(h=d.childNodes[f])&&3===h.nodeType){var m=d.childNodes[f-1];m&&Pe(m)&&3===m.nodeType&&(m.data+=h.data,d.childNodes.splice(f,1),f--)}return s=!0,ce(et(p))}})},Zc.prototype.v=function(e){var t=this;if(Go(e),Object.keys(this.S).forEach((function(n){return ko(e,n,t.S[n])})),this.ta.forEach((function(t){return t.v(e)})),this.K.reduce((function(t,n){if(n.name){if(n="Q{"+(null===n.name.namespaceURI?e.aa(n.name.prefix):n.name.namespaceURI)+"}"+n.name.localName,t.includes(n))throw Error("XQST0040: The attribute "+n+" does not have an unique name in the constructed element.");t.push(n)}return t}),[]),this.l&&null===this.l.namespaceURI){var n=e.aa(this.l.prefix);if(void 0===n&&this.l.prefix)throw qt(this.l.prefix);this.l.namespaceURI=n}this.A=So(e),Ho(e)},A(el,ua),el.prototype.h=function(e,t){var n=this;return Vt(ia(this.s,e,t),t).M((function(r){var a=r.map((function(e){return Hn(e,1).value})).join(" ");if(-1!==a.indexOf("?>"))throw Error('XQDY0026: The contents of the data of a processing instruction may not include "?>"');if(null!==n.l.Nb)return $c(r=n.l.Nb),Ie.m(et(zc(r,a)));r=ia(n.l.Fb,e,t);var o=Pc(t,r);return Ie.create({next:function(){var e=o.next(0);return e.done?e:($c(e=e.value.value),ce(et(zc(e,a))))}})}))},A(tl,ua),tl.prototype.h=function(e,t){return this.l?Vt(e=ia(this.l,e,t),t).M((function(e){return 0===e.length?Ie.empty():(e={node:{data:e.map((function(e){return Hn(e,1).value})).join(" "),Ta:!0,nodeType:3},F:null},Ie.m(et(e)))})):Ie.empty()},A(nl,Ea),nl.prototype.A=function(e,t,n){var r=this;return n[0](e).M((function(a){for(var o=0;o<r.l;o++)if(r.S[o].some((function(n){switch(n.oc){case"?":if(1<a.length)return!1;break;case"*":break;case"+":if(1>a.length)return!1;break;default:if(1!==a.length)return!1}var r=Ie.create(a);return a.every((function(a,o){return a=Pt(e,o,a,r),ia(n.Ob,a,t).ha()}))})))return n[o+1](e);return n[r.l+1](e)}))},nl.prototype.v=function(e){if(Ea.prototype.v.call(this,e),this.K.I)throw Vr()};var rl={$:!1,ua:!1},al={$:!0,ua:!1},ol={$:!0,ua:!0};function ul(e){return e.$?e.ua?ol:al:rl}function il(e,t){switch(e[0]){case"andOp":var n=Xo(e,"type");return new gi(pl("andOp",e,ul(t)),n);case"orOp":return n=Xo(e,"type"),new vi(pl("orOp",e,ul(t)),n);case"unaryPlusOp":return n=Po(Po(e,"operand"),"*"),e=Xo(e,"type"),new yi("+",il(n,t),e);case"unaryMinusOp":return n=Po(Po(e,"operand"),"*"),e=Xo(e,"type"),new yi("-",il(n,t),e);case"addOp":case"subtractOp":case"multiplyOp":case"divOp":case"idivOp":case"modOp":var r=e[0],a=il(Lo(e,["firstOperand","*"]),ul(t));t=il(Lo(e,["secondOperand","*"]),ul(t));var o=Xo(e,"type"),u=Xo(Lo(e,["firstOperand","*"]),"type"),i=Xo(Lo(e,["secondOperand","*"]),"type");return u&&i&&Xo(e,"type")&&(n=nu(r,u.type,i.type)),new uu(r,a,t,o,n);case"sequenceExpr":return Bl(e,t);case"unionOp":return n=Xo(e,"type"),new Vi([il(Lo(e,["firstOperand","*"]),ul(t)),il(Lo(e,["secondOperand","*"]),ul(t))],n);case"exceptOp":case"intersectOp":return n=Xo(e,"type"),new Pi(e[0],il(Lo(e,["firstOperand","*"]),ul(t)),il(Lo(e,["secondOperand","*"]),ul(t)),n);case"stringConcatenateOp":return El(e,t);case"rangeSequenceExpr":return Nl(e,t);case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":return hl("generalCompare",e,t);case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":return hl("valueCompare",e,t);case"isOp":case"nodeBeforeOp":case"nodeAfterOp":return hl("nodeCompare",e,t);case"pathExpr":return Al(e,t);case"contextItemExpr":return new ec(Xo(e,"type"));case"functionCallExpr":return yl(e,t);case"inlineFunctionExpr":return wl(e,t);case"arrowExpr":return gl(e,t);case"dynamicFunctionInvocationExpr":return vl(e,t);case"namedFunctionRef":return t=Po(e,"functionName"),n=Xo(e,"type"),e=jo(Lo(e,["integerConstantExpr","value"])),new hi(Qo(t),parseInt(e,10),n);case"integerConstantExpr":return new pi(jo(Po(e,"value")),{type:5,g:3});case"stringConstantExpr":return new pi(jo(Po(e,"value")),{type:1,g:3});case"decimalConstantExpr":return new pi(jo(Po(e,"value")),{type:4,g:3});case"doubleConstantExpr":return new pi(jo(Po(e,"value")),{type:3,g:3});case"varRef":return new dc((e=Qo(Po(e,"name"))).prefix,e.namespaceURI,e.localName);case"flworExpr":return ml(e,t);case"quantifiedExpr":return xl(e,t);case"ifThenElseExpr":return n=Xo(e,"type"),new ei(il(Po(Po(e,"ifClause"),"*"),ul(t)),il(Po(Po(e,"thenClause"),"*"),t),il(Po(Po(e,"elseClause"),"*"),t),n);case"instanceOfExpr":return n=il(Lo(e,["argExpr","*"]),t),r=Lo(e,["sequenceType","*"]),a=Lo(e,["sequenceType","occurrenceIndicator"]),e=Xo(e,"type"),new Ji(n,il(r,ul(t)),a?jo(a):"",e);case"castExpr":return t=il(Po(Po(e,"argExpr"),"*"),ul(t)),n=Po(e,"singleType"),new Yi(t,e=Qo(Po(n,"atomicType")),n=null!==Po(n,"optional"));case"castableExpr":return t=il(Po(Po(e,"argExpr"),"*"),ul(t)),n=Po(e,"singleType"),new Li(t,e=Qo(Po(n,"atomicType")),n=null!==Po(n,"optional"));case"simpleMapExpr":return bl(e,t);case"mapConstructor":return sl(e,t);case"arrayConstructor":return ll(e,t);case"unaryLookup":return n=Xo(e,"type"),new ic(fl(e,t),n);case"typeswitchExpr":return Ol(e,t);case"elementConstructor":return Tl(e,t);case"attributeConstructor":return Il(e,t);case"computedAttributeConstructor":return(n=Po(e,"tagName"))?n=Qo(n):(n=Po(e,"tagNameExpr"),n={Oa:il(Po(n,"*"),ul(t))}),new Vc(n,{wb:[e=il(Po(Po(e,"valueExpr"),"*"),ul(t))]});case"computedCommentConstructor":if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return new Wc(e=(e=Po(e,"argExpr"))?il(Po(e,"*"),ul(t)):null);case"computedTextConstructor":if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return new tl(e=(e=Po(e,"argExpr"))?il(Po(e,"*"),ul(t)):null);case"computedElementConstructor":return Cl(e,t);case"computedPIConstructor":if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");return n=Po(e,"piTargetExpr"),r=Po(e,"piTarget"),a=Po(e,"piValueExpr"),e=Xo(e,"type"),new el({Fb:n?il(Po(n,"*"),ul(t)):null,Nb:r?jo(r):null},a?il(Po(a,"*"),ul(t)):new ji([],e));case"CDataSection":return new pi(jo(e),{type:1,g:3});case"deleteExpr":return new Oc(e=il(Lo(e,["targetExpr","*"]),t));case"insertExpr":switch(n=il(Lo(e,["sourceExpr","*"]),t),(a=Yo(e,"*")[1])[0]){case"insertAfter":r=1;break;case"insertBefore":r=2;break;case"insertInto":r=(r=Po(a,"*"))?"insertAsFirst"===r[0]?4:5:3}return new Rc(n,r,e=il(Lo(e,["targetExpr","*"]),t));case"renameExpr":return new Xc(n=il(Lo(e,["targetExpr","*"]),t),e=il(Lo(e,["newNameExpr","*"]),t));case"replaceExpr":return new Qc(n=!!Po(e,"replaceValue"),r=il(Lo(e,["targetExpr","*"]),t),e=il(Lo(e,["replacementExpr","*"]),t));case"transformExpr":return Fl(e,t);case"x:stackTrace":for(n=e[1],e=e[2];"x:stackTrace"===e[0];)e=e[2];return new ai(n,e[0],il(e,t));default:return cl(e)}}function cl(e){switch(e[0]){case"nameTest":return new pc(Qo(e));case"piTest":return(e=Po(e,"piTarget"))?new fc(jo(e)):new sc(7);case"commentTest":return new sc(8);case"textTest":return new sc(3);case"documentTest":return new sc(9);case"attributeTest":var t=(e=Po(e,"attributeName"))&&Po(e,"star");return!e||t?new sc(2):new pc(Qo(Po(e,"QName")),{kind:2});case"elementTest":return t=(e=Po(e,"elementName"))&&Po(e,"star"),!e||t?new sc(1):new pc(Qo(Po(e,"QName")),{kind:1});case"anyKindTest":return new hc({prefix:"",namespaceURI:null,localName:"node()"});case"anyMapTest":return new hc({prefix:"",namespaceURI:null,localName:"map(*)"});case"anyArrayTest":return new hc({prefix:"",namespaceURI:null,localName:"array(*)"});case"Wildcard":return Po(e,"star")?(t=Po(e,"uri"))?e=new pc({localName:"*",namespaceURI:jo(t),prefix:""}):(t=Po(e,"NCName"),e="star"===Po(e,"*")[0]?new pc({localName:jo(t),namespaceURI:null,prefix:"*"}):new pc({localName:"*",namespaceURI:null,prefix:jo(t)})):e=new pc({localName:"*",namespaceURI:null,prefix:"*"}),e;case"atomicType":return new hc(Qo(e));case"anyItemType":return new hc({prefix:"",namespaceURI:null,localName:"item()"});default:throw Error("No selector counterpart for: "+e[0]+".")}}function ll(e,t){var n=Xo(e,"type"),r=Yo(e=Po(e,"*"),"arrayElem").map((function(e){return il(Po(e,"*"),ul(t))}));switch(e[0]){case"curlyArray":return new Ou(r,n);case"squareArray":return new Su(r,n);default:throw Error("Unrecognized arrayType: "+e[0])}}function sl(e,t){var n=Xo(e,"type");return new fi(Yo(e,"mapConstructorEntry").map((function(e){return{key:il(Lo(e,["mapKeyExpr","*"]),ul(t)),value:il(Lo(e,["mapValueExpr","*"]),ul(t))}})),n)}function pl(e,t,n){function r(t){var o=Po(Po(t,"firstOperand"),"*");t=Po(Po(t,"secondOperand"),"*"),o[0]===e?r(o):a.push(il(o,n)),t[0]===e?r(t):a.push(il(t,n))}var a=[];return r(t),a}function fl(e,t){switch((e=Po(e,"*"))[0]){case"NCName":return new pi(jo(e),{type:1,g:3});case"star":return"*";default:return il(e,ul(t))}}function hl(e,t,n){var r=Lo(t,["firstOperand","*"]),a=Lo(t,["secondOperand","*"]);switch(r=il(r,ul(n)),n=il(a,ul(n)),e){case"valueCompare":return new Oi(t[0],r,n);case"nodeCompare":return new Mi(t[0],r,n);case"generalCompare":return new Ri(t[0],r,n)}}function dl(e,t,n){return new $i((e=Yo(e,"*")).filter((function(e){return"stable"!==e[0]})).map((function(e){var n=Po(e,"orderModifier"),r=n?Po(n,"orderingKind"):null;return n=n?Po(n,"emptyOrderingMode"):null,r=!r||"ascending"===jo(r),n=!n||"empty least"===jo(n),{ca:il(Lo(e,["orderByExpr","*"]),t),Kb:r,lc:n}})),n)}function ml(e,t){var n=Yo(e,"*");if(e=Po(n[n.length-1],"*"),1<(n=n.slice(0,-1)).length&&!t.$)throw Error("XPST0003: Use of XQuery FLWOR expressions in XPath is no allowed");return n.reduceRight((function(e,n){switch(n[0]){case"forClause":for(var r=(n=Yo(n,"*")).length-1;0<=r;--r){var a=n[r],o=Lo(a,["forExpr","*"]),u=Po(a,"positionalVariableBinding");e=new ci(Qo(Lo(a,["typedVariableBinding","varName"])),il(o,ul(t)),u?Qo(u):null,e)}return e;case"letClause":for(r=(n=Yo(n,"*")).length-1;0<=r;--r)o=Lo(a=n[r],["letExpr","*"]),e=new si(Qo(Lo(a,["typedVariableBinding","varName"])),il(o,ul(t)),e);return e;case"whereClause":for(r=(n=Yo(n,"*")).length-1;0<=r;--r)e=new mc(il(n[r],t),e);return e;case"windowClause":case"groupByClause":case"countClause":throw Error("Not implemented: "+n[0]+" is not implemented yet.");case"orderByClause":return dl(n,t,e);default:throw Error("Not implemented: "+n[0]+" is not supported in a flwor expression")}}),il(e,t))}function yl(e,t){var n=Po(e,"functionName"),r=Yo(Po(e,"arguments"),"*");return e=Xo(e,"type"),new Ra(new hi(Qo(n),r.length,e),r.map((function(e){return"argumentPlaceholder"===e[0]?null:il(e,t)})),e)}function gl(e,t){var n=Xo(e,"type"),r=Lo(e,["argExpr","*"]);e=Yo(e,"*").slice(1),r=[il(r,t)];for(var a=0;a<e.length;a++)if("arguments"!==e[a][0]){if("arguments"===e[a+1][0]){var o=Yo(e[a+1],"*");r=r.concat(o.map((function(e){return"argumentPlaceholder"===e[0]?null:il(e,t)})))}r=[new Ra(o="EQName"===e[a][0]?new hi(Qo(e[a]),r.length,n):il(e[a],ul(t)),r,n)]}return r[0]}function vl(e,t){var n=Lo(e,["functionItem","*"]),r=Xo(e,"type"),a=[];return(e=Po(e,"arguments"))&&(a=Yo(e,"*").map((function(e){return"argumentPlaceholder"===e[0]?null:il(e,t)}))),new Ra(il(n,t),a,r)}function wl(e,t){var n=Yo(Po(e,"paramList"),"*"),r=Lo(e,["functionBody","*"]),a=Xo(e,"type");return new li(n.map((function(e){return{name:Qo(Po(e,"varName")),type:Jo(e)}})),Jo(e),r?il(r,t):new ji([],a))}function Al(e,t){var n=Xo(e,"type"),r=Yo(e,"stepExpr"),a=!1,o=r.map((function(e){for(var r=Po(e,"xpathAxis"),o=Yo(e,"*"),u=[],i=null,c=(o=p(o)).next();!c.done;c=o.next())switch(c=c.value,c[0]){case"lookup":u.push(["lookup",fl(c,t)]);break;case"predicate":case"predicates":for(var l=(c=p(Yo(c,"*"))).next();!l.done;l=c.next())i=Uu(i,(l=il(l.value,ul(t))).B()),u.push(["predicate",l])}if(r)switch(a=!0,e=Po(e,"attributeTest anyElementTest piTest documentTest elementTest commentTest namespaceTest anyKindTest textTest anyFunctionTest typedFunctionTest schemaAttributeTest atomicType anyItemType parenthesizedItemType typedMapTest typedArrayTest nameTest Wildcard".split(" ")),e=cl(e),jo(r)){case"ancestor":var s=new Ru(e,{Ra:!1});break;case"ancestor-or-self":s=new Ru(e,{Ra:!0});break;case"attribute":s=new Mu(e,i);break;case"child":s=new Hu(e,i);break;case"descendant":s=new Xu(e,{Ra:!1});break;case"descendant-or-self":s=new Xu(e,{Ra:!0});break;case"parent":s=new _u(e,i);break;case"following-sibling":s=new qu(e,i);break;case"preceding-sibling":s=new $u(e,i);break;case"following":s=new Ju(e);break;case"preceding":s=new Wu(e);break;case"self":s=new zu(e,i)}else s=il(s=Lo(e,["filterExpr","*"]),ul(t));for(r=(u=p(u)).next();!r.done;r=u.next())switch(r=r.value,r[0]){case"lookup":s=new uc(s,r[1]);break;case"predicate":s=new rc(s,r[1])}return s.type=n,s}));return e=Po(e,"rootExpr"),!(r=a||null!==e||1<r.length)&&1===o.length||!e&&1===o.length&&"sorted"===o[0].da?o[0]:e&&0===o.length?new zi(null):(o=new nc(o,r),e?new zi(o):o)}function xl(e,t){var n=Xo(e,"type"),r=jo(Po(e,"quantifier")),a=Lo(e,["predicateExpr","*"]);return new cc(r,e=Yo(e,"quantifiedExprInClause").map((function(e){return{name:Qo(Lo(e,["typedVariableBinding","varName"])),jb:il(e=Lo(e,["sourceExpr","*"]),ul(t))}})),il(a,ul(t)),n)}function Bl(e,t){var n=Yo(e,"*").map((function(e){return il(e,t)}));return 1===n.length?n[0]:(n=Xo(e,"type"),new ji(Yo(e,"*").map((function(e){return il(e,t)})),n))}function bl(e,t){var n=Xo(e,"type");return Yo(e,"*").reduce((function(e,r){return null===e?il(r,ul(t)):new Xi(e,il(r,ul(t)),n)}),null)}function El(e,t){var n=Xo(e,"type");return new Ra(new hi({localName:"concat",namespaceURI:"http://www.w3.org/2005/xpath-functions",prefix:""},(e=[Lo(e,["firstOperand","*"]),Lo(e,["secondOperand","*"])]).length,n),e.map((function(e){return il(e,ul(t))})),n)}function Nl(e,t){var n=Xo(e,"type");return new Ra(new hi({localName:"to",namespaceURI:"http://fontoxpath/operators",prefix:""},(e=[Po(Po(e,"startExpr"),"*"),Po(Po(e,"endExpr"),"*")]).length,n),e.map((function(e){return il(e,ul(t))})),n)}function Tl(e,t){if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var n=Qo(Po(e,"tagName")),r=Po(e,"attributeList");return new Zc(n,r?Yo(r,"attributeConstructor").map((function(e){return il(e,ul(t))})):[],r=r?Yo(r,"namespaceDeclaration").map((function(e){var t=Po(e,"prefix");return{prefix:t?jo(t):"",uri:jo(Po(e,"uri"))}})):[],e=(e=Po(e,"elementContent"))?Yo(e,"*").map((function(e){return il(e,ul(t))})):[])}function Il(e,t){if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var n=Qo(Po(e,"attributeName")),r=Po(e,"attributeValue");return new Vc(n,{value:r=r?jo(r):null,wb:e=(e=Po(e,"attributeValueExpr"))?Yo(e,"*").map((function(e){return il(e,ul(t))})):null})}function Cl(e,t){var n=Po(e,"tagName");return n?n=Qo(n):(n=Po(e,"tagNameExpr"),n={Oa:il(Po(n,"*"),ul(t))}),new Zc(n,[],[],e=(e=Po(e,"contentExpr"))?Yo(e,"*").map((function(e){return il(e,ul(t))})):[])}function Fl(e,t){return new qc(Yo(Po(e,"transformCopies"),"transformCopy").map((function(e){var n=Qo(Po(Po(e,"varRef"),"name"));return{jb:il(Po(Po(e,"copySource"),"*"),t),Rb:new Fe(n.prefix,n.namespaceURI,n.localName)}})),il(Po(Po(e,"modifyExpr"),"*"),t),e=il(Po(Po(e,"returnExpr"),"*"),t))}function Ol(e,t){if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");var n=Xo(e,"type");return new nl(il(Po(Po(e,"argExpr"),"*"),t),Yo(e,"typeswitchExprCaseClause").map((function(e){var n=0===Yo(e,"sequenceTypeUnion").length?[Po(e,"sequenceType")]:Yo(Po(e,"sequenceTypeUnion"),"sequenceType");return{ic:il(Lo(e,["resultExpr","*"]),t),Pb:n.map((function(e){var n=Po(e,"occurrenceIndicator");return{oc:n?jo(n):"",Ob:il(Po(e,"*"),t)}}))}})),e=il(Lo(e,["typeswitchExprDefaultClause","resultExpr","*"]),t),n)}function Sl(e,t){return il(e,t)}var Gl=new Map;function Dl(e,t,n,r,a,o){this.B=e,this.l=t,this.h=n,this.v=r,this.o=a,this.s=o}function Rl(e,t,n,r,a,o,u,i){return(e=Gl.get(e))&&(t=e[t+(o?"_DEBUG":"")])&&(t=t.find((function(e){return e.o===u&&e.B.every((function(e){return n(e.prefix)===e.namespaceURI}))&&e.l.every((function(e){return void 0!==r[e.name]}))&&e.v.every((function(e){return a[e.prefix]===e.namespaceURI}))&&e.s.every((function(e){var t=i(e.nc,e.arity);return t&&t.namespaceURI===e.Lb.namespaceURI&&t.localName===e.Lb.localName}))})))?{ca:t.h,rc:!1}:null}function kl(e,t,n,r,a,o,u){var i=Gl.get(e);i||(i=Object.create(null),Gl.set(e,i)),(t=i[e=t+(o?"_DEBUG":"")])||(t=i[e]=[]),t.push(new Dl(Object.values(n.h),Object.values(n.o),a,Object.keys(r).map((function(e){return{namespaceURI:r[e],prefix:e}})),u,n.B))}function Ul(e){var t=new ke;if("http://www.w3.org/2005/XQueryX"!==e.namespaceURI&&"http://www.w3.org/2005/XQueryX"!==e.namespaceURI&&"http://fontoxml.com/fontoxpath"!==e.namespaceURI&&"http://www.w3.org/2007/xquery-update-10"!==e.namespaceURI)throw Jt("The XML structure passed as an XQueryX program was not valid XQueryX");var n=["stackTrace"===e.localName?"x:stackTrace":e.localName],r=t.getAllAttributes(e);for(r&&0<r.length&&n.push(Array.from(r).reduce((function(t,n){return"start"===n.localName||"end"===n.localName&&"stackTrace"===e.localName?t[n.localName]=JSON.parse(n.value):"type"===n.localName?t[n.localName]=we(n.value):t[n.localName]=n.value,t}),{})),r=(t=p(t=t.getChildNodes(e))).next();!r.done;r=t.next())switch(r=r.value,r.nodeType){case 1:n.push(Ul(r));break;case 3:n.push(r.data)}return n}var Ml=Object.create(null);function Hl(e,t){var n=Ml[e];n||(n=Ml[e]={Ma:[],Va:[],ra:null,source:t.source});var r=n.ra||function(){};n.Ma=n.Ma.concat(t.Ma),n.Va=n.Va.concat(t.Va),n.ra=function(e){r(e),t.ra&&t.ra(e)}}function Pl(e,t){var n=Ml[t];if(!n)throw Error("XQST0051: No modules found with the namespace uri "+t);n.Ma.forEach((function(n){n.hb&&Ro(e,t,n.localName,n.arity,n)})),n.Va.forEach((function(n){Uo(e,t,n.localName),Mo(e,t,n.localName,(function(e,t){return ia(n.ca,e,t)}))}))}function jl(){Object.keys(Ml).forEach((function(e){if((e=Ml[e]).ra)try{e.ra(e)}catch(t){e.ra=null,lo(e.source,t)}e.ra=null}))}function Xl(e){return e.replace(/(\x0D\x0A)|(\x0D(?!\x0A))/g,String.fromCharCode(10))}var Ll=t;function Yl(e,t){return function(n,r){return t.has(r)?t.get(r):(n=e(n,r),t.set(r,n),n)}}function Ql(e,t){return Ll.delimited(t,e,t)}function Jl(e,t){return e.reverse().reduce((function(e,t){return Ll.preceded(t,e)}),t)}function Kl(e,t,n,r){return Ll.then(Ll.then(e,t,(function(e,t){return[e,t]})),n,(function(e,t){var n=p(e);return e=n.next().value,n=n.next().value,r(e,n,t)}))}function ql(e,t,n,r,a){return Ll.then(Ll.then(Ll.then(e,t,(function(e,t){return[e,t]})),n,(function(e,t){var n=p(e);return[e=n.next().value,n=n.next().value,t]})),r,(function(e,t){var n=p(e);e=n.next().value;var r=n.next().value;return n=n.next().value,a(e,r,n,t)}))}function _l(e,t,n,r,a,o){return Ll.then(Ll.then(Ll.then(Ll.then(e,t,(function(e,t){return[e,t]})),n,(function(e,t){var n=p(e);return[e=n.next().value,n=n.next().value,t]})),r,(function(e,t){var n=p(e);return[e=n.next().value,n.next().value,n=n.next().value,t]})),a,(function(e,t){var n=p(e);e=n.next().value;var r=n.next().value,a=n.next().value;return n=n.next().value,o(e,r,a,n,t)}))}function Vl(e){return Ll.map(e,(function(e){return[e]}))}function Wl(e,t){return Ll.map(Ll.or(e),(function(){return t}))}function Zl(e){return function(t,n){return(t=e.exec(t.substring(n)))&&0===t.index?Ll.okWithValue(n+t[0].length,t[0]):Ll.error(n,[e.source],!1)}}var $l=Ll.or([Ll.token(" "),Ll.token("\t"),Ll.token("\r"),Ll.token("\n")]),zl=Ll.token("(:"),es=Ll.token(":)"),ts=Ll.token("(#"),ns=Ll.token("#)"),rs=Ll.token("("),as=Ll.token(")"),os=Ll.token("["),us=Ll.token("]"),is=Ll.token("{"),cs=Ll.token("}"),ls=Ll.token("{{"),ss=Ll.token("}}"),ps=Ll.token("'"),fs=Ll.token("''"),hs=Ll.token('"'),ds=Ll.token('""'),ms=Ll.token("<![CDATA["),ys=Ll.token("]]>"),gs=Ll.token("/>"),vs=Ll.token("</"),ws=Ll.token("\x3c!--"),As=Ll.token("--\x3e"),xs=Ll.token("<?"),Bs=Ll.token("?>"),bs=Ll.token("&#x"),Es=Ll.token("&#"),Ns=Ll.token(":*"),Ts=Ll.token("*:"),Is=Ll.token(":="),Cs=Ll.token("&"),Fs=Ll.token(":"),Os=Ll.token(";"),Ss=Ll.token("*"),Gs=Ll.token("@"),Ds=Ll.token("$"),Rs=Ll.token("#"),ks=Ll.token("%"),Us=Ll.token("?"),Ms=Ll.token("="),Hs=Ll.followed(Ll.token("!"),Ll.not(Ll.peek(Ms),[])),Ps=Ll.followed(Ll.token("|"),Ll.not(Ll.peek(Ll.token("|")),[])),js=Ll.token("||"),Xs=Ll.token("!="),Ls=Ll.token("<"),Ys=Ll.token("<<"),Qs=Ll.token("<="),Js=Ll.token(">"),Ks=Ll.token(">>"),qs=Ll.token(">="),_s=Ll.token(","),Vs=Ll.token("."),Ws=Ll.token(".."),Zs=Ll.token("+"),$s=Ll.token("-"),zs=Ll.token("/"),ep=Ll.token("//"),tp=Ll.token("=>"),np=Ll.token("e"),rp=Ll.token("E");Ll.token("l"),Ll.token("L"),Ll.token("m"),Ll.token("M");var ap=Ll.token("Q");Ll.token("x"),Ll.token("X");var op=Ll.token("as"),up=Ll.token("cast"),ip=Ll.token("castable"),cp=Ll.token("treat"),lp=Ll.token("instance"),sp=Ll.token("of"),pp=Ll.token("node"),fp=Ll.token("nodes"),hp=Ll.token("delete"),dp=Ll.token("value"),mp=Ll.token("function"),yp=Ll.token("map"),gp=Ll.token("element"),vp=Ll.token("attribute"),wp=Ll.token("schema-element"),Ap=Ll.token("intersect"),xp=Ll.token("except"),Bp=Ll.token("union"),bp=Ll.token("to"),Ep=Ll.token("is"),Np=Ll.token("or"),Tp=Ll.token("and"),Ip=Ll.token("div"),Cp=Ll.token("idiv"),Fp=Ll.token("mod"),Op=Ll.token("eq"),Sp=Ll.token("ne"),Gp=Ll.token("lt"),Dp=Ll.token("le"),Rp=Ll.token("gt"),kp=Ll.token("ge"),Up=Ll.token("amp"),Mp=Ll.token("quot"),Hp=Ll.token("apos"),Pp=Ll.token("if"),jp=Ll.token("then"),Xp=Ll.token("else"),Lp=Ll.token("allowing"),Yp=Ll.token("empty"),Qp=Ll.token("at"),Jp=Ll.token("in"),Kp=Ll.token("for"),qp=Ll.token("let"),_p=Ll.token("where"),Vp=Ll.token("collation"),Wp=Ll.token("group"),Zp=Ll.token("by"),$p=Ll.token("order"),zp=Ll.token("stable"),ef=Ll.token("return"),tf=Ll.token("array"),nf=Ll.token("document"),rf=Ll.token("namespace"),af=Ll.token("text"),of=Ll.token("comment"),uf=Ll.token("processing-instruction"),cf=Ll.token("lax"),lf=Ll.token("strict"),sf=Ll.token("validate"),pf=Ll.token("type"),ff=Ll.token("declare"),hf=Ll.token("default"),df=Ll.token("boundary-space"),mf=Ll.token("strip"),yf=Ll.token("preserve"),gf=Ll.token("no-preserve"),vf=Ll.token("inherit"),wf=Ll.token("no-inherit"),Af=Ll.token("greatest"),xf=Ll.token("least"),Bf=Ll.token("copy-namespaces"),bf=Ll.token("decimal-format"),Ef=Ll.token("case"),Nf=Ll.token("typeswitch"),Tf=Ll.token("some"),If=Ll.token("every"),Cf=Ll.token("satisfies"),Ff=Ll.token("replace"),Of=Ll.token("with"),Sf=Ll.token("copy"),Gf=Ll.token("modify"),Df=Ll.token("first"),Rf=Ll.token("last"),kf=Ll.token("before"),Uf=Ll.token("after"),Mf=Ll.token("into"),Hf=Ll.token("insert"),Pf=Ll.token("rename"),jf=Ll.token("switch"),Xf=Ll.token("variable"),Lf=Ll.token("external"),Yf=Ll.token("updating"),Qf=Ll.token("import"),Jf=Ll.token("schema"),Kf=Ll.token("module"),qf=Ll.token("base-uri"),_f=Ll.token("construction"),Vf=Ll.token("ordering"),Wf=Ll.token("ordered"),Zf=Ll.token("unordered"),$f=Ll.token("option"),zf=Ll.token("context"),eh=Ll.token("item"),th=Ll.token("xquery"),nh=Ll.token("version"),rh=Ll.token("encoding"),ah=Ll.token("document-node"),oh=Ll.token("namespace-node"),uh=Ll.token("schema-attribute"),ih=Ll.token("ascending"),ch=Ll.token("descending"),lh=Ll.token("empty-sequence"),sh=Ll.token("child::"),ph=Ll.token("descendant::"),fh=Ll.token("attribute::"),hh=Ll.token("self::"),dh=Ll.token("descendant-or-self::"),mh=Ll.token("following-sibling::"),yh=Ll.token("following::"),gh=Ll.token("parent::"),vh=Ll.token("ancestor::"),wh=Ll.token("preceding-sibling::"),Ah=Ll.token("preceding::"),xh=Ll.token("ancestor-or-self::"),Bh=Ll.token("decimal-separator"),bh=Ll.token("grouping-separator"),Eh=Ll.token("infinity"),Nh=Ll.token("minus-sign"),Th=Ll.token("NaN"),Ih=Ll.token("per-mille"),Ch=Ll.token("zero-digit"),Fh=Ll.token("digit"),Oh=Ll.token("pattern-separator"),Sh=Ll.token("exponent-separator"),Gh=Ll.token("schema-attribute("),Dh=Ll.token("document-node("),Rh=Ll.token("processing-instruction("),kh=Ll.token("processing-instruction()"),Uh=Ll.token("comment()"),Mh=Ll.token("text()"),Hh=Ll.token("namespace-node()"),Ph=Ll.token("node()"),jh=Ll.token("item()"),Xh=Ll.token("empty-sequence()"),Lh=new Map,Yh=new Map,Qh=Ll.or([Zl(/[\t\n\r -\uD7FF\uE000\uFFFD]/),Zl(/[\uD800-\uDBFF][\uDC00-\uDFFF]/)]),Jh=Ll.preceded(Ll.peek(Ll.not(Ll.or([zl,es]),['comment contents cannot contain "(:" or ":)"'])),Qh),Kh=Ll.map(Ll.delimited(zl,Ll.star(Ll.or([Jh,function(e,t){return Kh(e,t)}])),es,!0),(function(e){return e.join("")})),qh=Ll.or([$l,Kh]),_h=Ll.map(Ll.plus($l),(function(e){return e.join("")})),Vh=Yl(Ll.map(Ll.star(qh),(function(e){return e.join("")})),Lh),Wh=Yl(Ll.map(Ll.plus(qh),(function(e){return e.join("")})),Yh),Zh=Ll.or([Zl(/[A-Z_a-z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/),Ll.then(Zl(/[\uD800-\uDB7F]/),Zl(/[\uDC00-\uDFFF]/),(function(e,t){return e+t}))]),$h=Ll.or([Zh,Zl(/[\-\.0-9\xB7\u0300-\u036F\u203F\u2040]/)]),zh=Ll.then(Zh,Ll.star($h),(function(e,t){return e+t.join("")})),ed=Ll.map(zh,(function(e){return["prefix",e]})),td=Ll.or([Zh,Fs]),nd=Ll.or([$h,Fs]);Ll.then(td,Ll.star(nd),(function(e,t){return e+t.join("")}));var rd=Ll.map(zh,(function(e){var t={};return[(t.prefix="",t.URI=null,t),e]})),ad=Ll.then(zh,Ll.preceded(Fs,zh),(function(e,t){var n={};return[(n.prefix=e,n.URI=null,n),t]})),od=Ll.or([ad,rd]),ud=Ll.followed(Jl([ap,Vh,is],Ll.map(Ll.star(Zl(/[^{}]/)),(function(e){return e.join("").replace(/\s+/g," ").trim()}))),cs),id=Ll.then(ud,zh,(function(e,t){return[e,t]})),cd=Ll.or([Ll.map(id,(function(e){var t={};return[(t.prefix=null,t.URI=e[0],t),e[1]]})),od]),ld=Ll.or([Ll.map(cd,(function(e){return["QName"].concat(h(e))})),Ll.map(Ss,(function(){return["star"]}))]),sd=Ll.map(Ll.preceded(Ds,cd),(function(e){return["varRef",["name"].concat(h(e))]})),pd=Ll.peek(Ll.or([rs,hs,ps,qh])),fd=Ll.map(Ll.or([sh,ph,fh,hh,dh,mh,yh]),(function(e){return e.substring(0,e.length-2)})),hd=Ll.map(Ll.or([gh,vh,wh,Ah,xh]),(function(e){return e.substring(0,e.length-2)})),dd=Kl(Cs,Ll.or([Gp,Rp,Up,Mp,Hp]),Os,(function(e,t,n){return e+t+n})),md=Ll.or([Kl(bs,Zl(/[0-9a-fA-F]+/),Os,(function(e,t,n){return e+t+n})),Kl(Es,Zl(/[0-9]+/),Os,(function(e,t,n){return e+t+n}))]),yd=Wl([ds],'"'),gd=Wl([fs],"'"),vd=Vl(Wl([Uh],"commentTest")),wd=Vl(Wl([Mh],"textTest")),Ad=Vl(Wl([Hh],"namespaceTest")),xd=Vl(Wl([Ph],"anyKindTest")),Bd=Zl(/[0-9]+/),bd=Ll.then(Ll.or([Ll.then(Vs,Bd,(function(e,t){return e+t})),Ll.then(Bd,Ll.optional(Ll.preceded(Vs,Zl(/[0-9]*/))),(function(e,t){return e+(null!==t?"."+t:"")}))]),Kl(Ll.or([np,rp]),Ll.optional(Ll.or([Zs,$s])),Bd,(function(e,t,n){return e+(t||"")+n})),(function(e,t){return["doubleConstantExpr",["value",e+t]]})),Ed=Ll.or([Ll.map(Ll.preceded(Vs,Bd),(function(e){return["decimalConstantExpr",["value","."+e]]})),Ll.then(Ll.followed(Bd,Vs),Ll.optional(Bd),(function(e,t){return["decimalConstantExpr",["value",e+"."+(null!==t?t:"")]]}))]),Nd=Ll.map(Bd,(function(e){return["integerConstantExpr",["value",e]]})),Td=Ll.followed(Ll.or([bd,Ed,Nd]),Ll.peek(Ll.not(Zl(/[a-zA-Z]/),["no alphabetical characters after numeric literal"]))),Id=Ll.map(Ll.followed(Vs,Ll.peek(Ll.not(Vs,["context item should not be followed by another ."]))),(function(){return["contextItemExpr"]})),Cd=Ll.or([tf,vp,of,ah,gp,lh,mp,Pp,eh,yp,oh,pp,uf,uh,wp,jf,af,Nf]),Fd=Vl(Wl([Us],"argumentPlaceholder")),Od=Ll.or([Us,Ss,Zs]),Sd=Ll.preceded(Ll.peek(Ll.not(Zl(/[{}<&]/),["elementContentChar cannot be {, }, <, or &"])),Qh),Gd=Ll.map(Ll.delimited(ms,Ll.star(Ll.preceded(Ll.peek(Ll.not(ys,['CDataSection content may not contain "]]>"'])),Qh)),ys,!0),(function(e){return["CDataSection",e.join("")]})),Dd=Ll.preceded(Ll.peek(Ll.not(Zl(/["{}<&]/),['quotAttrValueContentChar cannot be ", {, }, <, or &'])),Qh),Rd=Ll.preceded(Ll.peek(Ll.not(Zl(/['{}<&]/),["aposAttrValueContentChar cannot be ', {, }, <, or &"])),Qh),kd=Ll.map(Ll.star(Ll.or([Ll.preceded(Ll.peek(Ll.not($s,[])),Qh),Ll.map(Jl([$s,Ll.peek(Ll.not($s,[]))],Qh),(function(e){return"-"+e}))])),(function(e){return e.join("")})),Ud=Ll.map(Ll.delimited(ws,kd,As,!0),(function(e){return["computedCommentConstructor",["argExpr",["stringConstantExpr",["value",e]]]]})),Md=Ll.filter(zh,(function(e){return"xml"!==e.toLowerCase()}),['A processing instruction target cannot be "xml"']),Hd=Ll.map(Ll.star(Ll.preceded(Ll.peek(Ll.not(Bs,[])),Qh)),(function(e){return e.join("")})),Pd=Ll.then(Ll.preceded(xs,Ll.cut(Md)),Ll.cut(Ll.followed(Ll.optional(Ll.preceded(_h,Hd)),Bs)),(function(e,t){return["computedPIConstructor",["piTarget",e],["piValueExpr",["stringConstantExpr",["value",t]]]]})),jd=Ll.map(ep,(function(){return["stepExpr",["xpathAxis","descendant-or-self"],["anyKindTest"]]})),Xd=Ll.or([cf,lf]),Ld=Ll.map(Ll.star(Ll.followed(Qh,Ll.peek(Ll.not(ns,["Pragma contents should not contain '#)'"])))),(function(e){return e.join("")})),Yd=Ll.map(Ll.followed(Ll.or([Op,Sp,Gp,Dp,Rp,kp]),pd),(function(e){return e+"Op"})),Qd=Ll.or([Ll.followed(Wl([Ep],"isOp"),pd),Wl([Ys],"nodeBeforeOp"),Wl([Ks],"nodeAfterOp")]),Jd=Ll.or([Wl([Ms],"equalOp"),Wl([Xs],"notEqualOp"),Wl([Qs],"lessThanOrEqualOp"),Wl([Ls],"lessThanOp"),Wl([qs],"greaterThanOrEqualOp"),Wl([Js],"greaterThanOp")]),Kd=Ll.map(Yf,(function(){return["annotation",["annotationName","updating"]]})),qd=Ll.or([yf,gf]),_d=Ll.or([vf,wf]),Vd=Ll.or([Bh,bh,Eh,Nh,Th,ks,Ih,Ch,Fh,Oh,Sh]),Wd=Ll.map(Jl([ff,Wh,df,Wh],Ll.or([yf,mf])),(function(e){return["boundarySpaceDecl",e]})),Zd=Ll.map(Jl([ff,Wh,_f,Wh],Ll.or([yf,mf])),(function(e){return["constructionDecl",e]})),$d=Ll.map(Jl([ff,Wh,Vf,Wh],Ll.or([Wf,Zf])),(function(e){return["orderingModeDecl",e]})),zd=Ll.map(Jl([ff,Wh,hf,Wh,$p,Wh,Yp,Wh],Ll.or([Af,xf])),(function(e){return["emptyOrderDecl",e]})),em=Ll.then(Jl([ff,Wh,Bf,Wh],qd),Jl([Vh,_s,Vh],_d),(function(e,t){return["copyNamespacesDecl",["preserveMode",e],["inheritMode",t]]}));function tm(e){switch(e[0]){case"constantExpr":case"varRef":case"contextItemExpr":case"functionCallExpr":case"sequenceExpr":case"elementConstructor":case"computedElementConstructor":case"computedAttributeConstructor":case"computedDocumentConstructor":case"computedTextConstructor":case"computedCommentConstructor":case"computedNamespaceConstructor":case"computedPIConstructor":case"orderedExpr":case"unorderedExpr":case"namedFunctionRef":case"inlineFunctionExpr":case"dynamicFunctionInvocationExpr":case"mapConstructor":case"arrayConstructor":case"stringConstructor":case"unaryLookup":return e}return["sequenceExpr",e]}function nm(e){if(!(1<=e&&55295>=e||57344<=e&&65533>=e||65536<=e&&1114111>=e))throw Error("XQST0090: The character reference "+e+" ("+e.toString(16)+") does not reference a valid codePoint.")}function rm(e){return e.replace(/(&[^;]+);/g,(function(e){if(/^&#x/.test(e))return nm(e=parseInt(e.slice(3,-1),16)),String.fromCodePoint(e);if(/^&#/.test(e))return nm(e=parseInt(e.slice(2,-1),10)),String.fromCodePoint(e);switch(e){case"&lt;":return"<";case"&gt;":return">";case"&amp;":return"&";case"&quot;":return String.fromCharCode(34);case"&apos;":return String.fromCharCode(39)}throw Error('XPST0003: Unknown character reference: "'+e+'"')}))}function am(e,t,n){if(!e.length)return[];for(var r=[e[0]],a=1;a<e.length;++a){var o=r[r.length-1];"string"==typeof o&&"string"==typeof e[a]?r[r.length-1]=o+e[a]:r.push(e[a])}if("string"==typeof r[0]&&0===r.length)return[];if(!(r=r.reduce((function(e,t,a){if("string"!=typeof t)e.push(t);else if(n&&/^\s*$/.test(t)){var o=r[a+1];(o&&"CDataSection"===o[0]||(a=r[a-1])&&"CDataSection"===a[0])&&e.push(rm(t))}else e.push(rm(t));return e}),[])).length)return r;if(1<r.length||t)for(e=0;e<r.length;e++)"string"==typeof r[e]&&(r[e]=["stringConstantExpr",["value",r[e]]]);return r}function om(e){return e[0].prefix?e[0].prefix+":"+e[1]:e[1]}var um=Ll.then(cd,Ll.optional(Us),(function(e,t){return null!==t?["singleType",["atomicType"].concat(h(e)),["optional"]]:["singleType",["atomicType"].concat(h(e))]})),im=Ll.map(cd,(function(e){return["atomicType"].concat(h(e))})),cm=new Map;function lm(e){function t(e,t){return t.reduce((function(e,t){return[t[0],["firstOperand",e],["secondOperand",t[1]]]}),e)}function n(e,t,n){return Ll.then(e,Ll.star(Ll.then(Ql(t,Vh),Ll.cut(e),(function(e,t){return[e,t]}))),n)}function r(e,t,n,r){return n=void 0===n?"firstOperand":n,r=void 0===r?"secondOperand":r,Ll.then(e,Ll.optional(Ll.then(Ql(t,Vh),Ll.cut(e),(function(e,t){return[e,t]}))),(function(e,t){return null===t?e:[t[0],[n,e],[r,t[1]]]}))}function a(t){return e.vb?function(e,n){if(!(e=t(e,n)).success)return e;var r=l.has(n)?l.get(n):{offset:n,line:-1,ja:-1},a=l.has(e.offset)?l.get(e.offset):{offset:e.offset,line:-1,ja:-1};return l.set(n,r),l.set(e.offset,a),Ll.okWithValue(e.offset,["x:stackTrace",{start:r,end:a},e.value])}:t}function o(e,t){return Z(e,t)}function u(e,t){return Pe(e,t)}function i(e,t){return a(Ll.or([It,Dt,Lt,Ot,it,Pt,Rt,jt,kt,Mt,ut]))(e,t)}function c(e,t){return n(i,_s,(function(e,t){return 0===t.length?e:["sequenceExpr",e].concat(h(t.map((function(e){return e[1]}))))}))(e,t)}var l=new Map,s=Ll.preceded(os,Ll.followed(Ql(c,Vh),us)),f=Ll.map(e.Ya?Ll.or([Ql(Ll.star(Ll.or([dd,md,yd,Zl(/[^"&]/)])),hs),Ql(Ll.star(Ll.or([dd,md,gd,Zl(/[^'&]/)])),ps)]):Ll.or([Ql(Ll.star(Ll.or([yd,Zl(/[^"]/)])),hs),Ql(Ll.star(Ll.or([gd,Zl(/[^']/)])),ps)]),(function(e){return e.join("")})),d=Ll.or([Ll.map(Jl([gp,Vh],Ll.delimited(Ll.followed(rs,Vh),Ll.then(ld,Jl([Vh,_s,Vh],cd),(function(e,t){return[["elementName",e],["typeName"].concat(h(t))]})),Ll.preceded(Vh,as))),(function(e){var t=p(e);return["elementTest",e=t.next().value,t=t.next().value]})),Ll.map(Jl([gp,Vh],Ll.delimited(rs,ld,as)),(function(e){return["elementTest",["elementName",e]]})),Ll.map(Jl([gp,Vh],Ll.delimited(rs,Vh,as)),(function(){return["elementTest"]}))]),m=Ll.or([Ll.map(cd,(function(e){return["QName"].concat(h(e))})),Ll.map(Ss,(function(){return["star"]}))]),y=Ll.or([Ll.map(Jl([vp,Vh],Ll.delimited(Ll.followed(rs,Vh),Ll.then(m,Jl([Vh,_s,Vh],cd),(function(e,t){return[["attributeName",e],["typeName"].concat(h(t))]})),Ll.preceded(Vh,as))),(function(e){var t=p(e);return["attributeTest",e=t.next().value,t=t.next().value]})),Ll.map(Jl([vp,Vh],Ll.delimited(rs,m,as)),(function(e){return["attributeTest",["attributeName",e]]})),Ll.map(Jl([vp,Vh],Ll.delimited(rs,Vh,as)),(function(){return["attributeTest"]}))]),g=Ll.map(Jl([wp,Vh,rs],Ll.followed(cd,as)),(function(e){return["schemaElementTest"].concat(h(e))})),v=Ll.map(Ll.delimited(Gh,Ql(cd,Vh),as),(function(e){return["schemaAttributeTest"].concat(h(e))})),w=Ll.map(Ll.preceded(Dh,Ll.followed(Ql(Ll.optional(Ll.or([d,g])),Vh),as)),(function(e){return["documentTest"].concat(h(e?[e]:[]))})),A=Ll.or([Ll.map(Ll.preceded(Rh,Ll.followed(Ql(Ll.or([zh,f]),Vh),as)),(function(e){return["piTest",["piTarget",e]]})),Vl(Wl([kh],"piTest"))]),x=Ll.or([w,d,y,g,v,A,vd,wd,Ad,xd]),B=Ll.or([Ll.map(Ll.preceded(Ts,zh),(function(e){return["Wildcard",["star"],["NCName",e]]})),Vl(Wl([Ss],"Wildcard")),Ll.map(Ll.followed(ud,Ss),(function(e){return["Wildcard",["uri",e],["star"]]})),Ll.map(Ll.followed(zh,Ns),(function(e){return["Wildcard",["NCName",e],["star"]]}))]),b=Ll.or([B,Ll.map(cd,(function(e){return["nameTest"].concat(h(e))}))]),E=Ll.or([x,b]),N=Ll.then(Ll.optional(Gs),E,(function(e,t){return null!==e||"attributeTest"===t[0]||"schemaAttributeTest"===t[0]?["stepExpr",["xpathAxis","attribute"],t]:["stepExpr",["xpathAxis","child"],t]})),T=Ll.or([Ll.then(fd,E,(function(e,t){return["stepExpr",["xpathAxis",e],t]})),N]),I=Ll.map(Ws,(function(){return["stepExpr",["xpathAxis","parent"],["anyKindTest"]]})),C=Ll.or([Ll.then(hd,E,(function(e,t){return["stepExpr",["xpathAxis",e],t]})),I]),F=Ll.map(Ll.star(Ll.preceded(Vh,s)),(function(e){return 0<e.length?["predicates"].concat(h(e)):void 0})),O=Ll.then(Ll.or([C,T]),F,(function(e,t){return void 0===t?e:e.concat([t])})),S=Ll.or([Td,Ll.map(f,(function(t){return["stringConstantExpr",["value",e.Ya?rm(t):t]]}))]),G=Ll.or([Ll.delimited(rs,Ql(c,Vh),as),Ll.map(Ll.delimited(rs,Vh,as),(function(){return["sequenceExpr"]}))]),D=Ll.or([i,Fd]),R=Ll.map(Ll.delimited(rs,Ql(Ll.optional(Ll.then(D,Ll.star(Ll.preceded(Ql(_s,Vh),D)),(function(e,t){return[e].concat(h(t))}))),Vh),as),(function(e){return null!==e?e:[]})),k=Ll.preceded(Ll.not(Kl(Cd,Vh,rs,(function(){})),["cannot use reseved keyword for function names"]),Ll.then(cd,Ll.preceded(Vh,R),(function(e,t){return["functionCallExpr",["functionName"].concat(h(e)),null!==t?["arguments"].concat(h(t)):["arguments"]]}))),U=Ll.then(cd,Ll.preceded(Rs,Nd),(function(e,t){return["namedFunctionRef",["functionName"].concat(h(e)),t]})),M=Ll.delimited(is,Ql(Ll.optional(c),Vh),cs),H=Ll.map(M,(function(e){return e||["sequenceExpr"]})),P=Ll.or([Ll.map(Xh,(function(){return[["voidSequenceType"]]})),Ll.then(o,Ll.optional(Ll.preceded(Vh,Od)),(function(e,t){return[e].concat(h(null!==t?[["occurrenceIndicator",t]]:[]))}))]),j=Ll.then(Jl([ks,Vh],cd),Ll.optional(Ll.followed(Ll.then(Jl([rs,Vh],S),Ll.star(Jl([_s,Vh],S)),(function(e,t){return e.concat(t)})),as)),(function(e,t){return["annotation",["annotationName"].concat(h(e))].concat(h(t?["arguments",t]:[]))})),X=Ll.map(Jl([mp,Vh,rs,Vh,Ss,Vh],as),(function(){return["anyFunctionTest"]})),L=Ll.then(Jl([mp,Vh,rs,Vh],Ll.optional(n(P,_s,(function(e,t){return e.concat.apply(e,t.map((function(e){return e[1]})))})))),Jl([Vh,as,Wh,op,Wh],P),(function(e,t){return["typedFunctionTest",["paramTypeList",["sequenceType"].concat(h(e||[]))],["sequenceType"].concat(h(t))]})),Y=Ll.then(Ll.star(j),Ll.or([X,L]),(function(e,t){return[t[0]].concat(h(e),h(t.slice(1)))})),Q=Ll.map(Jl([yp,Vh,rs,Vh,Ss,Vh],as),(function(){return["anyMapTest"]})),J=Ll.then(Jl([yp,Vh,rs,Vh],im),Jl([Vh,_s],Ll.followed(Ql(P,Vh),as)),(function(e,t){return["typedMapTest",e,["sequenceType"].concat(h(t))]})),K=Ll.or([Q,J]),q=Ll.map(Jl([tf,Vh,rs,Vh,Ss,Vh],as),(function(){return["anyArrayTest"]})),_=Ll.map(Jl([tf,Vh,rs],Ll.followed(Ql(P,Vh),as)),(function(e){return["typedArrayTest",["sequenceType"].concat(h(e))]})),V=Ll.or([q,_]),W=Ll.map(Ll.delimited(rs,Ql(o,Vh),as),(function(e){return["parenthesizedItemType",e]})),Z=Ll.or([x,Vl(Wl([jh],"anyItemType")),Y,K,V,im,W]),$=Ll.map(Jl([op,Wh],P),(function(e){return["typeDeclaration"].concat(h(e))})),z=Ll.then(Ll.preceded(Ds,cd),Ll.optional(Ll.preceded(Wh,$)),(function(e,t){return["param",["varName"].concat(h(e))].concat(h(t?[t]:[]))})),ee=n(z,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))})),te=ql(Ll.star(j),Jl([Vh,mp,Vh,rs,Vh],Ll.optional(ee)),Jl([Vh,as,Vh],Ll.optional(Ll.map(Jl([op,Vh],Ll.followed(P,Vh)),(function(e){return["typeDeclaration"].concat(h(e))})))),H,(function(e,t,n,r){return["inlineFunctionExpr"].concat(h(e),[["paramList"].concat(h(t||[]))],h(n?[n]:[]),[["functionBody",r]])})),ne=Ll.or([U,te]),re=Ll.map(i,(function(e){return["mapKeyExpr",e]})),ae=Ll.map(i,(function(e){return["mapValueExpr",e]})),oe=Ll.then(re,Ll.preceded(Ql(Fs,Vh),ae),(function(e,t){return["mapConstructorEntry",e,t]})),ue=Ll.preceded(yp,Ll.delimited(Ql(is,Vh),Ll.map(Ll.optional(n(oe,Ql(_s,Vh),(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))}))),(function(e){return e?["mapConstructor"].concat(h(e)):["mapConstructor"]})),Ll.preceded(Vh,cs))),ie=Ll.map(Ll.delimited(os,Ql(Ll.optional(n(i,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]})))).map((function(e){return["arrayElem",e]}))}))),Vh),us),(function(e){return["squareArray"].concat(h(null!==e?e:[]))})),ce=Ll.map(Ll.preceded(tf,Ll.preceded(Vh,M)),(function(e){return["curlyArray"].concat(h(null!==e?[["arrayElem",e]]:[]))})),le=Ll.map(Ll.or([ie,ce]),(function(e){return["arrayConstructor",e]})),se=Ll.or([zh,Nd,G,Ss]),pe=Ll.map(Ll.preceded(Us,Ll.preceded(Vh,se)),(function(e){return"*"===e?["unaryLookup",["star"]]:"string"==typeof e?["unaryLookup",["NCName",e]]:["unaryLookup",e]})),fe=Ll.or([dd,md,Wl([ls],"{"),Wl([ss],"}"),Ll.map(M,(function(e){return e||["sequenceExpr"]}))]),he=Ll.or([Gd,function(e,t){return Ae(e,t)},fe,Sd]),de=Ll.or([Ll.map(Dd,(function(e){return e.replace(/[\x20\x0D\x0A\x09]/g," ")})),fe]),me=Ll.or([Ll.map(Rd,(function(e){return e.replace(/[\x20\x0D\x0A\x09]/g," ")})),fe]),ye=Ll.map(Ll.or([Ql(Ll.star(Ll.or([yd,de])),hs),Ql(Ll.star(Ll.or([gd,me])),ps)]),(function(e){return am(e,!1,!1)})),ge=Ll.then(od,Ll.preceded(Ql(Ms,Ll.optional(_h)),ye),(function(e,t){if(""===e[0].prefix&&"xmlns"===e[1]){if(t.length&&"string"!=typeof t[0])throw Error("XQST0022: A namespace declaration may not contain enclosed expressions");return["namespaceDeclaration",t.length?["uri",t[0]]:["uri"]]}if("xmlns"===e[0].prefix){if(t.length&&"string"!=typeof t[0])throw Error("XQST0022: The namespace declaration for 'xmlns:"+e[1]+"' may not contain enclosed expressions");return["namespaceDeclaration",["prefix",e[1]],t.length?["uri",t[0]]:["uri"]]}return["attributeConstructor",["attributeName"].concat(e),0===t.length?["attributeValue"]:1===t.length&&"string"==typeof t[0]?["attributeValue",t[0]]:["attributeValueExpr"].concat(t)]})),ve=Ll.map(Ll.star(Ll.preceded(_h,Ll.optional(ge))),(function(e){return e.filter(Boolean)})),we=Kl(Ll.preceded(Ls,od),ve,Ll.or([Ll.map(gs,(function(){return null})),Ll.then(Ll.preceded(Js,Ll.star(he)),Jl([Vh,vs],Ll.followed(od,Ll.then(Ll.optional(_h),Js,(function(){return null})))),(function(e,t){return[am(e,!0,!0),t]}))]),(function(e,t,n){var r=n;if(n&&n.length){r=om(e);var a=om(n[1]);if(r!==a)throw Error('XQST0118: The start and the end tag of an element constructor must be equal. "'+r+'" does not match "'+a+'"');r=n[0]}return["elementConstructor",["tagName"].concat(h(e))].concat(h(t.length?[["attributeList"].concat(h(t))]:[]),h(r&&r.length?[["elementContent"].concat(h(r))]:[]))})),Ae=Ll.or([we,Ud,Pd]),xe=Ll.map(Jl([nf,Vh],M),(function(e){return["computedDocumentConstructor"].concat(h(e?[["argExpr",e]]:[]))})),Be=Ll.map(M,(function(e){return e?[["contentExpr",e]]:[]})),be=Ll.then(Jl([gp,Vh],Ll.or([Ll.map(cd,(function(e){return["tagName"].concat(h(e))})),Ll.map(Ll.delimited(is,Ql(c,Vh),cs),(function(e){return["tagNameExpr",e]}))])),Ll.preceded(Vh,Be),(function(e,t){return["computedElementConstructor",e].concat(h(t))})),Ee=Ll.then(Ll.preceded(vp,Ll.or([Ll.map(Jl([pd,Vh],cd),(function(e){return["tagName"].concat(h(e))})),Ll.map(Ll.preceded(Vh,Ll.delimited(is,Ql(c,Vh),cs)),(function(e){return["tagNameExpr",e]}))])),Ll.preceded(Vh,M),(function(e,t){return["computedAttributeConstructor",e,["valueExpr",t||["sequenceExpr"]]]})),Ne=Ll.map(M,(function(e){return e?[["prefixExpr",e]]:[]})),Te=Ll.map(M,(function(e){return e?[["URIExpr",e]]:[]})),Ie=Ll.then(Jl([rf,Vh],Ll.or([ed,Ne])),Ll.preceded(Vh,Te),(function(e,t){return["computedNamespaceConstructor"].concat(h(e),h(t))})),Ce=Ll.map(Jl([af,Vh],M),(function(e){return["computedTextConstructor"].concat(h(e?[["argExpr",e]]:[]))})),Fe=Ll.map(Jl([of,Vh],M),(function(e){return["computedCommentConstructor"].concat(h(e?[["argExpr",e]]:[]))})),Oe=Jl([uf,Vh],Ll.then(Ll.or([Ll.map(zh,(function(e){return["piTarget",e]})),Ll.map(Ll.delimited(is,Ql(c,Vh),cs),(function(e){return["piTargetExpr",e]}))]),Ll.preceded(Vh,M),(function(e,t){return["computedPIConstructor",e].concat(h(t?[["piValueExpr",t]]:[]))}))),Se=Ll.or([xe,be,Ee,Ie,Ce,Fe,Oe]),Ge=Ll.or([Ae,Se]),De=Ll.or([S,sd,G,Id,k,Ge,ne,ue,le,pe]),Re=Ll.map(Jl([Us,Vh],se),(function(e){return"*"===e?["lookup",["star"]]:"string"==typeof e?["lookup",["NCName",e]]:["lookup",e]})),ke=Ll.then(Ll.map(De,(function(e){return tm(e)})),Ll.star(Ll.or([Ll.map(Ll.preceded(Vh,s),(function(e){return["predicate",e]})),Ll.map(Ll.preceded(Vh,R),(function(e){return["argumentList",e]})),Ll.preceded(Vh,Re)])),(function(e,t){function n(){i&&1===o.length?u.push(["predicate",o[0]]):0!==o.length&&u.push(["predicates"].concat(h(o))),o.length=0}function r(e){n(),0!==u.length?("sequenceExpr"===a[0][0]&&2<a[0].length&&(a=[["sequenceExpr"].concat(h(a))]),a=[["filterExpr"].concat(h(a))].concat(h(u)),u.length=0):e&&(a=[["filterExpr"].concat(h(a))])}var a=[e],o=[],u=[],i=!1;for(t=(e=p(t)).next();!t.done;t=e.next())switch(t=t.value,t[0]){case"predicate":o.push(t[1]);break;case"lookup":i=!0,n(),u.push(t);break;case"argumentList":r(!1),1<a.length&&(a=[["sequenceExpr",["pathExpr",["stepExpr"].concat(h(a))]]]),a=[["dynamicFunctionInvocationExpr",["functionItem"].concat(h(a))].concat(h(t[1].length?[["arguments"].concat(h(t[1]))]:[]))];break;default:throw Error("unreachable")}return r(!0),a})),Ue=Ll.or([Ll.map(ke,(function(e){return["stepExpr"].concat(h(e))})),O]),Me=Ll.followed(De,Ll.peek(Ll.not(Ll.preceded(Vh,Ll.or([s,R,Re])),["primary expression not followed by predicate, argumentList, or lookup"]))),He=Ll.or([Kl(Ue,Ll.preceded(Vh,jd),Ll.preceded(Vh,u),(function(e,t,n){return["pathExpr",e,t].concat(h(n))})),Ll.then(Ue,Ll.preceded(Ql(zs,Vh),u),(function(e,t){return["pathExpr",e].concat(h(t))})),Me,Ll.map(Ue,(function(e){return["pathExpr",e]}))]),Pe=Ll.or([Kl(Ue,Ll.preceded(Vh,jd),Ll.preceded(Vh,u),(function(e,t,n){return[e,t].concat(h(n))})),Ll.then(Ue,Ll.preceded(Ql(zs,Vh),u),(function(e,t){return[e].concat(h(t))})),Ll.map(Ue,(function(e){return[e]}))]),je=Ll.or([Ll.map(Jl([zs,Vh],Pe),(function(e){return["pathExpr",["rootExpr"]].concat(h(e))})),Ll.then(jd,Ll.preceded(Vh,Pe),(function(e,t){return["pathExpr",["rootExpr"],e].concat(h(t))})),Ll.map(Ll.followed(zs,Ll.not(Ll.preceded(Vh,e.Ya?Zl(/[*<a-zA-Z]/):Zl(/[*a-zA-Z]/)),["Single rootExpr cannot be by followed by something that can be interpreted as a relative path"])),(function(){return["pathExpr",["rootExpr"]]}))]),Xe=Yl(Ll.or([He,je]),cm),Le=Ll.preceded(sf,Ll.then(Ll.optional(Ll.or([Ll.map(Ll.preceded(Vh,Xd),(function(e){return["validationMode",e]})),Ll.map(Jl([Vh,pf,Vh],cd),(function(e){return["type"].concat(h(e))}))])),Ll.delimited(Ll.preceded(Vh,is),Ql(c,Vh),cs),(function(e,t){return["validateExpr"].concat(h(e?[e]:[]),[["argExpr",t]])}))),Ye=Ll.delimited(ts,Ll.then(Ll.preceded(Vh,cd),Ll.optional(Ll.preceded(Wh,Ld)),(function(e,t){return t?["pragma",["pragmaName",e],["pragmaContents",t]]:["pragma",["pragmaName",e]]})),Ll.preceded(Vh,ns)),Qe=Ll.map(Ll.followed(Ll.plus(Ye),Ll.preceded(Vh,Ll.delimited(is,Ql(Ll.optional(c),Vh),cs))),(function(e){return["extensionExpr"].concat(h(e))})),Je=a(n(Xe,Hs,(function(e,t){return 0===t.length?e:["simpleMapExpr","pathExpr"===e[0]?e:["pathExpr",["stepExpr",["filterExpr",tm(e)]]]].concat(t.map((function(e){return"pathExpr"===(e=e[1])[0]?e:["pathExpr",["stepExpr",["filterExpr",tm(e)]]]})))}))),Ke=Ll.or([Le,Qe,Je]),qe=Ll.or([Ll.then(Ll.or([Wl([$s],"unaryMinusOp"),Wl([Zs],"unaryPlusOp")]),Ll.preceded(Vh,(function(e,t){return qe(e,t)})),(function(e,t){return[e,["operand",t]]})),Ke]),_e=Ll.or([Ll.map(cd,(function(e){return["EQName"].concat(h(e))})),sd,G]),Ve=Ll.then(qe,Ll.star(Jl([Vh,tp,Vh],Ll.then(_e,Ll.preceded(Vh,R),(function(e,t){return[e,t]})))),(function(e,t){return t.reduce((function(e,t){return["arrowExpr",["argExpr",e],t[0],["arguments"].concat(h(t[1]))]}),e)})),We=Ll.then(Ve,Ll.optional(Jl([Vh,up,Wh,op,pd,Vh],um)),(function(e,t){return null!==t?["castExpr",["argExpr",e],t]:e})),Ze=Ll.then(We,Ll.optional(Jl([Vh,ip,Wh,op,pd,Vh],um)),(function(e,t){return null!==t?["castableExpr",["argExpr",e],t]:e})),$e=Ll.then(Ze,Ll.optional(Jl([Vh,cp,Wh,op,pd,Vh],P)),(function(e,t){return null!==t?["treatExpr",["argExpr",e],["sequenceType"].concat(h(t))]:e})),ze=Ll.then($e,Ll.optional(Jl([Vh,lp,Wh,sp,pd,Vh],P)),(function(e,t){return null!==t?["instanceOfExpr",["argExpr",e],["sequenceType"].concat(h(t))]:e})),et=n(ze,Ll.followed(Ll.or([Wl([Ap],"intersectOp"),Wl([xp],"exceptOp")]),pd),t),tt=n(et,Ll.or([Wl([Ps],"unionOp"),Ll.followed(Wl([Bp],"unionOp"),pd)]),t),nt=n(tt,Ll.or([Wl([Ss],"multiplyOp"),Ll.followed(Wl([Ip],"divOp"),pd),Ll.followed(Wl([Cp],"idivOp"),pd),Ll.followed(Wl([Fp],"modOp"),pd)]),t),rt=n(nt,Ll.or([Wl([$s],"subtractOp"),Wl([Zs],"addOp")]),t),at=n(r(rt,Ll.followed(Wl([bp],"rangeSequenceExpr"),pd),"startExpr","endExpr"),Wl([js],"stringConcatenateOp"),t),ot=n(r(at,Ll.or([Yd,Qd,Jd])),Ll.followed(Wl([Tp],"andOp"),pd),t),ut=n(ot,Ll.followed(Wl([Np],"orOp"),pd),t),it=Ll.then(Ll.then(Jl([Pp,Vh,rs,Vh],c),Jl([Vh,as,Vh,jp,pd,Vh],i),(function(e,t){return[e,t]})),Jl([Vh,Xp,pd,Vh],i),(function(e,t){return["ifThenElseExpr",["ifClause",e[0]],["thenClause",e[1]],["elseClause",t]]})),ct=Ll.delimited(Lp,Wh,Yp),lt=Ll.map(Jl([Qp,Wh,Ds],cd),(function(e){return["positionalVariableBinding"].concat(h(e))})),st=_l(Ll.preceded(Ds,Ll.cut(cd)),Ll.cut(Ll.preceded(Vh,Ll.optional($))),Ll.cut(Ll.preceded(Vh,Ll.optional(ct))),Ll.cut(Ll.preceded(Vh,Ll.optional(lt))),Ll.cut(Ll.preceded(Ql(Jp,Vh),i)),(function(e,t,n,r,a){return["forClauseItem",["typedVariableBinding",["varName"].concat(h(e),h(t?[t]:[]))]].concat(h(n?[["allowingEmpty"]]:[]),h(r?[r]:[]),[["forExpr",a]])})),pt=Jl([Kp,Wh],n(st,_s,(function(e,t){return["forClause",e].concat(h(t.map((function(e){return e[1]}))))}))),ft=Kl(Ll.preceded(Ds,cd),Ll.preceded(Vh,Ll.optional($)),Ll.preceded(Ql(Is,Vh),i),(function(e,t,n){return["letClauseItem",["typedVariableBinding",["varName"].concat(h(e))].concat(h(t?[t]:[])),["letExpr",n]]})),ht=Ll.map(Jl([qp,Vh],n(ft,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))}))),(function(e){return["letClause"].concat(h(e))})),dt=Ll.or([pt,ht]),mt=Ll.map(Jl([_p,pd,Vh],i),(function(e){return["whereClause",e]})),yt=Ll.map(Ll.preceded(Ds,cd),(function(e){return["varName"].concat(h(e))})),gt=Ll.then(Ll.preceded(Vh,Ll.optional($)),Ll.preceded(Ql(Is,Vh),i),(function(e,t){return["groupVarInitialize"].concat(h(e?[["typeDeclaration"].concat(h(e))]:[]),[["varValue",t]])})),vt=Kl(yt,Ll.optional(gt),Ll.optional(Ll.map(Ll.preceded(Ql(Vp,Vh),f),(function(e){return["collation",e]}))),(function(e,t,n){return["groupingSpec",e].concat(h(t?[t]:[]),h(n?[n]:[]))})),wt=n(vt,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))})),At=Ll.map(Jl([Wp,Wh,Zp,Vh],wt),(function(e){return["groupByClause"].concat(h(e))})),xt=Kl(Ll.optional(Ll.or([ih,ch])),Ll.optional(Jl([Vh,Yp,Vh],Ll.or([Af,xf].map((function(e){return Ll.map(e,(function(e){return"empty "+e}))}))))),Ll.preceded(Vh,Ll.optional(Jl([Vp,Vh],f))),(function(e,t,n){return e||t||n?["orderModifier"].concat(h(e?[["orderingKind",e]]:[]),h(t?[["emptyOrderingMode",t]]:[]),h(n?[["collation",n]]:[])):null})),Bt=Ll.then(i,Ll.preceded(Vh,xt),(function(e,t){return["orderBySpec",["orderByExpr",e]].concat(h(t?[t]:[]))})),bt=n(Bt,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))})),Et=Ll.then(Ll.or([Ll.map(Jl([$p,Wh],Zp),(function(){return!1})),Ll.map(Jl([zp,Wh,$p,Wh],Zp),(function(){return!0}))]),Ll.preceded(Vh,bt),(function(e,t){return["orderByClause"].concat(h(e?[["stable"]]:[]),h(t))})),Nt=Ll.or([dt,mt,At,Et]),Tt=Ll.map(Jl([ef,Vh],i),(function(e){return["returnClause",e]})),It=Kl(dt,Ll.cut(Ll.star(Ll.preceded(Vh,Nt))),Ll.cut(Ll.preceded(Vh,Tt)),(function(e,t,n){return["flworExpr",e].concat(h(t),[n])})),Ct=n(P,Ps,(function(e,t){return 0===t.length?["sequenceType"].concat(h(e)):["sequenceTypeUnion",["sequenceType"].concat(h(e))].concat(h(t.map((function(e){return["sequenceType"].concat(h(e[1]))}))))})),Ft=Kl(Jl([Ef,Vh],Ll.optional(Ll.preceded(Ds,Ll.followed(Ll.followed(cd,Wh),op)))),Ll.preceded(Vh,Ct),Jl([Wh,ef,Wh],i),(function(e,t,n){return["typeswitchExprCaseClause"].concat(e?[["variableBinding"].concat(h(e))]:[],[t],[["resultExpr",n]])})),Ot=ql(Ll.preceded(Nf,Ql(Ll.delimited(rs,Ql(c,Vh),as),Vh)),Ll.plus(Ll.followed(Ft,Vh)),Jl([hf,Wh],Ll.optional(Ll.preceded(Ds,Ll.followed(cd,Wh)))),Jl([ef,Wh],i),(function(e,t,n,r){return["typeswitchExpr",["argExpr",e]].concat(h(t),[["typeswitchExprDefaultClause"].concat(h(n||[]),[["resultExpr",r]])])})),St=Kl(Ll.preceded(Ds,cd),Ll.optional(Ll.preceded(Wh,$)),Ll.preceded(Ql(Jp,Wh),i),(function(e,t,n){return["quantifiedExprInClause",["typedVariableBinding",["varName"].concat(h(e))].concat(h(t?[t]:[])),["sourceExpr",n]]})),Gt=n(St,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))})),Dt=Kl(Ll.or([Tf,If]),Ll.preceded(Wh,Gt),Ll.preceded(Ql(Cf,Vh),i),(function(e,t,n){return["quantifiedExpr",["quantifier",e]].concat(h(t),[["predicateExpr",n]])})),Rt=Ll.map(Jl([hp,Wh,Ll.or([fp,pp]),Wh],i),(function(e){return["deleteExpr",["targetExpr",e]]})),kt=Kl(Jl([Ff,Wh],Ll.optional(Jl([dp,Wh,sp],Wh))),Jl([pp,Wh],i),Ll.preceded(Ql(Of,Wh),i),(function(e,t,n){return e?["replaceExpr",["replaceValue"],["targetExpr",t],["replacementExpr",n]]:["replaceExpr",["targetExpr",t],["replacementExpr",n]]})),Ut=Ll.then(sd,Ll.preceded(Ql(Is,Vh),i),(function(e,t){return["transformCopy",e,["copySource",t]]})),Mt=Kl(Jl([Sf,Wh],n(Ut,_s,(function(e,t){return[e].concat(h(t.map((function(e){return e[1]}))))}))),Jl([Vh,Gf,Wh],i),Ll.preceded(Ql(ef,Wh),i),(function(e,t,n){return["transformExpr",["transformCopies"].concat(h(e)),["modifyExpr",t],["returnExpr",n]]})),Ht=Ll.or([Ll.followed(Ll.map(Ll.optional(Ll.followed(Jl([op,Wh],Ll.or([Ll.map(Df,(function(){return["insertAsFirst"]})),Ll.map(Rf,(function(){return["insertAsLast"]}))])),Wh)),(function(e){return e?["insertInto",e]:["insertInto"]})),Mf),Ll.map(Uf,(function(){return["insertAfter"]})),Ll.map(kf,(function(){return["insertBefore"]}))]),Pt=Kl(Jl([Hf,Wh,Ll.or([fp,pp]),Wh],i),Ll.preceded(Wh,Ht),Ll.preceded(Wh,i),(function(e,t,n){return["insertExpr",["sourceExpr",e],t,["targetExpr",n]]})),jt=Ll.then(Jl([Pf,Wh,pp,Vh],i),Jl([Wh,op,Wh],i),(function(e,t){return["renameExpr",["targetExpr",e],["newNameExpr",t]]})),Xt=Ll.then(Ll.plus(Ll.map(Jl([Ef,Wh],i),(function(e){return["switchCaseExpr",e]}))),Jl([Wh,ef,Wh],i),(function(e,t){return["switchExprCaseClause"].concat(h(e),[["resultExpr",t]])})),Lt=Kl(Jl([jf,Vh,rs],c),Jl([Vh,as,Vh],Ll.plus(Ll.followed(Xt,Vh))),Jl([hf,Wh,ef,Wh],i),(function(e,t,n){return["switchExpr",["argExpr",e]].concat(h(t),[["switchExprDefaultClause",["resultExpr",n]]])})),Yt=Ll.map(c,(function(e){return["queryBody",e]})),Qt=Jl([ff,Wh,rf,Wh],Ll.cut(Ll.then(zh,Ll.preceded(Ql(Ms,Vh),f),(function(e,t){return["namespaceDecl",["prefix",e],["uri",t]]})))),Jt=Ll.then(Jl([Xf,Wh,Ds,Vh],Ll.then(cd,Ll.optional(Ll.preceded(Vh,$)),(function(e,t){return[e,t]}))),Ll.cut(Ll.or([Ll.map(Jl([Vh,Is,Vh],i),(function(e){return["varValue",e]})),Ll.map(Jl([Wh,Lf],Ll.optional(Jl([Vh,Is,Vh],i))),(function(e){return["external"].concat(h(e?[["varValue",e]]:[]))}))])),(function(e,t){var n=p(e);return e=n.next().value,n=n.next().value,["varDecl",["varName"].concat(h(e))].concat(h(null!==n?[n]:[]),[t])})),Kt=ql(Jl([mp,Wh,Ll.peek(Ll.not(Cd,["Cannot use reserved function name"]))],cd),Ll.cut(Jl([Vh,rs,Vh],Ll.optional(ee))),Ll.cut(Jl([Vh,as],Ll.optional(Jl([Wh,op,Wh],P)))),Ll.cut(Ll.preceded(Vh,Ll.or([Ll.map(H,(function(e){return["functionBody",e]})),Ll.map(Lf,(function(){return["externalDefinition"]}))]))),(function(e,t,n,r){return["functionDecl",["functionName"].concat(h(e)),["paramList"].concat(h(t||[]))].concat(h(n?[["typeDeclaration"].concat(h(n))]:[]),[r])})),qt=Jl([ff,Wh],Ll.then(Ll.star(Ll.followed(Ll.or([j,Kd]),Wh)),Ll.or([Jt,Kt]),(function(e,t){return[t[0]].concat(h(e),h(t.slice(1)))}))),_t=Ll.then(Jl([ff,Wh,hf,Wh],Ll.or([gp,mp])),Jl([Wh,rf,Wh],f),(function(e,t){return["defaultNamespaceDecl",["defaultNamespaceCategory",e],["uri",t]]})),Vt=Ll.or([Ll.map(Ll.followed(Jl([rf,Wh],zh),Ll.preceded(Vh,Ms)),(function(e){return["namespacePrefix",e]})),Ll.map(Jl([hf,Wh,gp,Wh],rf),(function(){return["defaultElementNamespace"]}))]),Wt=Jl([Qf,Wh,Jf],Kl(Ll.optional(Ll.preceded(Wh,Vt)),Ll.preceded(Vh,f),Ll.optional(Ll.then(Jl([Wh,Qp,Wh],f),Ll.star(Jl([Vh,_s,Vh],f)),(function(e,t){return[e].concat(h(t))}))),(function(e,t,n){return["schemaImport"].concat(h(e?[e]:[]),[["targetNamespace",t]],h(n?[n]:[]))}))),Zt=Jl([Qf,Wh,Kf],Kl(Ll.optional(Ll.followed(Jl([Wh,rf,Wh],zh),Ll.preceded(Vh,Ms))),Ll.preceded(Vh,f),Ll.optional(Ll.then(Jl([Wh,Qp,Wh],f),Ll.star(Jl([Vh,_s,Vh],f)),(function(e,t){return[e].concat(h(t))}))),(function(e,t){return["moduleImport",["namespacePrefix",e],["targetNamespace",t]]}))),$t=Ll.or([Wt,Zt]),zt=Ll.map(Jl([ff,Wh,hf,Wh,Vp,Wh],f),(function(e){return["defaultCollationDecl",e]})),en=Ll.map(Jl([ff,Wh,qf,Wh],f),(function(e){return["baseUriDecl",e]})),tn=Ll.then(Jl([ff,Wh],Ll.or([Ll.map(Jl([bf,Wh],cd),(function(e){return["decimalFormatName"].concat(h(e))})),Ll.map(Jl([hf,Wh],bf),(function(){return null}))])),Ll.star(Ll.then(Ll.preceded(Wh,Vd),Ll.preceded(Ql(Ms,Wh),f),(function(e,t){return["decimalFormatParam",["decimalFormatParamName",e],["decimalFormatParamValue",t]]}))),(function(e,t){return["decimalFormatDecl"].concat(h(e?[e]:[]),h(t))})),nn=Ll.or([Wd,zt,en,Zd,$d,zd,em,tn]),rn=Ll.then(Jl([ff,Wh,$f,Wh],cd),Ll.preceded(Wh,f),(function(e,t){return["optionDecl",["optionName",e],["optionContents",t]]})),an=Ll.then(Jl([ff,Wh,zf,Wh,eh],Ll.optional(Jl([Wh,op],Z))),Ll.or([Ll.map(Ll.preceded(Ql(Is,Vh),i),(function(e){return["varValue",e]})),Ll.map(Jl([Wh,Lf],Ll.optional(Ll.preceded(Ql(Is,Vh),i))),(function(){return["external"]}))]),(function(e,t){return["contextItemDecl"].concat(h(e?[["contextItemType",e]]:[]),[t])})),on=Ll.then(Ll.star(Ll.followed(Ll.or([_t,nn,Qt,$t]),Ll.cut(Ql(Os,Vh)))),Ll.star(Ll.followed(Ll.or([an,qt,rn]),Ll.cut(Ql(Os,Vh)))),(function(e,t){return 0===e.length&&0===t.length?null:["prolog"].concat(h(e),h(t))})),un=Jl([Kf,Wh,rf,Wh],Ll.then(Ll.followed(zh,Ql(Ms,Vh)),Ll.followed(f,Ql(Os,Vh)),(function(e,t){return["moduleDecl",["prefix",e],["uri",t]]}))),cn=Ll.then(un,Ll.preceded(Vh,on),(function(e,t){return["libraryModule",e].concat(h(t?[t]:[]))})),ln=Ll.then(on,Ll.preceded(Vh,Yt),(function(e,t){return["mainModule"].concat(h(e?[e]:[]),[t])})),sn=Ll.map(Jl([th,Vh],Ll.followed(Ll.or([Ll.then(Ll.preceded(rh,Wh),f,(function(e){return["encoding",e]})),Ll.then(Jl([nh,Wh],f),Ll.optional(Jl([Wh,rh,Wh],f)),(function(e,t){return[["version",e]].concat(h(t?[["encoding",t]]:[]))}))]),Ll.preceded(Vh,Os))),(function(e){return["versionDecl"].concat(h(e))})),pn=Ll.then(Ll.optional(Ql(sn,Vh)),Ll.or([cn,ln]),(function(e,t){return["module"].concat(h(e?[e]:[]),[t])})),fn=Ll.complete(Ql(pn,Vh));return function(e,t){l.clear(),t=fn(e,t);for(var n=1,r=1,a=0;a<e.length+1;a++){if(l.has(a)){var o=l.get(a);o.line=r,o.ja=n}"\r"===(o=e[a])||"\n"===o?(r++,n=1):n++}return t}}var sm=lm({vb:!1,Ya:!1}),pm=lm({vb:!0,Ya:!1}),fm=lm({vb:!1,Ya:!0}),hm=lm({vb:!0,Ya:!0});function dm(e,t){var n=!!t.$;if(t=!!t.debug,Lh.clear(),Yh.clear(),cm.clear(),!0===(n=n?t?hm(e,0):fm(e,0):t?pm(e,0):sm(e,0)).success)return n.value;throw t=(e=e.substring(0,n.offset).split("\n"))[e.length-1].length+1,new ti({start:{offset:n.offset,line:e.length,ja:t},end:{offset:n.offset+1,line:e.length,ja:t+1}},"",Error("XPST0003: Failed to parse script. Expected "+[].concat(h(new Set(n.expected)))))}var mm="http://www.w3.org/XML/1998/namespace http://www.w3.org/2001/XMLSchema http://www.w3.org/2001/XMLSchema-instance http://www.w3.org/2005/xpath-functions http://www.w3.org/2005/xpath-functions/math http://www.w3.org/2012/xquery http://www.w3.org/2005/xpath-functions/array http://www.w3.org/2005/xpath-functions/map".split(" ");function ym(e,t,n,r,a){var o=Po(e,"functionName"),u=Xo(o,"prefix")||"",i=Xo(o,"URI"),c=jo(o);if(null===i&&!(i=""===u?null===t.v?"http://www.w3.org/2005/xpath-functions":t.v:t.aa(u))&&u)throw Io(u);if(mm.includes(i))throw Bo();if(o=(u=Yo(e,"annotation").map((function(e){return Po(e,"annotationName")}))).every((function(e){return!Xo(e,"URI")&&"private"!==jo(e)})),u=u.some((function(e){return!Xo(e,"URI")&&"updating"===jo(e)})),!i)throw bo();var l=Jo(e),s=Yo(Po(e,"paramList"),"param"),p=s.map((function(e){return Po(e,"varName")})),f=s.map((function(e){return Jo(e)}));if(e=Po(e,"functionBody")){if(t.xa(i,c,f.length))throw Error("XQST0049: The function Q{"+i+"}"+c+"#"+f.length+" has already been declared.");if(!a)return;var d=Sl(e[1],{ua:!1,$:!0}),m=new Oo(t),y=p.map((function(e){var n=Xo(e,"URI"),r=Xo(e,"prefix");return e=jo(e),r&&null===n&&(n=t.aa(r||"")),Uo(m,n,e)}));a=u?{j:f,arity:p.length,callFunction:function(e,t,n){var r=O.apply(3,arguments),a=jt(Pt(e,-1,null,Ie.empty()),y.reduce((function(e,t,n){return e[t]=Ce(r[n]),e}),Object.create(null)));return d.s(a,t)},Eb:!1,I:!0,hb:o,localName:c,namespaceURI:i,i:l}:{j:f,arity:p.length,callFunction:function(e,t,n){var r=O.apply(3,arguments),a=jt(Pt(e,-1,null,Ie.empty()),y.reduce((function(e,t,n){return e[t]=Ce(r[n]),e}),Object.create(null)));return ia(d,a,t)},Eb:!1,I:!1,hb:o,localName:c,namespaceURI:i,i:l},n.push({ca:d,Mb:m}),r.push({arity:p.length,ca:d,Ib:a,localName:c,namespaceURI:i,hb:o})}else{if(u)throw Error("Updating external function declarations are not supported");a={j:f,arity:p.length,callFunction:function(e,t,n){var r=O.apply(3,arguments),a=n.xa(i,c,p.length,!0);if(!a)throw Error("XPST0017: Function Q{"+i+"}"+c+" with arity of "+p.length+" not registered. "+fo(c));if(a.i.type!==l.type||a.j.some((function(e,t){return e.type!==f[t].type})))throw Error("External function declaration types do not match actual function");return a.callFunction.apply(a,[e,t,n].concat(h(r)))},Eb:!0,I:!1,localName:c,namespaceURI:i,hb:o,i:l}}Ro(t,i,c,p.length,a)}function gm(e,t,n,r){var a=[],o=[];Yo(e,"*").forEach((function(e){switch(e[0]){case"moduleImport":case"namespaceDecl":case"defaultNamespaceDecl":case"functionDecl":case"varDecl":break;default:throw Error("Not implemented: only module imports, namespace declarations, and function declarations are implemented in XQuery modules")}}));var u=new Set;Yo(e,"moduleImport").forEach((function(e){var n=jo(Po(e,"namespacePrefix"));if(e=jo(Po(e,"targetNamespace")),u.has(e))throw Error('XQST0047: The namespace "'+e+'" is imported more than once.');u.add(e),ko(t,n,e)})),Yo(e,"namespaceDecl").forEach((function(e){var n=jo(Po(e,"prefix"));if(e=jo(Po(e,"uri")),"xml"===n||"xmlns"===n)throw No();if("http://www.w3.org/XML/1998/namespace"===e||"http://www.w3.org/2000/xmlns/"===e)throw No();ko(t,n,e)}));for(var i=null,c=null,l=p(Yo(e,"defaultNamespaceDecl")),s=l.next();!s.done;s=l.next()){var f=s.value;if(s=jo(Po(f,"defaultNamespaceCategory")),!(f=jo(Po(f,"uri"))))throw bo();if("http://www.w3.org/XML/1998/namespace"===f||"http://www.w3.org/2000/xmlns/"===f)throw No();if("function"===s){if(i)throw Eo();i=f}else if("element"===s){if(c)throw Eo();c=f}}i&&(t.v=i),c&&ko(t,"",c),Yo(e,"functionDecl").forEach((function(e){ym(e,t,a,o,n)}));var h=[];return Yo(e,"varDecl").forEach((function(e){var r=Qo(Po(e,"varName")),o=r.namespaceURI;if(null===o&&!(o=t.aa(r.prefix))&&r.prefix)throw Io(r.prefix);if(mm.includes(o))throw Bo();var u,i,c=Po(e,"external");if(e=Po(e,"varValue"),null!==c?null!==(c=Po(c,"varValue"))&&(u=Po(c,"*")):null!==e&&(u=Po(e,"*")),h.some((function(e){return e.namespaceURI===o&&e.localName===r.localName})))throw Error("XQST0049: The variable "+(o?"Q{"+o+"}":"")+r.localName+" has already been declared.");if(Uo(t,o||"",r.localName),n&&(u&&(i=Sl(u,{ua:!1,$:!0})),u&&!Do(t,o||"",r.localName))){var l=null;Mo(t,o,r.localName,(function(e,t){return l?l():(l=Ce(ia(i,e,t)))()})),a.push({ca:i,Mb:t}),h.push({ca:i,localName:r.localName,namespaceURI:o})}})),o.forEach((function(e){if(!e.Ib.I&&e.ca.I)throw Vr("The function Q{"+e.namespaceURI+"}"+e.localName+" is updating but the %updating annotation is missing.")})),{Ma:o.map((function(e){return e.Ib})),Va:h,source:r,ra:function(e){u.forEach((function(e){Pl(t,e)})),a.forEach((function(t){var n=t.ca,r=t.Mb;u.forEach((function(e){Pl(r,e)})),e.Ma.forEach((function(e){r.xa(e.namespaceURI,e.localName,e.arity,!0)||e.hb&&Ro(r,e.namespaceURI,e.localName,e.arity,e)})),e.Va.forEach((function(e){r.ib(e.namespaceURI,e.localName)||Uo(r,e.namespaceURI,e.localName)})),n.v(r)}))}}}function vm(e,t,n,r,a,o,u){var i=t.$?"XQuery":"XPath";return null!==(n=t.La?null:Rl(e,i,n,r,a,t.debug,o,u))?{state:n.rc?1:2,ca:n.ca}:{state:0,hc:"string"==typeof e?dm(e,t):Ul(e)}}function wm(e,t,n,r){var a=Po(e,"mainModule");if(!a)throw Error("Can not execute a library module.");var o=Po(a,"prolog");if(o){if(!t.$)throw Error("XPST0003: Use of XQuery functionality is not allowed in XPath context");jl(),(r=gm(o,n,!0,r)).ra(r)}return wu(e,new Iu(n)),il(e=Lo(a,["queryBody","*"]),t)}function Am(e,t,n,r,a,o,u){var i=new vo(n,r,o,u),c=new Oo(i);switch(0<Object.keys(a).length&&jl(),Object.keys(a).forEach((function(e){var t=a[e];Pl(c,t),ko(c,e,t)})),"string"==typeof e&&(e=Xl(e)),(n=vm(e,t,n,r,a,o,u)).state){case 2:return{ia:c,ca:n.ca};case 1:return n.ca.v(c),kl(e,t.$?"XQuery":"XPath",i,a,n.ca,t.debug,o),{ia:c,ca:n.ca};case 0:return(n=wm(n.hc,t,c,e)).v(c),t.La||kl(e,t.$?"XQuery":"XPath",i,a,n,t.debug,o),{ia:c,ca:n}}}function xm(e,t,n,r){e=e.first();var a=t.first().h.reduce((function(e,t){return e[t.key.value]=Ce(t.value()),e}),Object.create(null));t=a["."]?a["."]():Ie.empty(),delete a["."];try{if(se(e.type,1))var o=e.value;else{if(!se(e.type,54))throw Jt("Unable to convert selector argument of type "+me[e.type]+" to either an "+me[1]+" or an "+me[54]+" representing an XQueryX program while calling 'fontoxpath:evaluate'");o=e.value.node}var u=Am(o,{ua:!1,$:!0,debug:r.debug,La:r.La},(function(e){return n.aa(e)}),Object.keys(a).reduce((function(e,t){return e[t]=t,e}),{}),{},"http://www.w3.org/2005/xpath-functions",(function(e,t){return n.Ua(e,t)})),i=u.ca,c=u.ia,l=!t.G(),s=new Rt({N:l?t.first():null,Ka:l?0:-1,Da:t,Aa:Object.keys(a).reduce((function(e,t){return e[c.ib(null,t)]=a[t],e}),Object.create(null))});return{sc:i.h(s,r).value,pc:e}}catch(t){lo(e.value,t)}}function Bm(e,t,n){if(1!==t.node.nodeType&&9!==t.node.nodeType)return[];var r=Qe(e,t).reduce((function(t,r){for(var a=(r=p(Bm(e,r,n))).next();!a.done;a=r.next())t.push(a.value);return t}),[]);return n(t)&&r.unshift(t),r}function bm(e,t,n,r,a){if(!(e=a.first()))throw Qt("The context is absent, it needs to be present to use id function.");if(!se(e.type,53))throw Jt("The context item is not a node, it needs to be node to use id function.");var o=t.h,u=r.O().reduce((function(e,t){return t.value.split(/\s+/).forEach((function(t){e[t]=!0})),e}),Object.create(null));for(t=e.value;9!==t.node.nodeType;)if(null===(t=Ve(o,t)))throw Error("FODC0001: the root node of the target node is not a document node.");return t=Bm(o,t,(function(e){return!(1!==e.node.nodeType||!(e=Ye(o,e,"id"))||!u[e]||(u[e]=!1,0))})),Ie.create(t.map((function(e){return et(e)})))}function Em(e,t,n,r,a){if(!(e=a.first()))throw Qt("The context is absent, it needs to be present to use idref function.");if(!se(e.type,53))throw Jt("The context item is not a node, it needs to be node to use idref function.");var o=t.h,u=r.O().reduce((function(e,t){return e[t.value]=!0,e}),Object.create(null));for(t=e.value;9!==t.node.nodeType;)if(null===(t=Ve(o,t)))throw Error("FODC0001: the root node of the context node is not a document node.");return t=Bm(o,t,(function(e){return 1===e.node.nodeType&&!!(e=Ye(o,e,"idref"))&&e.split(/\s+/).some((function(e){return u[e]}))})),Ie.create(t.map((function(e){return et(e)})))}function Nm(e){switch(typeof e){case"object":return Array.isArray(e)?Ie.m(new $e(e.map((function(e){return Ce(Nm(e))})))):null===e?Ie.empty():Ie.m(new at(Object.keys(e).map((function(t){return{key:ne(t,1),value:Ce(Nm(e[t]))}}))));case"number":return Ie.m(ne(e,3));case"string":return Ie.m(ne(e,1));case"boolean":return e?Ie.ba():Ie.W();default:throw Error("Unexpected type in JSON parse")}}function Tm(e,t,n,r,a){var o=(e=rt(e,t,n,a,Ie.m(ne("duplicates",1)))).G()?"use-first":e.first().value;return r.M((function(e){return Ie.m(new at(e.reduce((function(e,t){return t.h.forEach((function(t){var n=e.findIndex((function(e){return nt(e.key,t.key)}));if(0<=n)switch(o){case"reject":throw Error("FOJS0003: Duplicate encountered when merging maps.");case"use-last":return void e.splice(n,1,t);case"combine":return void e.splice(n,1,{key:t.key,value:Ce(Ie.create(e[n].value().O().concat(t.value().O())))});default:return}e.push(t)})),e}),[])))}))}function Im(e,t,n){var r=1,a=e.value;e=e.Qa(!0);var o=null,u=Math.max(t-1,0);return-1!==e&&(o=Math.max(0,(null===n?e:Math.max(0,Math.min(e,n+(t-1))))-u)),Ie.create({next:function(e){for(;r<t;)a.next(e),r++;return null!==n&&r>=t+n?ie:(e=a.next(e),r++,e)}},o)}function Cm(e){return e.map((function(e){return se(e.type,19)?Hn(e,3):e}))}function Fm(e){if((e=Cm(e)).some((function(e){return Number.isNaN(e.value)})))return[ne(NaN,3)];if(!(e=Wi(e)))throw Error("FORG0006: Incompatible types to be converted to a common type");return e}function Om(e,t,n,r,a,o){return tt([a,o],(function(e){var t=p(e);if(e=t.next().value,t=t.next().value,1/0===e.value)return Ie.empty();if(-1/0===e.value)return t&&1/0===t.value?Ie.empty():r;if(t){if(isNaN(t.value))return Ie.empty();1/0===t.value&&(t=null)}return isNaN(e.value)?Ie.empty():Im(r,Math.round(e.value),t?Math.round(t.value):null)}))}function Sm(e,t,n,r,a){if(r.G())return a;if(!(e=Wi(e=Cm(r.O()))))throw Error("FORG0006: Incompatible types to be converted to a common type");if(!e.every((function(e){return se(e.type,2)})))throw Error("FORG0006: items passed to fn:sum are not all numeric.");return t=e.reduce((function(e,t){return e+t.value}),0),e.every((function(e){return se(e.type,5)}))?Ie.m(ne(t,5)):e.every((function(e){return se(e.type,3)}))?Ie.m(ne(t,3)):e.every((function(e){return se(e.type,4)}))?Ie.m(ne(t,4)):Ie.m(ne(t,6))}var Gm=[].concat(Xa,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"boolean",j:[{type:59,g:2}],i:{type:0,g:3},callFunction:function(e,t,n,r){return r.ha()?Ie.ba():Ie.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"true",j:[],i:{type:0,g:3},callFunction:function(){return Ie.ba()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"not",j:[{type:59,g:2}],i:{type:0,g:3},callFunction:function(e,t,n,r){return!1===r.ha()?Ie.ba():Ie.W()}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"false",j:[],i:{type:0,g:3},callFunction:function(){return Ie.W()}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"last",j:[],i:{type:5,g:3},callFunction:function(e){if(null===e.N)throw Qt("The fn:last() function depends on dynamic context, which is absent.");var t=!1;return Ie.create({next:function(){if(t)return ie;var n=e.Da.Qa();return t=!0,ce(ne(n,5))}},1)}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"position",j:[],i:{type:5,g:3},callFunction:function(e){if(null===e.N)throw Qt("The fn:position() function depends on dynamic context, which is absent.");return Ie.m(ne(e.Ka+1,5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-dateTime",j:[],i:{type:10,g:3},callFunction:function(e){return Ie.m(ne(Ut(e),10))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-date",j:[],i:{type:7,g:3},callFunction:function(e){return Ie.m(ne(At(Ut(e),7),7))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"current-time",j:[],i:{type:8,g:3},callFunction:function(e){return Ie.m(ne(At(Ut(e),8),8))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"implicit-timezone",j:[],i:{type:17,g:3},callFunction:function(e){return Ie.m(ne(Mt(e),17))}}],Ya,Za,ao,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"years-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.gb(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"months-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.cb(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"days-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.bb(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"hours-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getHours(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"minutes-from-duration",j:[{type:18,g:0}],i:{type:5,g:0},callFunction:function(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getMinutes(),5))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"seconds-from-duration",j:[{type:18,g:0}],i:{type:4,g:0},callFunction:function(e,t,n,r){return r.G()?r:Ie.m(ne(r.first().value.getSeconds(),4))}}],uo,[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"id",j:[{type:1,g:2},{type:53,g:3}],i:{type:54,g:2},callFunction:bm},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"id",j:[{type:1,g:2}],i:{type:54,g:2},callFunction:function(e,t,n,r){return bm(e,t,n,r,Ie.m(e.N))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"idref",j:[{type:1,g:2},{type:53,g:3}],i:{type:53,g:2},callFunction:Em},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"idref",j:[{type:1,g:2}],i:{type:53,g:2},callFunction:function(e,t,n,r){return Em(e,t,n,r,Ie.m(e.N))}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"parse-json",j:[{type:1,g:3}],i:{type:59,g:0},callFunction:function(e,t,n,r){try{var a=JSON.parse(r.first().value)}catch(e){throw Error("FOJS0001: parsed JSON string contains illegal JSON.")}return Nm(a)}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"contains",j:[{type:61,g:3},{type:46,g:3}],i:{type:0,g:3},callFunction:function(e,t,n,r,a){return tt([r,a],(function(e){var t=(e=p(e)).next().value,n=e.next().value;return t.h.some((function(e){return nt(e.key,n)}))?Ie.ba():Ie.W()}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"entry",j:[{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},callFunction:function(e,t,n,r,a){return r.map((function(e){return new at([{key:e,value:Ce(a)}])}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"for-each",j:[{type:61,g:3},{type:59,g:2}],i:{type:59,g:2},callFunction:function(e,t,n,r,a){return tt([r,a],(function(r){var a=(r=p(r)).next().value,o=r.next().value;return Lt(a.h.map((function(r){return o.value.call(void 0,e,t,n,Ie.m(r.key),r.value())})))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"get",j:[{type:61,g:3},{type:46,g:3}],i:{type:59,g:2},callFunction:rt},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"keys",j:[{type:61,g:3}],i:{type:46,g:2},callFunction:function(e,t,n,r){return tt([r],(function(e){return e=p(e).next().value,Ie.create(e.h.map((function(e){return e.key})))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"merge",j:[{type:61,g:2},{type:61,g:3}],i:{type:61,g:3},callFunction:Tm},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"merge",j:[{type:61,g:2}],i:{type:61,g:3},callFunction:function(e,t,n,r){return Tm(e,t,n,r,Ie.m(new at([{key:ne("duplicates",1),value:function(){return Ie.m(ne("use-first",1))}}])))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"put",j:[{type:61,g:3},{type:46,g:3},{type:59,g:2}],i:{type:61,g:3},callFunction:function(e,t,n,r,a,o){return tt([r,a],(function(e){var t=(e=p(e)).next().value,n=e.next().value;return e=t.h.concat(),0<=(t=e.findIndex((function(e){return nt(e.key,n)})))?e.splice(t,1,{key:n,value:Ce(o)}):e.push({key:n,value:Ce(o)}),Ie.m(new at(e))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"remove",j:[{type:61,g:3},{type:46,g:2}],i:{type:61,g:3},callFunction:function(e,t,n,r,a){return tt([r],(function(e){var t=p(e).next().value.h.concat();return a.M((function(e){return e.forEach((function(e){var n=t.findIndex((function(t){return nt(t.key,e)}));0<=n&&t.splice(n,1)})),Ie.m(new at(t))}))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/map",localName:"size",j:[{type:61,g:3}],i:{type:5,g:3},callFunction:function(e,t,n,r){return r.map((function(e){return ne(e.h.length,5)}))}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"pi",j:[],i:{type:3,g:3},callFunction:function(){return Ie.m(ne(Math.PI,3))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"exp",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.pow(Math.E,e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"exp10",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.pow(10,e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"log",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.log(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"log10",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.log10(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"pow",j:[{type:3,g:0},{type:2,g:3}],i:{type:3,g:0},callFunction:function(e,t,n,r,a){return a.M((function(e){var t=p(e).next().value;return r.map((function(e){return 1!==Math.abs(e.value)||Number.isFinite(t.value)?ne(Math.pow(e.value,t.value),3):ne(1,3)}))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"sqrt",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.sqrt(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"sin",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.sin(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"cos",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.cos(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"tan",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.tan(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"asin",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.asin(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"acos",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.acos(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"atan",j:[{type:3,g:0}],i:{type:3,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(Math.atan(e.value),3)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions/math",localName:"atan2",j:[{type:3,g:0},{type:3,g:3}],i:{type:3,g:0},callFunction:function(e,t,n,r,a){return a.M((function(e){var t=p(e).next().value;return r.map((function(e){return ne(Math.atan2(e.value,t.value),3)}))}))}}],Ur,hr,[{namespaceURI:"http://fontoxpath/operators",localName:"to",j:[{type:5,g:0},{type:5,g:0}],i:{type:5,g:2},callFunction:function(e,t,n,r,a){if(e=r.first(),a=a.first(),null===e||null===a)return Ie.empty();var o=e.value;return a=a.value,o>a?Ie.empty():Ie.create({next:function(){return ce(ne(o++,5))}},a-o+1)}}],[{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"QName",j:[{type:1,g:0},{type:1,g:3}],i:{type:23,g:3},callFunction:function(e,t,n,r,a){return tt([r,a],(function(e){var t=p(e);if(e=t.next().value,!$t(t=t.next().value.value,23))throw Error("FOCA0002: The provided QName is invalid.");if(null===(e=e&&e.value||null)&&t.includes(":"))throw Error("FOCA0002: The URI of a QName may not be empty if a prefix is provided.");if(r.G())return Ie.m(ne(new Fe("",null,t),23));if(!t.includes(":"))return Ie.m(ne(new Fe("",e,t),23));var n=p(t.split(":"));return t=n.next().value,n=n.next().value,Ie.m(ne(new Fe(t,e,n),23))}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"prefix-from-QName",j:[{type:23,g:0}],i:{type:24,g:0},callFunction:function(e,t,n,r){return tt([r],(function(e){return null===(e=p(e).next().value)?Ie.empty():(e=e.value).prefix?Ie.m(ne(e.prefix,24)):Ie.empty()}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"local-name-from-QName",j:[{type:23,g:0}],i:{type:24,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(e.value.localName,24)}))}},{namespaceURI:"http://www.w3.org/2005/xpath-functions",localName:"namespace-uri-from-QName",j:[{type:23,g:0}],i:{type:20,g:0},callFunction:function(e,t,n,r){return r.map((function(e){return ne(e.value.namespaceURI||"",20)}))}}],[{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return r.Z({empty:function(){return Ie.ba()},multiple:function(){return Ie.W()},m:function(){return Ie.W()}})},localName:"empty",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return r.Z({empty:function(){return Ie.W()},multiple:function(){return Ie.ba()},m:function(){return Ie.ba()}})},localName:"exists",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return Im(r,1,1)},localName:"head",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:0}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return Im(r,2,null)},localName:"tail",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:5,g:3},{type:59,g:2}],callFunction:function(e,t,n,r,a,o){return r.G()?o:o.G()?r:(e=r.O(),0>(a=a.first().value-1)?a=0:a>e.length&&(a=e.length),t=e.slice(a),Ie.create(e.slice(0,a).concat(o.O(),t)))},localName:"insert-before",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:5,g:3}],callFunction:function(e,t,n,r,a){return e=a.first().value,!(r=r.O()).length||1>e||e>r.length||r.splice(e-1,1),Ie.create(r)},localName:"remove",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return r.M((function(e){return Ie.create(e.reverse())}))},localName:"reverse",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:3,g:3}],callFunction:function(e,t,n,r,a){return Om(e,t,n,r,a,Ie.empty())},localName:"subsequence",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:3,g:3},{type:3,g:3}],callFunction:Om,localName:"subsequence",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){return r},localName:"unordered",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){var a=Vt(r,t).O();return Ie.create(a).filter((function(e,t){return a.slice(0,t).every((function(t){return!Pr(e,t)}))}))},localName:"distinct-values",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:46,g:2},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"distinct-values",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:2}},{j:[{type:46,g:2},{type:46,g:3}],callFunction:function(e,t,n,r,a){return a.M((function(n){var a=p(n).next().value;return Vt(r,t).map((function(t,n){return Fi("eqOp",t.type,a.type)(t,a,e)?ne(n+1,5):ne(-1,5)})).filter((function(e){return-1!==e.value}))}))},localName:"index-of",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{j:[{type:46,g:2},{type:46,g:3},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"index-of",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:2}},{j:[{type:59,g:2},{type:59,g:2}],callFunction:function(e,t,n,r,a){var o=!1,u=Lr(e,t,n,r,a);return Ie.create({next:function(){if(o)return ie;var e=u.next(0);return e.done?e:(o=!0,ce(ne(e.value,0)))}})},localName:"deep-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2},{type:59,g:2},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"deep-equal",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:0,g:3}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){var a=!1;return Ie.create({next:function(){if(a)return ie;var e=r.Qa();return a=!0,ce(ne(e,5))}})},localName:"count",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:3}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){if(r.G())return r;if(!(e=Wi(e=Cm(r.O()))))throw Error("FORG0006: Incompatible types to be converted to a common type");if(!e.every((function(e){return se(e.type,2)})))throw Error("FORG0006: items passed to fn:avg are not all numeric.");return t=e.reduce((function(e,t){return e+t.value}),0)/e.length,e.every((function(e){return se(e.type,5)||se(e.type,3)}))?Ie.m(ne(t,3)):e.every((function(e){return se(e.type,4)}))?Ie.m(ne(t,4)):Ie.m(ne(t,6))},localName:"avg",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){return r.G()?r:(e=Fm(r.O()),Ie.m(e.reduce((function(e,t){return e.value<t.value?t:e}))))},localName:"max",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"max",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){return r.G()?r:(e=Fm(r.O()),Ie.m(e.reduce((function(e,t){return e.value>t.value?t:e}))))},localName:"min",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2},{type:1,g:3}],callFunction:function(){throw Error("FOCH0002: No collations are supported")},localName:"min",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:46,g:2}],callFunction:function(e,t,n,r){return Sm(e,t,n,r,Ie.m(ne(0,5)))},localName:"sum",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:3}},{j:[{type:46,g:2},{type:46,g:0}],callFunction:Sm,localName:"sum",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:46,g:0}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){if(!r.G()&&!r.wa())throw Error("FORG0003: The argument passed to fn:zero-or-one contained more than one item.");return r},localName:"zero-or-one",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:0}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){if(r.G())throw Error("FORG0004: The argument passed to fn:one-or-more was empty.");return r},localName:"one-or-more",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:1}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){if(!r.wa())throw Error("FORG0005: The argument passed to fn:exactly-one is empty or contained more than one item.");return r},localName:"exactly-one",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:3}},{j:[{type:59,g:2},{type:60,g:3}],callFunction:function(e,t,n,r,a){if(r.G())return r;var o=a.first(),u=o.o;if(1!==u.length)throw Error("XPTY0004: signature of function passed to fn:filter is incompatible.");return r.filter((function(r){if(r=tr(u[0],Ie.m(r),t,"fn:filter",!1),!(r=o.value.call(void 0,e,t,n,r)).wa()||!se(r.first().type,0))throw Error("XPTY0004: signature of function passed to fn:filter is incompatible.");return r.first().value}))},localName:"filter",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:60,g:3}],callFunction:function(e,t,n,r,a){if(r.G())return r;var o=a.first(),u=o.o;if(1!==u.length)throw Error("XPTY0004: signature of function passed to fn:for-each is incompatible.");var i,c=r.value;return Ie.create({next:function(r){for(;;){if(!i){var a=c.next(0);if(a.done)return a;a=tr(u[0],Ie.m(a.value),t,"fn:for-each",!1),i=o.value.call(void 0,e,t,n,a).value}if(!(a=i.next(r)).done)return a;i=null}}})},localName:"for-each",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],callFunction:function(e,t,n,r,a,o){if(r.G())return r;var u=o.first(),i=u.o;if(2!==i.length)throw Error("XPTY0004: signature of function passed to fn:fold-left is incompatible.");return r.M((function(r){return r.reduce((function(r,a){return r=tr(i[0],r,t,"fn:fold-left",!1),a=tr(i[1],Ie.m(a),t,"fn:fold-left",!1),u.value.call(void 0,e,t,n,r,a)}),a)}))},localName:"fold-left",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2},{type:59,g:2},{type:60,g:3}],callFunction:function(e,t,n,r,a,o){if(r.G())return r;var u=o.first(),i=u.o;if(2!==i.length)throw Error("XPTY0004: signature of function passed to fn:fold-right is incompatible.");return r.M((function(r){return r.reduceRight((function(r,a){return r=tr(i[0],r,t,"fn:fold-right",!1),a=tr(i[1],Ie.m(a),t,"fn:fold-right",!1),u.value.call(void 0,e,t,n,a,r)}),a)}))},localName:"fold-right",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:59,g:2}},{j:[{type:59,g:2}],callFunction:function(e,t,n,r){if(!t.v)throw Error("serialize() called but no xmlSerializer set in execution parameters.");if(!(e=r.O()).every((function(e){return se(e.type,53)})))throw Error("Expected argument to fn:serialize to resolve to a sequence of Nodes.");return Ie.m(ne(e.map((function(e){return t.v.serializeToString(no(e.value,t,!1))})).join(""),1))},localName:"serialize",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:1,g:3}}],Nr,[{j:[{type:59,g:3},{type:61,g:3}],callFunction:function(e,t,n,r,a){var o,u;return Ie.create({next:function(){if(!o){var e=xm(r,a,n,t);o=e.sc,u=e.pc}try{return o.next(0)}catch(e){lo(u.value,e)}}})},localName:"evaluate",namespaceURI:"http://fontoxml.com/fontoxpath",i:{type:59,g:2}},{j:[],callFunction:function(){return Ie.m(ne(n,1))},localName:"version",namespaceURI:"http://fontoxml.com/fontoxpath",i:{type:1,g:3}}],[{j:[{type:23,g:3},{type:5,g:3}],callFunction:function(e,t,n,r,a){return tt([r,a],(function(e){var t=p(e);e=t.next().value,t=t.next().value;var r=n.xa(e.value.namespaceURI,e.value.localName,t.value);return null===r?Ie.empty():(e=new Oe({j:r.j,arity:t.value,localName:e.value.localName,namespaceURI:e.value.namespaceURI,i:r.i,value:r.callFunction}),Ie.m(e))}))},localName:"function-lookup",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{g:0,type:60}},{j:[{type:60,g:3}],callFunction:function(e,t,n,r){return tt([r],(function(e){return(e=p(e).next().value).Sa()?Ie.empty():Ie.m(ne(new Fe("",e.l,e.B),23))}))},localName:"function-name",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:23,g:0}},{j:[{type:60,g:3}],callFunction:function(e,t,n,r){return tt([r],(function(e){return e=p(e).next().value,Ie.m(ne(e.v,5))}))},localName:"function-arity",namespaceURI:"http://www.w3.org/2005/xpath-functions",i:{type:5,g:3}}]);function Dm(e){this.h=e}(a=Dm.prototype).createAttributeNS=function(e,t){return this.h.createAttributeNS(e,t)},a.createCDATASection=function(e){return this.h.createCDATASection(e)},a.createComment=function(e){return this.h.createComment(e)},a.createDocument=function(){return this.h.createDocument()},a.createElementNS=function(e,t){return this.h.createElementNS(e,t)},a.createProcessingInstruction=function(e,t){return this.h.createProcessingInstruction(e,t)},a.createTextNode=function(e){return this.h.createTextNode(e)};var Rm=Symbol("IS_XPATH_VALUE_SYMBOL");function km(e){return function(t,n){return t=Ot(new Xe(null===n?new ke:n),t,we(e)),(n={})[Rm]=!0,n.Hb=t,n}}function Um(e){return e&&"object"==typeof e&&"lookupNamespaceURI"in e?function(t){return e.lookupNamespaceURI(t||null)}:function(){return null}}function Mm(e){return function(t){var n=t.localName;return t.prefix?null:{namespaceURI:e,localName:n}}}function Hm(e,t,n,r,a,o){if(null==r&&(r=r||{}),a)var u=a.logger||{trace:console.log.bind(console)},i=a.documentWriter,c=a.moduleImports,l=a.namespaceResolver,s=a.functionNameResolver,f=a.nodesFactory,h=a.xmlSerializer;else u={trace:console.log.bind(console)},c={},h=i=f=l=null,s=void 0;var d=new Xe(null===n?new ke:n);n=c||Object.create(null),c=void 0===a.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":a.defaultFunctionNamespaceURI;var m=Am(e,o,l||Um(t),r,n,c,s||Mm(c));for(e=t?St(d,t):Ie.empty(),t=!f&&o.$?new la(t):new Dm(f),i=i?new He(i):Me,f=Object.keys(r).reduce((function(e,t){var n=r[t];return e["Q{}"+t+"[0]"]=n&&"object"==typeof n&&Rm in n?function(){return Ie.create(n.Hb)}:function(){return St(d,r[t])},e}),Object.create(null)),l={},n=(s=p(Object.keys(m.ia.Ia))).next();!n.done;l={Za:l.Za},n=s.next())l.Za=n.value,f[l.Za]||(f[l.Za]=function(e){return function(){return(0,m.ia.Ia[e.Za])(y,g)}}(l));var y=new Rt({N:e.first(),Ka:0,Da:e,Aa:f}),g=new Xt(o.debug,o.La,d,t,i,a.currentContext,new Map,u,h);return{Bb:y,Cb:g,ca:m.ca}}function Pm(e,t){var n={},r=0,a=!1,o=null;return{next:function(){if(a)return ie;for(var u={};r<e.h.length;){e:{var i=e.h[r].key.value;if(!o){u.pb=e.h[r];var c=u.pb.value().Z({default:function(e){return e},multiple:function(e){return function(){throw Error("Serialization error: The value of an entry in a map is expected to be a single item or an empty sequence. Use arrays when putting multiple values in a map. The value of the key "+e.pb.key.value+" holds multiple items")}}(u)}).first();if(null===c){n[i]=null,r++;break e}o=Xm(c,t)}c=o.next(0),o=null,n[i]=c.value,r++}u={pb:u.pb}}return a=!0,ce(n)}}}function jm(e,t){var n=[],r=0,a=!1,o=null;return{next:function(){if(a)return ie;for(;r<e.P.length;){if(!o){var u=e.P[r]().Z({default:function(e){return e},multiple:function(){throw Error("Serialization error: The value of an entry in an array is expected to be a single item or an empty sequence. Use nested arrays when putting multiple values in an array.")}}).first();if(null===u){n[r++]=null;continue}o=Xm(u,t)}u=o.next(0),o=null,n[r++]=u.value}return a=!0,ce(n)}}}function Xm(e,t){if(se(e.type,61))return Pm(e,t);if(se(e.type,62))return jm(e,t);if(se(e.type,23)){var n=e.value;return{next:function(){return ce("Q{"+(n.namespaceURI||"")+"}"+n.localName)}}}switch(e.type){case 7:case 8:case 9:case 11:case 12:case 13:case 14:case 15:var r=e.value;return{next:function(){return ce(xt(r))}};case 47:case 53:case 54:case 55:case 56:case 57:case 58:var a=e.value;return{next:function(){return ce(no(a,t,!1))}};default:return{next:function(){return ce(e.value)}}}}Gm.forEach((function(e){mo(e.namespaceURI,e.localName,e.j,e.i,e.callFunction)}));var Lm={ANY:0,NUMBER:1,STRING:2,BOOLEAN:3,NODES:7,FIRST_NODE:9,STRINGS:10,MAP:11,ARRAY:12,NUMBERS:13,ALL_RESULTS:14,ASYNC_ITERATOR:99};function Ym(e,t,n,r){switch(n){case 3:return t.ha();case 2:return(t=Vt(t,r).O()).length?t.map((function(e){return Hn(e,1).value})).join(" "):"";case 10:return(t=Vt(t,r).O()).length?t.map((function(e){return e.value+""})):[];case 1:return null!==(t=t.first())&&se(t.type,2)?t.value:NaN;case 9:if(null===(t=t.first()))return null;if(!se(t.type,53))throw Error("Expected XPath "+io(e)+" to resolve to Node. Got "+me[t.type]);return no(t.value,r,!1);case 7:if(!(t=t.O()).every((function(e){return se(e.type,53)})))throw Error("Expected XPath "+io(e)+" to resolve to a sequence of Nodes.");return t.map((function(e){return no(e.value,r,!1)}));case 11:if(1!==(t=t.O()).length)throw Error("Expected XPath "+io(e)+" to resolve to a single map.");if(!se((t=t[0]).type,61))throw Error("Expected XPath "+io(e)+" to resolve to a map");return Pm(t,r).next(0).value;case 12:if(1!==(t=t.O()).length)throw Error("Expected XPath "+io(e)+" to resolve to a single array.");if(!se((t=t[0]).type,62))throw Error("Expected XPath "+io(e)+" to resolve to an array");return jm(t,r).next(0).value;case 13:return t.O().map((function(t){if(!se(t.type,2))throw Error("Expected XPath "+io(e)+" to resolve to numbers");return t.value}));case 99:var a=t.value,o=null,u=!1,i=function(){for(;!u;){if(!o){var e=a.next(0);if(e.done){u=!0;break}o=Xm(e.value,r)}return e=o.next(0),o=null,e}return Promise.resolve({done:!0,value:null})};return"asyncIterator"in Symbol?((t={})[Symbol.asyncIterator]=function(){return this},t.next=function(){return new Promise((function(e){return e(i())})).catch((function(t){lo(e,t)}))}):t={next:function(){return new Promise((function(e){return e(i())}))}},t;case 14:return t.O().map((function(e){return Xm(e,r).next(0).value}));default:return(t=t.O()).every((function(e){return se(e.type,53)&&!se(e.type,47)}))?1===(t=t.map((function(e){return no(e.value,r,!1)}))).length?t[0]:t:1===t.length?se((t=t[0]).type,62)?jm(t,r).next(0).value:se(t.type,61)?Pm(t,r).next(0).value:_t(t,r).first().value:Vt(Ie.create(t),r).O().map((function(e){return e.value}))}}Lm[Lm.ANY]="ANY",Lm[Lm.NUMBER]="NUMBER",Lm[Lm.STRING]="STRING",Lm[Lm.BOOLEAN]="BOOLEAN",Lm[Lm.NODES]="NODES",Lm[Lm.FIRST_NODE]="FIRST_NODE",Lm[Lm.STRINGS]="STRINGS",Lm[Lm.MAP]="MAP",Lm[Lm.ARRAY]="ARRAY",Lm[Lm.NUMBERS]="NUMBERS",Lm[Lm.ALL_RESULTS]="ALL_RESULTS",Lm[Lm.ASYNC_ITERATOR]="ASYNC_ITERATOR";var Qm=!1,Jm=null,Km={getPerformanceSummary:function(){var e=Jm.getEntriesByType("measure").filter((function(e){return e.name.startsWith("XPath: ")}));return Array.from(e.reduce((function(e,t){var n=t.name.substring(7);return e.has(n)?((n=e.get(n)).times+=1,n.totalDuration+=t.duration):e.set(n,{xpath:n,times:1,totalDuration:t.duration,average:0}),e}),new Map).values()).map((function(e){return e.average=e.totalDuration/e.times,e})).sort((function(e,t){return t.totalDuration-e.totalDuration}))},setPerformanceImplementation:function(e){Jm=e},startProfiling:function(){if(null===Jm)throw Error("Performance API object must be set using `profiler.setPerformanceImplementation` before starting to profile");Jm.clearMarks(),Jm.clearMeasures(),Qm=!0},stopProfiling:function(){Qm=!1}},qm=0,_m={XPATH_3_1_LANGUAGE:"XPath3.1",XQUERY_3_1_LANGUAGE:"XQuery3.1",XQUERY_UPDATE_3_1_LANGUAGE:"XQueryUpdate3.1"};function Vm(e,t,n,r,a,o){if(a=a||0,!e||"string"!=typeof e&&!("nodeType"in e))throw new TypeError("Failed to execute 'evaluateXPath': xpathExpression must be a string or an element depicting an XQueryX DOM tree.");o=o||{};try{var u=Hm(e,t,n||null,r||{},o,{ua:"XQueryUpdate3.1"===o.language,$:"XQuery3.1"===o.language||"XQueryUpdate3.1"===o.language,debug:!!o.debug,La:!!o.disableCache}),i=u.Bb,c=u.Cb,l=u.ca}catch(t){lo(e,t)}if(l.I)throw Error("XUST0001: Updating expressions should be evaluated as updating expressions");if(3===a&&t&&"object"==typeof t&&"nodeType"in t&&(n=l.B(),t=Re(t),null!==n&&!t.includes(n)))return!1;try{t=e,Qm&&("string"!=typeof t&&(t=io(t)),Jm.mark(t+(0===qm?"":"@"+qm)),qm++);var s=Ym(e,ia(l,i,c),a,c);return a=e,Qm&&("string"!=typeof a&&(a=io(a)),i=a+(0==--qm?"":"@"+qm),Jm.measure("XPath: "+a,i),Jm.clearMarks(i)),s}catch(t){lo(e,t)}}Object.assign(Vm,{tc:14,ANY_TYPE:0,Tb:12,Ub:99,BOOLEAN_TYPE:3,Wb:9,Zb:11,ac:7,bc:13,NUMBER_TYPE:1,cc:10,STRING_TYPE:2,uc:"XPath3.1",vc:"XQuery3.1",fc:"XQueryUpdate3.1"});var Wm={};function Zm(e,t,n,r,a){return Vm(e,t,n,r,Vm.Ub,a)}function $m(e,t,n,r){var a={};return a.pendingUpdateList=e.fa.map((function(e){return e.h(r)})),a.xdmValue=Ym(t,Ie.create(e.J),n,r),a}function zm(e,t,n,r,a){var o,u,i,c,l,s,p,f,h,d;return F(new C(new E((function(m){switch(m.h){case 1:a=a||{},jl();try{c=Hm(e,t,n||null,r||{},a||{},{ua:!0,$:!0,debug:!!a.debug,La:!!a.disableCache}),o=c.Bb,u=c.Cb,i=c.ca}catch(t){lo(e,t)}if(i.I){m.h=2;break}l=[];var y=(s=Zm(e,t,n,r,Object.assign(Object.assign({},a),{language:"XQueryUpdate3.1"}))).next();return m.h=3,{value:y};case 3:p=m.l;case 4:if(p.done){m.h=6;break}return l.push(p.value),y=s.next(),m.h=7,{value:y};case 7:p=m.l,m.h=4;break;case 6:return f={},m.return(Promise.resolve((f.pendingUpdateList=[],f.xdmValue=l,f)));case 2:try{d=i.s(o,u),h=d.next(0)}catch(t){lo(e,t)}return m.return($m(h.value,e,a.returnType,u))}}))))}function ey(e,t,n,r,a){a=a||{},jl();try{var o=Hm(e,t,n||null,r||{},a||{},{ua:!0,$:!0,debug:!!a.debug,La:!!a.disableCache}),u=o.Bb,i=o.Cb,c=o.ca}catch(t){lo(e,t)}if(!c.I)return u={},(i={}).pendingUpdateList=[],i.xdmValue=Vm(e,t,n,r,a.i,Object.assign(Object.assign({},a),(u.language=Vm.fc,u))),i;try{var l=c.s(u,i).next(0)}catch(t){lo(e,t)}return $m(l.value,e,a.returnType,i)}function ty(e,t,n,r,a){return Vm(e,t,n,r,Vm.Tb,a)}function ny(e,t,n,r,a){return Vm(e,t,n,r,Vm.BOOLEAN_TYPE,a)}function ry(e,t,n,r,a){return Vm(e,t,n,r,Vm.Wb,a)}function ay(e,t,n,r,a){return Vm(e,t,n,r,Vm.Zb,a)}function oy(e,t,n,r,a){return Vm(e,t,n,r,Vm.ac,a)}function uy(e,t,n,r,a){return Vm(e,t,n,r,Vm.NUMBER_TYPE,a)}function iy(e,t,n,r,a){return Vm(e,t,n,r,Vm.bc,a)}function cy(e,t,n,r,a){return Vm(e,t,n,r,Vm.STRING_TYPE,a)}function ly(e,t,n,r,a){return Vm(e,t,n,r,Vm.cc,a)}function sy(e,t,n,r){t=new Xe(t||new ke),r=r?new He(r):Me,n=n?n=new Dm(n):null,va(e=e.map(Jc),t,n,r)}function py(e,t,n){return{code:e,va:t,H:n,isAstAccepted:!0}}function fy(e){return{isAstAccepted:!1,reason:e}}function hy(e,t){return e.isAstAccepted?t(e):e}function dy(e,t){return e.isAstAccepted?t(e):[e,null]}function my(e,t,n){return hy(e,(function(e){switch(e.va.type){case 0:return e;case 1:return hy(hg(n,e,"nodes"),(function(e){return hy(hg(n,t,"contextItem"),(function(t){return py("(function () {\n\t\t\t\t\t\t\tconst { done, value } = "+e.code+"("+t.code+").next();\n\t\t\t\t\t\t\treturn done ? null : value;\n\t\t\t\t\t\t})()",{type:0},[].concat(h(e.H),h(t.H)))}))}));default:throw Error("invalid generated code type to convert to value: "+e.va.type)}}))}function yy(e,t,n,r){return e=my(e,n,r),t&&0===t.type&&3===t.g?e:hy(e,(function(e){return py("!!"+e.code,{type:0},e.H)}))}function gy(e,t,n){return t?e.isAstAccepted&&0!==e.va.type?fy("Atomization only implemented for single value"):se(t.type,1)?e:se(t.type,47)?hy(hg(n,e,"attr"),(function(e){return py("("+e.code+" ? domFacade.getData("+e.code+") : null)",{type:0},e.H)})):fy("Atomization only implemented for string and attribute"):fy("Can not atomize value if type was not annotated")}function vy(e,t,n,r){return r=gy(e=my(e,n,r),t,r),tn(t)?hy(r,(function(e){return py(e.code+" ?? ''",{type:0},e.H)})):r}function wy(e,t,n){return hy(hg(n,e,"node"),(function(e){return 1===e.va.type?e:t&&!se(t.type,53)?fy("Can not evaluate to node if expression does not result in nodes"):py("(function () {\n\t\t\t\tif ("+e.code+" !== null && !"+e.code+".nodeType) {\n\t\t\t\t\tthrow new Error('XPDY0050: The result of the expression was not a node');\n\t\t\t\t}\n\t\t\t\treturn "+e.code+";\n\t\t\t})()",{type:0},e.H)}))}function Ay(e,t,n,r){return hy(e,(function(e){switch(e.va.type){case 1:return hy(hg(r,e,"nodes"),(function(e){return hy(hg(r,n,"contextItem"),(function(t){return py("Array.from("+e.code+"("+t.code+"))",{type:0},[].concat(h(e.H),h(t.H)))}))}));case 0:return hy(hg(r,wy(e,t,r),"node"),(function(e){return py("("+e.code+" === null ? [] : ["+e.code+"])",{type:0},e.H)}));default:return fy("Unsupported code type to evaluate to nodes")}}))}function xy(e,t){return hy(e,(function(e){return hy(t,(function(t){if(0!==e.va.type||0!==t.va.type)throw Error("can only use emitAnd with value expressions");return py(e.code+" && "+t.code,{type:0},[].concat(h(e.H),h(t.H)))}))}))}function By(e,t,n,r){return(e=Lo(e,[t,"*"]))?r.h(e,n,r):[fy(t+" expression not found"),null]}Object.assign(Vm,(Wm.ALL_RESULTS_TYPE=14,Wm.ANY_TYPE=0,Wm.ARRAY_TYPE=12,Wm.ASYNC_ITERATOR_TYPE=99,Wm.BOOLEAN_TYPE=3,Wm.FIRST_NODE_TYPE=9,Wm.MAP_TYPE=11,Wm.NODES_TYPE=7,Wm.NUMBERS_TYPE=13,Wm.NUMBER_TYPE=1,Wm.STRINGS_TYPE=10,Wm.STRING_TYPE=2,Wm.XPATH_3_1_LANGUAGE="XPath3.1",Wm.XQUERY_3_1_LANGUAGE="XQuery3.1",Wm.XQUERY_UPDATE_3_1_LANGUAGE="XQueryUpdate3.1",Wm));var by={},Ey=(by.equalOp="eqOp",by.notEqualOp="neOp",by.lessThanOrEqualOp="leOp",by.lessThanOp="ltOp",by.greaterThanOrEqualOp="geOp",by.greaterThanOp="gtOp",by),Ny={},Ty=(Ny.eqOp="eqOp",Ny.neOp="neOp",Ny.leOp="geOp",Ny.ltOp="gtOp",Ny.geOp="leOp",Ny.gtOp="ltOp",Ny);function Iy(e,t,n,r){var a=Xo(Lo(e,["firstOperand","*"]),"type"),o=Xo(Lo(e,["secondOperand","*"]),"type");if(!a||!o)return fy("Can not generate code for value compare without both types");var u=[47,1];if(!u.includes(a.type)||!u.includes(o.type))return fy("Unsupported types in compare: ["+me[a.type]+", "+me[o.type]+"]");if(!(u=new Map([["eqOp","==="],["neOp","!=="]])).has(t))return fy(t+" not yet implemented");var i=u.get(t);return u=(t=p(By(e,"firstOperand",n,r))).next().value,t.next(),t=gy(t=my(u,n,r),a,r),hy(hg(r,t,"first"),(function(t){var u=p(By(e,"secondOperand",n,r)),c=u.next().value;return u.next(),u=gy(u=my(c,n,r),o,r),hy(hg(r,u,"second"),(function(e){var n=[];return tn(a)&&n.push(t.code+" === null"),tn(o)&&n.push(e.code+" === null"),py("("+(n.length?n.join(" || ")+" ? null : ":"")+t.code+" "+i+" "+e.code+")",{type:0},[].concat(h(t.H),h(e.H)))}))}))}function Cy(e,t,n,r,a,o){var u=Xo(Lo(e,[t,"*"]),"type"),i=Xo(Lo(e,[n,"*"]),"type");if(!u||!i)return fy("Can not generate code for general compare without both types");var c=[47,1];if(!c.includes(u.type)||!c.includes(i.type))return fy("Unsupported types in compare: ["+me[u.type]+", "+me[i.type]+"]");if(!(c=new Map([["eqOp","==="],["neOp","!=="]])).has(r))return fy(r+" not yet implemented");var l=c.get(r);return r=(t=p(By(e,t,a,o))).next().value,t.next(),u=gy(t=my(r,a,o),u,o),hy(hg(o,u,"single"),(function(t){var r=p(By(e,n,a,o)),u=r.next().value;return r.next(),hy(hg(o,u,"multiple"),(function(e){if(1!==e.va.type)return fy("can only generate general compare for a single value and a generator");var n=dg(o,mg(o,"n")),r=gy(n,i,o);return hy(a,(function(a){return hy(r,(function(r){return py("(function () {\n\t\t\t\t\t\t\t\t\tfor (const "+n.code+" of "+e.code+"("+a.code+")) {\n\t\t\t\t\t\t\t\t\t\t"+r.H.join("\n")+"\n\t\t\t\t\t\t\t\t\t\tif ("+r.code+" "+l+" "+t.code+") {\n\t\t\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t})()",{type:0},[].concat(h(t.H),h(n.H),h(a.H),h(e.H)))}))}))}))}))}function Fy(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}var Oy={"false#0":Ly,"local-name#0":jy,"local-name#1":jy,"name#0":Py,"name#1":Py,"not#1":Xy,"true#0":Yy},Sy={},Gy=(Sy["http://fontoxml.com/fontoxpath"]=["version#0"],Sy[""]=["root#1","path#1"],Sy);function Dy(e,t,n,r){var a=p(r.h(e,n,r)),o=a.next().value;if(a.next(),e=Xo(e,"type"),!t||2===t.g||1===t.g)return fy("Not supported: sequence arguments with multiple items");if(se(t.type,53))return wy(t=my(o,n,r),e,r);switch(t.type){case 59:return my(o,n,r);case 0:return yy(o,e,n,r);case 1:return vy(o,e,n,r)}return fy("Argument types not supported: "+(e?me[e.type]:"unknown")+" -> "+me[t.type])}function Ry(e,t,n,r){if(e.length!==t.length||t.some((function(e){return 4===e})))return fy("Not supported: variadic function or mismatch in argument count");if(0===e.length)return py("",{type:0},[]);var a=p(e);e=a.next().value;var o=f(a);a=(t=p(t)).next().value;var u=f(t);return e=hg(r,Dy(e,a,n,r),"arg"),0===o.length?e:hy(e,(function(e){return hy(Ry(o,u,n,r),(function(t){return py(e.code+", "+t.code,{type:0},[].concat(h(e.H),h(t.H)))}))}))}function ky(e,t){return hy(e,(function(e){return t&&2!==t.g&&1!==t.g&&([0,1].includes(t.type)||se(t.type,53))?e:fy("Function return type "+me[t.type]+" not supported")}))}function Uy(e,t,n){var r=Qo(Po(e,"functionName")),a=r.localName,o=r.namespaceURI,u=(r=Yo(Po(e,"arguments"),"*")).length,i=a+"#"+u,c=o===n.B;if(c){var l=Oy[i];if(void 0!==l)return l(e,t,n)}return(e=Gy[c?"":o])&&!e.includes(i)?fy("Not supported: built-in function not on allow list: "+i):(e=ho(o,a,u))?e.I?fy("Not supported: updating functions"):ky(t=hy(t=Ry(r,e.j,t,n),(function(e){return py("runtimeLib.callFunction(domFacade, "+Fy(o)+", "+Fy(a)+", ["+e.code+"], options)",{type:0},e.H)})),e.i):fy("Unknown function / arity: "+i)}function My(e,t){return hy(hg(t,e,"contextItem"),(function(e){return py(e.code,{type:0},[].concat(h(e.H),["if ("+e.code+" === undefined || "+e.code+" === null) {\n\t\t\t\t\tthrow errXPDY0002('The function which was called depends on dynamic context, which is absent.');\n\t\t\t\t}"]))}))}function Hy(e,t,n,r){if((e=Lo(e,["arguments","*"]))&&"contextItemExpr"!==e[0]){var a=Xo(e,"type");if(!a||!se(a.type,53))return fy("name function only implemented if arg is a node");a=(e=p(n.h(e,t,n))).next().value,e.next(),e=a}else e=My(t,n);return hy(hg(n,t=my(e,t,n),"arg"),(function(e){return py("("+e.code+" ? "+r(e.code)+" : '')",{type:0},e.H)}))}function Py(e,t,n){return Hy(e,t,n,(function(e){return"((("+e+".prefix || '').length !== 0 ? "+e+".prefix + ':' : '')\n\t\t+ ("+e+".localName || "+e+".target || ''))"}))}function jy(e,t,n){return Hy(e,t,n,(function(e){return"("+e+".localName || "+e+".target || '')"}))}function Xy(e,t,n){var r=Lo(e,["arguments","*"]);e=Xo(r,"type");var a=(r=p(n.h(r,t,n))).next().value;return r.next(),hy(t=yy(a,e,t,n),(function(e){return py("!"+e.code,{type:0},e.H)}))}function Ly(){return py("false",{type:0},[])}function Yy(){return py("true",{type:0},[])}function Qy(e,t,n,r){var a=p(By(e,"firstOperand",n,r)),o=a.next().value;a=a.next().value;var u=Xo(Lo(e,["firstOperand","*"]),"type");o=yy(o,u,n,r);var i=(u=p(By(e,"secondOperand",n,r))).next().value;return u=u.next().value,[o=hy(o,(function(a){var o=Xo(Lo(e,["secondOperand","*"]),"type");return hy(o=yy(i,o,n,r),(function(e){return py("("+a.code+" "+t+" "+e.code+")",{type:0},[].concat(h(a.H),h(e.H)))}))})),a="&&"===t?Uu(a,u):a===u?a:null]}function Jy(e,t,n){return hy(e,(function(e){return hy(t,(function(t){return hy(n,(function(n){return py("for ("+e.code+") {\n\t\t\t\t\t\t"+t.H.join("\n")+"\n\t\t\t\t\t\tif (!("+t.code+")) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t"+n.H.join("\n")+"\n\t\t\t\t\t\t"+n.code+"\n\t\t\t\t\t}",{type:2},e.H)}))}))}))}function Ky(e,t,n,r,a){var o=t?', "'+t+'"':"";return Jy(t=hy(r,(function(e){return hy(a,(function(t){return py("let "+e.code+" = domFacade.getFirstChild("+t.code+o+");\n\t\t\t\t\t\t\t"+e.code+";\n\t\t\t\t\t\t\t"+e.code+" = domFacade.getNextSibling("+e.code+o+")",{type:2},[].concat(h(e.H),h(t.H)))}))})),e,n)}function qy(e,t,n,r,a){var o=Uu(t,"type-2"),u=hy(a,(function(e){return py("("+e.code+" && "+e.code+".nodeType === /*ELEMENT_NODE*/ 1 ? domFacade.getAllAttributes("+e.code+(o?', "'+o+'"':"")+") : [])",{type:0},e.H)}));return Jy(t=hy(r,(function(e){return hy(u,(function(t){return py("const "+e.code+" of "+t.code,{type:2},[].concat(h(e.H),h(t.H)))}))})),e,n)}function _y(e,t,n,r,a){var o=t?', "'+t+'"':"";return Vy(r,t=hy(a,(function(e){return py("domFacade.getParentNode("+e.code+o+")",{type:0},e.H)})),e,n)}function Vy(e,t,n,r){var a=xy(e,n);return hy(e,(function(e){return hy(t,(function(t){return hy(a,(function(n){return hy(r,(function(r){return py("const "+e.code+" = "+t.code+";\n\t\t\t\t\t\t"+n.H.join("\n")+"\n\t\t\t\t\t\tif ("+n.code+") {\n\t\t\t\t\t\t\t"+r.H.join("\n")+"\n\t\t\t\t\t\t\t"+r.code+"\n\t\t\t\t\t\t}",{type:2},[].concat(h(e.H),h(t.H)))}))}))}))}))}function Wy(e,t,n,r,a,o){switch(e=jo(e)){case"attribute":return[qy(t,n,r,a,o),"type-1"];case"child":return[Ky(t,n,r,a,o),null];case"parent":return[_y(t,n,r,a,o),null];case"self":return[Vy(a,o,t,r),n];default:return[fy("Unsupported: the "+e+" axis"),null]}}var Zy={dc:"textTest",Vb:"elementTest",$b:"nameTest",ec:"Wildcard",Sb:"anyKindTest"},$y=Object.values(Zy);function zy(e){return[hy(e,(function(e){return py(e.code+".nodeType === /*TEXT_NODE*/ 3",{type:0},[])})),"type-3"]}function eg(e,t){if(null===e.namespaceURI&&"*"!==e.prefix){if(!(t=t.aa(e.prefix||"")||null)&&e.prefix)throw Error("XPST0081: The prefix "+e.prefix+" could not be resolved.");e.namespaceURI=t}}function tg(e,t,n,r){eg(e,r);var a=e.prefix,o=e.namespaceURI,u=e.localName;return dy(n,(function(e){var n=py(t?e.code+".nodeType\n\t\t\t\t\t\t&& ("+e.code+".nodeType === /*ELEMENT_NODE*/ 1\n\t\t\t\t\t\t|| "+e.code+".nodeType === /*ATTRIBUTE_NODE*/ 2)":e.code+".nodeType\n\t\t\t\t\t\t&& "+e.code+".nodeType === /*ELEMENT_NODE*/ 1",{type:0},[]);if("*"===a)return"*"===u?[n,t?"type-1-or-type-2":"type-1"]:[xy(n,py(e.code+".localName === "+Fy(u),{type:0},[])),"name-"+u];n="*"===u?n:xy(n,py(e.code+".localName === "+Fy(u),{type:0},[]));var r=py(Fy(o),{type:0},[]);return r=""===a&&t?hy(r,(function(t){return py(e.code+".nodeType === /*ELEMENT_NODE*/ 1 ? "+t.code+" : null",{type:0},t.H)})):r,[xy(n,r=hy(r,(function(t){return py("("+e.code+".namespaceURI || null) === (("+t.code+") || null)",{type:0},t.H)}))),"name-"+u]}))}function ng(e,t,n){var r=(e=Po(e,"elementName"))&&Po(e,"star");return null===e||r?[hy(t,(function(e){return py(e.code+".nodeType === /*ELEMENT_NODE*/ 1",{type:0},[])})),"type-1"]:tg(e=Qo(Po(e,"QName")),!1,t,n)}function rg(e){return[hy(e,(function(e){return py("!!"+e.code+".nodeType",{type:0},[])})),null]}function ag(e,t,n,r){var a=e[0];switch(a){case Zy.Vb:return ng(e,n,r);case Zy.dc:return zy(n);case Zy.$b:return tg(Qo(e),t,n,r);case Zy.ec:return Po(e,"star")?null!==(a=Po(e,"uri"))?e=tg({localName:"*",namespaceURI:jo(a),prefix:""},t,n,r):(a=Po(e,"NCName"),e="star"===Po(e,"*")[0]?tg({localName:jo(a),namespaceURI:null,prefix:"*"},t,n,r):tg({localName:"*",namespaceURI:null,prefix:jo(a)},t,n,r)):e=tg({localName:"*",namespaceURI:null,prefix:"*"},t,n,r),e;case Zy.Sb:return rg(n);default:return[fy("Test not implemented: '"+a),null]}}function og(e,t,n){var r=p(n.h(e,t,n)),a=r.next().value;return r=r.next().value,[yy(a,Xo(e,"type"),t,n),r]}function ug(e,t,n){var r=p((e=e?Yo(e,"*"):[]).reduce((function(e,r){var a=(e=p(e)).next().value,o=e.next().value;if(!a)return og(r,t,n);var u=o;return dy(a,(function(e){var a=p(og(r,t,n)),i=a.next().value;return a=a.next().value,u=Uu(o,a),[hy(i,(function(t){return py(e.code+" && "+t.code,{type:0},[].concat(h(e.H),h(t.H)))})),u]}))}),[null,null]));return e=r.next().value,r=r.next().value,[e?hy(e,(function(e){return py("(function () {\n\t\t\t\t\t\t\t"+e.H.join("\n")+"\n\t\t\t\t\t\t\treturn "+e.code+";\n\t\t\t\t\t\t})()",{type:0},[])})):null,r]}function ig(e,t,n,r){if(0===e.length)return[hy(n,(function(e){return py("yield "+e.code+";",{type:2},e.H)})),null];var a=(e=p(e)).next().value,o=f(e);if(0<Yo(a,"lookup").length)return[fy("Unsupported: lookups"),null];var u=dg(r,mg(r,"contextItem")),i=(e=p(ug(e=Po(a,"predicates"),u,r))).next().value,c=e.next().value;if(e=Po(a,"xpathAxis")){if(!(a=Po(a,$y)))return[fy("Unsupported test in step"),null];var l=jo(e);return a=(l=p(ag(a,t="attribute"===l||"self"===l&&t,u,r))).next().value,l=l.next().value,a=null===i?a:xy(a,i),c=Uu(l,c),l=(t=p(ig(o,t,u,r))).next().value,t.next(),Wy(e,a,c,l,u,n)}return(e=Lo(a,["filterExpr","*"]))?(e=(c=p(r.h(e,n,r))).next().value,c=c.next().value,[hy(e,(function(e){var t=0===o.length?py("",{type:2},[]):py("if ("+u.code+" !== null && !"+u.code+".nodeType) {\n\t\t\t\t\t\t\t\t\tthrow new Error('XPTY0019: The result of E1 in a path expression E1/E2 should evaluate to a sequence of nodes.');\n\t\t\t\t\t\t\t\t}",{type:2},[]),a=p(ig(o,!0,u,r)),c=a.next().value;return a.next(),a=null===i?c:hy(i,(function(e){return hy(c,(function(t){return py("if ("+e.code+") {\n\t\t\t\t\t\t\t\t\t"+t.H.join("\n")+"\n\t\t\t\t\t\t\t\t\t"+t.code+"\n\t\t\t\t\t\t\t\t}",{type:2},e.H)}))})),hy(a,(function(r){switch(e.va.type){case 1:return hy(n,(function(n){return py("for (const "+u.code+" of "+e.code+"("+n.code+")) {\n\t\t\t\t\t\t\t\t\t"+r.H.join("\n")+"\n\t\t\t\t\t\t\t\t\t"+r.code+"\n\t\t\t\t\t\t\t\t}",{type:2},[].concat(h(u.H),h(e.H),h(t.H)))}));case 0:return py("const "+u.code+" = "+e.code+";\n\t\t\t\t\t\t\t"+t.code+"\n\t\t\t\t\t\t\tif ("+u.code+" !== null) {\n\t\t\t\t\t\t\t\t"+r.H.join("\n")+"\n\t\t\t\t\t\t\t\t"+r.code+"\n\t\t\t\t\t\t\t}",{type:2},[].concat(h(u.H),h(e.H),h(t.H)));default:return fy("Unsupported generated code type for filterExpr")}}))})),c]):[fy("Unsupported: unknown step type"),null]}function cg(e){return hy(e,(function(e){return py("(function () {\n\t\t\t\tlet n = "+e.code+";\n\t\t\t\twhile (n.nodeType !== /*DOCUMENT_NODE*/9) {\n\t\t\t\t\tn = domFacade.getParentNode(n);\n\t\t\t\t\tif (n === null) {\n\t\t\t\t\t\tthrow new Error('XPDY0050: the root node of the context node is not a document node.');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn n;\n\t\t\t})()",{type:0},e.H)}))}function lg(e,t,n){return dy(t,(function(t){if(0<Yo(e,"lookup").length)return[fy("Unsupported: lookups"),null];var r=Po(e,"predicates"),a=p(ug(r,t,n));r=a.next().value,a=a.next().value;var o=Po(e,$y);if(!o)return[fy("Unsupported test in step"),null];var u=p(ag(o,!0,t,n));return o=u.next().value,u=u.next().value,r=null===r?o:xy(o,r),a=Uu(u,a),[hy(r,(function(e){return py("(("+e.code+") ? "+t.code+" : null)",{type:0},[].concat(h(t.H),h(e.H)))})),a]}))}function sg(e,t,n){var r=Yo(e,"stepExpr");if(1===r.length){var a=Po(r[0],"xpathAxis");if(a&&"self"===jo(a))return lg(r[0],t,n)}var o=dg(n,mg(n,"contextItem"));return t=(e=Po(e,"rootExpr"))?hg(n,cg(o),"root"):o,n=(r=p(ig(r,!e,t,n))).next().value,r=r.next().value,[hy(n,(function(e){return py("(function* ("+o.code+") {\n\t\t\t"+e.H.join("\n")+"\n\t\t\t"+e.code+"\n\t\t})",{type:1},[])})),r]}function pg(e,t,n){var r=e[0];switch(r){case"contextItemExpr":return[t,null];case"pathExpr":return sg(e,t,n);case"andOp":return Qy(e,"&&",t,n);case"orOp":return Qy(e,"||",t,n);case"stringConstantExpr":return[py(e=Fy(e=Po(e,"value")[1]||""),{type:0},[]),null];case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":case"isOp":case"nodeBeforeOp":case"nodeAfterOp":e:switch(r){case"eqOp":case"neOp":case"ltOp":case"leOp":case"gtOp":case"geOp":case"isOp":e=Iy(e,r,t,n);break e;case"equalOp":case"notEqualOp":case"lessThanOrEqualOp":case"lessThanOp":case"greaterThanOrEqualOp":case"greaterThanOp":var a=Xo(Lo(e,["firstOperand","*"]),"type"),o=Xo(Lo(e,["secondOperand","*"]),"type");e=a&&o?3===a.g&&3===o.g?Iy(e,Ey[r],t,n):3===a.g?Cy(e,"firstOperand","secondOperand",Ey[r],t,n):3===o.g?Cy(e,"secondOperand","firstOperand",Ty[Ey[r]],t,n):fy("General comparison for sequences is not implemented"):fy("types of compare are not known");break e;default:e=fy("Unsupported compare type: "+r)}return[e,null];case"functionCallExpr":return[Uy(e,t,n),null];default:return[fy("Unsupported: the base expression '"+r+"'."),null]}}function fg(e,t){this.o=new Map,this.v=new Map,this.aa=e,this.B=t,this.h=pg}function hg(e,t,n){return hy(t,(function(t){var r=e.o.get(t);return r||(r=py(r=mg(e,n),t.va,[].concat(h(t.H),["const "+r+" = "+t.code+";"])),e.o.set(t,r),e.o.set(r,r)),r}))}function dg(e,t){return t=py(t,{type:0},[]),e.o.set(t,t),t}function mg(e,t){t=void 0===t?"v":t;var n=e.v.get(t)||0;return e.v.set(t,n+1),t+n}function yg(e){var t=Yo(e,"*");if("pathExpr"===e[0])return!0;for(t=(e=p(t)).next();!t.done;t=e.next())if(yg(t.value))return!0;return!1}function gg(e,t,n){if(n=n||{},t=t||0,"string"==typeof e){e=Xl(e);var r={$:"XQuery3.1"===n.language||"XQueryUpdate3.1"===n.language,debug:!1};try{var a=dm(e,r)}catch(t){lo(e,t)}}else a=Ul(e);if(!(e=Po(a,"mainModule")))return fy("Unsupported: XQuery Library modules are not supported.");if(Po(e,"prolog"))return fy("Unsupported: XQuery Prologs are not supported.");if(r=void 0===n.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":n.defaultFunctionNamespaceURI,wu(a,n=new Iu(new Oo(new vo((e=new fg(n.namespaceResolver||Um(null),r)).aa,{},r,n.functionNameResolver||Mm("http://www.w3.org/2005/xpath-functions"))))),n=Po(a,"mainModule"))if(Po(n,"prolog"))e=fy("Unsupported: XQuery.");else{var o=Lo(n,["queryBody","*"]);n=dg(e,"contextItem");var u=p(e.h(o,n,e));r=u.next().value,u.next();e:switch(o=Xo(o,"type"),t){case 9:e=wy(t=my(r,n,e),o,e);break e;case 7:e=Ay(r,o,n,e);break e;case 3:e=yy(r,o,n,e);break e;case 2:e=vy(r,o,n,e);break e;default:e=fy("Unsupported: the return type '"+t+"'.")}e.isAstAccepted&&(e="\n\t\t"+e.H.join("\n")+"\n\t\treturn "+e.code+";",t="\n\treturn (contextItem, domFacade, runtimeLib, options) => {\n\t\tconst {\n\t\t\terrXPDY0002,\n\t\t} = runtimeLib;",yg(a)&&(t+='\n\t\tif (!contextItem) {\n\t\t\tthrow errXPDY0002("Context is needed to evaluate the given path expression.");\n\t\t}\n\n\t\tif (!contextItem.nodeType) {\n\t\t\tthrow new Error("Context item must be subtype of node().");\n\t\t}\n\t\t'),e={code:t+(e+"}\n//# sourceURL=generated.js"),isAstAccepted:!0})}else e=fy("Unsupported: Can not execute a library module.");return e}function vg(e,t,n){var r=e.stack;r&&(r.includes(e.message)&&(r=r.substr(r.indexOf(e.message)+e.message.length).trim()),(r=r.split("\n")).splice(10),r=(r=r.map((function(e){return e.startsWith("    ")||e.startsWith("\t")?e:"    "+e}))).join("\n")),e=Error.call(this,"Custom XPath function Q{"+n+"}"+t+" raised:\n"+e.message+"\n"+r),this.message=e.message,"stack"in e&&(this.stack=e.stack)}function wg(e,t,n){return 0===t.g?e.G()?null:Xm(e.first(),n).next(0).value:2===t.g||1===t.g?e.O().map((function(e){if(se(e.type,47))throw Error("Cannot pass attribute nodes to custom functions");return Xm(e,n).next(0).value})):Xm(e.first(),n).next(0).value}function Ag(e){if("object"==typeof e)return e;if(2!==(e=e.split(":")).length)throw Error("Do not register custom functions in the default function namespace");var t=p(e);e=t.next().value,t=t.next().value;var n=go[e];if(!n){if(n="generated_namespace_uri_"+e,go[e])throw Error("Prefix already registered: Do not register the same prefix twice.");go[e]=n}return{localName:t,namespaceURI:n}}function xg(e,t,n,r){var a=(e=Ag(e)).namespaceURI,o=e.localName;if(!a)throw bo();var u=t.map((function(e){return we(e)})),i=we(n);mo(a,o,u,i,(function(e,t,n){var c=Array.from(arguments);c.splice(0,3),c=c.map((function(e,n){return wg(e,u[n],t)}));var l={};l.currentContext=t.l,l.domFacade=t.h.h;try{var s=r.apply(void 0,[l].concat(h(c)))}catch(e){throw new vg(e,o,a)}return s&&"object"==typeof s&&Object.getOwnPropertySymbols(s).includes(Rm)?Ie.create(s.Hb):St(t.h,s,i)}))}A(vg,Error);var Bg={callFunction:function(e,t,n,r,a){var o=ho(t,n,r.length);if(!o)throw Error("function not found for codegen function call");t=new Rt({N:null,Ka:0,Da:Ie.empty(),Aa:{}});var u=new Xe(e);return e=new Xt(!1,!1,u,null,null,a?a.currentContext:null,null),wg(r=o.callFunction.apply(o,[t,e,null].concat(h(r.map((function(e,t){return St(u,e,o.j[t])}))))),{type:59,g:0},e)},errXPDY0002:Qt};function bg(e,t,n,r){return n=n||new ke,e()(null!=t?t:null,n,Bg,r)}var Eg={},Ng=(Eg["http://www.w3.org/2005/XQueryX"]="xqx",Eg["http://www.w3.org/2007/xquery-update-10"]="xquf",Eg["http://fontoxml.com/fontoxpath"]="x",Eg);function Tg(e,t){switch(e){case"copySource":case"insertAfter":case"insertAsFirst":case"insertAsLast":case"insertBefore":case"insertInto":case"modifyExpr":case"newNameExpr":case"replacementExpr":case"replaceValue":case"returnExpr":case"sourceExpr":case"targetExpr":case"transformCopies":case"transformCopy":return{localName:e,ub:t||"http://www.w3.org/2005/XQueryX"};case"deleteExpr":case"insertExpr":case"renameExpr":case"replaceExpr":case"transformExpr":return{localName:e,ub:"http://www.w3.org/2007/xquery-update-10"};case"x:stackTrace":return{localName:"stackTrace",ub:"http://fontoxml.com/fontoxpath"};default:return{localName:e,ub:"http://www.w3.org/2005/XQueryX"}}}function Ig(e,t,n,r,a){if("string"==typeof n)return 0===n.length?null:t.createTextNode(n);if(!Array.isArray(n))throw new TypeError("JsonML element should be an array or string");var o=(r=Tg(n[0],r)).localName;r=r.ub;var u=t.createElementNS(r,Ng[r]+":"+o),i=n[1],c=1;if("object"==typeof i&&!Array.isArray(i)){if(null!==i)for(var l=(c=p(Object.keys(i))).next();!l.done;l=c.next()){var s=i[l=l.value];null!==s&&("type"===l?void 0!==s&&e.setAttributeNS(u,r,"fontoxpath:"+l,ge(s)):("start"!==l&&"end"!==l||"stackTrace"!==o||(s=JSON.stringify(s)),a&&"prefix"===l&&""===s||e.setAttributeNS(u,r,Ng[r]+":"+l,s)))}c=2}for(o=c,i=n.length;o<i;++o)null!==(c=Ig(e,t,n[o],r,a))&&e.insertBefore(u,c,null);return u}function Cg(e,t,n,r){r=void 0===r?Me:r,e=Xl(e);try{var a=dm(e,{$:"XQuery3.1"===t.language||"XQueryUpdate3.1"===t.language,debug:t.debug})}catch(t){lo(e,t)}var o=new vo(t.namespaceResolver||function(){return null},{},void 0===t.defaultFunctionNamespaceURI?"http://www.w3.org/2005/xpath-functions":t.defaultFunctionNamespaceURI,t.functionNameResolver||function(){return null});o=new Oo(o);var u=Po(a,["mainModule","libraryModule"]),i=Po(u,"moduleDecl");return i&&ko(o,jo(Po(i,"prefix")),i=jo(Po(i,"uri"))),(u=Po(u,"prolog"))&&gm(u,o,!1,e),!1!==t.annotateAst&&vu(a,new Iu(o)),o=new ke,t=Ig(r,n,a,null,!1===t.wc),r.insertBefore(t,n.createComment(e),o.getFirstChild(t)),t}function Fg(e){return Promise.resolve(e)}function Og(e,t){if(vu(t=dm(e,{$:!0,debug:(t=void 0===t?{debug:!1}:t).debug}),new Iu(void 0)),!(t=Po(t,"libraryModule")))throw Error("XQuery module must be declared in a library module.");var n=Po(t,"moduleDecl"),r=Po(n,"uri"),a=jo(r);if(r=jo(n=Po(n,"prefix")),ko(n=new Oo(new vo((function(){return null}),Object.create(null),"http://www.w3.org/2005/xpath-functions",Mm("http://www.w3.org/2005/xpath-functions"))),r,a),null!==(t=Po(t,"prolog"))){try{var o=gm(t,n,!0,e)}catch(t){lo(e,t)}o.Ma.forEach((function(e){if(a!==e.namespaceURI)throw Error("XQST0048: Functions and variables declared in a module must reside in the module target namespace.")})),Hl(a,o)}else Hl(a,{Ma:[],Va:[],ra:null,source:e});return a}var Sg=new Map;function Gg(e){var t;e:{if(t=Gl.get(e))for(var n=p(Object.keys(t)),r=n.next();!r.done;r=n.next())if(t[r=r.value]&&t[r].length){t=t[r][0].h;break e}t=null}if(t)return t;if(Sg.has(e))return Sg.get(e);if(null===(t=Lo(t="string"==typeof e?dm(e,{$:!1}):Ul(e),["mainModule","queryBody","*"])))throw Error("Library modules do not have a specificity");return t=Sl(t,{ua:!1,$:!1}),Sg.set(e,t),t}function Dg(e){return Gg(e).B()}function Rg(e,t){return Fa(Gg(e).o,Gg(t).o)}var kg=new ke;return void 0!==r&&(r.compareSpecificity=Rg,r.compileXPathToJavaScript=gg,r.domFacade=kg,r.evaluateXPath=Vm,r.evaluateXPathToArray=ty,r.evaluateXPathToAsyncIterator=Zm,r.evaluateXPathToBoolean=ny,r.evaluateXPathToFirstNode=ry,r.evaluateXPathToMap=ay,r.evaluateXPathToNodes=oy,r.evaluateXPathToNumber=uy,r.evaluateXPathToNumbers=iy,r.evaluateXPathToString=cy,r.evaluateXPathToStrings=ly,r.evaluateUpdatingExpression=zm,r.evaluateUpdatingExpressionSync=ey,r.executeJavaScriptCompiledXPath=bg,r.executePendingUpdateList=sy,r.getBucketForSelector=Dg,r.getBucketsForNode=Re,r.precompileXPath=Fg,r.registerXQueryModule=Og,r.registerCustomXPathFunction=xg,r.parseScript=Cg,r.profiler=Km,r.createTypedValueFactory=km,r.finalizeModuleRegistration=jl,r.Language=_m,r.ReturnType=Lm),r}(a,o))}]]);
callback.get = snippet => graph.get(snippet);
callback.has = snippet => graph.has(snippet);
/* harmony default export */ const isolated_full = (callback);
;// CONCATENATED MODULE: ./node_modules/@eyeo/snippets/webext/main.mjs
/*!
 * This file is part of eyeo's Anti-Circumvention Snippets module (@eyeo/snippets),
 * Copyright (C) 2006-present eyeo GmbH
 * 
 * @eyeo/snippets is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 * 
 * @eyeo/snippets is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with @eyeo/snippets.  If not, see <http://www.gnu.org/licenses/>.
 */

const main_callback = (environment, ...filters) => {
const e=Proxy,{apply:t,bind:r,call:n}=Function,o=n.bind(t),s=n.bind(r),i=n.bind(n),a={get:(e,t)=>s(n,e[t])},c=t=>new e(t,a),l=(t,r)=>new e(t,{apply:(e,t,n)=>o(r,t,n)}),u={get:(e,t)=>s(e[t],e)},f=t=>new e(t,u),{assign:p,defineProperties:d,freeze:h,getOwnPropertyDescriptor:g,getOwnPropertyDescriptors:w,getPrototypeOf:y}=f(Object),{hasOwnProperty:m}=c({}),{species:v}=Symbol,b={get(e,t){const r=e[t];class n extends r{}const o=w(r.prototype);delete o.constructor,h(d(n.prototype,o));const s=w(r);return delete s.length,delete s.prototype,s[v]={value:n},h(d(n,s))}},E=t=>new e(t,b),S="undefined"!=typeof environment?environment:{};"undefined"==typeof globalThis&&(window.globalThis=window);const{apply:x,ownKeys:$}=f(Reflect),T="world"in S,k=T&&"ISOLATED"===S.world,j=T&&"MAIN"===S.world,M="object"==typeof chrome&&!!chrome.runtime,R="object"==typeof browser&&!!browser.runtime,L=!j&&(k||M||R),A=e=>L?e:O(e,I(e)),{create:O,defineProperties:P,defineProperty:C,freeze:N,getOwnPropertyDescriptor:W,getOwnPropertyDescriptors:I}=f(Object),D=f(globalThis),F=L?globalThis:E(globalThis),{Map:H,RegExp:z,Set:B,WeakMap:U,WeakSet:q}=F,V=(e,t,r=null)=>{const n=$(t);for(const o of $(e)){if(n.includes(o))continue;const s=W(e,o);if(r&&"value"in s){const{value:e}=s;"function"==typeof e&&(s.value=r(e))}C(t,o,s)}},G=e=>{const t=F[e];class r extends t{}const{toString:n,valueOf:o}=t.prototype;P(r.prototype,{toString:{value:n},valueOf:{value:o}});const s=e.toLowerCase(),i=e=>function(){const t=x(e,this,arguments);return typeof t===s?new r(t):t};return V(t,r,i),V(t.prototype,r.prototype,i),r},X=N({frozen:new U,hidden:new q,iframePropertiesToAbort:{read:new B,write:new B},abortedIframes:new U}),J=new z("^[A-Z]");var _=new Proxy(new H([["chrome",L&&(M&&chrome||R&&browser)||void 0],["isExtensionContext",L],["variables",X],["console",A(console)],["document",globalThis.document],["JSON",A(JSON)],["Map",H],["Math",A(Math)],["Number",L?Number:G("Number")],["RegExp",z],["Set",B],["String",L?String:G("String")],["WeakMap",U],["WeakSet",q],["MouseEvent",MouseEvent]]),{get(e,t){if(e.has(t))return e.get(t);let r=globalThis[t];return"function"==typeof r&&(r=(J.test(t)?F:D)[t]),e.set(t,r),r},has:(e,t)=>e.has(t)});const K={WeakSet:WeakSet,WeakMap:WeakMap,WeakValue:class{has(){return!1}set(){}}},{apply:Y}=Reflect;const{Map:Z,WeakMap:Q,WeakSet:ee,setTimeout:te}=_;let re=!0,ne=e=>{e.clear(),re=!re};var oe=function(e){const{WeakSet:t,WeakMap:r,WeakValue:n}=this||K,o=new t,s=new r,i=new n;return function(t){if(o.has(t))return t;if(s.has(t))return s.get(t);if(i.has(t))return i.get(t);const r=Y(e,this,arguments);return o.add(r),r!==t&&("object"==typeof t&&t?s:i).set(t,r),r}}.bind({WeakMap:Q,WeakSet:ee,WeakValue:class extends Z{set(e,t){return re&&(re=!re,te(ne,0,this)),super.set(e,t)}}});const{concat:se,includes:ie,join:ae,reduce:ce,unshift:le}=c([]),ue=E(globalThis),{Map:fe,WeakMap:pe}=ue,de=new fe,he=t=>{const r=(e=>{const t=[];let r=e;for(;r;){if(de.has(r))le(t,de.get(r));else{const e=w(r);de.set(r,e),le(t,e)}r=y(r)}return le(t,{}),o(p,null,t)})("function"==typeof t?t.prototype:t),n={get(e,t){if(t in r){const{value:n,get:o}=r[t];if(o)return i(o,e);if("function"==typeof n)return s(n,e)}return e[t]},set(e,t,n){if(t in r){const{set:o}=r[t];if(o)return i(o,e,n),!0}return e[t]=n,!0}};return t=>new e(t,n)},{isExtensionContext:ge,Array:we,Number:ye,String:me,Object:ve}=_,{isArray:be}=we,{getOwnPropertyDescriptor:Ee,setPrototypeOf:Se}=ve,{toString:xe}=ve.prototype,{slice:$e}=me.prototype,{get:Te}=Ee(Node.prototype,"nodeType"),ke=ge?{}:{Attr:he(Attr),CanvasRenderingContext2D:he(CanvasRenderingContext2D),CSSStyleDeclaration:he(CSSStyleDeclaration),Document:he(Document),Element:he(Element),HTMLCanvasElement:he(HTMLCanvasElement),HTMLElement:he(HTMLElement),HTMLImageElement:he(HTMLImageElement),HTMLScriptElement:he(HTMLScriptElement),MutationRecord:he(MutationRecord),Node:he(Node),ShadowRoot:he(ShadowRoot),get CSS2Properties(){return ke.CSSStyleDeclaration}},je=(e,t)=>{if("Element"!==t&&t in ke)return ke[t](e);if(be(e))return Se(e,we.prototype);const r=(e=>i($e,i(xe,e),8,-1))(e);if(r in ke)return ke[r](e);if(r in _)return Se(e,_[r].prototype);if("nodeType"in e)switch(i(Te,e)){case 1:if(!(t in ke))throw new Error("unknown hint "+t);return ke[t](e);case 2:return ke.Attr(e);case 3:return ke.Node(e);case 9:return ke.Document(e)}throw new Error("unknown brand "+r)};var Me=ge?e=>e===window||e===globalThis?_:e:oe(((e,t="Element")=>{if(e===window||e===globalThis)return _;switch(typeof e){case"object":return e&&je(e,t);case"string":return new me(e);case"number":return new ye(e);default:throw new Error("unsupported value")}}));const Re={get(e,t){const r=e;for(;!m(e,t);)e=y(e);const{get:n,set:s}=g(e,t);return function(){return arguments.length?o(s,r,arguments):i(n,r)}}},Le=t=>new e(t,Re);let{Math:Ae,setInterval:Oe,performance:Pe}=Me(window);const Ce={mark(){},end(){},toString:()=>"{mark(){},end(){}}"};let Ne=!0;function We(e,t=10){if(Ne)return Ce;function r(){let e=Me([]);for(let{name:t,duration:r}of Pe.getEntriesByType("measure"))e.push({name:t,duration:r});e.length&&Pe.clearMeasures()}return We[e]||(We[e]=Oe(r,Ae.round(6e4/Ae.min(60,t)))),{mark(){Pe.mark(e)},end(t=!1){const n=Pe.measure(e,e);console.log("PROFILER:",n),Pe.clearMarks(e),t&&(clearInterval(We[e]),delete We[e],r())}}}let Ie=!1;function De(){return Ie}const{console:Fe}=Me(window),He=()=>{};function ze(...e){let{mark:t,end:r}=We("log");if(De()){const t=["%c DEBUG","font-weight: bold;"],r=e.indexOf("error"),n=e.indexOf("warn"),o=e.indexOf("success"),s=e.indexOf("info");-1!==r?(t[0]+=" - ERROR",t[1]+="color: red; border:2px solid red",Me(e).splice(r,1)):-1!==n?(t[0]+=" - WARNING",t[1]+="color: orange; border:2px solid orange ",Me(e).splice(n,1)):-1!==o?(t[0]+=" - SUCCESS",t[1]+="color: green; border:2px solid green",Me(e).splice(o,1)):-1!==s&&(t[1]+="color: black;",Me(e).splice(s,1)),Me(e).unshift(...t)}t(),Fe.log(...e),r()}function Be(e){return s(De()?ze:He,null,e)}let{Array:Ue,Math:qe,RegExp:Ve}=Me(window);function Ge(e){let{length:t}=e;if(t>1&&"/"===e[0]){let r="/"===e[t-1];if(r||t>2&&Me(e).endsWith("/i")){let t=[Me(e).slice(1,r?-1:-2)];return r||t.push("i"),new Ve(...t)}}return new Ve(Me(e).replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"))}function Xe(){return Me(qe.floor(2116316160*qe.random()+60466176)).toString(36)}function Je(e){return Me(Ue.from(e)).map((e=>`'${e}'`)).join(" ")}let{parseFloat:_e,variables:Ke,Array:Ye,Error:Ze,Map:Qe,Object:et,ReferenceError:tt,Set:rt,WeakMap:nt}=Me(window),{onerror:ot}=Le(window),st=Node.prototype,it=Element.prototype,at=null;function ct(e,t,r,n=!0){let o=Me(t),s=o.indexOf(".");if(-1==s){let o=et.getOwnPropertyDescriptor(e,t);if(o&&!o.configurable)return;let s=et.assign({},r,{configurable:n});if(!o&&!s.get&&s.set){let r=e[t];s.get=()=>r}return void et.defineProperty(e,t,s)}let i=o.slice(0,s).toString();t=o.slice(s+1).toString();let a=e[i];!a||"object"!=typeof a&&"function"!=typeof a||ct(a,t,r);let c=et.getOwnPropertyDescriptor(e,i);if(c&&!c.configurable)return;at||(at=new nt),at.has(e)||at.set(e,new Qe);let l=at.get(e);if(l.has(i))return void l.get(i).set(t,r);let u=new Qe([[t,r]]);l.set(i,u),et.defineProperty(e,i,{get:()=>a,set(e){if(a=e,a&&("object"==typeof a||"function"==typeof a))for(let[e,t]of u)ct(a,e,t)},configurable:n})}function lt(e){let t=ot();ot(((...r)=>{let n=r.length&&r[0];return!("string"!=typeof n||!Me(n).includes(e))||("function"==typeof t?o(t,this,r):void 0)}))}function ut(e,t,r,n="",o=!0){let s=Be(e);if(!r)return void s("error","no property to abort on read");let i=Xe();s("info",`aborting on ${r} access`),ct(t,r,{get:function(){throw s("success",`${r} access aborted`,`\nFILTER: ${e} ${n}`),new tt(i)},set(){}},o),lt(i)}function ft(e,t,r,n="",o=!0){let s=Be(e);if(!r)return void s("error","no property to abort on write");let i=Xe();s("info",`aborting when setting ${r}`),ct(t,r,{set:function(){throw s("success",`setting ${r} aborted`,`\nFILTER: ${e} ${n}`),new tt(i)}},o),lt(i)}function pt(e,t=!1,r=!1){let n=Ke.abortedIframes,s=Ke.iframePropertiesToAbort;const a=Je(e);for(let o of Ye.from(window.frames))if(n.has(o))for(let s of e)t&&n.get(o).read.add({property:s,formattedProperties:a}),r&&n.get(o).write.add({property:s,formattedProperties:a});for(let n of e)t&&s.read.add({property:n,formattedProperties:a}),r&&s.write.add({property:n,formattedProperties:a});function c(){for(let e of Ye.from(window.frames)){n.has(e)||n.set(e,{read:new rt(s.read),write:new rt(s.write)});let t=n.get(e).read;if(t.size>0){let r=Ye.from(t);t.clear();for(let{property:t,formattedProperties:n}of r)ut("abort-on-iframe-property-read",e,t,n)}let r=n.get(e).write;if(r.size>0){let t=Ye.from(r);r.clear();for(let{property:r,formattedProperties:n}of t)ft("abort-on-iframe-property-write",e,r,n)}}}c(),n.has(document)||(n.set(document,!0),function(e){let t;function r(e,t){for(let r of t){ct(e,r,n(e,r))}}function n(t,r){let n=t[r];return{get:()=>function(...t){let r;return r=o(n,this,t),e&&e(),r}}}function s(t,r){let n=et.getOwnPropertyDescriptor(t,r),{set:o}=n||{};return{set(t){let r;return r=i(o,this,t),e&&e(),r}}}r(st,["appendChild","insertBefore","replaceChild"]),r(it,["append","prepend","replaceWith","after","before","insertAdjacentElement","insertAdjacentHTML"]),t=s(it,"innerHTML"),ct(it,"innerHTML",t),t=s(it,"outerHTML"),ct(it,"outerHTML",t)}(c))}let{Object:dt}=window;function ht(e,t){if(!(e instanceof dt))return;let r=e,n=Me(t).split(".");if(0===n.length)return;for(let e=0;e<n.length-1;e++){let t=n[e];if(!m(r,t))return;if(r=r[t],!(r instanceof dt))return}let o=n[n.length-1];return m(r,o)?[r,o]:void 0}const gt=Me(/^\d+$/);function wt(e){switch(e){case"false":return!1;case"true":return!0;case"null":return null;case"noopFunc":return()=>{};case"trueFunc":return()=>!0;case"falseFunc":return()=>!1;case"emptyArray":return[];case"emptyObj":return{};case"undefined":return;case"":return e;default:if(gt.test(e))return _e(e);throw new Ze(`[override-property-read snippet]: Value "${e}" is not valid.`)}}let{HTMLScriptElement:yt,Object:mt,ReferenceError:vt}=Me(window),bt=mt.getPrototypeOf(yt);const{Error:Et,Object:St,Array:xt,Map:$t}=Me(window);let Tt=null;function kt(e,t,r){let n=e;for(const e of r){if(!n||!m(n,e))return!1;n=n[e]}if("string"==typeof n||"number"==typeof n){const e=n.toString();return t.test(e)}return!1}let{Error:jt,URL:Mt}=Me(window),{cookie:Rt}=Le(document);let{console:Lt,document:At,getComputedStyle:Ot,isExtensionContext:Pt,variables:Ct,Array:Nt,MutationObserver:Wt,Object:It,XPathEvaluator:Dt,XPathExpression:Ft,XPathResult:Ht}=Me(window);const{querySelectorAll:zt}=At,Bt=zt&&s(zt,At);function Ut(e,t=!1){return Gt(e,Bt.bind(At),At,t)}function qt(e,t,r,n){const o=t.getAttribute("xlink:href")||t.getAttribute("href");if(o){const i=Bt(o)[0];if(!i&&De())return Lt.log("No elements found matching",o),!1;if(!(s=e)||0===s.length||s.every((e=>""===e.trim()))){const e=n.length>0?n:[];return r.push({element:i,rootParents:[...e,t]}),!1}const a=i.querySelectorAll.bind(i);return{nextBoundElement:i,nestedSelectorsString:e.join("^^"),next$$:a}}var s}function Vt(e,t){const r=function(e,t=!1){try{const r=navigator.userAgent.includes("Firefox")?e.openOrClosedShadowRoot:browser.dom.openOrClosedShadowRoot(e);return null===r&&De()&&!t&&Lt.log("Shadow root not found or not added in element yet",e),r}catch(r){return De()&&!t&&Lt.log("Error while accessing shadow root",e,r),null}}(t);if(r){const{querySelectorAll:n}=r,o=n&&s(n,r).bind(r);return{nextBoundElement:t,nestedSelectorsString:":host "+e.join("^^"),next$$:o}}return!1}function Gt(e,t,r,n,o=[]){if(e.includes("^^")){const[s,i,...a]=e.split("^^");let c,l;switch(i){case"svg":l=qt;break;case"sh":l=Vt;break;default:return De()&&Lt.log(i," is not supported. Supported commands are: \n^^sh^^\n^^svg^^"),[]}c=""===s.trim()?[r]:t(s);const u=[];for(const e of c){const t=l(a,e,u,o);if(!t)continue;const{next$$:r,nestedSelectorsString:s,nextBoundElement:i}=t,c=Gt(s,r,i,n,[...o,e]);c&&u.push(...c)}return u}const s=t(e);return n?[...s].map((e=>({element:e,rootParents:o.length>0?o:[]}))):s}const{assign:Xt,setPrototypeOf:Jt}=It;class _t extends Ft{evaluate(...e){return Jt(o(super.evaluate,this,e),Ht.prototype)}}class Kt extends Dt{createExpression(...e){return Jt(o(super.createExpression,this,e),_t.prototype)}}function Yt(e){if(Ct.hidden.has(e))return!1;!function(e){Pt&&"function"==typeof checkElement&&checkElement(e)}(e),Ct.hidden.add(e);let{style:t}=Me(e),r=Me(t,"CSSStyleDeclaration"),n=Me([]),{debugCSSProperties:o}=S;for(let[e,t]of o||[["display","none"]])r.setProperty(e,t,"important"),n.push([e,r.getPropertyValue(e)]);return new Wt((()=>{for(let[e,t]of n){let n=r.getPropertyValue(e),o=r.getPropertyPriority(e);n==t&&"important"==o||r.setProperty(e,t,"important")}})).observe(e,{attributes:!0,attributeFilter:["style"]}),!0}function Zt(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let t=function(e){let t=e;if(t.startsWith("xpath(")&&t.endsWith(")")){let e=t.slice(6,-1),r=(new Kt).createExpression(e,null),n=Ht.ORDERED_NODE_SNAPSHOT_TYPE;return e=>{if(!e)return;let t=r.evaluate(At,n,null),{snapshotLength:o}=t;for(let r=0;r<o;r++)e(t.snapshotItem(r))}}return t=>Ut(e).forEach(t)}(e);return()=>{let e=Me([]);return t((t=>e.push(t))),e}}return()=>Nt.from(Ut(e))}let{ELEMENT_NODE:Qt,TEXT_NODE:er,prototype:tr}=Node,{prototype:rr}=Element,{prototype:nr}=HTMLElement,{console:or,variables:sr,DOMParser:ir,Error:ar,MutationObserver:cr,Object:lr,ReferenceError:ur}=Me(window),{getOwnPropertyDescriptor:fr}=lr;const{CanvasRenderingContext2D:pr,document:dr,Map:hr,MutationObserver:gr,Object:wr,Set:yr,WeakSet:mr}=Me(window);let vr,br=new yr,Er=new mr;function Sr(e,t,r,n){br.add({canvasElement:e,rule:t,functionName:r,text:n})}Me(window);const{Map:xr,MutationObserver:$r,Object:Tr,Set:kr,WeakSet:jr}=Me(window);let Mr=Element.prototype,{attachShadow:Rr}=Mr,Lr=new jr,Ar=new xr,Or=null;const{Array:Pr,Error:Cr,JSON:Nr,Map:Wr,Object:Ir,Response:Dr}=Me(window);let Fr=null;let{Array:Hr,Error:zr,JSON:Br,Map:Ur,Object:qr,Response:Vr,URL:Gr}=Me(window),Xr=null;let{Error:Jr}=Me(window);let{Error:_r,Map:Kr,Object:Yr,console:Zr}=Me(window),{toString:Qr}=Function.prototype,en=EventTarget.prototype,{addEventListener:tn}=en,rn=null;let{fetch:nn}=Me(window),on=!1;const sn=[],an=[],cn=()=>{on||(window.fetch=l(nn,((...e)=>{let[t]=e;if(sn.length>0&&"string"==typeof t){let r;try{r=new URL(t)}catch(e){if(!(e instanceof TypeError))throw e;r=new URL(t,Me(document).location)}sn.forEach((e=>e(r))),e[0]=r.href}return o(nn,self,e).then((e=>{let t=e;return an.forEach((e=>{t=e(t)})),t}))})),on=!0)};let ln,{Map:un,Object:fn,RegExp:pn,Response:dn}=Me(window);let hn,gn,{RegExp:wn,XMLHttpRequest:yn,WeakMap:mn}=Me(window);let vn,{delete:bn,has:En}=c(URLSearchParams.prototype);const Sn={"abort-current-inline-script":function(e,t=null){const r=Je(arguments),n=Be("abort-current-inline-script"),{mark:o,end:s}=We("abort-current-inline-script"),a=t?Ge(t):null,c=Xe(),l=Me(document).currentScript;let u=window;const f=Me(e).split("."),p=Me(f).pop();for(let e of Me(f))if(u=u[e],!u||"object"!=typeof u&&"function"!=typeof u)return void n("warn",f," is not found");const{get:d,set:h}=mt.getOwnPropertyDescriptor(u,p)||{};let g=u[p];void 0===g&&n("warn","The property",p,"doesn't exist yet. Check typos.");const w=()=>{const e=Me(document).currentScript;if(e instanceof bt&&""==Me(e,"HTMLScriptElement").src&&e!=l&&(!a||a.test(Me(e).textContent)))throw n("success",f," is aborted \n",e,"\nFILTER: abort-current-inline-script",r),new vt(c)},y={get(){return w(),d?i(d,this):g},set(e){w(),h?i(h,this,e):g=e}};o(),ct(u,p,y),s(),lt(c)},"abort-on-iframe-property-read":function(...e){const{mark:t,end:r}=We("abort-on-iframe-property-read");t(),pt(e,!0,!1),r()},"abort-on-iframe-property-write":function(...e){const{mark:t,end:r}=We("abort-on-iframe-property-write");t(),pt(e,!1,!0),r()},"abort-on-property-read":function(e,t){const r=!("false"===t),n=Je(arguments),{mark:o,end:s}=We("abort-on-property-read");o(),ut("abort-on-property-read",window,e,n,r),s()},"abort-on-property-write":function(e,t){const r=Je(arguments),{mark:n,end:o}=We("abort-on-property-write"),s=!("false"===t);n(),ft("abort-on-property-write",window,e,r,s),o()},"array-override":function(e,t,r="false",n){if(!e)throw new Et("[array-override snippet]: Missing method to override.");if(!t)throw new Et("[array-override snippet]: Missing needle.");Tt||(Tt=new $t);let s=Be("array-override");const{mark:i,end:a}=We("array-override"),c=Je(arguments);if("push"!==e||Tt.has("push"))if("includes"!==e||Tt.has("includes")){if("forEach"===e&&!Tt.has("forEach")){i();const{forEach:e}=xt.prototype;Tt.set("forEach",Me([])),St.defineProperty(window.Array.prototype,"forEach",{value:l(e,(function(t,r){const n=Tt.get("forEach");return o(e,this,[function(e,i,a){for(const{needleRegex:t,pathSegments:r}of n)if(r.length||"string"!=typeof e&&"number"!=typeof e){if(r.length&&"object"==typeof e&&null!==e&&kt(e,t,r))return void s("success",`Array.forEach skipped callback for object containing needle: ${t}\nFILTER: array-override ${c}`)}else{const r=e.toString();if(r.match&&r.match(t))return void s("success",`Array.forEach skipped callback for item matching needle: ${t}\nFILTER: array-override ${c}`)}return o(t,r||this,[e,i,a])},r])}))}),s("info","Wrapped Array.prototype.forEach"),a()}}else{i();const{includes:e}=xt.prototype;Tt.set("includes",Me([])),St.defineProperty(window.Array.prototype,"includes",{value:l(e,(function(t){const r=Tt.get("includes");for(const{needleRegex:e,retVal:n,pathSegments:o}of r)if(o.length||"string"!=typeof t&&"number"!=typeof t){if(o.length&&"object"==typeof t&&null!==t&&kt(t,e,o))return s("success",`Array.includes returned ${n} for object containing ${e}\nFILTER: array-override ${c}`),n}else if(t.toString().match&&t.toString().match(e))return s("success",`Array.includes returned ${n} for ${e}\nFILTER: array-override ${c}`),n;return o(e,this,arguments)}))}),s("info","Wrapped Array.prototype.includes"),a()}else{i();const{push:e}=xt.prototype;Tt.set("push",Me([])),St.defineProperty(window.Array.prototype,"push",{value:l(e,(function(t){const r=Tt.get("push");for(const{needleRegex:e,pathSegments:n}of r)if(n.length||"string"!=typeof t&&"number"!=typeof t){if(n.length&&"object"==typeof t&&null!==t&&kt(t,e,n))return void s("success",`Array.push is ignored for object containing needle: ${e}\nFILTER: array-override ${c}`)}else{const r=t.toString();if(r.match&&r.match(e))return void s("success",`Array.push is ignored for needle: ${e}\nFILTER: array-override ${c}`)}return o(e,this,arguments)}))}),s("info","Wrapped Array.prototype.push"),a()}const u=Ge(t);let f=[];n&&(f=n.split("."));const p=Tt.get(e),d="true"===r;p.push({needleRegex:u,retVal:d,pathSegments:f}),Tt.set(e,p)},"cookie-remover":function(e,t=!1){if(!e)throw new jt("[cookie-remover snippet]: No cookie to remove.");const r=Je(arguments);let n=Be("cookie-remover");const{mark:o,end:s}=We("cookie-remover");let i=Ge(e);if(!Me(/^http|^about/).test(location.protocol))return void n("warn","Snippet only works for http or https and about.");function a(){return Me(Rt()).split(";").filter((e=>i.test(Me(e).split("=")[0])))}const c=()=>{n("info","Parsing cookies for matches"),o();for(const e of Me(a())){let t=Me(location.hostname);!t&&Me(location.ancestorOrigins)&&Me(location.ancestorOrigins[0])&&(t=new Mt(Me(location.ancestorOrigins[0])).hostname);const o=Me(e).split("=")[0],s="expires=Thu, 01 Jan 1970 00:00:00 GMT",i="path=/",a=t.split(".");for(let e=a.length;e>0;e--){const t=a.slice(a.length-e).join(".");Rt(`${Me(o).trim()}=;${s};${i};domain=${t}`),Rt(`${Me(o).trim()}=;${s};${i};domain=.${t}`),n("success",`Set expiration date on ${o}`,"\nFILTER: cookie-remover",r)}}s()};if(c(),t){let e=a();setInterval((()=>{let t=a();if(t!==e)try{c()}finally{e=t}}),1e3)}},profile:function(){Ne=!1},debug:function(){Ie=!0},"freeze-element":function(e,t="",...r){let n,s,a=!1,c=!1,l=Me(r).filter((e=>!h(e))),u=Me(r).filter((e=>h(e))).map(Ge),f=Xe(),p=Zt(e);!function(){let r=Me(t).split("+");1===r.length&&""===r[0]&&(r=[]);for(let t of r)switch(t){case"subtree":a=!0;break;case"abort":c=!0;break;default:throw new ar("[freeze] Unknown option passed to the snippet. [selector]: "+e+" [option]: "+t)}}();let d={selector:e,shouldAbort:c,rid:f,exceptionSelectors:l,regexExceptions:u,changeId:0};function h(e){return e.length>=2&&"/"==e[0]&&"/"==e[e.length-1]}function g(){s=p(),w(s,!1)}function w(e,t=!0){for(let r of e)sr.frozen.has(r)||(sr.frozen.set(r,d),!t&&a&&new cr((e=>{for(let t of Me(e))w(Me(t,"MutationRecord").addedNodes)})).observe(r,{childList:!0,subtree:!0}),a&&Me(r).nodeType===Qt&&w(Me(r).childNodes))}function y(e,...t){ze(`[freeze][${e}] `,...t)}function m(e,t,r,n){let o=n.selector,s=n.changeId,i="string"==typeof e,a=n.shouldAbort?"aborting":"watching";switch(or.groupCollapsed(`[freeze][${s}] ${a}: ${o}`),r){case"appendChild":case"append":case"prepend":case"insertBefore":case"replaceChild":case"insertAdjacentElement":case"insertAdjacentHTML":case"insertAdjacentText":case"innerHTML":case"outerHTML":y(s,i?"text: ":"node: ",e),y(s,"added to node: ",t);break;case"replaceWith":case"after":case"before":y(s,i?"text: ":"node: ",e),y(s,"added to node: ",Me(t).parentNode);break;case"textContent":case"innerText":case"nodeValue":y(s,"content of node: ",t),y(s,"changed to: ",e)}y(s,`using the function "${r}"`),or.groupEnd(),n.changeId++}function v(e,t){if(t)for(let r of t)if(r.test(e))return!0;return!1}function b(e){throw new ur(e)}function E(e,t,r,n){let o=new ir,{body:s}=Me(o.parseFromString(e,"text/html")),i=S(Me(s).childNodes,t,r,n);return Me(i).map((e=>{switch(Me(e).nodeType){case Qt:return Me(e).outerHTML;case er:return Me(e).textContent;default:return""}})).join("")}function S(e,t,r,n){let o=Me([]);for(let s of e)x(s,t,r,n)&&o.push(s);return o}function x(e,t,r,n){let o=n.shouldAbort,s=n.regexExceptions,i=n.exceptionSelectors,a=n.rid;if("string"==typeof e){let i=e;return!!v(i,s)||(De()&&m(i,t,r,n),o&&b(a),De())}let c=e;switch(Me(c).nodeType){case Qt:return!!function(e,t){if(t){let r=Me(e);for(let e of t)if(r.matches(e))return!0}return!1}(c,i)||(o&&(De()&&m(c,t,r,n),b(a)),!!De()&&(Yt(c),m(c,t,r,n),!0));case er:return!!v(Me(c).textContent,s)||(De()&&m(c,t,r,n),o&&b(a),!1);default:return!0}}function $(e,t,r,n){let s=fr(e,t)||{},a=s.get&&i(s.get,e)||s.value;if(a)return{get:()=>function(...e){if(r(this)){let r=n(this);if(r){let n=e[0];if(!x(n,this,t,r))return n}}return o(a,this,e)}}}function T(e,t,r,n){let s=fr(e,t)||{},a=s.get&&i(s.get,e)||s.value;if(a)return{get:()=>function(...e){if(!r(this))return o(a,this,e);let s=n(this);if(!s)return o(a,this,e);let i=S(e,this,t,s);return i.length>0?o(a,this,i):void 0}}}function k(e,t,r,n){let s=fr(e,t)||{},a=s.get&&i(s.get,e)||s.value;if(a)return{get:()=>function(...e){let[s,c]=e,l="afterbegin"===s||"beforeend"===s;if(r(this,l)){let e=n(this,l);if(e){let r,n=l?this:Me(this).parentNode;switch(t){case"insertAdjacentElement":if(!x(c,n,t,e))return c;break;case"insertAdjacentHTML":return r=E(c,n,t,e),r?i(a,this,s,r):void 0;case"insertAdjacentText":if(!x(c,n,t,e))return}}}return o(a,this,e)}}}function j(e,t,r,n){let o=fr(e,t)||{},{set:s}=o;if(s)return{set(e){if(!r(this))return i(s,this,e);let o=n(this);if(!o)return i(s,this,e);let a=E(e,this,t,o);return a?i(s,this,a):void 0}}}function M(e,t,r,n){let o=fr(e,t)||{},{set:s}=o;if(s)return{set(e){if(!r(this))return i(s,this,e);let o=n(this);return o?x(e,this,t,o)?i(s,this,e):void 0:i(s,this,e)}}}sr.frozen.has(document)||(sr.frozen.set(document,!0),function(){let e;function t(e){return e&&sr.frozen.has(e)}function r(e){try{return e&&(sr.frozen.has(e)||sr.frozen.has(Me(e).parentNode))}catch(e){return!1}}function n(e,t){try{return e&&(sr.frozen.has(e)&&t||sr.frozen.has(Me(e).parentNode)&&!t)}catch(e){return!1}}function o(e){return sr.frozen.get(e)}function s(e){try{if(sr.frozen.has(e))return sr.frozen.get(e);let t=Me(e).parentNode;return sr.frozen.get(t)}catch(e){}}function i(e,t){try{if(sr.frozen.has(e)&&t)return sr.frozen.get(e);let r=Me(e).parentNode;return sr.frozen.get(r)}catch(e){}}e=$(tr,"appendChild",t,o),ct(tr,"appendChild",e),e=$(tr,"insertBefore",t,o),ct(tr,"insertBefore",e),e=$(tr,"replaceChild",t,o),ct(tr,"replaceChild",e),e=T(rr,"append",t,o),ct(rr,"append",e),e=T(rr,"prepend",t,o),ct(rr,"prepend",e),e=T(rr,"replaceWith",r,s),ct(rr,"replaceWith",e),e=T(rr,"after",r,s),ct(rr,"after",e),e=T(rr,"before",r,s),ct(rr,"before",e),e=k(rr,"insertAdjacentElement",n,i),ct(rr,"insertAdjacentElement",e),e=k(rr,"insertAdjacentHTML",n,i),ct(rr,"insertAdjacentHTML",e),e=k(rr,"insertAdjacentText",n,i),ct(rr,"insertAdjacentText",e),e=j(rr,"innerHTML",t,o),ct(rr,"innerHTML",e),e=j(rr,"outerHTML",r,s),ct(rr,"outerHTML",e),e=M(tr,"textContent",t,o),ct(tr,"textContent",e),e=M(nr,"innerText",t,o),ct(nr,"innerText",e),e=M(tr,"nodeValue",t,o),ct(tr,"nodeValue",e)}()),n=new cr(g),n.observe(document,{childList:!0,subtree:!0}),g()},"hide-if-canvas-contains":function(e,t="canvas"){const r=Be("hide-if-canvas-contains"),n=Je(arguments),{mark:s,end:i}=We("hide-if-canvas-contains");if(!e)return void r("error","The parameter 'search' is required");if(!vr){s();const c=pr.prototype;function u(e){const t=c[e];wr.defineProperty(window.CanvasRenderingContext2D.prototype,e,{value:l(t,(function(n,...s){for(const[t,o]of vr)if(t.test(n)){const t=this.canvas;let s=Me(t).closest(o.selector);s&&!Er.has(s)?(Yt(s),Er.add(s),r("success","Matched: ",s,`\nFILTER: hide-if-canvas-contains ${o.formattedArguments}`)):Sr(t,o,e,n)}return o(t,this,[n,...s])}))})}r("info","CanvasRenderingContext2D proxied"),u("fillText"),u("strokeText"),vr=new hr;new gr((e=>{for(let t of Me(e))"childList"===t.type&&br.forEach((({canvasElement:e,rule:t,functionName:r,text:n})=>{let o=Me(e).closest(t.selector);o&&!Er.has(o)&&(Yt(o),Er.add(o),br.delete({canvasElement:e,rule:t,functionName:r,text:n}),Be("hide-if-canvas-contains")("success","Matched: ",o,`\nFILTER: hide-if-canvas-contains ${t.formattedArguments}`))}))})).observe(dr,{childList:!0,subtree:!0}),i()}const a=Ge(e);vr.set(a,{selector:t,formattedArguments:n})},"hide-if-shadow-contains":function(e,t="*"){const r=Je(arguments);let n=`${e}\\${t}`;Ar.has(n)||Ar.set(n,[Ge(e),t,He],r);const s=Be("hide-if-shadow-contains"),{mark:i,end:a}=We("hide-if-shadow-contains");Or||(Or=new $r((e=>{i();let t=new kr;for(let{target:n}of Me(e)){let e=Me(n).parentNode;for(;e;)[n,e]=[e,Me(n).parentNode];if(!Lr.has(n)&&!t.has(n)){t.add(n);for(let[e,t,o]of Ar.values())if(e.test(Me(n).textContent)){let e=Me(n.host).closest(t);e&&(o(),Me(n).appendChild(document.createElement("style")).textContent=":host {display: none !important}",Yt(e),Lr.add(n),s("success","Hiding: ",e,`\nFILTER: hide-if-shadow-contains ${r}`)),a()}}}})),Tr.defineProperty(Mr,"attachShadow",{value:l(Rr,(function(){let e=o(Rr,this,arguments);return s("info","attachShadow is called for: ",e),Or.observe(e,{childList:!0,characterData:!0,subtree:!0}),e}))}))},"json-override":function(e,t,r="",n=""){if(!e)throw new Cr("[json-override snippet]: Missing paths to override.");if(void 0===t)throw new Cr("[json-override snippet]: No value to override with.");if(!Fr){let i=Be("json-override");const{mark:a,end:c}=We("json-override");function u(e,t){for(let{formattedArgs:r,prune:n,needle:o,filter:s,value:i}of Fr.values())if(!s||s.test(t)){if(Me(o).some((t=>!ht(e,t))))return e;for(let t of n)t.includes("{}")||t.includes("[]")?f(e,t,i,r):p(e,t,i,r)}return e}function f(e,t,r,n){let o=Me(t).split("."),s=e;for(let e=0;e<o.length;e++){let a=o[e];if("[]"===a)return void(Pr.isArray(s)&&(i("info",`Iterating over array at: ${a}`),Me(s).forEach((t=>{null!=t&&f(t,o.slice(e+1).join("."),r,n)}))));if("{}"===a)return void(s&&"object"==typeof s&&(i("info",`Iterating over object at: ${a}`),Ir.keys(s).forEach((t=>{let i=s[t];null!=i&&f(i,o.slice(e+1).join("."),r,n)}))));if(!s||"object"!=typeof s||!m(s,a))return;e===o.length-1?(i("success",`Found ${t}, replaced it with ${r}`,`\nFILTER: json-override ${n}`),s[a]=wt(r)):s=s[a]}}function p(e,t,r,n){let o=ht(e,t);void 0!==o&&(i("success",`Found ${t}, replaced it with ${r}`,`\nFILTER: json-override ${n}`),o[0][o[1]]=wt(r))}a();let{parse:d}=Nr;Fr=new Wr,Ir.defineProperty(window.JSON,"parse",{value:l(d,(function(e){return u(o(d,this,arguments),e)}))}),i("info","Wrapped JSON.parse for override");let{json:h}=Dr.prototype;Ir.defineProperty(window.Response.prototype,"json",{value:l(h,(function(e){return o(h,this,arguments).then((t=>u(t,e)))}))}),i("info","Wrapped Response.json for override"),c()}const s=Je(arguments);Fr.set(e,{formattedArgs:s,prune:Me(e).split(/ +/),needle:r.length?Me(r).split(/ +/):[],filter:n?Ge(n):null,value:t})},"json-prune":function(e,t="",r=""){if(!e)throw new zr("Missing paths to prune");if(!Xr){let s=Be("json-prune");const{mark:i,end:a}=We("json-prune");function c(e){for(let{prune:t,needle:r,stackNeedle:n,formattedArgs:o}of Xr.values()){if(Me(r).length>0&&Me(r).some((t=>!ht(e,t))))return e;if(Me(n)&&Me(n).length>0&&!p(n))return e;for(let r of t)r.includes("{}")||r.includes("[]")?u(e,r,o):f(e,r,o)}return e}function u(e,t,r){let n=Me(t).split("."),o=e;for(let e=0;e<n.length;e++){let i=n[e];if("[]"===i)return void(Hr.isArray(o)&&(s("info",`Iterating over array at: ${i}`),Me(o).forEach((t=>u(t,n.slice(e+1).join("."),r)))));if("{}"===i)return void("object"==typeof o&&null!==o&&(s("info",`Iterating over object at: ${i}`),qr.keys(o).forEach((t=>u(o[t],n.slice(e+1).join("."),r)))));if(!o||"object"!=typeof o||!m(o,i))return;e===n.length-1?(s("success",`Found ${t} and deleted, \nFILTER: json-prune ${r}`),delete o[i]):o=o[i]}}function f(e,t,r){let n=ht(e,t);void 0!==n&&(s("success",`Found ${t} and deleted`,`\nFILTER: json-prune ${r}`),delete n[0][n[1]])}function p(e){if(!e)return!1;const t=Xe(),r=new zr(t),n=new Gr(self.location.href);n.hash="";const o=/(.*?@)?(\S+)(:\d+):\d+\)?$/,i=[];for(let e of r.stack.split(/[\n\r]+/)){if(Me(e).includes(t))continue;e=Me(e).trim();const r=Me(o).exec(e);if(null===r)continue;let s=r[2];Me(s).startsWith("(")&&(s=Me(s).slice(1)),s===n.href?s="inlineScript":Me(s).startsWith("<anonymous>")&&(s="injectedScript");let a=r[1]?Me(r[1]).slice(0,-1):Me(e).slice(0,Me(r).index).trim();Me(a).startsWith("at")&&(a=Me(a).slice(2).trim());let c=r[3];Me(i).push(" "+`${a} ${s}${c}:1`.trim())}i[0]="stackDepth:"+(i.length-1);const a=Me(i).join("\n");for(let t of e){if(Ge(t).test(a))return s("info",`Found needle in stack trace: ${t}`),!0;s("info",`Needle ${t} not found in stack trace: ${a}`)}}i();let{parse:d}=Br;Xr=new Ur,qr.defineProperty(window.JSON,"parse",{value:l(d,(function(){return c(o(d,this,arguments))}))}),s("info","Wrapped JSON.parse for prune");let{json:h}=Vr.prototype;qr.defineProperty(window.Response.prototype,"json",{value:l(h,(function(){return o(h,this,arguments).then((e=>c(e)))}))}),s("info","Wrapped Response.json for prune"),a()}const n=Je(arguments);Xr.set(e,{formattedArgs:n,prune:Me(e).split(/ +/),needle:t.length?Me(t).split(/ +/):[],stackNeedle:r.length?Me(r).split(/ +/):[]})},"override-property-read":function(e,t,r){if(!e)throw new Jr("[override-property-read snippet]: No property to override.");if(void 0===t)throw new Jr("[override-property-read snippet]: No value to override with.");const n=Je(arguments);let o=Be("override-property-read");const{mark:s,end:i}=We("override-property-read");let a=wt(t);o("info",`Overriding ${e}.`);const c=!("false"===r);s(),ct(window,e,{get:()=>(o("success",`${e} override done.`,"\nFILTER: override-property-read",n),a),set(){}},c),i()},"prevent-listener":function(e,t,r){if(!e)throw new _r("[prevent-listener snippet]: No event type.");if(!rn){rn=new Kr;let e=Be("[prevent]");const{mark:t,end:r}=We("prevent-listener");Yr.defineProperty(en,"addEventListener",{value:l(tn,(function(n,s){t();for(let{evt:t,handlers:r,selectors:o}of rn.values()){if(!t.test(n))continue;let a=this instanceof Element;for(let l=0;l<r.length;l++){const u=r[l],f=o[l];if(!f||a&&Me(this).matches(f)){if(u){const t=function(){try{const e=String("function"==typeof s?s:s.handleEvent);return u.test(e)}catch(t){return e("error","Error while trying to stringify listener: ",t),!1}};if(!function(){try{const e=i(Qr,"function"==typeof s?s:s.handleEvent);return u.test(e)}catch(t){return e("error","Error while trying to stringify listener: ",t),!1}}()&&!t())continue}return void(De()&&(Zr.groupCollapsed("DEBUG [prevent] was successful",`\nFILTER: prevent-listener ${c}`),e("success",`type: ${n} matching ${t}`),e("success","handler:",s),u&&e("success",`matching ${u}`),f&&e("success","on element: ",this,` matching ${f}`),e("success","was prevented from being added"),Zr.groupEnd()))}}}return r(),o(tn,this,arguments)}))}),e("info","Wrapped addEventListener")}const n=Je(arguments);rn.has(e)||rn.set(e,{evt:Ge(e),handlers:[],selectors:[],formattedArgs:n});let{handlers:s,selectors:a,formattedArgs:c}=rn.get(e);s.push(t?Ge(t):null),a.push(r)},"replace-fetch-response":function(e,t="",r=null){const n=Je(arguments),o=Be("replace-fetch-response"),{mark:s,end:i}=We("replace-fetch-response");if(!e)return void o("error","The parameter 'search' is required");if(!ln){const e=e=>{s();return Me(e).clone().text().then((t=>{let r=Me(t);for(const[e,{replacement:n,needle:s,formattedArgs:i}]of ln){if(s){if(!Ge(s).test(r)){De()&&(console.groupCollapsed(`DEBUG [replace-fetch-response] warn: '${s}' not found in fetch response`),o("warn",`${r}`),console.groupEnd());continue}De()&&(console.groupCollapsed(`DEBUG [replace-fetch-response] success: '${s}' found in fetch response`),o("info",`${r}`),console.groupEnd())}r=r.replace(e,n),De()&&r.toString()!==t.toString()&&(console.groupCollapsed(`DEBUG [replace-fetch-response] success: '${e}' replaced with '${n}' in fetch response`,`\nFILTER: replace-fetch-response ${i}`),o("success",`${r}`),console.groupEnd())}if(r.toString()===t.toString())return e;const n=new dn(r.toString(),{status:e.status,statusText:e.statusText,headers:e.headers});return fn.defineProperties(n,{ok:{value:e.ok},redirected:{value:e.redirected},type:{value:e.type},url:{value:e.url}}),i(),n}))};ln=new un,o("info","Network API proxied"),a=e,an.push(a),cn()}var a;const c=Ge(e),l=new pn(c,"g");ln.set(l,{replacement:t,needle:r,formattedArgs:n})},"replace-xhr-response":function(e,t="",r=null){const n=Je(arguments),o=Be("replace-xhr-response"),{mark:s,end:i}=We("replace-xhr-response");if(!e)return void o("error","The parameter 'pattern' is required");hn||(hn=new mn,gn=new Map,o("info","XMLHttpRequest proxied"),window.XMLHttpRequest=class extends yn{open(e,t,...r){const n={method:e,url:t};return hn.set(this,n),super.open(e,t,...r)}send(...e){return super.send(...e)}get response(){const e=super.response,t=hn.get(this);if(void 0===t)return e;s();const r="string"==typeof e?e.length:void 0;if(t.lastResponseLength!==r&&(t.response=void 0,t.lastResponseLength=r),void 0!==t.response)return t.response;if("string"!=typeof e)return t.response=e;let n=e;for(const[t,{replacement:r,needle:s,formattedArgs:i}]of gn){if(s){if(!Ge(s).test(n)){De()&&(console.groupCollapsed(`DEBUG [replace-xhr-response] warn: '${s}' not found in XHR response`),o("warn",n),console.groupEnd());continue}De()&&(console.groupCollapsed(`DEBUG [replace-xhr-response] success: '${s}' found in XHR response`),o("info",n),console.groupEnd())}n=Me(n).replace(t,r).toString(),De()&&e.toString()!==n.toString()&&(console.groupCollapsed(`DEBUG [replace-xhr-response] success: '${t}' replaced with '${r}' in XHR response`,`\nFILTER: replace-xhr-response ${i}`),o("success",n),console.groupEnd())}return i(),t.response=n.toString()}get responseText(){const e=this.response;return"string"!=typeof e?super.responseText:e}});const a=Ge(e),c=new wn(a,"g");gn.set(c,{replacement:t,needle:r,formattedArgs:n})},"strip-fetch-query-parameter":function(e,t=null){const r=Je(arguments),n=Be("strip-fetch-query-parameter"),{mark:o,end:s}=We("strip-fetch-query-parameter"),i=e=>{o();for(let[t,r]of vn.entries()){const{reg:o,args:s}=r;o&&!o.test(e)||En(e.searchParams,t)&&(n("success",`${t} has been stripped from url ${e}`,`\nFILTER: strip-fetch-query-parameter ${s}`),bn(e.searchParams,t))}s()};var a;vn||(vn=new Map,a=i,sn.push(a),cn()),vn.set(e,{reg:t&&Ge(t),args:r})},trace:function(...e){o(ze,null,e)}};
const snippets=Sn;
let context;
for (const [name, ...args] of filters) {
if (snippets.hasOwnProperty(name)) {
try { context = snippets[name].apply(context, args); }
catch (error) { console.error(error); }
}
}
context = void 0;
};
const main_graph = new Map([["abort-current-inline-script",null],["abort-on-iframe-property-read",null],["abort-on-iframe-property-write",null],["abort-on-property-read",null],["abort-on-property-write",null],["array-override",null],["cookie-remover",null],["profile",null],["debug",null],["freeze-element",null],["hide-if-canvas-contains",null],["hide-if-shadow-contains",null],["json-override",null],["json-prune",null],["override-property-read",null],["prevent-listener",null],["replace-fetch-response",null],["replace-xhr-response",null],["strip-fetch-query-parameter",null],["trace",null]]);
main_callback.get = snippet => main_graph.get(snippet);
main_callback.has = snippet => main_graph.has(snippet);
/* harmony default export */ const main = (main_callback);
;// CONCATENATED MODULE: ./node_modules/@eyeo/snippets/index.mjs






// EXTERNAL MODULE: ./adblock-betafish/alias/prefs.js
var prefs = __webpack_require__(2680);
;// CONCATENATED MODULE: ./adblock-betafish/alias/contentFiltering.js
/*
 * Same as the original source adblockpluschrome/lib/contentFiltering.js
 * except:
 * - updated require paths
 * - added fetch() of second snippet library
 */
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module contentFiltering */






async function start() {
  await prefs/* Prefs */.N.untilLoaded;

  ewe_api.snippets.setLibrary({
    injectedCode: main,
    isolatedCode: isolated_full,
  });
}


/***/ }),

/***/ 4761:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   K4: () => (/* binding */ resetBadgeText),
/* harmony export */   Vz: () => (/* binding */ NEW_BADGE_REASONS),
/* harmony export */   _7: () => (/* binding */ showIconBadgeCTA),
/* harmony export */   lq: () => (/* binding */ getNewBadgeTextReason)
/* harmony export */ });
/* unused harmony exports statsInIconKey, stopIconAnimation, startIconAnimation */
/* harmony import */ var info__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9336);
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_storage_tab_session_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1583);
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_allowlisting__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4336);
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_action__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(5557);
/* harmony import */ var _utilities_background_bg_functions_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(7656);
/* harmony import */ var _utilities_background_user_agent_info_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(7996);
/* harmony import */ var _utilities_background_index__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(199);
/*
 * Same as the original source adblockpluschrome/lib/icon.js
 * except:
 * - updated image file names from 'abp-' to 'ab-'
 * - updated the 'import' paths
 * - use the term 'whitelisted' instead of 'allowlisted' for now
 * - call renderIcons() at the end of the module for all platforms,
 *   not just Chromium
 * - added the showIconBadgeCTA, getNewBadgeTextReason functions
 */
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module icon */











const ANIMATION_LOOPS = 3;
const FRAME_IN_MS = 100;

const statsInIconKey = "current_show_statsinicon";

let frameOpacities = calculateFrameOpacities(9, 7);
let frameOpacitiesCritical = calculateFrameOpacities(5, 3);

let stopRequested = false;
let canUpdateIcon = true;
let notRunning = Promise.resolve();
let allowlistedByPage = new _adblockplusui_adblockpluschrome_lib_storage_tab_session_js__WEBPACK_IMPORTED_MODULE_1__/* .TabSessionStorage */ .b("icon:allowlisted");

let icons = [null, null];

function easeOut(progress) {
  // This is merely an approximation to the built-in ease-out timing function
  // https://css-tricks.com/emulating-css-timing-functions-javascript/
  return 1 - Math.pow(1 - progress, 1.675);
}

function calculateFrameOpacities(keyframeFrames, transitionFrames) {
  let opacities = [];

  // Show second half of first keyframe
  // Omit first frame because it's only shown after the first timeout
  for (let i = 0; i < keyframeFrames / 2 - 1; i++) opacities.push(0);
  // Transition from first to second keyframe
  for (let i = 0; i < transitionFrames; i++)
    opacities.push(easeOut((i + 1) / (transitionFrames + 1)));
  // Show second keyframe
  for (let i = 0; i < keyframeFrames; i++) opacities.push(1);
  // Transition from second to first keyframe
  for (let i = 0; i < transitionFrames; i++)
    opacities.push(easeOut((transitionFrames - i) / (transitionFrames + 1)));
  // Show first half of first keyframe
  // Omit last frame due to an additional timeout that resets the icon
  for (let i = 0; i < keyframeFrames / 2 - 1; i++) opacities.push(0);

  return opacities;
}

async function loadImage(url) {
  let response = await fetch(url);
  let blob = await response.blob();
  return createImageBitmap(blob);
}

async function renderIcons() {
  let paths = [
    "icons/ab-16.png",
    "icons/ab-16-whitelisted.png",
    "icons/ab-32.png",
    "icons/ab-32-whitelisted.png",
  ];

  for (let path of paths) {
    let image = await loadImage(path);
    let [, size, allowlisted] = /\/ab-(16|32)(-whitelisted)?\./.exec(path);

    let canvas = new OffscreenCanvas(size, size);
    let context = canvas.getContext("2d");
    let imageData = icons[!!allowlisted | 0] || {};

    context.globalAlpha = 1;
    context.drawImage(image, 0, 0);
    imageData[size] = context.getImageData(0, 0, size, size);

    icons[!!allowlisted | 0] = imageData;
  }
}

async function setIcon(page, opacity, frames) {
  opacity = opacity || 0;
  let allowlisted = !!(await allowlistedByPage.get(page.id));

  if (!frames) {
    if (opacity > 0.5) {
      (0,_adblockplusui_adblockpluschrome_lib_action__WEBPACK_IMPORTED_MODULE_3__/* .setIconPath */ .lK)(page.id, "/icons/ab-$size-notification.png");
    } else if (icons[allowlisted | 0]) {
      (0,_adblockplusui_adblockpluschrome_lib_action__WEBPACK_IMPORTED_MODULE_3__/* .setIconImageData */ .pT)(page.id, icons[allowlisted | 0]);
    } else {
      (0,_adblockplusui_adblockpluschrome_lib_action__WEBPACK_IMPORTED_MODULE_3__/* .setIconPath */ .lK)(page.id, "/icons/ab-$size" + (allowlisted ? "-allowlisted" : "") + ".png");
    }
  } else {
    browser.action.setIcon({
      tabId: page.id,
      imageData: frames["" + opacity + allowlisted],
    });
  }
}

_adblockplusui_adblockpluschrome_lib_allowlisting__WEBPACK_IMPORTED_MODULE_2__/* .allowlistingState */ .v.addListener("changed", (page, isAllowlisted) => {
  void allowlistedByPage.transaction(async () => {
    const wasAllowlisted = await allowlistedByPage.get(page.id);
    if (wasAllowlisted === isAllowlisted) return;

    await allowlistedByPage.setFlag(page.id, isAllowlisted);
    if (canUpdateIcon) await setIcon(page);
  });
});

async function renderFrames(opacities) {
  let images = await Promise.all([
    loadImage("icons/ab-16.png"),
    loadImage("icons/ab-16-whitelisted.png"),
    loadImage("icons/ab-16-whitelisted.png"),
    loadImage("icons/ab-20.png"),
    loadImage("icons/ab-20-whitelisted.png"),
    loadImage("icons/ab-20-whitelisted.png"),
    loadImage("icons/ab-32.png"),
    loadImage("icons/ab-32-whitelisted.png"),
    loadImage("icons/ab-32-whitelisted.png"),
    loadImage("icons/ab-40.png"),
    loadImage("icons/ab-40-whitelisted.png"),
    loadImage("icons/ab-40-whitelisted.png"),
  ]);
  opacities = new Set(opacities);
  let imageMap = {
    16: { base: [images[0], images[1]], overlay: images[2] },
    20: { base: [images[3], images[4]], overlay: images[5] },
    32: { base: [images[6], images[7]], overlay: images[8] },
    40: { base: [images[9], images[10]], overlay: images[11] },
  };

  let frames = {};
  let canvas = new OffscreenCanvas(0, 0);
  let context = canvas.getContext("2d");

  for (let allowlisted of [false, true]) {
    for (let opacity of opacities) {
      let imageData = {};
      let sizes = [16, 20, 32, 40];
      for (let size of sizes) {
        canvas.width = size;
        canvas.height = size;
        context.globalAlpha = 1;
        context.drawImage(imageMap[size]["base"][allowlisted | 0], 0, 0);
        context.globalAlpha = opacity;
        context.drawImage(imageMap[size]["overlay"], 0, 0);
        imageData[size] = context.getImageData(0, 0, size, size);
      }
      frames["" + opacity + allowlisted] = imageData;
    }
  }

  return frames;
}

async function animateIcon(opacities, frames) {
  let tabs = await browser.tabs.query({ active: true });
  let pages = tabs.map((tab) => new ext.Page(tab));

  let animationLoop = 0;
  let animationStep = 0;
  let numberOfFrames = opacities.length;
  let opacity = 0;

  let onActivated = async (page) => {
    pages.push(page);
    await setIcon(page, opacity, frames);
    toggleBadge(page.id, true);
  };
  ext.pages.onActivated.addListener(onActivated);

  canUpdateIcon = false;
  for (let page of pages) toggleBadge(page.id, true);
  return new Promise((resolve, reject) => {
    let interval = setInterval(async () => {
      let oldOpacity = opacity;
      opacity = opacities[animationStep++];

      if (opacity != oldOpacity) {
        for (let page of pages) {
          if (await allowlistedByPage.has(page.id)) await setIcon(page, opacity, frames);
        }
      }

      if (animationStep > numberOfFrames) {
        if (++animationLoop > ANIMATION_LOOPS - 1 || stopRequested) {
          clearInterval(interval);
          ext.pages.onActivated.removeListener(onActivated);
          for (let page of pages) toggleBadge(page.id, false);
          canUpdateIcon = true;
          resolve();
        } else {
          animationStep = 0;
        }
      }
    }, FRAME_IN_MS);
  });
}

/**
 * Stops to animate the browser action icon
 * after the current interval has been finished.
 *
 * @return {Promise} A promise that is fullfilled when
 *                   the icon animation has been stopped.
 */
async function stopIconAnimation() {
  stopRequested = true;
  await notRunning;
  stopRequested = false;
}

/**
 * Starts to animate the browser action icon to indicate a pending notifcation.
 * If the icon is already animated, it replaces the previous
 * animation as soon as the current interval has been finished.
 *
 * @param {string} type  The notification type (i.e: "information" or
 *                       "critical".)
 */
function startIconAnimation(type) {
  let opacities = frameOpacities;
  if (type == "critical") opacities = frameOpacitiesCritical;

  notRunning = Promise.all([renderFrames(opacities), stopIconAnimation()]).then((results) => {
    if (stopRequested) return;

    let frames = results[0];
    return animateIcon(opacities, frames);
  });
}

renderIcons();

/**
 * Returns the Object containing all of the reasons the text on the toolbar icon / badge is 'new'
 *
 */
const NEW_BADGE_REASONS = {
  FREE_DC_UPDATE: "free dc update",
  SEVEN_DAY: "seven day",
  UPDATE: "update",
  UPDATE_FOR_EVERYONE: "update including premium",
  VPN_CTA: "vpn cta",
};

/**
 * Handles the display of the New badge on the toolbar icon.
 * @param {Boolean} [showBadge] true shows the badge, false removes the badge
 */

let newBadgeTextReason = "";

function setNewText(badgeTextDetails, reason = "") {
  // process all currently opened tabs
  browser.tabs.query({}).then((tabs) => {
    for (const tab of tabs) {
      if (tab.url && tab.url.startsWith("http")) {
        (0,_adblockplusui_adblockpluschrome_lib_action__WEBPACK_IMPORTED_MODULE_3__/* .setBadge */ .Wb)(tab.id, badgeTextDetails);
        newBadgeTextReason = reason;
      }
    }
  });
}

async function resetBadgeText() {
  // Restore show_statsinicon if we previously stored its value
  const storedValue = await (0,_utilities_background_bg_functions_js__WEBPACK_IMPORTED_MODULE_4__/* .chromeStorageGetHelper */ .s3)(statsInIconKey);

  if (typeof storedValue === "boolean") {
    Prefs.show_statsinicon = storedValue;
    (0,_utilities_background_bg_functions_js__WEBPACK_IMPORTED_MODULE_4__/* .chromeStorageDeleteHelper */ .PM)(statsInIconKey); // remove the data, since we no longer need it
    setNewText({ number: "" });
  }
}

function getBadgeText(userAgent) {
  // Firefox badge cutting off at 2.5 chars, so let's use an emoji
  if (userAgent === _utilities_background_user_agent_info_types__WEBPACK_IMPORTED_MODULE_5__/* .FlavorType */ .z.firefox) {
    return "";
  }

  const text = browser.i18n.getMessage("new_badge");

  if (text.length < 5) {
    return text.toUpperCase();
  }

  return "New".toUpperCase();
}

async function checkLicenseCTA() {
  await License.ready();
  return License.shouldShowPremiumCTA();
}

async function showIconBadgeCTA(reason) {
  const showCTA = reason === NEW_BADGE_REASONS.UPDATE_FOR_EVERYONE || (await checkLicenseCTA());

  if (!showCTA) {
    return;
  }

  const storedValue = await (0,_utilities_background_bg_functions_js__WEBPACK_IMPORTED_MODULE_4__/* .chromeStorageGetHelper */ .s3)(statsInIconKey);
  if (!storedValue) {
    // don't overwrite the original, saved value
    (0,_utilities_background_bg_functions_js__WEBPACK_IMPORTED_MODULE_4__/* .chromeStorageSetHelper */ .AX)(statsInIconKey, Prefs.show_statsinicon);
  }

  Prefs.show_statsinicon = false;

  const { flavor } = (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_6__.getUserAgentInfo)();
  const badgeTextDetails = {
    color: "#093aec",
    number: getBadgeText(flavor),
  };

  // wait 10 seconds to allow any other tasks to finish
  setTimeout(setNewText.bind(this, badgeTextDetails, reason), 10_000);
}

/**
 * Returns the String reason the text on the toolbar icon / badge is 'new'
 *
 */
function getNewBadgeTextReason() {
  return newBadgeTextReason;
}


/***/ }),

/***/ 8691:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */



browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (message.command !== "parseFilter" || !message.filterTextToParse) {
    return;
  }
  sendResponse(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.validate(message.filterTextToParse));
});


/***/ }),

/***/ 2680:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   N: () => (/* binding */ Prefs)
/* harmony export */ });
/* harmony import */ var info__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9336);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_messaging_events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4299);
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_messaging_port_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(297);
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_events_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(866);
/* harmony import */ var _ipm_background_command_library_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(6122);
/* harmony import */ var _ipm_background_data_collection_types__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4702);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module prefs */














const keyPrefix = "pref:";

let eventEmitter = new _adblockplusui_adblockpluschrome_lib_events_js__WEBPACK_IMPORTED_MODULE_6__/* .EventEmitter */ .b();
let overrides = Object.create(null);

/** @lends module:prefs.Prefs */
let defaults = Object.create(null);

/**
 * Public keys used to verify authenticity of partners that are authorized to
 * use the allowlisting API.
 *
 * @type {string[]}
 */
defaults.allowlisting_authorizedKeys = [
  // Readership Link public key
  // https://gitlab.com/adblockinc/ext/adblock/adblock/-/issues/371
  `MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAwWP4dO4iYcHpcO6lVmjC
gg/jfLM4fP+wWNaoDvMke0gQ7m9smXVtgbYXb6qzEd0aDaCRX3em+eo6bWp6ps5U
+8USRxuNH4cs6ZLjGynmZnm2TXrJScixUEw4ULq8Rdexr4ZmtT1WfUjJSFQpWWwp
e69kVR0iwwiCFRq90I/7MfJWnwgHX2tkUkVBttmXt9o0wP8th/UOIdx+0VbrqhgY
wMyo3xCUvqcSpcKsHXoLkKGlpcplE96rKg2vOqhSSQzoHMr8ZrGIn7hsPI7enVsP
D/nMiJptavVowfNZjM/rd6Iv/TYfI1JOJWUeIM+aPyhZKrvWHGdC8VO2jneNkNXj
1B6tnZy6owPt4Lgdimr0u/146WvjAL+ZK1dc4CNecOLeRINn26POCIeOpYPHGhbi
N6K1UrHpC1Oon2NW5ms9dciE242O1BrQF5j/GvNzGoV74GvnbVFZ9eyBJm9MlIOU
Sd5O2iTqWPmJ03wVSXLx+6g0fgaGHEDtKtbfhuHvDG2dIoAB7q+oKBHQJ7CIFEbI
lBnPV1v+dxDLb3DdK0Ip9wM74S2+Nf9359TCjAaWgNjiTnhBw6xpwTGn/8vzNL3p
fcEVJJt8DUfuCYV9mtKPHbj06RHnLsaXQ72x6I+ocXi8TygTjldZFx13ttJqVvju
UaTE0E4KN9Mzb/2zEYTgCzcCAwEAAQ==`,
];

/**
 * Public keys used to verify authenticity of entities that are authorized to
 * use the bypass API.
 *
 * @type {string[]}
 */
defaults.bypass_authorizedKeys = [
  // Readership Link public key
  // https://eyeo.atlassian.net/browse/EXT-30
  `MIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAt7CNJC8ntgHa4GviCdeV
f1sSIJMI73rDvUcGPS0u/SlJCoE0v71q76b6pEJd7Znztxiyfx9SePM+uaCZKpfm
2sXx/vOfOXDsSDGyUq0a3vj/kNtIaLEhoaZ+uYYBQV995BfQ/qOUgkFNimyfwzYg
+chyXqEvwjjqRQ5cWOUmK4lQoAr+OJXmoq9KHSK6TnW7gHZrm5CUhN9TR2DRv9io
DiVTDIcbBh7KpvN4o/gp+x+oCbh3sWtucweu9fhUwKvlqoO24xuMfLQJ+iSShy5z
gKfWCEcQoOYARsV5pTsOKo8u3e2bbc/D5rCKTOqG3vSkafaxLLyskUz9zEm+gkOO
PMF/M0BZIZ8gPzz+YlOr9qGvLfV9XiagIpF/sPxi86f7TPlMGnOi4N4PT5eMaFtK
tfy2y3PJZN9cxAOitFjtXlllPsDbu9VAERfSCCZgHM7QY+GqQKrMcaHC3tNGhcve
GhL5A8p+PLLu8msHcc11DmmDgNVVamRggk3h5STbJP+TkgoZ1BoAYPStjF+xzvCj
UnIc1wA9sRfRNPcW+fVjOFkAF99sqew6zqL3gwmMdHdd9iVUHx7yyLkJOwJhzM5n
I51tXMpSOPPNheNGfAY7b8xGGv8M3SgoLg+dtKAV1mjyFftZ/9KP2+82Hgu+QNAX
9OLtuZ8eT/2idUzy2F+u17cCAwEAAQ==`,
];

/**
 * The application version as set during initialization. Used to detect updates.
 *
 * @type {string}
 */
defaults.currentVersion = "";
/**
 * @see https://adblockplus.org/en/preferences#documentation_link
 * @type {string}
 */
defaults.documentation_link = "https://adblockplus.org/redirect?link=%LINK%&lang=%LANG%";
/**
 * The total number of requests blocked by the extension.
 *
 * @type {number}
 */
defaults.blocked_total = 0;

/**
 * Whether to show a badge in the toolbar icon indicating the number
 * of blocked ads.
 *
 * @type {boolean}
 */
defaults.show_statsinicon = true;
/**
 * Whether to show the "Block element" context menu entry.
 *
 * @type {boolean}
 */
defaults.shouldShowBlockElementMenu = true;

/**
 * Whether to show tracking warning in options page when both
 * Acceptable Ads and subscription of type "Privacy" are enabled.
 *
 * @type {boolean}
 */
defaults.ui_warn_tracking = true;

/**
 * Whether to show the developer tools panel.
 *
 * @type {boolean}
 */
defaults.show_devtools_panel = true;

/**
 * Whether the global data collection opt out is enabled or not.
 *
 * @type {boolean}
 */
defaults.data_collection_opt_out = false;

/**
 * Prevents unsolicited UI elements from showing up after installation. This
 * preference isn't set by the extension but can be pre-configured externally.
 *
 * @see https://adblockplus.org/development-builds/suppressing-the-first-run-page-on-chrome
 * @type {boolean}
 */
defaults.suppress_first_run_page = false;

/**
 * Additonal subscriptions to be automatically added when the extension is
 * loaded. This preference isn't set by the extension but can be pre-configured
 * externally.
 *
 * @type {string[]}
 */
defaults.additional_subscriptions = [];

/**
 * The version of major updates that the user is aware of. If it's too low,
 * the updates page will be shown to inform the user about intermediate changes.
 *
 * @type {number}
 */
defaults.last_updates_page_displayed = 0;

/**
 * Causes elements targeted by element hiding (and element hiding emulation)
 * to be highlighted instead of hidden.
 *
 * @type {boolean}
 */
defaults.elemhide_debug = false;

/**
 * Whether to recommend language filter lists to user.
 *
 * @type {boolean}
 */
defaults.recommend_language_subscriptions = false;

/**
 * Premium user ID
 *
 * @type {string}
 */
defaults.premium_user_id = "";

/**
 * Map of commands
 *
 * @type {Object}
 */
defaults.ipm_commands = {};

/**
 * TODO: Remove this after new IPM initialization is enabled and reaches the
 * majority of users. See: https://eyeo.atlassian.net/browse/IM-244
 * Whether the IPM commands have been reset.
 *
 * @type {boolean}
 */
defaults.ipm_commands_second_reset_completed = false;

/**
 * Map of command stats
 *
 * @type {Object}
 */
defaults[_ipm_background_command_library_types__WEBPACK_IMPORTED_MODULE_4__/* .commandStats */ .Nk] = {};

/**
 * Default trusted origin for URLs used in IPMs. This is the base URL used when
 * a relative URL is passed.
 *
 * @type {string}
 */
defaults.ipm_default_origin = "https://getadblock.com";

/**
 * Trusted origins for URLs used in IPMs
 *
 * @type {string[]}
 */
defaults.ipm_safe_origins = [
  defaults.ipm_default_origin,
  "https://blog.getadblock.com",
  "https://helpcenter.getadblock.com",
  "https://vpn.getadblock.com",
];

/**
 * Minimum log level
 *
 * @type {number}
 */
defaults.logger_log_level = 3;

/**
 * Map of command stats
 *
 * @type {Object}
 */
defaults.onpage_dialog_command_stats = {};

/**
 * The timestamp of the last time we showed a dialog.
 */
defaults.onpage_dialog_last_shown = 0;

/**
 * The minimum amount of time between two dialogs being shown.
 */
defaults.onpage_dialog_cool_down = 24 * 60 * 60 * 1000;

/**
 * The timestamp of the last time we opened a new tab.
 */
defaults.new_tab_last_shown = 0;

/**
 * The minimum amount of time between two new tabs being opened.
 */
defaults.new_tab_cool_down = 24 * 60 * 60 * 1000;

/**
 * Map of on-page dialog timing configurations
 *
 * @type {Object}
 */
defaults.onpage_dialog_timing_configurations = {
  after_web_allowlisting: {
    cooldownDuration: 24,
    maxAllowlistingDelay: 2,
    maxDisplayCount: 3,
  },
  immediate: {
    cooldownDuration: 0,
    maxDisplayCount: 0,
  },
  revisit_web_allowlisted_site: {
    cooldownDuration: 48,
    maxDisplayCount: 3,
    minAllowlistingDelay: 48 * 60,
  },
  after_navigation: {
    cooldownDuration: 1,
    maxDisplayCount: 1,
  },
  cookie_banner: {
    cooldownDuration: 1,
    maxDisplayCount: 1,
  },
};

/**
 * Map of IPM user events
 *
 * @type {Object}
 */
defaults[_ipm_background_data_collection_types__WEBPACK_IMPORTED_MODULE_5__/* .eventStorageKey */ .tz] = [];

/**
 * The URL of the IPM server.
 *
 * @type {string}
 */
defaults.ipm_server_url = "https://ipm.adblock.dev/api/stats";

/**
 * The URL of the Ping server.
 *
 * @type {string}
 */
defaults.ping_server_url = "https://ping.getadblock.com/stats/";

/**
 * The URL of the backup Ping server.
 *
 * @type {string}
 */
defaults.backup_ping_server_url = "https://ping-retry.getadblock.com/stats/";

/**
 * Whether to send ad wall related log event messages
 *
 * @type {boolean}
 */
defaults.send_ad_wall_messages = true;

/**
 * Where the dialog for the YouTube wall should link users to
 *
 * @type {string}
 */
defaults.yt_auto_allow_dialog_url = "https://getadblock.com/youtube/";

/**
 * Start date (as a number) to start auto allowing YT
 *
 * @type {Number}
 */
defaults.yt_allowlist_start_date = 0;

/**
 * The number of milliseconds to extend the allowlisting filter's expiry when
 * the user navigated to a URL that matches the filter.
 *
 * @type {number}
 */
defaults.allowlisting_auto_extend_ms = 1000 * 60 * 60 * 24 * 7; // 7 days

/**
 * Whether all historic allowlisting filters with "popup" source were
 * transitioned to smart allowlisting
 * @type {boolean}
 */
defaults.migration_popup_to_smart_allowlist_complete = false;

/**
 * Whether all historic allowlisting filters were transitioned to smart allowlisting
 * no matter the source (except for "web" source).
 * @type {boolean}
 */
defaults.migration_all_to_smart_allowlist_complete = false;

/**
 * The interval in which to ping the other extension, in ms. Defaults to 24 hours.
 *
 * @type {number}
 */
defaults.pd_ping_interval = 24 * 60 * 60 * 1000;

/**
 * The timestamp of the last attempt to ping other partner extensions
 *
 * @type {number}
 */
defaults.pd_last_ping = 0;

/**
 * An object that indicates:
 *  - the extension ID of the ad blocking or partner extensions that were found installed on this device
 *  - the local timestamp when they were detected
 *
 * @type {Object}
 */
defaults.partnerExtensionFound = {
  extesnionsIdsFound: [],
  detectionTimestamp: 0,
};

/**
 * List of request URLs for which pageview metrics should be recorded
 *
 * @type {string[]}
 */
defaults.pageviewMetrics_requestUrls = ["*://btloader.com/tag?*"];

/**
 * A timestamp that indicates when was the last time when ubo was found on this device
 *
 * @type {number}
 */
defaults.uboDetected = 0;

/**
 * A timestamp that indicates when was the last time when ubo detection was tun
 *
 * @type {number}
 */
defaults.uboDetectionLastRun = 0;

/**
 * @namespace
 * @static
 */
let Prefs = {
  /**
   * Retrieves the given preference.
   *
   * @param {string} preference
   * @return {any}
   */
  get(preference) {
    // We need to temporarily force-disable data collection in Firefox, while
    // we're working on improving our data collection opt-out mechanism based
    // on Mozilla's requirements
    // https://gitlab.com/adblockinc/ext/adblock/adblock/-/issues/574
    if (
      preference === "data_collection_opt_out" &&
      // We cannot use info.application, because it's determined asynchronously,
      // and this function may already be called earlier than that. So in the
      // absence of a reliable initialization strategy, we can use info.platform
      // to target Firefox users.
      info__WEBPACK_IMPORTED_MODULE_0__.platform === "gecko"
    ) {
      return true;
    }

    let result = (preference in overrides ? overrides : defaults)[preference];

    // Object preferences are mutable, so we need to clone them to avoid
    // accidentally modifying the preference when modifying the object
    if (typeof result === "object") result = JSON.parse(JSON.stringify(result));

    return result;
  },

  /**
   * Resets the given preference to its default value.
   *
   * @param {string} preference
   * @return {Promise} A promise that resolves when the underlying
                       browser.storage.local.set/remove() operation completes
   */
  reset(preference) {
    return Prefs.set(preference, defaults[preference]);
  },

  /**
   * Sets the given preference.
   *
   * @param {string} preference
   * @param {any}    value
   * @return {Promise} A promise that resolves when the underlying
                       browser.storage.local.set/remove() operation completes
   */
  set(preference, value) {
    let defaultValue = defaults[preference];

    if (typeof value != typeof defaultValue) throw new Error("Attempt to change preference type");

    if (value == defaultValue) {
      let oldValue = overrides[preference];
      delete overrides[preference];

      // Firefox 66 fails to emit storage.local.onChanged events for falsey
      // values. https://bugzilla.mozilla.org/show_bug.cgi?id=1541449
      if (!oldValue && info__WEBPACK_IMPORTED_MODULE_0__.platform == "gecko" && parseInt(info__WEBPACK_IMPORTED_MODULE_0__.platformVersion, 10) == 66)
        onStorageChanged({ [prefToKey(preference)]: { oldValue } }, "local");

      return browser.storage.local.remove(prefToKey(preference));
    }

    overrides[preference] = value;
    return (customSave.get(preference) || savePref)(preference);
  },

  /**
   * Adds a callback that is called when the
   * value of a specified preference changed.
   *
   * @param {string}   preference
   * @param {function} callback
   */
  on(preference, callback) {
    eventEmitter.on(preference, callback);
  },

  /**
   * Removes a callback for the specified preference.
   *
   * @param {string}   preference
   * @param {function} callback
   */
  off(preference, callback) {
    eventEmitter.off(preference, callback);
  },

  /**
   * Reads the documentation_link preference and substitutes placeholders.
   *
   * @param {string} linkID
   * @return {string}
   */
  getDocLink(linkID) {
    return this.documentation_link
      .replace(/%LINK%/g, linkID)
      .replace(/%LANG%/g, browser.i18n.getUILanguage());
  },

  /**
   * A promise that is fullfilled when all preferences have been loaded.
   * Wait for this promise to be fulfilled before using preferences during
   * extension initialization.
   *
   * @type {Promise}
   */
  untilLoaded: null,
};

function keyToPref(key) {
  if (key.indexOf(keyPrefix) != 0) return null;

  return key.substr(keyPrefix.length);
}

function prefToKey(pref) {
  return keyPrefix + pref;
}

function savePref(pref) {
  return browser.storage.local.set({ [prefToKey(pref)]: overrides[pref] });
}

let customSave = new Map();
if (info__WEBPACK_IMPORTED_MODULE_0__.platform == "gecko" && parseInt(info__WEBPACK_IMPORTED_MODULE_0__.platformVersion, 10) < 66) {
  // Saving one storage value causes all others to be saved as well for
  // Firefox versions <66. Make sure that updating ad counter doesn't cause
  // the filters data to be saved frequently as a side-effect.
  let promise = null;
  customSave.set("blocked_total", (pref) => {
    if (!promise) {
      promise = new Promise((resolve, reject) => {
        setTimeout(() => {
          promise = null;
          savePref(pref).then(resolve, reject);
        }, 60 * 1000);
      });
    }
    return promise;
  });
}

function addPreference(pref) {
  Object.defineProperty(Prefs, pref, {
    get() {
      return Prefs.get(pref);
    },
    set(value) {
      Prefs.set(pref, value);
    },
    enumerable: true,
  });
}

function onStorageChanged(changes) {
  for (let key in changes) {
    let pref = keyToPref(key);
    if (pref && pref in defaults) {
      let change = changes[key];
      if ("newValue" in change && change.newValue != defaults[pref])
        overrides[pref] = change.newValue;
      else delete overrides[pref];

      eventEmitter.emit(pref);
    }
  }
}

async function init() {
  let prefs = Object.keys(defaults);
  prefs.forEach(addPreference);

  let isEdgeChromium = info__WEBPACK_IMPORTED_MODULE_0__.application == "edge" && info__WEBPACK_IMPORTED_MODULE_0__.platform == "chromium";

  // When upgrading from EdgeHTML to Edge Chromium (v79) data stored in
  // browser.storage.local gets corrupted.
  // To fix it, we have to call JSON.parse twice.
  // See: https://gitlab.com/eyeo/adblockplus/adblockpluschrome/issues/152
  if (isEdgeChromium) {
    let items = await browser.storage.local.get(null);

    let fixedItems = {};
    for (let key in items) {
      if (typeof items[key] == "string") {
        try {
          fixedItems[key] = JSON.parse(JSON.parse(items[key]));
        } catch (e) {}
      }
    }

    await browser.storage.local.set(fixedItems);
  }

  {
    let items = await browser.storage.local.get(prefs.map(prefToKey));
    for (let key in items) overrides[keyToPref(key)] = items[key];
  }

  if ("managed" in browser.storage) {
    try {
      let items = await browser.storage.managed.get(null);
      for (let key in items) defaults[key] = items[key];
    } catch (e) {
      // Opera doesn't support browser.storage.managed, but instead of simply
      // removing the API, it gives an asynchronous error which we ignore here.
    }
  }

  browser.storage.onChanged.addListener(onStorageChanged);

  // Initialize notifications_ignoredcategories pseudo preference
  Object.defineProperty(Prefs, "notifications_ignoredcategories", {
    get() {
      return _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.notifications.getIgnoredCategories();
    },
    set(value) {
      _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.notifications.toggleIgnoreCategory("*", !!value);
    },
    enumerable: true,
  });

  _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.notifications.on("ignored-category-added", () =>
    eventEmitter.emit("notifications_ignoredcategories"),
  );
  _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.notifications.on("ignored-category-removed", () =>
    eventEmitter.emit("notifications_ignoredcategories"),
  );
}

Prefs.untilLoaded = init();

/**
 * Returns the value of the given preference key.
 *
 * @event "prefs.get"
 * @property {string} key - The preference key.
 * @returns {string|string[]|number|boolean}
 */
_adblockplusui_adblockpluschrome_lib_messaging_port_js__WEBPACK_IMPORTED_MODULE_3__/* .port */ .O.on("prefs.get", (message, sender) => Prefs[message.key]);

/**
 * Sets the value of the given preference key to the given value.
 *
 * @event "prefs.set"
 * @property {string} key - The preference key.
 * @property {string} value - The value to set.
 * @returns {string|string[]|number|boolean|undefined}
 */
_adblockplusui_adblockpluschrome_lib_messaging_port_js__WEBPACK_IMPORTED_MODULE_3__/* .port */ .O.on("prefs.set", async (message, sender) => (Prefs[message.key] = message.value));

/**
 * Toggles the value of the given preference key.
 *
 * @event "prefs.toggle"
 * @property {string} key - The preference key
 * @returns {?boolean}
 */
_adblockplusui_adblockpluschrome_lib_messaging_port_js__WEBPACK_IMPORTED_MODULE_3__/* .port */ .O.on("prefs.toggle", async (message, sender) => {
  if (message.key == "notifications_ignoredcategories")
    return _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.notifications.toggleIgnoreCategory("*");

  return (Prefs[message.key] = !Prefs[message.key]);
});

/**
 * Returns a link to a page on our website, in the user's locale if possible.
 *
 * @event "prefs.getDocLink"
 * @property {string} link
 *   The link ID to generate the doc link for.
 * @returns {string}
 */
_adblockplusui_adblockpluschrome_lib_messaging_port_js__WEBPACK_IMPORTED_MODULE_3__/* .port */ .O.on("prefs.getDocLink", (message, sender) => {
  let { application, platform } = info__WEBPACK_IMPORTED_MODULE_0__;
  if (platform == "chromium" && application != "opera" && application != "edge")
    application = "chrome";
  else if (platform == "gecko") application = "firefox";

  return Prefs.getDocLink(message.link.replace("{browser}", application));
});

(0,_adblockplusui_adblockpluschrome_lib_messaging_events_js__WEBPACK_IMPORTED_MODULE_2__/* .installHandler */ .A)("prefs", null, (emit, action) => {
  const onChanged = () => emit(Prefs[action]);
  Prefs.on(action, onChanged);
  return () => Prefs.off(action, onChanged);
});


/***/ }),

/***/ 7802:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  n: () => (/* binding */ initialize)
});

// UNUSED EXPORTS: isDataCorrupted

// EXTERNAL MODULE: ./adblock-betafish/alias/prefs.js
var prefs = __webpack_require__(2680);
// EXTERNAL MODULE: ./build/templates/info.chrome.js.tmpl
var info_chrome_js = __webpack_require__(9336);
// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
;// CONCATENATED MODULE: ../../node_modules/@eyeo/rules-utils/dist/adblock/index/adblock.json
const adblock_namespaceObject = /*#__PURE__*/JSON.parse('[{"id":"684A25C6-6B5D-458A-8A2B-BAC0A12B0B15","type":"ads","languages":["ar"],"title":"Liste AR+Liste FR+EasyList","homepage":"https://forums.lanik.us/viewforum.php?f=98","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","8D421590-1A68-4B68-BE50-04E17C09460E","3D60E303-1141-4775-B800-834177922876"],"url":"https://easylist-downloads.adblockplus.org/v3/full/liste_ar+liste_fr+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/liste_ar+liste_fr+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/liste_ar+liste_fr+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (frquence des mises  jour automatiques)"},{"id":"25A31255-AB36-48A4-9086-06192DE71119","type":"ads","languages":["as","bn","gu","hi","kn","ml","mr","ne","or","pa","si","ta","te"],"title":"IndianList+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","9FAA2906-CD5C-4520-BDC4-4E098B7EA228"],"url":"https://easylist-downloads.adblockplus.org/v3/full/indianlist+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/indianlist+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/indianlist+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"E22C3B40-DC90-49D7-8BF5-E60904AB159A","type":"ads","languages":["bg"],"title":"Bulgarian list+EasyList","homepage":"https://stanev.org/abp/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","1638B159-F64A-4307-84E7-16AB08ED409E"],"url":"https://easylist-downloads.adblockplus.org/v3/full/bulgarian_list+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/bulgarian_list+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/bulgarian_list+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"EF6F4884-47DB-46A5-AAF8-8EB819D8D4D8","type":"ads","languages":["bs","el","fil","hr","sl","sr","th"],"title":"Global Filters+EasyList","homepage":"https://gitlab.com/eyeo/filterlists/globalfilters","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","02F537E7-0B47-4DBA-BFFA-AE4182E4C31C"],"url":"https://easylist-downloads.adblockplus.org/v3/full/global-filters+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/global-filters+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/global-filters+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"4B6CE485-30AB-4213-AD17-504B3F2D2825","type":"ads","languages":["cs","sk"],"title":"EasyList Czech and Slovak+EasyList","homepage":"https://adblock.sk/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","2D8C4D88-34A0-4259-9098-30D28BA674BC"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistczechslovak+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistczechslovak+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/easylistczechslovak+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"96932CD9-6DDF-4D97-B92F-FDF747B6FAA2","type":"ads","languages":["no","nb","nn","da","is","fo","kl","sv","fi"],"title":"Dandelion Sprout\'s Nordic Filters+EasyList","homepage":"https://github.com/DandelionSprout/adfilt","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","6D489E8D-E61C-444C-BBC5-44741773ADC2"],"url":"https://easylist-downloads.adblockplus.org/v3/full/dandelion_sprouts_nordic_filters+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/dandelion_sprouts_nordic_filters+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/dandelion_sprouts_nordic_filters+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"0CD3D105-D3B3-4652-8489-94163DE9A08F","type":"ads","languages":["de"],"title":"EasyList Germany+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","4337FB2B-A95C-44D5-B78D-11AD40F7711B"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistgermany+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistgermany+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/easylistgermany+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"8C13E995-8F06-4927-BEA7-6C845FB7EEBF","type":"ads","languages":["en"],"title":"EasyList","homepage":"https://easylist.to/","url":"https://easylist-downloads.adblockplus.org/v3/full/easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"C3D13A19-3E8D-41F5-AD64-0F3B36DDE128","type":"ads","languages":["es"],"title":"EasyList Spanish+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","C8C1AA76-15B4-4CA3-8A9C-AD38D6AFCAEC"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistspanish+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistspanish+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/easylistspanish+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"2CEA1481-C29C-44F1-A084-A2A019533797","type":"ads","languages":["fr"],"title":"Liste FR+EasyList","homepage":"https://forums.lanik.us/viewforum.php?f=98","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","8D421590-1A68-4B68-BE50-04E17C09460E"],"url":"https://easylist-downloads.adblockplus.org/v3/full/liste_fr+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/liste_fr+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/liste_fr+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"07549D8B-F06F-4D9D-A567-929AA59E9D1D","type":"ads","languages":["he"],"title":"EasyList Hebrew+EasyList","homepage":"https://github.com/easylist/EasyListHebrew","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","AE0D9320-665E-407D-B692-1A85AE481F34"],"url":"https://easylist-downloads.adblockplus.org/v3/full/israellist+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/israellist+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/israellist+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"88D3F7EA-D99E-43C6-92E0-D89C8A0E7EA9","type":"ads","languages":["hu"],"title":"Hufilter Basic+EasyList","homepage":"https://github.com/hufilter/hufilter/wiki","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","EFA20F90-0490-46A4-B105-BD173F7950AA"],"url":"https://easylist-downloads.adblockplus.org/v3/full/hufilter+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/hufilter+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/hufilter+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"B7D76369-DD19-4602-80E8-2E32DDB490AC","type":"ads","languages":["id","ms"],"title":"ABPindo+EasyList","homepage":"http://abpindo.blogspot.com/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","A4A32212-E6BD-45F6-AD0F-E0FD18E8537B"],"url":"https://easylist-downloads.adblockplus.org/v3/full/abpindo+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/abpindo+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/abpindo+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"BBC07C05-66F1-42EC-BD4D-7AD495FAC84B","type":"ads","languages":["it"],"title":"EasyList Italy+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","2F0A4F0D-DF16-40D0-B0E0-5EB6791EC119"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistitaly+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistitaly+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/easylistitaly+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"361001BD-8F57-4736-97B1-F332C3D79E5D","type":"ads","languages":["ja"],"title":"Japanese Filters+EasyList","homepage":"https://gitlab.com/eyeo/filterlists/japanesefilters","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","7FCD16F0-6505-4A59-90CD-B49849481B0B"],"url":"https://easylist-downloads.adblockplus.org/v3/full/japanese-filters+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/japanese-filters+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/japanese-filters+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"2708BCB7-2E45-41BC-B517-1730CF532F89","type":"ads","languages":["ko"],"title":"KoreanList+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","BCE2062F-0D99-4861-A1F7-E3DFEA6DAB69"],"url":"https://easylist-downloads.adblockplus.org/v3/full/koreanlist+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/koreanlist+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/koreanlist+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"CBE50FA2-DE3F-480C-B1D7-04289391C033","type":"ads","languages":["lt"],"title":"EasyList Lithuania+EasyList","homepage":"https://github.com/EasyList-Lithuania/easylist_lithuania","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","E89B3C08-2DED-40EA-8EE1-339B90D7B451"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistlithuania+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistlithuania+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/easylistlithuania+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"950C88EA-2DD1-42E3-B2A2-2DF2ED15563A","type":"ads","languages":["lv"],"title":"Latvian List+EasyList","homepage":"https://forums.lanik.us/viewforum.php?f=99-latvian-list","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","51893C6C-F39E-43C5-A2EF-9545E388A2CE"],"url":"https://easylist-downloads.adblockplus.org/v3/full/latvianlist+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/latvianlist+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/latvianlist+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"A4B88FB6-E5E5-417F-8A49-20B8244995FD","type":"ads","languages":["nl"],"title":"EasyList Dutch+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","CB94E27D-6CD1-4DB9-83D9-6B7F1A3555F6"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistdutch+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistdutch+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/easylistdutch+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"3D2C09D0-DF1C-4C8E-9947-A23DCEAF8F8B","type":"ads","languages":["pl"],"title":"EasyList Polish+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","9F743FCD-801B-41D0-830F-5A4EA995216E"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistpolish+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistpolish+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/easylistpolish+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"14DF7BE6-9675-4E07-987A-D8A1000F9FEF","type":"ads","languages":["pt"],"title":"EasyList Portuguese+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","A41441EE-BF7C-4A48-9A43-42CCEA2B2A1D"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistportuguese+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistportuguese+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/easylistportuguese+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"EEEF75EC-B2B4-49F4-BC49-17B08266F334","type":"ads","languages":["ro"],"title":"ROList+EasyList","homepage":"https://zoso.ro/rolist/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","99166908-5FDA-4F9E-8C4C-70BB4DEEFC08"],"url":"https://easylist-downloads.adblockplus.org/v3/full/rolist+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/rolist+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/rolist+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"1B5F78CA-8B30-4BDF-B0A3-451CB2202984","type":"ads","languages":["ru","uk","uz","kk"],"title":"RU, UA, UZ, KZ+EasyList","homepage":"https://forums.lanik.us/viewforum.php?f=102","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","879ECB9D-8935-4506-939E-5BBB7DD09402"],"url":"https://easylist-downloads.adblockplus.org/v3/full/ruadlist+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/ruadlist+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/ruadlist+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"D99D3350-7F11-43E1-87CB-FDE0C78E8CD6","type":"ads","languages":["tr"],"title":"Turkish Filters+EasyList","homepage":"https://gitlab.com/eyeo/filterlists/turkishfilters","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","C5238877-8B59-4CC5-AE7F-F8714A5452D1"],"url":"https://easylist-downloads.adblockplus.org/v3/full/turkish-filters+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/turkish-filters+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/turkish-filters+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"1C571EC7-6E52-47CC-B04A-4B3008D0AEBE","type":"ads","languages":["vi"],"title":"ABPVN List+EasyList","homepage":"http://abpvn.com/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","03648752-31EE-4FD0-85C1-20B07C5551C3"],"url":"https://easylist-downloads.adblockplus.org/v3/full/abpvn+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/abpvn+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/abpvn+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"9BD3EA2F-889D-4CC3-B680-CF484F2BD1B9","type":"ads","languages":["zh"],"title":"EasyList China+EasyList","homepage":"https://github.com/easylist/easylistchina/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","1D7F590C-B752-4BA0-9473-6A26DE1326B1"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistchina+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistchina+easylist.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/easylistchina+easylist/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"0798B6A2-94A4-4ADF-89ED-BEC112FC4C7F","type":"allowing","title":"Allow nonintrusive advertising","homepage":"https://acceptableads.com/","url":"https://easylist-downloads.adblockplus.org/v3/full/exceptionrules.txt","mv2_url":"https://easylist-downloads.adblockplus.org/exceptionrules.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/exceptionrules/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days"},{"id":"F12E0801-A00B-49DE-B1E3-52C9C4F90C8C","type":"allowing","title":"Allow nonintrusive advertising without third-party tracking","homepage":"https://acceptableads.com/","url":"https://easylist-downloads.adblockplus.org/v3/full/exceptionrules-privacy-friendly.txt","mv2_url":"https://easylist-downloads.adblockplus.org/exceptionrules-privacy-friendly.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/exceptionrules-privacy-friendly/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days"},{"id":"CDAD4CF5-2706-42CB-B404-F5B9B61B8CAA","type":"annoyances","title":"Premium - Distraction Control","includes":["D5561090-9ADB-4EEE-AA81-101B645D9F4F","8E2D687A-3B44-46E1-BE68-2FE5441A788E","3B85CD3F-553A-45D1-AA38-6288E1C4C7B9","1E7A240E-CD85-493D-BEEF-C68A6AEA1225"],"url":"https://easylist-downloads.adblockplus.org/v3/full/adblock_premium.txt","mv2_url":"https://easylist-downloads.adblockplus.org/adblock_premium.txt","privileged":true,"diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/adblock_premium/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"588470E8-E163-4CD9-A909-521B2A3BE73F","type":"cookies-premium","title":"Premium - Block cookie consent pop-ups","url":"https://easylist-downloads.adblockplus.org/v3/full/cookie-filter-list.txt","mv2_url":"https://easylist-downloads.adblockplus.org/cookie-filter-list.txt","privileged":true,"diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/cookie-filter-list/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"D4028CDD-3D39-4624-ACC7-8140F4EC3238","type":"circumvention","title":"ABP filters","homepage":"https://gitlab.com/eyeo/anti-cv/abp-filters-anti-cv","url":"https://easylist-downloads.adblockplus.org/v3/full/abp-filters-anti-cv.txt","mv2_url":"https://easylist-downloads.adblockplus.org/abp-filters-anti-cv.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/abp-filters-anti-cv/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 hours (update frequency)"},{"id":"5BD2BB73-459D-4A74-AF9D-A10157268350","type":"notifications","title":"Fanboy\'s Notifications Blocking List","homepage":"https://easylist.to/","url":"https://easylist-downloads.adblockplus.org/v3/full/fanboy-notifications.txt","mv2_url":"https://easylist-downloads.adblockplus.org/fanboy-notifications.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/fanboy-notifications/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"D72B6F06-52B2-4FED-96A2-1BF59CDD7AEC","type":"privacy","title":"EasyPrivacy","homepage":"https://easylist.to/","requires":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easyprivacy.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easyprivacy.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/easyprivacy/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"0A679439-445F-4DE7-84B9-88341F6DA520","type":"social","title":"Fanboy\'s Social Blocking List","homepage":"https://easylist.to/","url":"https://easylist-downloads.adblockplus.org/v3/full/fanboy-social.txt","mv2_url":"https://easylist-downloads.adblockplus.org/fanboy-social.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/fanboy-social/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"294D21F0-B3DC-11EF-9B01-F73C7F3A4DB5","type":"videos","title":"Free - Distraction Control","homepage":"https://help.getadblock.com/support/home","url":"https://easylist-downloads.adblockplus.org/v3/full/distraction-control-free.txt","mv2_url":"https://cdn.adblockcdn.com/filters/distraction-control-free.txt","privileged":true,"diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/distraction-control-free/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"1 days (update frequency)"},{"id":"0B0296EB-1CC5-49CD-AD38-8AF27420B7E4","type":"annoyances","title":"Fanboy\'s Annoyance List","homepage":"https://easylist.to/","url":"https://easylist-downloads.adblockplus.org/v3/full/fanboy-annoyance.txt","mv2_url":"https://secure.fanboy.co.nz/fanboy-annoyance.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/fanboy-annoyance/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"4 days (update frequency)"},{"id":"9CC3AF4D-EB89-4100-97C6-4EEE4F8A2E82","type":"cryptomining","title":"NoCoin Filter List","homepage":"https://github.com/hoshsadiq/adblock-nocoin-list/","url":"https://easylist-downloads.adblockplus.org/v3/full/nocoin.txt","mv2_url":"https://raw.githubusercontent.com/hoshsadiq/adblock-nocoin-list/master/nocoin.txt","diff_url":"https://easylist-downloads.adblockplus.org/v3/diff/nocoin/02f49a79839f09ec0bef832d69e384755cdea856.json","expires":"7 days (update frequency)"}]');
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/messaging/port.js
var port = __webpack_require__(297);
// EXTERNAL MODULE: ./adblock-betafish/testing/ready-state/background/index.ts + 2 modules
var background = __webpack_require__(3138);
// EXTERNAL MODULE: ./adblock-betafish/servermessages.js
var servermessages = __webpack_require__(5754);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/index.ts + 1 modules
var utilities_background = __webpack_require__(199);
;// CONCATENATED MODULE: ./adblock-betafish/alias/subscriptionInit.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module adblock-betafish/alias/subscriptionInit */

/** similar to adblockpluschrome\lib\subscriptionInit.js */

/** @module subscriptionInit */










let firstRun;
let reinitialized = false;
let dataCorrupted = false;

/**
 * If there aren't any filters, the default subscriptions are added.
 * However, if patterns.ini already did exist and/or any preference
 * is set to a non-default value, this indicates that this isn't the
 * first run, but something went wrong.
 *
 * This function detects the first run, and makes sure that the user
 * gets notified (on the first run page) if the data appears incomplete
 * and therefore will be reinitialized.
 */
async function detectFirstRun(foundSubscriptions, foundStorage) {
  let userFilters = await ewe_api.filters.getUserFilters();
  firstRun = !foundSubscriptions && !userFilters.length;

  if (firstRun && (foundStorage || prefs/* Prefs */.N.currentVersion)) reinitialized = true;

  prefs/* Prefs */.N.currentVersion = info_chrome_js.addonVersion;
}

/**
 * In case of data corruption, we don't want to show users
 * any non-essential notifications so we need to instruct
 * the notification manager to ignore them.
 *
 * @param {boolean} value
 */
function setDataCorrupted(value) {
  dataCorrupted = value;
  ewe_api.notifications.ignored = value;
}

/*
 * Remove any subscriptions that a user or administrator has added to a
 * central / common configuration (such as the Windows Registry)
 *
 * @return {Promise}
 */

function removeSubscriptions() {
  return new Promise(function (resolve, reject) {
    if ("managed" in browser.storage) {
      browser.storage.managed.get(null).then(
        async (items) => {
          for (let key in items) {
            if (key === "remove_subscriptions" && Array.isArray(items[key]) && items[key].length) {
              for (let inx = 0; inx < items[key].length; inx++) {
                if (await ewe_api.subscriptions.has(items[key][inx])) {
                  await ewe_api.subscriptions.remove(items[key][inx]);
                }
              }
            }
          }
          resolve();
        },

        // Opera doesn't support browser.storage.managed, but instead of simply
        // removing the API, it gives an asynchronous error which we ignore here.
        () => {
          resolve();
        },
      );
    } else {
      resolve();
    }
  });
}

async function addAdditionalSubscriptions() {
  const urls = prefs/* Prefs */.N.additional_subscriptions;
  if (!Array.isArray(urls)) {
    utilities_background.error("Invalid additional subscriptions preference");
    return;
  }

  for (const url of urls) {
    if (typeof url !== "string") {
      utilities_background.error(`Invalid additional subscription URL: ${url}`);
      continue;
    }

    try {
      if (await ewe_api.subscriptions.has(url)) {
        continue;
      }

      await ewe_api.subscriptions.add(url);
    } catch (ex) {
      utilities_background.error(`Failed to add additional subscription: ${url}\n${ex}`);
    }
  }
}

async function addSubscriptions() {
  if (firstRun || reinitialized) {
    await ewe_api.subscriptions.addDefaults();
  }

  // Attempt to fix the issue where the user has no subscriptions we expect them to have
  // at least the default subscriptions.
  // See: https://eyeo.atlassian.net/browse/EXT-373
  const isMV3 = browser.runtime.getManifest().manifest_version === 3;
  if (isMV3) {
    const subscriptions = await ewe_api.subscriptions.getSubscriptions();
    if (subscriptions.length === 0) {
      let errorMsg;

      try {
        // Enable default subscriptions: EasyList, Anti-CV and Acceptable Ads
        await ewe_api.subscriptions.addDefaults(null, true);
      } catch (e) {
        errorMsg = e.message;
      }

      const [newSubscriptions, enabledRulesets, userFilters, dynamicRules] = await Promise.all([
        ewe_api.subscriptions.getSubscriptions(),
        browser.declarativeNetRequest.getEnabledRulesets(),
        ewe_api.filters.getUserFilters(),
        browser.declarativeNetRequest.getDynamicRules(),
      ]);
      const enabledSubscriptions = newSubscriptions.filter((subscription) => subscription.enabled);
      const lastErrorMsg = (browser.runtime.lastError || {}).message;
      const params = {
        subs: newSubscriptions.length,
        enabledSubs: enabledSubscriptions.length,
        enabledRulesets: enabledRulesets.length,
        totalUserFilters: userFilters.length,
        dynamicRules: dynamicRules.length,
        dataCorrupted: isDataCorrupted(),
        firstRun,
        reinitialized,
        errorMsg,
        lastErrorMsg,
      };

      // send a message to the log server with debug metadata
      console.warn("Something is wrong with subscriptions, reset to defaults", params);
      servermessages/* default */.A.recordGeneralMessage("zero_subs_reset", null, params);

      // reset the reinitialized flag to be later used in communicating with the user
      reinitialized = true;
    }
  }

  await addAdditionalSubscriptions();
}

/**
 * We need to check whether we can safely write to/read from storage
 * before we start relying on it for storing preferences.
 */
async function testStorage() {
  let testKey = "readwrite_test";
  let testValue = Math.random();

  try {
    await browser.storage.local.set({ [testKey]: testValue });
    let result = await browser.storage.local.get(testKey);
    if (result[testKey] != testValue)
      throw new Error("Storage test: Failed to read and write value");
  } finally {
    await browser.storage.local.remove(testKey);
  }
}

const start = async function () {
  let addonInfo = {
    bundledSubscriptions: adblock_namespaceObject,
    bundledSubscriptionsPath: "/data/rules/abp",
    name: info_chrome_js.addonName,
    version: info_chrome_js.addonVersion,
    experiments: {
      url: "https://easylist-downloads.adblockplus.org/ab-testing/experiments.json",
    },
    featureFlags: {
      inlineCss: false,
    },
  };

  let cdp = {
    pingUrl: "https://adblock.telemetry.getadblock.com/topic/cdp_activeping_noipc/version/4",
    publicKeyUrl: "https://adblock.telemetry.getadblock.com/pubkey/rsa/2048",
    bearer: "p_fubZ3fNsMcPt0ZY2xYvneWFPBjNZqCCe",
  };

  if (cdp.pingUrl && cdp.publicKeyUrl && cdp.bearer) {
    addonInfo.cdp = cdp;
  }
  let telemetry = {
    url: "https://adblock.telemetry.eyeo.com/topic/webextension_activeping/version/3",
    bearer: "p_5ThOx5hZ3Vv6IU23sARn04r0rHHFjhd0",
  };

  if (telemetry.url && telemetry.bearer) {
    addonInfo.telemetry = telemetry;
  }

  return ewe_api.start(addonInfo).then(async (eweFirstRun) => {
    await detectFirstRun(eweFirstRun.foundSubscriptions, eweFirstRun.foundStorage);
    (await ewe_api.filters.getMigrationErrors()).forEach(console.error);
    (await ewe_api.subscriptions.getMigrationErrors()).forEach(console.error);
    eweFirstRun.warnings.forEach(console.warn);
    await prefs/* Prefs */.N.untilLoaded.catch(() => {
      setDataCorrupted(true);
    });
    await testStorage().catch(() => {
      setDataCorrupted(true);
    });
    // adding default filter lists
    await addSubscriptions();
    await removeSubscriptions();

    (0,background/* setReadyState */.Po)(background/* ReadyState */.vj.started);
  });
};
const initialize = start();

/**
 * Gets a value indicating whether a data corruption was detected.
 *
 * @return {boolean}
 */
function isDataCorrupted() {
  return dataCorrupted;
}



/**
 * @typedef {object} subscriptionsGetInitIssuesResult
 * @property {boolean} dataCorrupted
 *   true if it appears that the user's extension data was corrupted.
 * @property {boolean} reinitialized
 *   true if we have reset the user's settings due to data corruption.
 */

/**
 * Returns an Object with boolean flags for any subscription initialization
 * issues.
 *
 * @event "subscriptions.getInitIssues"
 * @returns {subscriptionsGetInitIssuesResult}
 */
port/* port */.O.on("subscriptions.getInitIssues", (message, sender) => ({ dataCorrupted, reinitialized }));


/***/ }),

/***/ 8624:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   D: () => (/* binding */ getExperiments),
/* harmony export */   e: () => (/* binding */ setUninstallURL)
/* harmony export */ });
/* harmony import */ var _prefs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2680);
/* harmony import */ var _subscriptionadapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6396);
/* harmony import */ var _id_background_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7099);
/* harmony import */ var _telemetry_background_custom_rule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8042);
/* harmony import */ var _telemetry_background_telemetry_base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2059);
/* harmony import */ var _picreplacement_check__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4770);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser, ewe */

/** @module uninstall */
/** similar to adblockpluschrome\lib\uninstall.js */








function booleanToURLBoolean(value) {
  return value ? "1" : "0";
}

async function getPremiumStatus() {
  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_5__/* .License */ .u8.ready();
  const hasActiveLicense = _picreplacement_check__WEBPACK_IMPORTED_MODULE_5__/* .License */ .u8.isActiveLicense();
  return booleanToURLBoolean(hasActiveLicense);
}

/**
 * Converts BigInt number to bytes array
 *
 * @param {BigInt} bn - Number
 * @returns {Uint8Array} bytes array
 */
function bnToBytes(bn) {
  let hex = BigInt(bn).toString(16);
  if (hex.length % 2) hex = `0${hex}`;

  const length = hex.length / 2;
  const bytes = new Uint8Array(length);

  for (let i = 0; i < length; i++) bytes[i] = parseInt(hex.substring(i * 2, i * 2 + 2), 16);

  return bytes;
}

/**
 * Retrieves split experiments assignments. It is compressed as base64-encoded
 * bitmap due to limited space in the uninstall URL.
 * @link https://eyeo.atlassian.net/browse/DATA-2793
 *
 * @returns {string} split experiments assignments
 */
async function getExperiments() {
  let variantsBitmap = 0n;

  const experiments = await ewe.experiments.getExperiments();
  for (const experiment of [...experiments].reverse()) {
    for (const variant of [...experiment.variants].reverse()) {
      variantsBitmap |= variant.assigned ? 1n : 0n;
      variantsBitmap <<= 1n;
    }
  }
  variantsBitmap >>= 1n;

  const bytes = bnToBytes(variantsBitmap);
  const base64 = btoa(String.fromCharCode(...bytes));

  return base64;
}

async function setUninstallURL() {
  if (browser.runtime.setUninstallURL) {
    const userID = await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_2__/* .getUserId */ .F)();
    let uninstallURL = "https://getadblock.com/uninstall/?u=" + userID;
    // if the start property of blockCount exists (which is the AdBlock
    // installation timestamp)
    // use it to calculate the approximate length of time that user has
    // AdBlock installed
    if (_prefs__WEBPACK_IMPORTED_MODULE_0__/* .Prefs */ .N && _prefs__WEBPACK_IMPORTED_MODULE_0__/* .Prefs */ .N.blocked_total !== undefined) {
      const twoMinutes = 2 * 60 * 1000;
      const getLastUpdateTime = async function () {
        const userSubs = await _subscriptionadapter__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getSubscriptionsMinusText();
        let maxLastDownload = -1;
        for (const sub in userSubs) {
          if (userSubs[sub].lastSuccess > maxLastDownload) {
            maxLastDownload = userSubs[sub].lastSuccess;
          }
        }
        return maxLastDownload;
      };
      const updateUninstallURL = async function () {
        const data = await browser.storage.local.get("blockage_stats");
        let url = uninstallURL;

        if (data && data.blockage_stats && data.blockage_stats.start) {
          const installedDuration = Date.now() - data.blockage_stats.start;
          url = `${url}&t=${installedDuration}`;
        }

        const bc = _prefs__WEBPACK_IMPORTED_MODULE_0__/* .Prefs */ .N.blocked_total;
        url = `${url}&bc=${bc}`;

        const experimentsRevision = await ewe.experiments.getRevisionId();
        url = `${url}&er=${encodeURIComponent(experimentsRevision)}`;
        const experimentsVariants = await getExperiments();
        url = `${url}&ev=${encodeURIComponent(experimentsVariants)}`;

        const lastUpdateTime = await getLastUpdateTime();
        url = `${url}&lt=${lastUpdateTime}`;
        url = `${url}&wafc=${await (0,_telemetry_background_custom_rule__WEBPACK_IMPORTED_MODULE_3__/* .getWebAllowlistingFilterCount */ .n9)()}`;

        // CDP data
        url = `${url}&ps=${await getPremiumStatus()}`;
        url = `${url}&aa=${await (0,_telemetry_background_telemetry_base__WEBPACK_IMPORTED_MODULE_4__/* .getAAStatus */ .x)()}`;

        browser.runtime.setUninstallURL(url);
      };
      // start an interval timer that will update the Uninstall URL every 2
      // minutes
      setInterval(updateUninstallURL, twoMinutes);
      updateUninstallURL();
    } else {
      browser.runtime.setUninstallURL(`${uninstallURL}&t=-1`);
    }
  }
}


/***/ }),

/***/ 7326:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* unused harmony exports trustedDomains, getAllowlistingDomain, onAllowlisting */
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _alias_prefs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2680);
/* harmony import */ var _servermessages__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5754);
/* harmony import */ var _utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7656);
/* harmony import */ var _src_filters_shared__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(7057);
/* harmony import */ var _picreplacement_check__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4770);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */









const trustedDomains = [
  "softonic-ar.com",
  "softonic-id.com",
  "softonic-th.com",
  "softonic.cn",
  "softonic.com",
  "softonic.com.br",
  "softonic.com.tr",
  "softonic.jp",
  "softonic.kr",
  "softonic.nl",
  "softonic.pl",
  "softonic.ru",
  "softonic.vn",
  "softoniclabs.com",
  "fandom.com",
];

/**
 * Return a domain to allowlist based on the hostname
 *
 * @param hostname - hostname to parse
 */
function getAllowlistingDomain(hostname) {
  // if the hostname is a trusted domain, or a subdomain of a trusted domain,
  // allowlist the root domain, this way we allowlist all subdomains as well.
  for (const trustedDomain of trustedDomains) {
    if (hostname.endsWith(`.${trustedDomain}`) || hostname === trustedDomain) {
      return trustedDomain;
    }
  }

  return hostname.replace(/^www\./, "");
}

/**
 * Function to be called when a valid allowlisting request was received
 *
 * @param domain - Domain to allowlist
 * @param {?Object} options Additional options for the allowlisting.
 * @param {Number} [options.expiresAt] The timestamp when the filter should
 *  expire (allowed 1 day - 365 days in the future).
 *
 */
async function onAllowlisting(domain, options) {
  if (_picreplacement_check__WEBPACK_IMPORTED_MODULE_5__/* .License */ .u8.isActiveLicense()) {
    return;
  }

  const host = getAllowlistingDomain(domain);
  const metadata = (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_3__/* .createFilterMetaData */ .yf)(_src_filters_shared__WEBPACK_IMPORTED_MODULE_4__.FilterOrigin.web);
  if (options && options.expiresAt) {
    metadata.expiresAt = options.expiresAt;
  }

  await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.add([`@@||${host}^$document`], metadata);
}

/**
 * Remove all web based allowlisting filters
 */
async function removeWebAllowlistingFilters() {
  const allowlistingFilters = (await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getUserFilters()).filter(
    (filter) => filter.type === "allowing",
  );

  const allowlistingFiltersWithMetadata = await Promise.all(
    allowlistingFilters.map(async (filter) => {
      const metadata = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getMetadata(filter.text);
      return { filter, metadata };
    }),
  );
  const webAllowlistingFilters = allowlistingFiltersWithMetadata
    .filter(({ metadata }) => metadata && metadata.origin === _src_filters_shared__WEBPACK_IMPORTED_MODULE_4__.FilterOrigin.web)
    .map(({ filter }) => filter);
  return _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.remove(webAllowlistingFilters.map((filter) => filter.text));
}

/**
 * Initializes module
 */
async function start() {
  await _alias_prefs__WEBPACK_IMPORTED_MODULE_1__/* .Prefs */ .N.untilLoaded;

  const authorizedKeys = _alias_prefs__WEBPACK_IMPORTED_MODULE_1__/* .Prefs */ .N.get("allowlisting_authorizedKeys");
  _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.allowlisting.setAuthorizedKeys(authorizedKeys);
  _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.allowlisting.setAllowlistingCallback(onAllowlisting);

  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_5__/* .License */ .u8.ready();
  if (_picreplacement_check__WEBPACK_IMPORTED_MODULE_5__/* .License */ .u8.isActiveLicense()) {
    removeWebAllowlistingFilters();
  }

  _picreplacement_check__WEBPACK_IMPORTED_MODULE_5__/* .License */ .u8.licenseNotifier.on("license.status.changed", () => {
    if (_picreplacement_check__WEBPACK_IMPORTED_MODULE_5__/* .License */ .u8.isActiveLicense()) {
      _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.allowlisting.setAuthorizedKeys([]);
      removeWebAllowlistingFilters();
    } else {
      _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.allowlisting.setAuthorizedKeys(authorizedKeys);
    }
  });

  _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.allowlisting.onUnauthorized.addListener((error) => {
    _servermessages__WEBPACK_IMPORTED_MODULE_2__/* ["default"] */ .A.recordErrorMessage("one_click_allowlisting_error", {
      errorMsg: error.toString(),
    });
    // eslint-disable-next-line no-console
    console.error(error);
  });
}

start();


/***/ }),

/***/ 3344:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony import */ var _id_background_index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7099);
/* For ESLint: List any global identifiers used in this file below */
/* global browser  */



const webRequestFilter = {
  url: [{ hostSuffix: "getadblock.com" }, { hostSuffix: "getadblockpremium.com" }],
};

function setAdblockUserID(userid) {
  window.adblock_userid = userid;
}

// Have the script tag remove itself once executed (leave a clean
// DOM behind).
function cleanup() {
  const c = document.currentScript;
  const p = c && c.parentNode;
  if (p) {
    p.removeChild(c);
  }
}

// Inject a script tag in the main JS context world
// and then remove itself once executed (leave a clean
// DOM behind).
async function injectScriptTag(adblockUserId) {
  const elem = document.createElement("script");
  const scriptToInject = `(${cleanup.toString()})();(${setAdblockUserID.toString()})('${adblockUserId}');`;
  elem.appendChild(document.createTextNode(scriptToInject));
  try {
    (document.head || document.documentElement).appendChild(elem);
  } catch (ex) {
    // empty
  }
}

const webNavigationHandler = async function (details) {
  let userid = await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_0__/* .getUserId */ .F)();
  const invalidGUIDChars = /[^a-z0-9]/g;
  if (userid.match(invalidGUIDChars)) {
    userid = "invalid";
  }
  const { tabId } = details;
  try {
    if (browser.scripting) {
      void browser.scripting.executeScript({
        target: { tabId: details.tabId },
        func: setAdblockUserID,
        args: [userid],
        world: "MAIN",
      });
    } else {
      const codeToExecute = `${setAdblockUserID.toString()} ${cleanup.toString()} ${injectScriptTag.toString()} injectScriptTag("${userid}");`;
      void browser.tabs.executeScript(tabId, {
        code: codeToExecute,
        allFrames: false,
        runAt: "document_start",
      });
    }
  } catch (error) {
    /* eslint-disable-next-line no-console */
    console.error(error);
  }
};

const start = function () {
  browser.webNavigation.onCommitted.removeListener(webNavigationHandler, webRequestFilter);
  browser.webNavigation.onCommitted.addListener(webNavigationHandler, webRequestFilter);
};
start();


/***/ }),

/***/ 8806:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";

// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
// EXTERNAL MODULE: ./build/templates/info.chrome.js.tmpl
var info_chrome_js = __webpack_require__(9336);
// EXTERNAL MODULE: ../../node_modules/@eyeo-fragments/conflict-detection/dist/background/index.js + 5 modules
var background = __webpack_require__(6501);
// EXTERNAL MODULE: ../../node_modules/webextension-polyfill/src/browser-polyfill.js
var browser_polyfill = __webpack_require__(2558);
var browser_polyfill_default = /*#__PURE__*/__webpack_require__.n(browser_polyfill);
;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/yt-wall-detection/dist/background/detection.types.js
const ytAllowlistStartDate = "yt_allowlist_start_date";
const noop = () => { };

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/yt-wall-detection/dist/shared/messages.types.js
const ytHavenShouldStart = "yt-haven.should-start";
const youTubeAlreadyAllowListed = "yt-site.already.allowlisted";
const youTubeAutoAllowlisted = "yt-auto.allowlisted";
const youTubeWallDetected = "yt-site.ad-wall-detected";
const youTubeNavigation = "yt-site.navigation";
const ytHavenOverlayFlag = "yt-haven-overlay-iframe-enabled";
const ytHavenModalFlag = "yt-haven-overlay-modal-enabled";
const ytHavenEmbedFreeFlag = "yt-haven-embed-free";
const ytHavenEmbedPremiumFlag = "yt-haven-embed-premium";
const ytHavenDefaultEnabledFlag = "yt-haven-default-enabled";
const ytHavenToggleStatePrefsKey = "yt_haven_toggle_state";
const ytHavenToggleState = "yt-haven.toggle-state";
const ytHavenToggleStateUpdate = "yt-haven.toggle-state-update";
const ytHavenConflict = "yt-haven.conflict";
const ytHavenRecordEvent = "yt-haven.record-event";
const ytHavenInfoBoxShown = "yt_haven_info_box_shown";
const ytHavenToggleStateEnabled = "yt_haven_toggle_state_enabled";
const ytHavenToggleStateDisabled = "yt_haven_toggle_state_disabled";
const ytHavenFeedbackMenuOpen = "yt_haven_feedback_menu_open";
const matchingElementFoundKey = "matchingElementFound";
const ytHavenEmbeddedPlayerIssue = "yt-haven.embed-issue";
const ytHavenNeverShowOverlayClick = "yt-haven.never-show-overlay-clicked";
const ytHavenMetaTagFound = "yt-haven.meta-tag.found";
const ytHavenNextVideoNotFound = "yt-haven.next-video-not-found";
const ytHavenNonEmbeddableFound = "yt-haven.non-embeddable-found";
const ytHavenNonPlayableFound = "yt-haven.non-playable-found";
const ytHavenWatchCTAClicked = "yt-haven.watch-cta-clicked";
const ytHavenOverlayShown = "yt-haven.overlay-shown";
const ytHavenIframeShown = "yt-haven.iframe-shown";
const ytHavenModalClosed = "yt-haven.modal-closed";
const ytHavenLabelWatchingDisable = "yt-haven.label-watching-disable";
const ytHavenLabelWatchingIgnore = "yt-haven.watching-label-ignore";

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/yt-wall-detection/dist/background/detection.js




const captureStartDate = function (parameters) {
    if (parameters.prefs.get(ytAllowlistStartDate) === 0) {
        parameters.prefs.set(ytAllowlistStartDate, Date.now());
        parameters.logger.debug("[yt-detection]: set start date", new Date(parameters.prefs.get(ytAllowlistStartDate)).toLocaleDateString());
    }
};
const captureDateOnUpdate = (parameters, details) => {
    if (details.reason === "update" || details.reason === "install") {
        captureStartDate(parameters);
    }
};
const processYouTubeWallMessage = async (parameters, message, sender) => {
    var _a, _b;
    const tabId = (_a = sender.tab) === null || _a === void 0 ? void 0 : _a.id;
    const tabURL = (_b = sender.tab) === null || _b === void 0 ? void 0 : _b.url;
    if (typeof tabId === "undefined" || typeof tabURL === "undefined") {
        return;
    }
    const { sendAdWallEvents = noop } = parameters;
    const filters = await ewe_api.filters.getAllowingFilters(tabId);
    const isAllowListed = !!filters.length;
    if (isAllowListed) {
        sendAdWallEvents(youTubeAlreadyAllowListed, {
            userLoggedIn: message.userLoggedIn ? "1" : "0",
            isAllowListed: "1",
        });
        return;
    }
    sendAdWallEvents(youTubeWallDetected, {
        userLoggedIn: message.userLoggedIn ? "1" : "0",
        isAllowListed: "0",
    });
    const senderURL = new URL(tabURL);
    const host = senderURL.hostname.replace(/^www\./, "");
    const ruleText = `@@||${host}^$document`;
    const metadata = {
        expiresByTabId: tabId,
        origin: "yt-auto",
        created: Date.now(),
    };
    await ewe_api.filters.add(ruleText, metadata);
    await browser_polyfill.storage.local.set({
        [matchingElementFoundKey]: true,
    });
    if (message.currentPlaybackTime > 5) {
        senderURL.searchParams.set("t", Math.floor(message.currentPlaybackTime).toString());
        senderURL.searchParams.delete("ab_channel");
        await browser_polyfill.tabs.update(tabId, { url: senderURL.href });
    }
    else {
        await browser_polyfill.tabs.reload(tabId);
    }
    sendAdWallEvents(youTubeAutoAllowlisted);
};
async function executeScript(tabId) {
    var _a;
    if (typeof tabId === "undefined") {
        return false;
    }
    const world = "MAIN";
    const func = () => {
        return XMLHttpRequest.toString().includes("uboLog");
    };
    if ((_a = browser_polyfill.scripting) === null || _a === void 0 ? void 0 : _a.executeScript) {
        try {
            const out = await browser_polyfill.scripting.executeScript({
                target: { tabId },
                func,
                world,
            });
            return out[0].result;
        }
        catch (e) {
            return false;
        }
    }
    return false;
}
function start(parameters) {
    const { sendAdWallEvents = noop } = parameters;
    const captureDateOnUpdatedWithParameters = captureDateOnUpdate.bind(null, parameters);
    browser_polyfill.runtime.onInstalled.addListener(captureDateOnUpdatedWithParameters);
    ewe_api.filters.onRemoved.addListener(async (filter) => {
        if (filter.text.endsWith("youtube.com^$document") &&
            filter.type === "allowing") {
            await browser_polyfill.storage.local.remove(matchingElementFoundKey);
        }
    });
    const processYouTubeWallMessageWithParameters = processYouTubeWallMessage.bind(null, parameters);
    parameters.port.on(youTubeWallDetected, processYouTubeWallMessageWithParameters);
    parameters.port.on(youTubeNavigation, async (message, sender) => {
        var _a;
        sendAdWallEvents(youTubeNavigation, {
            userLoggedIn: message.userLoggedIn ? "1" : "0",
        });
        const tabId = (_a = sender.tab) === null || _a === void 0 ? void 0 : _a.id;
        const result = await executeScript(tabId);
        if (result) {
            sendAdWallEvents(ytHavenConflict);
        }
    });
    parameters.port.on(ytHavenWatchCTAClicked, () => {
        sendAdWallEvents(ytHavenWatchCTAClicked);
    });
    parameters.port.on(ytHavenNeverShowOverlayClick, async () => {
        sendAdWallEvents(ytHavenNeverShowOverlayClick);
        await ewe_api.experiments.overrideFlag(ytHavenOverlayFlag, false);
        await ewe_api.experiments.overrideFlag(ytHavenModalFlag, false);
    });
    parameters.port.on(ytHavenNonEmbeddableFound, (message) => {
        sendAdWallEvents(ytHavenNonEmbeddableFound, {
            errorCode: message.errorCode,
        });
    });
    parameters.port.on(ytHavenNonPlayableFound, (message) => {
        sendAdWallEvents(ytHavenNonPlayableFound, {
            errorCode: message.errorCode,
        });
    });
    parameters.port.on(ytHavenNextVideoNotFound, () => {
        sendAdWallEvents(ytHavenNextVideoNotFound);
    });
    parameters.port.on(ytHavenMetaTagFound, () => {
        sendAdWallEvents(ytHavenMetaTagFound);
    });
    parameters.port.on(ytHavenEmbeddedPlayerIssue, (message) => {
        sendAdWallEvents(ytHavenEmbeddedPlayerIssue, {
            errorCode: message.errorCode,
        });
    });
    parameters.port.on(ytHavenLabelWatchingDisable, async (message, sender) => {
        var _a;
        const tabId = (_a = sender === null || sender === void 0 ? void 0 : sender.tab) === null || _a === void 0 ? void 0 : _a.id;
        if (!tabId) {
            return;
        }
        sendAdWallEvents(ytHavenLabelWatchingDisable);
        await ewe_api.experiments.overrideFlag(ytHavenOverlayFlag, false);
        await browser_polyfill.tabs.reload(tabId);
    });
    parameters.port.on(ytHavenLabelWatchingIgnore, () => {
        sendAdWallEvents(ytHavenLabelWatchingIgnore);
    });
    parameters.port.on(ytHavenModalClosed, () => {
        sendAdWallEvents(ytHavenModalClosed);
    });
    parameters.port.on(ytHavenOverlayShown, () => {
        sendAdWallEvents(ytHavenOverlayShown);
    });
    parameters.port.on(ytHavenRecordEvent, ({ type, eventName, ...eventPayload }) => {
        const isPremium = parameters.isPremiumActive();
        sendAdWallEvents(eventName, {
            ...eventPayload,
            p: isPremium,
        });
    });
    parameters.port.on(ytHavenShouldStart, async () => {
        const isPremium = parameters.isPremiumActive();
        const ytHavenFlags = await Promise.all([
            ewe_api.experiments.getFlag(ytHavenEmbedFreeFlag),
            ewe_api.experiments.getFlag(ytHavenEmbedPremiumFlag),
        ]);
        return ((Boolean(ytHavenFlags[0]) && !isPremium) ||
            (Boolean(ytHavenFlags[1]) && isPremium));
    });
    parameters.port.on(ytHavenToggleState, async () => {
        var _a;
        const isPremium = parameters.isPremiumActive();
        const [currentState, isDefaultEnabled] = await Promise.all([
            browser_polyfill.storage.local.get(ytHavenToggleStatePrefsKey),
            ewe_api.experiments.getFlag(ytHavenDefaultEnabledFlag),
        ]);
        return Boolean((_a = currentState[ytHavenToggleStatePrefsKey]) !== null && _a !== void 0 ? _a : (isPremium ? false : isDefaultEnabled));
    });
    parameters.port.on(ytHavenToggleStateUpdate, async ({ newState }) => {
        await browser_polyfill.storage.local.set({
            [ytHavenToggleStatePrefsKey]: newState,
        });
        const isPremium = parameters.isPremiumActive();
        const eventName = newState
            ? ytHavenToggleStateEnabled
            : ytHavenToggleStateDisabled;
        const eventPayload = { p: isPremium };
        sendAdWallEvents(eventName, eventPayload);
        return newState;
    });
    const trustedEventNames = [
        youTubeWallDetected,
        youTubeNavigation,
        ytHavenShouldStart,
        ytHavenWatchCTAClicked,
        ytHavenNeverShowOverlayClick,
        ytHavenNonEmbeddableFound,
        ytHavenNonPlayableFound,
        ytHavenEmbeddedPlayerIssue,
        ytHavenMetaTagFound,
        ytHavenNextVideoNotFound,
        ytHavenLabelWatchingDisable,
        ytHavenLabelWatchingIgnore,
        ytHavenModalClosed,
        ytHavenOverlayShown,
        ytHavenToggleState,
        ytHavenToggleStateUpdate,
        ytHavenRecordEvent,
    ];
    parameters.addTrustedMessageTypes("https://youtube.com", trustedEventNames);
    parameters.addTrustedMessageTypes("https://www.youtube.com", trustedEventNames);
    parameters.addTrustedMessageTypes("https://youtube-nocookie.com", trustedEventNames);
    parameters.addTrustedMessageTypes("https://www.youtube-nocookie.com", trustedEventNames);
}

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/yt-wall-detection/dist/background/index.js



// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/adblockpluscore/lib/snippets.js
var snippets = __webpack_require__(5801);
;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/public-api/src/shared/constants.js
/**
 * This file is part of eyeo's Public API fragment,
 * Copyright (C) 2024-present eyeo GmbH

 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.

 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.

 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

/**
 * URL of frames where the API needs to be injected
 * @type {string}
 */
const apiFrameUrl = "https://btloader.com/trustedIframe.html";

/**
 * Event name for calling the public API
 * @type {string}
 */
const requestEvent = "public-api.request";

/**
 * Event name for listening on responses for the public API
 * @type {string}
 */
const responseEvent = "public-api.response";

/**
 * AdBlock integration identifier
 * @type {string}
 */
const adblockName = "adblock";

/**
 * Adblock Plus integration identifier
 * @type {string}
 */
const adblockPlusName = "adblockplus";

/**
 * List of integrations, contains the identifiers for AdBlock and Adblock Plus
 * @type {string[]}
 */
const integrations = [adblockName, adblockPlusName];

/**
 * Number of milliseconds in a day.
 * @type {number}
 * @default 86400000
 */
const MILLIS_IN_DAY = 86400000;

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/public-api/src/content/main-public-api.js
/**
 * This file is part of eyeo's Public API fragment,
 * Copyright (C) 2024-present eyeo GmbH

 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.

 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.

 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

function mainPublicApi({ requestEvent, responseEvent, integrations }) {
  // Queue of responses to wait for
  const responseQueue = {};

  /**
   * Generates a random 10 char identifier
   *
   * @returns {string} The identifier
   */
  function generateRequestId() {
    return Math.random().toString(36).substring(2, 12);
  }

  /**
   * Checks if two sets are equal
   *
   * @param {Set<any>} setA First Set
   * @param {Set<any>} setB Second set
   * @returns {boolean} True if they are equal, false otherwise
   */
  function areSetsEqual(setA, setB) {
    if (setA.size !== setB.size) return false;

    setA.forEach((elem) => {
      if (!setB.has(elem)) {
        return false;
      }
    });

    return true;
  }

  /**
   * Retrieves the extensions that are currently available or
   * throws an error in case no extension is available
   *
   * @returns {Set<string>} A Set of available extensions
   */
  function getAvailableExtensions() {
    const dataset = document.documentElement.dataset;
    const availableExts = new Set();

    integrations.forEach((integration) => {
      if (dataset[integration]) {
        availableExts.add(integration);
      }
    });

    if (availableExts.size === 0) {
      throw new Error("There is no extension available");
    }

    return availableExts;
  }

  /**
   * Handles the events received from the content scripts
   *
   * @param event The event received from the content script
   */
  function responseHandler(event) {
    const { detail } = event;
    const { requestId, name } = detail;

    // Ignore responses that don't have a proper identifier attached to them (see EXT-872)
    if (!requestId || !name) {
      console.error("Invalid response received from the extension", detail);
      return;
    }

    const queuedResponse = responseQueue[requestId];

    if (!queuedResponse) {
      return; // Ignore responses that are not queued anymore
    }

    const { availableExts, resolve, collectedResponses, responded, timeoutId } =
      queuedResponse;
    collectedResponses.push(detail);
    responded.add(name);

    // If all extensions replied, then remove the item from queue
    // and resolve the promise
    if (areSetsEqual(availableExts, responded)) {
      resolve(collectedResponses);
      delete responseQueue[requestId];
      clearTimeout(timeoutId);
    }
  }

  /**
   * Sends a command to the available extensions on the page.
   *
   * @param {string} method The method to be called.
   * @param {String} [targetExt] The extension to target
   * @param {Object} [params] The parameters for the called method
   * @param {number} [timeoutMs=3000] How long to wait for a response
   * @returns {Promise<Array<object>>} An array of responses
   */
  async function sendExtCommand({
    method,
    targetExt,
    params,
    timeoutMs = 3000,
  }) {
    const requestId = generateRequestId();
    const availableExts = getAvailableExtensions();

    // Validate if the extension is available,
    // if only a specific extension was targeted
    if (targetExt && !availableExts.has(targetExt)) {
      throw new Error("Target extension is not initialized");
    }

    return new Promise((resolve, reject) => {
      const collectedResponses = [];
      const responded = new Set();

      // Set a timeout to reject the promise after timeoutMs
      const timeoutId = setTimeout(() => {
        clearTimeout(timeoutId);

        // Add timeout responses for the extensions that did not respond
        availableExts.forEach((ext) => {
          if (!responded.has(ext)) {
            collectedResponses.push({
              name: ext,
              requestId,
              error: "timeout_error",
            });
          }
        });

        resolve(collectedResponses);
      }, timeoutMs);

      // Register an expected response into the queue
      responseQueue[requestId] = {
        availableExts, // Available extensions at call time
        collectedResponses, // Responses collected from the extensions
        responded, // Extensions that responded
        resolve,
        timeoutId,
      };

      // Send command to content script
      document.dispatchEvent(
        new CustomEvent(requestEvent, {
          detail: {
            params,
            method,
            requestId,
            targetExt,
          },
        }),
      );
    });
  }

  function init() {
    // Define the publicAPI on the window object
    // If multiple extensions are available only the first one will define the API
    if (!window.hasOwnProperty("sendExtCommand")) {
      Object.defineProperty(window, "sendExtCommand", {
        value: sendExtCommand,
        writable: false, // Prevent modification of the value
        configurable: false, // Prevent the property from being deleted or redefined
        enumerable: true, // Allow the property to be enumerated (optional)
      });

      document.addEventListener(responseEvent, responseHandler, true);
    }
  }

  init();
}

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/public-api/src/background/api-injector.js
/**
 * This file is part of eyeo's Public API fragment,
 * Copyright (C) 2024-present eyeo GmbH

 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.

 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.

 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */






/**
 * Injects a script into the main world context of a frame
 *
 * @param {object} details - The details for the
 * @param {number} details.tabId - The id of the tab
 * @param {number} details.frameId - The id of the frame
 * @param {Function} details.func - The function to be inserted into main world
 * @param {any[]} details.args - The parameters for the function.
 */
async function injectScriptInFrame({ tabId, frameId, func, args }) {
  if (browser_polyfill.scripting && browser_polyfill.scripting.executeScript) {
    if (Object.values(browser_polyfill.scripting.ExecutionWorld).includes("MAIN")) {
      return browser_polyfill.scripting.executeScript({
        target: { tabId, frameIds: [frameId] },
        world: "MAIN",
        injectImmediately: true,
        func,
        args,
      });
    }
  }

  const executable = (0,snippets/* prepareInlineScriptForInjection */.Gn)(func, ...args);

  return browser_polyfill.tabs.executeScript(tabId, {
    frameId,
    code: executable,
    matchAboutBlank: true,
    runAt: "document_start",
  });
}

/**
 * Starts the injection of the API into the main world context
 */
function api_injector_start() {
  browser_polyfill.webNavigation.onCommitted.addListener(
    async (details) => {
      const { tabId, frameId } = details;
      // Only inject in iframes
      if (details.frameId !== 0) {
        try {
          await injectScriptInFrame({
            tabId,
            frameId,
            func: mainPublicApi,
            args: [
              {
                requestEvent: requestEvent,
                responseEvent: responseEvent,
                integrations: integrations,
              },
            ],
          });
        } catch (err) {
          console.debug("Error injecting Public API script", err);
        }
      }
    },
    { url: [{ originAndPathMatches: apiFrameUrl }] },
  );
}

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/public-api/src/background/api-handlers/status-api.js
/**
 * This file is part of eyeo's Public API fragment,
 * Copyright (C) 2024-present eyeo GmbH

 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.

 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.

 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */



/**
 * Retrieves the allowlisting status of a tab
 *
 * @param {Object} params - Input parameter
 * @param {number} params.tabId The id of the tab
 * @returns {Promise<any>} The allowlisting state for the current tab
 */
async function getAllowlistStatus({ tabId }) {
  const allowlistingFilters = await ewe_api.filters.getAllowingFilters(tabId);
  let metadata = {};

  for (const filter of allowlistingFilters) {
    // eslint-disable-next-line no-await-in-loop
    metadata = await ewe_api.filters.getMetadata(filter);
    const { origin } = metadata ? metadata : {};

    if (origin === "web") {
      break;
    }
  }

  const { origin, expiresAt } = metadata;

  return {
    status: allowlistingFilters.length > 0,
    origin,
    expiresAt,
  };
}

/**
 * Retrieves the extension status
 *
 * @returns {Promise<any>} The extension status info
 */
async function getStatus() {
  const tabId = this.sender.tab.id;
  const allowlist = await getAllowlistStatus({ tabId });
  const aa = await ewe_api.subscriptions.hasAcceptableAdsEnabled();
  const license = this.isPremiumActive() ? this.getEncodedLicense() : null;

  return {
    license,
    aa,
    allowlist,
  };
}

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/public-api/src/background/api-handlers/experiments.js


/**
 * Exposes all current experiment flags and their values.
 * @returns {Promise<Object>} An object with all experiment flag IDs and their values.
 */
async function getExperimentFlags() {
  return ewe_api.experiments.getFlags();
}

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/public-api/src/background/api-handlers/index.js
/**
 * This file is part of eyeo's Public API fragment,
 * Copyright (C) 2024-present eyeo GmbH

 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.

 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.

 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */

// import { allowlistWebsite } from "./allowlisting-api.js";



/* harmony default export */ const api_handlers = ({
  getStatus: getStatus,
  // allowlistWebsite is intentionally not exposed
  getExperimentFlags: getExperimentFlags,
});

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/public-api/src/shared/helpers.js
/**
 * This file is part of eyeo's Public API fragment,
 * Copyright (C) 2024-present eyeo GmbH

 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.

 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.

 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */



/**
 * Returns the integration name, based on the extension short name
 * taken from the manifest
 *
 * @param {string} manifestShortName The short name taken from the manifest
 * @returns {string} The integration name
 */
function getIntegrationName(manifestShortName) {
  if (manifestShortName === "AdBlock") {
    return adblockName;
  } else if (manifestShortName === "Adblock Plus") {
    return adblockPlusName;
  }

  throw new Error("Invalid extension name");
}

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/public-api/src/background/public-api.js
/**
 * This file is part of eyeo's Public API fragment,
 * Copyright (C) 2024-present eyeo GmbH

 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.

 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.

 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */






const { short_name, version } = browser_polyfill.runtime.getManifest();
const public_api_name = getIntegrationName(short_name);

/**
 * @typedef {Object} StartParams
 * @property {any} port A reference to the port object
 * @property {addTrustedMessageTypesFunction} addTrustedMessageTypes Function to add the trusted message types
 * @property {Function} isPremiumActive Function to get the premium state of the user
 * @property {Function} getEncodedLicense Function to get the encoded license of the user
 */

/**
 * A callback function that modifies the allowlist for a tab.
 *
 * @callback addTrustedMessageTypesFunction
 * @param {string} origin - The origin of the message.
 * @param {string[]} types - The message types to be trusted.
 */

/**
 * Initializes the Public API fragment.
 *
 * @param {StartParams} StartParams The start parameters
 */
function public_api_start({
  port,
  addTrustedMessageTypes,
  isPremiumActive,
  getEncodedLicense,
}) {
  port.on(requestEvent, async (message, sender) => {
    const tabId = (sender.tab || {}).id;

    if (!tabId) {
      return {
        name: public_api_name,
        version,
        error: "invalid_invocation",
      };
    }

    const { method, params } = message;
    const handler = api_handlers[method];

    if (!handler) {
      console.warn("Unknown method received from Public API:", method);
      return {
        name: public_api_name,
        version,
        error: "invalid_method",
      };
    }

    const response = {};
    try {
      response.result = await handler.bind(
        { isPremiumActive, getEncodedLicense, sender },
        params,
      )();
    } catch (e) {
      console.warn("An error occurred in the Public API for method", method, e);
      response.error = e.message;
    }

    return {
      name: public_api_name,
      version,
      ...response,
    };
  });

  const iframeUrl = new URL(apiFrameUrl);
  addTrustedMessageTypes(iframeUrl.origin, [requestEvent]);
  api_injector_start();
}

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/public-api/src/background/index.js
/**
 * This file is part of eyeo's Public API fragment,
 * Copyright (C) 2024-present eyeo GmbH

 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.

 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.

 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <https://www.gnu.org/licenses/>.
 */



// EXTERNAL MODULE: ./adblock-betafish/alias/prefs.js
var prefs = __webpack_require__(2680);
// EXTERNAL MODULE: ./adblock-betafish/debug/background/index.js + 1 modules
var debug_background = __webpack_require__(5380);
// EXTERNAL MODULE: ./adblock-betafish/filter-utils.js
var filter_utils = __webpack_require__(9383);
// EXTERNAL MODULE: ./src/pause/background/index.ts
var pause_background = __webpack_require__(4255);
// EXTERNAL MODULE: ./adblock-betafish/alias/contentFiltering.js + 3 modules
var contentFiltering = __webpack_require__(1589);
// EXTERNAL MODULE: ./adblock-betafish/alias/icon.js
var icon = __webpack_require__(4761);
// EXTERNAL MODULE: ./adblock-betafish/id/background/index.ts + 1 modules
var id_background = __webpack_require__(7099);
// EXTERNAL MODULE: ./adblock-betafish/alias/subscriptionInit.js + 1 modules
var subscriptionInit = __webpack_require__(7802);
// EXTERNAL MODULE: ./adblock-betafish/telemetry/background/index.js + 4 modules
var telemetry_background = __webpack_require__(3322);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/messaging/events.js
var events = __webpack_require__(4299);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/messaging/port.js
var port = __webpack_require__(297);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/storage/tab-session.js
var tab_session = __webpack_require__(1583);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/action.js
var action = __webpack_require__(5557);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/events.js
var lib_events = __webpack_require__(866);
;// CONCATENATED MODULE: ./adblockplusui/src/core/scheduled-event-emitter/background/scheduled-event-emitter.types.ts
var ScheduleType;
(function (ScheduleType) {
    ScheduleType["once"] = "once";
    ScheduleType["interval"] = "interval";
})(ScheduleType || (ScheduleType = {}));

// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/storage/session.js
var session = __webpack_require__(1633);
;// CONCATENATED MODULE: ./adblockplusui/src/core/scheduled-event-emitter/background/scheduled-event-emitter.ts


const global = typeof window !== "undefined" ? window : self;
const storageKey = "schedules";
const storage = new session/* SessionStorage */.u("ScheduledEventEmitter.storage");
const initialization = initialize();
let schedules = Object.create(null);
const listeners = new Map();
async function setListener(name, listener) {
    await initialization;
    if (listeners.has(name)) {
        warn(`Overwriting already registered listener for event "${name}".`);
    }
    listeners.set(name, listener);
    activateSchedules();
}
async function setSchedule(name, time, scheduleType = ScheduleType.once) {
    await initialization;
    if (name in schedules) {
        warn(`Overwriting already registered schedule for name "${name}".`);
    }
    schedules[name] = {
        period: time,
        next: time + Date.now(),
        runOnce: scheduleType === ScheduleType.once,
        count: 0,
    };
    await persistSchedules();
    activateSchedules();
}
async function removeSchedule(name) {
    await initialization;
    const schedule = schedules[name];
    if (!schedule) {
        return;
    }
    if (schedule.runOnce) {
        global.clearTimeout(schedule.activationId);
    }
    else {
        global.clearInterval(schedule.activationId);
    }
    delete schedules[name];
    await persistSchedules();
}
async function removeListener(name) {
    await initialization;
    listeners.delete(name);
}
async function initialize() {
    await reviveSchedules();
}
async function persistSchedules() {
    await storage.set(storageKey, schedules);
}
async function reviveSchedules() {
    const storedSchedules = await storage.get(storageKey);
    if (Object.prototype.toString.call(storedSchedules) !== "[object Object]") {
        warn("Could not restore stored schedules.");
        return;
    }
    schedules = storedSchedules;
    Object.keys(schedules).forEach((name) => {
        delete schedules[name].activationId;
    });
}
function activateSchedules() {
    const now = Date.now();
    Object.entries(schedules).forEach(([name, schedule]) => {
        const delta = schedule.next - now;
        const isDue = delta <= 0;
        const activationKey = "activationId";
        if (activationKey in schedule) {
            return;
        }
        if (!schedule.runOnce) {
            schedule.activationId = global.setInterval(() => emitEvent(name), schedule.period);
            return;
        }
        if (!isDue) {
            schedule.activationId = global.setTimeout(() => emitEvent(name), delta);
            return;
        }
        emitEvent(name);
    });
}
async function emitEvent(name) {
    const schedule = schedules[name];
    const listener = listeners.get(name);
    if (!schedule || !listener) {
        return;
    }
    schedule.count += 1;
    const now = Date.now();
    const callCount = schedule.count;
    listener({ callCount });
    if (schedule.runOnce) {
        await removeSchedule(name);
    }
    else {
        schedule.next = now + schedule.period;
        await persistSchedules();
    }
}
function warn(message) {
    console.warn(`[ScheduledEventEmitter]: ${message}`);
}

;// CONCATENATED MODULE: ./adblockplusui/adblockpluschrome/lib/stats.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module stats */









 // eslint-disable-next-line max-len

const badgeColor = "#646464";
const badgeRefreshRate = 4;
const badgeUpdateTopic = "stats.badgeUpdate";

let eventEmitter = new lib_events/* EventEmitter */.b();
let blockedByPage = new tab_session/* TabSessionStorage */.b("stats:blocked");

/**
 * Gets the number of requests blocked on the given page.
 *
 * @param  {Page} page
 * @return {Number}
 */
async function getBlockedPerPage(page) {
  return (await blockedByPage.get(page.id)) || 0;
}

let activeTabIds = new Set();
let activeTabIdByWindowId = new Map();

let badgeUpdateScheduled = false;

async function updateBadge(tabId) {
  if (!prefs/* Prefs */.N.show_statsinicon) return;

  for (let id of typeof tabId == "undefined" ? activeTabIds : [tabId]) {
    let blockedCount = await blockedByPage.get(id);

    (0,action/* setBadge */.Wb)(
      id,
      blockedCount && {
        color: badgeColor,
        number: blockedCount,
      },
    );
  }
}

function scheduleBadgeUpdate(tabId) {
  if (
    !badgeUpdateScheduled &&
    prefs/* Prefs */.N.show_statsinicon &&
    (typeof tabId === "undefined" || activeTabIds.has(tabId))
  ) {
    setSchedule(badgeUpdateTopic, 1000 / badgeRefreshRate);
    badgeUpdateScheduled = true;
  }
}

setListener(badgeUpdateTopic, async () => {
  badgeUpdateScheduled = false;
  await updateBadge();
});

// Once nagivation for the tab has been committed to (e.g. it's no longer
// being prerendered) we clear its badge, or if some requests were already
// blocked beforehand we display those on the badge now.
browser.webNavigation.onCommitted.addListener(async (details) => {
  if (details.frameId == 0) await updateBadge(details.tabId);
});

async function onBlockableItem({ filter, request }) {
  if (!filter || filter.type != "blocking") return;

  let { tabId } = request;

  await blockedByPage.transaction(async () => {
    let blocked = (await blockedByPage.get(tabId)) || 0;
    ++blocked;

    await blockedByPage.set(tabId, blocked);
    scheduleBadgeUpdate(tabId);

    eventEmitter.emit("blocked_per_page", { tabId, blocked });
  });

  try {
    // Don't update the total for incognito tabs.
    let tab = await browser.tabs.get(tabId);
    if (tab.incognito) return;
  } catch {
    // Ignore if the tab isn't found
    return;
  }

  // Make sure blocked_total is only read after the storage was loaded.
  await prefs/* Prefs */.N.untilLoaded;

  prefs/* Prefs */.N.blocked_total++;
  eventEmitter.emit("blocked_total", prefs/* Prefs */.N.blocked_total);
}

ewe_api.reporting.onBlockableItem.addListener(onBlockableItem);

/**
 * @namespace
 * @static
 */
let Stats = {
  /**
   * Adds a callback that is called when the
   * value of a specified stat changed.
   *
   * @param {string}   stat
   * @param {function} callback
   */
  on(stat, callback) {
    eventEmitter.on(stat, callback);
  },

  /**
   * Removes a callback for the specified stat.
   *
   * @param {string}   stat
   * @param {function} callback
   */
  off(stat, callback) {
    eventEmitter.off(stat, callback);
  },

  /**
   * The total number of blocked requests on non-incognito pages.
   *
   * @type {number}
   */
  get blocked_total() {
    return prefs/* Prefs */.N.blocked_total;
  },
};

prefs/* Prefs */.N.on("show_statsinicon", async () => {
  let tabs = await browser.tabs.query({});
  for (let tab of tabs) {
    if (prefs/* Prefs */.N.show_statsinicon) await updateBadge(tab.id);
    else (0,action/* setBadge */.Wb)(tab.id, null);
  }
});

/**
 * Returns the number of blocked requests for the sender's page.
 *
 * @event "stats.getBlockedPerPage"
 * @returns {number}
 */
port/* port */.O.on("stats.getBlockedPerPage", (message) => getBlockedPerPage(new ext.Page(message.tab)));

/**
 * Returns the total number of blocked requests on non-incognito pages.
 *
 * @event "stats.getBlockedTotal"
 * @returns {number}
 */
port/* port */.O.on("stats.getBlockedTotal", () => Stats.blocked_total);

browser.tabs.query({ active: true }).then((tabs) => {
  for (let tab of tabs) {
    activeTabIds.add(tab.id);
    activeTabIdByWindowId.set(tab.windowId, tab.id);
  }

  scheduleBadgeUpdate();
});

(0,events/* installHandler */.A)("stats", null, (emit, action) => {
  const onChanged = (info) => emit(info);
  Stats.on(action, onChanged);
  return () => Stats.off(action, onChanged);
});

browser.tabs.onActivated.addListener((tab) => {
  let lastActiveTabId = activeTabIdByWindowId.get(tab.windowId);
  if (typeof lastActiveTabId != "undefined") activeTabIds.delete(lastActiveTabId);

  activeTabIds.add(tab.tabId);
  activeTabIdByWindowId.set(tab.windowId, tab.tabId);

  scheduleBadgeUpdate();
});

if ("windows" in browser) {
  browser.windows.onRemoved.addListener((windowId) => {
    activeTabIds.delete(activeTabIdByWindowId.get(windowId));
    activeTabIdByWindowId.delete(windowId);
  });
}

// EXTERNAL MODULE: ./adblock-betafish/prefs/background/index.js + 1 modules
var prefs_background = __webpack_require__(2644);
// EXTERNAL MODULE: ./adblock-betafish/picreplacement/check.js
var check = __webpack_require__(4770);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/allowlisting.js
var allowlisting = __webpack_require__(4336);
// EXTERNAL MODULE: ./adblock-betafish/alias/uninstall.js
var uninstall = __webpack_require__(8624);
// EXTERNAL MODULE: ./adblock-betafish/datacollection.v2.js
var datacollection_v2 = __webpack_require__(7703);
// EXTERNAL MODULE: ./adblock-betafish/localdatacollection.js
var localdatacollection = __webpack_require__(3010);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/index.ts + 1 modules
var utilities_background = __webpack_require__(199);
// EXTERNAL MODULE: ./adblock-betafish/servermessages.js
var servermessages = __webpack_require__(5754);
// EXTERNAL MODULE: ./adblock-betafish/subscriptionadapter.js + 1 modules
var subscriptionadapter = __webpack_require__(6396);
// EXTERNAL MODULE: ./adblock-betafish/picreplacement/sync-service.js
var sync_service = __webpack_require__(9077);
// EXTERNAL MODULE: ./src/filters/shared/index.ts
var shared = __webpack_require__(7057);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/logger.ts
var logger = __webpack_require__(1328);
;// CONCATENATED MODULE: ./src/filters/background/migration.ts






async function isMigrationActive(experimentFlag) {
    const locales = await ewe_api.experiments.getFlag(experimentFlag);
    if (!Array.isArray(locales)) {
        return false;
    }
    const migrationDisabledFlag = await ewe_api.experiments.getFlag("allowlist-migration-disabled");
    if (migrationDisabledFlag) {
        return false;
    }
    const userLocale = browser_polyfill.i18n.getUILanguage();
    return !locales.includes(userLocale);
}
async function migratePopupAllowlistsToSmartAllowlisting() {
    if (!(await isMigrationActive("allowlist-migration-disabled-locale"))) {
        return false;
    }
    const origins = [shared.FilterOrigin.popup, shared.FilterOrigin.wizard];
    const minDate = new Date(2020, 10, 11);
    const maxDate = new Date(2023, 11, 1);
    const filters = await ewe_api.filters.getUserFilters();
    const documentAllowLists = filters.filter((filter) => filter.type === "allowing" && filter.text.includes("$document"));
    const documentAllowListsWithMetadata = await Promise.all(documentAllowLists.map(async (filter) => {
        const metadata = await ewe_api.filters.getMetadata(filter.text);
        return { ...filter, metadata };
    }));
    const nonSmartAllowlists = documentAllowListsWithMetadata.filter(({ metadata }) => !(metadata === null || metadata === void 0 ? void 0 : metadata.autoExtendMs) && !(metadata === null || metadata === void 0 ? void 0 : metadata.expiresAt));
    const allowlistsFromGfc = nonSmartAllowlists.filter(({ metadata }) => (metadata === null || metadata === void 0 ? void 0 : metadata.origin) === shared.FilterOrigin.web &&
        (metadata === null || metadata === void 0 ? void 0 : metadata.created) &&
        metadata.created >= minDate.getTime() &&
        metadata.created <= maxDate.getTime());
    const allowlistsToTransition = nonSmartAllowlists.filter(({ metadata }) => !(metadata === null || metadata === void 0 ? void 0 : metadata.autoExtendMs) && !(metadata === null || metadata === void 0 ? void 0 : metadata.expiresAt) && origins.includes(metadata === null || metadata === void 0 ? void 0 : metadata.origin));
    const autoExtendMs = prefs/* Prefs */.N.get("allowlisting_auto_extend_ms");
    await Promise.all(allowlistsToTransition.map(async ({ text: filterText, metadata }) => {
        await ewe_api.filters.setMetadata(filterText, {
            ...metadata,
            autoExtendMs,
            expiresAt: Date.now() + autoExtendMs,
        });
    }));
    servermessages/* default */.A.recordGeneralMessage("migrated_popup_allowlists", null, {
        transitionedCount: allowlistsToTransition.length,
        fromGfcCount: allowlistsFromGfc.length,
        allowlistsLeftCount: nonSmartAllowlists.length - allowlistsToTransition.length - allowlistsFromGfc.length,
    });
    return true;
}
async function migrateAllAllowlistsToSmartAllowlisting() {
    if (!(await isMigrationActive("all-allowlists-migration-disabled-locale"))) {
        return false;
    }
    const filters = await ewe_api.filters.getUserFilters();
    const documentAllowLists = filters.filter((filter) => filter.type === "allowing" && filter.text.includes("$document"));
    const documentAllowListsWithMetadata = await Promise.all(documentAllowLists.map(async (filter) => {
        const metadata = await ewe_api.filters.getMetadata(filter.text);
        return { ...filter, metadata };
    }));
    const allowlistsFromWeb = documentAllowListsWithMetadata.filter(({ metadata }) => (metadata === null || metadata === void 0 ? void 0 : metadata.origin) === shared.FilterOrigin.web);
    const allowlistsToTransition = documentAllowListsWithMetadata.filter(({ metadata }) => !(metadata === null || metadata === void 0 ? void 0 : metadata.autoExtendMs) && !(metadata === null || metadata === void 0 ? void 0 : metadata.expiresAt) && !(metadata === null || metadata === void 0 ? void 0 : metadata.origin));
    const autoExtendMs = prefs/* Prefs */.N.get("allowlisting_auto_extend_ms");
    await Promise.all(allowlistsToTransition.map(async ({ text: filterText, metadata }) => {
        await ewe_api.filters.setMetadata(filterText, {
            ...metadata,
            autoExtendMs,
            expiresAt: Date.now() + autoExtendMs,
        });
    }));
    servermessages/* default */.A.recordGeneralMessage("migrated_all_allowlists", null, {
        transitionedCount: allowlistsToTransition.length,
        fromGfcCount: allowlistsFromWeb.length,
        allowlistsLeftCount: documentAllowListsWithMetadata.length -
            allowlistsToTransition.length -
            allowlistsFromWeb.length,
    });
    return true;
}
async function migration_start() {
    await prefs/* Prefs */.N.untilLoaded;
    const prefsKeyPopupMigration = "migration_popup_to_smart_allowlist_complete";
    const prefsKeyAllMigration = "migration_all_to_smart_allowlist_complete";
    if (!prefs/* Prefs */.N.get(prefsKeyPopupMigration)) {
        try {
            const migrated = await migratePopupAllowlistsToSmartAllowlisting();
            await prefs/* Prefs */.N.set(prefsKeyPopupMigration, migrated);
        }
        catch (error) {
            await prefs/* Prefs */.N.set(prefsKeyPopupMigration, false);
            (0,logger/* reportAndLogError */.A1)(error, "Failed to migrate allowlists from popup to smart allowlisting");
        }
    }
    if (!prefs/* Prefs */.N.get(prefsKeyAllMigration)) {
        try {
            const migrated = await migrateAllAllowlistsToSmartAllowlisting();
            await prefs/* Prefs */.N.set(prefsKeyAllMigration, migrated);
        }
        catch (error) {
            await prefs/* Prefs */.N.set(prefsKeyAllMigration, false);
            (0,logger/* reportAndLogError */.A1)(error, "Failed to migrate all allowlists to smart allowlisting");
        }
    }
}

;// CONCATENATED MODULE: ./src/filters/background/index.ts


;// CONCATENATED MODULE: ./adblock-betafish/ipm/cookie-banner-detection/content/detection.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/**
 * This script will be injected into the main world of a the top-level frame
 * of a website.
 *
 * It will use the TCF API to detect cookie banner. For more on the TCF API,
 * please see https://github.com/InteractiveAdvertisingBureau/GDPR-Transparency-and-Consent-Framework/blob/master/TCFv2/IAB%20Tech%20Lab%20-%20CMP%20API%20v2.md
 */
function setupDetection() {
  /**
   * The name of the CustomEvent sent from main to isolated world.
   */
  const detectionEventName = "CookieBannerDetected";
  /**
   * The name of the key where the TCF API is going to be found at.
   */
  const tcfKeyName = "__tcfapi";

  /**
   * The points in time after this script is executed when we check for the
   * TCF API. Values are in ms.
   */
  const detectionPoints = [500, 1000, 2000];

  /**
   * Whether we are done with looking for the TCF API and setting up listeners.
   */
  let isSetupComplete = false;

  /**
   * Checks whether the TCF API is available.
   *
   * @returns Whether the TFC API is available
   */
  function hasTCF() {
    return typeof window[tcfKeyName] !== "undefined";
  }

  /**
   * Sets up the TCF API listener
   */
  function setupListener() {
    try {
      if (window[tcfKeyName]) {
        window[tcfKeyName]("addEventListener", 2, handleTCFEvent);
        isSetupComplete = true;
      }
    } catch (_) {
      // No way to recover from this.
    }
  }

  /**
   * Takes an TCF event and checks if it is an event that means that a cookie
   * consent banner has just been shown.
   *
   * @param tcData The TCData passed from the API
   * @param success Whether the API could process our request
   */
  function handleTCFEvent(tcData, success) {
    if (!success || tcData.eventStatus !== "cmpuishown") {
      return;
    }

    document.dispatchEvent(new CustomEvent(detectionEventName));
    if (window[tcfKeyName]) {
      window[tcfKeyName]("removeEventListener", 2, () => {}, tcData.listenerId);
    }
  }

  /**
   * Checks if the TCF API is present, and if so, sets up a listener for TCF
   * events.
   */
  function detectCookieBanners() {
    if (!hasTCF()) {
      return;
    }

    setupListener();
  }

  /**
   * Starts the cookie banner detection feature
   */
  function start() {
    const timerIds = detectionPoints.map((delay) =>
      setTimeout(() => {
        if (isSetupComplete) {
          timerIds.forEach((timerId) => clearTimeout(timerId));
          return;
        }
        detectCookieBanners();
      }, delay),
    );
  }

  start();
}

;// CONCATENATED MODULE: ./adblock-betafish/ipm/cookie-banner-detection/background/script-injector.ts

function getMV2ScriptToInject(injectedFunction, ...params) {
    const args = JSON.stringify([...params]);
    const stringified = JSON.stringify(injectedFunction.toString());
    const wrapped = `"(${stringified.slice(1, -1)}).apply(null,${JSON.stringify(args).slice(1, -1)});"`;
    return `
    function injectScriptInMainContext(executable) {
      let script = document.createElement("script");
      script.type = "application/javascript";
      script.async = false;

      // Firefox 58 only bypasses site CSPs when assigning to 'src',
      // while Chrome 67 and Microsoft Edge (tested on 44.17763.1.0)
      // only bypass site CSPs when using 'textContent'.
      if (typeof netscape != "undefined" && typeof browser != "undefined") {
        let url = URL.createObjectURL(new Blob([executable]));
        script.src = url;
        document.documentElement.appendChild(script);
        URL.revokeObjectURL(url);
      } else {
        script.textContent = executable;
        document.documentElement.appendChild(script);
      }

      document.documentElement.removeChild(script);
    };
    {
      const executable = ${wrapped};
      injectScriptInMainContext(executable);
    }
  `;
}
async function executeFunction(tabId, frameId, func, args = []) {
    var _a;
    if ((_a = (browser_polyfill_default()).scripting) === null || _a === void 0 ? void 0 : _a.executeScript) {
        const world = "MAIN";
        const injection = {
            target: { tabId, frameIds: [frameId] },
            world,
            injectImmediately: true,
            func,
            args,
        };
        return await browser_polyfill_default().scripting.executeScript(injection);
    }
    const code = getMV2ScriptToInject(func, ...args);
    return await browser_polyfill_default().tabs.executeScript(tabId, {
        frameId,
        code,
        matchAboutBlank: true,
        runAt: "document_start",
    });
}

;// CONCATENATED MODULE: ./adblock-betafish/ipm/cookie-banner-detection/background/cookie-banner-detection.ts



async function injectDetectionScript(details) {
    const { tabId, frameId } = details;
    if (details.frameId !== 0) {
        return;
    }
    try {
        await executeFunction(tabId, frameId, setupDetection);
    }
    catch (_) {
    }
}
function cookie_banner_detection_start() {
    browser_polyfill_default().webNavigation.onCommitted.addListener((details) => {
        void injectDetectionScript(details);
    });
}

;// CONCATENATED MODULE: ./adblock-betafish/ipm/cookie-banner-detection/background/index.ts


// EXTERNAL MODULE: ./adblock-betafish/utilities/background/bg-functions.js
var bg_functions = __webpack_require__(7656);
;// CONCATENATED MODULE: ./adblock-betafish/background.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser, ext, twitchChannelNamePages, ytChannelNamePages */






































// Message verification
const trustedBaseUrl = browser.runtime.getURL("");
const gabHostnames = [
  "https://getadblock.com",
  "https://dev.getadblock.com",
  "https://dev1.getadblock.com",
  "https://dev2.getadblock.com",
  "https://vpn.getadblock.com",
  "https://help.getadblock.com",
];

const isTrustedSender = (sender) => sender.url.startsWith(trustedBaseUrl);

const isTrustedTarget = (url) =>
  url.startsWith(trustedBaseUrl) || gabHostnames.includes(new URL(url).origin);

const isTrustedSenderDomain = (sender) => {
  if (sender.origin) {
    return gabHostnames.includes(sender.origin);
  }
  if (sender.url) {
    return gabHostnames.includes(new URL(sender.url).origin);
  }
  return false;
};
const adblocBetaID = "pljaalgmajnlogcgiohkhdmgpomjcihk";

// eslint-disable-next-line no-restricted-globals
Object.assign(self, {
  Prefs: prefs/* Prefs */.N,
  info: info_chrome_js,
  getBlockedPerPage: getBlockedPerPage,
  SyncService: sync_service["default"],
  LocalDataCollection: localdatacollection/* default */.A,
  ServerMessages: servermessages/* default */.A,
  SubscriptionAdapter: subscriptionadapter/* default */.A,
  TELEMETRY: telemetry_background/* TELEMETRY */.Gy,
  IPMTelemetry: telemetry_background/* IPM */.bm,
  DataCollectionV2: datacollection_v2/* default */.A,
  getNewBadgeTextReason: icon/* getNewBadgeTextReason */.lq,
  ewe: ewe_api,
  License: check/* License */.u8,
  channels: check/* channels */.BM,
  isTrustedSender,
  isTrustedTarget,
  isTrustedSenderDomain,
});

// CUSTOM FILTERS

const isSelectorFilter = function (text) {
  // This returns true for both hiding rules as hiding whitelist rules
  // This means that you'll first have to check if something is an excluded rule
  // before checking this, if the difference matters.
  return /#@?#./.test(text);
};

// custom filter countCache singleton.
const countCache = (function countCache() {
  let cache;

  // Update custom filter count stored in storage
  const updateCustomFilterCount = function () {
    (0,bg_functions/* chromeStorageSetHelper */.AX)("custom_filter_count", cache);
  };

  return {
    // Update custom filter count cache and value stored in storage.
    // Inputs: new_count_map:count map - count map to replace existing count
    // cache
    updateCustomFilterCountMap(newCountMap) {
      cache = newCountMap || cache;
      updateCustomFilterCount();
    },

    // Remove custom filter count for host
    // Inputs: host:string - url of the host
    removeCustomFilterCount(host) {
      if (host && cache[host]) {
        delete cache[host];
        updateCustomFilterCount();
      }
    },

    // Get current custom filter count for a particular domain
    // Inputs: host:string - url of the host
    getCustomFilterCount(host) {
      let customCount = 0;
      if (cache) {
        customCount = cache[host];
      }
      return customCount || 0;
    },

    // Add 1 to custom filter count for the filters domain.
    // Inputs: filter:string - line of text to be added to custom filters.
    addCustomFilterCount(filter) {
      const host = filter.split("##")[0];
      cache[host] = this.getCustomFilterCount(host) + 1;
      updateCustomFilterCount();
    },

    init() {
      browser.storage.local.get("custom_filter_count").then((response) => {
        cache = response.custom_filter_count || {};
      });
    },
  };
})();
countCache.init();

const isAllowlistFilter = function (text) {
  return /^@@/.test(text);
};

// Add a new custom filter entry.
// Inputs: filter:string - line of text to add to custom filters.
//         origin:string - the source or trigger for the filter list entry
// Returns: null if succesfull, otherwise an exception
const addCustomFilter = async function (filterText, origin) {
  try {
    const response = ewe_api.filters.validate(filterText);
    if (response) {
      return response;
    }

    const metadata = (0,bg_functions/* createFilterMetaData */.yf)(origin);
    if (
      isAllowlistFilter(filterText) &&
      [shared.FilterOrigin.wizard, shared.FilterOrigin.youtube, shared.FilterOrigin.popup].includes(origin)
    ) {
      const autoExtendMs = prefs/* Prefs */.N.get("allowlisting_auto_extend_ms");
      metadata.expiresAt = Date.now() + autoExtendMs;
      metadata.autoExtendMs = autoExtendMs;
    }

    await ewe_api.filters.add([filterText], metadata);
    await ewe_api.filters.enable([filterText]);
    if (isSelectorFilter(filterText)) {
      countCache.addCustomFilterCount(filterText);
    }
    return null;
  } catch (ex) {
    // convert to a string so that Safari can pass
    // it back to content scripts
    return ex.toString();
  }
};

// Removes a custom filter entry.
// Inputs: host:domain of the custom filters to be reset.
const removeCustomFilter = async function (host) {
  const customFilters = await (0,filter_utils/* getUserFilters */.j)();
  if (!customFilters || !customFilters.length === 0) {
    return;
  }

  const identifier = host;

  for (let i = 0; i < customFilters.length; i++) {
    const entry = customFilters[i];
    // If the identifier is at the start of the entry
    // then delete it.
    if (entry.text.indexOf(identifier) === 0) {
      ewe_api.filters.remove([entry.text]);
    }
  }
};

// Entry point for customize.js, used to update custom filter count cache.
const updateCustomFilterCountMap = function (newCountMap) {
  // Firefox passes weak references to objects, so we need a local copy
  const localCountMap = JSON.parse(JSON.stringify(newCountMap));
  countCache.updateCustomFilterCountMap(localCountMap);
};

const removeCustomFilterForHost = function (host) {
  if (countCache.getCustomFilterCount(host)) {
    removeCustomFilter(host);
    countCache.removeCustomFilterCount(host);
  }
};

// Currently, Firefox doesn't allow the background page to use alert() or confirm(),
// so some JavaScript is injected into the active tab, which does the confirmation for us.
// If the user confirms the removal of the entries, then they are removed, and the page reloaded.
const confirmRemovalOfCustomFiltersOnHost = function (host, activeTabId) {
  if (!browser.tabs.executeScript) {
    /* eslint-disable-next-line no-console */
    console.error("confirmRemovalOfCustomFiltersOnHost disable for MV3 extensions");
    return; // this function isn't supported under MV3, and shouldn't be invoked for MV3 extensions.
  }
  const customFilterCount = countCache.getCustomFilterCount(host);
  const confirmationText = browser.i18n.getMessage("confirm_undo_custom_filters", [
    customFilterCount,
    host,
  ]);
  const messageListenerFN = function (request) {
    browser.runtime.onMessage.removeListener(messageListenerFN);
    if (request === `remove_custom_filters_on_host${host}:true`) {
      removeCustomFilterForHost(host);
      browser.tabs.reload(activeTabId);
    }
  };

  browser.runtime.onMessage.addListener(messageListenerFN);
  /* eslint-disable prefer-template */
  const codeToExecute =
    'var host = "' +
    host +
    '"; var confirmResponse = confirm("' +
    confirmationText +
    '"); browser.runtime.sendMessage("remove_custom_filters_on_host" + host + ":" + confirmResponse); ';
  const details = { allFrames: false, code: codeToExecute };
  browser.tabs.executeScript(activeTabId, details);
};
browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (
    message.command !== "confirmRemovalOfCustomFiltersOnHost" ||
    !message.host ||
    !message.activeTabId
  ) {
    return;
  }
  confirmRemovalOfCustomFiltersOnHost(message.host, message.activeTabId);
  sendResponse({});
});

browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (message.command !== "removeCustomFilterForHost" || !message.host) {
    return;
  }
  removeCustomFilterForHost(message.host);
  sendResponse({});
});

// Reload already opened tab
// Input:
// id: integer - id of the tab which should be reloaded
const reloadTab = function (id, callback) {
  let tabId = id;
  const localCallback = callback;
  const listener = function (updatedTabId, changeInfo, tab) {
    if (changeInfo.status === "complete" && tab.status === "complete") {
      setTimeout(() => {
        browser.tabs.sendMessage(updatedTabId, { command: "reloadcomplete" });
        if (typeof localCallback === "function") {
          localCallback(tab);
        }
        browser.tabs.onUpdated.removeListener(listener);
      }, 2000);
    }
  };

  if (typeof tabId === "string") {
    tabId = parseInt(tabId, 10);
  }
  browser.tabs.onUpdated.addListener(listener);
  browser.tabs.reload(tabId, { bypassCache: true });
};

const isSelectorExcludeFilter = function (text) {
  return /#@#./.test(text);
};

const getAdblockUserId = async function () {
  return (0,id_background/* getUserId */.F)();
};

// INFO ABOUT CURRENT PAGE

// Returns true if the url cannot be blocked
const pageIsUnblockable = function (url) {
  if (!url) {
    // Protect against empty URLs - e.g. Safari empty/bookmarks/top sites page
    return true;
  }
  let scheme = "";
  if (!url.protocol) {
    scheme = (0,bg_functions/* parseUri */.wY)(url).protocol;
  } else {
    scheme = url.protocol;
  }

  return scheme !== "http:" && scheme !== "https:" && scheme !== "feed:";
};

// Returns true if the page is whitelisted.
// Called from a content script
const pageIsWhitelisted = async function (page) {
  const whitelisted = !!(await ewe_api.filters.getAllowingFilters(page.id).length);
  return whitelisted !== undefined && whitelisted !== null;
};

const getTab = function (tabId) {
  return new Promise((resolve) => {
    if (tabId) {
      let id = tabId;
      if (typeof id === "string") {
        id = parseInt(id, 10);
      }
      browser.tabs.get(id).then((tab) => {
        resolve(tab);
      });
    } else {
      browser.tabs
        .query({
          active: true,
          lastFocusedWindow: true,
        })
        .then((tabs) => {
          if (tabs.length === 0) {
            resolve(); // For example: only the background devtools or a popup are opened
          }
          resolve(tabs[0]);
        });
    }
  });
};

// Get interesting information about the current tab.
// Inputs:
// secondTime: bool - whether this is a recursive call
// info object passed to resolve: {
// page: Page object
// tab: Tab object
// whitelisted: bool - whether the current tab's URL is whitelisted.
// disabled_site: bool - true if the url is e.g. about:blank or the
// Extension Gallery, where extensions don't run.
// settings: Settings object
// paused: bool - whether AdBlock is paused
// domainPaused: bool - whether the current tab's URL is paused
// blockCountPage: int - number of ads blocked on the current page
// blockCountTotal: int - total number of ads blocked since install
// customFilterCount: int - number of custom rules for the current tab's URL
// showMABEnrollment: bool - whether to show MAB enrollment
// popupMenuThemeCTA: string - name of current popup menu CTA theme
// lastGetStatusCode: int - status code for last GET request
// lastGetErrorResponse: error object - error response for last GET request
// lastPostStatusCode: int - status code for last POST request
// allowlistRuleText: string - allowlist rule text for use on YouTube and Twitch
// }
// Returns: Promise
const getCurrentTabInfo = function (secondTime, tabId) {
  return new Promise((resolve) => {
    getTab(tabId).then(async (tab) => {
      if (tab && !tab.url) {
        // Issue 6877: tab URL is not set directly after you opened a window
        // using window.open()
        if (!secondTime) {
          setTimeout(() => {
            getCurrentTabInfo(true);
          }, 250);
        }
        return resolve();
      }
      try {
        const page = new ext.Page(tab);
        const disabledSite = pageIsUnblockable(page.url.href);
        const customFilterCheckUrl = disabledSite ? undefined : page.url.hostname;
        const result = {
          disabledSite,
          url: String(page.url || tab.url),
          id: page.id,
          settings: (0,prefs_background/* getSettings */.mt)(),
          paused: (0,pause_background/* adblockIsPaused */.Zl)(),
          domainPaused: await (0,pause_background/* isTabTemporaryAllowlisted */.tk)(page.id),
          blockCountPage: await getBlockedPerPage(tab),
          blockCountTotal: Stats.blocked_total,
          customFilterCount: countCache.getCustomFilterCount(customFilterCheckUrl),
          showMABEnrollment: check/* License */.u8.shouldShowMyAdBlockEnrollment(),
          popupMenuThemeCTA: check/* License */.u8.getCurrentPopupMenuThemeCTA(),
          showDcCTA: check/* License */.u8.shouldShowPremiumDcCTA(),
          lastGetStatusCode: sync_service["default"].getLastGetStatusCode(),
          lastGetErrorResponse: sync_service["default"].getLastGetErrorResponse(),
          lastPostStatusCode: sync_service["default"].getLastPostStatusCode(),
          newBadgeTextReason: (0,icon/* getNewBadgeTextReason */.lq)(),
          premiumPayURL: check/* License */.u8.MAB_CONFIG.payURL,
        };
        if (!disabledSite) {
          result.whitelisted = !!(await ewe_api.filters.getAllowingFilters(page.id)).length;
          result.whitelistedText = await ewe_api.filters.getAllowingFilters(page.id);
        }
        if (check/* License */.u8 && check/* License */.u8.isActiveLicense()) {
          result.activeLicense = true;
          result.subscriptions = await subscriptionadapter/* default */.A.getSubscriptionsMinusText();
        }
        if (
          (0,prefs_background/* getSettings */.mt)() &&
          (0,prefs_background/* getSettings */.mt)().youtube_channel_whitelist &&
          (0,bg_functions/* parseUri */.wY)(tab.url).hostname === "www.youtube.com"
        ) {
          result.youTubeChannelName = ytChannelNamePages.get(page.id);
          // handle the odd occurence of when the  YT Channel Name
          // isn't available in the ytChannelNamePages map
          // obtain the channel name from the URL
          // for instance, when the forward / back button is clicked
          if (!result.youTubeChannelName && /ab_channel/.test(tab.url)) {
            result.youTubeChannelName = bg_functions/* parseUri */.wY.parseSearch(tab.url).ab_channel;
          }
          if (result.youTubeChannelName) {
            result.allowlistRuleText = `@@||www.youtube.com/*${result.youTubeChannelName}|$document`;
          }
        }
        if (
          twitchChannelNamePages &&
          (0,prefs_background/* getSettings */.mt)() &&
          (0,prefs_background/* getSettings */.mt)().twitch_channel_allowlist &&
          (0,bg_functions/* parseUri */.wY)(tab.url).hostname === "www.twitch.tv"
        ) {
          result.twitchChannelName = twitchChannelNamePages.get(page.id);
          if (result.twitchChannelName) {
            result.allowlistRuleText = `@@||twitch.tv/*${result.twitchChannelName}^$document`;
          }
        }
        return resolve(result);
      } catch (err) {
        return resolve({ errorStr: err.toString(), stack: err.stack, message: err.message });
      }
    });
  });
};

const premiumCtaViewed = "premium_cta_viewed";
const versionStorageKey = "last_known_version";
const isUpdatePageEngaged = true;

const showUpdatePage = async function (details) {
  let updateTabRetryCount = 0;

  const getUpdatedURL = async function () {
    const userID = await (0,id_background/* getUserId */.F)();
    const updatedURL = new URL("https://getadblock.com/update/");
    updatedURL.searchParams.append("f", telemetry_background/* TELEMETRY */.Gy.flavor.toLowerCase());
    updatedURL.searchParams.append("version", browser.runtime.getManifest().version);
    updatedURL.searchParams.append("u", userID);
    updatedURL.searchParams.append("bc", prefs/* Prefs */.N.blocked_total);
    updatedURL.searchParams.append("rt", updateTabRetryCount);
    return updatedURL.href;
  };

  const waitForUserAction = function () {
    browser.tabs.onCreated.removeListener(waitForUserAction);
    setTimeout(() => {
      updateTabRetryCount += 1;
      // eslint-disable-next-line no-use-before-define
      openUpdatedPage();
    }, 10000); // 10 seconds
  };

  const openUpdatedPage = async function () {
    const updatedURL = await getUpdatedURL();
    browser.tabs.create({ url: updatedURL });
  };

  const shouldShowUpdate = async function () {
    const checkQueryState = async function () {
      const state = await browser.idle.queryState(30);
      if (state === "active") {
        openUpdatedPage();
      } else {
        browser.tabs.onCreated.removeListener(waitForUserAction);
        browser.tabs.onCreated.addListener(waitForUserAction);
      }
    };

    const checkLicense = function () {
      if (!check/* License */.u8.isActiveLicense()) {
        checkQueryState();
      }
    };

    const extensionInfo = await browser.management.getSelf();
    if (extensionInfo.installType !== "admin") {
      await check/* License */.u8.ready();
      checkLicense();
    }
  };

  // only open the /update page for English, French, German, Spanish and Brazilian/Portugese users.
  const shouldShowUpdateForLocale = function () {
    const slashUpdateLanguages = ["en", "fr", "de", "es", "nl"];
    const locale = (0,bg_functions/* determineUserLanguage */.v0)();
    const language = locale.substring(0, 2);
    return slashUpdateLanguages.includes(language);
  };

  if (
    details.reason === "update" &&
    info_chrome_js.platform === "gecko" &&
    shouldShowUpdateForLocale() &&
    browser.runtime.id !== adblocBetaID
  ) {
    await prefs_background/* settings */.W0.onload();
    if (!(0,prefs_background/* getSettings */.mt)().suppress_update_page) {
      await (0,id_background/* getUserId */.F)();
      await prefs/* Prefs */.N.untilLoaded;
      shouldShowUpdate();
    }
  }
};

/*
  If we call browser.storage.local.get with an undefined key, we get the whole list back.
  This function passes false as the default result if the key does not exist,
  so it works as we expect when checking for defined properties on an object.
*/
const getValueOrFalse = async (key) => {
  const result = await browser.storage.local.get({ [key]: false });
  return result[key];
};

browser.runtime.onInstalled.addListener(async (details) => {
  // Display beta page after each update for beta-users only
  if (
    (details.reason === "update" || details.reason === "install") &&
    browser.runtime.id === adblocBetaID
  ) {
    browser.tabs.create({ url: "https://getadblock.com/beta" });
  }

  // Show the new callout to everyone for the new premium popup until they click
  const alreadyViewedCta = await getValueOrFalse(premiumCtaViewed);
  if (details.reason === "update" && !alreadyViewedCta) {
    await (0,icon/* showIconBadgeCTA */._7)(icon/* NEW_BADGE_REASONS */.Vz.UPDATE_FOR_EVERYONE);
    void browser.storage.local.set({ [premiumCtaViewed]: true });
  }

  // We want to move away from localStorage, so remove item if it exists.
  if (typeof localStorage !== "undefined") {
    localStorage.removeItem(versionStorageKey);
  }

  if (isUpdatePageEngaged) {
    await showUpdatePage(details);
  }
  // Update version in browser.storage.local.
  void browser.storage.local.set({ [versionStorageKey]: browser.runtime.getManifest().version });
});

const openTab = function (url) {
  browser.tabs.create({ url });
};

// Called when user explicitly requests filter list updates
async function updateFilterLists() {
  const subscriptions = await ewe_api.subscriptions.getSubscriptions();
  subscriptions.forEach(async (subscription) => {
    await ewe_api.subscriptions.sync(subscription.url);
  });
}

// Checks if the filter lists are currently in the process of
// updating and if there were errors the last time they were
// updated
async function checkUpdateProgress() {
  let inProgress = false;
  let filterError = false;
  const subscriptions = await ewe_api.subscriptions.getSubscriptions();
  subscriptions.forEach(async (subscription) => {
    if (subscription.downloading) {
      inProgress = true;
    } else if (subscription.downloadStatus && subscription.downloadStatus !== "synchronize_ok") {
      filterError = true;
    }
  });
  return { inProgress, filterError };
}

/*
 * Listens on allowlisting events and logs when an allowlisting
 * filter was renewed or expired.
 */
function addAllowlistingListeners() {
  // Log event when a smart allowlist was renewed
  ewe_api.filters.onRenewed.addListener((filter) => {
    servermessages/* default */.A.recordAllowlistEvent("allowlisting_renewed", filter.metadata.autoExtendMs);
  });

  // Log event when a smart allowlist expired
  ewe_api.filters.onExpired.addListener((filter) => {
    const { autoExtendMs } = filter.metadata;

    if (autoExtendMs) {
      servermessages/* default */.A.recordAllowlistEvent("allowlisting_expired", autoExtendMs);
    }
  });
}

subscriptionInit/* initialize */.n
  .then(async () => {
    await (0,contentFiltering/* start */.n)();
    ewe_api.cdp.setPremiumStatusCallback(async () => {
      await check/* License */.u8.ready();
      return Boolean(check/* License */.u8.isActiveLicense());
    });
    await (0,id_background/* getUserId */.F)();
    telemetry_background/* TELEMETRY */.Gy.start();
    (0,uninstall/* setUninstallURL */.e)();
    await telemetry_background/* IPM */.bm.untilLoaded();
    telemetry_background/* IPM */.bm.start();
    await (0,telemetry_background/* startTelemetryOptOutListener */.FU)();
    await (0,telemetry_background/* startCdpOptOutListener */.JD)();
    (0,allowlisting/* revalidateAllowlistingStates */.pf)();
    prefs_background/* migrateUserData */.$1();
    start({
      addTrustedMessageTypes: ext.addTrustedMessageTypes,
      logger: utilities_background,
      port: port/* port */.O,
      prefs: prefs/* Prefs */.N,
      sendAdWallEvents: servermessages/* default */.A.recordAdWallMessage,
      isPremiumActive: check/* License */.u8.isActiveLicense,
    });
    public_api_start({
      port: port/* port */.O,
      addTrustedMessageTypes: ext.addTrustedMessageTypes,
      isPremiumActive: check/* License */.u8.isActiveLicense,
      getEncodedLicense: check/* License */.u8.getBypassPayload,
    });
    addAllowlistingListeners();
    await migration_start();
    await (0,background/* start */.ni)({
      logger: utilities_background,
      prefs: prefs/* Prefs */.N,
      port: port/* port */.O,
      addTrustedMessageTypes: ext.addTrustedMessageTypes,
    });
    cookie_banner_detection_start();
  })
  .catch((e) => {
    const hasInternalError = /internal error/i.test(e.message);
    if (hasInternalError) {
      // Send the error message to the log server when internal error occurs.
      // We want to know the amount of users that are affected by this issue,
      // as well which rulesets are affected. The ruleset id will be added to
      // the error message by the WebExt SDK.
      servermessages/* default */.A.recordErrorMessage("internal_error", {
        errorMsg: e.message,
      });
    } else {
      // Send anonymous event to the log server in case there was an error with
      // initializing the extension.
      servermessages/* default */.A.recordAnonymousErrorMessage("initialization_error");
    }
    throw e;
  });

// Create the "blockage stats" for the uninstall logic ...
browser.runtime.onInstalled.addListener((details) => {
  if (details.reason === "install") {
    browser.storage.local.get("blockage_stats").then((response) => {
      const { blockage_stats } = response;
      if (!blockage_stats) {
        const data = {};
        data.start = Date.now();
        data.version = 1;
        (0,bg_functions/* chromeStorageSetHelper */.AX)("blockage_stats", data);
      }
    });
  }
});

// Attach methods to window
// eslint-disable-next-line no-restricted-globals
Object.assign(self, {
  adblockIsPaused: pause_background/* adblockIsPaused */.Zl,
  getUserFilters: filter_utils/* getUserFilters */.j,
  updateFilterLists,
  checkUpdateProgress,
  getDebugInfo: debug_background/* getDebugInfo */.MI,
  openTab,
  pageIsWhitelisted,
  pageIsUnblockable,
  getCurrentTabInfo,
  getAdblockUserId,
  addCustomFilter,
  removeCustomFilter,
  countCache,
  updateCustomFilterCountMap,
  removeCustomFilterForHost,
  reloadTab,
  isSelectorFilter,
  isAllowlistFilter,
  isSelectorExcludeFilter,
  pausedFilterText1: pause_background/* pausedFilterText1 */.fd,
  pausedFilterText2: pause_background/* pausedFilterText2 */.m,
  versionStorageKey,
  getCustomFilterMetaData: debug_background/* getCustomFilterMetaData */.JP,
});


/***/ }),

/***/ 4076:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony import */ var prefs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2680);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _src_pause_background__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4255);
/* harmony import */ var _src_filters_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7057);
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_action__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(5557);
/* harmony import */ var _servermessages__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(5754);
/* harmony import */ var _utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(7656);
/* harmony import */ var _messaging_messagevalidator__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(9247);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser, ext, adblockIsPaused,
   License, reloadTab, getSettings, */











const updateBadge = async function (tab) {
  if (!tab || !tab.active) {
    return;
  }

  if (adblockIsPaused() || !!(await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.filters.getAllowingFilters(tab.id)).length) {
    (0,_adblockplusui_adblockpluschrome_lib_action__WEBPACK_IMPORTED_MODULE_4__/* .setBadge */ .Wb)(tab.id, { number: "" });
  }
};

const updateContextMenus = function (tab) {
  if (tab && tab.active) {
    const page = new ext.Page(tab);
    // eslint-disable-next-line no-use-before-define
    updateContextMenuItems(page);
  }
};

const updateButtonUIAndContextMenus = async function (tabArg) {
  if (tabArg) {
    updateBadge(tabArg);
    updateContextMenus(tabArg);
    return;
  }
  const tabs = await browser.tabs.query({});
  for (const tab of tabs) {
    updateBadge(tab);
    updateContextMenus(tab);
  }
};

// Bounce messages back to content scripts.
const emitPageBroadcast = (function emitBroadcast() {
  const injectMap = {
    topOpenWhitelistUI: {
      allFrames: false,
      include: [
        "jquery-3.5.1.min.js",
        "globals-front.js",
        "adblock-uiscripts-load_wizard_resources.js",
        "adblock-uiscripts-top_open_whitelist_ui.js",
      ],
    },
    topOpenWhitelistCompletionUI: {
      allFrames: false,
      include: [
        "jquery-3.5.1.min.js",
        "globals-front.js",
        "adblock-uiscripts-load_wizard_resources.js",
        "adblock-uiscripts-top_open_whitelist_completion_ui.js",
      ],
    },
    topOpenBlacklistUI: {
      allFrames: false,
      include: [
        "jquery-3.5.1.min.js",
        "purify.min.js",
        "globals-front.js",
        "adblock-uiscripts-load_wizard_resources.js",
        "adblock-uiscripts-blacklisting-overlay.js",
        "adblock-uiscripts-blacklisting-clickwatcher.js",
        "adblock-uiscripts-blacklisting-elementchain.js",
        "adblock-uiscripts-blacklisting-blacklistui.js",
        "adblock-uiscripts-top_open_blacklist_ui.js",
      ],
    },
    sendContentToBack: {
      allFrames: true,
      include: ["adblock-uiscripts-send_content_to_back.js"],
    },
  };

  // Inject the required scripts to execute fnName(parameter) in
  // the given tab.
  // Inputs: fnName:string name of function to execute on tab.
  //         fnName must exist in injectMap above.
  //         parameter:object to pass to fnName.  Must be JSON.stringify()able.
  //         alreadyInjected?:int used to recursively inject required scripts.
  //         tabID:int representing the ID of the tab to execute in.
  //         tabID defaults to the active tab
  const executeOnTab = async function (fnName, parameter, alreadyInjected, tabID) {
    const injectedSoFar = alreadyInjected || 0;
    const data = injectMap[fnName];
    const details = { allFrames: data.allFrames };

    if ("scripting" in browser) {
      await browser.scripting
        .executeScript({
          target: { tabId: tabID, allFrames: data.allFrames },
          files: data.include,
        })
        .catch(_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_6__/* .log */ .Rm);
      const functionToExecute = (args) => {
        if (typeof window[args.fnName] === "function") {
          window[args.fnName](args);
        }
      };
      const params = parameter;
      params.fnName = fnName;
      await browser.scripting
        .executeScript({
          target: { tabId: tabID, allFrames: data.allFrames },
          args: [params],
          function: functionToExecute,
        })
        .catch(_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_6__/* .log */ .Rm);
      return;
    }

    // If there's anything to inject, inject the next item and recurse.
    if (data.include.length > injectedSoFar) {
      details.file = data.include[injectedSoFar];
      browser.tabs
        .executeScript(tabID, details)
        .then(() => {
          executeOnTab(fnName, parameter, injectedSoFar + 1, tabID);
        })
        .catch((error) => {
          (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_6__/* .log */ .Rm)(error);
        });
    } else {
      // Nothing left to inject, so execute the function.
      const param = JSON.stringify(parameter);
      details.code = `${fnName}(${param});`;
      browser.tabs.executeScript(tabID, details);
    }
  };

  // The emitPageBroadcast() function
  const theFunction = function (request) {
    executeOnTab(request.fn, request.options, 0, request.tabID);
  };

  return theFunction;
})();

browser.contextMenus.onClicked.addListener(async (info, tab) => {
  if (info && info.menuItemId) {
    const { menuItemId } = info;
    switch (menuItemId) {
      case "pause_adblock_everywhere":
        _servermessages__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.recordGeneralMessage("cm_pause_clicked");
        adblockIsPaused(true);
        updateButtonUIAndContextMenus(tab);
        break;
      case "resume_blocking_ads":
        _servermessages__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.recordGeneralMessage("cm_unpause_clicked");
        adblockIsPaused(false);
        updateButtonUIAndContextMenus(tab);
        break;
      case "resume_blocking_ads_unallow":
        _servermessages__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.recordGeneralMessage("cm_unpause_clicked");
        await (0,_src_pause_background__WEBPACK_IMPORTED_MODULE_2__/* .removeAllAllowlistRulesForTab */ .Gz)(tab.id);
        updateButtonUIAndContextMenus(tab);
        break;
      case "domain_pause_adblock":
        _servermessages__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.recordGeneralMessage("cm_domain_pause_clicked");
        await (0,_src_pause_background__WEBPACK_IMPORTED_MODULE_2__/* .allowlistTab */ .vB)(tab.url, _src_filters_shared__WEBPACK_IMPORTED_MODULE_3__.FilterOrigin.context);
        updateButtonUIAndContextMenus(tab);
        break;
      case "block_this_ad":
        emitPageBroadcast({
          fn: "topOpenBlacklistUI",
          options: {
            info,
            showBlacklistCTA: License.shouldShowBlacklistCTA(),
            isActiveLicense: License.isActiveLicense(),
            settings: getSettings(),
            addCustomFilterRandomName: _messaging_messagevalidator__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A.generateNewRandomText(),
          },
          tabID: tab.id,
        });
        break;
      case "block_an_ad_on_this_page":
        emitPageBroadcast({
          fn: "topOpenBlacklistUI",
          options: {
            nothingClicked: true,
            showBlacklistCTA: License.shouldShowBlacklistCTA(),
            isActiveLicense: License.isActiveLicense(),
            settings: getSettings(),
            addCustomFilterRandomName: _messaging_messagevalidator__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A.generateNewRandomText(),
          },
          tabID: tab.id,
        });
        break;
      default:
    }
  }
});

const contextMenuItem = (() => ({
  pauseAll: {
    title: browser.i18n.getMessage("pause_adblock_everywhere"),
    id: "pause_adblock_everywhere",
    contexts: ["all"],
  },
  unpauseAll: {
    title: browser.i18n.getMessage("resume_blocking_ads"),
    id: "resume_blocking_ads",
    contexts: ["all"],
  },
  unAllowList: {
    title: browser.i18n.getMessage("resume_blocking_ads"),
    id: "resume_blocking_ads_unallow",
    contexts: ["all"],
  },
  pauseDomain: {
    title: browser.i18n.getMessage("domain_pause_adblock"),
    id: "domain_pause_adblock",
    contexts: ["all"],
  },
  blockThisAd: {
    title: browser.i18n.getMessage("block_this_ad"),
    id: "block_this_ad",
    contexts: ["all"],
  },
  blockAnAd: {
    title: browser.i18n.getMessage("block_an_ad_on_this_page"),
    id: "block_an_ad_on_this_page",
    contexts: ["all"],
  },
}))();

const checkLastError = function () {
  if (browser.runtime.lastError) {
    // do nothing
  }
};

let updateContextMenuItems = async function (page) {
  await browser.contextMenus.removeAll();
  // Check if the context menu items should be added
  if (!prefs__WEBPACK_IMPORTED_MODULE_0__/* .Prefs */ .N.shouldShowBlockElementMenu) {
    return;
  }

  const isTabAllowlisted = !!(await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.filters.getAllowingFilters(page.id)).length;

  if (adblockIsPaused()) {
    await browser.contextMenus.create(contextMenuItem.unpauseAll, checkLastError);
  } else if (isTabAllowlisted) {
    await browser.contextMenus.create(contextMenuItem.unAllowList, checkLastError);
  } else {
    await browser.contextMenus.create(contextMenuItem.blockThisAd, checkLastError);
    await browser.contextMenus.create(contextMenuItem.blockAnAd, checkLastError);
    await browser.contextMenus.create(contextMenuItem.pauseDomain, checkLastError);
    await browser.contextMenus.create(contextMenuItem.pauseAll, checkLastError);
  }
};

const updateContextMenuItemsNoOp = function () {
  // Remove the AdBlock context menu items
  browser.contextMenus.removeAll();
};
// startup test to check if the context menu API functions correctly
// the `create` function is invoked twice, because it's the second
// and all subsequent calls that fail.
try {
  browser.contextMenus.create(contextMenuItem.blockThisAd, checkLastError);
  browser.contextMenus.create(contextMenuItem.blockThisAd, checkLastError);
} catch (e) {
  updateContextMenuItems = updateContextMenuItemsNoOp;
}
browser.contextMenus.removeAll();

browser.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {
  if (changeInfo.status) {
    updateContextMenuItems(new ext.Page(tab));
  }
});

browser.tabs.onActivated.addListener(async (activeInfo) => {
  let tab = null;

  try {
    tab = await browser.tabs.get(activeInfo.tabId);
  } catch (ex) {
    // The tab may be closed, so we need to continue without it
  }

  updateButtonUIAndContextMenus(tab);
});

browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (message.command !== "sendContentToBack") {
    return;
  } // not for us
  emitPageBroadcast({ fn: "sendContentToBack", options: {}, tabID: sender.tab.id });
  sendResponse({});
});

browser.runtime.onMessage.addListener((request, sender, sendResponse) => {
  if (request.command === "reloadTabForWhitelist") {
    reloadTab(sender.tab.id, () => {
      emitPageBroadcast({
        fn: "topOpenWhitelistCompletionUI",
        options: {
          rule: request.rule,
          isActiveLicense: License.isActiveLicense(),
          showWhitelistCTA: License.shouldShowWhitelistCTA(),
        },
        tabID: sender.tab.id,
      });
    });
    sendResponse({});
  }
});

browser.runtime.onMessage.addListener((request, sender, sendResponse) => {
  if (request.command === "showWhitelistCompletion") {
    emitPageBroadcast({
      fn: "topOpenWhitelistCompletionUI",
      options: {
        rule: request.rule,
        isActiveLicense: License.isActiveLicense(),
        showWhitelistCTA: License.shouldShowWhitelistCTA(),
      },
      tabID: sender.tab.id,
    });
    sendResponse({});
  }
});

browser.runtime.onMessage.addListener((request, sender, sendResponse) => {
  if (request.command === "showBlacklist" && typeof request.nothingClicked === "boolean") {
    emitPageBroadcast({
      fn: "topOpenBlacklistUI",
      options: {
        nothingClicked: request.nothingClicked,
        isActiveLicense: License.isActiveLicense(),
        showBlacklistCTA: License.shouldShowBlacklistCTA(),
        settings: getSettings(),
        addCustomFilterRandomName: _messaging_messagevalidator__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A.generateNewRandomText(),
      },
      tabID: request.tabId,
    });
    sendResponse({});
  }
});

browser.runtime.onMessage.addListener((request, sender, sendResponse) => {
  if (request.command === "showWhitelist") {
    emitPageBroadcast({
      fn: "topOpenWhitelistUI",
      options: {
        addCustomFilterRandomName: _messaging_messagevalidator__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A.generateNewRandomText(),
      },
      tabID: request.tabId,
    });
    sendResponse({});
  }
});

// Update browser actions and context menus when whitelisting might have
// changed. That is now when initally loading the filters and later when
// importing backups or saving filter changes.
// Update browser actions and context menus when whitelisting might have
// changed. That is now when initally loading the filters and later when
// importing backups or saving filter changes.
_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.subscriptions.onAdded.addListener(updateButtonUIAndContextMenus);
_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.subscriptions.onChanged.addListener(updateButtonUIAndContextMenus);
_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.subscriptions.onRemoved.addListener(updateButtonUIAndContextMenus);

prefs__WEBPACK_IMPORTED_MODULE_0__/* .Prefs */ .N.on(prefs__WEBPACK_IMPORTED_MODULE_0__/* .Prefs */ .N.shouldShowBlockElementMenu, () => {
  updateButtonUIAndContextMenus();
});

// update the tab icon when the tab's content changes
ext.pages.onLoading.addListener(async (page) => {
  let tab;
  try {
    tab = await browser.tabs.get(page.id);
  } catch (ex) {
    // No need to continue, if tab no longer exists
    return;
  }

  updateButtonUIAndContextMenus(tab);
});

updateButtonUIAndContextMenus();

// eslint-disable-next-line no-restricted-globals
Object.assign(self, {
  emitPageBroadcast,
  updateButtonUIAndContextMenus,
});


/***/ }),

/***/ 7703:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var info__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9336);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _src_pause_background__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4255);
/* harmony import */ var _subscriptionadapter__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6396);
/* harmony import */ var _fetch_util__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(5410);
/* harmony import */ var _prefs_background__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2644);
/* harmony import */ var _utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(7656);
/* harmony import */ var _alias_prefs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2680);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser, adblockIsPaused, getUserFilters, */










const DataCollectionV2 = (function getDataCollectionV2() {
  const HOUR_IN_MIN = 60;
  const TIME_LAST_PUSH_KEY = "timeLastPush";
  const DATA_COLLECTION_ALARM_NAME = "datacollectionalarm";
  const STORAGE_KEY = "ab:data.collection.storage.key";
  const REPORTING_OPTIONS = {
    filterType: "all",
    includeElementHiding: false,
  };

  // Setup memory cache
  let dataCollectionCache = {};
  dataCollectionCache.filters = {};
  dataCollectionCache.domains = {};

  const addFilterToCache = async function (details, filter) {
    const validFilterText = filter && filter.text && typeof filter.text === "string";
    if (validFilterText && details && details.url) {
      let domain = details.url.hostname;
      if (!domain) {
        domain = new URL(details.url).hostname;
        if (!domain) {
          return;
        }
      }
      const { text } = filter;

      if (!(text in dataCollectionCache.filters)) {
        dataCollectionCache.filters[text] = {};
        dataCollectionCache.filters[text].firstParty = {};
        dataCollectionCache.filters[text].thirdParty = {};
        dataCollectionCache.filters[text].subscriptions = [];
      }
      if (filter.thirdParty) {
        if (!dataCollectionCache.filters[text].thirdParty[domain]) {
          dataCollectionCache.filters[text].thirdParty[domain] = {};
          dataCollectionCache.filters[text].thirdParty[domain].hits = 0;
        }
        dataCollectionCache.filters[text].thirdParty[domain].hits += 1;
      } else {
        if (!dataCollectionCache.filters[text].firstParty[domain]) {
          dataCollectionCache.filters[text].firstParty[domain] = {};
          dataCollectionCache.filters[text].firstParty[domain].hits = 0;
        }
        dataCollectionCache.filters[text].firstParty[domain].hits += 1;
      }
      const subscriptions = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.subscriptions.getForFilter(text);
      subscriptions.forEach((sub) => {
        if (sub.enabled && sub.url && sub.updatable) {
          const subURL = sub.url.substring(0, 256);
          if (!dataCollectionCache.filters[text].subscriptions.includes(subURL)) {
            dataCollectionCache.filters[text].subscriptions.push(subURL);
          }
        }
      });
      (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_5__/* .chromeStorageSetHelper */ .AX)(STORAGE_KEY, dataCollectionCache);
    }
  };

  const webRequestListener = async function (details) {
    if (
      details.url &&
      details.type === "main_frame" &&
      !adblockIsPaused() &&
      (await !(0,_src_pause_background__WEBPACK_IMPORTED_MODULE_2__/* .isTabTemporaryAllowlisted */ .tk)(details.tabId))
    ) {
      const domain = (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_5__/* .parseUri */ .wY)(details.url).host;
      if (!dataCollectionCache.domains[domain]) {
        dataCollectionCache.domains[domain] = {};
        dataCollectionCache.domains[domain].pages = 0;
      }
      dataCollectionCache.domains[domain].pages += 1;
      (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_5__/* .chromeStorageSetHelper */ .AX)(STORAGE_KEY, dataCollectionCache);
    }
  };

  const filterListener = function ({ request, filter }) {
    if ((0,_prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .getSettings */ .mt)().data_collection_v2 && !adblockIsPaused()) {
      addFilterToCache(request, filter);
    } else if (!(0,_prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .getSettings */ .mt)().data_collection_v2) {
      _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.reporting.onBlockableItem.removeListener(filterListener, REPORTING_OPTIONS);
      browser.alarms.clear(DATA_COLLECTION_ALARM_NAME);
    }
  };

  const sendToServer = async function () {
    if (_alias_prefs__WEBPACK_IMPORTED_MODULE_6__/* .Prefs */ .N.get("data_collection_opt_out")) {
      return;
    }

    const dataCollectionSetting = (0,_prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .getSettings */ .mt)().data_collection_v2;
    if (!dataCollectionSetting) {
      browser.alarms.clear(DATA_COLLECTION_ALARM_NAME);
    }
    if (dataCollectionSetting && Object.keys(dataCollectionCache.filters).length > 0) {
      const subscribedSubs = [];
      const subs = await _subscriptionadapter__WEBPACK_IMPORTED_MODULE_3__/* ["default"] */ .A.getSubscriptionsMinusText();
      for (const subscription of Object.values(subs)) {
        if (subscription && subscription.url) {
          subscribedSubs.push(subscription.url.substring(0, 256));
        }
      }
      if (await getUserFilters().length) {
        subscribedSubs.push("customlist");
      }
      const data = {
        version: "5",
        addonName: info__WEBPACK_IMPORTED_MODULE_0__.addonName,
        addonVersion: info__WEBPACK_IMPORTED_MODULE_0__.addonVersion,
        application: info__WEBPACK_IMPORTED_MODULE_0__.application,
        applicationVersion: info__WEBPACK_IMPORTED_MODULE_0__.applicationVersion,
        platform: info__WEBPACK_IMPORTED_MODULE_0__.platform,
        platformVersion: info__WEBPACK_IMPORTED_MODULE_0__.platformVersion,
        appLocale: browser.i18n.getUILanguage(),
        filterListSubscriptions: subscribedSubs,
        domains: dataCollectionCache.domains,
        filters: dataCollectionCache.filters,
      };
      browser.storage.local.get(TIME_LAST_PUSH_KEY).then((response) => {
        let timeLastPush = "n/a";
        if (response[TIME_LAST_PUSH_KEY]) {
          const serverTimestamp = new Date(response[TIME_LAST_PUSH_KEY]);
          // Format the timeLastPush
          const yearStr = `${serverTimestamp.getUTCFullYear()}`;
          let monthStr = `${serverTimestamp.getUTCMonth() + 1}`;
          let dateStr = `${serverTimestamp.getUTCDate()}`;
          let hourStr = `${serverTimestamp.getUTCHours()}`;
          // round the minutes up to the nearest 10
          let minStr = `${Math.floor(serverTimestamp.getUTCMinutes() / 10) * 10}`;

          if (monthStr.length === 1) {
            monthStr = `0${monthStr}`;
          }
          if (dateStr.length === 1) {
            dateStr = `0${dateStr}`;
          }
          if (hourStr.length === 1) {
            hourStr = `0${hourStr}`;
          }
          if (minStr.length === 1) {
            minStr = `0${minStr}`;
          }
          if (minStr === "60") {
            minStr = "00";
          }
          timeLastPush = `${yearStr}-${monthStr}-${dateStr} ${hourStr}:${minStr}:00`;
        }
        data.timeOfLastPush = timeLastPush;
        (0,_fetch_util__WEBPACK_IMPORTED_MODULE_7__/* ["default"] */ .A)("https://log.getadblock.com/v2/record_log.php", data).then((postResponse) => {
          if (postResponse.ok) {
            let nowTimestamp = new Date().toGMTString();
            try {
              if (postResponse.headers.has("date")) {
                nowTimestamp = postResponse.headers.get("date");
              }
            } catch (e) {
              nowTimestamp = new Date().toGMTString();
            }
            (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_5__/* .chromeStorageSetHelper */ .AX)(TIME_LAST_PUSH_KEY, nowTimestamp);
            // Reset memory cache
            dataCollectionCache = {};
            dataCollectionCache.filters = {};
            dataCollectionCache.domains = {};
            browser.storage.local.remove(STORAGE_KEY);
            return;
          }
          (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_5__/* .log */ .Rm)("bad response from log server", postResponse);
        });
      }); // end of TIME_LAST_PUSH_KEY
    }
  };

  const loadCache = async function () {
    const response = await browser.storage.local.get(STORAGE_KEY);
    if (response[STORAGE_KEY]) {
      dataCollectionCache = response[STORAGE_KEY];
    }
  };

  const initializeAlarm = function () {
    const processAlarm = async function (alarm) {
      if (!alarm && alarm.name !== DATA_COLLECTION_ALARM_NAME) {
        return;
      }
      await _prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .settings */ .W0.onload();
      if ((0,_prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .getSettings */ .mt)().data_collection_v2) {
        await loadCache();
        sendToServer();
      } else {
        browser.alarms.clear(DATA_COLLECTION_ALARM_NAME);
        browser.alarms.onAlarm.removeListener(processAlarm);
      }
    };
    browser.alarms.onAlarm.addListener(processAlarm);
  };

  // If enabled at startup periodic saving of memory cache &
  // sending of data to the log server
  const initialize = function () {
    initializeAlarm();
    _prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .settings */ .W0.onload().then(async () => {
      if (!(0,_prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .getSettings */ .mt)().data_collection_v2) {
        return;
      }
      await loadCache();
      _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.reporting.onBlockableItem.addListener(filterListener, REPORTING_OPTIONS);
      browser.webRequest.onBeforeRequest.addListener(webRequestListener, {
        urls: ["http://*/*", "https://*/*"],
        types: ["main_frame"],
      });
      browser.alarms.create(DATA_COLLECTION_ALARM_NAME, { periodInMinutes: HOUR_IN_MIN });
    });
  };
  initialize();

  const returnObj = {};
  returnObj.start = function returnObjStart() {
    dataCollectionCache.filters = {};
    dataCollectionCache.domains = {};
    (0,_prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .setSetting */ .ZC)("data_collection_v2", true, () => {
      initialize();
    });
  };
  returnObj.end = function returnObjEnd() {
    dataCollectionCache = {};
    _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.reporting.onBlockableItem.removeListener(filterListener, REPORTING_OPTIONS);
    browser.webRequest.onBeforeRequest.removeListener(webRequestListener);
    browser.storage.local.remove(TIME_LAST_PUSH_KEY);
    browser.storage.local.remove(STORAGE_KEY);
    browser.alarms.clear(DATA_COLLECTION_ALARM_NAME);
    (0,_prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .setSetting */ .ZC)("data_collection_v2", false);
  };
  returnObj.getCache = function returnObjGetCache() {
    return dataCollectionCache;
  };

  return returnObj;
})();

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (DataCollectionV2);


/***/ }),

/***/ 5380:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  JP: () => (/* binding */ getCustomFilterMetaData),
  MI: () => (/* binding */ getDebugInfo)
});

// UNUSED EXPORTS: getUserFilters

// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
// EXTERNAL MODULE: ./adblock-betafish/alias/prefs.js
var prefs = __webpack_require__(2680);
// EXTERNAL MODULE: ./adblock-betafish/filter-utils.js
var filter_utils = __webpack_require__(9383);
// EXTERNAL MODULE: ./adblock-betafish/id/background/index.ts + 1 modules
var background = __webpack_require__(7099);
// EXTERNAL MODULE: ./adblock-betafish/localdatacollection.js
var localdatacollection = __webpack_require__(3010);
// EXTERNAL MODULE: ./src/pause/background/index.ts
var pause_background = __webpack_require__(4255);
// EXTERNAL MODULE: ./adblock-betafish/picreplacement/check.js
var check = __webpack_require__(4770);
// EXTERNAL MODULE: ./adblock-betafish/picreplacement/sync-service.js
var sync_service = __webpack_require__(9077);
// EXTERNAL MODULE: ./adblock-betafish/prefs/background/index.js + 1 modules
var prefs_background = __webpack_require__(2644);
// EXTERNAL MODULE: ./adblock-betafish/subscriptionadapter.js + 1 modules
var subscriptionadapter = __webpack_require__(6396);
// EXTERNAL MODULE: ./adblock-betafish/telemetry/background/index.js + 4 modules
var telemetry_background = __webpack_require__(3322);
// EXTERNAL MODULE: ./adblock-betafish/ipm/background/command-library.types.ts
var command_library_types = __webpack_require__(6122);
// EXTERNAL MODULE: ./adblock-betafish/ipm/background/data-collection.types.ts
var data_collection_types = __webpack_require__(4702);
;// CONCATENATED MODULE: ./adblock-betafish/debug/background/constants.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */





const IPM_CONSTANTS = [
  /* IPM values */
  command_library_types/* commandStats */.Nk,
  command_library_types/* commandStorageKey */.EQ,
  data_collection_types/* eventStorageKey */.tz,

  /* OPD values */
  "onpage_dialog_command_stats",
  "onpage_dialog_timing_configurations",
];

const NO_DATA = "no data";



;// CONCATENATED MODULE: ./adblock-betafish/debug/background/index.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser  */















async function getExperimentsAssignments() {
  const assignments = await ewe_api.experiments.getAssignments();
  return Object.entries(assignments).map((assignment) => {
    return {
      experiment_id: assignment[0],
      variant_id: assignment[1],
    };
  });
}

async function getExperimentData() {
  const experimentFlags = await ewe_api.experiments.getFlags();
  const experimentAssignments = await getExperimentsAssignments();
  return { experimentAssignments, experimentFlags };
}

const getAdblockSettings = function () {
  const adblockSettings = {};
  const settingsObj = (0,prefs_background/* getSettings */.mt)();
  for (const [key, value] of Object.entries(settingsObj)) {
    adblockSettings[key] = JSON.stringify(value);
  }

  return adblockSettings;
};

const getBuildType = function () {
  // Is this installed build of AdBlock the official one?
  if (browser.runtime.id === "pljaalgmajnlogcgiohkhdmgpomjcihk") {
    return " Beta";
  }

  if (
    browser.runtime.id === "gighmmpiobklfepjocnamgkkbiglidom" ||
    browser.runtime.id === "aobdicepooefnbaeokijohmhjlleamfj" ||
    browser.runtime.id === "ndcileolkflehcjpmjnfbnaibdcgglog" ||
    browser.runtime.id === "jid1-NIfFY2CA8fy1tg@jetpack"
  ) {
    return " Stable";
  }

  return " Unofficial";
};

async function getCustomFilterMetaData(currentUserFilters) {
  if (!currentUserFilters || currentUserFilters.length === 0) {
    return Promise.resolve({});
  }
  return Promise.all(
    /* eslint-disable-next-line consistent-return */
    currentUserFilters.map(async (rule) => {
      if (rule && rule.text) {
        const metaData = await ewe_api.filters.getMetadata(rule.text);
        if (!metaData) {
          return { text: rule.text };
        }

        return { text: rule.text, metaData };
      }
    }),
  );
}

const getCustomFilters = async function (userFilters) {
  if (userFilters && userFilters.length) {
    return userFilters.map((filter) => filter.text).join("\n");
  }

  return NO_DATA;
};

const getDebugAlarmInfo = async () => {
  const response = {};
  const alarms = await browser.alarms.getAll();
  if (alarms && alarms.length > 0) {
    response["Alarm info"] = `length: ${alarms.length}`;
    for (let i = 0; i < alarms.length; i++) {
      const alarm = alarms[i];
      response[`${i} Alarm Name`] = alarm.name;
      response[`${i} Alarm Scheduled Time`] = new Date(alarm.scheduledTime).toLocaleString();
    }
  } else {
    response["No alarm info"] = "No alarm info";
  }
  return response;
};

const getDebugLicenseInfo = async () => {
  const response = {};
  response.licenseInfo = {};
  response.licenseInfo.extensionGUID = await (0,background/* getUserId */.F)();
  response.licenseInfo.licenseId = check/* License */.u8.get() && check/* License */.u8.get().licenseId;
  response.licenseInfo.licenseState = check/* License */.u8.get() && check/* License */.u8.get().status;
  response.licenseInfo.licenseVersion = check/* License */.u8.get() && check/* License */.u8.get().lv;
  const syncInfo = {};
  syncInfo.SyncCommitVersion = sync_service["default"].getCommitVersion();
  syncInfo.SyncCommitName = sync_service["default"].getCurrentExtensionName();
  syncInfo.SyncCommitLog = await sync_service["default"].getSyncLog();
  response.syncInfo = syncInfo;
  response["License Installation Date"] = await check/* License */.u8.getLicenseInstallationDate();
  const customChannelId = check/* channels */.BM.getIdByName("CustomChannel");
  if (
    customChannelId &&
    check/* channels */.BM.getGuide()[customChannelId] &&
    check/* channels */.BM.getGuide()[customChannelId].enabled
  ) {
    const customChannel = check/* channels */.BM.channelGuide[customChannelId].channel;
    const result = await customChannel.getTotalBytesInUse();
    response["Custom Channel total bytes in use"] = result;
  }
  return response;
};

const getExcludeFilters = async function () {
  const excludeFiltersKey = "exclude_filters";
  const secondResponse = await browser.storage.local.get(excludeFiltersKey);
  if (secondResponse && secondResponse[excludeFiltersKey]) {
    return secondResponse[excludeFiltersKey];
  }

  return NO_DATA;
};

const getHostPermissions = async function () {
  if (browser.permissions && browser.permissions.getAll) {
    const allPermissions = await browser.permissions.getAll();
    return allPermissions;
  }

  return NO_DATA;
};

const getIPMData = function () {
  const IPMEntries = IPM_CONSTANTS.map((entry) => [entry, prefs/* Prefs */.N[entry]]);
  return Object.fromEntries(IPMEntries);
};

const getJavascriptErrors = async function (errorKey) {
  const errorResponse = await browser.storage.local.get(errorKey);
  if (errorResponse && errorResponse[errorKey]) {
    return errorResponse[errorKey];
  }

  return NO_DATA;
};

const getLocalStorageInfo = function () {
  let localStorageInfo;

  if (typeof localStorage !== "undefined" && localStorage.length) {
    localStorageInfo = {};
    localStorageInfo.length = localStorage.length;

    let inx = 1;
    for (const key in localStorage) {
      localStorageInfo[`key${inx}`] = key;
      inx += 1;
    }
  } else {
    localStorageInfo = NO_DATA;
  }

  return localStorageInfo;
};

const getMigrationMessages = async function () {
  const response = {};
  response.migrationErrors = {};
  const { migrationErrors } = response;
  migrationErrors.filters = await ewe_api.filters.getMigrationErrors();
  migrationErrors.subscriptions = await ewe_api.subscriptions.getMigrationErrors();
  return response;
};

const getSubscriptionInfo = async function () {
  const subscriptionInfo = {};
  const subscriptions = await subscriptionadapter/* default */.A.getSubscriptionsMinusText();
  for (const id in subscriptions) {
    if (subscriptions[id].subscribed) {
      subscriptionInfo[id] = {};
      subscriptionInfo[id].lastSuccess = new Date(subscriptions[id].lastSuccess * 1000);
      subscriptionInfo[id].lastDownload = new Date(subscriptions[id].lastDownload * 1000);
      subscriptionInfo[id].downloadStatus = subscriptions[id].downloadStatus;
    }
  }

  return subscriptionInfo;
};

const getTotalPings = async function () {
  const storageResponse = await browser.storage.local.get("total_pings");
  return storageResponse.totalPings || 0;
};

// Get debug info as a JSON object for bug reporting and ad reporting
const getDebugInfo = function () {
  return new Promise(async (resolve) => {
    const response = {};
    const userFilters = await (0,filter_utils/* getUserFilters */.j)();

    // Get subscribed filter lists
    response.subscriptions = await getSubscriptionInfo();

    // Get custom/user filter rules
    response.customFilters = await getCustomFilters(userFilters);

    // Get settings
    response.settings = getAdblockSettings();
    response.prefs = JSON.stringify(prefs/* Prefs */.N);

    // Add exclude filters
    response.excludedFilters = await getExcludeFilters();

    // Add IPM info
    response.ipmInfo = getIPMData();

    response.otherInfo = {};
    let { otherInfo } = response;

    // Get build type
    otherInfo.buildtype = getBuildType();

    // Get AdBlock version
    otherInfo.version = browser.runtime.getManifest().version;

    // Get system telemetry
    otherInfo.browser = telemetry_background/* TELEMETRY */.Gy.browser;
    otherInfo.browserVersion = telemetry_background/* TELEMETRY */.Gy.browserVersion;
    otherInfo.osVersion = telemetry_background/* TELEMETRY */.Gy.osVersion;
    otherInfo.os = telemetry_background/* TELEMETRY */.Gy.os;

    otherInfo.localStorageInfo = getLocalStorageInfo();
    otherInfo.isAdblockPaused = (0,pause_background/* adblockIsPaused */.Zl)();

    // Get 'Stats' size
    otherInfo.rawStatsSize = await localdatacollection/* default */.A.getRawStatsSize();

    // Get total pings
    otherInfo.totalPings = await getTotalPings();

    // Add JavaScript exception error
    const errorKey = "errorkey";
    otherInfo[errorKey] = await getJavascriptErrors(errorKey);

    // Add any migration messages (if there are any)
    otherInfo = Object.assign(otherInfo, await getMigrationMessages());

    otherInfo.alarmInfo = await getDebugAlarmInfo();
    otherInfo.hostPermissions = await getHostPermissions();

    otherInfo.licenseInfo = await getDebugLicenseInfo();
    otherInfo.customRuleMetaData = await getCustomFilterMetaData(userFilters);

    const blockageStats = (await browser.storage.local.get("blockage_stats")).blockage_stats;
    if (blockageStats && blockageStats.start) {
      otherInfo.extensionInstallTimestamp = new Date(blockageStats.start).toLocaleString();
    }
    otherInfo.experimentData = await getExperimentData();

    resolve(response);
  });
};




/***/ }),

/***/ 8097:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony import */ var _utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7656);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser */



// Send the file name and line number of any error message. This will help us
// to trace down any frequent errors we can't confirm ourselves.
/* eslint-disable no-restricted-globals */
self.addEventListener("error", (e) => {
  if (!e.filename && !e.lineno && !e.colno && !e.error && !e.message) {
    return;
  }
  let str = `Error: ${(e.filename || "anywhere").replace(browser.runtime.getURL(""), "")}:${
    e.lineno || "anywhere"
  }:${e.colno || "anycol"}`;
  if (e.message) {
    str += `: ${e.message}`;
  }
  const src = e.target.src || e.target.href;
  if (src) {
    str += `src: ${src}`;
  }
  if (e.error) {
    let stack = `-${e.error.message || ""}-${e.error.stack || ""}`;
    stack = stack.replace(/:/gi, ";").replace(/\n/gi, "");
    // only append the stack info if there isn't any URL info in the stack trace
    if (stack.indexOf("http") === -1) {
      str += stack;
    }
    // don't send large stack traces
    if (str.length > 1024) {
      str = str.substr(0, 1023);
    }
  }
  (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_0__/* .chromeStorageSetHelper */ .AX)("errorkey", `Date added:${new Date()} ${str}`);
  // eslint-disable-next-line no-console
  console.log(str);
});


/***/ }),

/***/ 9973:
/***/ (() => {

/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global importScripts
 */

if (typeof importScripts !== "undefined") {
  importScripts("polyfill.js");
  importScripts("ext/common.js");
  importScripts("ext/background.js");
}


/***/ }),

/***/ 5410:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ postData)
/* harmony export */ });
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global  */

async function postData(url = "", payload = {}) {
  return fetch(url, {
    method: "POST",
    cache: "no-store",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload),
  });
}


/***/ }),

/***/ 9383:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   j: () => (/* binding */ getUserFilters)
/* harmony export */ });
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */
/* For ESLint: List any global identifiers used in this file below */
/* global  */



async function getUserFilters() {
  return _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getUserFilters();
}




/***/ }),

/***/ 5722:
/***/ (function(module, exports) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! jQuery v3.5.1 | (c) JS Foundation and other contributors | jquery.org/license */
!(function (e, t) {
  "use strict";
   true && "object" == typeof module.exports
    ? (module.exports = e.document
        ? t(e, !0)
        : function (e) {
            if (!e.document) throw new Error("jQuery requires a window with a document");
            return t(e);
          })
    : t(e);
})("undefined" != typeof window ? window : this, function (C, e) {
  "use strict";
  var t = [],
    r = Object.getPrototypeOf,
    s = t.slice,
    g = t.flat
      ? function (e) {
          return t.flat.call(e);
        }
      : function (e) {
          return t.concat.apply([], e);
        },
    u = t.push,
    i = t.indexOf,
    n = {},
    o = n.toString,
    v = n.hasOwnProperty,
    a = v.toString,
    l = a.call(Object),
    y = {},
    m = function (e) {
      return "function" == typeof e && "number" != typeof e.nodeType;
    },
    x = function (e) {
      return null != e && e === e.window;
    },
    E = C.document,
    c = { type: !0, src: !0, nonce: !0, noModule: !0 };
  function b(e, t, n) {
    var r,
      i,
      o = (n = n || E).createElement("script");
    if (((o.text = e), t))
      for (r in c) (i = t[r] || (t.getAttribute && t.getAttribute(r))) && o.setAttribute(r, i);
    n.head.appendChild(o).parentNode.removeChild(o);
  }
  function w(e) {
    return null == e
      ? e + ""
      : "object" == typeof e || "function" == typeof e
        ? n[o.call(e)] || "object"
        : typeof e;
  }
  var f = "3.5.1",
    S = function (e, t) {
      return new S.fn.init(e, t);
    };
  function p(e) {
    var t = !!e && "length" in e && e.length,
      n = w(e);
    return (
      !m(e) && !x(e) && ("array" === n || 0 === t || ("number" == typeof t && 0 < t && t - 1 in e))
    );
  }
  (S.fn = S.prototype =
    {
      jquery: f,
      constructor: S,
      length: 0,
      toArray: function () {
        return s.call(this);
      },
      get: function (e) {
        return null == e ? s.call(this) : e < 0 ? this[e + this.length] : this[e];
      },
      pushStack: function (e) {
        var t = S.merge(this.constructor(), e);
        return (t.prevObject = this), t;
      },
      each: function (e) {
        return S.each(this, e);
      },
      map: function (n) {
        return this.pushStack(
          S.map(this, function (e, t) {
            return n.call(e, t, e);
          }),
        );
      },
      slice: function () {
        return this.pushStack(s.apply(this, arguments));
      },
      first: function () {
        return this.eq(0);
      },
      last: function () {
        return this.eq(-1);
      },
      even: function () {
        return this.pushStack(
          S.grep(this, function (e, t) {
            return (t + 1) % 2;
          }),
        );
      },
      odd: function () {
        return this.pushStack(
          S.grep(this, function (e, t) {
            return t % 2;
          }),
        );
      },
      eq: function (e) {
        var t = this.length,
          n = +e + (e < 0 ? t : 0);
        return this.pushStack(0 <= n && n < t ? [this[n]] : []);
      },
      end: function () {
        return this.prevObject || this.constructor();
      },
      push: u,
      sort: t.sort,
      splice: t.splice,
    }),
    (S.extend = S.fn.extend =
      function () {
        var e,
          t,
          n,
          r,
          i,
          o,
          a = arguments[0] || {},
          s = 1,
          u = arguments.length,
          l = !1;
        for (
          "boolean" == typeof a && ((l = a), (a = arguments[s] || {}), s++),
            "object" == typeof a || m(a) || (a = {}),
            s === u && ((a = this), s--);
          s < u;
          s++
        )
          if (null != (e = arguments[s]))
            for (t in e)
              (r = e[t]),
                "__proto__" !== t &&
                  a !== r &&
                  (l && r && (S.isPlainObject(r) || (i = Array.isArray(r)))
                    ? ((n = a[t]),
                      (o = i && !Array.isArray(n) ? [] : i || S.isPlainObject(n) ? n : {}),
                      (i = !1),
                      (a[t] = S.extend(l, o, r)))
                    : void 0 !== r && (a[t] = r));
        return a;
      }),
    S.extend({
      expando: "jQuery" + (f + Math.random()).replace(/\D/g, ""),
      isReady: !0,
      error: function (e) {
        throw new Error(e);
      },
      noop: function () {},
      isPlainObject: function (e) {
        var t, n;
        return (
          !(!e || "[object Object]" !== o.call(e)) &&
          (!(t = r(e)) ||
            ("function" == typeof (n = v.call(t, "constructor") && t.constructor) &&
              a.call(n) === l))
        );
      },
      isEmptyObject: function (e) {
        var t;
        for (t in e) return !1;
        return !0;
      },
      globalEval: function (e, t, n) {
        b(e, { nonce: t && t.nonce }, n);
      },
      each: function (e, t) {
        var n,
          r = 0;
        if (p(e)) {
          for (n = e.length; r < n; r++) if (!1 === t.call(e[r], r, e[r])) break;
        } else for (r in e) if (!1 === t.call(e[r], r, e[r])) break;
        return e;
      },
      makeArray: function (e, t) {
        var n = t || [];
        return (
          null != e && (p(Object(e)) ? S.merge(n, "string" == typeof e ? [e] : e) : u.call(n, e)), n
        );
      },
      inArray: function (e, t, n) {
        return null == t ? -1 : i.call(t, e, n);
      },
      merge: function (e, t) {
        for (var n = +t.length, r = 0, i = e.length; r < n; r++) e[i++] = t[r];
        return (e.length = i), e;
      },
      grep: function (e, t, n) {
        for (var r = [], i = 0, o = e.length, a = !n; i < o; i++) !t(e[i], i) !== a && r.push(e[i]);
        return r;
      },
      map: function (e, t, n) {
        var r,
          i,
          o = 0,
          a = [];
        if (p(e)) for (r = e.length; o < r; o++) null != (i = t(e[o], o, n)) && a.push(i);
        else for (o in e) null != (i = t(e[o], o, n)) && a.push(i);
        return g(a);
      },
      guid: 1,
      support: y,
    }),
    "function" == typeof Symbol && (S.fn[Symbol.iterator] = t[Symbol.iterator]),
    S.each(
      "Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),
      function (e, t) {
        n["[object " + t + "]"] = t.toLowerCase();
      },
    );
  var d = (function (n) {
    var e,
      d,
      b,
      o,
      i,
      h,
      f,
      g,
      w,
      u,
      l,
      T,
      C,
      a,
      E,
      v,
      s,
      c,
      y,
      S = "sizzle" + 1 * new Date(),
      p = n.document,
      k = 0,
      r = 0,
      m = ue(),
      x = ue(),
      A = ue(),
      N = ue(),
      D = function (e, t) {
        return e === t && (l = !0), 0;
      },
      j = {}.hasOwnProperty,
      t = [],
      q = t.pop,
      L = t.push,
      H = t.push,
      O = t.slice,
      P = function (e, t) {
        for (var n = 0, r = e.length; n < r; n++) if (e[n] === t) return n;
        return -1;
      },
      R =
        "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
      M = "[\\x20\\t\\r\\n\\f]",
      I = "(?:\\\\[\\da-fA-F]{1,6}" + M + "?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",
      W =
        "\\[" +
        M +
        "*(" +
        I +
        ")(?:" +
        M +
        "*([*^$|!~]?=)" +
        M +
        "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" +
        I +
        "))|)" +
        M +
        "*\\]",
      F =
        ":(" +
        I +
        ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" +
        W +
        ")*)|.*)\\)|)",
      B = new RegExp(M + "+", "g"),
      $ = new RegExp("^" + M + "+|((?:^|[^\\\\])(?:\\\\.)*)" + M + "+$", "g"),
      _ = new RegExp("^" + M + "*," + M + "*"),
      z = new RegExp("^" + M + "*([>+~]|" + M + ")" + M + "*"),
      U = new RegExp(M + "|>"),
      X = new RegExp(F),
      V = new RegExp("^" + I + "$"),
      G = {
        ID: new RegExp("^#(" + I + ")"),
        CLASS: new RegExp("^\\.(" + I + ")"),
        TAG: new RegExp("^(" + I + "|[*])"),
        ATTR: new RegExp("^" + W),
        PSEUDO: new RegExp("^" + F),
        CHILD: new RegExp(
          "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" +
            M +
            "*(even|odd|(([+-]|)(\\d*)n|)" +
            M +
            "*(?:([+-]|)" +
            M +
            "*(\\d+)|))" +
            M +
            "*\\)|)",
          "i",
        ),
        bool: new RegExp("^(?:" + R + ")$", "i"),
        needsContext: new RegExp(
          "^" +
            M +
            "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
            M +
            "*((?:-\\d)?\\d*)" +
            M +
            "*\\)|)(?=[^-]|$)",
          "i",
        ),
      },
      Y = /HTML$/i,
      Q = /^(?:input|select|textarea|button)$/i,
      J = /^h\d$/i,
      K = /^[^{]+\{\s*\[native \w/,
      Z = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
      ee = /[+~]/,
      te = new RegExp("\\\\[\\da-fA-F]{1,6}" + M + "?|\\\\([^\\r\\n\\f])", "g"),
      ne = function (e, t) {
        var n = "0x" + e.slice(1) - 65536;
        return (
          t ||
          (n < 0
            ? String.fromCharCode(n + 65536)
            : String.fromCharCode((n >> 10) | 55296, (1023 & n) | 56320))
        );
      },
      re = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
      ie = function (e, t) {
        return t
          ? "\0" === e
            ? "\ufffd"
            : e.slice(0, -1) + "\\" + e.charCodeAt(e.length - 1).toString(16) + " "
          : "\\" + e;
      },
      oe = function () {
        T();
      },
      ae = be(
        function (e) {
          return !0 === e.disabled && "fieldset" === e.nodeName.toLowerCase();
        },
        { dir: "parentNode", next: "legend" },
      );
    try {
      H.apply((t = O.call(p.childNodes)), p.childNodes), t[p.childNodes.length].nodeType;
    } catch (e) {
      H = {
        apply: t.length
          ? function (e, t) {
              L.apply(e, O.call(t));
            }
          : function (e, t) {
              var n = e.length,
                r = 0;
              while ((e[n++] = t[r++]));
              e.length = n - 1;
            },
      };
    }
    function se(t, e, n, r) {
      var i,
        o,
        a,
        s,
        u,
        l,
        c,
        f = e && e.ownerDocument,
        p = e ? e.nodeType : 9;
      if (((n = n || []), "string" != typeof t || !t || (1 !== p && 9 !== p && 11 !== p))) return n;
      if (!r && (T(e), (e = e || C), E)) {
        if (11 !== p && (u = Z.exec(t)))
          if ((i = u[1])) {
            if (9 === p) {
              if (!(a = e.getElementById(i))) return n;
              if (a.id === i) return n.push(a), n;
            } else if (f && (a = f.getElementById(i)) && y(e, a) && a.id === i) return n.push(a), n;
          } else {
            if (u[2]) return H.apply(n, e.getElementsByTagName(t)), n;
            if ((i = u[3]) && d.getElementsByClassName && e.getElementsByClassName)
              return H.apply(n, e.getElementsByClassName(i)), n;
          }
        if (
          d.qsa &&
          !N[t + " "] &&
          (!v || !v.test(t)) &&
          (1 !== p || "object" !== e.nodeName.toLowerCase())
        ) {
          if (((c = t), (f = e), 1 === p && (U.test(t) || z.test(t)))) {
            ((f = (ee.test(t) && ye(e.parentNode)) || e) === e && d.scope) ||
              ((s = e.getAttribute("id"))
                ? (s = s.replace(re, ie))
                : e.setAttribute("id", (s = S))),
              (o = (l = h(t)).length);
            while (o--) l[o] = (s ? "#" + s : ":scope") + " " + xe(l[o]);
            c = l.join(",");
          }
          try {
            return H.apply(n, f.querySelectorAll(c)), n;
          } catch (e) {
            N(t, !0);
          } finally {
            s === S && e.removeAttribute("id");
          }
        }
      }
      return g(t.replace($, "$1"), e, n, r);
    }
    function ue() {
      var r = [];
      return function e(t, n) {
        return r.push(t + " ") > b.cacheLength && delete e[r.shift()], (e[t + " "] = n);
      };
    }
    function le(e) {
      return (e[S] = !0), e;
    }
    function ce(e) {
      var t = C.createElement("fieldset");
      try {
        return !!e(t);
      } catch (e) {
        return !1;
      } finally {
        t.parentNode && t.parentNode.removeChild(t), (t = null);
      }
    }
    function fe(e, t) {
      var n = e.split("|"),
        r = n.length;
      while (r--) b.attrHandle[n[r]] = t;
    }
    function pe(e, t) {
      var n = t && e,
        r = n && 1 === e.nodeType && 1 === t.nodeType && e.sourceIndex - t.sourceIndex;
      if (r) return r;
      if (n) while ((n = n.nextSibling)) if (n === t) return -1;
      return e ? 1 : -1;
    }
    function de(t) {
      return function (e) {
        return "input" === e.nodeName.toLowerCase() && e.type === t;
      };
    }
    function he(n) {
      return function (e) {
        var t = e.nodeName.toLowerCase();
        return ("input" === t || "button" === t) && e.type === n;
      };
    }
    function ge(t) {
      return function (e) {
        return "form" in e
          ? e.parentNode && !1 === e.disabled
            ? "label" in e
              ? "label" in e.parentNode
                ? e.parentNode.disabled === t
                : e.disabled === t
              : e.isDisabled === t || (e.isDisabled !== !t && ae(e) === t)
            : e.disabled === t
          : "label" in e && e.disabled === t;
      };
    }
    function ve(a) {
      return le(function (o) {
        return (
          (o = +o),
          le(function (e, t) {
            var n,
              r = a([], e.length, o),
              i = r.length;
            while (i--) e[(n = r[i])] && (e[n] = !(t[n] = e[n]));
          })
        );
      });
    }
    function ye(e) {
      return e && "undefined" != typeof e.getElementsByTagName && e;
    }
    for (e in ((d = se.support = {}),
    (i = se.isXML =
      function (e) {
        var t = e.namespaceURI,
          n = (e.ownerDocument || e).documentElement;
        return !Y.test(t || (n && n.nodeName) || "HTML");
      }),
    (T = se.setDocument =
      function (e) {
        var t,
          n,
          r = e ? e.ownerDocument || e : p;
        return (
          r != C &&
            9 === r.nodeType &&
            r.documentElement &&
            ((a = (C = r).documentElement),
            (E = !i(C)),
            p != C &&
              (n = C.defaultView) &&
              n.top !== n &&
              (n.addEventListener
                ? n.addEventListener("unload", oe, !1)
                : n.attachEvent && n.attachEvent("onunload", oe)),
            (d.scope = ce(function (e) {
              return (
                a.appendChild(e).appendChild(C.createElement("div")),
                "undefined" != typeof e.querySelectorAll &&
                  !e.querySelectorAll(":scope fieldset div").length
              );
            })),
            (d.attributes = ce(function (e) {
              return (e.className = "i"), !e.getAttribute("className");
            })),
            (d.getElementsByTagName = ce(function (e) {
              return e.appendChild(C.createComment("")), !e.getElementsByTagName("*").length;
            })),
            (d.getElementsByClassName = K.test(C.getElementsByClassName)),
            (d.getById = ce(function (e) {
              return (
                (a.appendChild(e).id = S), !C.getElementsByName || !C.getElementsByName(S).length
              );
            })),
            d.getById
              ? ((b.filter.ID = function (e) {
                  var t = e.replace(te, ne);
                  return function (e) {
                    return e.getAttribute("id") === t;
                  };
                }),
                (b.find.ID = function (e, t) {
                  if ("undefined" != typeof t.getElementById && E) {
                    var n = t.getElementById(e);
                    return n ? [n] : [];
                  }
                }))
              : ((b.filter.ID = function (e) {
                  var n = e.replace(te, ne);
                  return function (e) {
                    var t = "undefined" != typeof e.getAttributeNode && e.getAttributeNode("id");
                    return t && t.value === n;
                  };
                }),
                (b.find.ID = function (e, t) {
                  if ("undefined" != typeof t.getElementById && E) {
                    var n,
                      r,
                      i,
                      o = t.getElementById(e);
                    if (o) {
                      if ((n = o.getAttributeNode("id")) && n.value === e) return [o];
                      (i = t.getElementsByName(e)), (r = 0);
                      while ((o = i[r++]))
                        if ((n = o.getAttributeNode("id")) && n.value === e) return [o];
                    }
                    return [];
                  }
                })),
            (b.find.TAG = d.getElementsByTagName
              ? function (e, t) {
                  return "undefined" != typeof t.getElementsByTagName
                    ? t.getElementsByTagName(e)
                    : d.qsa
                      ? t.querySelectorAll(e)
                      : void 0;
                }
              : function (e, t) {
                  var n,
                    r = [],
                    i = 0,
                    o = t.getElementsByTagName(e);
                  if ("*" === e) {
                    while ((n = o[i++])) 1 === n.nodeType && r.push(n);
                    return r;
                  }
                  return o;
                }),
            (b.find.CLASS =
              d.getElementsByClassName &&
              function (e, t) {
                if ("undefined" != typeof t.getElementsByClassName && E)
                  return t.getElementsByClassName(e);
              }),
            (s = []),
            (v = []),
            (d.qsa = K.test(C.querySelectorAll)) &&
              (ce(function (e) {
                var t;
                (a.appendChild(e).innerHTML =
                  "<a id='" +
                  S +
                  "'></a><select id='" +
                  S +
                  "-\r\\' msallowcapture=''><option selected=''></option></select>"),
                  e.querySelectorAll("[msallowcapture^='']").length &&
                    v.push("[*^$]=" + M + "*(?:''|\"\")"),
                  e.querySelectorAll("[selected]").length ||
                    v.push("\\[" + M + "*(?:value|" + R + ")"),
                  e.querySelectorAll("[id~=" + S + "-]").length || v.push("~="),
                  (t = C.createElement("input")).setAttribute("name", ""),
                  e.appendChild(t),
                  e.querySelectorAll("[name='']").length ||
                    v.push("\\[" + M + "*name" + M + "*=" + M + "*(?:''|\"\")"),
                  e.querySelectorAll(":checked").length || v.push(":checked"),
                  e.querySelectorAll("a#" + S + "+*").length || v.push(".#.+[+~]"),
                  e.querySelectorAll("\\\f"),
                  v.push("[\\r\\n\\f]");
              }),
              ce(function (e) {
                e.innerHTML =
                  "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
                var t = C.createElement("input");
                t.setAttribute("type", "hidden"),
                  e.appendChild(t).setAttribute("name", "D"),
                  e.querySelectorAll("[name=d]").length && v.push("name" + M + "*[*^$|!~]?="),
                  2 !== e.querySelectorAll(":enabled").length && v.push(":enabled", ":disabled"),
                  (a.appendChild(e).disabled = !0),
                  2 !== e.querySelectorAll(":disabled").length && v.push(":enabled", ":disabled"),
                  e.querySelectorAll("*,:x"),
                  v.push(",.*:");
              })),
            (d.matchesSelector = K.test(
              (c =
                a.matches ||
                a.webkitMatchesSelector ||
                a.mozMatchesSelector ||
                a.oMatchesSelector ||
                a.msMatchesSelector),
            )) &&
              ce(function (e) {
                (d.disconnectedMatch = c.call(e, "*")), c.call(e, "[s!='']:x"), s.push("!=", F);
              }),
            (v = v.length && new RegExp(v.join("|"))),
            (s = s.length && new RegExp(s.join("|"))),
            (t = K.test(a.compareDocumentPosition)),
            (y =
              t || K.test(a.contains)
                ? function (e, t) {
                    var n = 9 === e.nodeType ? e.documentElement : e,
                      r = t && t.parentNode;
                    return (
                      e === r ||
                      !(
                        !r ||
                        1 !== r.nodeType ||
                        !(n.contains
                          ? n.contains(r)
                          : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r))
                      )
                    );
                  }
                : function (e, t) {
                    if (t) while ((t = t.parentNode)) if (t === e) return !0;
                    return !1;
                  }),
            (D = t
              ? function (e, t) {
                  if (e === t) return (l = !0), 0;
                  var n = !e.compareDocumentPosition - !t.compareDocumentPosition;
                  return (
                    n ||
                    (1 &
                      (n =
                        (e.ownerDocument || e) == (t.ownerDocument || t)
                          ? e.compareDocumentPosition(t)
                          : 1) ||
                    (!d.sortDetached && t.compareDocumentPosition(e) === n)
                      ? e == C || (e.ownerDocument == p && y(p, e))
                        ? -1
                        : t == C || (t.ownerDocument == p && y(p, t))
                          ? 1
                          : u
                            ? P(u, e) - P(u, t)
                            : 0
                      : 4 & n
                        ? -1
                        : 1)
                  );
                }
              : function (e, t) {
                  if (e === t) return (l = !0), 0;
                  var n,
                    r = 0,
                    i = e.parentNode,
                    o = t.parentNode,
                    a = [e],
                    s = [t];
                  if (!i || !o)
                    return e == C ? -1 : t == C ? 1 : i ? -1 : o ? 1 : u ? P(u, e) - P(u, t) : 0;
                  if (i === o) return pe(e, t);
                  n = e;
                  while ((n = n.parentNode)) a.unshift(n);
                  n = t;
                  while ((n = n.parentNode)) s.unshift(n);
                  while (a[r] === s[r]) r++;
                  return r ? pe(a[r], s[r]) : a[r] == p ? -1 : s[r] == p ? 1 : 0;
                })),
          C
        );
      }),
    (se.matches = function (e, t) {
      return se(e, null, null, t);
    }),
    (se.matchesSelector = function (e, t) {
      if ((T(e), d.matchesSelector && E && !N[t + " "] && (!s || !s.test(t)) && (!v || !v.test(t))))
        try {
          var n = c.call(e, t);
          if (n || d.disconnectedMatch || (e.document && 11 !== e.document.nodeType)) return n;
        } catch (e) {
          N(t, !0);
        }
      return 0 < se(t, C, null, [e]).length;
    }),
    (se.contains = function (e, t) {
      return (e.ownerDocument || e) != C && T(e), y(e, t);
    }),
    (se.attr = function (e, t) {
      (e.ownerDocument || e) != C && T(e);
      var n = b.attrHandle[t.toLowerCase()],
        r = n && j.call(b.attrHandle, t.toLowerCase()) ? n(e, t, !E) : void 0;
      return void 0 !== r
        ? r
        : d.attributes || !E
          ? e.getAttribute(t)
          : (r = e.getAttributeNode(t)) && r.specified
            ? r.value
            : null;
    }),
    (se.escape = function (e) {
      return (e + "").replace(re, ie);
    }),
    (se.error = function (e) {
      throw new Error("Syntax error, unrecognized expression: " + e);
    }),
    (se.uniqueSort = function (e) {
      var t,
        n = [],
        r = 0,
        i = 0;
      if (((l = !d.detectDuplicates), (u = !d.sortStable && e.slice(0)), e.sort(D), l)) {
        while ((t = e[i++])) t === e[i] && (r = n.push(i));
        while (r--) e.splice(n[r], 1);
      }
      return (u = null), e;
    }),
    (o = se.getText =
      function (e) {
        var t,
          n = "",
          r = 0,
          i = e.nodeType;
        if (i) {
          if (1 === i || 9 === i || 11 === i) {
            if ("string" == typeof e.textContent) return e.textContent;
            for (e = e.firstChild; e; e = e.nextSibling) n += o(e);
          } else if (3 === i || 4 === i) return e.nodeValue;
        } else while ((t = e[r++])) n += o(t);
        return n;
      }),
    ((b = se.selectors =
      {
        cacheLength: 50,
        createPseudo: le,
        match: G,
        attrHandle: {},
        find: {},
        relative: {
          ">": { dir: "parentNode", first: !0 },
          " ": { dir: "parentNode" },
          "+": { dir: "previousSibling", first: !0 },
          "~": { dir: "previousSibling" },
        },
        preFilter: {
          ATTR: function (e) {
            return (
              (e[1] = e[1].replace(te, ne)),
              (e[3] = (e[3] || e[4] || e[5] || "").replace(te, ne)),
              "~=" === e[2] && (e[3] = " " + e[3] + " "),
              e.slice(0, 4)
            );
          },
          CHILD: function (e) {
            return (
              (e[1] = e[1].toLowerCase()),
              "nth" === e[1].slice(0, 3)
                ? (e[3] || se.error(e[0]),
                  (e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3]))),
                  (e[5] = +(e[7] + e[8] || "odd" === e[3])))
                : e[3] && se.error(e[0]),
              e
            );
          },
          PSEUDO: function (e) {
            var t,
              n = !e[6] && e[2];
            return G.CHILD.test(e[0])
              ? null
              : (e[3]
                  ? (e[2] = e[4] || e[5] || "")
                  : n &&
                    X.test(n) &&
                    (t = h(n, !0)) &&
                    (t = n.indexOf(")", n.length - t) - n.length) &&
                    ((e[0] = e[0].slice(0, t)), (e[2] = n.slice(0, t))),
                e.slice(0, 3));
          },
        },
        filter: {
          TAG: function (e) {
            var t = e.replace(te, ne).toLowerCase();
            return "*" === e
              ? function () {
                  return !0;
                }
              : function (e) {
                  return e.nodeName && e.nodeName.toLowerCase() === t;
                };
          },
          CLASS: function (e) {
            var t = m[e + " "];
            return (
              t ||
              ((t = new RegExp("(^|" + M + ")" + e + "(" + M + "|$)")) &&
                m(e, function (e) {
                  return t.test(
                    ("string" == typeof e.className && e.className) ||
                      ("undefined" != typeof e.getAttribute && e.getAttribute("class")) ||
                      "",
                  );
                }))
            );
          },
          ATTR: function (n, r, i) {
            return function (e) {
              var t = se.attr(e, n);
              return null == t
                ? "!=" === r
                : !r ||
                    ((t += ""),
                    "=" === r
                      ? t === i
                      : "!=" === r
                        ? t !== i
                        : "^=" === r
                          ? i && 0 === t.indexOf(i)
                          : "*=" === r
                            ? i && -1 < t.indexOf(i)
                            : "$=" === r
                              ? i && t.slice(-i.length) === i
                              : "~=" === r
                                ? -1 < (" " + t.replace(B, " ") + " ").indexOf(i)
                                : "|=" === r && (t === i || t.slice(0, i.length + 1) === i + "-"));
            };
          },
          CHILD: function (h, e, t, g, v) {
            var y = "nth" !== h.slice(0, 3),
              m = "last" !== h.slice(-4),
              x = "of-type" === e;
            return 1 === g && 0 === v
              ? function (e) {
                  return !!e.parentNode;
                }
              : function (e, t, n) {
                  var r,
                    i,
                    o,
                    a,
                    s,
                    u,
                    l = y !== m ? "nextSibling" : "previousSibling",
                    c = e.parentNode,
                    f = x && e.nodeName.toLowerCase(),
                    p = !n && !x,
                    d = !1;
                  if (c) {
                    if (y) {
                      while (l) {
                        a = e;
                        while ((a = a[l]))
                          if (x ? a.nodeName.toLowerCase() === f : 1 === a.nodeType) return !1;
                        u = l = "only" === h && !u && "nextSibling";
                      }
                      return !0;
                    }
                    if (((u = [m ? c.firstChild : c.lastChild]), m && p)) {
                      (d =
                        (s =
                          (r =
                            (i =
                              (o = (a = c)[S] || (a[S] = {}))[a.uniqueID] || (o[a.uniqueID] = {}))[
                              h
                            ] || [])[0] === k && r[1]) && r[2]),
                        (a = s && c.childNodes[s]);
                      while ((a = (++s && a && a[l]) || (d = s = 0) || u.pop()))
                        if (1 === a.nodeType && ++d && a === e) {
                          i[h] = [k, s, d];
                          break;
                        }
                    } else if (
                      (p &&
                        (d = s =
                          (r =
                            (i =
                              (o = (a = e)[S] || (a[S] = {}))[a.uniqueID] || (o[a.uniqueID] = {}))[
                              h
                            ] || [])[0] === k && r[1]),
                      !1 === d)
                    )
                      while ((a = (++s && a && a[l]) || (d = s = 0) || u.pop()))
                        if (
                          (x ? a.nodeName.toLowerCase() === f : 1 === a.nodeType) &&
                          ++d &&
                          (p &&
                            ((i = (o = a[S] || (a[S] = {}))[a.uniqueID] || (o[a.uniqueID] = {}))[
                              h
                            ] = [k, d]),
                          a === e)
                        )
                          break;
                    return (d -= v) === g || (d % g == 0 && 0 <= d / g);
                  }
                };
          },
          PSEUDO: function (e, o) {
            var t,
              a =
                b.pseudos[e] ||
                b.setFilters[e.toLowerCase()] ||
                se.error("unsupported pseudo: " + e);
            return a[S]
              ? a(o)
              : 1 < a.length
                ? ((t = [e, e, "", o]),
                  b.setFilters.hasOwnProperty(e.toLowerCase())
                    ? le(function (e, t) {
                        var n,
                          r = a(e, o),
                          i = r.length;
                        while (i--) e[(n = P(e, r[i]))] = !(t[n] = r[i]);
                      })
                    : function (e) {
                        return a(e, 0, t);
                      })
                : a;
          },
        },
        pseudos: {
          not: le(function (e) {
            var r = [],
              i = [],
              s = f(e.replace($, "$1"));
            return s[S]
              ? le(function (e, t, n, r) {
                  var i,
                    o = s(e, null, r, []),
                    a = e.length;
                  while (a--) (i = o[a]) && (e[a] = !(t[a] = i));
                })
              : function (e, t, n) {
                  return (r[0] = e), s(r, null, n, i), (r[0] = null), !i.pop();
                };
          }),
          has: le(function (t) {
            return function (e) {
              return 0 < se(t, e).length;
            };
          }),
          contains: le(function (t) {
            return (
              (t = t.replace(te, ne)),
              function (e) {
                return -1 < (e.textContent || o(e)).indexOf(t);
              }
            );
          }),
          lang: le(function (n) {
            return (
              V.test(n || "") || se.error("unsupported lang: " + n),
              (n = n.replace(te, ne).toLowerCase()),
              function (e) {
                var t;
                do {
                  if ((t = E ? e.lang : e.getAttribute("xml:lang") || e.getAttribute("lang")))
                    return (t = t.toLowerCase()) === n || 0 === t.indexOf(n + "-");
                } while ((e = e.parentNode) && 1 === e.nodeType);
                return !1;
              }
            );
          }),
          target: function (e) {
            var t = n.location && n.location.hash;
            return t && t.slice(1) === e.id;
          },
          root: function (e) {
            return e === a;
          },
          focus: function (e) {
            return (
              e === C.activeElement &&
              (!C.hasFocus || C.hasFocus()) &&
              !!(e.type || e.href || ~e.tabIndex)
            );
          },
          enabled: ge(!1),
          disabled: ge(!0),
          checked: function (e) {
            var t = e.nodeName.toLowerCase();
            return ("input" === t && !!e.checked) || ("option" === t && !!e.selected);
          },
          selected: function (e) {
            return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected;
          },
          empty: function (e) {
            for (e = e.firstChild; e; e = e.nextSibling) if (e.nodeType < 6) return !1;
            return !0;
          },
          parent: function (e) {
            return !b.pseudos.empty(e);
          },
          header: function (e) {
            return J.test(e.nodeName);
          },
          input: function (e) {
            return Q.test(e.nodeName);
          },
          button: function (e) {
            var t = e.nodeName.toLowerCase();
            return ("input" === t && "button" === e.type) || "button" === t;
          },
          text: function (e) {
            var t;
            return (
              "input" === e.nodeName.toLowerCase() &&
              "text" === e.type &&
              (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
            );
          },
          first: ve(function () {
            return [0];
          }),
          last: ve(function (e, t) {
            return [t - 1];
          }),
          eq: ve(function (e, t, n) {
            return [n < 0 ? n + t : n];
          }),
          even: ve(function (e, t) {
            for (var n = 0; n < t; n += 2) e.push(n);
            return e;
          }),
          odd: ve(function (e, t) {
            for (var n = 1; n < t; n += 2) e.push(n);
            return e;
          }),
          lt: ve(function (e, t, n) {
            for (var r = n < 0 ? n + t : t < n ? t : n; 0 <= --r; ) e.push(r);
            return e;
          }),
          gt: ve(function (e, t, n) {
            for (var r = n < 0 ? n + t : n; ++r < t; ) e.push(r);
            return e;
          }),
        },
      }).pseudos.nth = b.pseudos.eq),
    { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }))
      b.pseudos[e] = de(e);
    for (e in { submit: !0, reset: !0 }) b.pseudos[e] = he(e);
    function me() {}
    function xe(e) {
      for (var t = 0, n = e.length, r = ""; t < n; t++) r += e[t].value;
      return r;
    }
    function be(s, e, t) {
      var u = e.dir,
        l = e.next,
        c = l || u,
        f = t && "parentNode" === c,
        p = r++;
      return e.first
        ? function (e, t, n) {
            while ((e = e[u])) if (1 === e.nodeType || f) return s(e, t, n);
            return !1;
          }
        : function (e, t, n) {
            var r,
              i,
              o,
              a = [k, p];
            if (n) {
              while ((e = e[u])) if ((1 === e.nodeType || f) && s(e, t, n)) return !0;
            } else
              while ((e = e[u]))
                if (1 === e.nodeType || f)
                  if (
                    ((i = (o = e[S] || (e[S] = {}))[e.uniqueID] || (o[e.uniqueID] = {})),
                    l && l === e.nodeName.toLowerCase())
                  )
                    e = e[u] || e;
                  else {
                    if ((r = i[c]) && r[0] === k && r[1] === p) return (a[2] = r[2]);
                    if (((i[c] = a)[2] = s(e, t, n))) return !0;
                  }
            return !1;
          };
    }
    function we(i) {
      return 1 < i.length
        ? function (e, t, n) {
            var r = i.length;
            while (r--) if (!i[r](e, t, n)) return !1;
            return !0;
          }
        : i[0];
    }
    function Te(e, t, n, r, i) {
      for (var o, a = [], s = 0, u = e.length, l = null != t; s < u; s++)
        (o = e[s]) && ((n && !n(o, r, i)) || (a.push(o), l && t.push(s)));
      return a;
    }
    function Ce(d, h, g, v, y, e) {
      return (
        v && !v[S] && (v = Ce(v)),
        y && !y[S] && (y = Ce(y, e)),
        le(function (e, t, n, r) {
          var i,
            o,
            a,
            s = [],
            u = [],
            l = t.length,
            c =
              e ||
              (function (e, t, n) {
                for (var r = 0, i = t.length; r < i; r++) se(e, t[r], n);
                return n;
              })(h || "*", n.nodeType ? [n] : n, []),
            f = !d || (!e && h) ? c : Te(c, s, d, n, r),
            p = g ? (y || (e ? d : l || v) ? [] : t) : f;
          if ((g && g(f, p, n, r), v)) {
            (i = Te(p, u)), v(i, [], n, r), (o = i.length);
            while (o--) (a = i[o]) && (p[u[o]] = !(f[u[o]] = a));
          }
          if (e) {
            if (y || d) {
              if (y) {
                (i = []), (o = p.length);
                while (o--) (a = p[o]) && i.push((f[o] = a));
                y(null, (p = []), i, r);
              }
              o = p.length;
              while (o--) (a = p[o]) && -1 < (i = y ? P(e, a) : s[o]) && (e[i] = !(t[i] = a));
            }
          } else
            (p = Te(p === t ? p.splice(l, p.length) : p)), y ? y(null, t, p, r) : H.apply(t, p);
        })
      );
    }
    function Ee(e) {
      for (
        var i,
          t,
          n,
          r = e.length,
          o = b.relative[e[0].type],
          a = o || b.relative[" "],
          s = o ? 1 : 0,
          u = be(
            function (e) {
              return e === i;
            },
            a,
            !0,
          ),
          l = be(
            function (e) {
              return -1 < P(i, e);
            },
            a,
            !0,
          ),
          c = [
            function (e, t, n) {
              var r = (!o && (n || t !== w)) || ((i = t).nodeType ? u(e, t, n) : l(e, t, n));
              return (i = null), r;
            },
          ];
        s < r;
        s++
      )
        if ((t = b.relative[e[s].type])) c = [be(we(c), t)];
        else {
          if ((t = b.filter[e[s].type].apply(null, e[s].matches))[S]) {
            for (n = ++s; n < r; n++) if (b.relative[e[n].type]) break;
            return Ce(
              1 < s && we(c),
              1 < s &&
                xe(e.slice(0, s - 1).concat({ value: " " === e[s - 2].type ? "*" : "" })).replace(
                  $,
                  "$1",
                ),
              t,
              s < n && Ee(e.slice(s, n)),
              n < r && Ee((e = e.slice(n))),
              n < r && xe(e),
            );
          }
          c.push(t);
        }
      return we(c);
    }
    return (
      (me.prototype = b.filters = b.pseudos),
      (b.setFilters = new me()),
      (h = se.tokenize =
        function (e, t) {
          var n,
            r,
            i,
            o,
            a,
            s,
            u,
            l = x[e + " "];
          if (l) return t ? 0 : l.slice(0);
          (a = e), (s = []), (u = b.preFilter);
          while (a) {
            for (o in ((n && !(r = _.exec(a))) ||
              (r && (a = a.slice(r[0].length) || a), s.push((i = []))),
            (n = !1),
            (r = z.exec(a)) &&
              ((n = r.shift()),
              i.push({ value: n, type: r[0].replace($, " ") }),
              (a = a.slice(n.length))),
            b.filter))
              !(r = G[o].exec(a)) ||
                (u[o] && !(r = u[o](r))) ||
                ((n = r.shift()),
                i.push({ value: n, type: o, matches: r }),
                (a = a.slice(n.length)));
            if (!n) break;
          }
          return t ? a.length : a ? se.error(e) : x(e, s).slice(0);
        }),
      (f = se.compile =
        function (e, t) {
          var n,
            v,
            y,
            m,
            x,
            r,
            i = [],
            o = [],
            a = A[e + " "];
          if (!a) {
            t || (t = h(e)), (n = t.length);
            while (n--) (a = Ee(t[n]))[S] ? i.push(a) : o.push(a);
            (a = A(
              e,
              ((v = o),
              (m = 0 < (y = i).length),
              (x = 0 < v.length),
              (r = function (e, t, n, r, i) {
                var o,
                  a,
                  s,
                  u = 0,
                  l = "0",
                  c = e && [],
                  f = [],
                  p = w,
                  d = e || (x && b.find.TAG("*", i)),
                  h = (k += null == p ? 1 : Math.random() || 0.1),
                  g = d.length;
                for (i && (w = t == C || t || i); l !== g && null != (o = d[l]); l++) {
                  if (x && o) {
                    (a = 0), t || o.ownerDocument == C || (T(o), (n = !E));
                    while ((s = v[a++]))
                      if (s(o, t || C, n)) {
                        r.push(o);
                        break;
                      }
                    i && (k = h);
                  }
                  m && ((o = !s && o) && u--, e && c.push(o));
                }
                if (((u += l), m && l !== u)) {
                  a = 0;
                  while ((s = y[a++])) s(c, f, t, n);
                  if (e) {
                    if (0 < u) while (l--) c[l] || f[l] || (f[l] = q.call(r));
                    f = Te(f);
                  }
                  H.apply(r, f), i && !e && 0 < f.length && 1 < u + y.length && se.uniqueSort(r);
                }
                return i && ((k = h), (w = p)), c;
              }),
              m ? le(r) : r),
            )).selector = e;
          }
          return a;
        }),
      (g = se.select =
        function (e, t, n, r) {
          var i,
            o,
            a,
            s,
            u,
            l = "function" == typeof e && e,
            c = !r && h((e = l.selector || e));
          if (((n = n || []), 1 === c.length)) {
            if (
              2 < (o = c[0] = c[0].slice(0)).length &&
              "ID" === (a = o[0]).type &&
              9 === t.nodeType &&
              E &&
              b.relative[o[1].type]
            ) {
              if (!(t = (b.find.ID(a.matches[0].replace(te, ne), t) || [])[0])) return n;
              l && (t = t.parentNode), (e = e.slice(o.shift().value.length));
            }
            i = G.needsContext.test(e) ? 0 : o.length;
            while (i--) {
              if (((a = o[i]), b.relative[(s = a.type)])) break;
              if (
                (u = b.find[s]) &&
                (r = u(a.matches[0].replace(te, ne), (ee.test(o[0].type) && ye(t.parentNode)) || t))
              ) {
                if ((o.splice(i, 1), !(e = r.length && xe(o)))) return H.apply(n, r), n;
                break;
              }
            }
          }
          return (l || f(e, c))(r, t, !E, n, !t || (ee.test(e) && ye(t.parentNode)) || t), n;
        }),
      (d.sortStable = S.split("").sort(D).join("") === S),
      (d.detectDuplicates = !!l),
      T(),
      (d.sortDetached = ce(function (e) {
        return 1 & e.compareDocumentPosition(C.createElement("fieldset"));
      })),
      ce(function (e) {
        return (e.innerHTML = "<a href='#'></a>"), "#" === e.firstChild.getAttribute("href");
      }) ||
        fe("type|href|height|width", function (e, t, n) {
          if (!n) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2);
        }),
      (d.attributes &&
        ce(function (e) {
          return (
            (e.innerHTML = "<input/>"),
            e.firstChild.setAttribute("value", ""),
            "" === e.firstChild.getAttribute("value")
          );
        })) ||
        fe("value", function (e, t, n) {
          if (!n && "input" === e.nodeName.toLowerCase()) return e.defaultValue;
        }),
      ce(function (e) {
        return null == e.getAttribute("disabled");
      }) ||
        fe(R, function (e, t, n) {
          var r;
          if (!n)
            return !0 === e[t]
              ? t.toLowerCase()
              : (r = e.getAttributeNode(t)) && r.specified
                ? r.value
                : null;
        }),
      se
    );
  })(C);
  (S.find = d),
    (S.expr = d.selectors),
    (S.expr[":"] = S.expr.pseudos),
    (S.uniqueSort = S.unique = d.uniqueSort),
    (S.text = d.getText),
    (S.isXMLDoc = d.isXML),
    (S.contains = d.contains),
    (S.escapeSelector = d.escape);
  var h = function (e, t, n) {
      var r = [],
        i = void 0 !== n;
      while ((e = e[t]) && 9 !== e.nodeType)
        if (1 === e.nodeType) {
          if (i && S(e).is(n)) break;
          r.push(e);
        }
      return r;
    },
    T = function (e, t) {
      for (var n = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e);
      return n;
    },
    k = S.expr.match.needsContext;
  function A(e, t) {
    return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase();
  }
  var N = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;
  function D(e, n, r) {
    return m(n)
      ? S.grep(e, function (e, t) {
          return !!n.call(e, t, e) !== r;
        })
      : n.nodeType
        ? S.grep(e, function (e) {
            return (e === n) !== r;
          })
        : "string" != typeof n
          ? S.grep(e, function (e) {
              return -1 < i.call(n, e) !== r;
            })
          : S.filter(n, e, r);
  }
  (S.filter = function (e, t, n) {
    var r = t[0];
    return (
      n && (e = ":not(" + e + ")"),
      1 === t.length && 1 === r.nodeType
        ? S.find.matchesSelector(r, e)
          ? [r]
          : []
        : S.find.matches(
            e,
            S.grep(t, function (e) {
              return 1 === e.nodeType;
            }),
          )
    );
  }),
    S.fn.extend({
      find: function (e) {
        var t,
          n,
          r = this.length,
          i = this;
        if ("string" != typeof e)
          return this.pushStack(
            S(e).filter(function () {
              for (t = 0; t < r; t++) if (S.contains(i[t], this)) return !0;
            }),
          );
        for (n = this.pushStack([]), t = 0; t < r; t++) S.find(e, i[t], n);
        return 1 < r ? S.uniqueSort(n) : n;
      },
      filter: function (e) {
        return this.pushStack(D(this, e || [], !1));
      },
      not: function (e) {
        return this.pushStack(D(this, e || [], !0));
      },
      is: function (e) {
        return !!D(this, "string" == typeof e && k.test(e) ? S(e) : e || [], !1).length;
      },
    });
  var j,
    q = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;
  ((S.fn.init = function (e, t, n) {
    var r, i;
    if (!e) return this;
    if (((n = n || j), "string" == typeof e)) {
      if (
        !(r =
          "<" === e[0] && ">" === e[e.length - 1] && 3 <= e.length ? [null, e, null] : q.exec(e)) ||
        (!r[1] && t)
      )
        return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e);
      if (r[1]) {
        if (
          ((t = t instanceof S ? t[0] : t),
          S.merge(this, S.parseHTML(r[1], t && t.nodeType ? t.ownerDocument || t : E, !0)),
          N.test(r[1]) && S.isPlainObject(t))
        )
          for (r in t) m(this[r]) ? this[r](t[r]) : this.attr(r, t[r]);
        return this;
      }
      return (i = E.getElementById(r[2])) && ((this[0] = i), (this.length = 1)), this;
    }
    return e.nodeType
      ? ((this[0] = e), (this.length = 1), this)
      : m(e)
        ? void 0 !== n.ready
          ? n.ready(e)
          : e(S)
        : S.makeArray(e, this);
  }).prototype = S.fn),
    (j = S(E));
  var L = /^(?:parents|prev(?:Until|All))/,
    H = { children: !0, contents: !0, next: !0, prev: !0 };
  function O(e, t) {
    while ((e = e[t]) && 1 !== e.nodeType);
    return e;
  }
  S.fn.extend({
    has: function (e) {
      var t = S(e, this),
        n = t.length;
      return this.filter(function () {
        for (var e = 0; e < n; e++) if (S.contains(this, t[e])) return !0;
      });
    },
    closest: function (e, t) {
      var n,
        r = 0,
        i = this.length,
        o = [],
        a = "string" != typeof e && S(e);
      if (!k.test(e))
        for (; r < i; r++)
          for (n = this[r]; n && n !== t; n = n.parentNode)
            if (
              n.nodeType < 11 &&
              (a ? -1 < a.index(n) : 1 === n.nodeType && S.find.matchesSelector(n, e))
            ) {
              o.push(n);
              break;
            }
      return this.pushStack(1 < o.length ? S.uniqueSort(o) : o);
    },
    index: function (e) {
      return e
        ? "string" == typeof e
          ? i.call(S(e), this[0])
          : i.call(this, e.jquery ? e[0] : e)
        : this[0] && this[0].parentNode
          ? this.first().prevAll().length
          : -1;
    },
    add: function (e, t) {
      return this.pushStack(S.uniqueSort(S.merge(this.get(), S(e, t))));
    },
    addBack: function (e) {
      return this.add(null == e ? this.prevObject : this.prevObject.filter(e));
    },
  }),
    S.each(
      {
        parent: function (e) {
          var t = e.parentNode;
          return t && 11 !== t.nodeType ? t : null;
        },
        parents: function (e) {
          return h(e, "parentNode");
        },
        parentsUntil: function (e, t, n) {
          return h(e, "parentNode", n);
        },
        next: function (e) {
          return O(e, "nextSibling");
        },
        prev: function (e) {
          return O(e, "previousSibling");
        },
        nextAll: function (e) {
          return h(e, "nextSibling");
        },
        prevAll: function (e) {
          return h(e, "previousSibling");
        },
        nextUntil: function (e, t, n) {
          return h(e, "nextSibling", n);
        },
        prevUntil: function (e, t, n) {
          return h(e, "previousSibling", n);
        },
        siblings: function (e) {
          return T((e.parentNode || {}).firstChild, e);
        },
        children: function (e) {
          return T(e.firstChild);
        },
        contents: function (e) {
          return null != e.contentDocument && r(e.contentDocument)
            ? e.contentDocument
            : (A(e, "template") && (e = e.content || e), S.merge([], e.childNodes));
        },
      },
      function (r, i) {
        S.fn[r] = function (e, t) {
          var n = S.map(this, i, e);
          return (
            "Until" !== r.slice(-5) && (t = e),
            t && "string" == typeof t && (n = S.filter(t, n)),
            1 < this.length && (H[r] || S.uniqueSort(n), L.test(r) && n.reverse()),
            this.pushStack(n)
          );
        };
      },
    );
  var P = /[^\x20\t\r\n\f]+/g;
  function R(e) {
    return e;
  }
  function M(e) {
    throw e;
  }
  function I(e, t, n, r) {
    var i;
    try {
      e && m((i = e.promise))
        ? i.call(e).done(t).fail(n)
        : e && m((i = e.then))
          ? i.call(e, t, n)
          : t.apply(void 0, [e].slice(r));
    } catch (e) {
      n.apply(void 0, [e]);
    }
  }
  (S.Callbacks = function (r) {
    var e, n;
    r =
      "string" == typeof r
        ? ((e = r),
          (n = {}),
          S.each(e.match(P) || [], function (e, t) {
            n[t] = !0;
          }),
          n)
        : S.extend({}, r);
    var i,
      t,
      o,
      a,
      s = [],
      u = [],
      l = -1,
      c = function () {
        for (a = a || r.once, o = i = !0; u.length; l = -1) {
          t = u.shift();
          while (++l < s.length)
            !1 === s[l].apply(t[0], t[1]) && r.stopOnFalse && ((l = s.length), (t = !1));
        }
        r.memory || (t = !1), (i = !1), a && (s = t ? [] : "");
      },
      f = {
        add: function () {
          return (
            s &&
              (t && !i && ((l = s.length - 1), u.push(t)),
              (function n(e) {
                S.each(e, function (e, t) {
                  m(t)
                    ? (r.unique && f.has(t)) || s.push(t)
                    : t && t.length && "string" !== w(t) && n(t);
                });
              })(arguments),
              t && !i && c()),
            this
          );
        },
        remove: function () {
          return (
            S.each(arguments, function (e, t) {
              var n;
              while (-1 < (n = S.inArray(t, s, n))) s.splice(n, 1), n <= l && l--;
            }),
            this
          );
        },
        has: function (e) {
          return e ? -1 < S.inArray(e, s) : 0 < s.length;
        },
        empty: function () {
          return s && (s = []), this;
        },
        disable: function () {
          return (a = u = []), (s = t = ""), this;
        },
        disabled: function () {
          return !s;
        },
        lock: function () {
          return (a = u = []), t || i || (s = t = ""), this;
        },
        locked: function () {
          return !!a;
        },
        fireWith: function (e, t) {
          return a || ((t = [e, (t = t || []).slice ? t.slice() : t]), u.push(t), i || c()), this;
        },
        fire: function () {
          return f.fireWith(this, arguments), this;
        },
        fired: function () {
          return !!o;
        },
      };
    return f;
  }),
    S.extend({
      Deferred: function (e) {
        var o = [
            ["notify", "progress", S.Callbacks("memory"), S.Callbacks("memory"), 2],
            [
              "resolve",
              "done",
              S.Callbacks("once memory"),
              S.Callbacks("once memory"),
              0,
              "resolved",
            ],
            [
              "reject",
              "fail",
              S.Callbacks("once memory"),
              S.Callbacks("once memory"),
              1,
              "rejected",
            ],
          ],
          i = "pending",
          a = {
            state: function () {
              return i;
            },
            always: function () {
              return s.done(arguments).fail(arguments), this;
            },
            catch: function (e) {
              return a.then(null, e);
            },
            pipe: function () {
              var i = arguments;
              return S.Deferred(function (r) {
                S.each(o, function (e, t) {
                  var n = m(i[t[4]]) && i[t[4]];
                  s[t[1]](function () {
                    var e = n && n.apply(this, arguments);
                    e && m(e.promise)
                      ? e.promise().progress(r.notify).done(r.resolve).fail(r.reject)
                      : r[t[0] + "With"](this, n ? [e] : arguments);
                  });
                }),
                  (i = null);
              }).promise();
            },
            then: function (t, n, r) {
              var u = 0;
              function l(i, o, a, s) {
                return function () {
                  var n = this,
                    r = arguments,
                    e = function () {
                      var e, t;
                      if (!(i < u)) {
                        if ((e = a.apply(n, r)) === o.promise())
                          throw new TypeError("Thenable self-resolution");
                        (t = e && ("object" == typeof e || "function" == typeof e) && e.then),
                          m(t)
                            ? s
                              ? t.call(e, l(u, o, R, s), l(u, o, M, s))
                              : (u++,
                                t.call(e, l(u, o, R, s), l(u, o, M, s), l(u, o, R, o.notifyWith)))
                            : (a !== R && ((n = void 0), (r = [e])), (s || o.resolveWith)(n, r));
                      }
                    },
                    t = s
                      ? e
                      : function () {
                          try {
                            e();
                          } catch (e) {
                            S.Deferred.exceptionHook && S.Deferred.exceptionHook(e, t.stackTrace),
                              u <= i + 1 &&
                                (a !== M && ((n = void 0), (r = [e])), o.rejectWith(n, r));
                          }
                        };
                  i
                    ? t()
                    : (S.Deferred.getStackHook && (t.stackTrace = S.Deferred.getStackHook()),
                      C.setTimeout(t));
                };
              }
              return S.Deferred(function (e) {
                o[0][3].add(l(0, e, m(r) ? r : R, e.notifyWith)),
                  o[1][3].add(l(0, e, m(t) ? t : R)),
                  o[2][3].add(l(0, e, m(n) ? n : M));
              }).promise();
            },
            promise: function (e) {
              return null != e ? S.extend(e, a) : a;
            },
          },
          s = {};
        return (
          S.each(o, function (e, t) {
            var n = t[2],
              r = t[5];
            (a[t[1]] = n.add),
              r &&
                n.add(
                  function () {
                    i = r;
                  },
                  o[3 - e][2].disable,
                  o[3 - e][3].disable,
                  o[0][2].lock,
                  o[0][3].lock,
                ),
              n.add(t[3].fire),
              (s[t[0]] = function () {
                return s[t[0] + "With"](this === s ? void 0 : this, arguments), this;
              }),
              (s[t[0] + "With"] = n.fireWith);
          }),
          a.promise(s),
          e && e.call(s, s),
          s
        );
      },
      when: function (e) {
        var n = arguments.length,
          t = n,
          r = Array(t),
          i = s.call(arguments),
          o = S.Deferred(),
          a = function (t) {
            return function (e) {
              (r[t] = this),
                (i[t] = 1 < arguments.length ? s.call(arguments) : e),
                --n || o.resolveWith(r, i);
            };
          };
        if (
          n <= 1 &&
          (I(e, o.done(a(t)).resolve, o.reject, !n),
          "pending" === o.state() || m(i[t] && i[t].then))
        )
          return o.then();
        while (t--) I(i[t], a(t), o.reject);
        return o.promise();
      },
    });
  var W = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
  (S.Deferred.exceptionHook = function (e, t) {
    C.console &&
      C.console.warn &&
      e &&
      W.test(e.name) &&
      C.console.warn("jQuery.Deferred exception: " + e.message, e.stack, t);
  }),
    (S.readyException = function (e) {
      C.setTimeout(function () {
        throw e;
      });
    });
  var F = S.Deferred();
  function B() {
    E.removeEventListener("DOMContentLoaded", B), C.removeEventListener("load", B), S.ready();
  }
  (S.fn.ready = function (e) {
    return (
      F.then(e)["catch"](function (e) {
        S.readyException(e);
      }),
      this
    );
  }),
    S.extend({
      isReady: !1,
      readyWait: 1,
      ready: function (e) {
        (!0 === e ? --S.readyWait : S.isReady) ||
          ((S.isReady = !0) !== e && 0 < --S.readyWait) ||
          F.resolveWith(E, [S]);
      },
    }),
    (S.ready.then = F.then),
    "complete" === E.readyState || ("loading" !== E.readyState && !E.documentElement.doScroll)
      ? C.setTimeout(S.ready)
      : (E.addEventListener("DOMContentLoaded", B), C.addEventListener("load", B));
  var $ = function (e, t, n, r, i, o, a) {
      var s = 0,
        u = e.length,
        l = null == n;
      if ("object" === w(n)) for (s in ((i = !0), n)) $(e, t, s, n[s], !0, o, a);
      else if (
        void 0 !== r &&
        ((i = !0),
        m(r) || (a = !0),
        l &&
          (a
            ? (t.call(e, r), (t = null))
            : ((l = t),
              (t = function (e, t, n) {
                return l.call(S(e), n);
              }))),
        t)
      )
        for (; s < u; s++) t(e[s], n, a ? r : r.call(e[s], s, t(e[s], n)));
      return i ? e : l ? t.call(e) : u ? t(e[0], n) : o;
    },
    _ = /^-ms-/,
    z = /-([a-z])/g;
  function U(e, t) {
    return t.toUpperCase();
  }
  function X(e) {
    return e.replace(_, "ms-").replace(z, U);
  }
  var V = function (e) {
    return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType;
  };
  function G() {
    this.expando = S.expando + G.uid++;
  }
  (G.uid = 1),
    (G.prototype = {
      cache: function (e) {
        var t = e[this.expando];
        return (
          t ||
            ((t = {}),
            V(e) &&
              (e.nodeType
                ? (e[this.expando] = t)
                : Object.defineProperty(e, this.expando, { value: t, configurable: !0 }))),
          t
        );
      },
      set: function (e, t, n) {
        var r,
          i = this.cache(e);
        if ("string" == typeof t) i[X(t)] = n;
        else for (r in t) i[X(r)] = t[r];
        return i;
      },
      get: function (e, t) {
        return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][X(t)];
      },
      access: function (e, t, n) {
        return void 0 === t || (t && "string" == typeof t && void 0 === n)
          ? this.get(e, t)
          : (this.set(e, t, n), void 0 !== n ? n : t);
      },
      remove: function (e, t) {
        var n,
          r = e[this.expando];
        if (void 0 !== r) {
          if (void 0 !== t) {
            n = (t = Array.isArray(t) ? t.map(X) : (t = X(t)) in r ? [t] : t.match(P) || []).length;
            while (n--) delete r[t[n]];
          }
          (void 0 === t || S.isEmptyObject(r)) &&
            (e.nodeType ? (e[this.expando] = void 0) : delete e[this.expando]);
        }
      },
      hasData: function (e) {
        var t = e[this.expando];
        return void 0 !== t && !S.isEmptyObject(t);
      },
    });
  var Y = new G(),
    Q = new G(),
    J = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
    K = /[A-Z]/g;
  function Z(e, t, n) {
    var r, i;
    if (void 0 === n && 1 === e.nodeType)
      if (
        ((r = "data-" + t.replace(K, "-$&").toLowerCase()),
        "string" == typeof (n = e.getAttribute(r)))
      ) {
        try {
          n =
            "true" === (i = n) ||
            ("false" !== i &&
              ("null" === i ? null : i === +i + "" ? +i : J.test(i) ? JSON.parse(i) : i));
        } catch (e) {}
        Q.set(e, t, n);
      } else n = void 0;
    return n;
  }
  S.extend({
    hasData: function (e) {
      return Q.hasData(e) || Y.hasData(e);
    },
    data: function (e, t, n) {
      return Q.access(e, t, n);
    },
    removeData: function (e, t) {
      Q.remove(e, t);
    },
    _data: function (e, t, n) {
      return Y.access(e, t, n);
    },
    _removeData: function (e, t) {
      Y.remove(e, t);
    },
  }),
    S.fn.extend({
      data: function (n, e) {
        var t,
          r,
          i,
          o = this[0],
          a = o && o.attributes;
        if (void 0 === n) {
          if (this.length && ((i = Q.get(o)), 1 === o.nodeType && !Y.get(o, "hasDataAttrs"))) {
            t = a.length;
            while (t--)
              a[t] &&
                0 === (r = a[t].name).indexOf("data-") &&
                ((r = X(r.slice(5))), Z(o, r, i[r]));
            Y.set(o, "hasDataAttrs", !0);
          }
          return i;
        }
        return "object" == typeof n
          ? this.each(function () {
              Q.set(this, n);
            })
          : $(
              this,
              function (e) {
                var t;
                if (o && void 0 === e)
                  return void 0 !== (t = Q.get(o, n)) ? t : void 0 !== (t = Z(o, n)) ? t : void 0;
                this.each(function () {
                  Q.set(this, n, e);
                });
              },
              null,
              e,
              1 < arguments.length,
              null,
              !0,
            );
      },
      removeData: function (e) {
        return this.each(function () {
          Q.remove(this, e);
        });
      },
    }),
    S.extend({
      queue: function (e, t, n) {
        var r;
        if (e)
          return (
            (t = (t || "fx") + "queue"),
            (r = Y.get(e, t)),
            n && (!r || Array.isArray(n) ? (r = Y.access(e, t, S.makeArray(n))) : r.push(n)),
            r || []
          );
      },
      dequeue: function (e, t) {
        t = t || "fx";
        var n = S.queue(e, t),
          r = n.length,
          i = n.shift(),
          o = S._queueHooks(e, t);
        "inprogress" === i && ((i = n.shift()), r--),
          i &&
            ("fx" === t && n.unshift("inprogress"),
            delete o.stop,
            i.call(
              e,
              function () {
                S.dequeue(e, t);
              },
              o,
            )),
          !r && o && o.empty.fire();
      },
      _queueHooks: function (e, t) {
        var n = t + "queueHooks";
        return (
          Y.get(e, n) ||
          Y.access(e, n, {
            empty: S.Callbacks("once memory").add(function () {
              Y.remove(e, [t + "queue", n]);
            }),
          })
        );
      },
    }),
    S.fn.extend({
      queue: function (t, n) {
        var e = 2;
        return (
          "string" != typeof t && ((n = t), (t = "fx"), e--),
          arguments.length < e
            ? S.queue(this[0], t)
            : void 0 === n
              ? this
              : this.each(function () {
                  var e = S.queue(this, t, n);
                  S._queueHooks(this, t), "fx" === t && "inprogress" !== e[0] && S.dequeue(this, t);
                })
        );
      },
      dequeue: function (e) {
        return this.each(function () {
          S.dequeue(this, e);
        });
      },
      clearQueue: function (e) {
        return this.queue(e || "fx", []);
      },
      promise: function (e, t) {
        var n,
          r = 1,
          i = S.Deferred(),
          o = this,
          a = this.length,
          s = function () {
            --r || i.resolveWith(o, [o]);
          };
        "string" != typeof e && ((t = e), (e = void 0)), (e = e || "fx");
        while (a--) (n = Y.get(o[a], e + "queueHooks")) && n.empty && (r++, n.empty.add(s));
        return s(), i.promise(t);
      },
    });
  var ee = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
    te = new RegExp("^(?:([+-])=|)(" + ee + ")([a-z%]*)$", "i"),
    ne = ["Top", "Right", "Bottom", "Left"],
    re = E.documentElement,
    ie = function (e) {
      return S.contains(e.ownerDocument, e);
    },
    oe = { composed: !0 };
  re.getRootNode &&
    (ie = function (e) {
      return S.contains(e.ownerDocument, e) || e.getRootNode(oe) === e.ownerDocument;
    });
  var ae = function (e, t) {
    return (
      "none" === (e = t || e).style.display ||
      ("" === e.style.display && ie(e) && "none" === S.css(e, "display"))
    );
  };
  function se(e, t, n, r) {
    var i,
      o,
      a = 20,
      s = r
        ? function () {
            return r.cur();
          }
        : function () {
            return S.css(e, t, "");
          },
      u = s(),
      l = (n && n[3]) || (S.cssNumber[t] ? "" : "px"),
      c = e.nodeType && (S.cssNumber[t] || ("px" !== l && +u)) && te.exec(S.css(e, t));
    if (c && c[3] !== l) {
      (u /= 2), (l = l || c[3]), (c = +u || 1);
      while (a--)
        S.style(e, t, c + l), (1 - o) * (1 - (o = s() / u || 0.5)) <= 0 && (a = 0), (c /= o);
      (c *= 2), S.style(e, t, c + l), (n = n || []);
    }
    return (
      n &&
        ((c = +c || +u || 0),
        (i = n[1] ? c + (n[1] + 1) * n[2] : +n[2]),
        r && ((r.unit = l), (r.start = c), (r.end = i))),
      i
    );
  }
  var ue = {};
  function le(e, t) {
    for (var n, r, i, o, a, s, u, l = [], c = 0, f = e.length; c < f; c++)
      (r = e[c]).style &&
        ((n = r.style.display),
        t
          ? ("none" === n && ((l[c] = Y.get(r, "display") || null), l[c] || (r.style.display = "")),
            "" === r.style.display &&
              ae(r) &&
              (l[c] =
                ((u = a = o = void 0),
                (a = (i = r).ownerDocument),
                (s = i.nodeName),
                (u = ue[s]) ||
                  ((o = a.body.appendChild(a.createElement(s))),
                  (u = S.css(o, "display")),
                  o.parentNode.removeChild(o),
                  "none" === u && (u = "block"),
                  (ue[s] = u)))))
          : "none" !== n && ((l[c] = "none"), Y.set(r, "display", n)));
    for (c = 0; c < f; c++) null != l[c] && (e[c].style.display = l[c]);
    return e;
  }
  S.fn.extend({
    show: function () {
      return le(this, !0);
    },
    hide: function () {
      return le(this);
    },
    toggle: function (e) {
      return "boolean" == typeof e
        ? e
          ? this.show()
          : this.hide()
        : this.each(function () {
            ae(this) ? S(this).show() : S(this).hide();
          });
    },
  });
  var ce,
    fe,
    pe = /^(?:checkbox|radio)$/i,
    de = /<([a-z][^\/\0>\x20\t\r\n\f]*)/i,
    he = /^$|^module$|\/(?:java|ecma)script/i;
  (ce = E.createDocumentFragment().appendChild(E.createElement("div"))),
    (fe = E.createElement("input")).setAttribute("type", "radio"),
    fe.setAttribute("checked", "checked"),
    fe.setAttribute("name", "t"),
    ce.appendChild(fe),
    (y.checkClone = ce.cloneNode(!0).cloneNode(!0).lastChild.checked),
    (ce.innerHTML = "<textarea>x</textarea>"),
    (y.noCloneChecked = !!ce.cloneNode(!0).lastChild.defaultValue),
    (ce.innerHTML = "<option></option>"),
    (y.option = !!ce.lastChild);
  var ge = {
    thead: [1, "<table>", "</table>"],
    col: [2, "<table><colgroup>", "</colgroup></table>"],
    tr: [2, "<table><tbody>", "</tbody></table>"],
    td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
    _default: [0, "", ""],
  };
  function ve(e, t) {
    var n;
    return (
      (n =
        "undefined" != typeof e.getElementsByTagName
          ? e.getElementsByTagName(t || "*")
          : "undefined" != typeof e.querySelectorAll
            ? e.querySelectorAll(t || "*")
            : []),
      void 0 === t || (t && A(e, t)) ? S.merge([e], n) : n
    );
  }
  function ye(e, t) {
    for (var n = 0, r = e.length; n < r; n++)
      Y.set(e[n], "globalEval", !t || Y.get(t[n], "globalEval"));
  }
  (ge.tbody = ge.tfoot = ge.colgroup = ge.caption = ge.thead),
    (ge.th = ge.td),
    y.option || (ge.optgroup = ge.option = [1, "<select multiple='multiple'>", "</select>"]);
  var me = /<|&#?\w+;/;
  function xe(e, t, n, r, i) {
    for (
      var o, a, s, u, l, c, f = t.createDocumentFragment(), p = [], d = 0, h = e.length;
      d < h;
      d++
    )
      if ((o = e[d]) || 0 === o)
        if ("object" === w(o)) S.merge(p, o.nodeType ? [o] : o);
        else if (me.test(o)) {
          (a = a || f.appendChild(t.createElement("div"))),
            (s = (de.exec(o) || ["", ""])[1].toLowerCase()),
            (u = ge[s] || ge._default),
            (a.innerHTML = u[1] + S.htmlPrefilter(o) + u[2]),
            (c = u[0]);
          while (c--) a = a.lastChild;
          S.merge(p, a.childNodes), ((a = f.firstChild).textContent = "");
        } else p.push(t.createTextNode(o));
    (f.textContent = ""), (d = 0);
    while ((o = p[d++]))
      if (r && -1 < S.inArray(o, r)) i && i.push(o);
      else if (((l = ie(o)), (a = ve(f.appendChild(o), "script")), l && ye(a), n)) {
        c = 0;
        while ((o = a[c++])) he.test(o.type || "") && n.push(o);
      }
    return f;
  }
  var be = /^key/,
    we = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
    Te = /^([^.]*)(?:\.(.+)|)/;
  function Ce() {
    return !0;
  }
  function Ee() {
    return !1;
  }
  function Se(e, t) {
    return (
      (e ===
        (function () {
          try {
            return E.activeElement;
          } catch (e) {}
        })()) ==
      ("focus" === t)
    );
  }
  function ke(e, t, n, r, i, o) {
    var a, s;
    if ("object" == typeof t) {
      for (s in ("string" != typeof n && ((r = r || n), (n = void 0)), t)) ke(e, s, n, r, t[s], o);
      return e;
    }
    if (
      (null == r && null == i
        ? ((i = n), (r = n = void 0))
        : null == i &&
          ("string" == typeof n ? ((i = r), (r = void 0)) : ((i = r), (r = n), (n = void 0))),
      !1 === i)
    )
      i = Ee;
    else if (!i) return e;
    return (
      1 === o &&
        ((a = i),
        ((i = function (e) {
          return S().off(e), a.apply(this, arguments);
        }).guid = a.guid || (a.guid = S.guid++))),
      e.each(function () {
        S.event.add(this, t, i, r, n);
      })
    );
  }
  function Ae(e, i, o) {
    o
      ? (Y.set(e, i, !1),
        S.event.add(e, i, {
          namespace: !1,
          handler: function (e) {
            var t,
              n,
              r = Y.get(this, i);
            if (1 & e.isTrigger && this[i]) {
              if (r.length) (S.event.special[i] || {}).delegateType && e.stopPropagation();
              else if (
                ((r = s.call(arguments)),
                Y.set(this, i, r),
                (t = o(this, i)),
                this[i](),
                r !== (n = Y.get(this, i)) || t ? Y.set(this, i, !1) : (n = {}),
                r !== n)
              )
                return e.stopImmediatePropagation(), e.preventDefault(), n.value;
            } else
              r.length &&
                (Y.set(this, i, {
                  value: S.event.trigger(S.extend(r[0], S.Event.prototype), r.slice(1), this),
                }),
                e.stopImmediatePropagation());
          },
        }))
      : void 0 === Y.get(e, i) && S.event.add(e, i, Ce);
  }
  (S.event = {
    global: {},
    add: function (t, e, n, r, i) {
      var o,
        a,
        s,
        u,
        l,
        c,
        f,
        p,
        d,
        h,
        g,
        v = Y.get(t);
      if (V(t)) {
        n.handler && ((n = (o = n).handler), (i = o.selector)),
          i && S.find.matchesSelector(re, i),
          n.guid || (n.guid = S.guid++),
          (u = v.events) || (u = v.events = Object.create(null)),
          (a = v.handle) ||
            (a = v.handle =
              function (e) {
                return "undefined" != typeof S && S.event.triggered !== e.type
                  ? S.event.dispatch.apply(t, arguments)
                  : void 0;
              }),
          (l = (e = (e || "").match(P) || [""]).length);
        while (l--)
          (d = g = (s = Te.exec(e[l]) || [])[1]),
            (h = (s[2] || "").split(".").sort()),
            d &&
              ((f = S.event.special[d] || {}),
              (d = (i ? f.delegateType : f.bindType) || d),
              (f = S.event.special[d] || {}),
              (c = S.extend(
                {
                  type: d,
                  origType: g,
                  data: r,
                  handler: n,
                  guid: n.guid,
                  selector: i,
                  needsContext: i && S.expr.match.needsContext.test(i),
                  namespace: h.join("."),
                },
                o,
              )),
              (p = u[d]) ||
                (((p = u[d] = []).delegateCount = 0),
                (f.setup && !1 !== f.setup.call(t, r, h, a)) ||
                  (t.addEventListener && t.addEventListener(d, a))),
              f.add && (f.add.call(t, c), c.handler.guid || (c.handler.guid = n.guid)),
              i ? p.splice(p.delegateCount++, 0, c) : p.push(c),
              (S.event.global[d] = !0));
      }
    },
    remove: function (e, t, n, r, i) {
      var o,
        a,
        s,
        u,
        l,
        c,
        f,
        p,
        d,
        h,
        g,
        v = Y.hasData(e) && Y.get(e);
      if (v && (u = v.events)) {
        l = (t = (t || "").match(P) || [""]).length;
        while (l--)
          if (((d = g = (s = Te.exec(t[l]) || [])[1]), (h = (s[2] || "").split(".").sort()), d)) {
            (f = S.event.special[d] || {}),
              (p = u[(d = (r ? f.delegateType : f.bindType) || d)] || []),
              (s = s[2] && new RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)")),
              (a = o = p.length);
            while (o--)
              (c = p[o]),
                (!i && g !== c.origType) ||
                  (n && n.guid !== c.guid) ||
                  (s && !s.test(c.namespace)) ||
                  (r && r !== c.selector && ("**" !== r || !c.selector)) ||
                  (p.splice(o, 1),
                  c.selector && p.delegateCount--,
                  f.remove && f.remove.call(e, c));
            a &&
              !p.length &&
              ((f.teardown && !1 !== f.teardown.call(e, h, v.handle)) ||
                S.removeEvent(e, d, v.handle),
              delete u[d]);
          } else for (d in u) S.event.remove(e, d + t[l], n, r, !0);
        S.isEmptyObject(u) && Y.remove(e, "handle events");
      }
    },
    dispatch: function (e) {
      var t,
        n,
        r,
        i,
        o,
        a,
        s = new Array(arguments.length),
        u = S.event.fix(e),
        l = (Y.get(this, "events") || Object.create(null))[u.type] || [],
        c = S.event.special[u.type] || {};
      for (s[0] = u, t = 1; t < arguments.length; t++) s[t] = arguments[t];
      if (((u.delegateTarget = this), !c.preDispatch || !1 !== c.preDispatch.call(this, u))) {
        (a = S.event.handlers.call(this, u, l)), (t = 0);
        while ((i = a[t++]) && !u.isPropagationStopped()) {
          (u.currentTarget = i.elem), (n = 0);
          while ((o = i.handlers[n++]) && !u.isImmediatePropagationStopped())
            (u.rnamespace && !1 !== o.namespace && !u.rnamespace.test(o.namespace)) ||
              ((u.handleObj = o),
              (u.data = o.data),
              void 0 !==
                (r = ((S.event.special[o.origType] || {}).handle || o.handler).apply(i.elem, s)) &&
                !1 === (u.result = r) &&
                (u.preventDefault(), u.stopPropagation()));
        }
        return c.postDispatch && c.postDispatch.call(this, u), u.result;
      }
    },
    handlers: function (e, t) {
      var n,
        r,
        i,
        o,
        a,
        s = [],
        u = t.delegateCount,
        l = e.target;
      if (u && l.nodeType && !("click" === e.type && 1 <= e.button))
        for (; l !== this; l = l.parentNode || this)
          if (1 === l.nodeType && ("click" !== e.type || !0 !== l.disabled)) {
            for (o = [], a = {}, n = 0; n < u; n++)
              void 0 === a[(i = (r = t[n]).selector + " ")] &&
                (a[i] = r.needsContext
                  ? -1 < S(i, this).index(l)
                  : S.find(i, this, null, [l]).length),
                a[i] && o.push(r);
            o.length && s.push({ elem: l, handlers: o });
          }
      return (l = this), u < t.length && s.push({ elem: l, handlers: t.slice(u) }), s;
    },
    addProp: function (t, e) {
      Object.defineProperty(S.Event.prototype, t, {
        enumerable: !0,
        configurable: !0,
        get: m(e)
          ? function () {
              if (this.originalEvent) return e(this.originalEvent);
            }
          : function () {
              if (this.originalEvent) return this.originalEvent[t];
            },
        set: function (e) {
          Object.defineProperty(this, t, {
            enumerable: !0,
            configurable: !0,
            writable: !0,
            value: e,
          });
        },
      });
    },
    fix: function (e) {
      return e[S.expando] ? e : new S.Event(e);
    },
    special: {
      load: { noBubble: !0 },
      click: {
        setup: function (e) {
          var t = this || e;
          return pe.test(t.type) && t.click && A(t, "input") && Ae(t, "click", Ce), !1;
        },
        trigger: function (e) {
          var t = this || e;
          return pe.test(t.type) && t.click && A(t, "input") && Ae(t, "click"), !0;
        },
        _default: function (e) {
          var t = e.target;
          return (pe.test(t.type) && t.click && A(t, "input") && Y.get(t, "click")) || A(t, "a");
        },
      },
      beforeunload: {
        postDispatch: function (e) {
          void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result);
        },
      },
    },
  }),
    (S.removeEvent = function (e, t, n) {
      e.removeEventListener && e.removeEventListener(t, n);
    }),
    (S.Event = function (e, t) {
      if (!(this instanceof S.Event)) return new S.Event(e, t);
      e && e.type
        ? ((this.originalEvent = e),
          (this.type = e.type),
          (this.isDefaultPrevented =
            e.defaultPrevented || (void 0 === e.defaultPrevented && !1 === e.returnValue)
              ? Ce
              : Ee),
          (this.target = e.target && 3 === e.target.nodeType ? e.target.parentNode : e.target),
          (this.currentTarget = e.currentTarget),
          (this.relatedTarget = e.relatedTarget))
        : (this.type = e),
        t && S.extend(this, t),
        (this.timeStamp = (e && e.timeStamp) || Date.now()),
        (this[S.expando] = !0);
    }),
    (S.Event.prototype = {
      constructor: S.Event,
      isDefaultPrevented: Ee,
      isPropagationStopped: Ee,
      isImmediatePropagationStopped: Ee,
      isSimulated: !1,
      preventDefault: function () {
        var e = this.originalEvent;
        (this.isDefaultPrevented = Ce), e && !this.isSimulated && e.preventDefault();
      },
      stopPropagation: function () {
        var e = this.originalEvent;
        (this.isPropagationStopped = Ce), e && !this.isSimulated && e.stopPropagation();
      },
      stopImmediatePropagation: function () {
        var e = this.originalEvent;
        (this.isImmediatePropagationStopped = Ce),
          e && !this.isSimulated && e.stopImmediatePropagation(),
          this.stopPropagation();
      },
    }),
    S.each(
      {
        altKey: !0,
        bubbles: !0,
        cancelable: !0,
        changedTouches: !0,
        ctrlKey: !0,
        detail: !0,
        eventPhase: !0,
        metaKey: !0,
        pageX: !0,
        pageY: !0,
        shiftKey: !0,
        view: !0,
        char: !0,
        code: !0,
        charCode: !0,
        key: !0,
        keyCode: !0,
        button: !0,
        buttons: !0,
        clientX: !0,
        clientY: !0,
        offsetX: !0,
        offsetY: !0,
        pointerId: !0,
        pointerType: !0,
        screenX: !0,
        screenY: !0,
        targetTouches: !0,
        toElement: !0,
        touches: !0,
        which: function (e) {
          var t = e.button;
          return null == e.which && be.test(e.type)
            ? null != e.charCode
              ? e.charCode
              : e.keyCode
            : !e.which && void 0 !== t && we.test(e.type)
              ? 1 & t
                ? 1
                : 2 & t
                  ? 3
                  : 4 & t
                    ? 2
                    : 0
              : e.which;
        },
      },
      S.event.addProp,
    ),
    S.each({ focus: "focusin", blur: "focusout" }, function (e, t) {
      S.event.special[e] = {
        setup: function () {
          return Ae(this, e, Se), !1;
        },
        trigger: function () {
          return Ae(this, e), !0;
        },
        delegateType: t,
      };
    }),
    S.each(
      {
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout",
      },
      function (e, i) {
        S.event.special[e] = {
          delegateType: i,
          bindType: i,
          handle: function (e) {
            var t,
              n = e.relatedTarget,
              r = e.handleObj;
            return (
              (n && (n === this || S.contains(this, n))) ||
                ((e.type = r.origType), (t = r.handler.apply(this, arguments)), (e.type = i)),
              t
            );
          },
        };
      },
    ),
    S.fn.extend({
      on: function (e, t, n, r) {
        return ke(this, e, t, n, r);
      },
      one: function (e, t, n, r) {
        return ke(this, e, t, n, r, 1);
      },
      off: function (e, t, n) {
        var r, i;
        if (e && e.preventDefault && e.handleObj)
          return (
            (r = e.handleObj),
            S(e.delegateTarget).off(
              r.namespace ? r.origType + "." + r.namespace : r.origType,
              r.selector,
              r.handler,
            ),
            this
          );
        if ("object" == typeof e) {
          for (i in e) this.off(i, t, e[i]);
          return this;
        }
        return (
          (!1 !== t && "function" != typeof t) || ((n = t), (t = void 0)),
          !1 === n && (n = Ee),
          this.each(function () {
            S.event.remove(this, e, n, t);
          })
        );
      },
    });
  var Ne = /<script|<style|<link/i,
    De = /checked\s*(?:[^=]|=\s*.checked.)/i,
    je = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
  function qe(e, t) {
    return (
      (A(e, "table") &&
        A(11 !== t.nodeType ? t : t.firstChild, "tr") &&
        S(e).children("tbody")[0]) ||
      e
    );
  }
  function Le(e) {
    return (e.type = (null !== e.getAttribute("type")) + "/" + e.type), e;
  }
  function He(e) {
    return (
      "true/" === (e.type || "").slice(0, 5)
        ? (e.type = e.type.slice(5))
        : e.removeAttribute("type"),
      e
    );
  }
  function Oe(e, t) {
    var n, r, i, o, a, s;
    if (1 === t.nodeType) {
      if (Y.hasData(e) && (s = Y.get(e).events))
        for (i in (Y.remove(t, "handle events"), s))
          for (n = 0, r = s[i].length; n < r; n++) S.event.add(t, i, s[i][n]);
      Q.hasData(e) && ((o = Q.access(e)), (a = S.extend({}, o)), Q.set(t, a));
    }
  }
  function Pe(n, r, i, o) {
    r = g(r);
    var e,
      t,
      a,
      s,
      u,
      l,
      c = 0,
      f = n.length,
      p = f - 1,
      d = r[0],
      h = m(d);
    if (h || (1 < f && "string" == typeof d && !y.checkClone && De.test(d)))
      return n.each(function (e) {
        var t = n.eq(e);
        h && (r[0] = d.call(this, e, t.html())), Pe(t, r, i, o);
      });
    if (
      f &&
      ((t = (e = xe(r, n[0].ownerDocument, !1, n, o)).firstChild),
      1 === e.childNodes.length && (e = t),
      t || o)
    ) {
      for (s = (a = S.map(ve(e, "script"), Le)).length; c < f; c++)
        (u = e),
          c !== p && ((u = S.clone(u, !0, !0)), s && S.merge(a, ve(u, "script"))),
          i.call(n[c], u, c);
      if (s)
        for (l = a[a.length - 1].ownerDocument, S.map(a, He), c = 0; c < s; c++)
          (u = a[c]),
            he.test(u.type || "") &&
              !Y.access(u, "globalEval") &&
              S.contains(l, u) &&
              (u.src && "module" !== (u.type || "").toLowerCase()
                ? S._evalUrl &&
                  !u.noModule &&
                  S._evalUrl(u.src, { nonce: u.nonce || u.getAttribute("nonce") }, l)
                : b(u.textContent.replace(je, ""), u, l));
    }
    return n;
  }
  function Re(e, t, n) {
    for (var r, i = t ? S.filter(t, e) : e, o = 0; null != (r = i[o]); o++)
      n || 1 !== r.nodeType || S.cleanData(ve(r)),
        r.parentNode && (n && ie(r) && ye(ve(r, "script")), r.parentNode.removeChild(r));
    return e;
  }
  S.extend({
    htmlPrefilter: function (e) {
      return e;
    },
    clone: function (e, t, n) {
      var r,
        i,
        o,
        a,
        s,
        u,
        l,
        c = e.cloneNode(!0),
        f = ie(e);
      if (!(y.noCloneChecked || (1 !== e.nodeType && 11 !== e.nodeType) || S.isXMLDoc(e)))
        for (a = ve(c), r = 0, i = (o = ve(e)).length; r < i; r++)
          (s = o[r]),
            (u = a[r]),
            void 0,
            "input" === (l = u.nodeName.toLowerCase()) && pe.test(s.type)
              ? (u.checked = s.checked)
              : ("input" !== l && "textarea" !== l) || (u.defaultValue = s.defaultValue);
      if (t)
        if (n) for (o = o || ve(e), a = a || ve(c), r = 0, i = o.length; r < i; r++) Oe(o[r], a[r]);
        else Oe(e, c);
      return 0 < (a = ve(c, "script")).length && ye(a, !f && ve(e, "script")), c;
    },
    cleanData: function (e) {
      for (var t, n, r, i = S.event.special, o = 0; void 0 !== (n = e[o]); o++)
        if (V(n)) {
          if ((t = n[Y.expando])) {
            if (t.events)
              for (r in t.events) i[r] ? S.event.remove(n, r) : S.removeEvent(n, r, t.handle);
            n[Y.expando] = void 0;
          }
          n[Q.expando] && (n[Q.expando] = void 0);
        }
    },
  }),
    S.fn.extend({
      detach: function (e) {
        return Re(this, e, !0);
      },
      remove: function (e) {
        return Re(this, e);
      },
      text: function (e) {
        return $(
          this,
          function (e) {
            return void 0 === e
              ? S.text(this)
              : this.empty().each(function () {
                  (1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType) ||
                    (this.textContent = e);
                });
          },
          null,
          e,
          arguments.length,
        );
      },
      append: function () {
        return Pe(this, arguments, function (e) {
          (1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType) ||
            qe(this, e).appendChild(e);
        });
      },
      prepend: function () {
        return Pe(this, arguments, function (e) {
          if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
            var t = qe(this, e);
            t.insertBefore(e, t.firstChild);
          }
        });
      },
      before: function () {
        return Pe(this, arguments, function (e) {
          this.parentNode && this.parentNode.insertBefore(e, this);
        });
      },
      after: function () {
        return Pe(this, arguments, function (e) {
          this.parentNode && this.parentNode.insertBefore(e, this.nextSibling);
        });
      },
      empty: function () {
        for (var e, t = 0; null != (e = this[t]); t++)
          1 === e.nodeType && (S.cleanData(ve(e, !1)), (e.textContent = ""));
        return this;
      },
      clone: function (e, t) {
        return (
          (e = null != e && e),
          (t = null == t ? e : t),
          this.map(function () {
            return S.clone(this, e, t);
          })
        );
      },
      html: function (e) {
        return $(
          this,
          function (e) {
            var t = this[0] || {},
              n = 0,
              r = this.length;
            if (void 0 === e && 1 === t.nodeType) return t.innerHTML;
            if (
              "string" == typeof e &&
              !Ne.test(e) &&
              !ge[(de.exec(e) || ["", ""])[1].toLowerCase()]
            ) {
              e = S.htmlPrefilter(e);
              try {
                for (; n < r; n++)
                  1 === (t = this[n] || {}).nodeType && (S.cleanData(ve(t, !1)), (t.innerHTML = e));
                t = 0;
              } catch (e) {}
            }
            t && this.empty().append(e);
          },
          null,
          e,
          arguments.length,
        );
      },
      replaceWith: function () {
        var n = [];
        return Pe(
          this,
          arguments,
          function (e) {
            var t = this.parentNode;
            S.inArray(this, n) < 0 && (S.cleanData(ve(this)), t && t.replaceChild(e, this));
          },
          n,
        );
      },
    }),
    S.each(
      {
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith",
      },
      function (e, a) {
        S.fn[e] = function (e) {
          for (var t, n = [], r = S(e), i = r.length - 1, o = 0; o <= i; o++)
            (t = o === i ? this : this.clone(!0)), S(r[o])[a](t), u.apply(n, t.get());
          return this.pushStack(n);
        };
      },
    );
  var Me = new RegExp("^(" + ee + ")(?!px)[a-z%]+$", "i"),
    Ie = function (e) {
      var t = e.ownerDocument.defaultView;
      return (t && t.opener) || (t = C), t.getComputedStyle(e);
    },
    We = function (e, t, n) {
      var r,
        i,
        o = {};
      for (i in t) (o[i] = e.style[i]), (e.style[i] = t[i]);
      for (i in ((r = n.call(e)), t)) e.style[i] = o[i];
      return r;
    },
    Fe = new RegExp(ne.join("|"), "i");
  function Be(e, t, n) {
    var r,
      i,
      o,
      a,
      s = e.style;
    return (
      (n = n || Ie(e)) &&
        ("" !== (a = n.getPropertyValue(t) || n[t]) || ie(e) || (a = S.style(e, t)),
        !y.pixelBoxStyles() &&
          Me.test(a) &&
          Fe.test(t) &&
          ((r = s.width),
          (i = s.minWidth),
          (o = s.maxWidth),
          (s.minWidth = s.maxWidth = s.width = a),
          (a = n.width),
          (s.width = r),
          (s.minWidth = i),
          (s.maxWidth = o))),
      void 0 !== a ? a + "" : a
    );
  }
  function $e(e, t) {
    return {
      get: function () {
        if (!e()) return (this.get = t).apply(this, arguments);
        delete this.get;
      },
    };
  }
  !(function () {
    function e() {
      if (l) {
        (u.style.cssText =
          "position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0"),
          (l.style.cssText =
            "position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%"),
          re.appendChild(u).appendChild(l);
        var e = C.getComputedStyle(l);
        (n = "1%" !== e.top),
          (s = 12 === t(e.marginLeft)),
          (l.style.right = "60%"),
          (o = 36 === t(e.right)),
          (r = 36 === t(e.width)),
          (l.style.position = "absolute"),
          (i = 12 === t(l.offsetWidth / 3)),
          re.removeChild(u),
          (l = null);
      }
    }
    function t(e) {
      return Math.round(parseFloat(e));
    }
    var n,
      r,
      i,
      o,
      a,
      s,
      u = E.createElement("div"),
      l = E.createElement("div");
    l.style &&
      ((l.style.backgroundClip = "content-box"),
      (l.cloneNode(!0).style.backgroundClip = ""),
      (y.clearCloneStyle = "content-box" === l.style.backgroundClip),
      S.extend(y, {
        boxSizingReliable: function () {
          return e(), r;
        },
        pixelBoxStyles: function () {
          return e(), o;
        },
        pixelPosition: function () {
          return e(), n;
        },
        reliableMarginLeft: function () {
          return e(), s;
        },
        scrollboxSize: function () {
          return e(), i;
        },
        reliableTrDimensions: function () {
          var e, t, n, r;
          return (
            null == a &&
              ((e = E.createElement("table")),
              (t = E.createElement("tr")),
              (n = E.createElement("div")),
              (e.style.cssText = "position:absolute;left:-11111px"),
              (t.style.height = "1px"),
              (n.style.height = "9px"),
              re.appendChild(e).appendChild(t).appendChild(n),
              (r = C.getComputedStyle(t)),
              (a = 3 < parseInt(r.height)),
              re.removeChild(e)),
            a
          );
        },
      }));
  })();
  var _e = ["Webkit", "Moz", "ms"],
    ze = E.createElement("div").style,
    Ue = {};
  function Xe(e) {
    var t = S.cssProps[e] || Ue[e];
    return (
      t ||
      (e in ze
        ? e
        : (Ue[e] =
            (function (e) {
              var t = e[0].toUpperCase() + e.slice(1),
                n = _e.length;
              while (n--) if ((e = _e[n] + t) in ze) return e;
            })(e) || e))
    );
  }
  var Ve = /^(none|table(?!-c[ea]).+)/,
    Ge = /^--/,
    Ye = { position: "absolute", visibility: "hidden", display: "block" },
    Qe = { letterSpacing: "0", fontWeight: "400" };
  function Je(e, t, n) {
    var r = te.exec(t);
    return r ? Math.max(0, r[2] - (n || 0)) + (r[3] || "px") : t;
  }
  function Ke(e, t, n, r, i, o) {
    var a = "width" === t ? 1 : 0,
      s = 0,
      u = 0;
    if (n === (r ? "border" : "content")) return 0;
    for (; a < 4; a += 2)
      "margin" === n && (u += S.css(e, n + ne[a], !0, i)),
        r
          ? ("content" === n && (u -= S.css(e, "padding" + ne[a], !0, i)),
            "margin" !== n && (u -= S.css(e, "border" + ne[a] + "Width", !0, i)))
          : ((u += S.css(e, "padding" + ne[a], !0, i)),
            "padding" !== n
              ? (u += S.css(e, "border" + ne[a] + "Width", !0, i))
              : (s += S.css(e, "border" + ne[a] + "Width", !0, i)));
    return (
      !r &&
        0 <= o &&
        (u +=
          Math.max(0, Math.ceil(e["offset" + t[0].toUpperCase() + t.slice(1)] - o - u - s - 0.5)) ||
          0),
      u
    );
  }
  function Ze(e, t, n) {
    var r = Ie(e),
      i = (!y.boxSizingReliable() || n) && "border-box" === S.css(e, "boxSizing", !1, r),
      o = i,
      a = Be(e, t, r),
      s = "offset" + t[0].toUpperCase() + t.slice(1);
    if (Me.test(a)) {
      if (!n) return a;
      a = "auto";
    }
    return (
      ((!y.boxSizingReliable() && i) ||
        (!y.reliableTrDimensions() && A(e, "tr")) ||
        "auto" === a ||
        (!parseFloat(a) && "inline" === S.css(e, "display", !1, r))) &&
        e.getClientRects().length &&
        ((i = "border-box" === S.css(e, "boxSizing", !1, r)), (o = s in e) && (a = e[s])),
      (a = parseFloat(a) || 0) + Ke(e, t, n || (i ? "border" : "content"), o, r, a) + "px"
    );
  }
  function et(e, t, n, r, i) {
    return new et.prototype.init(e, t, n, r, i);
  }
  S.extend({
    cssHooks: {
      opacity: {
        get: function (e, t) {
          if (t) {
            var n = Be(e, "opacity");
            return "" === n ? "1" : n;
          }
        },
      },
    },
    cssNumber: {
      animationIterationCount: !0,
      columnCount: !0,
      fillOpacity: !0,
      flexGrow: !0,
      flexShrink: !0,
      fontWeight: !0,
      gridArea: !0,
      gridColumn: !0,
      gridColumnEnd: !0,
      gridColumnStart: !0,
      gridRow: !0,
      gridRowEnd: !0,
      gridRowStart: !0,
      lineHeight: !0,
      opacity: !0,
      order: !0,
      orphans: !0,
      widows: !0,
      zIndex: !0,
      zoom: !0,
    },
    cssProps: {},
    style: function (e, t, n, r) {
      if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
        var i,
          o,
          a,
          s = X(t),
          u = Ge.test(t),
          l = e.style;
        if ((u || (t = Xe(s)), (a = S.cssHooks[t] || S.cssHooks[s]), void 0 === n))
          return a && "get" in a && void 0 !== (i = a.get(e, !1, r)) ? i : l[t];
        "string" === (o = typeof n) &&
          (i = te.exec(n)) &&
          i[1] &&
          ((n = se(e, t, i)), (o = "number")),
          null != n &&
            n == n &&
            ("number" !== o || u || (n += (i && i[3]) || (S.cssNumber[s] ? "" : "px")),
            y.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (l[t] = "inherit"),
            (a && "set" in a && void 0 === (n = a.set(e, n, r))) ||
              (u ? l.setProperty(t, n) : (l[t] = n)));
      }
    },
    css: function (e, t, n, r) {
      var i,
        o,
        a,
        s = X(t);
      return (
        Ge.test(t) || (t = Xe(s)),
        (a = S.cssHooks[t] || S.cssHooks[s]) && "get" in a && (i = a.get(e, !0, n)),
        void 0 === i && (i = Be(e, t, r)),
        "normal" === i && t in Qe && (i = Qe[t]),
        "" === n || n ? ((o = parseFloat(i)), !0 === n || isFinite(o) ? o || 0 : i) : i
      );
    },
  }),
    S.each(["height", "width"], function (e, u) {
      S.cssHooks[u] = {
        get: function (e, t, n) {
          if (t)
            return !Ve.test(S.css(e, "display")) ||
              (e.getClientRects().length && e.getBoundingClientRect().width)
              ? Ze(e, u, n)
              : We(e, Ye, function () {
                  return Ze(e, u, n);
                });
        },
        set: function (e, t, n) {
          var r,
            i = Ie(e),
            o = !y.scrollboxSize() && "absolute" === i.position,
            a = (o || n) && "border-box" === S.css(e, "boxSizing", !1, i),
            s = n ? Ke(e, u, n, a, i) : 0;
          return (
            a &&
              o &&
              (s -= Math.ceil(
                e["offset" + u[0].toUpperCase() + u.slice(1)] -
                  parseFloat(i[u]) -
                  Ke(e, u, "border", !1, i) -
                  0.5,
              )),
            s &&
              (r = te.exec(t)) &&
              "px" !== (r[3] || "px") &&
              ((e.style[u] = t), (t = S.css(e, u))),
            Je(0, t, s)
          );
        },
      };
    }),
    (S.cssHooks.marginLeft = $e(y.reliableMarginLeft, function (e, t) {
      if (t)
        return (
          (parseFloat(Be(e, "marginLeft")) ||
            e.getBoundingClientRect().left -
              We(e, { marginLeft: 0 }, function () {
                return e.getBoundingClientRect().left;
              })) + "px"
        );
    })),
    S.each({ margin: "", padding: "", border: "Width" }, function (i, o) {
      (S.cssHooks[i + o] = {
        expand: function (e) {
          for (var t = 0, n = {}, r = "string" == typeof e ? e.split(" ") : [e]; t < 4; t++)
            n[i + ne[t] + o] = r[t] || r[t - 2] || r[0];
          return n;
        },
      }),
        "margin" !== i && (S.cssHooks[i + o].set = Je);
    }),
    S.fn.extend({
      css: function (e, t) {
        return $(
          this,
          function (e, t, n) {
            var r,
              i,
              o = {},
              a = 0;
            if (Array.isArray(t)) {
              for (r = Ie(e), i = t.length; a < i; a++) o[t[a]] = S.css(e, t[a], !1, r);
              return o;
            }
            return void 0 !== n ? S.style(e, t, n) : S.css(e, t);
          },
          e,
          t,
          1 < arguments.length,
        );
      },
    }),
    (((S.Tween = et).prototype = {
      constructor: et,
      init: function (e, t, n, r, i, o) {
        (this.elem = e),
          (this.prop = n),
          (this.easing = i || S.easing._default),
          (this.options = t),
          (this.start = this.now = this.cur()),
          (this.end = r),
          (this.unit = o || (S.cssNumber[n] ? "" : "px"));
      },
      cur: function () {
        var e = et.propHooks[this.prop];
        return e && e.get ? e.get(this) : et.propHooks._default.get(this);
      },
      run: function (e) {
        var t,
          n = et.propHooks[this.prop];
        return (
          this.options.duration
            ? (this.pos = t =
                S.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration))
            : (this.pos = t = e),
          (this.now = (this.end - this.start) * t + this.start),
          this.options.step && this.options.step.call(this.elem, this.now, this),
          n && n.set ? n.set(this) : et.propHooks._default.set(this),
          this
        );
      },
    }).init.prototype = et.prototype),
    ((et.propHooks = {
      _default: {
        get: function (e) {
          var t;
          return 1 !== e.elem.nodeType || (null != e.elem[e.prop] && null == e.elem.style[e.prop])
            ? e.elem[e.prop]
            : (t = S.css(e.elem, e.prop, "")) && "auto" !== t
              ? t
              : 0;
        },
        set: function (e) {
          S.fx.step[e.prop]
            ? S.fx.step[e.prop](e)
            : 1 !== e.elem.nodeType || (!S.cssHooks[e.prop] && null == e.elem.style[Xe(e.prop)])
              ? (e.elem[e.prop] = e.now)
              : S.style(e.elem, e.prop, e.now + e.unit);
        },
      },
    }).scrollTop = et.propHooks.scrollLeft =
      {
        set: function (e) {
          e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now);
        },
      }),
    (S.easing = {
      linear: function (e) {
        return e;
      },
      swing: function (e) {
        return 0.5 - Math.cos(e * Math.PI) / 2;
      },
      _default: "swing",
    }),
    (S.fx = et.prototype.init),
    (S.fx.step = {});
  var tt,
    nt,
    rt,
    it,
    ot = /^(?:toggle|show|hide)$/,
    at = /queueHooks$/;
  function st() {
    nt &&
      (!1 === E.hidden && C.requestAnimationFrame
        ? C.requestAnimationFrame(st)
        : C.setTimeout(st, S.fx.interval),
      S.fx.tick());
  }
  function ut() {
    return (
      C.setTimeout(function () {
        tt = void 0;
      }),
      (tt = Date.now())
    );
  }
  function lt(e, t) {
    var n,
      r = 0,
      i = { height: e };
    for (t = t ? 1 : 0; r < 4; r += 2 - t) i["margin" + (n = ne[r])] = i["padding" + n] = e;
    return t && (i.opacity = i.width = e), i;
  }
  function ct(e, t, n) {
    for (
      var r, i = (ft.tweeners[t] || []).concat(ft.tweeners["*"]), o = 0, a = i.length;
      o < a;
      o++
    )
      if ((r = i[o].call(n, t, e))) return r;
  }
  function ft(o, e, t) {
    var n,
      a,
      r = 0,
      i = ft.prefilters.length,
      s = S.Deferred().always(function () {
        delete u.elem;
      }),
      u = function () {
        if (a) return !1;
        for (
          var e = tt || ut(),
            t = Math.max(0, l.startTime + l.duration - e),
            n = 1 - (t / l.duration || 0),
            r = 0,
            i = l.tweens.length;
          r < i;
          r++
        )
          l.tweens[r].run(n);
        return (
          s.notifyWith(o, [l, n, t]),
          n < 1 && i ? t : (i || s.notifyWith(o, [l, 1, 0]), s.resolveWith(o, [l]), !1)
        );
      },
      l = s.promise({
        elem: o,
        props: S.extend({}, e),
        opts: S.extend(!0, { specialEasing: {}, easing: S.easing._default }, t),
        originalProperties: e,
        originalOptions: t,
        startTime: tt || ut(),
        duration: t.duration,
        tweens: [],
        createTween: function (e, t) {
          var n = S.Tween(o, l.opts, e, t, l.opts.specialEasing[e] || l.opts.easing);
          return l.tweens.push(n), n;
        },
        stop: function (e) {
          var t = 0,
            n = e ? l.tweens.length : 0;
          if (a) return this;
          for (a = !0; t < n; t++) l.tweens[t].run(1);
          return (
            e ? (s.notifyWith(o, [l, 1, 0]), s.resolveWith(o, [l, e])) : s.rejectWith(o, [l, e]),
            this
          );
        },
      }),
      c = l.props;
    for (
      !(function (e, t) {
        var n, r, i, o, a;
        for (n in e)
          if (
            ((i = t[(r = X(n))]),
            (o = e[n]),
            Array.isArray(o) && ((i = o[1]), (o = e[n] = o[0])),
            n !== r && ((e[r] = o), delete e[n]),
            (a = S.cssHooks[r]) && ("expand" in a))
          )
            for (n in ((o = a.expand(o)), delete e[r], o)) (n in e) || ((e[n] = o[n]), (t[n] = i));
          else t[r] = i;
      })(c, l.opts.specialEasing);
      r < i;
      r++
    )
      if ((n = ft.prefilters[r].call(l, o, c, l.opts)))
        return m(n.stop) && (S._queueHooks(l.elem, l.opts.queue).stop = n.stop.bind(n)), n;
    return (
      S.map(c, ct, l),
      m(l.opts.start) && l.opts.start.call(o, l),
      l
        .progress(l.opts.progress)
        .done(l.opts.done, l.opts.complete)
        .fail(l.opts.fail)
        .always(l.opts.always),
      S.fx.timer(S.extend(u, { elem: o, anim: l, queue: l.opts.queue })),
      l
    );
  }
  (S.Animation = S.extend(ft, {
    tweeners: {
      "*": [
        function (e, t) {
          var n = this.createTween(e, t);
          return se(n.elem, e, te.exec(t), n), n;
        },
      ],
    },
    tweener: function (e, t) {
      m(e) ? ((t = e), (e = ["*"])) : (e = e.match(P));
      for (var n, r = 0, i = e.length; r < i; r++)
        (n = e[r]), (ft.tweeners[n] = ft.tweeners[n] || []), ft.tweeners[n].unshift(t);
    },
    prefilters: [
      function (e, t, n) {
        var r,
          i,
          o,
          a,
          s,
          u,
          l,
          c,
          f = "width" in t || "height" in t,
          p = this,
          d = {},
          h = e.style,
          g = e.nodeType && ae(e),
          v = Y.get(e, "fxshow");
        for (r in (n.queue ||
          (null == (a = S._queueHooks(e, "fx")).unqueued &&
            ((a.unqueued = 0),
            (s = a.empty.fire),
            (a.empty.fire = function () {
              a.unqueued || s();
            })),
          a.unqueued++,
          p.always(function () {
            p.always(function () {
              a.unqueued--, S.queue(e, "fx").length || a.empty.fire();
            });
          })),
        t))
          if (((i = t[r]), ot.test(i))) {
            if ((delete t[r], (o = o || "toggle" === i), i === (g ? "hide" : "show"))) {
              if ("show" !== i || !v || void 0 === v[r]) continue;
              g = !0;
            }
            d[r] = (v && v[r]) || S.style(e, r);
          }
        if ((u = !S.isEmptyObject(t)) || !S.isEmptyObject(d))
          for (r in (f &&
            1 === e.nodeType &&
            ((n.overflow = [h.overflow, h.overflowX, h.overflowY]),
            null == (l = v && v.display) && (l = Y.get(e, "display")),
            "none" === (c = S.css(e, "display")) &&
              (l
                ? (c = l)
                : (le([e], !0), (l = e.style.display || l), (c = S.css(e, "display")), le([e]))),
            ("inline" === c || ("inline-block" === c && null != l)) &&
              "none" === S.css(e, "float") &&
              (u ||
                (p.done(function () {
                  h.display = l;
                }),
                null == l && ((c = h.display), (l = "none" === c ? "" : c))),
              (h.display = "inline-block"))),
          n.overflow &&
            ((h.overflow = "hidden"),
            p.always(function () {
              (h.overflow = n.overflow[0]),
                (h.overflowX = n.overflow[1]),
                (h.overflowY = n.overflow[2]);
            })),
          (u = !1),
          d))
            u ||
              (v ? "hidden" in v && (g = v.hidden) : (v = Y.access(e, "fxshow", { display: l })),
              o && (v.hidden = !g),
              g && le([e], !0),
              p.done(function () {
                for (r in (g || le([e]), Y.remove(e, "fxshow"), d)) S.style(e, r, d[r]);
              })),
              (u = ct(g ? v[r] : 0, r, p)),
              r in v || ((v[r] = u.start), g && ((u.end = u.start), (u.start = 0)));
      },
    ],
    prefilter: function (e, t) {
      t ? ft.prefilters.unshift(e) : ft.prefilters.push(e);
    },
  })),
    (S.speed = function (e, t, n) {
      var r =
        e && "object" == typeof e
          ? S.extend({}, e)
          : {
              complete: n || (!n && t) || (m(e) && e),
              duration: e,
              easing: (n && t) || (t && !m(t) && t),
            };
      return (
        S.fx.off
          ? (r.duration = 0)
          : "number" != typeof r.duration &&
            (r.duration in S.fx.speeds
              ? (r.duration = S.fx.speeds[r.duration])
              : (r.duration = S.fx.speeds._default)),
        (null != r.queue && !0 !== r.queue) || (r.queue = "fx"),
        (r.old = r.complete),
        (r.complete = function () {
          m(r.old) && r.old.call(this), r.queue && S.dequeue(this, r.queue);
        }),
        r
      );
    }),
    S.fn.extend({
      fadeTo: function (e, t, n, r) {
        return this.filter(ae).css("opacity", 0).show().end().animate({ opacity: t }, e, n, r);
      },
      animate: function (t, e, n, r) {
        var i = S.isEmptyObject(t),
          o = S.speed(e, n, r),
          a = function () {
            var e = ft(this, S.extend({}, t), o);
            (i || Y.get(this, "finish")) && e.stop(!0);
          };
        return (a.finish = a), i || !1 === o.queue ? this.each(a) : this.queue(o.queue, a);
      },
      stop: function (i, e, o) {
        var a = function (e) {
          var t = e.stop;
          delete e.stop, t(o);
        };
        return (
          "string" != typeof i && ((o = e), (e = i), (i = void 0)),
          e && this.queue(i || "fx", []),
          this.each(function () {
            var e = !0,
              t = null != i && i + "queueHooks",
              n = S.timers,
              r = Y.get(this);
            if (t) r[t] && r[t].stop && a(r[t]);
            else for (t in r) r[t] && r[t].stop && at.test(t) && a(r[t]);
            for (t = n.length; t--; )
              n[t].elem !== this ||
                (null != i && n[t].queue !== i) ||
                (n[t].anim.stop(o), (e = !1), n.splice(t, 1));
            (!e && o) || S.dequeue(this, i);
          })
        );
      },
      finish: function (a) {
        return (
          !1 !== a && (a = a || "fx"),
          this.each(function () {
            var e,
              t = Y.get(this),
              n = t[a + "queue"],
              r = t[a + "queueHooks"],
              i = S.timers,
              o = n ? n.length : 0;
            for (
              t.finish = !0,
                S.queue(this, a, []),
                r && r.stop && r.stop.call(this, !0),
                e = i.length;
              e--;

            )
              i[e].elem === this && i[e].queue === a && (i[e].anim.stop(!0), i.splice(e, 1));
            for (e = 0; e < o; e++) n[e] && n[e].finish && n[e].finish.call(this);
            delete t.finish;
          })
        );
      },
    }),
    S.each(["toggle", "show", "hide"], function (e, r) {
      var i = S.fn[r];
      S.fn[r] = function (e, t, n) {
        return null == e || "boolean" == typeof e
          ? i.apply(this, arguments)
          : this.animate(lt(r, !0), e, t, n);
      };
    }),
    S.each(
      {
        slideDown: lt("show"),
        slideUp: lt("hide"),
        slideToggle: lt("toggle"),
        fadeIn: { opacity: "show" },
        fadeOut: { opacity: "hide" },
        fadeToggle: { opacity: "toggle" },
      },
      function (e, r) {
        S.fn[e] = function (e, t, n) {
          return this.animate(r, e, t, n);
        };
      },
    ),
    (S.timers = []),
    (S.fx.tick = function () {
      var e,
        t = 0,
        n = S.timers;
      for (tt = Date.now(); t < n.length; t++) (e = n[t])() || n[t] !== e || n.splice(t--, 1);
      n.length || S.fx.stop(), (tt = void 0);
    }),
    (S.fx.timer = function (e) {
      S.timers.push(e), S.fx.start();
    }),
    (S.fx.interval = 13),
    (S.fx.start = function () {
      nt || ((nt = !0), st());
    }),
    (S.fx.stop = function () {
      nt = null;
    }),
    (S.fx.speeds = { slow: 600, fast: 200, _default: 400 }),
    (S.fn.delay = function (r, e) {
      return (
        (r = (S.fx && S.fx.speeds[r]) || r),
        (e = e || "fx"),
        this.queue(e, function (e, t) {
          var n = C.setTimeout(e, r);
          t.stop = function () {
            C.clearTimeout(n);
          };
        })
      );
    }),
    (rt = E.createElement("input")),
    (it = E.createElement("select").appendChild(E.createElement("option"))),
    (rt.type = "checkbox"),
    (y.checkOn = "" !== rt.value),
    (y.optSelected = it.selected),
    ((rt = E.createElement("input")).value = "t"),
    (rt.type = "radio"),
    (y.radioValue = "t" === rt.value);
  var pt,
    dt = S.expr.attrHandle;
  S.fn.extend({
    attr: function (e, t) {
      return $(this, S.attr, e, t, 1 < arguments.length);
    },
    removeAttr: function (e) {
      return this.each(function () {
        S.removeAttr(this, e);
      });
    },
  }),
    S.extend({
      attr: function (e, t, n) {
        var r,
          i,
          o = e.nodeType;
        if (3 !== o && 8 !== o && 2 !== o)
          return "undefined" == typeof e.getAttribute
            ? S.prop(e, t, n)
            : ((1 === o && S.isXMLDoc(e)) ||
                (i = S.attrHooks[t.toLowerCase()] || (S.expr.match.bool.test(t) ? pt : void 0)),
              void 0 !== n
                ? null === n
                  ? void S.removeAttr(e, t)
                  : i && "set" in i && void 0 !== (r = i.set(e, n, t))
                    ? r
                    : (e.setAttribute(t, n + ""), n)
                : i && "get" in i && null !== (r = i.get(e, t))
                  ? r
                  : null == (r = S.find.attr(e, t))
                    ? void 0
                    : r);
      },
      attrHooks: {
        type: {
          set: function (e, t) {
            if (!y.radioValue && "radio" === t && A(e, "input")) {
              var n = e.value;
              return e.setAttribute("type", t), n && (e.value = n), t;
            }
          },
        },
      },
      removeAttr: function (e, t) {
        var n,
          r = 0,
          i = t && t.match(P);
        if (i && 1 === e.nodeType) while ((n = i[r++])) e.removeAttribute(n);
      },
    }),
    (pt = {
      set: function (e, t, n) {
        return !1 === t ? S.removeAttr(e, n) : e.setAttribute(n, n), n;
      },
    }),
    S.each(S.expr.match.bool.source.match(/\w+/g), function (e, t) {
      var a = dt[t] || S.find.attr;
      dt[t] = function (e, t, n) {
        var r,
          i,
          o = t.toLowerCase();
        return n || ((i = dt[o]), (dt[o] = r), (r = null != a(e, t, n) ? o : null), (dt[o] = i)), r;
      };
    });
  var ht = /^(?:input|select|textarea|button)$/i,
    gt = /^(?:a|area)$/i;
  function vt(e) {
    return (e.match(P) || []).join(" ");
  }
  function yt(e) {
    return (e.getAttribute && e.getAttribute("class")) || "";
  }
  function mt(e) {
    return Array.isArray(e) ? e : ("string" == typeof e && e.match(P)) || [];
  }
  S.fn.extend({
    prop: function (e, t) {
      return $(this, S.prop, e, t, 1 < arguments.length);
    },
    removeProp: function (e) {
      return this.each(function () {
        delete this[S.propFix[e] || e];
      });
    },
  }),
    S.extend({
      prop: function (e, t, n) {
        var r,
          i,
          o = e.nodeType;
        if (3 !== o && 8 !== o && 2 !== o)
          return (
            (1 === o && S.isXMLDoc(e)) || ((t = S.propFix[t] || t), (i = S.propHooks[t])),
            void 0 !== n
              ? i && "set" in i && void 0 !== (r = i.set(e, n, t))
                ? r
                : (e[t] = n)
              : i && "get" in i && null !== (r = i.get(e, t))
                ? r
                : e[t]
          );
      },
      propHooks: {
        tabIndex: {
          get: function (e) {
            var t = S.find.attr(e, "tabindex");
            return t
              ? parseInt(t, 10)
              : ht.test(e.nodeName) || (gt.test(e.nodeName) && e.href)
                ? 0
                : -1;
          },
        },
      },
      propFix: { for: "htmlFor", class: "className" },
    }),
    y.optSelected ||
      (S.propHooks.selected = {
        get: function (e) {
          var t = e.parentNode;
          return t && t.parentNode && t.parentNode.selectedIndex, null;
        },
        set: function (e) {
          var t = e.parentNode;
          t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex);
        },
      }),
    S.each(
      [
        "tabIndex",
        "readOnly",
        "maxLength",
        "cellSpacing",
        "cellPadding",
        "rowSpan",
        "colSpan",
        "useMap",
        "frameBorder",
        "contentEditable",
      ],
      function () {
        S.propFix[this.toLowerCase()] = this;
      },
    ),
    S.fn.extend({
      addClass: function (t) {
        var e,
          n,
          r,
          i,
          o,
          a,
          s,
          u = 0;
        if (m(t))
          return this.each(function (e) {
            S(this).addClass(t.call(this, e, yt(this)));
          });
        if ((e = mt(t)).length)
          while ((n = this[u++]))
            if (((i = yt(n)), (r = 1 === n.nodeType && " " + vt(i) + " "))) {
              a = 0;
              while ((o = e[a++])) r.indexOf(" " + o + " ") < 0 && (r += o + " ");
              i !== (s = vt(r)) && n.setAttribute("class", s);
            }
        return this;
      },
      removeClass: function (t) {
        var e,
          n,
          r,
          i,
          o,
          a,
          s,
          u = 0;
        if (m(t))
          return this.each(function (e) {
            S(this).removeClass(t.call(this, e, yt(this)));
          });
        if (!arguments.length) return this.attr("class", "");
        if ((e = mt(t)).length)
          while ((n = this[u++]))
            if (((i = yt(n)), (r = 1 === n.nodeType && " " + vt(i) + " "))) {
              a = 0;
              while ((o = e[a++]))
                while (-1 < r.indexOf(" " + o + " ")) r = r.replace(" " + o + " ", " ");
              i !== (s = vt(r)) && n.setAttribute("class", s);
            }
        return this;
      },
      toggleClass: function (i, t) {
        var o = typeof i,
          a = "string" === o || Array.isArray(i);
        return "boolean" == typeof t && a
          ? t
            ? this.addClass(i)
            : this.removeClass(i)
          : m(i)
            ? this.each(function (e) {
                S(this).toggleClass(i.call(this, e, yt(this), t), t);
              })
            : this.each(function () {
                var e, t, n, r;
                if (a) {
                  (t = 0), (n = S(this)), (r = mt(i));
                  while ((e = r[t++])) n.hasClass(e) ? n.removeClass(e) : n.addClass(e);
                } else
                  (void 0 !== i && "boolean" !== o) ||
                    ((e = yt(this)) && Y.set(this, "__className__", e),
                    this.setAttribute &&
                      this.setAttribute(
                        "class",
                        e || !1 === i ? "" : Y.get(this, "__className__") || "",
                      ));
              });
      },
      hasClass: function (e) {
        var t,
          n,
          r = 0;
        t = " " + e + " ";
        while ((n = this[r++]))
          if (1 === n.nodeType && -1 < (" " + vt(yt(n)) + " ").indexOf(t)) return !0;
        return !1;
      },
    });
  var xt = /\r/g;
  S.fn.extend({
    val: function (n) {
      var r,
        e,
        i,
        t = this[0];
      return arguments.length
        ? ((i = m(n)),
          this.each(function (e) {
            var t;
            1 === this.nodeType &&
              (null == (t = i ? n.call(this, e, S(this).val()) : n)
                ? (t = "")
                : "number" == typeof t
                  ? (t += "")
                  : Array.isArray(t) &&
                    (t = S.map(t, function (e) {
                      return null == e ? "" : e + "";
                    })),
              ((r = S.valHooks[this.type] || S.valHooks[this.nodeName.toLowerCase()]) &&
                "set" in r &&
                void 0 !== r.set(this, t, "value")) ||
                (this.value = t));
          }))
        : t
          ? (r = S.valHooks[t.type] || S.valHooks[t.nodeName.toLowerCase()]) &&
            "get" in r &&
            void 0 !== (e = r.get(t, "value"))
            ? e
            : "string" == typeof (e = t.value)
              ? e.replace(xt, "")
              : null == e
                ? ""
                : e
          : void 0;
    },
  }),
    S.extend({
      valHooks: {
        option: {
          get: function (e) {
            var t = S.find.attr(e, "value");
            return null != t ? t : vt(S.text(e));
          },
        },
        select: {
          get: function (e) {
            var t,
              n,
              r,
              i = e.options,
              o = e.selectedIndex,
              a = "select-one" === e.type,
              s = a ? null : [],
              u = a ? o + 1 : i.length;
            for (r = o < 0 ? u : a ? o : 0; r < u; r++)
              if (
                ((n = i[r]).selected || r === o) &&
                !n.disabled &&
                (!n.parentNode.disabled || !A(n.parentNode, "optgroup"))
              ) {
                if (((t = S(n).val()), a)) return t;
                s.push(t);
              }
            return s;
          },
          set: function (e, t) {
            var n,
              r,
              i = e.options,
              o = S.makeArray(t),
              a = i.length;
            while (a--)
              ((r = i[a]).selected = -1 < S.inArray(S.valHooks.option.get(r), o)) && (n = !0);
            return n || (e.selectedIndex = -1), o;
          },
        },
      },
    }),
    S.each(["radio", "checkbox"], function () {
      (S.valHooks[this] = {
        set: function (e, t) {
          if (Array.isArray(t)) return (e.checked = -1 < S.inArray(S(e).val(), t));
        },
      }),
        y.checkOn ||
          (S.valHooks[this].get = function (e) {
            return null === e.getAttribute("value") ? "on" : e.value;
          });
    }),
    (y.focusin = "onfocusin" in C);
  var bt = /^(?:focusinfocus|focusoutblur)$/,
    wt = function (e) {
      e.stopPropagation();
    };
  S.extend(S.event, {
    trigger: function (e, t, n, r) {
      var i,
        o,
        a,
        s,
        u,
        l,
        c,
        f,
        p = [n || E],
        d = v.call(e, "type") ? e.type : e,
        h = v.call(e, "namespace") ? e.namespace.split(".") : [];
      if (
        ((o = f = a = n = n || E),
        3 !== n.nodeType &&
          8 !== n.nodeType &&
          !bt.test(d + S.event.triggered) &&
          (-1 < d.indexOf(".") && ((d = (h = d.split(".")).shift()), h.sort()),
          (u = d.indexOf(":") < 0 && "on" + d),
          ((e = e[S.expando] ? e : new S.Event(d, "object" == typeof e && e)).isTrigger = r
            ? 2
            : 3),
          (e.namespace = h.join(".")),
          (e.rnamespace = e.namespace
            ? new RegExp("(^|\\.)" + h.join("\\.(?:.*\\.|)") + "(\\.|$)")
            : null),
          (e.result = void 0),
          e.target || (e.target = n),
          (t = null == t ? [e] : S.makeArray(t, [e])),
          (c = S.event.special[d] || {}),
          r || !c.trigger || !1 !== c.trigger.apply(n, t)))
      ) {
        if (!r && !c.noBubble && !x(n)) {
          for (s = c.delegateType || d, bt.test(s + d) || (o = o.parentNode); o; o = o.parentNode)
            p.push(o), (a = o);
          a === (n.ownerDocument || E) && p.push(a.defaultView || a.parentWindow || C);
        }
        i = 0;
        while ((o = p[i++]) && !e.isPropagationStopped())
          (f = o),
            (e.type = 1 < i ? s : c.bindType || d),
            (l = (Y.get(o, "events") || Object.create(null))[e.type] && Y.get(o, "handle")) &&
              l.apply(o, t),
            (l = u && o[u]) &&
              l.apply &&
              V(o) &&
              ((e.result = l.apply(o, t)), !1 === e.result && e.preventDefault());
        return (
          (e.type = d),
          r ||
            e.isDefaultPrevented() ||
            (c._default && !1 !== c._default.apply(p.pop(), t)) ||
            !V(n) ||
            (u &&
              m(n[d]) &&
              !x(n) &&
              ((a = n[u]) && (n[u] = null),
              (S.event.triggered = d),
              e.isPropagationStopped() && f.addEventListener(d, wt),
              n[d](),
              e.isPropagationStopped() && f.removeEventListener(d, wt),
              (S.event.triggered = void 0),
              a && (n[u] = a))),
          e.result
        );
      }
    },
    simulate: function (e, t, n) {
      var r = S.extend(new S.Event(), n, { type: e, isSimulated: !0 });
      S.event.trigger(r, null, t);
    },
  }),
    S.fn.extend({
      trigger: function (e, t) {
        return this.each(function () {
          S.event.trigger(e, t, this);
        });
      },
      triggerHandler: function (e, t) {
        var n = this[0];
        if (n) return S.event.trigger(e, t, n, !0);
      },
    }),
    y.focusin ||
      S.each({ focus: "focusin", blur: "focusout" }, function (n, r) {
        var i = function (e) {
          S.event.simulate(r, e.target, S.event.fix(e));
        };
        S.event.special[r] = {
          setup: function () {
            var e = this.ownerDocument || this.document || this,
              t = Y.access(e, r);
            t || e.addEventListener(n, i, !0), Y.access(e, r, (t || 0) + 1);
          },
          teardown: function () {
            var e = this.ownerDocument || this.document || this,
              t = Y.access(e, r) - 1;
            t ? Y.access(e, r, t) : (e.removeEventListener(n, i, !0), Y.remove(e, r));
          },
        };
      });
  var Tt = C.location,
    Ct = { guid: Date.now() },
    Et = /\?/;
  S.parseXML = function (e) {
    var t;
    if (!e || "string" != typeof e) return null;
    try {
      t = new C.DOMParser().parseFromString(e, "text/xml");
    } catch (e) {
      t = void 0;
    }
    return (t && !t.getElementsByTagName("parsererror").length) || S.error("Invalid XML: " + e), t;
  };
  var St = /\[\]$/,
    kt = /\r?\n/g,
    At = /^(?:submit|button|image|reset|file)$/i,
    Nt = /^(?:input|select|textarea|keygen)/i;
  function Dt(n, e, r, i) {
    var t;
    if (Array.isArray(e))
      S.each(e, function (e, t) {
        r || St.test(n)
          ? i(n, t)
          : Dt(n + "[" + ("object" == typeof t && null != t ? e : "") + "]", t, r, i);
      });
    else if (r || "object" !== w(e)) i(n, e);
    else for (t in e) Dt(n + "[" + t + "]", e[t], r, i);
  }
  (S.param = function (e, t) {
    var n,
      r = [],
      i = function (e, t) {
        var n = m(t) ? t() : t;
        r[r.length] = encodeURIComponent(e) + "=" + encodeURIComponent(null == n ? "" : n);
      };
    if (null == e) return "";
    if (Array.isArray(e) || (e.jquery && !S.isPlainObject(e)))
      S.each(e, function () {
        i(this.name, this.value);
      });
    else for (n in e) Dt(n, e[n], t, i);
    return r.join("&");
  }),
    S.fn.extend({
      serialize: function () {
        return S.param(this.serializeArray());
      },
      serializeArray: function () {
        return this.map(function () {
          var e = S.prop(this, "elements");
          return e ? S.makeArray(e) : this;
        })
          .filter(function () {
            var e = this.type;
            return (
              this.name &&
              !S(this).is(":disabled") &&
              Nt.test(this.nodeName) &&
              !At.test(e) &&
              (this.checked || !pe.test(e))
            );
          })
          .map(function (e, t) {
            var n = S(this).val();
            return null == n
              ? null
              : Array.isArray(n)
                ? S.map(n, function (e) {
                    return { name: t.name, value: e.replace(kt, "\r\n") };
                  })
                : { name: t.name, value: n.replace(kt, "\r\n") };
          })
          .get();
      },
    });
  var jt = /%20/g,
    qt = /#.*$/,
    Lt = /([?&])_=[^&]*/,
    Ht = /^(.*?):[ \t]*([^\r\n]*)$/gm,
    Ot = /^(?:GET|HEAD)$/,
    Pt = /^\/\//,
    Rt = {},
    Mt = {},
    It = "*/".concat("*"),
    Wt = E.createElement("a");
  function Ft(o) {
    return function (e, t) {
      "string" != typeof e && ((t = e), (e = "*"));
      var n,
        r = 0,
        i = e.toLowerCase().match(P) || [];
      if (m(t))
        while ((n = i[r++]))
          "+" === n[0]
            ? ((n = n.slice(1) || "*"), (o[n] = o[n] || []).unshift(t))
            : (o[n] = o[n] || []).push(t);
    };
  }
  function Bt(t, i, o, a) {
    var s = {},
      u = t === Mt;
    function l(e) {
      var r;
      return (
        (s[e] = !0),
        S.each(t[e] || [], function (e, t) {
          var n = t(i, o, a);
          return "string" != typeof n || u || s[n]
            ? u
              ? !(r = n)
              : void 0
            : (i.dataTypes.unshift(n), l(n), !1);
        }),
        r
      );
    }
    return l(i.dataTypes[0]) || (!s["*"] && l("*"));
  }
  function $t(e, t) {
    var n,
      r,
      i = S.ajaxSettings.flatOptions || {};
    for (n in t) void 0 !== t[n] && ((i[n] ? e : r || (r = {}))[n] = t[n]);
    return r && S.extend(!0, e, r), e;
  }
  (Wt.href = Tt.href),
    S.extend({
      active: 0,
      lastModified: {},
      etag: {},
      ajaxSettings: {
        url: Tt.href,
        type: "GET",
        isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),
        global: !0,
        processData: !0,
        async: !0,
        contentType: "application/x-www-form-urlencoded; charset=UTF-8",
        accepts: {
          "*": It,
          text: "text/plain",
          html: "text/html",
          xml: "application/xml, text/xml",
          json: "application/json, text/javascript",
        },
        contents: { xml: /\bxml\b/, html: /\bhtml/, json: /\bjson\b/ },
        responseFields: { xml: "responseXML", text: "responseText", json: "responseJSON" },
        converters: {
          "* text": String,
          "text html": !0,
          "text json": JSON.parse,
          "text xml": S.parseXML,
        },
        flatOptions: { url: !0, context: !0 },
      },
      ajaxSetup: function (e, t) {
        return t ? $t($t(e, S.ajaxSettings), t) : $t(S.ajaxSettings, e);
      },
      ajaxPrefilter: Ft(Rt),
      ajaxTransport: Ft(Mt),
      ajax: function (e, t) {
        "object" == typeof e && ((t = e), (e = void 0)), (t = t || {});
        var c,
          f,
          p,
          n,
          d,
          r,
          h,
          g,
          i,
          o,
          v = S.ajaxSetup({}, t),
          y = v.context || v,
          m = v.context && (y.nodeType || y.jquery) ? S(y) : S.event,
          x = S.Deferred(),
          b = S.Callbacks("once memory"),
          w = v.statusCode || {},
          a = {},
          s = {},
          u = "canceled",
          T = {
            readyState: 0,
            getResponseHeader: function (e) {
              var t;
              if (h) {
                if (!n) {
                  n = {};
                  while ((t = Ht.exec(p)))
                    n[t[1].toLowerCase() + " "] = (n[t[1].toLowerCase() + " "] || []).concat(t[2]);
                }
                t = n[e.toLowerCase() + " "];
              }
              return null == t ? null : t.join(", ");
            },
            getAllResponseHeaders: function () {
              return h ? p : null;
            },
            setRequestHeader: function (e, t) {
              return (
                null == h && ((e = s[e.toLowerCase()] = s[e.toLowerCase()] || e), (a[e] = t)), this
              );
            },
            overrideMimeType: function (e) {
              return null == h && (v.mimeType = e), this;
            },
            statusCode: function (e) {
              var t;
              if (e)
                if (h) T.always(e[T.status]);
                else for (t in e) w[t] = [w[t], e[t]];
              return this;
            },
            abort: function (e) {
              var t = e || u;
              return c && c.abort(t), l(0, t), this;
            },
          };
        if (
          (x.promise(T),
          (v.url = ((e || v.url || Tt.href) + "").replace(Pt, Tt.protocol + "//")),
          (v.type = t.method || t.type || v.method || v.type),
          (v.dataTypes = (v.dataType || "*").toLowerCase().match(P) || [""]),
          null == v.crossDomain)
        ) {
          r = E.createElement("a");
          try {
            (r.href = v.url),
              (r.href = r.href),
              (v.crossDomain = Wt.protocol + "//" + Wt.host != r.protocol + "//" + r.host);
          } catch (e) {
            v.crossDomain = !0;
          }
        }
        if (
          (v.data &&
            v.processData &&
            "string" != typeof v.data &&
            (v.data = S.param(v.data, v.traditional)),
          Bt(Rt, v, t, T),
          h)
        )
          return T;
        for (i in ((g = S.event && v.global) && 0 == S.active++ && S.event.trigger("ajaxStart"),
        (v.type = v.type.toUpperCase()),
        (v.hasContent = !Ot.test(v.type)),
        (f = v.url.replace(qt, "")),
        v.hasContent
          ? v.data &&
            v.processData &&
            0 === (v.contentType || "").indexOf("application/x-www-form-urlencoded") &&
            (v.data = v.data.replace(jt, "+"))
          : ((o = v.url.slice(f.length)),
            v.data &&
              (v.processData || "string" == typeof v.data) &&
              ((f += (Et.test(f) ? "&" : "?") + v.data), delete v.data),
            !1 === v.cache &&
              ((f = f.replace(Lt, "$1")), (o = (Et.test(f) ? "&" : "?") + "_=" + Ct.guid++ + o)),
            (v.url = f + o)),
        v.ifModified &&
          (S.lastModified[f] && T.setRequestHeader("If-Modified-Since", S.lastModified[f]),
          S.etag[f] && T.setRequestHeader("If-None-Match", S.etag[f])),
        ((v.data && v.hasContent && !1 !== v.contentType) || t.contentType) &&
          T.setRequestHeader("Content-Type", v.contentType),
        T.setRequestHeader(
          "Accept",
          v.dataTypes[0] && v.accepts[v.dataTypes[0]]
            ? v.accepts[v.dataTypes[0]] + ("*" !== v.dataTypes[0] ? ", " + It + "; q=0.01" : "")
            : v.accepts["*"],
        ),
        v.headers))
          T.setRequestHeader(i, v.headers[i]);
        if (v.beforeSend && (!1 === v.beforeSend.call(y, T, v) || h)) return T.abort();
        if (
          ((u = "abort"),
          b.add(v.complete),
          T.done(v.success),
          T.fail(v.error),
          (c = Bt(Mt, v, t, T)))
        ) {
          if (((T.readyState = 1), g && m.trigger("ajaxSend", [T, v]), h)) return T;
          v.async &&
            0 < v.timeout &&
            (d = C.setTimeout(function () {
              T.abort("timeout");
            }, v.timeout));
          try {
            (h = !1), c.send(a, l);
          } catch (e) {
            if (h) throw e;
            l(-1, e);
          }
        } else l(-1, "No Transport");
        function l(e, t, n, r) {
          var i,
            o,
            a,
            s,
            u,
            l = t;
          h ||
            ((h = !0),
            d && C.clearTimeout(d),
            (c = void 0),
            (p = r || ""),
            (T.readyState = 0 < e ? 4 : 0),
            (i = (200 <= e && e < 300) || 304 === e),
            n &&
              (s = (function (e, t, n) {
                var r,
                  i,
                  o,
                  a,
                  s = e.contents,
                  u = e.dataTypes;
                while ("*" === u[0])
                  u.shift(),
                    void 0 === r && (r = e.mimeType || t.getResponseHeader("Content-Type"));
                if (r)
                  for (i in s)
                    if (s[i] && s[i].test(r)) {
                      u.unshift(i);
                      break;
                    }
                if (u[0] in n) o = u[0];
                else {
                  for (i in n) {
                    if (!u[0] || e.converters[i + " " + u[0]]) {
                      o = i;
                      break;
                    }
                    a || (a = i);
                  }
                  o = o || a;
                }
                if (o) return o !== u[0] && u.unshift(o), n[o];
              })(v, T, n)),
            !i &&
              -1 < S.inArray("script", v.dataTypes) &&
              (v.converters["text script"] = function () {}),
            (s = (function (e, t, n, r) {
              var i,
                o,
                a,
                s,
                u,
                l = {},
                c = e.dataTypes.slice();
              if (c[1]) for (a in e.converters) l[a.toLowerCase()] = e.converters[a];
              o = c.shift();
              while (o)
                if (
                  (e.responseFields[o] && (n[e.responseFields[o]] = t),
                  !u && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)),
                  (u = o),
                  (o = c.shift()))
                )
                  if ("*" === o) o = u;
                  else if ("*" !== u && u !== o) {
                    if (!(a = l[u + " " + o] || l["* " + o]))
                      for (i in l)
                        if (
                          (s = i.split(" "))[1] === o &&
                          (a = l[u + " " + s[0]] || l["* " + s[0]])
                        ) {
                          !0 === a ? (a = l[i]) : !0 !== l[i] && ((o = s[0]), c.unshift(s[1]));
                          break;
                        }
                    if (!0 !== a)
                      if (a && e["throws"]) t = a(t);
                      else
                        try {
                          t = a(t);
                        } catch (e) {
                          return {
                            state: "parsererror",
                            error: a ? e : "No conversion from " + u + " to " + o,
                          };
                        }
                  }
              return { state: "success", data: t };
            })(v, s, T, i)),
            i
              ? (v.ifModified &&
                  ((u = T.getResponseHeader("Last-Modified")) && (S.lastModified[f] = u),
                  (u = T.getResponseHeader("etag")) && (S.etag[f] = u)),
                204 === e || "HEAD" === v.type
                  ? (l = "nocontent")
                  : 304 === e
                    ? (l = "notmodified")
                    : ((l = s.state), (o = s.data), (i = !(a = s.error))))
              : ((a = l), (!e && l) || ((l = "error"), e < 0 && (e = 0))),
            (T.status = e),
            (T.statusText = (t || l) + ""),
            i ? x.resolveWith(y, [o, l, T]) : x.rejectWith(y, [T, l, a]),
            T.statusCode(w),
            (w = void 0),
            g && m.trigger(i ? "ajaxSuccess" : "ajaxError", [T, v, i ? o : a]),
            b.fireWith(y, [T, l]),
            g && (m.trigger("ajaxComplete", [T, v]), --S.active || S.event.trigger("ajaxStop")));
        }
        return T;
      },
      getJSON: function (e, t, n) {
        return S.get(e, t, n, "json");
      },
      getScript: function (e, t) {
        return S.get(e, void 0, t, "script");
      },
    }),
    S.each(["get", "post"], function (e, i) {
      S[i] = function (e, t, n, r) {
        return (
          m(t) && ((r = r || n), (n = t), (t = void 0)),
          S.ajax(
            S.extend(
              { url: e, type: i, dataType: r, data: t, success: n },
              S.isPlainObject(e) && e,
            ),
          )
        );
      };
    }),
    S.ajaxPrefilter(function (e) {
      var t;
      for (t in e.headers)
        "content-type" === t.toLowerCase() && (e.contentType = e.headers[t] || "");
    }),
    (S._evalUrl = function (e, t, n) {
      return S.ajax({
        url: e,
        type: "GET",
        dataType: "script",
        cache: !0,
        async: !1,
        global: !1,
        converters: { "text script": function () {} },
        dataFilter: function (e) {
          S.globalEval(e, t, n);
        },
      });
    }),
    S.fn.extend({
      wrapAll: function (e) {
        var t;
        return (
          this[0] &&
            (m(e) && (e = e.call(this[0])),
            (t = S(e, this[0].ownerDocument).eq(0).clone(!0)),
            this[0].parentNode && t.insertBefore(this[0]),
            t
              .map(function () {
                var e = this;
                while (e.firstElementChild) e = e.firstElementChild;
                return e;
              })
              .append(this)),
          this
        );
      },
      wrapInner: function (n) {
        return m(n)
          ? this.each(function (e) {
              S(this).wrapInner(n.call(this, e));
            })
          : this.each(function () {
              var e = S(this),
                t = e.contents();
              t.length ? t.wrapAll(n) : e.append(n);
            });
      },
      wrap: function (t) {
        var n = m(t);
        return this.each(function (e) {
          S(this).wrapAll(n ? t.call(this, e) : t);
        });
      },
      unwrap: function (e) {
        return (
          this.parent(e)
            .not("body")
            .each(function () {
              S(this).replaceWith(this.childNodes);
            }),
          this
        );
      },
    }),
    (S.expr.pseudos.hidden = function (e) {
      return !S.expr.pseudos.visible(e);
    }),
    (S.expr.pseudos.visible = function (e) {
      return !!(e.offsetWidth || e.offsetHeight || e.getClientRects().length);
    }),
    (S.ajaxSettings.xhr = function () {
      try {
        return new C.XMLHttpRequest();
      } catch (e) {}
    });
  var _t = { 0: 200, 1223: 204 },
    zt = S.ajaxSettings.xhr();
  (y.cors = !!zt && "withCredentials" in zt),
    (y.ajax = zt = !!zt),
    S.ajaxTransport(function (i) {
      var o, a;
      if (y.cors || (zt && !i.crossDomain))
        return {
          send: function (e, t) {
            var n,
              r = i.xhr();
            if ((r.open(i.type, i.url, i.async, i.username, i.password), i.xhrFields))
              for (n in i.xhrFields) r[n] = i.xhrFields[n];
            for (n in (i.mimeType && r.overrideMimeType && r.overrideMimeType(i.mimeType),
            i.crossDomain || e["X-Requested-With"] || (e["X-Requested-With"] = "XMLHttpRequest"),
            e))
              r.setRequestHeader(n, e[n]);
            (o = function (e) {
              return function () {
                o &&
                  ((o =
                    a =
                    r.onload =
                    r.onerror =
                    r.onabort =
                    r.ontimeout =
                    r.onreadystatechange =
                      null),
                  "abort" === e
                    ? r.abort()
                    : "error" === e
                      ? "number" != typeof r.status
                        ? t(0, "error")
                        : t(r.status, r.statusText)
                      : t(
                          _t[r.status] || r.status,
                          r.statusText,
                          "text" !== (r.responseType || "text") || "string" != typeof r.responseText
                            ? { binary: r.response }
                            : { text: r.responseText },
                          r.getAllResponseHeaders(),
                        ));
              };
            }),
              (r.onload = o()),
              (a = r.onerror = r.ontimeout = o("error")),
              void 0 !== r.onabort
                ? (r.onabort = a)
                : (r.onreadystatechange = function () {
                    4 === r.readyState &&
                      C.setTimeout(function () {
                        o && a();
                      });
                  }),
              (o = o("abort"));
            try {
              r.send((i.hasContent && i.data) || null);
            } catch (e) {
              if (o) throw e;
            }
          },
          abort: function () {
            o && o();
          },
        };
    }),
    S.ajaxPrefilter(function (e) {
      e.crossDomain && (e.contents.script = !1);
    }),
    S.ajaxSetup({
      accepts: {
        script:
          "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript",
      },
      contents: { script: /\b(?:java|ecma)script\b/ },
      converters: {
        "text script": function (e) {
          return S.globalEval(e), e;
        },
      },
    }),
    S.ajaxPrefilter("script", function (e) {
      void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET");
    }),
    S.ajaxTransport("script", function (n) {
      var r, i;
      if (n.crossDomain || n.scriptAttrs)
        return {
          send: function (e, t) {
            (r = S("<script>")
              .attr(n.scriptAttrs || {})
              .prop({ charset: n.scriptCharset, src: n.url })
              .on(
                "load error",
                (i = function (e) {
                  r.remove(), (i = null), e && t("error" === e.type ? 404 : 200, e.type);
                }),
              )),
              E.head.appendChild(r[0]);
          },
          abort: function () {
            i && i();
          },
        };
    });
  var Ut,
    Xt = [],
    Vt = /(=)\?(?=&|$)|\?\?/;
  S.ajaxSetup({
    jsonp: "callback",
    jsonpCallback: function () {
      var e = Xt.pop() || S.expando + "_" + Ct.guid++;
      return (this[e] = !0), e;
    },
  }),
    S.ajaxPrefilter("json jsonp", function (e, t, n) {
      var r,
        i,
        o,
        a =
          !1 !== e.jsonp &&
          (Vt.test(e.url)
            ? "url"
            : "string" == typeof e.data &&
              0 === (e.contentType || "").indexOf("application/x-www-form-urlencoded") &&
              Vt.test(e.data) &&
              "data");
      if (a || "jsonp" === e.dataTypes[0])
        return (
          (r = e.jsonpCallback = m(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback),
          a
            ? (e[a] = e[a].replace(Vt, "$1" + r))
            : !1 !== e.jsonp && (e.url += (Et.test(e.url) ? "&" : "?") + e.jsonp + "=" + r),
          (e.converters["script json"] = function () {
            return o || S.error(r + " was not called"), o[0];
          }),
          (e.dataTypes[0] = "json"),
          (i = C[r]),
          (C[r] = function () {
            o = arguments;
          }),
          n.always(function () {
            void 0 === i ? S(C).removeProp(r) : (C[r] = i),
              e[r] && ((e.jsonpCallback = t.jsonpCallback), Xt.push(r)),
              o && m(i) && i(o[0]),
              (o = i = void 0);
          }),
          "script"
        );
    }),
    (y.createHTMLDocument =
      (((Ut = E.implementation.createHTMLDocument("").body).innerHTML =
        "<form></form><form></form>"),
      2 === Ut.childNodes.length)),
    (S.parseHTML = function (e, t, n) {
      return "string" != typeof e
        ? []
        : ("boolean" == typeof t && ((n = t), (t = !1)),
          t ||
            (y.createHTMLDocument
              ? (((r = (t = E.implementation.createHTMLDocument("")).createElement("base")).href =
                  E.location.href),
                t.head.appendChild(r))
              : (t = E)),
          (o = !n && []),
          (i = N.exec(e))
            ? [t.createElement(i[1])]
            : ((i = xe([e], t, o)), o && o.length && S(o).remove(), S.merge([], i.childNodes)));
      var r, i, o;
    }),
    (S.fn.load = function (e, t, n) {
      var r,
        i,
        o,
        a = this,
        s = e.indexOf(" ");
      return (
        -1 < s && ((r = vt(e.slice(s))), (e = e.slice(0, s))),
        m(t) ? ((n = t), (t = void 0)) : t && "object" == typeof t && (i = "POST"),
        0 < a.length &&
          S.ajax({ url: e, type: i || "GET", dataType: "html", data: t })
            .done(function (e) {
              (o = arguments), a.html(r ? S("<div>").append(S.parseHTML(e)).find(r) : e);
            })
            .always(
              n &&
                function (e, t) {
                  a.each(function () {
                    n.apply(this, o || [e.responseText, t, e]);
                  });
                },
            ),
        this
      );
    }),
    (S.expr.pseudos.animated = function (t) {
      return S.grep(S.timers, function (e) {
        return t === e.elem;
      }).length;
    }),
    (S.offset = {
      setOffset: function (e, t, n) {
        var r,
          i,
          o,
          a,
          s,
          u,
          l = S.css(e, "position"),
          c = S(e),
          f = {};
        "static" === l && (e.style.position = "relative"),
          (s = c.offset()),
          (o = S.css(e, "top")),
          (u = S.css(e, "left")),
          ("absolute" === l || "fixed" === l) && -1 < (o + u).indexOf("auto")
            ? ((a = (r = c.position()).top), (i = r.left))
            : ((a = parseFloat(o) || 0), (i = parseFloat(u) || 0)),
          m(t) && (t = t.call(e, n, S.extend({}, s))),
          null != t.top && (f.top = t.top - s.top + a),
          null != t.left && (f.left = t.left - s.left + i),
          "using" in t
            ? t.using.call(e, f)
            : ("number" == typeof f.top && (f.top += "px"),
              "number" == typeof f.left && (f.left += "px"),
              c.css(f));
      },
    }),
    S.fn.extend({
      offset: function (t) {
        if (arguments.length)
          return void 0 === t
            ? this
            : this.each(function (e) {
                S.offset.setOffset(this, t, e);
              });
        var e,
          n,
          r = this[0];
        return r
          ? r.getClientRects().length
            ? ((e = r.getBoundingClientRect()),
              (n = r.ownerDocument.defaultView),
              { top: e.top + n.pageYOffset, left: e.left + n.pageXOffset })
            : { top: 0, left: 0 }
          : void 0;
      },
      position: function () {
        if (this[0]) {
          var e,
            t,
            n,
            r = this[0],
            i = { top: 0, left: 0 };
          if ("fixed" === S.css(r, "position")) t = r.getBoundingClientRect();
          else {
            (t = this.offset()), (n = r.ownerDocument), (e = r.offsetParent || n.documentElement);
            while (
              e &&
              (e === n.body || e === n.documentElement) &&
              "static" === S.css(e, "position")
            )
              e = e.parentNode;
            e &&
              e !== r &&
              1 === e.nodeType &&
              (((i = S(e).offset()).top += S.css(e, "borderTopWidth", !0)),
              (i.left += S.css(e, "borderLeftWidth", !0)));
          }
          return {
            top: t.top - i.top - S.css(r, "marginTop", !0),
            left: t.left - i.left - S.css(r, "marginLeft", !0),
          };
        }
      },
      offsetParent: function () {
        return this.map(function () {
          var e = this.offsetParent;
          while (e && "static" === S.css(e, "position")) e = e.offsetParent;
          return e || re;
        });
      },
    }),
    S.each({ scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function (t, i) {
      var o = "pageYOffset" === i;
      S.fn[t] = function (e) {
        return $(
          this,
          function (e, t, n) {
            var r;
            if ((x(e) ? (r = e) : 9 === e.nodeType && (r = e.defaultView), void 0 === n))
              return r ? r[i] : e[t];
            r ? r.scrollTo(o ? r.pageXOffset : n, o ? n : r.pageYOffset) : (e[t] = n);
          },
          t,
          e,
          arguments.length,
        );
      };
    }),
    S.each(["top", "left"], function (e, n) {
      S.cssHooks[n] = $e(y.pixelPosition, function (e, t) {
        if (t) return (t = Be(e, n)), Me.test(t) ? S(e).position()[n] + "px" : t;
      });
    }),
    S.each({ Height: "height", Width: "width" }, function (a, s) {
      S.each({ padding: "inner" + a, content: s, "": "outer" + a }, function (r, o) {
        S.fn[o] = function (e, t) {
          var n = arguments.length && (r || "boolean" != typeof e),
            i = r || (!0 === e || !0 === t ? "margin" : "border");
          return $(
            this,
            function (e, t, n) {
              var r;
              return x(e)
                ? 0 === o.indexOf("outer")
                  ? e["inner" + a]
                  : e.document.documentElement["client" + a]
                : 9 === e.nodeType
                  ? ((r = e.documentElement),
                    Math.max(
                      e.body["scroll" + a],
                      r["scroll" + a],
                      e.body["offset" + a],
                      r["offset" + a],
                      r["client" + a],
                    ))
                  : void 0 === n
                    ? S.css(e, t, i)
                    : S.style(e, t, n, i);
            },
            s,
            n ? e : void 0,
            n,
          );
        };
      });
    }),
    S.each(
      ["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"],
      function (e, t) {
        S.fn[t] = function (e) {
          return this.on(t, e);
        };
      },
    ),
    S.fn.extend({
      bind: function (e, t, n) {
        return this.on(e, null, t, n);
      },
      unbind: function (e, t) {
        return this.off(e, null, t);
      },
      delegate: function (e, t, n, r) {
        return this.on(t, e, n, r);
      },
      undelegate: function (e, t, n) {
        return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n);
      },
      hover: function (e, t) {
        return this.mouseenter(e).mouseleave(t || e);
      },
    }),
    S.each(
      "blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(
        " ",
      ),
      function (e, n) {
        S.fn[n] = function (e, t) {
          return 0 < arguments.length ? this.on(n, null, e, t) : this.trigger(n);
        };
      },
    );
  var Gt = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
  (S.proxy = function (e, t) {
    var n, r, i;
    if (("string" == typeof t && ((n = e[t]), (t = e), (e = n)), m(e)))
      return (
        (r = s.call(arguments, 2)),
        ((i = function () {
          return e.apply(t || this, r.concat(s.call(arguments)));
        }).guid = e.guid =
          e.guid || S.guid++),
        i
      );
  }),
    (S.holdReady = function (e) {
      e ? S.readyWait++ : S.ready(!0);
    }),
    (S.isArray = Array.isArray),
    (S.parseJSON = JSON.parse),
    (S.nodeName = A),
    (S.isFunction = m),
    (S.isWindow = x),
    (S.camelCase = X),
    (S.type = w),
    (S.now = Date.now),
    (S.isNumeric = function (e) {
      var t = S.type(e);
      return ("number" === t || "string" === t) && !isNaN(e - parseFloat(e));
    }),
    (S.trim = function (e) {
      return null == e ? "" : (e + "").replace(Gt, "");
    }),
     true &&
      !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {
        return S;
      }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
		__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  var Yt = C.jQuery,
    Qt = C.$;
  return (
    (S.noConflict = function (e) {
      return C.$ === S && (C.$ = Qt), e && C.jQuery === S && (C.jQuery = Yt), S;
    }),
    "undefined" == typeof e && (C.jQuery = C.$ = S),
    S
  );
});


/***/ }),

/***/ 3010:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _prefs_background__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2644);
/* harmony import */ var _utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7656);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser, adblockIsPaused, replacedCounts */





const LocalDataCollection = (function getLocalDataCollection() {
  const easyPrivacyURL =
    browser.runtime.getManifest().manifest_version === 2
      ? "https://easylist-downloads.adblockplus.org/easyprivacy.txt"
      : "https://easylist-downloads.adblockplus.org/v3/full/easyprivacy.txt";
  const FIFTEEN_MINS = 15;
  const EXT_STATS_KEY = "ext_stats_key";
  const STATS_ALARM_NAME = "statsalarm";
  const STATS_STORAGE_KEY = "ab:stats.storage.key";
  const REPORTING_OPTIONS = {
    filterType: "blocking",
    includeElementHiding: false,
  };

  // Setup memory cache
  let dataCollectionCache = {};
  dataCollectionCache.domains = {};

  const initializeDomainIfNeeded = function (domain) {
    if (!(domain in dataCollectionCache.domains)) {
      dataCollectionCache.domains[domain] = {};
      dataCollectionCache.domains[domain].ads = 0;
      dataCollectionCache.domains[domain].trackers = 0;
      dataCollectionCache.domains[domain].adsReplaced = 0;
    }
  };

  const addFilterToCache = function (details, filter) {
    const validFilterText = filter && filter.text && typeof filter.text === "string";
    if (details.tabId > 0 && validFilterText && validFilterText && details && details.url) {
      browser.tabs.get(details.tabId).then(async (tab) => {
        if (tab.incognito) {
          return;
        }
        const theURL = new URL(details.url);
        const domain = theURL.hostname;
        initializeDomainIfNeeded(domain);
        const { text } = filter;
        let isAd = true;
        const subscriptions = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.getForFilter(text);
        subscriptions.forEach((sub) => {
          if (!sub.disabled && sub.url && sub.url === easyPrivacyURL) {
            isAd = false;
          }
        });
        if (isAd) {
          dataCollectionCache.domains[domain].ads += 1;
        } else {
          dataCollectionCache.domains[domain].trackers += 1;
        }
        (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_2__/* .chromeStorageSetHelper */ .AX)(STATS_STORAGE_KEY, dataCollectionCache);
      });
    }
  };

  const filterListener = function ({ request, filter }) {
    if ((0,_prefs_background__WEBPACK_IMPORTED_MODULE_1__/* .getSettings */ .mt)().local_data_collection && !adblockIsPaused()) {
      addFilterToCache(request, filter);
    } else if (!(0,_prefs_background__WEBPACK_IMPORTED_MODULE_1__/* .getSettings */ .mt)().local_data_collection) {
      LocalDataCollection.end();
    }
  };

  const adReplacedListener = function (tabId, url) {
    if ((0,_prefs_background__WEBPACK_IMPORTED_MODULE_1__/* .getSettings */ .mt)().local_data_collection && !adblockIsPaused()) {
      const domain = new URL(url).hostname;
      initializeDomainIfNeeded(domain);
      dataCollectionCache.domains[domain].adsReplaced += 1;
      (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_2__/* .chromeStorageSetHelper */ .AX)(STATS_STORAGE_KEY, dataCollectionCache);
    } else if (!(0,_prefs_background__WEBPACK_IMPORTED_MODULE_1__/* .getSettings */ .mt)().local_data_collection) {
      LocalDataCollection.end();
    }
  };

  const clearCache = function () {
    dataCollectionCache = {};
    dataCollectionCache.domains = {};
    browser.storage.local.remove(STATS_STORAGE_KEY);
  };

  const saveCacheData = function () {
    return new Promise(async (resolve) => {
      if ((0,_prefs_background__WEBPACK_IMPORTED_MODULE_1__/* .getSettings */ .mt)().local_data_collection && !(0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_2__/* .isEmptyObject */ .RI)(dataCollectionCache.domains)) {
        const hourSnapShot = JSON.parse(
          JSON.stringify({
            v: "1",
            doms: dataCollectionCache.domains,
          }),
        );
        browser.storage.local.get(EXT_STATS_KEY).then((hourlyResponse) => {
          const savedData = hourlyResponse[EXT_STATS_KEY] || {};
          savedData[Date.now().toString()] = hourSnapShot;
          (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_2__/* .chromeStorageSetHelper */ .AX)(EXT_STATS_KEY, savedData, resolve);
          clearCache();
        });
      } else {
        if (!(0,_prefs_background__WEBPACK_IMPORTED_MODULE_1__/* .getSettings */ .mt)().local_data_collection) {
          browser.alarms.clear(STATS_ALARM_NAME);
        }
        resolve();
      }
    });
  };

  const loadCache = async function () {
    const response = await browser.storage.local.get(STATS_STORAGE_KEY);
    if (response[STATS_STORAGE_KEY]) {
      dataCollectionCache = response[STATS_STORAGE_KEY];
    }
  };

  const initialize = function () {
    browser.alarms.onAlarm.addListener(async (alarm) => {
      // Not our alarm, nothing to do
      if (!alarm && alarm.name !== STATS_ALARM_NAME) {
        return;
      }
      await _prefs_background__WEBPACK_IMPORTED_MODULE_1__/* .settings */ .W0.onload();
      // If we're collecting data and the alarm has fired, process the memory cache
      if ((0,_prefs_background__WEBPACK_IMPORTED_MODULE_1__/* .getSettings */ .mt)().local_data_collection) {
        await loadCache();
        saveCacheData();
      } else {
        browser.alarms.clear(STATS_ALARM_NAME);
      }
    });
    // If enabled at startup, enable periodic processing of memory cache
    _prefs_background__WEBPACK_IMPORTED_MODULE_1__/* .settings */ .W0.onload().then(async () => {
      if (!(0,_prefs_background__WEBPACK_IMPORTED_MODULE_1__/* .getSettings */ .mt)().local_data_collection) {
        return;
      }
      await loadCache();
      browser.alarms.create(STATS_ALARM_NAME, { periodInMinutes: FIFTEEN_MINS });
      _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.reporting.onBlockableItem.addListener(filterListener, REPORTING_OPTIONS);
      replacedCounts.adReplacedNotifier.on("adReplaced", adReplacedListener);
    });
  };
  initialize();

  const returnObj = {};
  returnObj.EXT_STATS_KEY = EXT_STATS_KEY;

  returnObj.start = function returnObjStart() {
    return new Promise((resolve) => {
      dataCollectionCache.domains = {};
      (0,_prefs_background__WEBPACK_IMPORTED_MODULE_1__/* .setSetting */ .ZC)("local_data_collection", true, () => {
        initialize();
        resolve();
      });
    });
  };

  returnObj.end = function returnObjEnd() {
    return new Promise((resolve) => {
      browser.alarms.clear(STATS_ALARM_NAME);
      clearCache();
      _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.reporting.onBlockableItem.removeListener(filterListener, REPORTING_OPTIONS);
      replacedCounts.adReplacedNotifier.off("adReplaced", adReplacedListener);
      (0,_prefs_background__WEBPACK_IMPORTED_MODULE_1__/* .setSetting */ .ZC)("local_data_collection", false, resolve);
    });
  };
  returnObj.clearCache = clearCache;
  returnObj.getCache = function returnObjGetCache() {
    return dataCollectionCache;
  };
  returnObj.saveCacheData = saveCacheData;
  returnObj.easyPrivacyURL = easyPrivacyURL;
  returnObj.exportRawStats = async function returnObjFilterStats() {
    const hourlyResponse = await browser.storage.local.get(EXT_STATS_KEY);
    return Promise.resolve(hourlyResponse[EXT_STATS_KEY] || {});
  };
  returnObj.getRawStatsSize = async function returnObjFilterStatsSize() {
    const rawStats = await LocalDataCollection.exportRawStats();
    return Promise.resolve(JSON.stringify(rawStats).length);
  };
  // Note: the following function is used for testing purposes
  // Import filter list statistics which will be converted to the format needed / used
  // by the 'stats' tab.
  // Inputs: filterStatsArray: array of stringified JSON filter list statistics data
  //         from the DataCollection V2 messages.
  // Returns: a Promise, resolved when complete
  returnObj.importFilterStats = function returnObjFilterStats(filterStatsArray) {
    return new Promise((resolve) => {
      let parsedfilterStats = {};
      try {
        parsedfilterStats = JSON.parse(filterStatsArray);
      } catch (e) {
        // eslint-disable-next-line no-console
        console.log(e);
        resolve(`error : ${e.toString()}`);
        return;
      }
      browser.storage.local.get(EXT_STATS_KEY).then((hourlyResponse) => {
        const savedData = hourlyResponse[EXT_STATS_KEY] || {};
        for (let inx = 0; inx < parsedfilterStats.length; inx++) {
          const dupDataCache = parsedfilterStats[inx];
          // only process new data
          // don't overwrite existing data
          if (!savedData[Date.parse(dupDataCache.timeOfLastPush)]) {
            const hourSnapShot = {};
            const initializeDomainDataObject = function (domain) {
              hourSnapShot[domain] = {};
              hourSnapShot[domain].ads = 0;
              hourSnapShot[domain].trackers = 0;
              hourSnapShot[domain].adsReplaced = 0;
              if (
                dupDataCache.domains[domain] &&
                typeof dupDataCache.domains[domain].adsReplaced === "number"
              ) {
                hourSnapShot[domain].adsReplaced = dupDataCache.domains[domain].adsReplaced;
              }
            };
            for (const domain in dupDataCache.domains) {
              initializeDomainDataObject(domain);
            }
            const processDomainByFilterType = function (filter, domains, filterRequestType) {
              for (const domain in domains) {
                if (!hourSnapShot[domain]) {
                  initializeDomainDataObject(domain);
                }
                if (
                  dupDataCache.filters[filter].subscriptions &&
                  dupDataCache.filters[filter].subscriptions.length &&
                  dupDataCache.filters[filter].subscriptions.includes(easyPrivacyURL)
                ) {
                  hourSnapShot[domain].trackers +=
                    dupDataCache.filters[filter][filterRequestType][domain].hits;
                } else {
                  hourSnapShot[domain].ads +=
                    dupDataCache.filters[filter][filterRequestType][domain].hits;
                }
              }
            };
            for (const filter in dupDataCache.filters) {
              processDomainByFilterType(
                filter,
                dupDataCache.filters[filter].firstParty,
                "firstParty",
              );
              processDomainByFilterType(
                filter,
                dupDataCache.filters[filter].thirdParty,
                "thirdParty",
              );
            }
            savedData[Date.parse(dupDataCache.timeOfLastPush)] = JSON.parse(
              JSON.stringify({
                v: "1",
                doms: hourSnapShot,
              }),
            );
          }
        } // end for loop
        (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_2__/* .chromeStorageSetHelper */ .AX)(EXT_STATS_KEY, savedData);
        resolve(" success! ");
      });
    });
  };
  return returnObj;
})();

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (LocalDataCollection);


/***/ }),

/***/ 6739:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";

// UNUSED EXPORTS: processMessageResponse

// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/messaging/types.js
var types = __webpack_require__(8237);
// EXTERNAL MODULE: ./adblock-betafish/prefs/background/index.js + 1 modules
var background = __webpack_require__(2644);
// EXTERNAL MODULE: ./adblock-betafish/subscriptionadapter.js + 1 modules
var subscriptionadapter = __webpack_require__(6396);
// EXTERNAL MODULE: ./adblock-betafish/datacollection.v2.js
var datacollection_v2 = __webpack_require__(7703);
// EXTERNAL MODULE: ./adblock-betafish/servermessages.js
var servermessages = __webpack_require__(5754);
// EXTERNAL MODULE: ./adblock-betafish/localdatacollection.js
var localdatacollection = __webpack_require__(3010);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/bg-functions.js
var bg_functions = __webpack_require__(7656);
;// CONCATENATED MODULE: ./adblock-betafish/excludefilter.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser */

// Module for removing individual filters from filter lists
// An 'advance' feature, used on the Customize tab, titled "disabled filters"




const ExcludeFilter = (function excludeFilter() {
  const excludeFiltersKey = "exclude_filters";
  // Removes the valid filters from any / all filter lists and
  // saves the valid entries
  // Note:  any invalid filters are ignored
  // Inputs: filters:string the new filters.
  const setExcludeFilters = async function (filtersToExclude) {
    const response = await browser.storage.local.get(excludeFiltersKey);
    const currentExcludeFilters = response[excludeFiltersKey];
    let promises = [];
    if (currentExcludeFilters) {
      const currentExcludeArr = currentExcludeFilters.split("\n");
      for (let i = 0; i < currentExcludeArr.length; i++) {
        const filter = currentExcludeArr[i];
        if (filter.length > 0) {
          const result = ewe_api.filters.validate(filter);
          if (!result) {
            promises.push(ewe_api.filters.enable([filter]));
          }
        }
      }
    }
    await Promise.all(promises);
    promises = [];
    const excludeFilters = filtersToExclude.trim();
    const excludeFiltersArray = excludeFilters.split("\n");
    const validExcludeFiltersArray = [];
    for (let i = 0; i < excludeFiltersArray.length; i++) {
      let filter = excludeFiltersArray[i];
      filter = filter.trim();
      if (filter.length > 0) {
        const result = ewe_api.filters.validate(filter);
        if (!result) {
          validExcludeFiltersArray.push(filter);
          promises.push(ewe_api.filters.disable([filter]));
        }
      }
    }
    await Promise.all(promises);
    if (validExcludeFiltersArray.length) {
      (0,bg_functions/* chromeStorageSetHelper */.AX)(excludeFiltersKey, validExcludeFiltersArray.join("\n"));
    } else {
      browser.storage.local.remove(excludeFiltersKey);
    }
  };

  function excludeFilterChangeListener() {
    browser.storage.local.get(excludeFiltersKey).then((response) => {
      if (response[excludeFiltersKey]) {
        setExcludeFilters(response[excludeFiltersKey]);
      }
    });
  }

  // At startup, add a listener to so that the exclude filters
  // can be removed if the filter lists are updated
  ewe_api.subscriptions.onAdded.addListener(excludeFilterChangeListener);
  ewe_api.subscriptions.onChanged.addListener(excludeFilterChangeListener);
  ewe_api.subscriptions.onRemoved.addListener(excludeFilterChangeListener);

  return {
    setExcludeFilters,
  };
})();
/* harmony default export */ const excludefilter = (ExcludeFilter);

// EXTERNAL MODULE: ./adblock-betafish/messaging/messagevalidator.js
var messagevalidator = __webpack_require__(9247);
// EXTERNAL MODULE: ./adblock-betafish/alias/icon.js
var icon = __webpack_require__(4761);
// EXTERNAL MODULE: ./adblock-betafish/testing/ready-state/background/index.ts + 2 modules
var ready_state_background = __webpack_require__(3138);
;// CONCATENATED MODULE: ./src/info-injector/shared/info-injector.types.ts
const injectionOrigins = [
    "https://adblockplus.org",
    "https://accounts.adblockplus.org",
    "https://new.adblockplus.org",
    "https://welcome.adblockplus.org",
    "https://getadblock.com",
    "https://vpn.getadblock.com",
];
const getInfoCommand = "getInjectionInfo";

// EXTERNAL MODULE: ./build/templates/info.chrome.js.tmpl
var info_chrome_js = __webpack_require__(9336);
// EXTERNAL MODULE: ./adblock-betafish/id/background/index.ts + 1 modules
var id_background = __webpack_require__(7099);
// EXTERNAL MODULE: ./adblock-betafish/picreplacement/check.js
var check = __webpack_require__(4770);
// EXTERNAL MODULE: ./adblock-betafish/alias/prefs.js
var prefs = __webpack_require__(2680);
;// CONCATENATED MODULE: ./src/info-injector/background/info-injector.ts





async function getInjectionInfo() {
    await prefs/* Prefs */.N.untilLoaded;
    const isPremium = check/* License */.u8.isActiveLicense();
    const version = info_chrome_js.addonVersion;
    const id = await (0,id_background/* getUserId */.F)();
    const blockCount = prefs/* Prefs */.N.get("blocked_total");
    const experimentFlags = await ewe_api.experiments.getFlags();
    return { isPremium, version, id, blockCount, experimentFlags };
}

;// CONCATENATED MODULE: ./src/info-injector/background/index.ts


// EXTERNAL MODULE: ./src/pause/background/index.ts
var pause_background = __webpack_require__(4255);
;// CONCATENATED MODULE: ./adblock-betafish/messaging/message-responder.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser, isTrustedSender,  getUserFilters,
   addCustomFilter, countCache, checkUpdateProgress,
   adblockIsPaused, pageIsWhitelisted, getCurrentTabInfo,
   openTab, updateFilterLists, isTrustedSenderDomain, updateButtonUIAndContextMenus,
   getDebugInfo, addYTChannelListeners, removeYTChannelListeners, openYTManagedSubPage,
   addTwitchAllowlistListeners, removeTwitchAllowlistListeners, abpPrefPropertyNames,
   pausedFilterText1, pausedFilterText2, updateCustomFilterCountMap
*/



















const processMessageResponse = (sendResponse, responseData) => {
  sendResponse({});
  return Promise.resolve(responseData);
};

const uiPorts = new Map();
const messageTypes = new Map([["settings", "settings.respond"]]);

function sendMessage(type, action, ...args) {
  if (uiPorts.size === 0) {
    return;
  }

  for (const [uiPort, filters] of uiPorts) {
    const actions = filters.get(type);
    if (actions && actions.indexOf(action) !== -1) {
      uiPort.postMessage({
        type: messageTypes.get(type),
        action,
        args,
      });
    }
  }
}

function getListener(type, action) {
  return (...args) => {
    sendMessage(type, action, ...args);
  };
}

function listen(type, filters, newFilter) {
  switch (type) {
    case "settings":
      filters.set("settings", newFilter);
      break;
    default:
    // do nothing
  }
}

function onConnect(uiPort) {
  if (!isTrustedSender(uiPort.sender)) {
    return;
  }

  if (uiPort.name !== "settings") {
    return;
  }

  const filters = new Map();
  uiPorts.set(uiPort, filters);

  uiPort.onDisconnect.addListener(() => {
    uiPorts.delete(uiPort);
  });

  uiPort.onMessage.addListener((message) => {
    const [type, action] = message.type.split(".", 2);
    if (action === "listen") {
      listen(
        type,
        filters,
        message.filter,
        message,
        uiPort.sender && uiPort.sender.tab && uiPort.sender.tab.id,
      );
    }
  });
}
browser.runtime.onConnect.addListener(onConnect);

/**
 * Process messages and events related to the 'Settings' object
 *
 */
background/* settings */.W0.onload().then(() => {
  /* eslint-disable consistent-return */
  browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
    if (!isTrustedSender(sender)) {
      return;
    }

    const { command } = message;
    switch (command) {
      case "setSetting":
        (0,background/* setSetting */.ZC)(message.name, message.isEnabled);
        sendResponse({});
        break;
      case "isValidTheme":
        return processMessageResponse(sendResponse, (0,background/* isValidTheme */.QC)(message.name));
      case "getABPPrefPropertyNames":
        return processMessageResponse(sendResponse, abpPrefPropertyNames);
      default:
    }
  });
  background/* settingsNotifier */.Ob.on("settings.changed", getListener("settings", "changed"));
});

/**
 * Process messages for testing purposes
 *
 */
/* eslint-disable consistent-return */
browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (!isTrustedSender(sender)) {
    return;
  }

  if (message.command !== "testing.getReadyState") {
    return;
  }

  return processMessageResponse(sendResponse, (0,ready_state_background/* getReadyState */.BH)());
});

/**
 * Process messages from Popup menu and other UI components
 *
 */
/* eslint-disable consistent-return */
browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (!isTrustedSender(sender)) {
    return;
  }
  const { command } = message;
  switch (command) {
    case "pageIsWhitelisted":
      sendResponse(pageIsWhitelisted(JSON.parse(message.page)));
      break;
    case "adblockIsPaused": {
      const isPaused = adblockIsPaused(message.newValue);
      sendResponse(isPaused);
      return Promise.resolve(isPaused);
    }
    case "allowlistTab": {
      sendResponse({});
      return (0,pause_background/* allowlistTab */.vB)(message.url);
    }
    case "getPausedFilterText":
      return processMessageResponse(sendResponse, { pausedFilterText1, pausedFilterText2 });
    case "getCurrentTabInfo":
      sendResponse({});
      return getCurrentTabInfo(false, message.tabId).then((results) => results);
    case "getUserId":
      return (0,id_background/* getUserId */.F)();
    case "updateCustomFilterCountMap":
      updateCustomFilterCountMap(message.countMap);
      sendResponse({});
      return;
    case "updateFilterLists":
      updateFilterLists();
      sendResponse({});
      return;
    case "checkUpdateProgress":
      sendResponse(checkUpdateProgress());
      return;
    case "getCustomFilterCount":
      sendResponse({ response: countCache.getCustomFilterCount(message.host) });
      return;
    case "subscriptions.has":
      return processMessageResponse(sendResponse, ewe_api.subscriptions.has(message.url));
    case "getUserFilters":
      sendResponse({ response: getUserFilters() });
      return;
    case "removeAllAllowlistRulesForTab":
      sendResponse({});
      return (0,pause_background/* removeAllAllowlistRulesForTab */.Gz)(message.tabId).then((results) => results);
    case "getDebugInfo":
      sendResponse({});
      return getDebugInfo();
    case "resetBadgeText":
      sendResponse({});
      (0,icon/* resetBadgeText */.K4)();
      return;
    case "getNewBadgeTextReason":
      sendResponse({ reason: (0,icon/* getNewBadgeTextReason */.lq)() });
      return;
    case "updateButtonUIAndContextMenus":
      updateButtonUIAndContextMenus();
      sendResponse({});
      break;
    case "dataCollectionOptOut":
      sendResponse({});
      return servermessages/* default */.A.recordOptOutMessage();
    default:
  }
});

async function addCustomFilterMessageValidation(message) {
  if (await messagevalidator/* default */.A.validateMessage(message)) {
    return addCustomFilter(message.filterTextToAdd, message.origin).then((results) => results);
  }
}

/**
 * Process the 'addCustomFilter' message the wizards, which requires verifing the
 * `addCustomFilterRandomName` property on the message matches what is current set on the global
 * name space
 *
 */
/* eslint-disable consistent-return */
browser.runtime.onMessage.addListener((message) => {
  if (message.command === "addCustomFilter" && message.filterTextToAdd) {
    return addCustomFilterMessageValidation(message);
  }
});

/**
 * Process messages that are sent from a content script
 *
 */
//
/* eslint-disable consistent-return */
browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (isTrustedSenderDomain(sender) || isTrustedSender(sender)) {
    const { command } = message;
    switch (command) {
      case "subscribe":
        subscriptionadapter/* default */.A.subscribe({ adblockId: message.id });
        sendResponse({});
        break;
      case "unsubscribe":
        subscriptionadapter/* default */.A.unsubscribe({ adblockId: message.adblockId });
        sendResponse({});
        break;
      case "getIdFromURL":
        return processMessageResponse(sendResponse, subscriptionadapter/* default */.A.getIdFromURL(message.url));
      case "isLanguageSpecific":
        return processMessageResponse(
          sendResponse,
          subscriptionadapter/* default */.A.isLanguageSpecific(message.adblockId),
        );
      case "getSubscriptionsMinusText":
        return processMessageResponse(
          sendResponse,
          subscriptionadapter/* default */.A.getSubscriptionsMinusText(),
        );
      case "getAllSubscriptionsMinusText":
        return processMessageResponse(
          sendResponse,
          subscriptionadapter/* default */.A.getAllSubscriptionsMinusText(),
        );
      case "recordGeneralMessage":
        servermessages/* default */.A.recordGeneralMessage(message.msg, undefined, message.additionalParams);
        sendResponse({});
        break;
      default:
    }
  }
});

/**
 * Process messages that are sent from a content script but have a custom
 * trusted sender configuration.
 *
 */
browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  switch (message.command) {
    case getInfoCommand:
      if (!injectionOrigins.some((origin) => sender.url.startsWith(origin))) {
        return;
      }
      sendResponse({});
      return getInjectionInfo();
    default:
  }
});

/**
 * Process messages that are sent from a content script & trusted senders
 *
 */
//
browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  const { command } = message;
  switch (command) {
    case "getSettings":
      sendResponse((0,background/* getSettings */.mt)());
      break;
    case "openTab":
      openTab(message.urlToOpen);
      sendResponse({});
      break;
    default:
  }
});

/**
 * Process messages for the DataCollectionV2
 *
 */
/* eslint-disable consistent-return */
browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (!isTrustedSender(sender)) {
    return;
  }
  const { command } = message;
  switch (command) {
    case "DataCollectionV2.start":
      return processMessageResponse(sendResponse, datacollection_v2/* default */.A.start());
    case "DataCollectionV2.end":
      return processMessageResponse(sendResponse, datacollection_v2/* default */.A.end());
    default:
  }
});

/**
 * Process messages for the  Exclude Filters, Local Data Collection,
 * Server Messages, YT Channel & Twitch Channel Listeners
 *
 */
/* eslint-disable consistent-return */
browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (!isTrustedSender(sender)) {
    return;
  }
  const { command } = message;
  switch (command) {
    case "addYTChannelListeners":
      addYTChannelListeners();
      sendResponse({});
      break;
    case "removeYTChannelListeners":
      removeYTChannelListeners();
      sendResponse({});
      break;
    case "openYTManagedSubPage":
      openYTManagedSubPage();
      sendResponse({});
      break;
    case "addTwitchAllowlistListeners":
      addTwitchAllowlistListeners();
      sendResponse({});
      break;
    case "removeTwitchAllowlistListeners":
      removeTwitchAllowlistListeners();
      sendResponse({});
      break;
    case "recordAnonymousErrorMessage":
      servermessages/* default */.A.recordAnonymousErrorMessage(message.msg, undefined, message.additionalParams);
      sendResponse({});
      break;
    case "LocalDataCollection.clearCache":
      localdatacollection/* default */.A.clearCache();
      sendResponse({});
      break;
    case "LocalDataCollection.end":
      return processMessageResponse(sendResponse, localdatacollection/* default */.A.end());
    case "LocalDataCollection.start":
      return processMessageResponse(sendResponse, localdatacollection/* default */.A.start());
    case "LocalDataCollection.saveCacheData":
      sendResponse({});
      return localdatacollection/* default */.A.saveCacheData();
    case "LocalDataCollection.easyPrivacyURL":
      return processMessageResponse(sendResponse, localdatacollection/* default */.A.easyPrivacyURL);
    case "LocalDataCollection.EXT_STATS_KEY":
      return processMessageResponse(sendResponse, localdatacollection/* default */.A.EXT_STATS_KEY);
    case "ExcludeFilter.setExcludeFilters":
      excludefilter.setExcludeFilters(message.filters);
      sendResponse({});
      break;
    default:
  }
});

function parseFilter(text) {
  const filterText = text.trim() || null;
  let error = null;

  if (filterText) {
    if (filterText[0] === "[") {
      error = { type: "unexpected_filter_list_header" };
    } else {
      const filterError = ewe_api.filters.validate(filterText);
      if (filterError) {
        error = (0,types/* toPlainFilterError */.i_)(filterError);
      }
    }
  }

  return [filterText, error];
}

function filtersValidate(text) {
  const filters = [];
  const errors = [];

  const lines = text.split("\n");
  for (let i = 0; i < lines.length; i++) {
    const [filter, error] = parseFilter(lines[i]);

    if (error) {
      error.filter = filter;
      // We don't treat filter headers like invalid filters,
      // instead we simply ignore them and don't show any errors
      // in order to allow pasting complete filter lists.
      // If there are no filters, we do treat it as an invalid filter
      // to inform users about it and to give them a chance to edit it.
      if (error.type === "unexpected_filter_list_header" && lines.length > 1) {
        /* eslint-disable no-continue */
        continue;
      }
      errors.push(error);
    } else if (filter) {
      filters.push(filter);
    }
  }

  return [filters, errors];
}

async function filtersAdd(text, origin) {
  const filters = [];
  const lines = text.split("\n");
  for (let i = 0; i < lines.length; i++) {
    const [filter, error] = parseFilter(lines[i]);

    if (error) {
      return error;
    }

    if (filter) {
      filters.push(filter);
    }
  }
  try {
    await ewe_api.filters.add(filters, (0,bg_functions/* createFilterMetaData */.yf)(origin));
  } catch (error) {
    return error;
  }
}

/* eslint-disable consistent-return */
browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (!isTrustedSender(sender)) {
    return;
  }
  const { command } = message;
  switch (command) {
    case "filters.validate": {
      const [, validationErrors] = filtersValidate(message.text);
      return processMessageResponse(sendResponse, validationErrors);
    }
    case "filters.normalize": {
      return processMessageResponse(sendResponse, ewe_api.filters.normalize(message.text));
    }
    case "filters.add": {
      sendResponse({});
      return filtersAdd(message.text, message.origin);
    }
    case "filters.remove":
      ewe_api.filters.remove(message.filters);
      sendResponse({});
      break;
    default:
  }
});


/***/ }),

/***/ 9247:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_storage_session__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1633);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */



const sessionStorageKey = "ab:CustomFilterRandomName";
const sessionKey = "ab:randomtext";

const sessionStorage = new _adblockplusui_adblockpluschrome_lib_storage_session__WEBPACK_IMPORTED_MODULE_0__/* .SessionStorage */ .u(sessionStorageKey);

/* eslint-disable-next-line no-unused-vars */
class MessageValidator {
  generateNewRandomText = () => {
    this.randomtext = `ab-${Math.random().toString(36).substring(2)}`;
    sessionStorage.set(sessionKey, this.randomtext);
    return this.randomtext;
  };

  validateMessage = async (message) => {
    const data = await sessionStorage.get(sessionKey);
    this.randomtext = data;
    return Promise.resolve(message && message.addCustomFilterRandomName === this.randomtext);
  };
}
const messageValidator = new MessageValidator();
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (messageValidator);


/***/ }),

/***/ 2458:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(297);
/* harmony import */ var _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4770);
/* harmony import */ var _picreplacement_channels__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8690);
/* harmony import */ var _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9077);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser, ext, isTrustedSender, openTab,
 */









const gabHostnames = [
  "https://getadblock.com",
  "https://dev.getadblock.com",
  "https://dev1.getadblock.com",
  "https://dev2.getadblock.com",
  "https://getadblockpremium.com",
];
/**
 * Process events related to the Premium object - License, Channels, and Sync-Service
 *
 */
const uiPorts = new Map();
const messageTypes = new Map([
  ["license", "license.respond"],
  ["channels", "channels.respond"],
  ["sync", "sync.respond"],
]);

function sendMessage(type, action, ...args) {
  if (uiPorts.size === 0) {
    return;
  }
  for (const [uiPort, filters] of uiPorts) {
    const actions = filters.get(type);
    if (actions && actions.indexOf(action) !== -1) {
      uiPort.postMessage({
        type: messageTypes.get(type),
        action,
        args,
      });
    }
  }
}

function getListener(type, action) {
  return (...args) => {
    sendMessage(type, action, ...args);
  };
}

function listen(type, filters, newFilter) {
  switch (type) {
    case "license":
      filters.set("license", newFilter);
      break;
    case "channels":
      filters.set("channels", newFilter);
      break;
    case "sync":
      filters.set("sync", newFilter);
      break;
    default:
    // do nothing
  }
}

function onConnect(uiPort) {
  if (!isTrustedSender(uiPort.sender)) {
    return;
  }

  if (uiPort.name !== "premium") {
    return;
  }

  const filters = new Map();
  uiPorts.set(uiPort, filters);

  uiPort.onDisconnect.addListener(() => {
    uiPorts.delete(uiPort);
  });

  uiPort.onMessage.addListener((message) => {
    const [type, action] = message.type.split(".", 2);
    if (action === "listen") {
      listen(
        type,
        filters,
        message.filter,
        message,
        uiPort.sender && uiPort.sender.tab && uiPort.sender.tab.id,
      );
    }
  });
}
browser.runtime.onConnect.addListener(onConnect);

const injectScript = async function (scriptFileName, tabId, frameId) {
  try {
    if (browser.scripting) {
      await browser.scripting.executeScript({
        target: { tabId, frameIds: [frameId] },
        files: [scriptFileName],
      });
    } else {
      await browser.tabs.executeScript(tabId, {
        file: scriptFileName,
        frameId,
        runAt: "document_start",
      });
    }
  } catch (error) {
    /* eslint-disable-next-line no-console */
    console.error(error);
  }
};

/**
 * Return an a clone of some the methods of the License object
 * to be used as a proxy on the Options page
 *
 * @returns a clone of the License object
 */
function getPremiumAssociatedObject() {
  return {
    getFormattedActiveSinceDate: _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.getFormattedActiveSinceDate(),
    MAB_CONFIG: _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.MAB_CONFIG,
    shouldShowMyAdBlockEnrollment: _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.shouldShowMyAdBlockEnrollment(),
    shouldShowPremiumCTA: _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.shouldShowPremiumCTA(),
    isActiveLicense: _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.isActiveLicense(),
    isLicenseCodeValid: _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.isLicenseCodeValid(),
    pageReloadedOnSettingChangeKey: _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.pageReloadedOnSettingChangeKey,
    userClosedSyncCTAKey: _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.userClosedSyncCTAKey,
    userSawSyncCTAKey: _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.userSawSyncCTAKey,
    themesForCTA: _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.userSawSyncCTAKey,
  };
}

/**
 * Return a boolean to indicate the License state
 *
 * @returns a Promise containing a boolean to indicate License state
 */
const processIsActiveLicense = async () => {
  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready();
  return _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.isActiveLicense();
};

/**
 * Return a Promise containing a clone of some the methods and data of the License object
 *
 * @returns a Promise containing a clone of some the methods and data of the License object
 */
const processLicenseConfig = async () => {
  try {
    await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready();
    const response = getPremiumAssociatedObject();
    Object.assign(response, _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.get());
    return response;
  } catch (e) {
    /* eslint-disable-next-line no-console */
    console.error("error occurred during adblock:getLicenseConfig message handling");
    /* eslint-disable-next-line no-console */
    console.error(e);
  }
  return {};
};

/**
 * Process the 'load_my_adblock' messages when the user is subscribed to
 * the Distraction Control filter list
 */
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:load_my_adblock", async (message, sender) => {
  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready();
  if (
    _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.isActiveLicense() &&
    sender.page &&
    sender.page.url &&
    sender.page.url.href &&
    sender.page.url.href.startsWith("http") &&
    ((await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.has("https://cdn.adblockcdn.com/filters/distraction-control.txt")) ||
      (await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.has(
        "https://easylist-downloads.adblockplus.org/v3/full/adblock_premium.txt",
      ))) &&
    !(await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getAllowingFilters(sender.page.id)).length
  ) {
    void injectScript("adblock-push-notification-cs.js", sender.page.id, sender.frame.id);
  }
  return {};
});
ext.addTrustedMessageTypes(null, ["adblock:load_my_adblock"]);

/**
 * Process general messages related to the 'License' object,
 * which require sender validation. (These may come from extension pages,
 * where the sender URL starts with the extension URL)
 *
 */
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:activate", async () => {
  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready();
  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.activate();
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:cleanUpSevenDayAlarm", async () => {
  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready();
  _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.cleanUpSevenDayAlarm();
  return {};
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:getLicenseConfig", () => processLicenseConfig());
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:updatePeriodically", async () => {
  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready();
  _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.updatePeriodically();
  return {};
});

/**
 * Process messages related to the 'License' object
 * which require domain validation
 * the messages come from content scripts on the getadblock.com domain
 *
 */
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:isActiveLicense", () => processIsActiveLicense());
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:payment_success", async () => {
  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready();
  try {
    await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.activate();
    return { ack: true };
  } catch (e) {
    /* eslint-disable-next-line no-console */
    console.error("error occurred during payment_success message handling");
    /* eslint-disable-next-line no-console */
    console.error(e);
    return { ack: false };
  }
});
for (const hostname of gabHostnames) {
  ext.addTrustedMessageTypes(hostname, ["adblock:isActiveLicense", "adblock:payment_success"]);
}

/**
 * Process the 'safe' messages related to the 'License' object
 * which do not require sender validation (they typically come from content scripts)
 *
 */
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:openPremiumPayURL", async () => {
  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready();
  openTab(_picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.MAB_CONFIG.payURL);
  return {};
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:setBlacklistCTAStatus", async (message) => {
  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready();
  _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.shouldShowBlacklistCTA(message.isEnabled);
  return {};
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:setWhitelistCTAStatus", async (message) => {
  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready();
  _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.shouldShowWhitelistCTA(message.isEnabled);
  return {};
});
ext.addTrustedMessageTypes(null, [
  "adblock:openPremiumPayURL",
  "adblock:setBlacklistCTAStatus",
  "adblock:setWhitelistCTAStatus",
]);

/**
 * Process the messages related to Channels object
 *
 */
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:channels.disableAllChannels", () => _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.disableAllChannels());
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:channels.getGuide", () => _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.getGuide());
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:channels.getIdByName", (message) => _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.getIdByName(message.name));
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:channels.initializeListeners", () => _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.initializeListeners());
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:channels.isAnyEnabled", () => _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.isAnyEnabled());
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:channels.isCustomChannelEnabled", () => _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.isCustomChannelEnabled());
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:channels.setEnabled", (message) =>
  _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.setEnabled(message.channelId, message.enabled),
);

/**
 * Return a Promise containing an object
 * - to indicate that Image Swap is disable on the page
 * - the Image Swap meta data
 *
 * @returns a Promise containing a boolean to indicate License state
 */
const processGetRandomlisting = async function (message, sender) {
  try {
    if ((await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getAllowingFilters(sender.page.id)).length) {
      return { disabledOnPage: true };
    }
    await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready();
    if (!_picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.isActiveLicense()) {
      return { disabledOnPage: true };
    }
    const result = _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.randomListing(message.opts);
    if (result) {
      return result;
    }
    return { disabledOnPage: true };
  } catch (e) {
    /* eslint-disable-next-line no-console */
    console.error("error occurred during getrandomlisting message handling");
    /* eslint-disable-next-line no-console */
    console.error(e);
    return { disabledOnPage: true };
  }
};

/**
 * Process the `getrandomlisting` &
 * 'channels.recordOneAdReplaced' message from the Image Swap content script
 *
 */
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:channels.getrandomlisting", (message, sender) =>
  processGetRandomlisting(message, sender),
);
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:channels.recordOneAdReplaced", async (message, sender) => {
  await _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready();
  if (_picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.isActiveLicense()) {
    _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .replacedCounts */ .bv.recordOneAdReplaced(sender.page.id);
  }
});
ext.addTrustedMessageTypes(null, [
  "adblock:channels.getrandomlisting",
  "adblock:channels.recordOneAdReplaced",
]);

/**
 * Process the messages related to Custom channel object
 *
 */
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:customchannel.isMaximumAllowedImages", () => {
  const customChannelId = _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.getIdByName("CustomChannel");
  const customChannel = _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.channelGuide[customChannelId].channel;
  return customChannel.isMaximumAllowedImages();
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:customchannel.getListings", () => {
  const customChannelId = _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.getIdByName("CustomChannel");
  const customChannel = _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.channelGuide[customChannelId].channel;
  return customChannel.getListings();
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:customchannel.addCustomImage", (message) => {
  const customChannelId = _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.getIdByName("CustomChannel");
  const customChannel = _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.channelGuide[customChannelId].channel;
  return customChannel.addCustomImage(message.imageInfo);
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:customchannel.removeListingByURL", (message) => {
  const customChannelId = _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.getIdByName("CustomChannel");
  const customChannel = _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .channels */ .BM.channelGuide[customChannelId].channel;
  return customChannel.removeListingByURL(message.url);
});

/**
 * Process the messages related to Sync Service object
 *
 */
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:resetLastGetErrorResponse", () => {
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].resetLastGetErrorResponse();
  return {};
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:resetLastGetStatusCode", () => {
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].resetLastGetStatusCode();
  return {};
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:resetLastPostStatusCode", () => {
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].resetLastPostStatusCode();
  return {};
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:SyncService.disableSync", (message) => {
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].disableSync(message.removeName);
  return {};
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:SyncService.enableSync", (message) => {
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].enableSync(message.initialGet);
  return {};
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:SyncService.getAllExtensionNames", () => _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].getAllExtensionNames());
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:SyncService.getCurrentExtensionName", () => _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].getCurrentExtensionName());
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:SyncService.getLastPostStatusCode", () => _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].getLastPostStatusCode());
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:SyncService.getLastGetStatusCode", () => _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].getLastGetStatusCode());
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:SyncService.processUserSyncRequest", () => {
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].processUserSyncRequest();
  return {};
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:SyncService.removeExtensionName", (message) => {
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].removeExtensionName(message.dataDeviceName, message.dataExtensionGUID);
  return {};
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:SyncService.resetAllErrors", () => {
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].resetAllSyncErrors();
  return {};
});
_adblockplusui_adblockpluschrome_lib_messaging_port__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("adblock:SyncService.setCurrentExtensionName", (message) => {
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].setCurrentExtensionName(message.name);
  return {};
});

/**
 * Add the listener related to the Channels notifier
 */
function addChannelsNotifierListeners() {
  _picreplacement_channels__WEBPACK_IMPORTED_MODULE_3__/* .channelsNotifier */ .N.on("channels.changed", getListener("channels", "changed"));
}

/**
 * Add the listener related to the License notifier
 */
function addLicenseNotifierListeners() {
  _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.ready().then(() => {
    _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.licenseNotifier.on("license.updating", getListener("license", "updating"));
    _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.licenseNotifier.on("license.updated", getListener("license", "updated"));
    _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.licenseNotifier.on("license.updated.error", getListener("license", "updated.error"));
    _picreplacement_check__WEBPACK_IMPORTED_MODULE_2__/* .License */ .u8.licenseNotifier.on("license.expired", getListener("license", "expired"));
  });
}

/**
 * Add the listener related to the Sync Service notifier
 */
function addSyncNotifierListeners() {
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on("sync.data.receieved", getListener("sync", "sync.data.receieved"));
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on("sync.data.getting", getListener("sync", "sync.data.getting"));
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on(
    "sync.data.error.initial.fail",
    getListener("sync", "sync.data.error.initial.fail"),
  );
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on(
    "sync.data.getting.error",
    getListener("sync", "sync.data.getting.error"),
  );
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on(
    "extension.names.downloading",
    getListener("sync", "extension.names.downloading"),
  );
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on(
    "extension.names.downloaded",
    getListener("sync", "extension.names.downloaded"),
  );
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on(
    "extension.names.downloading.error",
    getListener("sync", "extension.names.ownloading.error"),
  );
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on(
    "extension.name.updating",
    getListener("sync", "extension.name.updating"),
  );
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on(
    "extension.name.updated",
    getListener("sync", "extension.name.updated"),
  );
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on(
    "extension.name.updated.error",
    getListener("sync", "extension.name.updated.error"),
  );
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on(
    "extension.name.remove",
    getListener("sync", "extension.name.remove"),
  );
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on(
    "extension.name.removed",
    getListener("sync", "extension.name.removed"),
  );
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on(
    "extension.name.remove.error",
    getListener("sync", "extension.name.remove.error"),
  );
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on("post.data.sending", getListener("sync", "post.data.sending"));
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on("post.data.sent", getListener("sync", "post.data.sent"));
  _picreplacement_sync_service__WEBPACK_IMPORTED_MODULE_4__["default"].syncNotifier.on("post.data.sent.error", getListener("sync", "post.data.sent.error"));
}

function start() {
  addChannelsNotifierListeners();
  addLicenseNotifierListeners();
  addSyncNotifierListeners();
}

start();


/***/ }),

/***/ 1287:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony import */ var prefs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2680);
/* harmony import */ var info__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9336);
/* harmony import */ var _telemetry_background__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3322);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* global browser */
/* eslint-disable import/prefer-default-export */





/**
 * The domain where pages are hosted on.
 */
const pageDomain = "https://getadblock.com";

/**
 * A map of relative paths for pages.
 */
const pagePath = {
  installed: "/installed/",
};

/**
 * Opens a page in a new tab.
 *
 * @param {string} path The relative path to the page to open
 * @param {object} [queryParams] Optional query params to attach
 */
function openPage(path, queryParams) {
  let url = `${pageDomain}${path}`;
  if (queryParams) {
    url = `${url}?${new URLSearchParams(queryParams).toString()}`;
  }
  browser.tabs.create({ url });
}

/**
 * Opens the '/installed' page in a new tab.
 */
async function openInstalledPage() {
  const userID = await _telemetry_background__WEBPACK_IMPORTED_MODULE_2__/* .TELEMETRY */ .Gy.untilLoaded();
  openPage(pagePath.installed, {
    u: userID,
    lg: browser.i18n.getUILanguage(),
    an: info__WEBPACK_IMPORTED_MODULE_1__.addonName,
    av: info__WEBPACK_IMPORTED_MODULE_1__.addonVersion,
    ap: info__WEBPACK_IMPORTED_MODULE_1__.application,
    apv: info__WEBPACK_IMPORTED_MODULE_1__.applicationVersion,
    p: info__WEBPACK_IMPORTED_MODULE_1__.platform,
    pv: info__WEBPACK_IMPORTED_MODULE_1__.platformVersion,
  });
}

/**
 * Initializes the notifications module.
 */
function start() {
  browser.runtime.onInstalled.addListener(async (details) => {
    await prefs__WEBPACK_IMPORTED_MODULE_0__/* .Prefs */ .N.untilLoaded;
    if (details.reason === "install" && !prefs__WEBPACK_IMPORTED_MODULE_0__/* .Prefs */ .N.suppress_first_run_page) {
      openInstalledPage();
    }
  });
}

start();


/***/ }),

/***/ 8772:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var info__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9336);
/* harmony import */ var _utilities_background_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(199);
/* harmony import */ var _src_filters_shared__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7057);
/* harmony import */ var _check__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(4770);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser */







/**
 * Algorithm used to verify authenticity of sender
 */
const algorithm = {
  name: "RSASSA-PKCS1-v1_5",
  modulusLength: 4096,
  publicExponent: new Uint8Array([0x01, 0x00, 0x01]),
  hash: { name: "SHA-512" },
};
/**
 * Time (in milliseconds) from now for which we consider signatures to be valid
 * based on their associated timestamps
 */
const signatureExpiration = 6 * 60 * 60 * 1000;

/**
 * Converts base64 string into array buffer
 *
 * @param {string} str - base64 string
 *
 * @returns {Uint8Array} array buffer
 */
function base64ToArrayBuffer(str) {
  const decodedData = atob(str);
  return Uint8Array.from(decodedData, (c) => c.charCodeAt(0));
}

/**
 * Encodes request data to sign for verifying authenticity of sender
 *
 * @param {string} domain - Sender domain
 * @param {number} timestamp - Timestamp of current date and time
 *
 * @returns {Uint8Array} Encoded request data
 */
function getAllowData(domain, timestamp) {
  const str = `${domain},${timestamp}`;
  return new TextEncoder().encode(str);
}

/**
 * Generates public key from string for verifying signatures
 *
 * @param {string} key - public key string
 *
 * @returns {Promise<CryptoKey>} public key
 */
async function getKey(key) {
  const abKey = base64ToArrayBuffer(key);
  return crypto.subtle.importKey("spki", abKey, algorithm, false, ["verify"]);
}

/**
 * Handles incoming "users.isPaying" messages
 *
 * @param {Object} message - "users.isPaying" message
 * @param {Object} sender - Message sender
 *
 * @returns {Promise<Object|null>} Payload and additional information or null if conditions are not met
 */
async function handleUsersIsPayingMessage(message, sender) {
  // Check message contents
  if (!isValidPremiumAuthMessage(message)) {
    return null;
  }

  // Verify signature
  const isVerified = await verifyRequest(message, sender);
  if (!isVerified) {
    return null;
  }

  // Retrieve payload
  const extensionInfo = await getExtensionInfo(message, sender);
  const payload = _check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.isActiveLicense() ? _check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.getBypassPayload() : null;
  if (_check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.isActiveLicense() && !payload) {
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_2__.log)("no bypass mode payload");
  }

  return { payload, extensionInfo };
}

/**
 * Checks whether signature matches data and any of the known public keys
 * that are authorized to use the bypass API
 *
 * @param {string} domain - Sender domain
 * @param {number} timestamp - Timestamp of current date and time
 * @param {string} signature - Signature for provided domain and timestamp
 *
 * @returns {Promise<boolean>} whether signature matches data and any authorized public key
 */
async function verifySignature(domain, timestamp, signature) {
  if (typeof signature !== "string") {
    return false;
  }

  const data = getAllowData(domain, timestamp);
  const abSignature = base64ToArrayBuffer(signature);

  const promisedValidations = _check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.MAB_CONFIG.bypassAuthorizedKeys.map(
    /* eslint-disable-next-line no-use-before-define */
    (key) => verifySignatureWithKey(data, abSignature, key),
  );
  const validations = await Promise.all(promisedValidations);
  return validations.some((isValid) => isValid);
}

/**
 * Checks whether signature matches data and public key
 *
 * @param {Uint8Array} data - Encoded data
 * @param {Uint8Array} signature - Signature for encoded data
 * @param {string} pubKey - Public key
 *
 * @returns {Promise<boolean>} whether signature matches data and public key
 */
async function verifySignatureWithKey(data, signature, pubKey) {
  return crypto.subtle.verify(algorithm, await getKey(pubKey), signature, data);
}

/**
 * Checks whether timestamp is valid
 *
 * @param {number} timestamp - Timestamp
 *
 * @returns {boolean} whether timestamp is valid
 */
function verifyTimestamp(timestamp) {
  if (typeof timestamp !== "number" || Number.isNaN(timestamp)) {
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_2__.log)("timestamp is not number", timestamp);
    return false;
  }

  const timeDiff = Date.now() - timestamp;
  return timeDiff < signatureExpiration;
}

/**
 * Checks whether current tab is allowlisted
 *
 * @param {Object} sender - Message sender
 *
 * @returns {Promise<Object>} Allowlist state object containing status, source, and oneCA
 */
async function getAllowlistState(sender) {
  const tabId = sender.tab.id;
  if (!tabId) {
    return {
      status: false,
      source: null,
      oneCA: false,
    };
  }

  const allowlistingFilters = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getAllowingFilters(tabId);
  let source = null;

  if (allowlistingFilters.length > 0) {
    for (const filter of allowlistingFilters) {
      // eslint-disable-next-line no-await-in-loop
      const metadata = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getMetadata(filter);
      const { origin } = metadata || {};

      if (origin === _src_filters_shared__WEBPACK_IMPORTED_MODULE_3__.FilterOrigin.web) {
        source = "1ca";
        break;
      } else {
        source = "user";
        // Don't break here, continue searching in case there's a "web" origin
      }
    }
  }

  return {
    status: allowlistingFilters.length > 0,
    source,
    oneCA: true,
  };
}

/**
 * Checks whether request is valid
 *
 * @param {Object} message - Request message
 * @param {Object} sender - Message sender
 *
 * @returns {Promise<boolean>} whether request is valid
 */
async function verifyRequest(message, sender) {
  const { signature, timestamp } = message;
  const domain = new URL(sender.url).hostname;

  if (!verifyTimestamp(timestamp)) {
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_2__.log)("invalid Timestamp", timestamp);
    return false;
  }

  if (!(await verifySignature(domain, timestamp, signature))) {
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_2__.log)("invalid signature");
    return false;
  }

  return true;
}

/**
 * Checks whether candidate is a valid message for premium authentication.
 *
 * @param {Object} candidate - Candidate
 * @returns {boolean} whether candidate is a valid message for premium authentication
 */
function isValidPremiumAuthMessage(candidate) {
  return (
    candidate !== null &&
    typeof candidate === "object" &&
    "signature" in candidate &&
    "timestamp" in candidate
  );
}

/**
 * Retrieves additional data to be sent along with the payload
 *
 * @param {Object} message - Message containing signature request data
 * @param {Object} sender - Message sender
 * @returns {Promise<Object|null>} extensionInfo - Additional data or null if conditions are not met
 */
async function getExtensionInfo(message, sender) {
  try {
    const allowlist = await getAllowlistState(sender);

    return {
      name: info__WEBPACK_IMPORTED_MODULE_1__.baseName,
      version: info__WEBPACK_IMPORTED_MODULE_1__.addonVersion,
      allowlistState: allowlist,
    };
  } catch (error) {
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_2__.log)("error getting extension info", error);
    return null;
  }
}

/**
 * Initializes module
 */
function start() {
  /* eslint-disable consistent-return */
  browser.runtime.onMessage.addListener((message, sender) => {
    if (message.command !== "users.isPaying") {
      return;
    }

    return handleUsersIsPayingMessage(message, sender);
  });
  /* eslint-enable consistent-return */
}

start();


/***/ }),

/***/ 8690:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  B: () => (/* binding */ Channels),
  N: () => (/* binding */ channelsNotifier)
});

// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/adblockpluscore/lib/contentTypes.js
var contentTypes = __webpack_require__(3809);
// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/events.js
var events = __webpack_require__(866);
;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/image-sizes-map.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

const imageSizesMap = new Map([
  ["NONE", 0],
  ["wide", 1],
  ["tall", 2],
  ["skinnywide", 4],
  ["skinnytall", 8],
  ["big", 16],
  ["small", 32],
]);

const WIDE = imageSizesMap.get("wide");
const TALL = imageSizesMap.get("tall");
const BIG = imageSizesMap.get("big");
const SMALL = imageSizesMap.get("small");
const SKINNYWIDE = imageSizesMap.get("skinnywide");
const SKINNYTALL = imageSizesMap.get("skinnytall");

// EXTERNAL MODULE: ./adblock-betafish/subscriptionadapter.js + 1 modules
var subscriptionadapter = __webpack_require__(6396);
;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/listing.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global  */

// Inputs: width:int, height:int, url:url, title:string, attributionUrl:url
class Listing {
  constructor(data) {
    this.width = data.width;
    this.height = data.height;
    this.url = data.url;
    this.title = data.title;
    this.attributionUrl = data.attributionUrl;
    this.channelName = data.channelName;
    if (data.name) {
      this.name = data.name;
    }
    if (data.thumbURL) {
      this.thumbURL = data.thumbURL;
    }
    if (data.userLink) {
      this.userLink = data.userLink;
    }
    if (data.anySize) {
      this.anySize = data.anySize;
    }
    if (data.type) {
      this.type = data.type;
    }
    if (data.ratio) {
      this.ratio = data.ratio;
    }
    if (data.customImage) {
      this.customImage = data.customImage;
    }
  }
}
/* harmony default export */ const listing = (Listing);

;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/channel.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global  */




// Base class representing a channel of photos.
// Concrete constructors must accept a single argument, because Channels.add()
// relies on that.
class Channel {
  constructor() {
    this.listings = [];
  }

  getListings() {
    return this.listings.slice(0); // shallow copy
  }

  static listingFactory(widthParam, heightParam, url, title, channelName) {
    let width = widthParam;
    let height = heightParam;
    const type = Channel.calculateType(width, height);

    if (typeof width === "number") {
      width = `${width}`;
    }
    if (typeof height === "number") {
      height = `${height}`;
    }
    return new listing({
      width,
      height,
      url,
      attributionUrl: url,
      type,
      ratio: Math.max(width, height) / Math.min(width, height),
      title,
      channelName, // message.json key for channel name
    });
  }

  // Update the channel's listings and trigger an 'updated' event.
  refresh() {
    const that = this;
    this.getLatestListings((listings) => {
      that.listings = listings;
    });
  }

  // Load all photos so that they're in the cache.
  static prefetch() {
    // current - noop, since all of the URLs are hard coded.
  }

  static getLatestListings() {
    throw new Error("Implemented by subclass. Call callback with up-to-date listings.");
  }

  static calculateType(w, h) {
    let width = w;
    let height = h;

    if (typeof width === "string") {
      width = parseInt(width, 10);
    }
    if (typeof height === "string") {
      height = parseInt(height, 10);
    }
    let type = "";
    const ratio = Math.max(width, height) / Math.min(width, height);
    if (ratio >= 1.5 && ratio < 7) {
      type = width > height ? imageSizesMap.get("wide") : imageSizesMap.get("tall");
    } else if (ratio > 7) {
      type = width > height ? imageSizesMap.get("skinnywide") : imageSizesMap.get("skinnytall");
    } else {
      type = width > 125 || height > 125 ? imageSizesMap.get("big") : imageSizesMap.get("small");
    }
    return type;
  }
}
/* harmony default export */ const channel = (Channel);

;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/custom-channel.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser */

// Channel containing user imported images
// Subclass of Channel.




class CustomChannel extends channel {
  constructor() {
    super();
    this.listings = [];
    this.CUSTOM_META_KEY = "customMetaData";
    const that = this;

    // load the meta data Array from storage
    browser.storage.local.get(this.CUSTOM_META_KEY).then((customImageMetaData) => {
      const savedCustomImageMetaData = customImageMetaData;
      if (!savedCustomImageMetaData[this.CUSTOM_META_KEY]) {
        savedCustomImageMetaData[this.CUSTOM_META_KEY] = [];
      }
      const customMetaData = savedCustomImageMetaData[this.CUSTOM_META_KEY];
      for (let inx = 0; inx < customMetaData.length; inx++) {
        const listingData = customMetaData[inx];
        if (
          listingData &&
          listingData.url &&
          listingData.width &&
          listingData.height &&
          listingData.title
        ) {
          const theNewListing = CustomChannel.createListing(
            listingData.width,
            listingData.height,
            listingData.url,
            listingData.title,
          );
          that.listings.push(theNewListing);
        }
      }
    });
  }

  static createListing(theWidth, theHeight, theURL, theName) {
    let width = theWidth;
    let height = theHeight;
    const url = theURL;
    const type = channel.calculateType(width, height);

    if (typeof width === "number") {
      width = `${width}`;
    }
    if (typeof height === "number") {
      height = `${height}`;
    }
    return new listing({
      width,
      height,
      url,
      attributionUrl: url,
      type,
      ratio: Math.max(width, height) / Math.min(width, height),
      title: `This is an image from your PC! : ${theName}`,
      channelName: "custom_channel_name", // message.json key for channel name
      customImage: true,
    });
  }

  // to run - channels.channelGuide[channels.getIdByName("CustomChannel")].channel.deleteAll()
  deleteAll() {
    const customImagesArray = this.listings;
    for (let inx = 0; inx < customImagesArray.length; inx++) {
      if (customImagesArray[inx] && customImagesArray[inx].url) {
        browser.storage.local.remove(customImagesArray[inx].url);
      }
    }
    browser.storage.local.remove(this.CUSTOM_META_KEY).then(() => {
      this.listings = [];
    });
  }

  getLatestListings(callback) {
    callback(this.listings);
  }

  isMaximumAllowedImages() {
    return this.listings.length >= 9;
  }

  saveListings() {
    const that = this;
    return new Promise((resolve, reject) => {
      const persistedMetaImageObj = {};
      persistedMetaImageObj[that.CUSTOM_META_KEY] = that.listings;
      browser.storage.local.set(persistedMetaImageObj).then(() => {
        if (browser.runtime.lastError) {
          reject(browser.runtime.lastError);
        }
        resolve(true);
      });
    });
  }

  removeListingByURL(theURLToRemove) {
    for (let inx = 0; inx < this.listings.length; inx++) {
      const theListing = this.listings[inx];
      if (theListing && theListing.url === theURLToRemove) {
        this.listings.splice(inx, 1);
      }
    }
    const that = this;
    return new Promise((resolve, reject) => {
      that.saveListings().then((response) => {
        if (response) {
          browser.storage.local.remove(theURLToRemove).then(() => {
            if (browser.runtime.lastError) {
              reject(browser.runtime.lastError);
            }
            resolve(true);
          });
        } else {
          resolve(response);
        }
      });
    });
  }

  async addCustomImage(imageInfo) {
    const theNewListing = CustomChannel.createListing(
      imageInfo.width,
      imageInfo.height,
      imageInfo.listingURL,
      imageInfo.name,
    );
    this.listings.push(theNewListing);
    const response = await this.saveListings().catch(() => Promise.reject());
    if (response) {
      return Promise.resolve(imageInfo.listingURL);
    }
    return Promise.reject();
  }

  getBytesInUseForEachImage() {
    if (typeof browser.storage.local.getBytesInUse !== "function") {
      return Promise.resolve(0);
    }
    const customImagesArray = this.getListings();
    const promises = [];
    for (let inx = 0; inx < customImagesArray.length; inx++) {
      const thePromise = new Promise((resolve) => {
        if (customImagesArray[inx] && customImagesArray[inx].url) {
          browser.storage.local.getBytesInUse(customImagesArray[inx].url).then((biu) => {
            resolve(biu);
          });
        }
      });
      promises.push(thePromise);
    }
    return Promise.all(promises);
  }

  getTotalBytesInUse() {
    if (typeof browser.storage.local.getBytesInUse !== "function") {
      return Promise.resolve(0);
    }
    return new Promise((resolve) => {
      this.getBytesInUseForEachImage().then((results) => {
        let sum = 0;
        let numResults = results.length;
        while (numResults > 0) {
          numResults -= 1;
          sum += results[numResults];
        }
        resolve(sum);
      });
    });
  }
}
/* harmony default export */ const custom_channel = (CustomChannel);

;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/data/cats.json
const cats_namespaceObject = /*#__PURE__*/JSON.parse('[{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x628/12--x628/cat-7784.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x628/12--x628/cat-animal-animal-portrait-pet.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x628/12--x628/cat-feline-cute-domestic.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x628/12--x628/cat-kitten-rozkosne-little.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x628/12--x628/domestic-cat-cat-adidas-relaxed.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x628/12--x628/eyes-cats-cat-couch.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x628/24--x1256/cat-7784.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x628/24--x1256/cat-animal-animal-portrait-pet.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x628/24--x1256/cat-feline-cute-domestic.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x628/24--x1256/cat-kitten-rozkosne-little.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x628/24--x1256/domestic-cat-cat-adidas-relaxed.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x628/24--x1256/eyes-cats-cat-couch.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-7784.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-82072.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-animal-animal-portrait-pet.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-animal-cute-pet-39500.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-balcony-surprised-look-80363.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-british-shorthair-mieze-blue-eye-162174.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-british-shorthair-thoroughbred-adidas-162064.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-close-animal-cat-face-162309.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-eyes-view-face-66292.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-feline-cute-domestic.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-feline-furry-pet-53446.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-feline-kitty-kitten-39380.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-home-animal-cat-s-eyes-46208.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-kitten-rozkosne-little.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-pet-eyes-animal-50566.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-pet-furry-face-162319.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-portrait-eyes-animal-162216.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-portrait-kitten-cute-128884.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-relax-chill-out-camacho-70844.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-tiger-getiegert-feel-at-home-160722.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/domestic-cat-cat-adidas-relaxed.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/eyes-cats-cat-couch.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-105587.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-106131.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-116835.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-135859.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-142615.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-171216.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-172420.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-173909.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-192384.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-207166.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-208845.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-208860.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-208878.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-208880.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-208906.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-208907.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-208954.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-208971.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-208998.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-209117.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-209800.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-210081.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-214657.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-220826.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-220876.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-220951.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-220970.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-220983.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-236630.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-236633.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-244848.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-247007.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-248254.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-248289.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-248304.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-257423.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-271889.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-272124.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-289345.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-289381.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-290263.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-327014.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-349388.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-372651.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-372657.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-416088.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-416138.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-416208.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-437886.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-461872.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-549237.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-576802.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-583250.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-596590.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-599492.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-605048.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-622549.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-65536.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-674568.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-674577 (1).jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-674577.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-679855.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-680437.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-683205.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-689042.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-709482.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-720684.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-731553.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-731637.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-733105.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-736528.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-745241.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-749212.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-751050.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-89951.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-92174.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-94434.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-95328.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-close-animal-cat-face-1623-9.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/cat-feline-kitty-kitten-3938-.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-1-5587.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-17242-.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-1739-9.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-2-886-.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-2-8878.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-58325-.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-6832-5.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-7-9482.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/3--x25-/pexels-photo-751-5-.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-7784.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-82072.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-animal-animal-portrait-pet.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-animal-cute-pet-39500.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-balcony-surprised-look-80363.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-british-shorthair-mieze-blue-eye-162174.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-british-shorthair-thoroughbred-adidas-162064.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-close-animal-cat-face-162309.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-eyes-view-face-66292.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-feline-cute-domestic.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-feline-furry-pet-53446.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-feline-kitty-kitten-39380.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-home-animal-cat-s-eyes-46208.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-kitten-rozkosne-little.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-pet-eyes-animal-50566.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-pet-furry-face-162319.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-portrait-eyes-animal-162216.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-portrait-kitten-cute-128884.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-relax-chill-out-camacho-70844.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/cat-tiger-getiegert-feel-at-home-160722.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/domestic-cat-cat-adidas-relaxed.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/eyes-cats-cat-couch.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-105587.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-106131.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-116835.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-135859.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-142615.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-171216.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-172420.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-173909.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-192384.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-207166.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-208845.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-208860.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-208878.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-208880.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-208906.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-208907.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-208954.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-208971.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-208998.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-209117.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-209800.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-210081.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-214657.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-220826.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-220876.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-220951.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-220970.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-220983.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-236630.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-236633.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-244848.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-247007.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-248254.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-248289.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-248304.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-257423.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-271889.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-272124.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-289345.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-289381.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-290263.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-327014.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-349388.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-372651.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-372657.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-416088.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-416138.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-416208.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-437886.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-461872.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-549237.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-576802.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-583250.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-596590.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-599492.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-605048.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-622549.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-65536.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-674568.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-674577 (1).jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-674577.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-679855.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-680437.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-683205.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-689042.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-709482.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-720684.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-731553.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-731637.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-733105.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-736528.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-745241.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-749212.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-751050.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-89951.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-92174.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-94434.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-95328.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-1-6131.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-2-89-6.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-2-9117.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-22-983.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-23663-.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-4162-8.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-5768-2.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-68-437.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/6--x5--/pexels-photo-7331-5.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/_6--x5--/pexels-photo-116835.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/_6--x5--/pexels-photo-59659-.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/_6--x5--/pexels-photo-7331-5.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x25-/_6--x5--/pexels-photo-94434.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x6--/3--x6--/cat-7784.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x6--/3--x6--/cat-animal-animal-portrait-pet.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x6--/3--x6--/cat-feline-cute-domestic.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x6--/3--x6--/cat-kitten-rozkosne-little.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x6--/3--x6--/domestic-cat-cat-adidas-relaxed.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x6--/3--x6--/eyes-cats-cat-couch.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x6--/6--x12--/cat-7784.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x6--/6--x12--/cat-animal-animal-portrait-pet.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x6--/6--x12--/cat-feline-cute-domestic.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x6--/6--x12--/cat-kitten-rozkosne-little.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x6--/6--x12--/domestic-cat-cat-adidas-relaxed.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Cats/3--x6--/6--x12--/eyes-cats-cat-couch.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Cats/336x28-/336x28-/cat-7784.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Cats/336x28-/336x28-/cat-animal-animal-portrait-pet.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Cats/336x28-/336x28-/cat-feline-cute-domestic.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Cats/336x28-/336x28-/cat-kitten-rozkosne-little.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Cats/336x28-/336x28-/domestic-cat-cat-adidas-relaxed.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Cats/336x28-/336x28-/eyes-cats-cat-couch.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Cats/336x28-/672x56-/cat-7784.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Cats/336x28-/672x56-/cat-animal-animal-portrait-pet.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Cats/336x28-/672x56-/cat-feline-cute-domestic.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Cats/336x28-/672x56-/cat-kitten-rozkosne-little.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Cats/336x28-/672x56-/domestic-cat-cat-adidas-relaxed.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Cats/336x28-/672x56-/eyes-cats-cat-couch.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/468x6-/cat_468x6-_01.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/468x6-/cat_468x6-_02.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/468x6-/cat_468x6-_03.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/468x6-/cat_468x6-_04.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/468x6-/cat_468x6-_05.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/468x6-/-2.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/468x6-/-3.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/468x6-/-4.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/468x6-/-5.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/468x6-/cat_468x6-_-3.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/936x12-/cat_936x120_01.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/936x12-/cat_936x120_02.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/936x12-/cat_936x120_03.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/936x12-/cat_936x120_04.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/936x12-/cat_936x120_05.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/936x12-/cat_936x12-_-1.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Cats/468x6-/936x12-/-4.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/12--x5-/cat_1200x50_01.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/12--x5-/cat_1200x50_02.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/12--x5-/cat_1200x50_03.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/12--x5-/cat_1200x50_04.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/12--x5-/cat_1200x50_05.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/12--x5-/-1.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/12--x5-/-2.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/12--x5-/-3.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/12--x5-/cat_12--x5-_-3.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/12--x5-/cat_12--x5-_-5.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/24--x1--/cat_2400x100_01.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/24--x1--/cat_2400x100_02.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/24--x1--/cat_2400x100_03.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/24--x1--/cat_2400x100_04.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/24--x1--/cat_2400x100_05.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/24--x1--/-1.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/24--x1--/-2.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/24--x1--/cat_24--x1--_-2.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Cats/12--x5-/24--x1--/cat_24--x1--_-4.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/1-9-x43/ad_1090x43_01.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/1-9-x43/ad_1090x43_02.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/1-9-x43/ad_1090x43_03.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/1-9-x43/ad_1090x43_04.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/1-9-x43/ad_1090x43_05.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/1-9-x43/-3.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/1-9-x43/-4.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/1-9-x43/ad_1-9-x43_-5.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/218-x86/cat_2180x86_01.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/218-x86/cat_2180x86_02.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/218-x86/cat_2180x86_03.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/218-x86/cat_2180x86_04.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/218-x86/cat_2180x86_05.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/218-x86/-2.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/218-x86/-3.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/218-x86/-4.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/218-x86/-5.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/218-x86/cat_218-x86_-1.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Cats/1-9-x43/218-x86/cat_218-x86_-3.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/45-x62/cat_450x62_01.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/45-x62/cat_450x62_02.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/45-x62/cat_450x62_03.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/45-x62/cat_450x62_04.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/45-x62/cat_450x62_05.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/45-x62/-1.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/45-x62/-2.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/cat_900x124_01.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/cat_900x124_02.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/cat_900x124_03.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/cat_900x124_04.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/cat_900x124_05.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/-1.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/-2.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/-3.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/-4.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/-5.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/cat_9--x124_-1.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/cat_9--x124_-2.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/cat_9--x124_-3.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/cat_9--x124_-4.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Cats/45-x62/9--x124/cat_9--x124_-5.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/1440x90/cat_1440x90_01.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/1440x90/cat_1440x90_02.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/1440x90/cat_1440x90_03.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/1440x90/cat_1440x90_04.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/1440x90/cat_1440x90_05.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/2880x180/cat_2880x180_01.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/2880x180/cat_2880x180_02.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/2880x180/cat_2880x180_03.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/2880x180/cat_2880x180_04.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/2880x180/cat_2880x180_05.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/144-x9-/-1.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/144-x9-/-4.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/144-x9-/-5.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/144-x9-/cat_144-x9-_-1.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/144-x9-/cat_144-x9-_-2.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/144-x9-/cat_144-x9-_-3.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/144-x9-/cat_144-x9-_-4.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/144-x9-/cat_144-x9-_-5.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/288-x18-/-1.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/288-x18-/-2.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/288-x18-/-3.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/288-x18-/-4.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/288-x18-/-5.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/288-x18-/cat_288-x18-_-1.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/288-x18-/cat_288-x18-_-2.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/288-x18-/cat_288-x18-_-3.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/288-x18-/cat_288-x18-_-4.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/144-x9-/288-x18-/cat_288-x18-_-5.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x180_01.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x180_02.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x180_03.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x180_04.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x180_05.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x18-_01.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x18-_02.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x18-_03.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x18-_04.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x18-_05.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x18-_-3.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x18-_-4.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x18-_-6.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x18-_-7.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x18-_-8.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/1456x18-/cat_1456x18-_1-.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/728x9-/cat_728x90_01.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/728x9-/cat_728x90_02.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/728x9-/cat_728x90_03.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/728x9-/cat_728x90_04.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/728x9-/cat_728x90_05.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/728x9-/cat_728x9-_01.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/728x9-/cat_728x9-_02.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/728x9-/cat_728x9-_03.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/728x9-/cat_728x9-_04.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/728x9-/cat_728x9-_05.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/728x9-/cat_728x9-_-4.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/728x9-/728x9-/cat_728x9-_-1.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/34-x9-/Cats_34-x9-_01.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/34-x9-/Cats_34-x9-_02.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/34-x9-/Cats_34-x9-_03.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/34-x9-/Cats_34-x9-_04.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/34-x9-/Cats_34-x9-_05.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/68-x18-/Cats_68-x18-_01.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/68-x18-/Cats_68-x18-_02.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/68-x18-/Cats_68-x18-_03.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/68-x18-/Cats_68-x18-_04.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/68-x18-/Cats_68-x18-_05.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/68-x18-/Cats_68-x18-_-1.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/68-x18-/Cats_68-x18-_-2.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/68-x18-/Cats_68-x18-_-4.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/68-x18-/Cats_68-x18-_-5.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/68-x18-/Cats_68-x18-_-9.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/68-x18-/Cats_68-x18-_1-.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Cats/34-x9-/68-x18-/Cats_68-x18-_11.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Cats/16-x6--/32-x12--/cat-kitten-rozkosne-little.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Cats/16-x6--/32-x12--/cat-7784.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Cats/56-x672/112-x1344/pexels-photo-437886.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Cats/56-x672/112-x1344/pexels-photo-2-8845.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Cats/56-x672/112-x1344/pexels-photo-21--81.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Cats/56-x672/112-x1344/pexels-photo-22-983.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Cats/56-x672/56-x672/pexels-photo-22-97-.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Cats/56-x672/56-x672/pexels-photo-416138.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Cats/56-x672/56-x672/pexels-photo-59659-.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Cats/56-x672/56-x672/pexels-photo-731553.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Cats/56-x672/56-x672/pexels-photo-89951.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/cat-7784.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/cat-82-72.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/cat-feline-cute-domestic.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/domestic-cat-cat-adidas-relaxed.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-1-5587.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-1-6131.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-142615.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-17242-.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-1739-9.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-2-8845.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-2-886-.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-2-888-.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-2-89-6.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-2-89-7.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-2-9117.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-2-98--.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-22-826.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-22-876.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-22-951.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-22-983.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-244848.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-2483-4.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-416138.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-549237.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-59659-.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-599492.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-6-5-48.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-622549.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-674568.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-674577.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-679855.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-689-42.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-7-9482.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-7331-5.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-736528.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-745241.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/18-x68-/pexels-photo-749212.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/cat-7784.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/cat-82-72.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/cat-feline-cute-domestic.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/domestic-cat-cat-adidas-relaxed.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-1-5587.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-1-6131.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-142615.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-17242-.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-1739-9.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-2-8845.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-2-886-.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-2-888-.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-2-89-6.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-2-89-7.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-2-9117.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-2-98--.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-22-826.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-22-876.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-22-951.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-22-983.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-244848.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-2483-4.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-416138.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-549237.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-59659-.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-599492.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-6-5-48.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-622549.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-674568.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-674577.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-679855.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-689-42.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-7-9482.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-7331-5.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-736528.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-745241.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Cats/18-x68-/36-x136-/pexels-photo-749212.jpg"}]');
;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/cat-channel.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global   */





// Channel containing hard coded cats loaded from disk.
// Subclass of Channel.
class CatsChannel extends channel {
  getLatestListings(callback) {
    for (const cat of cats_namespaceObject) {
      this.listings.push(
        channel.listingFactory(
          cat.width,
          cat.height,
          cat.url,
          "This is a cat!",
          "catchannelswitchlabel",
        ),
      );
    }
    callback(this.listings);
  }
}
/* harmony default export */ const cat_channel = (CatsChannel);

;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/data/dogs.json
const dogs_namespaceObject = /*#__PURE__*/JSON.parse('[{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/12--x628/animal-dog-golden-retriever-9716.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/12--x628/animal-dog-pet-brown.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/12--x628/bordeaux-mastiff-dog-animal.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/12--x628/dalmatians-dog-animal-head.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/12--x628/dog-brown-snout-fur.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/12--x628/dog-cute-pet.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/12--x628/dog-young-dog-small-dog-maltese.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/12--x628/nature-animal-dog-pet.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/12--x628/night-animal-dog-pet.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/12--x628/night-garden-yellow-animal.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/12--x628/wall-animal-dog-pet.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/24--x1256/animal-dog-golden-retriever-9716.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/24--x1256/animal-dog-pet-brown.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/24--x1256/bordeaux-mastiff-dog-animal.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/24--x1256/dalmatians-dog-animal-head.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/24--x1256/dog-brown-snout-fur.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/24--x1256/dog-cute-pet.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/24--x1256/dog-young-dog-small-dog-maltese.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/24--x1256/nature-animal-dog-pet.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/24--x1256/night-animal-dog-pet.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/24--x1256/night-garden-yellow-animal.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/24--x1256/wall-animal-dog-pet.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/3--x25-/animal-dog-golden-retriever-9716.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/3--x25-/animal-dog-pet-brown.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/3--x25-/bordeaux-mastiff-dog-animal.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/3--x25-/dalmatians-dog-animal-head.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/3--x25-/dog-brown-snout-fur.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/3--x25-/dog-cute-pet.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/3--x25-/dog-young-dog-small-dog-maltese.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/3--x25-/nature-animal-dog-pet.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/3--x25-/night-animal-dog-pet.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/3--x25-/night-garden-yellow-animal.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/3--x25-/wall-animal-dog-pet.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/6--x5--/animal-dog-golden-retriever-9716.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/6--x5--/animal-dog-pet-brown.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/6--x5--/bordeaux-mastiff-dog-animal.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/6--x5--/dalmatians-dog-animal-head.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/6--x5--/dog-brown-snout-fur.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/6--x5--/dog-cute-pet.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/6--x5--/dog-young-dog-small-dog-maltese.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/6--x5--/nature-animal-dog-pet.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/6--x5--/night-animal-dog-pet.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/6--x5--/night-garden-yellow-animal.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/6--x5--/wall-animal-dog-pet.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/3--x6--/animal-dog-golden-retriever-9716.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/3--x6--/animal-dog-pet-brown.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/3--x6--/bordeaux-mastiff-dog-animal.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/3--x6--/dalmatians-dog-animal-head.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/3--x6--/dog-brown-snout-fur.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/3--x6--/dog-cute-pet.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/3--x6--/dog-young-dog-small-dog-maltese.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/3--x6--/nature-animal-dog-pet.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/3--x6--/night-animal-dog-pet.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/3--x6--/night-garden-yellow-animal.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/3--x6--/wall-animal-dog-pet.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/6--x12--/animal-dog-golden-retriever-9716.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/6--x12--/animal-dog-pet-brown.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/6--x12--/bordeaux-mastiff-dog-animal.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/6--x12--/dalmatians-dog-animal-head.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/6--x12--/dog-brown-snout-fur.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/6--x12--/dog-cute-pet.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/6--x12--/dog-young-dog-small-dog-maltese.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/6--x12--/nature-animal-dog-pet.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/6--x12--/night-animal-dog-pet.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/6--x12--/night-garden-yellow-animal.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/6--x12--/wall-animal-dog-pet.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/336x28-/animal-dog-golden-retriever-9716.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/336x28-/animal-dog-pet-brown.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/336x28-/bordeaux-mastiff-dog-animal.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/336x28-/dalmatians-dog-animal-head.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/336x28-/dog-brown-snout-fur.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/336x28-/dog-cute-pet.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/336x28-/dog-young-dog-small-dog-maltese.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/336x28-/nature-animal-dog-pet.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/336x28-/night-animal-dog-pet.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/336x28-/night-garden-yellow-animal.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/336x28-/wall-animal-dog-pet.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/672x56-/animal-dog-golden-retriever-9716.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/672x56-/animal-dog-pet-brown.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/672x56-/bordeaux-mastiff-dog-animal.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/672x56-/dalmatians-dog-animal-head.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/672x56-/dog-brown-snout-fur.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/672x56-/dog-cute-pet.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/672x56-/dog-young-dog-small-dog-maltese.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/672x56-/nature-animal-dog-pet.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/672x56-/night-animal-dog-pet.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/672x56-/night-garden-yellow-animal.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/672x56-/wall-animal-dog-pet.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/468x6-/dog_468x6-_01.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/468x6-/dog_468x6-_02.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/468x6-/dog_468x6-_03.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/468x6-/dog_468x6-_04.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/468x6-/dog_468x6-_05.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/468x6-/-3.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/468x6-/-4.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/468x6-/dog_468x6-_-2.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/468x6-/dog_468x6-_-4.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/dog_936x120_01.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/dog_936x120_02.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/dog_936x120_03.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/dog_936x120_04.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/dog_936x120_05.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/-1.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/-2.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/-3.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/-4.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/-5.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/dog_936x12-_-1.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/dog_936x12-_-2.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/dog_936x12-_-4.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Dogs/468x6-/936x12-/dog_936x12-_-5.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/45-x62/dog_450x62_01.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/45-x62/dog_450x62_02.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/45-x62/dog_450x62_03.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/45-x62/dog_450x62_04.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/45-x62/dog_450x62_05.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/45-x62/-4.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/45-x62/-5.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/45-x62/dog_45-x62_-1.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/dog_900x124_01.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/dog_900x124_02.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/dog_900x124_03.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/dog_900x124_04.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/dog_900x124_05.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/-1.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/-3.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/-4.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/-5.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/dog_9--x124_-1.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/dog_9--x124_-2.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/dog_9--x124_-3.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/dog_9--x124_-4.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Dogs/45-x62/9--x124/dog_9--x124_-5.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/1-9-x43/dog_1090x43_01.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/1-9-x43/dog_1090x43_02.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/1-9-x43/dog_1090x43_03.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/1-9-x43/dog_1090x43_04.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/1-9-x43/dog_1090x43_05.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/1-9-x43/-2.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/1-9-x43/-3.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/1-9-x43/dog_1-9-x43_-1.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/1-9-x43/dog_1-9-x43_-2.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/1-9-x43/dog_1-9-x43_-3.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/218-x86/dog_2180x86_01.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/218-x86/dog_2180x86_02.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/218-x86/dog_2180x86_03.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/218-x86/dog_2180x86_04.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/218-x86/dog_2180x86_05.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/218-x86/-1.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/218-x86/-2.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/218-x86/-3.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/218-x86/-5.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/218-x86/dog_218-x86_-2.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/218-x86/dog_218-x86_-3.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Dogs/1-9-x43/218-x86/dog_218-x86_-4.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/12--x5-/dog_1200x50_01.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/12--x5-/dog_1200x50_02.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/12--x5-/dog_1200x50_03.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/12--x5-/dog_1200x50_04.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/12--x5-/dog_1200x50_05.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/12--x5-/-2.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/12--x5-/dog_12--x5-_-2.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/12--x5-/dog_12--x5-_-3.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/24--x1--/dog_2400x100_01.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/24--x1--/dog_2400x100_02.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/24--x1--/dog_2400x100_03.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/24--x1--/dog_2400x100_04.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/24--x1--/dog_2400x100_05.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/24--x1--/-3.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/24--x1--/-4.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/24--x1--/dog_24--x1--_-1.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x5-/24--x1--/dog_24--x1--_-4.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/144-x9-/dog_1440x90_01.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/144-x9-/dog_1440x90_02.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/144-x9-/dog_1440x90_03.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/144-x9-/dog_1440x90_04.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/144-x9-/dog_1440x90_05.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/144-x9-/-5.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/144-x9-/dog_144-x9-_-2.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/288-x18-/dog_2880x180_01.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/288-x18-/dog_2880x180_02.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/288-x18-/dog_2880x180_03.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/288-x18-/dog_2880x180_04.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/288-x18-/dog_2880x180_05.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/288-x18-/-2.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/288-x18-/dog_288-x18-_-5.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/144-x9-/288-x18-/-5.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x180_01.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x180_02.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x180_03.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x180_04.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x180_05.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_01.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_02.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_03.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_04.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_05.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_-1.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_-2.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_-3.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_-4.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_-5.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_-6.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_-7.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_-8.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_-9.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_1-.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/1456x18-/Dog_1456x18-_11.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/728x9-/Dog_728x90_01.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/728x9-/Dog_728x90_02.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/728x9-/Dog_728x90_03.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/728x9-/Dog_728x90_04.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/728x9-/Dog_728x90_05.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/728x9-/Dog_728x9-_01.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/728x9-/Dog_728x9-_02.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/728x9-/Dog_728x9-_03.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/728x9-/Dog_728x9-_04.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/728x9-/Dog_728x9-_05.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/728x9-/Dog_728x9-_-2.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/728x9-/728x9-/Dog_728x9-_-4.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/34-x9-/Dogs_34-x9-_01.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/34-x9-/Dogs_34-x9-_02.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/34-x9-/Dogs_34-x9-_03.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/34-x9-/Dogs_34-x9-_04.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/34-x9-/Dogs_34-x9-_05.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/34-x9-/Dogs_34-x9-_-1.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/34-x9-/Dogs_34-x9-_-3.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/34-x9-/Dogs_34-x9-_-4.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/34-x9-/Dogs_34-x9-_-8.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/34-x9-/Dogs_34-x9-_-9.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/34-x9-/Dogs_34-x9-_1-.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_01.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_02.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_03.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_04.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_05.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_-1.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_-2.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_-4.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_-5.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_-6.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_-7.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_-9.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_1-.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Dogs/34-x9-/68-x18-/Dogs_68-x18-_11.jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/16-x6--/16-x6--/bordeaux-mastiff-dog-animal.jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/16-x6--/16-x6--/dog-cute-pet.jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/16-x6--/16-x6--/wall-animal-dog-pet.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/16-x6--/32-x12--/animal-dog-pet-brown.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/16-x6--/32-x12--/bordeaux-mastiff-dog-animal.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/16-x6--/32-x12--/dog-young-dog-small-dog-maltese.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/16-x6--/32-x12--/night-garden-yellow-animal.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Dogs/56-x672/56-x672/pexels-photo-97863.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Dogs/56-x672/56-x672/dog-animal-friend-pointer-16226-.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Dogs/56-x672/56-x672/pexels-photo-594687.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Dogs/56-x672/112-x1344/pexels-photo-113883.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Dogs/56-x672/112-x1344/pexels-photo-434-9-.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Dogs/56-x672/112-x1344/pexels-photo-46-186.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Dogs/56-x672/112-x1344/pexels-photo-58997.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/12--x628/pexels-photo-89249.png"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Dogs/12--x628/24--x1256/pexels-photo-89249.png"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/3--x25-/pexels-photo-89249.png"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x25-/6--x5--/pexels-photo-89249.png"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/3--x6--/pexels-photo-89249.png"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Dogs/3--x6--/6--x12--/pexels-photo-89249.png"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/336x28-/pexels-photo-89249.png"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Dogs/336x28-/672x56-/pexels-photo-89249.png"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Dogs/16-x6--/16-x6--/pexels-photo-89249.png"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/bordeaux-mastiff-dog-animal.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/dalmatians-dog-animal-head.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/dog-bernese-mountain-dog-berner-senner-dog-577-8.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/dog-bulldog-white-tongue-4-986.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/dog-cavalier-king-charles-spaniel-funny-pet-162193.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/dog-hybrid-animal-lying-162349.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/dog-young-dog-puppy-59965.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/dog-young-dog-small-dog-maltese.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/english-bulldog-bulldog-canine-dog-4-544.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/french-bulldog-summer-smile-joy-16-846.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/nature-animal-dog-pet.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/papillon-dog-animal-59969.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-13-763.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-134392.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-164446.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-169524.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-2358-5.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-247997.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-25757-.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-257577.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-271824.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-356378.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-3749-8.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-412465.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-4162-4.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-452772.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-46-132.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-46-823.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-485294.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-532423.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-58997.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-594687.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-612813.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-61372.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-66687-.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-688694.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-71-927.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-72-678.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-752383.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-8--33-.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/pexels-photo-9238-.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/tibet-terrier-cute-pet-dog-162276.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/wall-animal-dog-pet.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/weimaraner-puppy-dog-snout-97-82.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/wildlife-photography-pet-photography-dog-animal-159541.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/18-x68-/wildlife-photography-pet-photography-dog-dog-runs-159492.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/bordeaux-mastiff-dog-animal.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/dalmatians-dog-animal-head.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/dog-bernese-mountain-dog-berner-senner-dog-577-8.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/dog-bulldog-white-tongue-4-986.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/dog-cavalier-king-charles-spaniel-funny-pet-162193.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/dog-hybrid-animal-lying-162349.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/dog-young-dog-puppy-59965.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/dog-young-dog-small-dog-maltese.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/english-bulldog-bulldog-canine-dog-4-544.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/french-bulldog-summer-smile-joy-16-846.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/nature-animal-dog-pet.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/papillon-dog-animal-59969.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-13-763.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-134392.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-164446.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-169524.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-2358-5.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-247997.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-25757-.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-257577.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-271824.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-356378.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-3749-8.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-412465.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-4162-4.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-452772.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-46-132.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-46-823.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-485294.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-532423.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-58997.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-594687.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-612813.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-61372.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-66687-.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-688694.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-71-927.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-72-678.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-752383.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-8--33-.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/pexels-photo-9238-.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/tibet-terrier-cute-pet-dog-162276.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/wall-animal-dog-pet.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/weimaraner-puppy-dog-snout-97-82.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/wildlife-photography-pet-photography-dog-animal-159541.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Dogs/18-x68-/36-x136-/wildlife-photography-pet-photography-dog-dog-runs-159492.jpg"}]');
;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/dog-channel.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global */





// Channel containing hard coded dogs loaded from CDN
// Subclass of Channel.
class DogsChannel extends channel {
  getLatestListings(callback) {
    for (const dog of dogs_namespaceObject) {
      this.listings.push(
        channel.listingFactory(
          dog.width,
          dog.height,
          dog.url,
          "This is a dog!",
          "dogchannelswitchlabel",
        ),
      );
    }
    callback(this.listings);
  }
}
/* harmony default export */ const dog_channel = (DogsChannel);

;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/data/landscapes.json
const landscapes_namespaceObject = /*#__PURE__*/JSON.parse('[{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/12--x628/amazing-animal-beautiful-beautifull.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/12--x628/amazing-beautiful-beauty-blue.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/12--x628/antelope-canyon-lower-canyon-arizona.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/12--x628/delicate-arch-night-stars-landscape.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/12--x628/italian-landscape-mountains-nature.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/12--x628/pexels-photo (1).jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/12--x628/pexels-photo (2).jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/12--x628/pexels-photo.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/12--x628/road-sun-rays-path.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/12--x628/sunrise-phu-quoc-island-ocean.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/12--x628/sunset-field-poppy-sun-priroda.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/12--x628/switzerland-zermatt-mountains-snow.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/24--x1256/amazing-animal-beautiful-beautifull.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/24--x1256/amazing-beautiful-beauty-blue.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/24--x1256/antelope-canyon-lower-canyon-arizona.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/24--x1256/delicate-arch-night-stars-landscape.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/24--x1256/italian-landscape-mountains-nature.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/24--x1256/pexels-photo (1).jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/24--x1256/pexels-photo (2).jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/24--x1256/pexels-photo.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/24--x1256/road-sun-rays-path.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/24--x1256/sunrise-phu-quoc-island-ocean.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/24--x1256/sunset-field-poppy-sun-priroda.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x628/24--x1256/switzerland-zermatt-mountains-snow.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/3--x25-/amazing-animal-beautiful-beautifull.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/3--x25-/amazing-beautiful-beauty-blue.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/3--x25-/antelope-canyon-lower-canyon-arizona.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/3--x25-/delicate-arch-night-stars-landscape.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/3--x25-/italian-landscape-mountains-nature.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/3--x25-/pexels-photo (1).jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/3--x25-/pexels-photo (2).jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/3--x25-/pexels-photo.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/3--x25-/road-sun-rays-path.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/3--x25-/sunrise-phu-quoc-island-ocean.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/3--x25-/sunset-field-poppy-sun-priroda.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/3--x25-/switzerland-zermatt-mountains-snow.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/6--x5--/amazing-animal-beautiful-beautifull.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/6--x5--/amazing-beautiful-beauty-blue.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/6--x5--/antelope-canyon-lower-canyon-arizona.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/6--x5--/delicate-arch-night-stars-landscape.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/6--x5--/italian-landscape-mountains-nature.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/6--x5--/pexels-photo (1).jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/6--x5--/pexels-photo (2).jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/6--x5--/pexels-photo.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/6--x5--/road-sun-rays-path.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/6--x5--/sunrise-phu-quoc-island-ocean.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/6--x5--/sunset-field-poppy-sun-priroda.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x25-/6--x5--/switzerland-zermatt-mountains-snow.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/3--x6--/amazing-animal-beautiful-beautifull.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/3--x6--/amazing-beautiful-beauty-blue.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/3--x6--/antelope-canyon-lower-canyon-arizona.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/3--x6--/delicate-arch-night-stars-landscape.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/3--x6--/italian-landscape-mountains-nature.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/3--x6--/pexels-photo (1).jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/3--x6--/pexels-photo (2).jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/3--x6--/pexels-photo.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/3--x6--/road-sun-rays-path.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/3--x6--/sunrise-phu-quoc-island-ocean.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/3--x6--/sunset-field-poppy-sun-priroda.jpg"},{"width":300,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/3--x6--/switzerland-zermatt-mountains-snow.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/6--x12--/amazing-animal-beautiful-beautifull.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/6--x12--/amazing-beautiful-beauty-blue.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/6--x12--/antelope-canyon-lower-canyon-arizona.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/6--x12--/delicate-arch-night-stars-landscape.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/6--x12--/italian-landscape-mountains-nature.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/6--x12--/pexels-photo (1).jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/6--x12--/pexels-photo (2).jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/6--x12--/pexels-photo.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/6--x12--/road-sun-rays-path.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/6--x12--/sunrise-phu-quoc-island-ocean.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/6--x12--/sunset-field-poppy-sun-priroda.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/3--x6--/6--x12--/switzerland-zermatt-mountains-snow.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/336x28-/amazing-animal-beautiful-beautifull.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/336x28-/amazing-beautiful-beauty-blue.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/336x28-/antelope-canyon-lower-canyon-arizona.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/336x28-/delicate-arch-night-stars-landscape.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/336x28-/italian-landscape-mountains-nature.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/336x28-/pexels-photo (1).jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/336x28-/pexels-photo (2).jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/336x28-/pexels-photo.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/336x28-/road-sun-rays-path.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/336x28-/sunrise-phu-quoc-island-ocean.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/336x28-/sunset-field-poppy-sun-priroda.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/336x28-/switzerland-zermatt-mountains-snow.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/672x56-/amazing-animal-beautiful-beautifull.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/672x56-/amazing-beautiful-beauty-blue.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/672x56-/antelope-canyon-lower-canyon-arizona.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/672x56-/delicate-arch-night-stars-landscape.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/672x56-/italian-landscape-mountains-nature.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/672x56-/pexels-photo (1).jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/672x56-/pexels-photo (2).jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/672x56-/pexels-photo.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/672x56-/road-sun-rays-path.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/672x56-/sunrise-phu-quoc-island-ocean.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/672x56-/sunset-field-poppy-sun-priroda.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Landscapes/336x28-/672x56-/switzerland-zermatt-mountains-snow.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/1-9-x43/landscape_1090x43_01.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/1-9-x43/landscape_1090x43_02.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/1-9-x43/landscape_1090x43_03.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/1-9-x43/landscape_1090x43_04.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/1-9-x43/landscape_1090x43_05.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/1-9-x43/-2.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/1-9-x43/landscape_1-9-x43_-2.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/218-x86/landscape_2180x86_01.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/218-x86/landscape_2180x86_02.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/218-x86/landscape_2180x86_03.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/218-x86/landscape_2180x86_04.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/218-x86/landscape_2180x86_05.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/218-x86/landscape_218-x86_-1.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Landscapes/1-9-x43/218-x86/landscape_218-x86_-4.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/45-x62/landscape_450x62_01.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/45-x62/landscape_450x62_02.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/45-x62/landscape_450x62_03.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/45-x62/landscape_450x62_04.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/45-x62/landscape_450x62_05.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/45-x62/-3.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/45-x62/-4.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/45-x62/-5.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/45-x62/landscape_45-x62_-5.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/landscape_900x124_01.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/landscape_900x124_02.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/landscape_900x124_03.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/landscape_900x124_04.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/landscape_900x124_05.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/-1.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/-2.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/-3.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/-4.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/-5.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/landscape_9--x124_-2.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/landscape_9--x124_-3.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Landscapes/45-x62/9--x124/landscape_9--x124_-4.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/144-x9-/landscape_1440x90_01.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/144-x9-/landscape_1440x90_02.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/144-x9-/landscape_1440x90_03.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/144-x9-/landscape_1440x90_04.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/144-x9-/landscape_1440x90_05.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/144-x9-/-1.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/144-x9-/-2.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/144-x9-/-3.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/144-x9-/-5.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/144-x9-/landscape_144-x9-_-1.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/144-x9-/landscape_144-x9-_-3.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/288-x18-/landscape_2880x180_01.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/288-x18-/landscape_2880x180_02.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/288-x18-/landscape_2880x180_03.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/288-x18-/landscape_2880x180_04.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/288-x18-/landscape_2880x180_05.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/288-x18-/-3.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/288-x18-/landscape_288-x18-_-2.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/144-x9-/288-x18-/landscape_288-x18-_-5.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/landscape_1200x50_01.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/landscape_1200x50_02.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/landscape_1200x50_03.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/landscape_1200x50_04.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/landscape_1200x50_05.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/-1.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/-2.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/-3.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/-4.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/-5.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/landscape_12--x5-_-2.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/landscape_12--x5-_-3.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/landscape_12--x5-_-4.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/landscape_12--x5-_-5.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/12--x5-/landscape_12--x5-_-1.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/landscape_2400x100_01.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/landscape_2400x100_02.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/landscape_2400x100_03.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/landscape_2400x100_04.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/landscape_2400x100_05.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/-1.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/-2.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/-3.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/-4.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/-5.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/landscape_24--x1--_-1.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/landscape_24--x1--_-2.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/landscape_24--x1--_-3.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/landscape_24--x1--_-4.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Landscapes/12--x5-/24--x1--/landscape_24--x1--_-5.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/468x6-/landscape_468x6-_01.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/468x6-/landscape_468x6-_02.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/468x6-/landscape_468x6-_03.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/468x6-/landscape_468x6-_04.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/468x6-/landscape_468x6-_05.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/468x6-/-4.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/468x6-/landscape_468x6-_-4.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/936x12-/landscape_936x120_01.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/936x12-/landscape_936x120_02.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/936x12-/landscape_936x120_03.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/936x12-/landscape_936x120_04.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/936x12-/landscape_936x120_05.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/936x12-/-1.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Landscapes/468x6-/936x12-/landscape_936x12-_-3.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x180_01.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x180_02.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x180_03.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x180_04.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x180_05.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_01.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_02.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_03.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_04.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_05.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_-3.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_-4.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_-7.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_1-.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_11.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_12.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_15.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_17.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/1456x18-/Landscape_1456x18-_-2.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x90_01.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x90_02.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x90_03.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x90_04.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x90_05.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x9-_01.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x9-_02.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x9-_03.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x9-_04.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x9-_05.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x9-_-1.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x9-_-4.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/728x9-/728x9-/Landscape_728x9-_-5.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/34-x9-/Landscape_34-x9-_01.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/34-x9-/Landscape_34-x9-_02.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/34-x9-/Landscape_34-x9-_03.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/34-x9-/Landscape_34-x9-_04.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/34-x9-/Landscape_34-x9-_05.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/34-x9-/Landscape_34-x9-_-2.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/34-x9-/Landscape_34-x9-_-3.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/34-x9-/Landscape_34-x9-_-4.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/34-x9-/Landscape_34-x9-_1-.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/34-x9-/Landscape_34-x9-_11.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_01.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_02.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_03.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_04.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_05.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_-2.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_-3.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_-5.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_-6.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_-8.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_1-.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_11.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_12.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_14.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_15.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_16.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Landscapes/34-x9-/68-x18-/Landscape_68-x18-_17.jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/16-x6--/amazing-animal-beautiful-beautifull.jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/16-x6--/amazing-beautiful-beauty-blue.jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/16-x6--/antelope-canyon-lower-canyon-arizona.jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/16-x6--/delicate-arch-night-stars-landscape.jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/16-x6--/italian-landscape-mountains-nature.jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/16-x6--/pexels-photo (1).jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/16-x6--/pexels-photo (2).jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/16-x6--/road-sun-rays-path.jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/16-x6--/sunset-field-poppy-sun-priroda.jpg"},{"width":160,"height":600,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/16-x6--/switzerland-zermatt-mountains-snow.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/32-x12--/amazing-beautiful-beauty-blue.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/32-x12--/antelope-canyon-lower-canyon-arizona.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/32-x12--/italian-landscape-mountains-nature.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/32-x12--/pexels-photo (1).jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/32-x12--/pexels-photo (2).jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/32-x12--/road-sun-rays-path.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/32-x12--/sunrise-phu-quoc-island-ocean.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Landscapes/16-x6--/32-x12--/switzerland-zermatt-mountains-snow.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Landscapes/18-x68-/18-x68-/pexels-photo-414-83.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Landscapes/18-x68-/18-x68-/pexels-photo-351448.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Landscapes/18-x68-/36-x136-/amazing-animal-beautiful-beautifull.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Landscapes/18-x68-/36-x136-/pexels-photo-164196.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Landscapes/18-x68-/36-x136-/pexels-photo-189848.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Landscapes/18-x68-/36-x136-/pexels-photo-21-186.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Landscapes/18-x68-/36-x136-/pexels-photo-221148.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Landscapes/18-x68-/36-x136-/pexels-photo-388-65.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Landscapes/18-x68-/36-x136-/pexels-photo-443446.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Landscapes/56-x672/112-x1344/pexels-photo-355241.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Landscapes/56-x672/112-x1344/pexels-photo-552791.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Landscapes/56-x672/112-x1344/switzerland-zermatt-mountains-snow.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Landscapes/56-x672/56-x672/boat-house-cottage-waters-lake-65225.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Landscapes/56-x672/56-x672/pexels-photo (1).jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Landscapes/56-x672/56-x672/pexels-photo-117843.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Landscapes/56-x672/56-x672/pexels-photo-221148.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Landscapes/56-x672/56-x672/yellowstone-national-park-sunset-twilight-dusk-158489.jpg"}]');
;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/landscape-channel.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global  */





// Channel containing hard coded Landscapes loaded from CDN.
// Subclass of Channel.
class LandscapesChannel extends channel {
  getLatestListings(callback) {
    for (const landscape of landscapes_namespaceObject) {
      this.listings.push(
        channel.listingFactory(
          landscape.width,
          landscape.height,
          landscape.url,
          "This is a landscape!",
          "landscapechannelswitchlabel",
        ),
      );
    }
    callback(this.listings);
  }
}
/* harmony default export */ const landscape_channel = (LandscapesChannel);

;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/data/birds.json
const birds_namespaceObject = /*#__PURE__*/JSON.parse('[{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_000.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_001.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_002.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_003.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_004.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_005.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_006.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_007.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_008.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_009.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_010.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_011.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_012.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_013.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_014.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_015.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_016.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_017.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Birds/18-x68-/file_018.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_000.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_001.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_002.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_003.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_004.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_005.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_006.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_007.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_008.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_009.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_010.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_011.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_012.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_013.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_014.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_015.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_016.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_017.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_018.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_019.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_020.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_021.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_022.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_023.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_024.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_025.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_026.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_027.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_028.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_029.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_030.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_031.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_032.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_033.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_034.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_035.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_036.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_037.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_038.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_039.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_040.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_041.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_042.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_043.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_044.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_045.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_046.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_047.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_048.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_049.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_050.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_051.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_052.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_053.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_054.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_055.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_056.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_057.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_058.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_059.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_060.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_061.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_062.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_063.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_064.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_065.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_066.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_067.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_068.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_069.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_070.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_071.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_072.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_073.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_074.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_075.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_076.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_077.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_078.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_079.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_080.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_081.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_082.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_083.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_084.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_085.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_086.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_087.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_088.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_089.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_090.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_091.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_092.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_093.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_094.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_095.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_096.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_097.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/24--x1256/file_098.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_000.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_001.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_002.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_003.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_004.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_005.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_006.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_007.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_008.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_009.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_010.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_011.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_012.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_013.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_014.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_015.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_016.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_017.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_018.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_019.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_020.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_021.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_022.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_023.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_024.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_025.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_026.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_027.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_028.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_029.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_030.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_031.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_032.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_033.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_034.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_035.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_036.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_037.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_038.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_039.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_040.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_041.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_042.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_043.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_044.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_045.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_046.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_047.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_048.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_049.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_050.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_051.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_052.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_053.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_054.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_055.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_056.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_057.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_058.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_059.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_060.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_061.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_062.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_063.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_064.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_065.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_066.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_067.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_068.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_069.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_070.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_071.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_072.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_073.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_074.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_075.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_076.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_077.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_078.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_079.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_080.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_081.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_082.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_083.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_084.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_085.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_086.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_087.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_088.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_089.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_090.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_091.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_092.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_093.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_094.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_095.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_096.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_097.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Birds/3--x25-/file_098.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_000.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_001.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_002.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_003.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_004.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_005.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_006.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_007.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_008.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_009.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_010.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_011.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_012.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_013.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_014.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_015.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_016.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_017.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_018.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_019.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_020.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_021.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_022.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_023.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_024.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_025.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_026.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_027.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_028.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_029.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_030.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_031.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_032.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_033.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_034.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_035.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_036.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_037.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_038.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_039.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_040.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_041.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_042.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_043.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_044.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_045.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_046.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_047.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_048.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_049.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_050.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_051.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_052.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_053.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_054.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_055.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_056.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_057.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_058.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_059.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_060.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_061.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_062.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_063.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_064.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_065.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_066.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_067.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_068.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_069.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_070.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_071.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_072.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_073.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_074.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_075.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_076.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_077.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_078.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_079.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_080.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_081.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_082.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_083.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_084.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_085.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_086.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_087.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_088.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_089.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_090.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_091.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_092.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_093.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_094.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_095.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_096.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_097.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Birds/336x28-/file_098.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_000.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_001.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_002.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_003.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_004.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_005.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_006.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_007.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_008.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_009.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_010.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_011.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_012.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_013.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_014.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_015.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_016.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_017.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_018.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_019.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_020.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_021.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_022.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_023.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Birds/36-x136-/file_024.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_000.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_001.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_002.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_003.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_004.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_005.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_006.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_007.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_008.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_009.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_010.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_011.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_012.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_013.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_014.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_015.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_016.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_017.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_018.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_019.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_020.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_021.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_022.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_023.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_024.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_025.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_026.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_027.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_028.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_029.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_030.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_031.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_032.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_033.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_034.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_035.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_036.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_037.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_038.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_039.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_040.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_041.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_042.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_043.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_044.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_045.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_046.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_047.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_048.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_049.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_050.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_051.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_052.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_053.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_054.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_055.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_056.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_057.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_058.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_059.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_060.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_061.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_062.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_063.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_064.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_065.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_066.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_067.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_068.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_069.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Birds/6--x5--/file_070.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Birds/random/file_000.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Birds/random/file_001.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Birds/random/file_002.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Birds/random/file_003.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Birds/random/file_004.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Birds/random/file_005.jpg"}]');
;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/birds-channel.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global  */





// Channel containing hard coded birds loaded from disk.
// Subclass of Channel.
class BirdChannel extends channel {
  getLatestListings(callback) {
    for (const bird of birds_namespaceObject) {
      this.listings.push(
        channel.listingFactory(
          bird.width,
          bird.height,
          bird.url,
          "This is a bird!",
          "birdchannelswitchlabel",
        ),
      );
    }
    callback(this.listings);
  }
}
/* harmony default export */ const birds_channel = (BirdChannel);

;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/data/food.json
const food_namespaceObject = /*#__PURE__*/JSON.parse('[{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_000.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_001.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_002.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_003.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_004.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_005.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_006.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_007.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_008.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_009.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_010.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_011.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_012.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_013.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_014.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_015.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_016.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_017.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_018.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_019.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_020.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_021.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_022.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_023.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_024.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_025.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_026.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_027.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_028.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_029.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_030.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_031.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_032.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_033.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_034.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_035.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_036.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_037.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_038.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_039.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_040.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_041.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_042.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_043.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_044.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_045.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_046.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_047.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_048.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_049.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_050.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_051.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_052.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_053.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_054.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_055.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_056.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_057.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_058.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_059.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_060.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_061.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_062.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_063.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_064.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_065.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_066.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_067.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_068.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_069.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_070.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_071.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_072.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_073.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_074.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_075.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_076.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_077.jpg"},{"width":"180","height":" 680","url":"https://cdn.adblockcdn.com/pix/Food/18-x68-/file_078.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_000.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_001.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_002.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_003.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_004.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_005.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_006.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_007.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_008.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_009.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_010.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_011.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_012.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_013.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_014.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_015.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_016.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_017.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_018.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_019.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_020.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_021.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_022.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_023.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_024.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_025.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_026.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_027.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_028.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_029.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_030.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_031.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_032.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_033.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_034.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_035.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_036.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_037.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_038.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_039.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_040.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_041.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_042.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_043.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_044.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_045.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_046.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_047.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_048.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_049.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_050.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_051.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_052.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_053.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_054.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_055.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_056.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_057.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_058.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_059.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_060.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_061.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_062.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_063.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_064.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_065.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_066.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_067.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_068.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_069.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_070.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_071.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_072.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_073.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_074.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_075.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_076.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_077.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_078.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_079.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_080.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_081.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_082.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_083.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_084.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_085.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_086.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_087.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_088.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_089.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_090.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_091.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_092.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_093.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_094.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_095.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_096.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_097.jpg"},{"width":"2400","height":" 1256","url":"https://cdn.adblockcdn.com/pix/Food/24--x1256/file_098.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_000.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_001.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_002.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_003.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_004.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_005.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_006.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_007.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_008.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_009.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_010.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_011.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_012.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_013.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_014.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_015.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_016.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_017.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_018.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_019.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_020.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_021.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_022.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_023.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_024.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_025.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_026.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_027.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_028.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_029.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_030.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_031.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_032.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_033.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_034.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_035.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_036.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_037.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_038.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_039.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_040.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_041.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_042.jpg"},{"width":"300","height":" 250","url":"https://cdn.adblockcdn.com/pix/Food/3--x25-/file_043.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_000.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_001.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_002.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_003.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_004.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_005.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_006.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_007.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_008.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_009.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_010.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_011.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_012.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_013.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_014.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_015.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_016.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_017.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_018.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_019.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_020.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_021.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_022.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_023.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_024.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_025.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_026.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_027.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_028.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_029.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_030.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_031.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_032.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_033.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_034.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_035.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_036.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_037.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_038.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_039.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_040.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_041.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_042.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_043.jpg"},{"width":"336","height":" 280","url":"https://cdn.adblockcdn.com/pix/Food/336x28-/file_044.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_000.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_001.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_002.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_003.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_004.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_005.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_006.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_007.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_008.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_009.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_010.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_011.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_012.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_013.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_014.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_015.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_016.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_017.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_018.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_019.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_020.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_021.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_022.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_023.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_024.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_025.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_026.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_027.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_028.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_029.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_030.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_031.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_032.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_033.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_034.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_035.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_036.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_037.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_038.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_039.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_040.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_041.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_042.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_043.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_044.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_045.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_046.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_047.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_048.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_049.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_050.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_051.jpg"},{"width":"360","height":" 1360","url":"https://cdn.adblockcdn.com/pix/Food/36-x136-/file_052.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_000.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_001.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_002.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_003.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_004.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_005.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_006.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_007.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_008.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_009.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_010.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_011.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_012.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_013.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_014.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_015.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_016.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_017.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_018.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_019.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_020.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_021.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_022.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_023.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_024.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_025.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_026.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_027.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_028.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_029.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_030.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_031.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_032.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_033.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_034.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_035.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_036.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_037.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_038.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_039.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_040.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_041.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_042.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_043.jpg"},{"width":"600","height":" 500","url":"https://cdn.adblockcdn.com/pix/Food/6--x5--/file_044.jpg"},{"width":"1120","height":" 1344","url":"https://cdn.adblockcdn.com/pix/Food/random/112-x1344.jpg"},{"width":"1200","height":" 678","url":"https://cdn.adblockcdn.com/pix/Food/random/12--x678.jpg"},{"width":"320","height":" 1200","url":"https://cdn.adblockcdn.com/pix/Food/random/32-x12--.jpg"},{"width":"570","height":" 672","url":"https://cdn.adblockcdn.com/pix/Food/random/57-x672.jpg"},{"width":"600","height":" 1200","url":"https://cdn.adblockcdn.com/pix/Food/random/6--x12--.jpg"},{"width":"672 560","height":"https://cdn.adblockcdn.com/pix/Food/random/672x56-.jpg","url":""},{"width":"680","height":" 180","url":"https://cdn.adblockcdn.com/pix/Food/random/68-x18-.jpg"}]');
;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/food-channel.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global */





// Channel containing hard coded cats loaded from disk.
// Subclass of Channel.
class FoodChannel extends channel {
  getLatestListings(callback) {
    for (const food of food_namespaceObject) {
      this.listings.push(
        channel.listingFactory(
          food.width,
          food.height,
          food.url,
          "This is food!",
          "foodchannelswitchlabel",
        ),
      );
    }
    callback(this.listings);
  }
}
/* harmony default export */ const food_channel = (FoodChannel);

;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/data/goats.json
const goats_namespaceObject = /*#__PURE__*/JSON.parse('[{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Goats/18-x68-/file_000.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Goats/18-x68-/file_001.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Goats/18-x68-/file_002.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Goats/18-x68-/file_003.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Goats/18-x68-/file_004.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Goats/18-x68-/file_005.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Goats/18-x68-/file_006.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Goats/18-x68-/file_007.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Goats/18-x68-/file_008.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Goats/18-x68-/file_009.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_000.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_001.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_002.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_003.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_004.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_005.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_006.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_007.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_008.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_009.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_010.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_011.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_012.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_013.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_014.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_015.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_016.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_017.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_018.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_019.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_020.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_021.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_022.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_023.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Goats/24--x1256/file_024.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_000.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_001.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_002.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_003.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_004.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_005.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_006.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_007.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_008.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_009.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_010.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_011.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_012.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_013.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_014.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_015.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_016.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_017.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_018.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_019.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_020.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_021.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_022.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_023.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Goats/3--x25-/file_024.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_000.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_001.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_002.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_003.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_004.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_005.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_006.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_007.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_008.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_009.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_010.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_011.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_012.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_013.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_014.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_015.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_016.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_017.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_018.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_019.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_020.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_021.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_022.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_023.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Goats/336x28-/file_024.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Goats/36-x136-/file_000.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Goats/36-x136-/file_001.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Goats/36-x136-/file_002.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Goats/36-x136-/file_003.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Goats/36-x136-/file_004.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Goats/36-x136-/file_005.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Goats/36-x136-/file_006.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Goats/36-x136-/file_007.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Goats/36-x136-/file_008.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Goats/36-x136-/file_009.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_000.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_001.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_002.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_003.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_004.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_005.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_006.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_007.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_008.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_009.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_010.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_011.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_012.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_013.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_014.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_015.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_016.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_017.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_018.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_019.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_020.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_021.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Goats/6--x5--/file_022.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Goats/file_000.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Goats/file_001.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Goats/file_002.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Goats/file_003.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Goats/file_004.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Goats/file_005.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Goats/file_006.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Goats/file_007.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Goats/file_008.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Goats/file_009.jpg"}]');
;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/goat-channel.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global  */





// Channel containing hard coded cats loaded from disk.
// Subclass of Channel.
class GoatsChannel extends channel {
  getLatestListings(callback) {
    for (const goat of goats_namespaceObject) {
      this.listings.push(
        channel.listingFactory(
          goat.width,
          goat.height,
          goat.url,
          "This is a goat!",
          "goatchannelswitchlabel",
        ),
      );
    }
    callback(this.listings);
  }
}
/* harmony default export */ const goat_channel = (GoatsChannel);

;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/data/ocean.json
const ocean_namespaceObject = /*#__PURE__*/JSON.parse('[{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_000.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_001.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_002.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_003.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_004.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_005.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_006.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_007.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_008.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_009.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_010.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_011.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_012.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_013.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_014.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_015.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_016.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_017.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_018.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_019.jpg"},{"width":180,"height":680,"url":"https://cdn.adblockcdn.com/pix/Oceans/18-x68-/file_020.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_000.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_001.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_002.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_003.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_004.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_005.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_006.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_007.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_008.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_009.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_010.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_011.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_012.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_013.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_014.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_015.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_016.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_017.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_018.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_019.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_020.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_021.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_022.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_023.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_024.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_025.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_026.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_027.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_028.jpg"},{"width":2400,"height":1256,"url":"https://cdn.adblockcdn.com/pix/Oceans/24--x1256/file_029.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_000.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_001.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_002.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_003.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_004.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_005.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_006.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_007.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_008.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_009.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_010.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_011.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_012.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_013.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_014.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_015.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_016.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_017.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_018.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_019.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_020.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_021.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_022.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_023.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_024.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_025.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_026.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_027.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_028.jpg"},{"width":300,"height":250,"url":"https://cdn.adblockcdn.com/pix/Oceans/3--x25-/file_029.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_000.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_001.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_002.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_003.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_004.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_005.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_006.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_007.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_008.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_009.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_010.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_011.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_012.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_013.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_014.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_015.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_016.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_017.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_018.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_019.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_020.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_021.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_022.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_023.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_024.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_025.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_026.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_027.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_028.jpg"},{"width":336,"height":280,"url":"https://cdn.adblockcdn.com/pix/Oceans/336x28-/file_029.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_000.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_001.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_002.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_003.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_004.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_005.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_006.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_007.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_008.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_009.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_010.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_011.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_012.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_013.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_014.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_015.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_016.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_017.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_018.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_019.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_020.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_021.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_022.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_023.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_024.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_025.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_026.jpg"},{"width":360,"height":1360,"url":"https://cdn.adblockcdn.com/pix/Oceans/36-x136-/file_027.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_000.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_001.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_002.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_003.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_004.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_005.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_006.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_007.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_008.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_009.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_010.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_011.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_012.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_013.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_014.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_015.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_016.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_017.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_018.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_019.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_020.jpg"},{"width":600,"height":500,"url":"https://cdn.adblockcdn.com/pix/Oceans/6--x5--/file_021.jpg"},{"width":1200,"height":628,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_000.jpg"},{"width":600,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_001.jpg"},{"width":672,"height":560,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_002.jpg"},{"width":468,"height":60,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_003.jpg"},{"width":936,"height":120,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_004.jpg"},{"width":1200,"height":50,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_005.jpg"},{"width":2400,"height":100,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_006.jpg"},{"width":1090,"height":43,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_007.jpg"},{"width":2180,"height":86,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_008.jpg"},{"width":450,"height":62,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_009.jpg"},{"width":900,"height":124,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_010.jpg"},{"width":1440,"height":90,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_011.jpg"},{"width":2880,"height":180,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_012.jpg"},{"width":1456,"height":180,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_013.jpg"},{"width":728,"height":90,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_014.jpg"},{"width":340,"height":90,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_015.jpg"},{"width":680,"height":180,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_016.jpg"},{"width":320,"height":1200,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_017.jpg"},{"width":1120,"height":1344,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_018.jpg"},{"width":560,"height":672,"url":"https://cdn.adblockcdn.com/pix/Oceans/random/file_019.jpg"}]');
;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/ocean-channel.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global */





// Channel containing hard coded cats loaded from disk.
// Subclass of Channel.
class OceanChannel extends channel {
  getLatestListings(callback) {
    for (const ocean of ocean_namespaceObject) {
      this.listings.push(
        channel.listingFactory(
          ocean.width,
          ocean.height,
          ocean.url,
          "This is a ocean!",
          "oceanchannelswitchlabel",
        ),
      );
    }
    callback(this.listings);
  }
}
/* harmony default export */ const ocean_channel = (OceanChannel);

;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/unknown-channel.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global  */



// Empty Channel
// Subclass of Channel.
//
// Allows the Sync process to create an new named Channel
// when the sync process recieves a request with a unknown channel name
class UnknownChannel extends channel {
  // eslint-disable-next-line class-methods-use-this
  getLatestListings(callback) {
    callback([]);
  }
}
/* harmony default export */ const unknown_channel = (UnknownChannel);

// EXTERNAL MODULE: ./adblock-betafish/utilities/background/bg-functions.js
var bg_functions = __webpack_require__(7656);
;// CONCATENATED MODULE: ./adblock-betafish/picreplacement/channels.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global settings, getSettings, browser */

















const resourceTypes = new Map();
for (const type in contentTypes/* contentTypes */.fE) {
  resourceTypes.set(type.toLowerCase(), contentTypes/* contentTypes */.fE[type]);
}
resourceTypes.set("sub_frame", contentTypes/* contentTypes */.fE.SUBDOCUMENT);
resourceTypes.set("beacon", contentTypes/* contentTypes */.fE.PING);
resourceTypes.set("imageset", contentTypes/* contentTypes */.fE.IMAGE);
resourceTypes.set("object_subrequest", contentTypes/* contentTypes */.fE.OBJECT);
resourceTypes.set("main_frame", contentTypes/* contentTypes */.fE.DOCUMENT);

const typeSelectors = new Map([
  [contentTypes/* contentTypes */.fE.IMAGE, "img,input"],
  [contentTypes/* contentTypes */.fE.MEDIA, "audio,video"],
  [contentTypes/* contentTypes */.fE.SUBDOCUMENT, "frame,iframe,object,embed"],
  [contentTypes/* contentTypes */.fE.OBJECT, "object,embed"],
]);

const REPORTING_OPTIONS = {
  filterType: "blocking",
  includeElementHiding: false,
};

const channelsKey = "channels";

const subscription1 = subscriptionadapter/* default */.A.getUrlFromId("antisocial");
const subscription2 = subscriptionadapter/* default */.A.getUrlFromId("annoyances");

const channelObjects = {
  CustomChannel: custom_channel,
  CatsChannel: cat_channel,
  DogsChannel: dog_channel,
  LandscapesChannel: landscape_channel,
  BirdChannel: birds_channel,
  FoodChannel: food_channel,
  GoatsChannel: goat_channel,
  OceanChannel: ocean_channel,
  UnknownChannel: unknown_channel,
};

const channelsNotifier = new events/* EventEmitter */.b();

// Contains and provides access to all the photo channels.
class Channels {
  constructor(license) {
    this.license = license;
    this.channelGuide = undefined; // maps channel ids to channels and metadata
    this.loadFromStorage();
    this.initializeListeners();
  }

  // Inputs:
  //   name:string - a Channel class name.
  //   param:object - the single ctor parameter to the Channel class.
  //   enabled:bool - true if this channel is to be used for pictures.
  // Returns:
  //   id of newly created channel, or undefined if the channel already existed.
  add(data) {
    let Klass = channelObjects[data.name];
    if (!Klass) {
      Klass = channelObjects.UnknownChannel;
    }
    const dataParam = JSON.stringify(data.param);
    for (const id in this.channelGuide) {
      const c = this.channelGuide[id];
      if (c.name === data.name && JSON.stringify(c.param) === dataParam) {
        return undefined;
      }
    }
    const id = Math.floor(Math.random() * Date.now());
    const channel = new Klass(data.param);
    this.channelGuide[id] = {
      name: data.name,
      param: data.param,
      enabled: data.enabled,
      channel,
    };
    this.saveToStorage();
    channel.refresh();
    return id;
  }

  remove(channelId) {
    delete this.channelGuide[channelId];
    this.saveToStorage();
  }

  // Return read-only map from each channel ID to
  // { name, param, enabled }.
  getGuide() {
    const results = {};
    for (const id in this.channelGuide) {
      const c = this.channelGuide[id];
      results[id] = {
        name: c.name,
        param: c.param,
        enabled: c.enabled,
      };
    }

    return results;
  }

  // Return id for channel name
  getIdByName(name) {
    for (const id in this.channelGuide) {
      if (this.channelGuide[id].name === name) {
        return id;
      }
    }
    return undefined;
  }

  isCustomChannel(id) {
    return this.getIdByName("CustomChannel") === id;
  }

  isCustomChannelEnabled() {
    return this.channelGuide[this.getIdByName("CustomChannel")].enabled;
  }

  getListings(id) {
    return this.channelGuide[id].channel.getListings();
  }

  setEnabled(id, enabled) {
    const originalValue = this.channelGuide[id].enabled;
    this.channelGuide[id].enabled = enabled;
    this.saveToStorage();
    if (originalValue !== enabled) {
      channelsNotifier.emit("channels.changed", id, enabled, originalValue);
    }
  }

  refreshAllEnabled() {
    for (const id in this.channelGuide) {
      const data = this.channelGuide[id];
      if (data.enabled) {
        data.channel.refresh();
      }
    }
  }

  isAnyEnabled() {
    for (const id in this.channelGuide) {
      const channel = this.channelGuide[id];
      if (channel.enabled) {
        return true;
      }
    }
    return false;
  }

  disableAllChannels() {
    for (const id in this.channelGuide) {
      if (this.channelGuide[id].enabled) {
        this.channelGuide[id].enabled = false;
        channelsNotifier.emit("channels.changed", id, false, true);
      }
    }
  }

  // Returns a random Listing from all enabled channels or from channel
  // |channelId| if specified, trying to match the ratio of |width| and
  // |height| decently.  Returns undefined if there are no enabled channels.
  randomListing(opts) {
    if (!getSettings().picreplacement) {
      return undefined;
    }
    // if the element to be replace is 'fixed' in position, it may make for bad pic
    // replacement element.
    if (opts.position === "fixed") {
      for (const sub of subscriptionadapter/* default */.A.getSubscriptionsMinusText()) {
        if (sub.url === subscription1 || sub.url === subscription2) {
          return undefined;
        }
      }
    }

    const heightLowRange = opts.height;
    const widthLowRange = opts.width;
    const heightHighRange = opts.height * 1.25;
    const widthHighRange = opts.width * 1.25;
    const typeMatchListings = [];
    const rangeLimitedListings = [];
    let targetRatio = Math.max(opts.width, opts.height) / Math.min(opts.width, opts.height);

    for (const id in this.channelGuide) {
      const data = this.channelGuide[id];
      if (opts.channelId === id || (data.enabled && !opts.channelId)) {
        data.channel.getListings().forEach((element) => {
          if (
            (opts.type === WIDE || opts.type === SKINNYWIDE) &&
            element.type !== SKINNYTALL &&
            element.width <= widthHighRange &&
            element.height >= heightLowRange &&
            element.height <= heightHighRange
          ) {
            rangeLimitedListings.push(element);
          } else if (
            (opts.type === TALL || opts.type === SKINNYTALL) &&
            element.type !== SKINNYWIDE &&
            element.width >= widthLowRange &&
            element.width <= widthHighRange &&
            element.height <= heightHighRange
          ) {
            rangeLimitedListings.push(element);
          } else if (
            opts.type !== WIDE &&
            opts.type !== TALL &&
            opts.type !== SKINNYTALL &&
            opts.type !== SKINNYWIDE &&
            element.width >= widthLowRange &&
            element.width <= widthHighRange &&
            element.height >= heightLowRange &&
            element.height <= heightHighRange
          ) {
            rangeLimitedListings.push(element);
          }
          if (
            opts.type === element.type &&
            element.width >= widthLowRange &&
            element.height >= heightLowRange
          ) {
            typeMatchListings.push(element);
          }
        });
      }
    }
    let exactTypeMatchListings = [];
    if (rangeLimitedListings.length > 0) {
      const randomIndex = Math.floor(Math.random() * rangeLimitedListings.length);
      const theListing = Object.assign({}, rangeLimitedListings[randomIndex]);
      theListing.listingHeight = theListing.height;
      theListing.listingWidth = theListing.width;
      if (opts.height !== theListing.height && opts.width !== theListing.width) {
        theListing.height = (theListing.height * opts.width) / theListing.width;
        theListing.width = opts.width;
      }
      return theListing;
    }
    let bestMatchRatio = 0;
    targetRatio = Math.max(opts.width, opts.height) / Math.min(opts.width, opts.height);
    typeMatchListings.forEach((listing) => {
      if (Math.abs(listing.ratio - targetRatio) < Math.abs(bestMatchRatio - targetRatio)) {
        exactTypeMatchListings = []; // remove previous matches
        exactTypeMatchListings.push(listing);
        bestMatchRatio = listing.ratio;
      } else if (listing.ratio === bestMatchRatio) {
        exactTypeMatchListings.push(listing);
      }
    });
    if (exactTypeMatchListings.length > 0) {
      const randomIndex = Math.floor(Math.random() * exactTypeMatchListings.length);
      const theListing = Object.assign({}, exactTypeMatchListings[randomIndex]);
      theListing.listingHeight = theListing.height;
      theListing.listingWidth = theListing.width;
      return theListing;
    }

    return undefined;
  }

  // adds any new or missing channels (in a disabled state) to the users channel guide
  addNewChannels() {
    const channelNames = [
      "DogsChannel",
      "CatsChannel",
      "LandscapesChannel",
      "OceanChannel",
      "GoatsChannel",
      "BirdChannel",
      "FoodChannel",
      "CustomChannel",
    ];
    for (const name of channelNames) {
      if (!this.getIdByName(name)) {
        this.add({
          name,
          param: undefined,
          enabled: false,
        });
      }
    }
  }

  loadFromStorage() {
    (0,bg_functions/* migrateData */.YK)(channelsKey, true).then(() => {
      (0,bg_functions/* chromeStorageGetHelper */.s3)(channelsKey).then((response) => {
        this.channelGuide = {};
        const savedData = response || [];
        for (let i = 0; i < savedData.length; i++) {
          this.add(savedData[i]);
        }
        this.addNewChannels();
      });
    });
  }

  saveToStorage() {
    const toStore = [];
    const guide = this.getGuide();
    for (const id in guide) {
      toStore.push(guide[id]);
    }
    (0,bg_functions/* chromeStorageSetHelper */.AX)(channelsKey, toStore);
  }

  static getContentType(details) {
    return resourceTypes.get(details.type) || contentTypes/* contentTypes */.fE.OTHER;
  }

  static getFrameId(details) {
    return details.type === "sub_frame" ? details.parentFrameId : details.frameId;
  }

  // Ignore EasyPrivacy rules, since they can cause issue with odd image swaps
  static async shouldUseFilter(filter) {
    if (!filter) {
      return false;
    }
    const subscriptions = await ewe_api.subscriptions.getForFilter(filter);
    const isEasyPrivacy = subscriptions.filter(
      (subscription) => subscription.title === "EasyPrivacy",
    );
    return isEasyPrivacy && isEasyPrivacy.length === 0;
  }

  async filterListener({ request, filter }) {
    if (getSettings().picreplacement && this.license.isActiveLicense()) {
      const shouldUseFilter = await Channels.shouldUseFilter(filter);
      if (!shouldUseFilter) {
        return;
      }
      if (
        request &&
        request.tabId &&
        request.tabId !== browser.tabs.TAB_ID_NONE &&
        filter &&
        filter.type === "elemhide" &&
        filter.selector &&
        filter.enabled
      ) {
        const msgDetail = { hidingSelector: filter.selector, command: "addSelector" };
        browser.tabs.sendMessage(request.tabId, msgDetail, { frameId: request.frameId });
      } else if (
        request &&
        request.tabId &&
        request.tabId !== browser.tabs.TAB_ID_NONE &&
        filter &&
        filter.type === "blocking" &&
        filter.enabled
      ) {
        const selector = typeSelectors.get(Channels.getContentType(request));
        const frameId = Channels.getFrameId(request);
        const msg = { selector, command: "addBlockingSelector", url: request.url };
        browser.tabs.sendMessage(request.tabId, msg, { frameId });
      }
    } else if (!getSettings().picreplacement) {
      ewe_api.reporting.onBlockableItem.removeListener(this.filterListener, REPORTING_OPTIONS);
    }
  }

  initializeListeners() {
    this.license.ready().then(() => {
      settings.onload().then(() => {
        if (getSettings().picreplacement && this.license.isActiveLicense()) {
          ewe_api.reporting.onBlockableItem.removeListener(this.filterListener, REPORTING_OPTIONS);
          ewe_api.reporting.onBlockableItem.addListener(
            this.filterListener.bind(this),
            REPORTING_OPTIONS,
          );
        }
      });
    });
  }
}


/***/ }),

/***/ 4770:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BM: () => (/* binding */ channels),
/* harmony export */   bv: () => (/* binding */ replacedCounts),
/* harmony export */   u8: () => (/* binding */ License)
/* harmony export */ });
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_events__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(866);
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_storage_tab_session__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1583);
/* harmony import */ var _id_background_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7099);
/* harmony import */ var _channels__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8690);
/* harmony import */ var _prefs_background__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2644);
/* harmony import */ var _alias_icon__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(4761);
/* harmony import */ var _alias_prefs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(2680);
/* harmony import */ var _alias_subscriptionInit__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(7802);
/* harmony import */ var _servermessages__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(5754);
/* harmony import */ var _subscriptionadapter__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(6396);
/* harmony import */ var _fetch_util__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(5410);
/* harmony import */ var _utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(7656);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser */

// Yes, you could hack my code to not check the license.  But please don't.
// Paying for this extension supports the work on AdBlock.  Thanks very much.

















const licenseNotifier = new _adblockplusui_adblockpluschrome_lib_events__WEBPACK_IMPORTED_MODULE_11__/* .EventEmitter */ .b();

const License = (function getLicense() {
  const isProd = true;
  const licenseStorageKey = "license";
  const installTimestampStorageKey = "install_timestamp";
  const userClosedSyncCTAKey = "user_closed_sync_cta";
  const userSawSyncCTAKey = "user_saw_sync_cta";
  const pageReloadedOnSettingChangeKey = "page_reloaded_on_user_settings_change";
  const licenseAlarmName = "licenseAlarm";
  const sevenDayAlarmName = "sevenDayLicenseAlarm";

  let theLicense;
  const initialized = false;
  let ajaxRetryCount = 0;
  let readyComplete;
  const licensePromise = new Promise((resolve) => {
    readyComplete = resolve;
  });
  const themesForCTA = [
    "solarized_theme",
    "solarized_light_theme",
    "watermelon_theme",
    "sunshine_theme",
    "ocean_theme",
  ];
  let currentThemeIndex = 0;
  const mabConfig = {
    prod: {
      licenseURL: "https://myadblock.licensing.getadblock.com/license/",
      syncURL: "https://myadblock.sync.getadblock.com/v1/sync",
      subscribeKey: "sub-c-9eccffb2-8c6a-11e9-97ab-aa54ad4b08ec",
      payURL: "https://getadblock.com/premium/enrollment/",
      subscriptionURL: "https://getadblock.com/premium/manage-subscription/",
    },
    dev: {
      licenseURL: "https://dev.myadblock.licensing.getadblock.com/license/",
      syncURL: "https://dev.myadblock.sync.getadblock.com/v1/sync",
      subscribeKey: "sub-c-9e0a7270-83e7-11e9-99de-d6d3b84c4a25",
      payURL: "https://getadblock.com/premium/enrollment/?testmode=true",
      subscriptionURL: "https://dev.getadblock.com/premium/manage-subscription/",
    },
  };

  (async () => {
    // wait for Prefs to be loaded before using them
    await _alias_prefs__WEBPACK_IMPORTED_MODULE_6__/* .Prefs */ .N.untilLoaded;

    const userID = await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_2__/* .getUserId */ .F)();
    mabConfig.prod.payURL = `${mabConfig.prod.payURL}?u=${userID}`;
    mabConfig.dev.payURL = `${mabConfig.dev.payURL}&u=${userID}`;

    const bypassAuthorizedKeys = _alias_prefs__WEBPACK_IMPORTED_MODULE_6__/* .Prefs */ .N.get("bypass_authorizedKeys");
    mabConfig.prod.bypassAuthorizedKeys = bypassAuthorizedKeys;
    mabConfig.dev.bypassAuthorizedKeys = bypassAuthorizedKeys;
  })();

  const MAB_CONFIG = isProd ? mabConfig.prod : mabConfig.dev;

  const sevenDayAlarmIdleListener = function (newState) {
    if (newState === "active") {
      License.checkSevenDayAlarm();
    }
  };

  const removeSevenDayAlarmStateListener = function () {
    browser.idle.onStateChanged.removeListener(sevenDayAlarmIdleListener);
  };

  const addSevenDayAlarmStateListener = function () {
    removeSevenDayAlarmStateListener();
    browser.idle.onStateChanged.addListener(sevenDayAlarmIdleListener);
  };

  const cleanUpSevenDayAlarm = function () {
    removeSevenDayAlarmStateListener();
    browser.storage.local.remove(License.sevenDayAlarmName);
    browser.alarms.clear(License.sevenDayAlarmName);
  };

  const processSevenDayAlarm = function () {
    cleanUpSevenDayAlarm();
    (0,_alias_icon__WEBPACK_IMPORTED_MODULE_5__/* .showIconBadgeCTA */ ._7)(_alias_icon__WEBPACK_IMPORTED_MODULE_5__/* .NEW_BADGE_REASONS */ .Vz.SEVEN_DAY);
  };

  // check the 7 alarm when the browser starts
  // or is woken up
  const checkSevenDayAlarm = function () {
    browser.alarms.get(License.sevenDayAlarmName).then((alarm) => {
      if (alarm && Date.now() > alarm.scheduledTime) {
        browser.alarms.clear(License.sevenDayAlarmName).then(() => {
          (0,_alias_icon__WEBPACK_IMPORTED_MODULE_5__/* .showIconBadgeCTA */ ._7)(_alias_icon__WEBPACK_IMPORTED_MODULE_5__/* .NEW_BADGE_REASONS */ .Vz.SEVEN_DAY);
          removeSevenDayAlarmStateListener();
          browser.storage.local.remove(License.sevenDayAlarmName);
        });
      } else if (alarm) {
        // if the alarm should fire in the future,
        // re-add the license so it fires at the correct time
        const originalTime = alarm.scheduledTime;
        browser.alarms.clear(License.sevenDayAlarmName).then((wasCleared) => {
          if (wasCleared) {
            browser.alarms.create(License.sevenDayAlarmName, { when: originalTime });
            browser.storage.local.set({ [License.sevenDayAlarmName]: true });
            License.addSevenDayAlarmStateListener();
          }
        });
      } else {
        // since there's no alarm, we may need to show the 'new' text,
        // check if the temporary seven day alarm indicator is set, and
        // if the install date is 7 days or more than now
        browser.storage.local.get(License.sevenDayAlarmName).then((data) => {
          if (data && data[License.sevenDayAlarmName]) {
            browser.storage.local.get("blockage_stats").then((response) => {
              const { blockage_stats } = response;
              if (blockage_stats && blockage_stats.start) {
                const installDate = new Date(blockage_stats.start);
                const now = new Date();
                const oneDay = 24 * 60 * 60 * 1000; // hours*minutes*seconds*milliseconds
                const diffDays = Math.round((now - installDate) / oneDay);
                if (diffDays >= 7) {
                  (0,_alias_icon__WEBPACK_IMPORTED_MODULE_5__/* .showIconBadgeCTA */ ._7)(_alias_icon__WEBPACK_IMPORTED_MODULE_5__/* .NEW_BADGE_REASONS */ .Vz.SEVEN_DAY);
                  removeSevenDayAlarmStateListener();
                  browser.storage.local.remove(License.sevenDayAlarmName);
                }
              }
            });
          }
        });
        removeSevenDayAlarmStateListener();
      }
    });
  };
  addSevenDayAlarmStateListener();

  /**
   * Provides payload to verify authenticity of Premium license data
   *
   * @returns {string|null} Encoded signed Premium license data
   */
  const getBypassPayload = function () {
    if (!License.isActiveLicense()) {
      return null;
    }
    return `${License.get().encodedData}.${License.get().signature}`;
  };

  // Load the license from persistent storage
  // Should only be called during startup / initialization
  const loadFromStorage = function (callback) {
    browser.storage.local.get(licenseStorageKey).then((response) => {
      theLicense = response[licenseStorageKey] || {};
      if (typeof callback === "function") {
        callback();
      }
    });
  };
  const checkForManagedSettings = function () {
    return new Promise((resolve) => {
      if ("managed" in browser.storage) {
        browser.storage.managed.get(null).then(
          (items) => {
            for (const key in items) {
              if (key === "suppress_premium_cta") {
                theLicense = License.get();
                theLicense[key] = items[key];
                License.set(theLicense);
              }
            }
            resolve();
          },
          // Opera and FF doesn't support browser.storage.managed, but instead of simply
          // removing the API, it gives an asynchronous error which we ignore here.
          () => {
            resolve();
          },
        );
      } else {
        resolve();
      }
    });
  };

  // Clean up / remove old, unused data in localStorage
  function cleanUpLocalStorage() {
    (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__/* .storageSet */ .EI)(licenseStorageKey);
  }

  return {
    licenseStorageKey,
    userClosedSyncCTAKey,
    userSawSyncCTAKey,
    themesForCTA,
    pageReloadedOnSettingChangeKey,
    initialized,
    licenseAlarmName,
    sevenDayAlarmName,
    checkSevenDayAlarm,
    processSevenDayAlarm,
    addSevenDayAlarmStateListener,
    removeSevenDayAlarmStateListener,
    cleanUpSevenDayAlarm,
    licenseTimer: undefined, // the license update timer token
    licenseNotifier,
    MAB_CONFIG,
    isProd,
    getBypassPayload,
    enrollUser() {
      loadFromStorage(() => {
        // only enroll users if they were not previously enrolled
        if (typeof theLicense.myadblock_enrollment === "undefined") {
          theLicense.myadblock_enrollment = true;
          License.set(theLicense);
        }
      });
    },
    get() {
      return theLicense;
    },
    set(newLicense) {
      const licenseStatusBefore = theLicense.status;

      if (newLicense) {
        theLicense = newLicense;
        browser.storage.local.set({ license: theLicense });
      }

      if (licenseStatusBefore !== newLicense.status) {
        licenseNotifier.emit("license.status.changed");
      }
    },
    /**
     * Changes configuration to use development licensing server
     */
    setDevConfig() {
      License.MAB_CONFIG = mabConfig.dev;
    },
    initialize(callback) {
      loadFromStorage(() => {
        checkForManagedSettings().then(() => {
          if (typeof callback === "function") {
            callback();
          }
          cleanUpLocalStorage();
          readyComplete();
        });
      });
    },
    getCurrentPopupMenuThemeCTA() {
      const theme = License.themesForCTA[currentThemeIndex];
      const lastThemeIndex = License.themesForCTA.length - 1;
      currentThemeIndex = lastThemeIndex === currentThemeIndex ? 0 : (currentThemeIndex += 1);
      return theme || "";
    },
    // Get the latest license data from the server, and talk to the user if needed.
    async update() {
      const userID = await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_2__/* .getUserId */ .F)();
      licenseNotifier.emit("license.updating");
      const postDataObj = {};
      postDataObj.u = userID;
      postDataObj.cmd = "license_check";
      const licenseStatusBefore = License.get().status;
      // license version
      postDataObj.v = "1";
      (0,_fetch_util__WEBPACK_IMPORTED_MODULE_12__/* ["default"] */ .A)(License.MAB_CONFIG.licenseURL, postDataObj)
        .then(async (response) => {
          if (response.ok) {
            const responseObj = await response.json();
            ajaxRetryCount = 0;
            const updatedLicense = responseObj;
            licenseNotifier.emit("license.updated", updatedLicense);
            if (!updatedLicense) {
              return;
            }
            // merge the updated license
            theLicense = { ...theLicense, ...updatedLicense };
            theLicense.licenseId = theLicense.code;
            License.set(theLicense);
            // now check to see if we need to do anything because of a status change
            if (
              licenseStatusBefore === "active" &&
              updatedLicense.status &&
              updatedLicense.status === "expired"
            ) {
              void License.processExpiredLicense();
              _servermessages__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .A.recordGeneralMessage("trial_license_expired");
            }
          } else {
            (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__/* .log */ .Rm)("license server error response", response.status, ajaxRetryCount);
            licenseNotifier.emit("license.updated.error", ajaxRetryCount);
            ajaxRetryCount += 1;
            if (ajaxRetryCount > 3) {
              (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__/* .log */ .Rm)("Retry Count exceeded, giving up", ajaxRetryCount);
              return;
            }
            const oneMinute = 1 * 60 * 1000;
            setTimeout(() => {
              License.updatePeriodically(`error${ajaxRetryCount}`);
            }, oneMinute);
          }
        })
        .catch((error) => {
          (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__/* .log */ .Rm)("license server returned error: ", error);
        });
    },
    async processExpiredLicense() {
      theLicense = License.get();
      theLicense.myadblock_enrollment = true;
      License.set(theLicense);
      (0,_prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .setSetting */ .ZC)("picreplacement", false);
      licenseNotifier.emit("license.expired");
      if ((0,_prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .getSettings */ .mt)().sync_settings) {
        // We have to import the "sync-service" module on demand,
        // as the "sync-service" module in turn requires this module.
        /* eslint-disable import/no-cycle */
        Promise.resolve(/* import() */).then(__webpack_require__.bind(__webpack_require__, 9077)).disableSync();
      }
      (0,_prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .setSetting */ .ZC)("color_themes", { popup_menu: "default_theme", options_page: "default_theme" });
      _subscriptionadapter__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A.unsubscribe({ adblockId: "distraction-control" });
      _subscriptionadapter__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A.unsubscribe({ adblockId: "cookies-premium" });
      const easyPrivacyURL = _subscriptionadapter__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A.getUrlFromId("easyprivacy");
      if (
        (await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.experiments.getFlag("is_privacy_premium")) === true &&
        _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.has(easyPrivacyURL)
      ) {
        await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.remove(easyPrivacyURL);
      }
      browser.alarms.clear(licenseAlarmName);
    },
    ready() {
      return licensePromise;
    },
    async create24HourAlarm() {
      if (!License.isActiveLicense()) {
        return;
      }

      // If the license is active, we should update it every 24 hours
      // We double check the alarm is set correctly, because it was used with
      // different parameters in the past and we need to migrate it.
      const oneDayInMinutes = 24 * 60;
      const licenseAlarm = await browser.alarms.get(License.licenseAlarmName);
      if (!licenseAlarm || licenseAlarm.periodInMinutes !== oneDayInMinutes) {
        browser.alarms.create(License.licenseAlarmName, { periodInMinutes: oneDayInMinutes });
      }
    },

    async updatePeriodically() {
      if (!License.isActiveLicense()) {
        return;
      }
      await License.update();
      await License.create24HourAlarm();

      const response = await browser.storage.local.get(installTimestampStorageKey);
      if (!response[installTimestampStorageKey]) {
        await browser.storage.local.set({ [installTimestampStorageKey]: Date.now() });
      }
    },
    async getLicenseInstallationDate() {
      const response = await browser.storage.local.get(installTimestampStorageKey);
      const originalInstallTimestamp = response[installTimestampStorageKey];
      if (originalInstallTimestamp) {
        return new Date(originalInstallTimestamp);
      }
      return undefined;
    },
    // activate the current license and configure the extension in licensed mode.
    // Call with an optional delay parameter (in milliseconds) if the first license
    // update should be delayed by a custom delay (default is 0 minutes).
    async activate(delayMs) {
      let delay = delayMs;
      const currentLicense = License.get() || {};
      const newLicense = { ...currentLicense };
      newLicense.status = "active";
      License.set(newLicense);
      (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__/* .reloadOptionsPageTabs */ .h_)();
      if (typeof delay !== "number") {
        delay = 0; // 0 minutes
      }
      if (!this.licenseTimer) {
        this.licenseTimer = setTimeout(() => {
          License.updatePeriodically();
        }, delay);
      }
      (0,_prefs_background__WEBPACK_IMPORTED_MODULE_4__/* .setSetting */ .ZC)("picreplacement", false);
      const easyPrivacyURL = _subscriptionadapter__WEBPACK_IMPORTED_MODULE_9__/* ["default"] */ .A.getUrlFromId("easyprivacy");
      if ((await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.experiments.getFlag("is_privacy_premium")) === true) {
        await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.add(easyPrivacyURL);
        await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.sync(easyPrivacyURL);
      }
    },
    getFormattedActiveSinceDate() {
      if (
        !License ||
        !License.isActiveLicense() ||
        !License.get() ||
        !License.get().createdAtUTC ||
        !Number.isInteger(License.get().createdAtUTC)
      ) {
        return null;
      }
      const dateFormat = { year: "numeric", month: "long" };
      let formattedDate = null;
      try {
        const createdAtUTC = parseInt(License.get().createdAtUTC, 10);
        formattedDate = new Date(createdAtUTC).toLocaleDateString(undefined, dateFormat);
      } catch (e) {
        return null;
      }
      return formattedDate;
    },
    isActiveLicense() {
      return License && License.get() && License.get().status === "active";
    },
    isLicenseCodeValid() {
      return License && License.get().code && typeof License.get().code === "string";
    },
    isMyAdBlockEnrolled() {
      return License && License.get() && License.get().myadblock_enrollment === true;
    },
    shouldShowMyAdBlockEnrollment() {
      return (
        License.isMyAdBlockEnrolled() &&
        !License.isActiveLicense() &&
        License.shouldShowPremiumCTA()
      );
    },
    shouldShowPremiumDcCTA() {
      return License && License.isActiveLicense() && License.get().suppress_premium_cta !== true;
    },
    shouldShowPremiumCTA() {
      return !(License && License.get().suppress_premium_cta === true);
    },
    shouldShowBlacklistCTA(newValue) {
      if (!License.shouldShowPremiumCTA()) {
        return false;
      }
      const currentLicense = License.get() || {};
      if (typeof newValue === "boolean") {
        currentLicense.showBlacklistCTA = newValue;
        License.set(currentLicense);
        return null;
      }

      if (typeof currentLicense.showBlacklistCTA === "undefined") {
        currentLicense.showBlacklistCTA = true;
        License.set(currentLicense);
      }
      return License && License.get() && License.get().showBlacklistCTA === true;
    },
    shouldShowWhitelistCTA(newValue) {
      if (!License.shouldShowPremiumCTA()) {
        return false;
      }
      const currentLicense = License.get() || {};
      if (typeof newValue === "boolean") {
        currentLicense.showWhitelistCTA = newValue;
        License.set(currentLicense);
        return null;
      }

      if (typeof currentLicense.showWhitelistCTA === "undefined") {
        currentLicense.showWhitelistCTA = true;
        License.set(currentLicense);
      }
      return License && License.get() && License.get().showWhitelistCTA === true;
    },
    displayPopupMenuNewCTA() {
      const isNotActive = !License.isActiveLicense();
      const variant = License.get() ? License.get().var : undefined;
      return License && isNotActive && [3, 4].includes(variant) && License.shouldShowPremiumCTA();
    },
  };
})();

const replacedByPage = new _adblockplusui_adblockpluschrome_lib_storage_tab_session__WEBPACK_IMPORTED_MODULE_1__/* .TabSessionStorage */ .b("ab:premium:replaced");

// Records how many ads have been replaced by AdBlock.  This is used
// by the AdBlock to display statistics to the user.
const replacedCounts = (function getReplacedCount() {
  const adReplacedNotifier = new _adblockplusui_adblockpluschrome_lib_events__WEBPACK_IMPORTED_MODULE_11__/* .EventEmitter */ .b();
  const key = "replaced_stats";
  (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__/* .migrateData */ .YK)(key, true).then(() => {
    (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__/* .chromeStorageGetHelper */ .s3)(key).then((data) => {
      let replacedCountData = data;
      if (!data) {
        replacedCountData = {};
      }
      if (replacedCountData.start === undefined) {
        replacedCountData.start = Date.now();
      }
      if (replacedCountData.total === undefined) {
        replacedCountData.total = 0;
      }
      replacedCountData.version = 1;
      (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__/* .chromeStorageSetHelper */ .AX)(key, replacedCountData);
      (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__/* .storageSet */ .EI)(key);
    });
  });

  return {
    recordOneAdReplaced(tabId) {
      (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__/* .chromeStorageGetHelper */ .s3)(key).then((replacedCountData) => {
        const data = replacedCountData;
        data.total += 1;
        (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__/* .chromeStorageSetHelper */ .AX)(key, data);
        browser.tabs.get(tabId).then(async (tab) => {
          let replaced = (await replacedByPage.get(tabId)) || 0;
          await replacedByPage.set(tabId, (replaced += 1));
          adReplacedNotifier.emit("adReplaced", tabId, tab.url);
        });
      });
    },
    get() {
      return (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_10__/* .chromeStorageGetHelper */ .s3)(key);
    },
    async getTotalAdsReplaced(tabId) {
      if (tabId) {
        return replacedByPage.get(tabId);
      }
      return this.get().then((data) => data.total);
    },
    adReplacedNotifier,
  };
})();

// for use in the premium enrollment process
// de-coupled from the `License.ready().then` code below because the delay
// prevents the addListener from being fired in a timely fashion.
const onInstalledPromise = new Promise((resolve) => {
  browser.runtime.onInstalled.addListener((details) => {
    resolve(details);
  });
});

// the order of Promises below dictacts the order of the data in the detailsArray
Promise.all([onInstalledPromise, License.ready(), _alias_subscriptionInit__WEBPACK_IMPORTED_MODULE_7__/* .initialize */ .n]).then((detailsArray) => {
  // Enroll existing users in Premium
  if (detailsArray.length > 0 && detailsArray[0].reason) {
    License.enrollUser();
    if (detailsArray[0].reason === "install") {
      // create an alarm that will fire in ~ 7 days to show the "New" badge text
      browser.alarms.create(License.sevenDayAlarmName, { delayInMinutes: 60 * 24 * 7 });
      License.addSevenDayAlarmStateListener();
      browser.storage.local.set({ [License.sevenDayAlarmName]: true });
    }
  }
});

// Make sure the 24 hour license update alarm is set when the browser starts
// just in case it was removed or not set correctly
browser.runtime.onStartup.addListener(async () => {
  await License.ready();
  await License.create24HourAlarm();
});

browser.alarms.onAlarm.addListener(async (alarm) => {
  if (alarm.name === License.licenseAlarmName) {
    await License.ready();
    await License.updatePeriodically();
  }

  if (alarm.name === License.sevenDayAlarmName) {
    License.processSevenDayAlarm();
  }
});

License.ready().then(() => {
  License.checkSevenDayAlarm();
});

License.initialize(() => {
  if (!License.initialized) {
    License.initialized = true;
  }
});

// eslint-disable-next-line no-restricted-globals
Object.assign(self, {
  License,
  replacedCounts,
});

const channels = new _channels__WEBPACK_IMPORTED_MODULE_3__/* .Channels */ .B(License);


/***/ }),

/***/ 9264:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony import */ var _telemetry_background__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(3322);
/* harmony import */ var _subscriptionadapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6396);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser, log */




const sendDCReport = function (url, type, id) {
  if (!url || !type) {
    return;
  }
  const reportData = {
    url,
    type,
    platform:
      _telemetry_background__WEBPACK_IMPORTED_MODULE_0__/* .TELEMETRY */ .Gy &&
      `browser:${_telemetry_background__WEBPACK_IMPORTED_MODULE_0__/* .TELEMETRY */ .Gy.browser}, browser version:${_telemetry_background__WEBPACK_IMPORTED_MODULE_0__/* .TELEMETRY */ .Gy.browserVersion}, OS:${_telemetry_background__WEBPACK_IMPORTED_MODULE_0__/* .TELEMETRY */ .Gy.os}, OS version:${_telemetry_background__WEBPACK_IMPORTED_MODULE_0__/* .TELEMETRY */ .Gy.osVersion}`,
    locale: browser.i18n.getUILanguage(),
    version: browser.runtime.getManifest().version,
  };
  if (id) {
    const subs = _subscriptionadapter__WEBPACK_IMPORTED_MODULE_1__/* ["default"] */ .A.getSubscriptionsMinusText();
    if (subs && subs[id]) {
      const lastUpdate = subs[id].lastDownload || 0;
      reportData.filterListLastUpdate = new Date(lastUpdate * 1000);
    }
  }
  const formData = new FormData();
  formData.append("bug_report", JSON.stringify(reportData));
  fetch("https://getadblock.com/freshdesk/bugReportDistractionControl.php", {
    body: formData,
    method: "post",
  }).catch((error) => {
    log("freshdesk returned error: ", error);
  });
};

browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (message.command !== "sendDCReport" || !message.url || !message.type) {
    return;
  }
  sendDCReport(message.url, message.type, message.id);
  sendResponse({});
});


/***/ }),

/***/ 9077:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _debug_background__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5380);
/* harmony import */ var _telemetry_background__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3322);
/* harmony import */ var _id_background_index__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7099);
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_events__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(866);
/* harmony import */ var _check__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(4770);
/* harmony import */ var _channels__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(8690);
/* harmony import */ var _subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(6396);
/* harmony import */ var _prefs_background__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2644);
/* harmony import */ var _fetch_util__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(5410);
/* harmony import */ var _utilities_background_index__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(199);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser, channels,
   getUserFilters, Prefs, abpPrefPropertyNames,
   pausedFilterText1, pausedFilterText2, isAllowlistFilter */

/** @module SyncService */






// check.js imports disableSync from here
// eslint-disable-next-line import/no-cycle







const SyncService = (function getSyncService() {
  let syncCommitVersion = 0;
  let currentExtensionName = "";
  const syncSchemaVersion = 1;
  const syncCommitVersionKey = "SyncCommitKey";
  const syncLogMessageKey = "SyncLogMessageKey";
  const syncPreviousDataKey = "SyncPreviousDataKey";
  const syncExtensionNameKey = "SyncExtensionNameKey";
  const syncPendingPostDataKey = "syncPendingPostDataKey";
  const syncNotifier = new _adblockplusui_adblockpluschrome_lib_events__WEBPACK_IMPORTED_MODULE_9__/* .EventEmitter */ .b();
  let lastPostStatusCode = 200;
  let pendingPostData = false;
  let lastGetStatusCode = 200;
  let lastGetErrorResponse = {};
  const debounceWaitTime = 10000; // time in ms before posting data
  // Below is a list of filter list ids that have been added since the
  // sync feature was added to AdBlock, therefore these filter lists should be sent
  // with an ID of 'url:...' instead of the id in the betafish-subscriptions.json file
  // any adds to the the betafish-subscriptions.json file should be added here as well.
  const sendFilterListByURL = [
    "annoyances",
    "cookies-premium",
    "easylist_plus_romanian",
    "fb_notifications",
    "free_distraction_control",
    "japanese",
    "nordic",
    "turkish",
  ];
  const { flavor } = (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.getUserAgentInfo)();
  const { os } = (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.getUserAgentInfo)();

  const periodicSyncAlarmName = "periodicSyncAlarm";
  const periodicSyncInterval = 10; // sync interval in minutes

  function setCommitVersion(newVersionNum) {
    syncCommitVersion = newVersionNum;
  }

  function getLastPostStatusCode() {
    return lastPostStatusCode;
  }

  function resetLastPostStatusCode() {
    lastPostStatusCode = 200;
  }

  function setLastPostStatusCode(newCode) {
    lastPostStatusCode = newCode;
  }

  function getLastGetStatusCode() {
    return lastGetStatusCode;
  }

  function resetLastGetStatusCode() {
    lastGetStatusCode = 200;
  }

  function setLastGetStatusCode(newCode) {
    lastGetStatusCode = newCode;
  }

  function getLastGetErrorResponse() {
    return lastGetErrorResponse;
  }

  function resetLastGetErrorResponse() {
    lastGetErrorResponse = {};
  }

  function setLastGetErrorResponse(newObject) {
    lastGetErrorResponse = newObject;
  }

  function resetAllErrors() {
    resetLastGetErrorResponse();
    resetLastGetStatusCode();
    resetLastPostStatusCode();
  }

  const getCurrentExtensionName = function () {
    return currentExtensionName;
  };

  const getSyncLog = function () {
    return new Promise((resolve) => {
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageGetHelper)(syncLogMessageKey).then((logMsgs) => {
        const storedLog = JSON.parse(logMsgs || "[]");
        const theReturnObj = {};
        Object.assign(theReturnObj, storedLog);
        resolve(theReturnObj);
      });
    });
  };

  // TODO - when should we delete the log file???
  const deleteSyncLog = function () {
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageDeleteHelper)(syncLogMessageKey);
  };

  const migrateSyncLog = function () {
    /* eslint-disable no-restricted-globals */
    if (typeof self.localStorage === "undefined") {
      return;
    }
    let storedMsgs = localStorage.getItem(syncLogMessageKey);
    if (!storedMsgs) {
      return;
    }
    storedMsgs = JSON.parse(storedMsgs);
    while (storedMsgs.length > 500) {
      // only keep the last 500 log entries
      storedMsgs.shift();
    }
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageSetHelper)(syncLogMessageKey, JSON.stringify(storedMsgs), (error) => {
      if (!error) {
        localStorage.removeItem(syncLogMessageKey);
      }
    });
  };

  function debounced(delay, fn) {
    let timerId;
    return function debouncedAgain(...args) {
      if (timerId) {
        clearTimeout(timerId);
      }
      timerId = setTimeout(() => {
        fn(...args);
        timerId = null;
      }, delay);
    };
  }

  // return meta data about the extension installation
  const getExtensionInfo = function () {
    return {
      flavor,
      browserVersion: _telemetry_background__WEBPACK_IMPORTED_MODULE_2__/* .TELEMETRY */ .Gy.browserVersion,
      os,
      osVersion: _telemetry_background__WEBPACK_IMPORTED_MODULE_2__/* .TELEMETRY */ .Gy.osVersion,
      extVersion: _telemetry_background__WEBPACK_IMPORTED_MODULE_2__/* .TELEMETRY */ .Gy.version,
      syncSchemaVersion,
    };
  };

  /*
   ** @param arrOne, arrTwo - Arrays to compare
   ** @returns {boolean} - true if a and b are the same array
   **                      has the length and same values in any order
   **                      otherwise false
   */
  function arrayComparison(arrOne, arrTwo) {
    if (!Array.isArray(arrOne) || !Array.isArray(arrTwo)) {
      return false;
    }
    if (arrOne.length !== arrTwo.length) {
      return false;
    }
    return arrOne.every((element) => arrTwo.includes(element));
  }

  /*
   ** @param a, b        - values (Object, Date, etc.)
   ** @returns {boolean} - true if a and b are the same object or
   **                      same primitive value or
   **                      have the same properties with the same values
   **                      otherwise false
   */
  function objectComparison(a, b) {
    // Helper to return a value's internal object [[Class]]
    // That this returns [object Type] even for primitives
    function getClass(obj) {
      return Object.prototype.toString.call(obj);
    }

    // If a and b reference the same value, return true
    if (a === b) {
      return true;
    }

    // If a and b aren't the same type, return false
    if (typeof a !== typeof b) {
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("object type compare is false", a, b);
      return false;
    }

    // Already know types are the same, so if type is number
    // and both NaN, return true
    if (typeof a === "number" && Number.isNaN(a) && Number.isNaN(b)) {
      return true;
    }

    // Get internal [[Class]]
    const aClass = getClass(a);
    const bClass = getClass(b);

    // Return false if not same class
    if (aClass !== bClass) {
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("object class compare is false", a, b);
      return false;
    }

    // If they're Boolean, String or Number objects, check values
    if (
      aClass === "[object Boolean]" ||
      aClass === "[object String]" ||
      aClass === "[object Number]"
    ) {
      if (a.valueOf() !== b.valueOf()) {
        (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("object valueOf compare is false", a, b);
        return false;
      }
    }

    // If they're RegExps, Dates or Error objects, check stringified values
    if (aClass === "[object RegExp]" || aClass === "[object Date]" || aClass === "[object Error]") {
      if (a.toString() !== b.toString()) {
        (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("object string compare is false", a, b);
        return false;
      }
    }

    // For functions, check stringigied values are the same
    // Almost impossible to be equal if a and b aren't trivial
    // and are different functions
    if (aClass === "[object Function]" && a.toString() !== b.toString()) {
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("object function compare is false", a, b);
      return false;
    }

    // For all objects, (including Objects, Functions, Arrays and host objects),
    // check the properties
    const aKeys = Object.keys(a);
    const bKeys = Object.keys(b);

    // If they don't have the same number of keys, return false
    if (aKeys.length !== bKeys.length) {
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("object key length compare is false", a, b);
      return false;
    }

    if (Array.isArray(a) && Array.isArray(b)) {
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("array compare is ", arrayComparison(a, b), a, b);
      return arrayComparison(a, b);
    }

    // Check they have the same keys
    if (!aKeys.every((key) => Object.prototype.hasOwnProperty.call(b, key))) {
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("object keys compare is false", aKeys, bKeys);
      return false;
    }

    // Check key values - uses ES5 Object.keys
    return aKeys.every((key) => objectComparison(a[key], b[key]));
  }

  const isTemporaryAllowlistFilter = async function (filterText) {
    if (!isAllowlistFilter(filterText)) {
      return false;
    }

    const metadata = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getMetadata(filterText);
    return metadata && Boolean(metadata.expiresByTabId);
  };

  const isPauseFilter = function (filterText) {
    return (
      isAllowlistFilter(filterText) &&
      (pausedFilterText1 === filterText || pausedFilterText2 === filterText)
    );
  };

  function getCommitVersion() {
    return syncCommitVersion;
  }

  // Sync log message processing

  const addSyncLogText = function (msg) {
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageGetHelper)(syncLogMessageKey).then((logMsgs) => {
      const storedLog = JSON.parse(logMsgs || "[]");
      storedLog.push(`${new Date().toUTCString()} , ${msg}`);
      while (storedLog.length > 500) {
        // only keep the last 500 log entries
        storedLog.shift();
      }
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageSetHelper)(syncLogMessageKey, JSON.stringify(storedLog));
    });
  };

  const onExtensionNamesDownloadingAddLogEntry = function () {
    addSyncLogText("extension.names.downloading");
  };

  const onExtensionNamesDownloadedAddLogEntry = function () {
    addSyncLogText("extension.names.downloaded");
  };

  const onExtensionNamesDownloadingErrorAddLogEntry = function (errorCode) {
    addSyncLogText(`extension.names.downloading.error: ${errorCode}`);
  };

  const onExtensionNameUpdatingAddLogEntry = function () {
    addSyncLogText("extension.name.updating");
  };

  const onExtensionNameUpdatedAddLogEntry = function () {
    addSyncLogText("extension.name.updated");
  };

  const onExtensionNameUpdatedErrorAddLogEntry = function (errorCode) {
    addSyncLogText(`extension.names.updated.error: ${errorCode}`);
  };

  const onExtensionNameRemoveAddLogEntry = function () {
    addSyncLogText("extension.name.remove");
  };

  const onExtensionNameRemovedAddLogEntry = function () {
    addSyncLogText("extension.name.removed");
  };

  const onExtensionNamesRemoveErrorAddLogEntry = function (errorCode) {
    addSyncLogText(`extension.name.remove.error: ${errorCode}`);
  };

  const onPostDataSendingAddLogEntry = function () {
    addSyncLogText("post.data.sending");
  };

  const onPostDataSentAddLogEntry = function () {
    addSyncLogText(`post.data.sent, commit version: ${getCommitVersion()}`);
  };

  const onPostDataSentErrorAddLogEntry = function (errorCode) {
    addSyncLogText(`post.data.sent.error: ${errorCode}`);
  };

  const onSyncDataGettingAddLogEntry = function () {
    addSyncLogText("sync.data.getting");
  };

  const onSyncDataReceievedAddLogEntry = function () {
    addSyncLogText(`sync.data.receieved, commit version: ${getCommitVersion()}`);
  };

  const onSyncDataGettingErrorAddLogEntry = function (errorCode) {
    addSyncLogText(`sync.data.getting.error: ${errorCode}`);
  };

  const onSyncDataGettingErrorInitialFailAddLogEntry = function (errorCode) {
    addSyncLogText(`sync.data.getting.error.initial.fail: ${errorCode}`);
  };

  async function cleanCustomFilter(filters) {
    const globalPauseFilters = new Set([pausedFilterText1, pausedFilterText2]);

    // Filter and fetch metadata concurrently
    const metadataPromises = filters.map(async (filter) => {
      if (
        filter.startsWith("@@||") &&
        filter.includes("$document") &&
        !globalPauseFilters.has(filter)
      ) {
        const metadata = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getMetadata(filter);
        return { filter, metadata };
      }
      return { filter };
    });

    const metadataList = await Promise.all(metadataPromises);

    // Remove the temporary allowlist filters and global pause filters
    return filters.filter((filter, index) => {
      const { metadata = {} } = metadataList[index];
      return !(metadata && metadata.expiresByTabId) && !globalPauseFilters.has(filter);
    });
  }

  const processSyncUpdate = async function (payload) {
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("processing sync update", payload);
    // do we need a check or comparison of payload.version vs. syncSchemaVersion ?
    if (payload.settings) {
      const keywords = Object.keys(payload.settings);
      // Use a Promise to wait until the previous 'set' is complete because
      // calling 'setSetting' several times in a row in a loop prevents some
      // settings from being saved to storage
      for (let inx = 0, p = Promise.resolve(); inx < keywords.length; inx++) {
        const id = keywords[inx];
        p = p.then(
          () =>
            new Promise((resolve) => {
              let value = payload.settings[id];
              // since we receive a 'show_statsinpopup' property on the |Prefs| object
              // from older versions of AdBLock, use the incoming value from |Prefs|
              // object for backward compatability
              if (
                id === "display_menu_stats" &&
                payload.prefs &&
                Object.prototype.hasOwnProperty.call(payload.prefs, "show_statsinpopup")
              ) {
                value = payload.prefs.show_statsinpopup;
              }
              (0,_prefs_background__WEBPACK_IMPORTED_MODULE_7__/* .setSetting */ .ZC)(id, value, () => {
                resolve();
              });
            }),
        );
      }
    }
    if (payload.subscriptions) {
      const currentSubs = await _subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.getSubscriptionsMinusText();
      for (const id in currentSubs) {
        if (!payload.subscriptions[id] && currentSubs[id].subscribed) {
          (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("sync - removing subscription ", currentSubs[id].url);
          // eslint-disable-next-line no-await-in-loop
          await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.remove(currentSubs[id].url);
        }
      }
      for (const adblockId in payload.subscriptions) {
        if (!currentSubs[adblockId] || !currentSubs[adblockId].subscribed) {
          let url = _subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.getUrlFromId(adblockId);
          if (!url && adblockId.startsWith("url:")) {
            url = adblockId.slice(4);
            const subId = _subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.getIdFromURL(url);
            if (subId) {
              url = _subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.getUrlFromId(subId);
            }
          }
          if (_subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.isLegacyDistractionControlById(adblockId)) {
            url = _subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.getUrlFromId("distraction-control");
          }
          if (url) {
            (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("sync - adding subscription ", url);
            // eslint-disable-next-line no-await-in-loop
            await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.add(url);
          }
        }
      }
    }

    if (payload.customFilterRules) {
      // capture, then remove all current custom filters, account for pause filters in
      // current processing
      const currentUserFilters = await getUserFilters();
      let onlyUserFilters = currentUserFilters.map((filter) => filter.text);
      let results = [];
      for (const inx in payload.customFilterRules) {
        if (
          !_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.validate(payload.customFilterRules[inx]) &&
          !onlyUserFilters.includes(payload.customFilterRules[inx])
        ) {
          results.push(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.add([payload.customFilterRules[inx]]));
        }
      }
      await Promise.all(results);
      results = [];
      if (onlyUserFilters && onlyUserFilters.length) {
        onlyUserFilters = await cleanCustomFilter(onlyUserFilters);
        // Delete / remove filters the user removed...
        onlyUserFilters.forEach((filterText) => {
          if (
            filterText.length > 0 &&
            !payload.customFilterRules.includes(filterText) &&
            !_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.validate(filterText)
          ) {
            results.push(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.remove([filterText]));
          }
        });
      }
      await Promise.all(results);
    }
    if (payload.customRuleMetaData) {
      let currentUserFilters = await getUserFilters();
      currentUserFilters = currentUserFilters.map((filter) => filter.text);
      for (const ruleText in payload.customRuleMetaData) {
        if (currentUserFilters.includes(ruleText)) {
          _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.setMetadata(ruleText, payload.customRuleMetaData[ruleText]);
        }
      }
    }
    if (payload.prefs) {
      for (const key in payload.prefs) {
        Prefs[key] = payload.prefs[key];
        // add any new Prefs to the array of Preferences we're tracking for sync
        if (abpPrefPropertyNames.indexOf(key) < 0) {
          abpPrefPropertyNames.push(key);
        }
        // since we no long use the 'show_statsinpopup' property on the |Prefs| object,
        // manually set Settings property for backward compatability
        if (key === "show_statsinpopup") {
          (0,_prefs_background__WEBPACK_IMPORTED_MODULE_7__/* .setSetting */ .ZC)("display_menu_stats", payload.prefs[key]);
        }
      }
    }
    if (payload.channels) {
      for (const name in payload.channels) {
        const channelId = channels.getIdByName(name);
        if (channelId) {
          channels.setEnabled(channelId, payload.channels[name]);
        } else {
          // create a new channel to save the channel name and the enabled indicator
          channels.add({ name, param: undefined, enabled: payload.channels[name] });
        }
      }
    }
  };

  const process403ErrorCode = function () {
    // eslint-disable-next-line no-use-before-define
    disableSync(false);
  };

  // Retreive or 'get' the sync data from the sync server
  // Input: initialGet:boolean - if true, and the server returns a 404 error code,
  //                             then a 'post' is invoked
  //        disableEmitMsg:boolean - if true, then no sync notifier message will be emitted
  //                                 (usually used for post error processing)
  //        callback:function - function that will be called when success or failure occurs
  //        shouldForce:boolean - optional, force a response from the server (even if the commit
  //                              versions match), defaults to false
  const getSyncData = function (initialGet, disableEmitMsg, callback, shouldForce) {
    const getSuccess = function (text, statusCode) {
      let responseObj = {};
      if (text && typeof text === "object") {
        responseObj = text;
      } else if (text && typeof text === "string") {
        try {
          responseObj = JSON.parse(text);
        } catch (e) {
          // eslint-disable-next-line no-console
          console.log("Something went wrong with parsing license data.");
          // eslint-disable-next-line no-console
          console.log("error", e);
          // eslint-disable-next-line no-console
          console.log(text);
          return;
        }
      }
      if (responseObj && (responseObj.commitVersion > syncCommitVersion || shouldForce)) {
        if (responseObj.data) {
          try {
            processSyncUpdate(JSON.parse(responseObj.data));
          } catch (e) {
            // eslint-disable-next-line no-console
            console.log("failed to parse response data from server", responseObj.data);
            // eslint-disable-next-line no-console
            console.log(e);
          }
        }
        syncCommitVersion = responseObj.commitVersion;
        (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageSetHelper)(syncCommitVersionKey, responseObj.commitVersion);
        (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageSetHelper)(syncPreviousDataKey, responseObj.data);
        pendingPostData = false; // reset in case an update is received from another extension
        (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageSetHelper)(syncPendingPostDataKey, pendingPostData);
      }
      if (!disableEmitMsg) {
        syncNotifier.emit("sync.data.receieved");
      }
      if (typeof callback === "function") {
        callback(statusCode);
      }
    };

    const getFailure = function (statusCode, textStatus, responseJSON) {
      lastGetStatusCode = statusCode;
      lastGetErrorResponse = responseJSON;
      if (initialGet && statusCode === 404) {
        // eslint-disable-next-line no-use-before-define
        postDataSync(callback, initialGet);
        // now that the initial post is complete, enable Sync (add listeners, etc.)
        // with 'initialGet' now set to false
        // eslint-disable-next-line no-use-before-define
        enableSync();
        return;
      }
      if (initialGet && !disableEmitMsg) {
        syncNotifier.emit("sync.data.getting.error.initial.fail", statusCode);
      } else if (!disableEmitMsg) {
        syncNotifier.emit("sync.data.getting.error", statusCode, responseJSON);
        if (statusCode === 403) {
          process403ErrorCode();
        }
      }
      if (typeof callback === "function") {
        callback(statusCode);
      }
    };

    if (!disableEmitMsg) {
      syncNotifier.emit("sync.data.getting");
    }
    lastGetStatusCode = 200;
    lastGetErrorResponse = {};
    // eslint-disable-next-line no-use-before-define
    requestSyncData(getSuccess, getFailure, undefined, shouldForce);
  };

  const getAllExtensionNames = function () {
    return new Promise(async (resolve) => {
      syncNotifier.emit("extension.names.downloading");
      fetch(`${_check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.MAB_CONFIG.syncURL}/devices/list`, {
        method: "GET",
        cache: "no-cache",
        headers: {
          "X-GABSYNC-PARAMS": JSON.stringify({
            extensionGUID: await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_3__/* .getUserId */ .F)(),
            licenseId: _check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.get().licenseId,
            extInfo: getExtensionInfo(),
          }),
        },
      })
        .then(async (response) => {
          if (response.ok) {
            const responseObj = await response.json();
            syncNotifier.emit("extension.names.downloaded", responseObj);
            resolve(responseObj);
            return;
          }
          if (response.status === 404) {
            syncNotifier.emit("extension.names.downloading.error", response.status);
            const text = await response.text();
            resolve(text);
            return;
          }
          (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("sync server error: ", response);
        })
        .catch((error) => {
          syncNotifier.emit("extension.names.downloading.error");
          (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("sync server returned error: ", error);
        });
    });
  };

  const setCurrentExtensionName = async function (newName) {
    if (newName && newName.trim().length >= 1 && newName.trim().length <= 50) {
      currentExtensionName = newName.trim();
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageSetHelper)(syncExtensionNameKey, currentExtensionName);
      const thedata = {
        deviceName: currentExtensionName,
        extensionGUID: await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_3__/* .getUserId */ .F)(),
        licenseId: _check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.get().licenseId,
        extInfo: getExtensionInfo(),
      };
      syncNotifier.emit("extension.name.updating");
      (0,_fetch_util__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A)(`${_check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.MAB_CONFIG.syncURL}/devices/add`, thedata)
        .then((response) => {
          if (response.ok) {
            syncNotifier.emit("extension.name.updated");
          } else {
            syncNotifier.emit("extension.name.updated.error", response.status);
          }
        })
        .catch((error) => {
          syncNotifier.emit("extension.name.updated.error");
          (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("sync server returned error: ", error);
        });
    }
  };
  const removeExtensionName = function (extensionName, extensionGUID) {
    const thedata = {
      deviceName: extensionName,
      extensionGUID,
      licenseId: _check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.get().licenseId,
      extInfo: getExtensionInfo(),
    };
    syncNotifier.emit("extension.name.remove");
    (0,_fetch_util__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A)(`${_check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.MAB_CONFIG.syncURL}/devices/remove`, thedata)
      .then((response) => {
        if (response.ok) {
          if (extensionName === currentExtensionName) {
            currentExtensionName = "";
            (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageSetHelper)(syncExtensionNameKey, currentExtensionName);
          }
          syncNotifier.emit("extension.name.removed");
        } else {
          syncNotifier.emit("extension.name.remove.error", response.status);
        }
      })
      .catch((error) => {
        syncNotifier.emit("extension.name.remove.error");
        (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("sync server returned error: ", error);
      });
  };

  const removeCurrentExtensionName = async function () {
    removeExtensionName(currentExtensionName, await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_3__/* .getUserId */ .F)());
  };

  // return all of the current user configurable extension options (settings, Prefs, filter list
  // sub, custom rules, themes, etc. Since a comparison will be done in this, and other sync'd
  // extensions, the payload should only contain settings, Prefs, etc and not data that can change
  // from browser to brower, version to version, etc.
  const getSyncInformation = async function () {
    const payload = {};
    payload.settings = (0,_prefs_background__WEBPACK_IMPORTED_MODULE_7__/* .getSettings */ .mt)();
    payload.subscriptions = {};
    const subscriptions = await _subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.getSubscriptionsMinusText();

    for (const adblockId in subscriptions) {
      if (subscriptions[adblockId].subscribed) {
        const { id } = subscriptions[adblockId];
        const url = _subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.getV2URLFromID(id) || subscriptions[adblockId].url;
        if (adblockId === "distraction-control") {
          const dcIDs = _subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.legacyDistractionControlIDs;
          for (const [dcID, dcURL] of Object.entries(dcIDs)) {
            payload.subscriptions[dcID] = dcURL;
          }
        } else if (sendFilterListByURL.includes(adblockId)) {
          payload.subscriptions[`url:${url}`] = url;
        } else {
          payload.subscriptions[adblockId] = url;
        }
      }
    }
    const userFilters = await getUserFilters();
    const userFiltersTexts = userFilters.map((filter) => filter.text).sort();
    payload.customFilterRules = await cleanCustomFilter(userFiltersTexts);
    const metaDataArr = await (0,_debug_background__WEBPACK_IMPORTED_MODULE_1__/* .getCustomFilterMetaData */ .JP)(userFilters);
    if (metaDataArr && metaDataArr.length) {
      const ruleMetaData = {};
      for (let inx = 0; inx < metaDataArr.length; inx++) {
        if (metaDataArr[inx].text && metaDataArr[inx].metaData) {
          ruleMetaData[metaDataArr[inx].text] = metaDataArr[inx].metaData;
        }
      }
      payload.customRuleMetaData = ruleMetaData;
    }
    payload.prefs = {};
    for (const inx in abpPrefPropertyNames) {
      const name = abpPrefPropertyNames[inx];
      payload.prefs[name] = Prefs[name];
    }
    // since we no long use the 'show_statsinpopup' property on the |Prefs| object,
    // manually set it using the new 'show_statsinpopup' property on the Settings object
    // for backward compatability
    payload.prefs.show_statsinpopup = (0,_prefs_background__WEBPACK_IMPORTED_MODULE_7__/* .getSettings */ .mt)().display_menu_stats;
    payload.channels = {};
    const guide = channels.getGuide();
    for (const id in guide) {
      payload.channels[guide[id].name] = guide[id].enabled;
    }
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("sync - sync payload", payload);
    return payload;
  };

  const postDataSync = async function (callback, initialGet) {
    if (!(0,_prefs_background__WEBPACK_IMPORTED_MODULE_7__/* .getSettings */ .mt)().sync_settings) {
      return;
    }
    const payload = await getSyncInformation();
    const thedata = {
      data: JSON.stringify(payload),
      commitVersion: syncCommitVersion,
      extensionGUID: await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_3__/* .getUserId */ .F)(),
      licenseId: _check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.get().licenseId,
      extInfo: getExtensionInfo(),
    };
    browser.storage.local.get(syncPreviousDataKey).then((response) => {
      const previousData = response[syncPreviousDataKey] || "{}";
      if (objectComparison(payload, JSON.parse(previousData))) {
        return;
      }
      syncNotifier.emit("post.data.sending");
      lastPostStatusCode = 200;
      pendingPostData = false;
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageSetHelper)(syncPendingPostDataKey, pendingPostData);
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("sending sync 'payload' to server", payload);
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("sending sync 'thedata' to server", thedata);
      (0,_fetch_util__WEBPACK_IMPORTED_MODULE_10__/* ["default"] */ .A)(_check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.MAB_CONFIG.syncURL, thedata)
        .then((postResponse) => {
          lastPostStatusCode = postResponse.status;
          if (postResponse.ok) {
            postResponse.json().then((responseObj) => {
              if (responseObj && responseObj.commitVersion > syncCommitVersion) {
                syncCommitVersion = responseObj.commitVersion;
                (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageSetHelper)(syncCommitVersionKey, responseObj.commitVersion);
              }
              (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageSetHelper)(syncPreviousDataKey, responseObj.data);
              if (typeof callback === "function") {
                callback();
              }
              syncNotifier.emit("post.data.sent");
            });
          } else {
            syncNotifier.emit("post.data.sent.error", postResponse.status, initialGet);
            lastPostStatusCode = postResponse.status;
            if (postResponse.status === 409) {
              // this extension probably had an version of the sync data
              // aka - the sync commit version was behind the sync server
              // so, undo / revert all of the user changes that were just posted
              // by doing a 'GET'
              // because we want the above error to be persisted, will set the
              // 'disableEmitMsg' to true
              getSyncData(false, true);
              return;
            }
            if (postResponse.status === 403) {
              process403ErrorCode();
            }
            // all other currently known errors (0, 401, 404, 500).
            pendingPostData = true;
            (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageSetHelper)(syncPendingPostDataKey, pendingPostData);
          }
        })
        .catch((error) => {
          syncNotifier.emit("extension.name.updated.error");
          // eslint-disable-next-line no-console
          console.log("sync server returned error: ", error);
        });
    });
  };

  const processUserSyncRequest = function () {
    if (pendingPostData) {
      postDataSync();
    } else {
      getSyncData(false, false, undefined, true);
    }
  };

  const processEventChangeRequest = function () {
    if (pendingPostData) {
      postDataSync();
    } else {
      getSyncData();
    }
  };

  const postDataSyncHandler = debounced(debounceWaitTime, postDataSync);

  // Sync Listeners
  async function onFilterAdded(filter, subscription, position, calledPreviously) {
    // a delay is added to allow the domain pause filters time to be saved to storage
    // otherwise the domain pause filter check below would always fail
    if (calledPreviously === undefined) {
      setTimeout(() => {
        onFilterAdded(filter, subscription, position, true);
      }, 500);
      return;
    }
    if (isPauseFilter(filter.text)) {
      return;
    }
    if (await isTemporaryAllowlistFilter(filter.text)) {
      return;
    }
    postDataSyncHandler();
  }

  async function onFilterRemoved(filter) {
    if (isPauseFilter(filter.text)) {
      return;
    }
    if (await isTemporaryAllowlistFilter(filter.text)) {
      return;
    }
    postDataSyncHandler();
  }

  // a delay is added to allow the domain pause filters time to be saved to storage
  // otherwise the domain pause filter check below would always fail
  const onFilterListsSubAdded = async function (sub) {
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("onFilterListsSubAdded", sub);

    // Delay for 1 second to allow the domain pause filters time to be saved to storage
    await new Promise((resolve) => setTimeout(resolve, 1000));

    if (sub.url && sub.url.startsWith("~user~") && sub._filterText.length) {
      const filters = sub._filterText;

      // Check for pause filters
      const containsPauseFilter = filters.some(isPauseFilter);
      if (containsPauseFilter) {
        return;
      }

      // Check for temporary allowlist filters concurrently
      const temporaryAllowlistChecks = await Promise.all(
        filters.map((filter) => isTemporaryAllowlistFilter(filter)),
      );

      if (temporaryAllowlistChecks.some((result) => result)) {
        return;
      }
    }

    postDataSyncHandler();
  };

  const onFilterListsSubRemoved = async function (sub) {
    if (sub.url && sub.url.startsWith("~user~") && sub._filterText.length) {
      const filters = sub._filterText;

      // Check for pause filters
      const containsPauseFilter = filters.some(isPauseFilter);
      if (containsPauseFilter) {
        return;
      }

      // Check for temporary allowlist filters concurrently
      const temporaryAllowlistChecks = await Promise.all(
        filters.map((filter) => isTemporaryAllowlistFilter(filter)),
      );

      if (temporaryAllowlistChecks.some((result) => result)) {
        return;
      }
    }

    postDataSyncHandler();
  };

  const onSettingsChanged = function (name) {
    if (name === "sync_settings") {
      return; // don't process any sync setting changes
    }
    postDataSyncHandler();
  };

  const updateNetworkStatus = function () {
    if (navigator.onLine) {
      processEventChangeRequest();
    }
  };

  function processFetchRequest(commitVersion) {
    let fetchCommitVersion = commitVersion;
    if (!fetchCommitVersion) {
      return;
    }
    if (typeof fetchCommitVersion === "string") {
      fetchCommitVersion = Number.parseInt(fetchCommitVersion, 10);
    }
    if (fetchCommitVersion === syncCommitVersion) {
      return;
    }
    getSyncData();
  }

  function processPeriodicSyncAlarm(alarm) {
    if (alarm.name !== periodicSyncAlarmName) {
      return;
    }

    processUserSyncRequest();
  }

  function stopPeriodicSync() {
    browser.alarms.onAlarm.removeListener(processPeriodicSyncAlarm);
    browser.alarms.clear(periodicSyncAlarmName);
  }

  function startPeriodicSync() {
    stopPeriodicSync();
    browser.alarms.onAlarm.addListener(processPeriodicSyncAlarm);
    browser.alarms.create(periodicSyncAlarmName, { periodInMinutes: periodicSyncInterval });
  }

  const addSyncEventListeners = function () {
    syncNotifier.on("sync.data.getting.error", onSyncDataGettingErrorAddLogEntry);
    syncNotifier.on(
      "sync.data.getting.error.initial.fail",
      onSyncDataGettingErrorInitialFailAddLogEntry,
    );
    syncNotifier.on("extension.names.downloading", onExtensionNamesDownloadingAddLogEntry);
    syncNotifier.on("sync.data.receieved", onSyncDataReceievedAddLogEntry);
    syncNotifier.on("sync.data.getting", onSyncDataGettingAddLogEntry);
    syncNotifier.on("post.data.sent.error", onPostDataSentErrorAddLogEntry);
    syncNotifier.on("post.data.sending", onPostDataSendingAddLogEntry);
    syncNotifier.on("post.data.sent", onPostDataSentAddLogEntry);
    syncNotifier.on("extension.name.remove.error", onExtensionNamesRemoveErrorAddLogEntry);
    syncNotifier.on("extension.name.removed", onExtensionNameRemovedAddLogEntry);
    syncNotifier.on("extension.name.remove", onExtensionNameRemoveAddLogEntry);
    syncNotifier.on("extension.name.updated.error", onExtensionNameUpdatedErrorAddLogEntry);
    syncNotifier.on("extension.name.updated", onExtensionNameUpdatedAddLogEntry);
    syncNotifier.on("extension.name.updating", onExtensionNameUpdatingAddLogEntry);
    syncNotifier.on("extension.names.downloaded", onExtensionNamesDownloadedAddLogEntry);
    syncNotifier.on(
      "extension.names.downloading.error",
      onExtensionNamesDownloadingErrorAddLogEntry,
    );
  };

  const enableSync = function (initialGet) {
    (0,_prefs_background__WEBPACK_IMPORTED_MODULE_7__/* .setSetting */ .ZC)("sync_settings", true);
    const addListeners = function () {
      // eslint-disable-next-line no-use-before-define
      _check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.licenseNotifier.on("license.expired", processDisableSync);

      _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.onAdded.addListener(onFilterListsSubAdded);
      _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.onRemoved.addListener(onFilterListsSubRemoved);

      _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.onAdded.addListener(onFilterAdded);
      _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.onRemoved.addListener(onFilterRemoved);

      _prefs_background__WEBPACK_IMPORTED_MODULE_7__/* .settingsNotifier */ .Ob.on("settings.changed", onSettingsChanged);
      _channels__WEBPACK_IMPORTED_MODULE_5__/* .channelsNotifier */ .N.on("channels.changed", postDataSyncHandler);

      for (const inx in abpPrefPropertyNames) {
        const name = abpPrefPropertyNames[inx];
        Prefs.on(name, postDataSyncHandler);
      }
      // wait a moment at start to allow all of the backgound scripts to load
      setTimeout(() => {
        startPeriodicSync();
      }, 1000);

      self.addEventListener("online", updateNetworkStatus);
      self.addEventListener("offline", updateNetworkStatus);
    };

    if (initialGet) {
      SyncService.getSyncData(initialGet, false, (response) => {
        if (response === 200 || response === 304) {
          addListeners();
        }
      });
      return;
    }

    addListeners();
  };

  const disableSync = function (removeName) {
    stopPeriodicSync();
    (0,_prefs_background__WEBPACK_IMPORTED_MODULE_7__/* .setSetting */ .ZC)("sync_settings", false);
    syncCommitVersion = 0;
    _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.onAdded.removeListener(onFilterListsSubAdded);
    _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.onRemoved.removeListener(onFilterListsSubRemoved);

    _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.onAdded.removeListener(onFilterAdded);
    _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.onRemoved.removeListener(onFilterRemoved);

    _prefs_background__WEBPACK_IMPORTED_MODULE_7__/* .settingsNotifier */ .Ob.off("settings.changed", onSettingsChanged);
    _channels__WEBPACK_IMPORTED_MODULE_5__/* .channelsNotifier */ .N.off("channels.changed", postDataSyncHandler);

    for (const inx in abpPrefPropertyNames) {
      const name = abpPrefPropertyNames[inx];
      Prefs.off(name, postDataSyncHandler);
    }

    if (removeName) {
      removeCurrentExtensionName();

      currentExtensionName = "";
      (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.chromeStorageSetHelper)(syncExtensionNameKey, currentExtensionName);
    }

    // eslint-disable-next-line no-use-before-define
    _check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.licenseNotifier.off("license.expired", processDisableSync);
    self.removeEventListener("online", updateNetworkStatus);
    self.removeEventListener("offline", updateNetworkStatus);
  };

  const processDisableSync = function () {
    disableSync(true);
  };

  // Retreive the sync data from the sync server
  // Input: successCallback:function - function that will be called when success occurs, the
  //                                   callback will be provided the response data
  //        errorCallback:function - function that will be called when  failure occurs, the
  //                                 callback will be provided the error code
  //        totalAttempts:integer - the number of 'get' attempts made (only used internally by
  //                               the retry logic)
  //        shouldForce:boolean - optional, force a response from the server (even if the commit
  //                              versions match), defaults to false
  const requestSyncData = async function (
    successCallback,
    errorCallback,
    totalAttempts,
    shouldForce,
  ) {
    let attemptCount = totalAttempts;
    if (!attemptCount) {
      attemptCount = 1;
    } else {
      attemptCount += 1;
    }
    const forceParam = shouldForce || false;

    fetch(_check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.MAB_CONFIG.syncURL, {
      method: "GET",
      cache: "no-cache",
      headers: {
        "X-GABSYNC-PARAMS": JSON.stringify({
          extensionGUID: await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_3__/* .getUserId */ .F)(),
          licenseId: _check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.get().licenseId,
          commitVersion: syncCommitVersion,
          force: forceParam,
          extInfo: getExtensionInfo(),
        }),
      },
    })
      .then(async (response) => {
        if (response.ok && typeof successCallback === "function") {
          const text = await response.text();
          successCallback(text, response.status);
        }
        if (!response.ok) {
          (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("sync server returned error, status", response.status);
          if (response.status === 304) {
            (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("response", response);
            return;
          }
          if ((response.status !== 404 || response.status !== 403) && attemptCount < 3) {
            setTimeout(() => {
              requestSyncData(successCallback, errorCallback, attemptCount, shouldForce);
            }, 1000); // wait 1 second for retry
            return;
          }
          if (typeof errorCallback === "function") {
            const responseObj = await response.json();
            errorCallback(response.status, response.status, responseObj);
          }
        }
      })
      .catch((error) => {
        (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.log)("sync server returned error: ", error);
        errorCallback(error.message);
      });
  };

  _prefs_background__WEBPACK_IMPORTED_MODULE_7__/* .settings */ .W0.onload().then(() => {
    _check__WEBPACK_IMPORTED_MODULE_4__/* .License */ .u8.ready().then(() => {
      addSyncEventListeners();
      if ((0,_prefs_background__WEBPACK_IMPORTED_MODULE_7__/* .getSettings */ .mt)().sync_settings) {
        browser.storage.local.get(syncCommitVersionKey).then((response) => {
          syncCommitVersion = response[syncCommitVersionKey] || 0;
          browser.storage.local.get(syncPendingPostDataKey).then((postDataResponse) => {
            pendingPostData = postDataResponse[syncPendingPostDataKey] || false;
            processEventChangeRequest();
            enableSync();
            migrateSyncLog();
          });
        });
      }

      browser.storage.local.get(syncExtensionNameKey).then((response) => {
        currentExtensionName = response[syncExtensionNameKey] || "";
      });
    });
  });

  return {
    enableSync,
    disableSync,
    getSyncData,
    processFetchRequest,
    getCurrentExtensionName,
    getAllExtensionNames,
    setCurrentExtensionName,
    removeCurrentExtensionName,
    removeExtensionName,
    syncNotifier,
    getCommitVersion,
    setCommitVersion,
    getLastPostStatusCode,
    resetLastPostStatusCode,
    setLastPostStatusCode,
    getLastGetStatusCode,
    resetLastGetStatusCode,
    setLastGetStatusCode,
    getLastGetErrorResponse,
    resetLastGetErrorResponse,
    setLastGetErrorResponse,
    resetAllErrors,
    getSyncLog,
    deleteSyncLog,
    processUserSyncRequest,
    processEventChangeRequest,
    addSyncLogText,
  };
})();

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SyncService);


/***/ }),

/***/ 2644:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  mt: () => (/* reexport */ settings/* getSettings */.mt),
  QC: () => (/* reexport */ settings/* isValidTheme */.QC),
  $1: () => (/* binding */ background_migrateUserData),
  ZC: () => (/* reexport */ settings/* setSetting */.ZC),
  W0: () => (/* reexport */ settings/* settings */.W0),
  Ob: () => (/* reexport */ settings/* settingsNotifier */.Ob),
  ni: () => (/* reexport */ settings/* start */.ni)
});

// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
;// CONCATENATED MODULE: ./adblock-betafish/prefs/background/migration.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */
/* For ESLint: List any global identifiers used in this file below */
/* global browser  */
/**
 * @overview Migrates existing data from older versions
 */



async function unsubscribeToFilterList(url) {
  if (await ewe_api.subscriptions.has(url)) {
    await ewe_api.subscriptions.remove(url);
    return true;
  }
  return false;
}

/**
 * Migrates existing user data from older versions
 */
async function migrateUserData() {
  // We remove the AdBlock Custom filter list,
  // because it no longer serves any purpose
  unsubscribeToFilterList("https://cdn.adblockcdn.com/filters/adblock_custom.txt");

  // Remove any of the old Distraction Control Filters,
  // Subscript to the new DC filter list
  const DISTRACTION_CONTROL_URL_LIST = [
    "https://easylist-downloads.adblockplus.org/v3/full/distraction-control-newsletter.txt",
    "https://cdn.adblockcdn.com/filters/distraction-control-newsletter.txt",
    "https://easylist-downloads.adblockplus.org/v3/full/distraction-control-push.txt",
    "https://cdn.adblockcdn.com/filters/distraction-control-push.txt",
    "https://easylist-downloads.adblockplus.org/v3/full/distraction-control-survey.txt",
    "https://cdn.adblockcdn.com/filters/distraction-control-survey.txt",
    "https://easylist-downloads.adblockplus.org/v3/full/distraction-control-video.txt",
    "https://cdn.adblockcdn.com/filters/distraction-control-video.txt",
  ];
  let subscribedTODC = false;
  for (const url of DISTRACTION_CONTROL_URL_LIST) {
    // eslint-disable-next-line no-await-in-loop
    subscribedTODC = await unsubscribeToFilterList(url);
  }

  if (subscribedTODC) {
    if (browser.runtime.getManifest().manifest_version === 2) {
      ewe_api.subscriptions.add("https://easylist-downloads.adblockplus.org/adblock_premium.txt");
    }
    if (browser.runtime.getManifest().manifest_version === 3) {
      ewe_api.subscriptions.add(
        "https://easylist-downloads.adblockplus.org/v3/full/adblock_premium.txt",
      );
    }
  }
}

/* harmony default export */ const migration = ({
  migrateUserData,
});

// EXTERNAL MODULE: ./adblock-betafish/prefs/background/settings.js
var settings = __webpack_require__(3288);
;// CONCATENATED MODULE: ./adblock-betafish/prefs/background/index.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */





const { migrateUserData: background_migrateUserData } = migration;


/***/ }),

/***/ 3288:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ob: () => (/* binding */ settingsNotifier),
/* harmony export */   QC: () => (/* binding */ isValidTheme),
/* harmony export */   W0: () => (/* binding */ settings),
/* harmony export */   ZC: () => (/* binding */ setSetting),
/* harmony export */   mt: () => (/* binding */ getSettings),
/* harmony export */   ni: () => (/* binding */ start)
/* harmony export */ });
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_events__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(866);
/* harmony import */ var _utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7656);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser */





/* eslint-disable-next-line import/no-mutable-exports */
let settingsNotifier;
const abpPrefPropertyNames = [
  "show_statsinicon",
  "shouldShowBlockElementMenu",
  "show_devtools_panel",
  "send_ad_wall_messages",
  "data_collection_opt_out",
];
const validThemes = [
  "default_theme",
  "dark_theme",
  "watermelon_theme",
  "solarized_theme",
  "solarized_light_theme",
  "rebecca_purple_theme",
  "ocean_theme",
  "sunshine_theme",
];

// OPTIONAL SETTINGS
function Settings() {
  this.settingsKey = "settings";
  this.defaults = {
    debug_logging: false,
    youtube_channel_whitelist: true,
    youtube_manage_subscribed: true,
    show_advanced_options: false,
    display_menu_stats: true,
    show_survey: true,
    picreplacement: false,
    twitch_hiding: false,
    onpageMessages: true,
    color_themes: {
      popup_menu: "default_theme",
      options_page: "default_theme",
    },
  };
  const that = this;
  this.init = new Promise((resolve) => {
    browser.storage.local.get(that.settingsKey).then((response) => {
      const settings = response.settings || {};
      that.data = (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_0__/* .extend */ .X$)(that.defaults, settings);
      if (settings.debug_logging) {
        (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_0__/* .logging */ .m9)(true);
      }
      if ("managed" in browser.storage) {
        browser.storage.managed.get(null).then(
          (items) => {
            for (const key in items) {
              if (
                key === "suppress_update_page" ||
                key === "suppress_surveys" ||
                key === "suppress_first_run_page"
              ) {
                that.data[key] = items[key];
              }
            }
            resolve();
          },
          // Opera and FF doesn't support browser.storage.managed, but instead of simply
          // removing the API, it gives an asynchronous error which we ignore here.
          () => {
            resolve();
          },
        );
      } else {
        resolve();
      }
    });
  }).then(() => {
    (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_0__/* .log */ .Rm)("\n===SETTINGS FINISHED LOADING===\n\n");
  });
}

Settings.prototype = {
  set(name, isEnabled, callback) {
    const originalValue = this.data[name];
    // Firefox passes weak references to objects, so in case isEnabled is an object,
    // we need to store a local copy of the object
    const localIsEnabled = JSON.parse(JSON.stringify(isEnabled));
    this.data[name] = localIsEnabled;
    const that = this;

    // Don't store defaults that the user hasn't modified
    browser.storage.local.get(this.settingsKey).then((response) => {
      const storedData = response.settings || {};

      storedData[name] = localIsEnabled;
      (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_0__/* .chromeStorageSetHelper */ .AX)(that.settingsKey, storedData);
      if (originalValue !== localIsEnabled) {
        settingsNotifier.emit("settings.changed", name, localIsEnabled, originalValue);
      }
      if (callback !== undefined && typeof callback === "function") {
        callback();
      }
    });
  },

  getAll() {
    return this.data;
  },

  onload() {
    return this.init;
  },
};

/* eslint-disable-next-line import/no-mutable-exports */
let settings;

const getSettings = function () {
  return settings.getAll();
};

const setSetting = function (name, isEnabled, callback) {
  settings.set(name, isEnabled, callback);

  if (name === "debug_logging") {
    (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_0__/* .logging */ .m9)(isEnabled);
  }
};

const disableSetting = function (name) {
  settings.set(name, false);
};

const isValidTheme = (themeName) => validThemes.includes(themeName);

function start() {
  settingsNotifier = new _adblockplusui_adblockpluschrome_lib_events__WEBPACK_IMPORTED_MODULE_1__/* .EventEmitter */ .b();
  settings = new Settings();

  // Attach methods to window
  // eslint-disable-next-line no-restricted-globals
  Object.assign(self, {
    disableSetting,
    getSettings,
    setSetting,
    settings,
    settingsNotifier,
    abpPrefPropertyNames,
    isValidTheme,
  });
}


/***/ }),

/***/ 5754:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _utilities_background_index__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(199);
/* harmony import */ var _id_background_index__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7099);
/* harmony import */ var _alias_prefs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2680);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser  */






async function getExperimentsAssignments() {
  const assignments = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.experiments.getAssignments();
  return Object.entries(assignments).map((assignment) => {
    return {
      experiment_id: assignment[0],
      variant_id: assignment[1],
    };
  });
}

// Log an 'error' message on GAB log server.
const ServerMessages = (function serverMessages() {
  const { flavor } = (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_1__.getUserAgentInfo)();
  const { os } = (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_1__.getUserAgentInfo)();
  // Log a message on GAB log server. The user's userid will be prepended to the
  // message.
  // If callback() is specified, call callback() after logging has completed
  const sendMessageToLogServer = async function (payload, callback) {
    if (_alias_prefs__WEBPACK_IMPORTED_MODULE_3__/* .Prefs */ .N.get("data_collection_opt_out")) {
      return;
    }

    // eslint-disable-next-line consistent-return
    return fetch("https://log.getadblock.com/v2/record_log.php", {
      method: "POST",
      cache: "no-cache",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload),
    })
      .then(() => {
        if (typeof callback === "function") {
          callback();
        }
      })
      .catch((error) => {
        (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_1__.log)("message server returned error: ", error);
      });
  };

  // Log a message on GAB log server. The user's userid will be prepended to the
  // message.
  // If callback() is specified, call callback() after logging has completed
  const recordMessageWithUserID = async function (msg, queryType, callback, additionalParams) {
    if (!msg || !queryType) {
      return;
    }
    const payload = {
      u: await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_2__/* .getUserId */ .F)(),
      f: flavor,
      o: os,
      l: (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_1__.determineUserLanguage)(),
      t: queryType,
      v: browser.runtime.getManifest().version,
      experiments: await getExperimentsAssignments(),
    };
    if (typeof additionalParams === "object") {
      for (const prop in additionalParams) {
        payload[prop] = additionalParams[prop];
      }
    }
    const eventWithPayload = { event: msg, payload };
    // eslint-disable-next-line consistent-return
    return sendMessageToLogServer(eventWithPayload, callback);
  };

  // Log a message on GAB log server.
  // If callback() is specified, call callback() after logging has completed
  const recordAnonymousMessage = function (msg, queryType, callback, additionalParams) {
    if (!msg || !queryType) {
      return;
    }
    const payload = {
      f: flavor,
      o: os,
      l: (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_1__.determineUserLanguage)(),
      t: queryType,
    };
    if (typeof additionalParams === "object") {
      for (const prop in additionalParams) {
        payload[prop] = additionalParams[prop];
      }
    }
    const eventWithPayload = { event: msg, payload };
    sendMessageToLogServer(eventWithPayload, callback);
  };

  // Log a error message on GAB log server.
  // If callback() is specified, call callback() after logging has completed
  const recordAnonymousErrorMessage = function (msg, callback, additionalParams) {
    if (!msg) {
      return;
    }
    const payload = {
      f: flavor,
      o: os,
      l: (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_1__.determineUserLanguage)(),
      t: "error",
    };
    if (typeof additionalParams === "object") {
      for (const prop in additionalParams) {
        payload[prop] = additionalParams[prop];
      }
    }
    const eventWithPayload = { event: msg, payload };
    sendMessageToLogServer(eventWithPayload, callback);
  };

  const recordErrorMessage = function (msg, additionalParams, callback) {
    void recordMessageWithUserID(msg, "error", callback, additionalParams);
  };

  // Log an 'status' related message on GAB log server.
  const recordStatusMessage = function (msg, callback, additionalParams) {
    void recordMessageWithUserID(msg, "stats", callback, additionalParams);
  };

  // Log a 'general' message on GAB log server.
  const recordGeneralMessage = function (msg, callback, additionalParams) {
    void recordMessageWithUserID(msg, "general", callback, additionalParams);
  };

  // Log an ad wall specific 'general' message on GAB log server.
  const recordAdWallMessage = function (msg, additionalParams) {
    if (_alias_prefs__WEBPACK_IMPORTED_MODULE_3__/* .Prefs */ .N.get("send_ad_wall_messages")) {
      void recordMessageWithUserID(msg, "general", null, additionalParams);
    }
  };

  // Log a 'adreport' message on GAB log server.
  const recordAdreportMessage = function (msg, callback, additionalParams) {
    void recordMessageWithUserID(msg, "adreport", callback, additionalParams);
  };

  // Log a data-collection opt-out message on GAB log server.
  const recordOptOutMessage = async function () {
    return recordMessageWithUserID("data_collection_opt_out", "general");
  };

  // Send an error message to the backup log server. This is to be used when
  // there's fetch failure.  It may fail as well depending on the failure,
  // and state of the local computer & network
  const sendMessageToBackupLogServer = async function (msg, errorMsg, queryType = "error") {
    if (_alias_prefs__WEBPACK_IMPORTED_MODULE_3__/* .Prefs */ .N.get("data_collection_opt_out")) {
      return;
    }
    let extensionInstallTimestamp = "unknown";
    const { blockage_stats: blockageStats } = await browser.storage.local.get("blockage_stats");
    if (blockageStats && blockageStats.start) {
      extensionInstallTimestamp = new Date(blockageStats.start).toLocaleString();
    }
    const allPermissions = await browser.permissions.getAll();
    const allURLSPermission =
      allPermissions.origins && allPermissions.origins.includes("<all_urls>") ? "1" : "0";
    const payload = {
      u: await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_2__/* .getUserId */ .F)(),
      f: flavor,
      o: os,
      l: (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_1__.determineUserLanguage)(),
      t: queryType,
      v: browser.runtime.getManifest().version,
      error: errorMsg,
      extensionInstallTimestamp,
      allURLSPermission,
    };
    const eventWithPayload = { event: msg, payload };
    fetch("https://logbackup.getadblock.com/v2/record_log.php", {
      method: "POST",
      cache: "no-store",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(eventWithPayload),
    });
  };

  // Log a data-collection smart allowlist expired message on GAB log server.
  const recordAllowlistEvent = async function (eventName, allowlistDuration) {
    return recordGeneralMessage(eventName, null, { allowlistDuration });
  };

  return {
    recordAdreportMessage,
    recordAdWallMessage,
    recordAnonymousMessage,
    recordAnonymousErrorMessage,
    recordErrorMessage,
    recordGeneralMessage,
    recordStatusMessage,
    sendMessageToBackupLogServer,
    recordOptOutMessage,
    recordAllowlistEvent,
  };
})();

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ServerMessages);


/***/ }),

/***/ 6396:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  A: () => (/* binding */ subscriptionadapter)
});

// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
;// CONCATENATED MODULE: ./adblock-betafish/data/betafish-subscriptions.json
const betafish_subscriptions_namespaceObject = /*#__PURE__*/JSON.parse('{"https://easylist-downloads.adblockplus.org/exceptionrules.txt":{"id":"0798B6A2-94A4-4ADF-89ED-BEC112FC4C7F","adblockId":"acceptable_ads","index":1},"https://easylist-downloads.adblockplus.org/v3/full/exceptionrules.txt":{"id":"0798B6A2-94A4-4ADF-89ED-BEC112FC4C7F","adblockId":"acceptable_ads","index":1},"https://easylist-downloads.adblockplus.org/exceptionrules-privacy-friendly.txt":{"id":"F12E0801-A00B-49DE-B1E3-52C9C4F90C8C","adblockId":"acceptable_ads_privacy","index":2},"https://easylist-downloads.adblockplus.org/v3/full/exceptionrules-privacy-friendly.txt":{"id":"F12E0801-A00B-49DE-B1E3-52C9C4F90C8C","adblockId":"acceptable_ads_privacy","index":2},"https://easylist-downloads.adblockplus.org/v3/full/adblock_premium.txt":{"id":"CDAD4CF5-2706-42CB-B404-F5B9B61B8CAA","mv2URL":"https://easylist-downloads.adblockplus.org/adblock_premium.txt","adblockId":"distraction-control","index":4},"https://easylist-downloads.adblockplus.org/adblock_premium.txt":{"id":"CDAD4CF5-2706-42CB-B404-F5B9B61B8CAA","mv2URL":"https://easylist-downloads.adblockplus.org/adblock_premium.txt","adblockId":"distraction-control","index":4},"https://easylist-downloads.adblockplus.org/v3/full/nocoin.txt":{"adblockId":"bitcoin_mining_protection","id":"9CC3AF4D-EB89-4100-97C6-4EEE4F8A2E82","index":8},"https://raw.githubusercontent.com/hoshsadiq/adblock-nocoin-list/master/nocoin.txt":{"adblockId":"bitcoin_mining_protection","id":"9CC3AF4D-EB89-4100-97C6-4EEE4F8A2E82","index":8},"https://easylist-downloads.adblockplus.org/antiadblockfilters.txt":{"adblockId":"warning_removal","index":9},"https://easylist-downloads.adblockplus.org/v3/full/abpindo+easylist.txt":{"id":"B7D76369-DD19-4602-80E8-2E32DDB490AC","adblockId":"easylist_plus_indonesian","index":13},"https://easylist-downloads.adblockplus.org/abpindo+easylist.txt":{"id":"B7D76369-DD19-4602-80E8-2E32DDB490AC","adblockId":"easylist_plus_indonesian","index":13},"https://easylist-downloads.adblockplus.org/v3/full/abpvn+easylist.txt":{"id":"1C571EC7-6E52-47CC-B04A-4B3008D0AEBE","adblockId":"easylist_plus_vietnamese","index":14},"https://easylist-downloads.adblockplus.org/abpvn+easylist.txt":{"id":"1C571EC7-6E52-47CC-B04A-4B3008D0AEBE","adblockId":"easylist_plus_vietnamese","index":14},"https://easylist-downloads.adblockplus.org/v3/full/bulgarian_list+easylist.txt":{"id":"E22C3B40-DC90-49D7-8BF5-E60904AB159A","adblockId":"easylist_plus_bulgarian","index":15},"https://easylist-downloads.adblockplus.org/bulgarian_list+easylist.txt":{"id":"E22C3B40-DC90-49D7-8BF5-E60904AB159A","adblockId":"easylist_plus_bulgarian","index":15},"https://easylist-downloads.adblockplus.org/easylist.txt":{"id":"8C13E995-8F06-4927-BEA7-6C845FB7EEBF","adblockId":"easylist","index":16},"https://easylist-downloads.adblockplus.org/v3/full/easylist.txt":{"id":"8C13E995-8F06-4927-BEA7-6C845FB7EEBF","adblockId":"easylist","index":16},"https://easylist-downloads.adblockplus.org/v3/full/easylistchina+easylist.txt":{"id":"9BD3EA2F-889D-4CC3-B680-CF484F2BD1B9","adblockId":"chinese","index":17},"https://easylist-downloads.adblockplus.org/easylistchina+easylist.txt":{"id":"9BD3EA2F-889D-4CC3-B680-CF484F2BD1B9","adblockId":"chinese","index":17},"https://easylist-downloads.adblockplus.org/v3/full/easylistczechslovak+easylist.txt":{"id":"4B6CE485-30AB-4213-AD17-504B3F2D2825","adblockId":"czech","index":18},"https://easylist-downloads.adblockplus.org/easylistczechslovak+easylist.txt":{"id":"4B6CE485-30AB-4213-AD17-504B3F2D2825","adblockId":"czech","index":18},"https://easylist-downloads.adblockplus.org/v3/full/easylistdutch+easylist.txt":{"id":"A4B88FB6-E5E5-417F-8A49-20B8244995FD","adblockId":"dutch","index":19},"https://easylist-downloads.adblockplus.org/easylistdutch+easylist.txt":{"id":"A4B88FB6-E5E5-417F-8A49-20B8244995FD","adblockId":"dutch","index":19},"https://easylist-downloads.adblockplus.org/v3/full/easylistgermany+easylist.txt":{"id":"0CD3D105-D3B3-4652-8489-94163DE9A08F","adblockId":"easylist_plus_german","index":20},"https://easylist-downloads.adblockplus.org/easylistgermany+easylist.txt":{"id":"0CD3D105-D3B3-4652-8489-94163DE9A08F","adblockId":"easylist_plus_german","index":20},"https://easylist-downloads.adblockplus.org/v3/full/israellist+easylist.txt":{"id":"07549D8B-F06F-4D9D-A567-929AA59E9D1D","adblockId":"israeli","index":21},"https://easylist-downloads.adblockplus.org/israellist+easylist.txt":{"id":"07549D8B-F06F-4D9D-A567-929AA59E9D1D","adblockId":"israeli","index":21},"https://easylist-downloads.adblockplus.org/v3/full/easylistitaly+easylist.txt":{"id":"BBC07C05-66F1-42EC-BD4D-7AD495FAC84B","adblockId":"italian","index":22},"https://easylist-downloads.adblockplus.org/easylistitaly+easylist.txt":{"id":"BBC07C05-66F1-42EC-BD4D-7AD495FAC84B","adblockId":"italian","index":22},"https://easylist-downloads.adblockplus.org/v3/full/easylistlithuania+easylist.txt":{"id":"CBE50FA2-DE3F-480C-B1D7-04289391C033","adblockId":"easylist_plus_lithuania","index":23},"https://easylist-downloads.adblockplus.org/easylistlithuania+easylist.txt":{"id":"CBE50FA2-DE3F-480C-B1D7-04289391C033","adblockId":"easylist_plus_lithuania","index":23},"https://easylist-downloads.adblockplus.org/v3/full/easylistpolish+easylist.txt":{"id":"3D2C09D0-DF1C-4C8E-9947-A23DCEAF8F8B","adblockId":"easylist_plus_polish","index":24},"https://easylist-downloads.adblockplus.org/easylistpolish+easylist.txt":{"id":"3D2C09D0-DF1C-4C8E-9947-A23DCEAF8F8B","adblockId":"easylist_plus_polish","index":24},"https://easylist-downloads.adblockplus.org/v3/full/easylistportuguese+easylist.txt":{"id":"14DF7BE6-9675-4E07-987A-D8A1000F9FEF","adblockId":"easylist_plus_portuguese","index":25},"https://easylist-downloads.adblockplus.org/easylistportuguese+easylist.txt":{"id":"14DF7BE6-9675-4E07-987A-D8A1000F9FEF","adblockId":"easylist_plus_portuguese","index":25},"https://easylist-downloads.adblockplus.org/v3/full/easylistspanish+easylist.txt":{"id":"C3D13A19-3E8D-41F5-AD64-0F3B36DDE128","adblockId":"easylist_plus_spanish","index":26},"https://easylist-downloads.adblockplus.org/easylistspanish+easylist.txt":{"id":"C3D13A19-3E8D-41F5-AD64-0F3B36DDE128","adblockId":"easylist_plus_spanish","index":26},"https://easylist-downloads.adblockplus.org/v3/full/indianlist+easylist.txt":{"id":"25A31255-AB36-48A4-9086-06192DE71119","adblockId":"easylist_plus_indian","index":27},"https://easylist-downloads.adblockplus.org/indianlist+easylist.txt":{"id":"25A31255-AB36-48A4-9086-06192DE71119","adblockId":"easylist_plus_indian","index":27},"https://easylist-downloads.adblockplus.org/v3/full/koreanlist+easylist.txt":{"id":"2708BCB7-2E45-41BC-B517-1730CF532F89","adblockId":"easylist_plun_korean","index":28},"https://easylist-downloads.adblockplus.org/koreanlist+easylist.txt":{"id":"2708BCB7-2E45-41BC-B517-1730CF532F89","adblockId":"easylist_plun_korean","index":28},"https://easylist-downloads.adblockplus.org/v3/full/latvianlist+easylist.txt":{"id":"950C88EA-2DD1-42E3-B2A2-2DF2ED15563A","adblockId":"latvian","index":29},"https://easylist-downloads.adblockplus.org/latvianlist+easylist.txt":{"id":"950C88EA-2DD1-42E3-B2A2-2DF2ED15563A","adblockId":"latvian","index":29},"https://easylist-downloads.adblockplus.org/v3/full/liste_ar+liste_fr+easylist.txt":{"id":"684A25C6-6B5D-458A-8A2B-BAC0A12B0B15","adblockId":"easylist_plus_arabic_plus_french","index":30},"https://easylist-downloads.adblockplus.org/liste_ar+liste_fr+easylist.txt":{"id":"684A25C6-6B5D-458A-8A2B-BAC0A12B0B15","adblockId":"easylist_plus_arabic_plus_french","index":30},"https://easylist-downloads.adblockplus.org/v3/full/liste_fr+easylist.txt":{"id":"2CEA1481-C29C-44F1-A084-A2A019533797","adblockId":"easylist_plus_french","index":31},"https://easylist-downloads.adblockplus.org/liste_fr+easylist.txt":{"id":"2CEA1481-C29C-44F1-A084-A2A019533797","adblockId":"easylist_plus_french","index":31},"https://easylist-downloads.adblockplus.org/v3/full/ruadlist+easylist.txt":{"id":"1B5F78CA-8B30-4BDF-B0A3-451CB2202984","adblockId":"russian","index":32},"https://easylist-downloads.adblockplus.org/ruadlist+easylist.txt":{"id":"1B5F78CA-8B30-4BDF-B0A3-451CB2202984","adblockId":"russian","index":32},"https://easylist-downloads.adblockplus.org/v3/full/rolist+easylist.txt":{"id":"EEEF75EC-B2B4-49F4-BC49-17B08266F334","adblockId":"easylist_plus_romanian","index":33},"https://easylist-downloads.adblockplus.org/rolist+easylist.txt":{"id":"EEEF75EC-B2B4-49F4-BC49-17B08266F334","adblockId":"easylist_plus_romanian","index":33},"https://easylist-downloads.adblockplus.org/v3/full/abp-filters-anti-cv.txt":{"id":"D4028CDD-3D39-4624-ACC7-8140F4EC3238","adblockId":"anticircumvent","index":34},"https://easylist-downloads.adblockplus.org/abp-filters-anti-cv.txt":{"id":"D4028CDD-3D39-4624-ACC7-8140F4EC3238","adblockId":"anticircumvent","index":34},"https://easylist-downloads.adblockplus.org/v3/full/easyprivacy.txt":{"id":"D72B6F06-52B2-4FED-96A2-1BF59CDD7AEC","adblockId":"easyprivacy","index":35},"https://easylist-downloads.adblockplus.org/easyprivacy.txt":{"id":"D72B6F06-52B2-4FED-96A2-1BF59CDD7AEC","adblockId":"easyprivacy","index":35},"https://easylist-downloads.adblockplus.org/v3/full/fanboy-social.txt":{"id":"0A679439-445F-4DE7-84B9-88341F6DA520","adblockId":"antisocial","index":37},"https://easylist-downloads.adblockplus.org/fanboy-social.txt":{"id":"0A679439-445F-4DE7-84B9-88341F6DA520","adblockId":"antisocial","index":37},"https://secure.fanboy.co.nz/fanboy-annoyance.txt":{"id":"0B0296EB-1CC5-49CD-AD38-8AF27420B7E4","adblockId":"annoyances","index":38},"https://easylist-downloads.adblockplus.org/v3/full/fanboy-annoyance.txt":{"id":"0B0296EB-1CC5-49CD-AD38-8AF27420B7E4","adblockId":"annoyances","index":38},"https://easylist-downloads.adblockplus.org/v3/full/fanboy-notifications.txt":{"id":"5BD2BB73-459D-4A74-AF9D-A10157268350","adblockId":"fb_notifications","index":39},"https://easylist-downloads.adblockplus.org/fanboy-notifications.txt":{"id":"5BD2BB73-459D-4A74-AF9D-A10157268350","adblockId":"fb_notifications","index":39},"https://easylist-downloads.adblockplus.org/v3/full/dandelion_sprouts_nordic_filters+easylist.txt":{"id":"96932CD9-6DDF-4D97-B92F-FDF747B6FAA2","adblockId":"nordic","index":55},"https://easylist-downloads.adblockplus.org/dandelion_sprouts_nordic_filters+easylist.txt":{"id":"96932CD9-6DDF-4D97-B92F-FDF747B6FAA2","adblockId":"nordic","index":55},"https://easylist-downloads.adblockplus.org/cookie-filter-list.txt":{"id":"588470E8-E163-4CD9-A909-521B2A3BE73F","adblockId":"cookies-premium","index":56},"https://easylist-downloads.adblockplus.org/v3/full/cookie-filter-list.txt":{"id":"588470E8-E163-4CD9-A909-521B2A3BE73F","adblockId":"cookies-premium","index":56},"https://easylist-downloads.adblockplus.org/turkish-filters+easylist.txt":{"id":"D99D3350-7F11-43E1-87CB-FDE0C78E8CD6","adblockId":"turkish","index":57},"https://easylist-downloads.adblockplus.org/v3/full/turkish-filters+easylist.txt":{"id":"D99D3350-7F11-43E1-87CB-FDE0C78E8CD6","adblockId":"turkish","index":57},"https://easylist-downloads.adblockplus.org/japanese-filters+easylist.txt":{"id":"361001BD-8F57-4736-97B1-F332C3D79E5D","adblockId":"japanese","index":58},"https://easylist-downloads.adblockplus.org/v3/full/japanese-filters+easylist.txt":{"id":"361001BD-8F57-4736-97B1-F332C3D79E5D","adblockId":"japanese","index":58},"https://easylist-downloads.adblockplus.org/v3/full/hufilter+easylist.txt":{"id":"88D3F7EA-D99E-43C6-92E0-D89C8A0E7EA9","adblockId":"easylist_plus_hungarian","index":59},"https://easylist-downloads.adblockplus.org/hufilter+easylist.txt":{"id":"88D3F7EA-D99E-43C6-92E0-D89C8A0E7EA9","adblockId":"easylist_plus_hungarian","index":59},"https://easylist-downloads.adblockplus.org/v3/full/global-filters+easylist.txt":{"id":"EF6F4884-47DB-46A5-AAF8-8EB819D8D4D8","adblockId":"easylist_plus_global","index":60},"https://easylist-downloads.adblockplus.org/global-filters+easylist.txt":{"id":"EF6F4884-47DB-46A5-AAF8-8EB819D8D4D8","adblockId":"easylist_plus_global","index":60},"https://easylist-downloads.adblockplus.org/v3/full/distraction-control-free.txt":{"id":"294D21F0-B3DC-11EF-9B01-F73C7F3A4DB5","adblockId":"free_distraction_control","index":61},"https://cdn.adblockcdn.com/filters/distraction-control-free.txt":{"id":"294D21F0-B3DC-11EF-9B01-F73C7F3A4DB5","adblockId":"free_distraction_control","index":61}}');
;// CONCATENATED MODULE: ./adblock-betafish/subscriptionadapter.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */
/* For ESLint: List any global identifiers used in this file below */
/* global browser */




const legacyDistractionControlIDs = {
  "distraction-control-video": "https://cdn.adblockcdn.com/filters/distraction-control-video.txt",
  "distraction-control-survey": "https://cdn.adblockcdn.com/filters/distraction-control-survey.txt",
  "distraction-control-newsletter":
    "https://cdn.adblockcdn.com/filters/distraction-control-newsletter.txt",
  "distraction-control-push": "https://cdn.adblockcdn.com/filters/distraction-control-push.txt",
};

const v3URLCheck =
  browser.runtime.getManifest().manifest_version === 2
    ? (url) => !url.includes("/v3/")
    : (url) => url.includes("/v3/");

// Adapters & helpers to add the legacy AB 'id' to the ABP subscriptions
// Also adds the 'language' and 'hidden' properties
const SubscriptionAdapter = (function getSubscriptionAdapter() {
  const addAdBlockProperties = function (sub) {
    let subscription = Object.assign({}, sub);
    const { url } = subscription;
    if (betafish_subscriptions_namespaceObject[url]) {
      subscription = Object.assign(subscription, betafish_subscriptions_namespaceObject[url]);
      if (Object.prototype.hasOwnProperty.call(sub, "languages")) {
        subscription.languages = [].concat(sub.languages);
      }
      if (!Object.prototype.hasOwnProperty.call(subscription, "language")) {
        subscription.language = subscription.languages && subscription.languages.length > 0;
      }
    }
    subscription.correctedURL = subscription.url;
    return subscription;
  };

  // Get the URL for the corresponding ID
  const getUrlFromId = function (searchID) {
    for (const url in betafish_subscriptions_namespaceObject) {
      const subscription = betafish_subscriptions_namespaceObject[url];
      const { adblockId } = subscription;
      if (searchID === adblockId && v3URLCheck(url)) {
        return url;
      }
    }
    return "";
  };

  // Get the ID for the corresponding URL
  const getIdFromURL = function (searchURL) {
    for (const url in betafish_subscriptions_namespaceObject) {
      const subscription = betafish_subscriptions_namespaceObject[url];
      const { adblockId } = subscription;
      if (searchURL === url) {
        return adblockId;
      }
    }
    return null;
  };

  // Get the MV2 URL for the corresponding ID
  const getV2URLFromID = function (searchID) {
    for (const url in betafish_subscriptions_namespaceObject) {
      const subscription = betafish_subscriptions_namespaceObject[url];
      const { id } = subscription;
      if (searchID === id && !url.includes("/v3/")) {
        return url;
      }
    }
    return null;
  };

  // Get the MV2 URL for the corresponding URL
  // if not found, return the passed parameter
  const getV2URLFromURL = function (searchURL) {
    const subscription = betafish_subscriptions_namespaceObject[searchURL];
    if (subscription && subscription.id) {
      return getV2URLFromID(subscription.id);
    }
    return searchURL;
  };

  // determine if the specified filter list is a legacy
  // Distraction Control filter list
  // returns true if the ID is a legacy DC filter list URL
  //         false otherwise
  const isLegacyDistractionControlById = function (id) {
    return Object.prototype.hasOwnProperty.call(legacyDistractionControlIDs, id);
  };

  // determine if the specified filter list is language specific
  // returns the boolean language attribue (if found)
  //         false otherwise
  const isLanguageSpecific = function (searchID) {
    // check for EasyList, as it is a language-specific list (en), but
    // shouldn't be treated as such by the AdBlock code
    if (searchID === "easylist") {
      return false;
    }

    for (let subscription of ewe_api.subscriptions.getRecommendations()) {
      subscription = addAdBlockProperties(subscription);
      const { adblockId } = subscription;
      if (adblockId === searchID) {
        return subscription.language;
      }
    }
    return false;
  };

  // Get the ID for the corresponding URL
  const getSubscriptionInfoFromURL = function (searchURL) {
    for (let subscription of ewe_api.subscriptions.getRecommendations()) {
      subscription = addAdBlockProperties(subscription);
      const { url } = subscription;
      if (searchURL === url) {
        return subscription;
      }
    }
    return null;
  };

  // Unsubcribe the user from the subscription specified in the argument
  const unsubscribe = async function (options) {
    const subscriptionUrl = getUrlFromId(options.adblockId);
    if (subscriptionUrl !== "") {
      try {
        await ewe_api.subscriptions.remove(subscriptionUrl);
      } catch (e) {
        // do nothing
      }
    }
  };

  // Get only the user's subscriptions with in the AB format
  // without the filter contents (text)
  const getSubscriptionsMinusText = async function () {
    const result = {};
    const subscriptions = await ewe_api.subscriptions.getSubscriptions();
    subscriptions.forEach(async (subscription) => {
      const tempSub = addAdBlockProperties(subscription);
      // if the subscription doesn't have a 'adblockId' property, use the 'URL' as an
      // 'adblockId' property
      if (!tempSub.adblockId || tempSub.adblockId === undefined) {
        tempSub.adblockId = `url:${subscription.url}`;
      }
      // add the 'subscribed' property
      tempSub.subscribed = true;
      result[tempSub.adblockId] = tempSub;
    });
    return result;
  };

  const rareFilterLists = {
    "http://fanboy.co.nz/fanboy-turkish.txt": 56,
    "https://pgl.yoyo.org/adservers/serverlist.php?hostformat=adblockplus&mimetype=plaintext": 57,
    "https://adblock.gardar.net/is.abp.txt": 58,
    "https://github.com/SlashArash/adblockfa": 59,
    "https://adblock.ee/list.php": 60,
  };

  // Get a binary string representation of the users subscriptions
  const getSubscriptionsChecksum = async function () {
    let resultA = 0;
    let resultB = 0;
    const subscriptions = await ewe_api.subscriptions.getSubscriptions();
    subscriptions.forEach(async (subscription) => {
      const sub = addAdBlockProperties(subscription);
      let index = sub.index || 0; // 0 is the 'unkown' index
      // if URL wasn't found in our subscription file, check the rareFilterLists to get the index
      if (index === 0 && rareFilterLists[sub.url]) {
        index = rareFilterLists[sub.url];
      }
      index = parseInt(index, 10);
      // We can only use 31 bits because the leftmost bit is the signed bit
      if (index < 31) {
        resultA |= 2 ** index; // eslint-disable-line no-bitwise
      } else {
        resultB |= 2 ** (index - 31); // eslint-disable-line no-bitwise
      }
    });
    return resultB.toString(2).padStart(32, "0") + resultA.toString(2).padStart(31, "0");
  };

  // Get all subscriptions in the AB format
  // without the filter contents (text)
  const getAllSubscriptionsMinusText = async function () {
    const userSubs = await getSubscriptionsMinusText();
    for (const subscription of ewe_api.subscriptions.getRecommendations()) {
      const sub = addAdBlockProperties(subscription);
      const { adblockId } = sub;
      if (!(adblockId in userSubs)) {
        userSubs[adblockId] = sub;
      } else {
        Object.assign(userSubs[adblockId], sub);
      }
    }
    for (const url in betafish_subscriptions_namespaceObject) {
      let sub = Object.assign({}, betafish_subscriptions_namespaceObject[url]);
      sub.url = url;
      sub = addAdBlockProperties(sub);
      const { adblockId } = sub;
      if (!(adblockId in userSubs)) {
        userSubs[adblockId] = sub;
      }
    }
    return userSubs;
  };
  // Get all distraction control subscriptions
  // without the filter contents (text)
  const getDCSubscriptionsMinusText = async function () {
    const userSubs = await getAllSubscriptionsMinusText();
    const result = {};
    for (const adblockId in userSubs) {
      const { url, type, title, homepage, hidden, subscribed, index } = userSubs[adblockId];
      if (url === "https://easylist-downloads.adblockplus.org/adblock_premium.txt") {
        result[adblockId] = {};
        result[adblockId].subscribed = subscribed;
        result[adblockId].adblockId = adblockId;
        result[adblockId].url = url;
        result[adblockId].userSubmitted = false;
        result[adblockId].hidden = hidden;
        result[adblockId].type = type;
        result[adblockId].title = title;
        result[adblockId].homepage = homepage;
        result[adblockId].index = index;
      }
    }
    return result;
  };

  // Subcribe the user to the subscription specified in the argument
  const subscribe = function (options) {
    if (options && options.adblockId) {
      const subscriptionUrl = getUrlFromId(options.adblockId);
      if (subscriptionUrl) {
        ewe_api.subscriptions.add(subscriptionUrl);
      }
    }
  };

  return {
    getSubscriptionInfoFromURL,
    getUrlFromId,
    unsubscribe,
    subscribe,
    getSubscriptionsMinusText,
    getSubscriptionsChecksum,
    getAllSubscriptionsMinusText,
    getDCSubscriptionsMinusText,
    getIdFromURL,
    isLegacyDistractionControlById,
    legacyDistractionControlIDs,
    isLanguageSpecific,
    getV2URLFromID,
    getV2URLFromURL,
  };
})();

/* harmony default export */ const subscriptionadapter = (SubscriptionAdapter);


/***/ }),

/***/ 8042:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $8: () => (/* binding */ getCustomizedFilterCount),
/* harmony export */   _H: () => (/* binding */ getMissingFilterCount),
/* harmony export */   hs: () => (/* binding */ getWizardFilterCount),
/* harmony export */   n9: () => (/* binding */ getWebAllowlistingFilterCount),
/* harmony export */   t0: () => (/* binding */ getPopupAllowlistingFilterCount)
/* harmony export */ });
/* harmony import */ var _src_filters_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7057);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global ewe */


const allowListingFiltersRegex = new RegExp(/^allowing$/);
const allFilterTypesRegex = new RegExp(/.*/);

/**
 * Returns the number of currently active filters that match the parameters
 *
 * @param type The type of filter list rule
 *
 * @returns {number} The filter count
 */
async function getFiltersByType(typeRegEx) {
  return (await ewe.filters.getUserFilters()).filter(
    (filter) => filter.type.match(typeRegEx) && filter.enabled,
  );
}

/**
 * Returns true if the meta-data matches the origin
 *
 * @param data The filter metadata from the filter.
 * @param origin The origin from that must be matched.
 *
 * @returns {boolean} true if parameters match
 */
function doesOriginMatch(data, origin) {
  return (data && data.origin === origin) || (!data && data === origin);
}
/**
 * Returns the number of currently active filters that match the parameters
 *
 * @param origin The origin from the meta that must be matched.
 *
 * @returns {number} The filter count
 */
async function getFilterCountForOrigin(filters, origin) {
  // collect the origin from the metadata
  const filtersMetadata = await Promise.all(
    filters.map(async (filter) => ewe.filters.getMetadata(filter.text)),
  );
  // count the ones that originated from the given origin
  return filtersMetadata.filter((data) => doesOriginMatch(data, origin)).length;
}

/**
 * Returns the number of currently active filters that have been added using
 * the experimental allowlisting functionality (i.e. that originated in the
 * web, and not in the extension popup).
 *
 * @returns {number} The filter count
 */
async function getWebAllowlistingFilterCount() {
  // count the filters that originated in the web
  return getFilterCountForOrigin(
    await getFiltersByType(allowListingFiltersRegex),
    _src_filters_shared__WEBPACK_IMPORTED_MODULE_0__.FilterOrigin.web,
  );
}

/**
 * Returns the number of currently active filters that have been added using
 * the extension popup menu
 *
 * @returns {number} The filter count
 */
async function getPopupAllowlistingFilterCount() {
  // count the filters that originated from the popup menu
  return getFilterCountForOrigin(
    await getFiltersByType(allowListingFiltersRegex),
    _src_filters_shared__WEBPACK_IMPORTED_MODULE_0__.FilterOrigin.popup,
  );
}

/**
 * Returns the number of currently active filters that have been added using
 * the Customize tab of the Options page
 *
 * @returns {number} The filter count
 */
async function getCustomizedFilterCount() {
  // count the filters that originated from the customize tab
  return getFilterCountForOrigin(
    await getFiltersByType(allFilterTypesRegex),
    _src_filters_shared__WEBPACK_IMPORTED_MODULE_0__.FilterOrigin.customize,
  );
}

/**
 * Returns the number of currently active filters that have been added using
 * either of the wizards
 *
 * @returns {number} The filter count
 */
async function getWizardFilterCount() {
  // count the filters that originated from either of the wizards
  return getFilterCountForOrigin(await getFiltersByType(allFilterTypesRegex), _src_filters_shared__WEBPACK_IMPORTED_MODULE_0__.FilterOrigin.wizard);
}

/**
 * Returns the number of currently active filters that don't have any
 * meta data associated with them
 *
 * @returns {number} The filter count
 */
async function getMissingFilterCount() {
  // count the filters that don't have meta data
  return getFilterCountForOrigin(await getFiltersByType(allFilterTypesRegex), null);
}


/***/ }),

/***/ 3322:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  bm: () => (/* reexport */ IPM),
  Gy: () => (/* reexport */ TELEMETRY),
  xN: () => (/* reexport */ telemetry_base/* getAAStatus */.x),
  JD: () => (/* reexport */ startCdpOptOutListener),
  FU: () => (/* reexport */ startTelemetryOptOutListener)
});

// UNUSED EXPORTS: telemetryNotifier

// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
// EXTERNAL MODULE: ./adblock-betafish/alias/prefs.js
var prefs = __webpack_require__(2680);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/logger.ts
var logger = __webpack_require__(1328);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/bg-functions.js
var bg_functions = __webpack_require__(7656);
// EXTERNAL MODULE: ./adblock-betafish/ipm/background/index.ts
var background = __webpack_require__(8146);
// EXTERNAL MODULE: ./adblock-betafish/fetch-util.js
var fetch_util = __webpack_require__(5410);
// EXTERNAL MODULE: ./adblock-betafish/servermessages.js
var servermessages = __webpack_require__(5754);
// EXTERNAL MODULE: ./adblock-betafish/telemetry/background/telemetry-base.js
var telemetry_base = __webpack_require__(2059);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/events.js
var events = __webpack_require__(866);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/index.ts + 1 modules
var utilities_background = __webpack_require__(199);
;// CONCATENATED MODULE: ./adblock-betafish/telemetry/background/telemetry-ping.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser */









const telemetryNotifier = new events/* EventEmitter */.b();

const backupPingURLPref = "backup_ping_server_url";

class Telemetry extends telemetry_base/* default */.A {
  // Called just after we ping the server, to schedule our next ping.
  scheduleNextPing() {
    return new Promise(async (resolve) => {
      const response = await browser.storage.local.get(this.totalRequestsStorageKey);
      let totalPings = response[this.totalRequestsStorageKey];
      if (typeof totalPings !== "number" || Number.isNaN(totalPings)) {
        totalPings = 0;
      }
      totalPings += 1;
      (0,bg_functions/* chromeStorageSetHelper */.AX)(this.totalRequestsStorageKey, totalPings);

      let delayHours;
      if (totalPings === 1) {
        // Ping one hour after install
        delayHours = 1;
      } else if (totalPings < 9) {
        // Then every day for a week
        delayHours = 24;
      } else {
        // Then weekly forever
        delayHours = 24 * 7;
      }
      const millis = 1000 * 60 * 60 * delayHours;
      const nextPingTime = Date.now() + millis;
      (0,bg_functions/* chromeStorageSetHelper */.AX)(this.nextRequestTimeStorageKey, nextPingTime, (error) => {
        this.dataCorrupt = !!error;
        resolve();
      });
    });
  }

  shouldRetrySendPingData(pingData, resolve, reject, retryCount = 0) {
    // eslint-disable-next-line no-param-reassign
    retryCount += 1;
    if (retryCount < 2) {
      this.retrySendPingData(pingData, resolve, reject, retryCount);
    } else {
      reject();
    }
  }

  async retrySendPingData(pingData, resolve, reject, retryCount = 0) {
    try {
      const response = await (0,fetch_util/* default */.A)(prefs/* Prefs */.N.get(backupPingURLPref), pingData);
      if (!response || !response.ok) {
        utilities_background.error("Retry ping server returned error");
        utilities_background.error("Retry ping server URL:", prefs/* Prefs */.N.get(backupPingURLPref));
        utilities_background.error("error: ", response && response.statusText);
        this.shouldRetrySendPingData(pingData, resolve, reject, retryCount);
        return;
      }
      utilities_background.debug("retry ping success");
      telemetryNotifier.emit("ping.complete");
      resolve();
    } catch (e) {
      utilities_background.error("Error during retry ping");
      utilities_background.error("Retry ping server URL:", prefs/* Prefs */.N.get(backupPingURLPref));
      utilities_background.error("error: ", e);
      this.shouldRetrySendPingData(pingData, resolve, reject, retryCount);
    }
  }

  sendPingData(pingData) {
    return new Promise(async (resolve, reject) => {
      if (prefs/* Prefs */.N.get("data_collection_opt_out")) {
        resolve();
        return;
      }

      const response = await (0,fetch_util/* default */.A)(prefs/* Prefs */.N.get(this.hostURLPref), pingData)
        // Send any network errors during the ping fetch to a dedicated log server
        // to help us determine why there's been a drop in ping requests
        // See https://gitlab.com/adblockinc/ext/adblock/adblock/-/issues/136
        .catch((error) => {
          utilities_background.error("network error during ping");
          utilities_background.error("ping server URL: ", prefs/* Prefs */.N.get(this.hostURLPref));
          utilities_background.error("error: ", error);
          // retry any ping requests that fail for network errors
          this.retrySendPingData(pingData, resolve, reject);
          void servermessages/* default */.A.recordGeneralMessage("fetch_error");
        });
      if (!response) {
        utilities_background.error("no response from ping");
        return;
      }
      if (!response.ok) {
        utilities_background.error("Ping server returned error: ", response.statusText);
        this.retrySendPingData(pingData, resolve, reject);
        return;
      }
      utilities_background.debug("ping success");
      telemetryNotifier.emit("ping.complete");
      resolve();
    });
  }

  // Tell the server we exist.
  async pingNow() {
    const pingData = await this.getTelemetryData();
    if (!pingData.u) {
      return pingData;
    }
    // attempt to stop users that are pinging us 'a lot'
    // by checking the current ping count,
    // if the ping count is above a theshold,
    // then only ping 'occasionally'
    if (pingData.pc > 5000) {
      if (pingData.pc > 5000 && pingData.pc < 100000 && pingData.pc % 5000 !== 0) {
        return pingData;
      }
      if (pingData.pc >= 100000 && pingData.pc % 50000 !== 0) {
        return pingData;
      }
    }
    pingData.cmd = "ping";
    if (browser.management && browser.management.getSelf) {
      const info = await browser.management.getSelf();
      pingData.it = info.installType.charAt(0);
    }
    void this.sendPingData(pingData);
    return pingData;
  }
}

/* harmony default export */ const telemetry_ping = (Telemetry);

;// CONCATENATED MODULE: ./adblock-betafish/telemetry/background/telemetry-ipm.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser */











class IPMTelemetry extends telemetry_base/* default */.A {
  /**
   * Processes a response from the IPM server. Will request command execution
   * if necessary.
   *
   * @param response The response from the IPM server
   */
  static async processResponse(response) {
    if (!response || !response.ok) {
      const status = (response && response.status) || "no status";
      logger/* error */.z3(`[Telemetry]: Bad response status from IPM server: ${status}`);
      return;
    }
    telemetryNotifier.emit("ipm.ping.complete");

    // If the server responded with an empty body, we're done here.
    const body = await response.text();
    if (body.length === 0) {
      return;
    }

    // If the server responded with anything else, we assume it's a command or a list of them.
    try {
      const bodyJSON = JSON.parse(body);
      let commands;

      if (Array.isArray(bodyJSON)) {
        commands = bodyJSON;
      } else {
        // adding support to legacy server response, where we receive only one command per ping
        commands = [bodyJSON];
      }

      await (0,background/* executeIPMCommands */.Ak)(commands);
    } catch (error) {
      logger/* error */.z3("[Telemetry]: Error parsing IPM response.", error);
    }
  }

  // Called just after we ping the server, to schedule our next ping.
  scheduleNextPing() {
    return new Promise(async (resolve) => {
      const response = await browser.storage.local.get(this.totalRequestsStorageKey);
      let totalPings = response[this.totalRequestsStorageKey];
      if (typeof totalPings !== "number" || Number.isNaN(totalPings)) {
        totalPings = 0;
      }
      totalPings += 1;
      (0,bg_functions/* chromeStorageSetHelper */.AX)(this.totalRequestsStorageKey, totalPings);

      let delayHours;
      if (totalPings === 1) {
        // Ping one hour after install
        delayHours = 1;
      } else {
        // Then every day
        delayHours = 24;
      }
      const millis = 1000 * 60 * 60 * delayHours;
      let nextPingTime = Date.now() + millis;
      // The smear factor isn't added for the first ping
      // so that the first IPM ping is sent ASAP after installation
      if (totalPings >= 2) {
        const smear = Math.floor(Math.random() * 600000) + 60000;
        // add a random amount of time (between 1 minute and 11 minutes)
        // to the next ping time to avoid overloading the server
        // with requests at the same time every day
        nextPingTime += smear;
      }
      (0,bg_functions/* chromeStorageSetHelper */.AX)(this.nextRequestTimeStorageKey, nextPingTime, (error) => {
        this.dataCorrupt = !!error;
        resolve();
      });
    });
  }

  async sendPingData(pingData) {
    if (prefs/* Prefs */.N.get("data_collection_opt_out")) {
      return;
    }

    // as we about to send all user events, we can delete them
    void (0,background/* clearEvents */.lh)();
    const response = await (0,fetch_util/* default */.A)(prefs/* Prefs */.N.get(this.hostURLPref), pingData).catch((error) => {
      logger/* error */.z3("ipm ping error", error);
      servermessages/* default */.A.recordGeneralMessage("ipm_ping_error", undefined, { error });
    });
    IPMTelemetry.processResponse(response);
  }

  async pingNow() {
    const pingData = await (0,background/* getPayload */.nm)();
    await this.sendPingData(pingData);
    return pingData;
  }
}

/* harmony default export */ const telemetry_ipm = (IPMTelemetry);

;// CONCATENATED MODULE: ./adblock-betafish/telemetry/background/telemetry.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */






const IPM = new telemetry_ipm(
  "total_ipm_pings",
  "next_ipm_ping_time",
  "ipm_pingalarm",
  "ipm_server_url",
);
const TELEMETRY = new telemetry_ping(
  "total_pings",
  "next_ping_time",
  "pingalarm",
  "ping_server_url",
);

async function updateTelemetryOptout() {
  await ewe_api.telemetry.setOptOut(prefs/* Prefs */.N.get("data_collection_opt_out"));
}

async function startTelemetryOptOutListener() {
  await prefs/* Prefs */.N.untilLoaded;

  await updateTelemetryOptout();
  prefs/* Prefs */.N.on("data_collection_opt_out", updateTelemetryOptout);
}

;// CONCATENATED MODULE: ./adblock-betafish/telemetry/background/telemetry-cdp.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */





async function updateCdpOptout() {
  await ewe_api.cdp.setOptOut(prefs/* Prefs */.N.get("data_collection_opt_out"));
}

async function startCdpOptOutListener() {
  await prefs/* Prefs */.N.untilLoaded;

  await updateCdpOptout();
  prefs/* Prefs */.N.on("data_collection_opt_out", updateCdpOptout);
}

;// CONCATENATED MODULE: ./adblock-betafish/telemetry/background/index.js
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */







/***/ }),

/***/ 2059:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__),
/* harmony export */   x: () => (/* binding */ getAAStatus)
/* harmony export */ });
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _eyeo_fragments_conflict_detection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6501);
/* harmony import */ var _utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7656);
/* harmony import */ var _custom_rule__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8042);
/* harmony import */ var _alias_prefs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2680);
/* harmony import */ var _servermessages__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(5754);
/* harmony import */ var _subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(6396);
/* harmony import */ var _id_background_index__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(7099);
/* harmony import */ var _utilities_background_index__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(199);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser, channels, replacedCounts, getSettings, BigInt */













const FiftyFiveMinutes = 3300000;

// Returns `aa` property which encodes the status of Acceptable Ads
// and Acceptable Ads Privacy subscriptions
async function getAAStatus() {
  const subs = await _subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.getAllSubscriptionsMinusText();
  let result;
  if (subs) {
    const aa = subs.acceptable_ads;
    const aaPrivacy = subs.acceptable_ads_privacy;

    if (!aa && !aaPrivacy) {
      result = "u"; // Both filter lists unavailable
    } else if (aa.subscribed) {
      result = "1";
    } else if (aaPrivacy.subscribed) {
      result = "2";
    } else if (!aa.subscribed && !aaPrivacy.subscribed) {
      result = "0"; // Both filter lists unsubscribed
    }
  }
  return result;
}

class TelemetryBase {
  constructor(
    totalRequestsStorageKeyArg,
    nextRequestTimeStorageKeyArg,
    alarmNameArg,
    hostURLPrefArg,
  ) {
    this.totalRequestsStorageKey = totalRequestsStorageKeyArg;
    this.nextRequestTimeStorageKey = nextRequestTimeStorageKeyArg;
    this.alarmName = alarmNameArg;
    this.hostURLPref = hostURLPrefArg;
    this.dataCorrupt = false;
    // Get some information about the version, os, and browser
    this.version = browser.runtime.getManifest().version;
    this.os = (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.getUserAgentInfo)().os;
    this.osVersion = (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.getUserAgentInfo)().osVersion;
    this.flavor = (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.getUserAgentInfo)().flavor;
    this.browserVersion = (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.getUserAgentInfo)().browserVersion;
    this.firstRun = false;
    this.userId = "";
    // added calls to these two methods because the need to be
    // called in the first turn of the event loop
    this.addAlarmListener();
  }

  addAlarmListener = () => {
    browser.alarms.onAlarm.addListener(async (alarm) => {
      if (alarm && alarm.name === this.alarmName) {
        await this.pingNow();
        await this.scheduleNextPing();
        await this.sleepThenPing();
      }
    });
  };

  // Get the user a userid.
  async loadUserID() {
    if (!this.userId) {
      this.userId = await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_7__/* .getUserId */ .F)();
    }
    return this.userId;
  }

  // Clean up / remove old, unused data in localStorage
  cleanUpLocalStorage() {
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.storageSet)(this.totalRequestsStorageKey);
    (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.storageSet)(this.nextRequestTimeStorageKey);
  }

  async getTelemetryData() {
    const response = await browser.storage.local.get(this.totalRequestsStorageKey);
    let data = {};
    const settingsObj = getSettings();
    const totalPings = response[this.totalRequestsStorageKey] || 0;
    const themeOptionsPage = settingsObj.color_themes.options_page.replace("_theme", "");
    const themePopupMenu = settingsObj.color_themes.popup_menu.replace("_theme", "");
    let subsStr = "-1";
    if (typeof BigInt === "function") {
      subsStr = BigInt(`0b${await _subscriptionadapter__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.getSubscriptionsChecksum()}`).toString();
    }

    data = {
      u: this.userId,
      v: this.version,
      f: this.flavor,
      o: this.os,
      bv: this.browserVersion,
      ov: this.osVersion,
      ad: settingsObj.show_advanced_options ? "1" : "0",
      yt: settingsObj.youtube_channel_whitelist ? "1" : "0",
      l: (0,_utilities_background_index__WEBPACK_IMPORTED_MODULE_8__.determineUserLanguage)(),
      pc: totalPings,
      dcv2: settingsObj.data_collection_v2 ? "1" : "0",
      ldc: settingsObj.local_data_collection ? "1" : "0",
      rc: await replacedCounts.getTotalAdsReplaced(),
      to: themeOptionsPage,
      tm: themePopupMenu,
      sy: settingsObj.sync_settings ? "1" : "0",
      ir: channels.isAnyEnabled() ? "1" : "0",
      cir: channels.channelGuide[channels.getIdByName("CustomChannel")].enabled ? "1" : "0",
      tca: settingsObj.twitch_channel_allowlist ? "1" : "0",
      sup: settingsObj.suppress_update_page ? "1" : "0",
      ss: settingsObj.suppress_surveys ? "1" : "0",
      sfrp: settingsObj.suppress_first_run_page ? "1" : "0",
      opm: settingsObj.onpageMessages ? "1" : "0",
      sendadwallmessages: _alias_prefs__WEBPACK_IMPORTED_MODULE_4__/* .Prefs */ .N.send_ad_wall_messages ? "1" : "0",
      subs: subsStr,
      customfc: await (0,_custom_rule__WEBPACK_IMPORTED_MODULE_3__/* .getCustomizedFilterCount */ .$8)(),
      missingfc: await (0,_custom_rule__WEBPACK_IMPORTED_MODULE_3__/* .getMissingFilterCount */ ._H)(),
      popfc: await (0,_custom_rule__WEBPACK_IMPORTED_MODULE_3__/* .getPopupAllowlistingFilterCount */ .t0)(),
      wafc: await (0,_custom_rule__WEBPACK_IMPORTED_MODULE_3__/* .getWebAllowlistingFilterCount */ .n9)(),
      wizardfc: await (0,_custom_rule__WEBPACK_IMPORTED_MODULE_3__/* .getWizardFilterCount */ .hs)(),
      filterMigrationErrorCount: (await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getMigrationErrors()).length,
      subscriptionMigrationErrorCount: (await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.getMigrationErrors()).length,
    };

    // only on Chrome, Edge, or Firefox
    if (
      (this.flavor === "E" || this.flavor === "CM" || this.flavor === "F") &&
      _alias_prefs__WEBPACK_IMPORTED_MODULE_4__/* .Prefs */ .N.blocked_total
    ) {
      data.b = _alias_prefs__WEBPACK_IMPORTED_MODULE_4__/* .Prefs */ .N.blocked_total;
    }
    if (browser.runtime.id) {
      data.extid = browser.runtime.id;
    }
    const aaStatus = await getAAStatus();
    if (aaStatus) {
      data.aa = aaStatus;
    }

    data.crctotal = 0;
    data.crcsnippet = 0;
    data.crcelemhideemulation = 0;
    data.crcelemhideexception = 0;
    data.crcelemhide = 0;
    data.crcallowing = 0;
    data.crcblocking = 0;
    data.crccomment = 0;
    data.crcinvalid = 0;

    const userFilters = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getUserFilters();
    for (let j = 0; j < userFilters.length; j++) {
      const filter = userFilters[j];
      data[`crc${filter.type}`] += 1;
      data.crctotal += 1;
    }

    data.numberOfPartnerExt = await (0,_eyeo_fragments_conflict_detection__WEBPACK_IMPORTED_MODULE_1__/* .getNumberPartnerExt */ .Hu)();
    // Detected in the last 7 days
    data.hasUBO = Date.now() - _alias_prefs__WEBPACK_IMPORTED_MODULE_4__/* .Prefs */ .N.get("uboDetected") < 7 * 24 * 60 * 60 * 1000 ? "1" : "0";
    data.dc = this.dataCorrupt ? "1" : "0";
    data.isPinned = "-1";
    const userSettings = browser.action.getUserSettings && (await browser.action.getUserSettings());
    if (userSettings) {
      data.isPinned = userSettings.isOnToolbar ? "1" : "0";
    }
    if (browser.permissions && browser.permissions.getAll) {
      const allPermissions = await browser.permissions.getAll();
      data.dhp =
        allPermissions.origins && allPermissions.origins.includes("<all_urls>") ? "1" : "0";
    } else {
      data.dhp = "1";
    }
    return data;
  }

  // Return the number of milliseconds until the next scheduled ping.
  async millisTillNextPing() {
    // If we've detected data corruption issues,
    // then default to a 55 minute ping interval
    if (this.dataCorrupt) {
      return FiftyFiveMinutes;
    }
    const response = await browser.storage.local.get(this.nextRequestTimeStorageKey);
    if (!response[this.nextRequestTimeStorageKey]) {
      this.firstRun = true;
    }
    let nextPingTime = response[this.nextRequestTimeStorageKey];
    if (typeof nextPingTime !== "number" || Number.isNaN(nextPingTime)) {
      nextPingTime = 0;
    }
    if (nextPingTime === 0 && this.firstRun) {
      (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_2__/* .chromeStorageSetHelper */ .AX)(this.nextRequestTimeStorageKey, 100);
      return 100;
    }
    // if we don't have a 'next ping time', or it's not a valid number,
    // default to 55 minute ping interval
    if (typeof nextPingTime !== "number" || nextPingTime === 0 || Number.isNaN(nextPingTime)) {
      return FiftyFiveMinutes;
    }
    return nextPingTime - Date.now();
  }

  async sleepThenPing() {
    const delay = await this.millisTillNextPing();
    browser.alarms.create(this.alarmName, { delayInMinutes: delay / 1000 / 60 });
  }

  async start() {
    await this.loadUserID();
    // Do 'stuff' when we're first installed...
    // - send a message
    const response = await browser.storage.local.get(this.totalRequestsStorageKey);
    if (!response[this.totalRequestsStorageKey]) {
      if (browser.management && browser.management.getSelf) {
        const info = await browser.management.getSelf();
        if (info) {
          _servermessages__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.recordGeneralMessage(`new_install_${info.installType}`);
        } else {
          _servermessages__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.recordGeneralMessage("new_install");
        }
      } else {
        _servermessages__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .A.recordGeneralMessage("new_install");
      }
    }
    // This will sleep, then ping, then schedule a new ping, then
    // call itself to start the process over again.
    await this.sleepThenPing();
    this.cleanUpLocalStorage();
  }

  async untilLoaded() {
    await this.loadUserID();
    return this.userId;
  }

  get browser() {
    return {
      E: "Chrome",
      CM: "Edge",
      F: "Firefox",
    }[this.flavor];
  }
}

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (TelemetryBase);


/***/ }),

/***/ 4008:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _adblockplusui_adblockpluschrome_lib_action__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5557);
/* harmony import */ var _prefs_background__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2644);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser, addCustomFilter */





const twitchChannelNamePages = new Map();

const webRequestFilter = {
  url: [{ hostEquals: "www.twitch.tv" }],
};

// On single page sites, such as Twitch, that update the URL using the History API pushState(),
// update the badge (clear the block count) when allow listed
const historyStateHandler = async function (details) {
  if (
    details &&
    Object.prototype.hasOwnProperty.call(details, "url") &&
    Object.prototype.hasOwnProperty.call(details, "tabId") &&
    details.transitionType === "link"
  ) {
    const myURL = new URL(details.url);
    if (myURL.hostname === "www.twitch.tv") {
      const filters = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getAllowingFilters(details.tabId);
      const isAllowListed = !!filters.length;
      if (isAllowListed) {
        (0,_adblockplusui_adblockpluschrome_lib_action__WEBPACK_IMPORTED_MODULE_1__/* .setBadge */ .Wb)(details.tabId, { number: "" });
      }
    }
  }
};

// Creates a custom filter entry that whitelists a YouTube channel
// Inputs: url:string url of the page
// Returns: null if successful, otherwise an exception
const createAllowlistFilterForTwitchChannel = function (url, origin) {
  let twitchChannel;
  if (/ab_channel=/.test(url)) {
    [, twitchChannel] = url.match(/ab_channel=([^]*)/);
  } else {
    twitchChannel = url.split("/").pop();
  }
  if (twitchChannel) {
    const filter = `@@||twitch.tv/*${twitchChannel}^$document`;
    return addCustomFilter(filter, origin);
  }
  return undefined;
};

const twitchMessageHandler = function (message, sender) {
  if (message.command === "createAllowlistFilterForTwitchChannel" && message.url) {
    createAllowlistFilterForTwitchChannel(message.url, message.origin);
  }
  if (message.command === "updateTwitchChannelName" && message.channelName) {
    twitchChannelNamePages.set(sender.tab.id, message.channelName);
  }
};

const addTwitchAllowlistListeners = function () {
  twitchChannelNamePages.clear();
  browser.runtime.onMessage.addListener(twitchMessageHandler);
  browser.webNavigation.onHistoryStateUpdated.addListener(historyStateHandler, webRequestFilter);
};

const removeTwitchAllowlistListeners = function () {
  twitchChannelNamePages.clear();
  browser.runtime.onMessage.removeListener(twitchMessageHandler);
  browser.webNavigation.onHistoryStateUpdated.removeListener(historyStateHandler, webRequestFilter);
};

const start = async function () {
  await _prefs_background__WEBPACK_IMPORTED_MODULE_2__/* .settings */ .W0.onload();
  if ((0,_prefs_background__WEBPACK_IMPORTED_MODULE_2__/* .getSettings */ .mt)().twitch_channel_allowlist) {
    addTwitchAllowlistListeners();
  }
};

// eslint-disable-next-line no-restricted-globals
Object.assign(self, {
  addTwitchAllowlistListeners,
  removeTwitchAllowlistListeners,
  twitchChannelNamePages,
});

void start();


/***/ }),

/***/ 7656:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   AX: () => (/* binding */ chromeStorageSetHelper),
/* harmony export */   EI: () => (/* binding */ storageSet),
/* harmony export */   PM: () => (/* binding */ chromeStorageDeleteHelper),
/* harmony export */   RI: () => (/* binding */ isEmptyObject),
/* harmony export */   Rm: () => (/* binding */ log),
/* harmony export */   X$: () => (/* binding */ extend),
/* harmony export */   YK: () => (/* binding */ migrateData),
/* harmony export */   h_: () => (/* binding */ reloadOptionsPageTabs),
/* harmony export */   i_: () => (/* binding */ sessionStorageSet),
/* harmony export */   "if": () => (/* binding */ storageGet),
/* harmony export */   m9: () => (/* binding */ logging),
/* harmony export */   mI: () => (/* binding */ sessionStorageGet),
/* harmony export */   s3: () => (/* binding */ chromeStorageGetHelper),
/* harmony export */   v0: () => (/* binding */ determineUserLanguage),
/* harmony export */   wY: () => (/* binding */ parseUri),
/* harmony export */   yf: () => (/* binding */ createFilterMetaData)
/* harmony export */ });
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser */

/* eslint-disable import/no-mutable-exports */
let log = function log() {};
// Enabled in adblock_start_common.js and background.js if the user wants
const logging = function (enabled) {
  if (enabled) {
    /* eslint-disable  @typescript-eslint/no-shadow */
    log = function log(...args) {
      // eslint-disable-next-line no-console
      console.log(...args);
    };
  }
};
logging(false); // disabled by default

// Determine what language the user's browser is set to use
const determineUserLanguage = function () {
  return browser.i18n.getUILanguage();
};

// Parse a URL. Based upon http://blog.stevenlevithan.com/archives/parseuri
// parseUri 1.2.2, (c) Steven Levithan <stevenlevithan.com>, MIT License
// Inputs: url: the URL you want to parse
// Outputs: object containing all parts of |url| as attributes
const parseUriRegEx =
  /^(([^:]+(?::|$))(?:(?:\w+:)?\/\/)?(?:[^:@/]*(?::[^:@/]*)?@)?(([^:/?#]*)(?::(\d*))?))((?:[^?#/]*\/)*[^?#]*)(\?[^#]*)?(#.*)?/;
const parseUri = function (url) {
  const matches = parseUriRegEx.exec(url);

  // The key values are identical to the JS location object values for that key
  const keys = [
    "href",
    "origin",
    "protocol",
    "host",
    "hostname",
    "port",
    "pathname",
    "search",
    "hash",
  ];
  const uri = {};
  for (let i = 0; matches && i < keys.length; i++) {
    uri[keys[i]] = matches[i] || "";
  }
  return uri;
};

// Parses the search part of a URL into a key: value object.
// e.g., ?hello=world&ext=adblock would become {hello:"world", ext:"adblock"}
// Inputs: search: the search query of a URL. Must have &-separated values.
parseUri.parseSearch = function parseSearch(searchQuery) {
  const params = {};
  let search = searchQuery;
  let pair;

  // Fails if a key exists twice (e.g., ?a=foo&a=bar would return {a:"bar"}
  search = search.substring(search.indexOf("?") + 1).split("&");

  for (let i = 0; i < search.length; i++) {
    pair = search[i].split("=");
    if (pair[0] && !pair[1]) {
      pair[1] = "";
    }
    const pairKey = decodeURIComponent(pair[0]);
    const pairValue = decodeURIComponent(pair[1]);
    if (pairKey && pairValue !== "undefined") {
      params[pairKey] = pairValue;
    }
  }
  return params;
};

// Strip third+ level domain names from the domain and return the result.
// Inputs: domain: the domain that should be parsed
// keepDot: true if trailing dots should be preserved in the domain
// Returns: the parsed domain
parseUri.secondLevelDomainOnly = function stripThirdPlusLevelDomain(domain, keepDot) {
  if (domain) {
    const match = domain.match(/([^.]+\.(?:co\.)?[^.]+)\.?$/) || [domain, domain];
    return match[keepDot ? 0 : 1].toLowerCase();
  }

  return domain;
};

const sessionStorageMap = new Map();
//
// Inputs: key:string.
// Returns value if key exists, else undefined.
/**
 * @deprecated consider using SessionStorage
 */
const sessionStorageGet = function (key) {
  return sessionStorageMap.get(key);
};

// Inputs: key:string, value:object.
// If value === undefined, removes key from storage.
// Returns undefined.
/**
 * @deprecated consider using SessionStorage
 */
const sessionStorageSet = function (key, value) {
  if (value === undefined) {
    sessionStorageMap.delete(key);
    return;
  }
  sessionStorageMap.set(key, value);
};

// Inputs: key:string.
// Returns object from localStorage.
// The following two functions should only be used when
// multiple 'sets' & 'gets' may occur in immediately preceding each other
// browser.storage.local.get & set instead
// deprecated on background / service worker pages
/**
 * @deprecated consider using browser.storage.local
 */
const storageGet = function (key) {
  if (typeof localStorage === "undefined") {
    return undefined;
  }
  const store = localStorage;
  const json = store.getItem(key);
  if (json == null) {
    return undefined;
  }
  try {
    return JSON.parse(json);
  } catch (e) {
    log(`Couldn't parse json for ${key}`, e);
    return undefined;
  }
};

// Inputs: key:string, value:object.
// If value === undefined, removes key from storage.
// Returns undefined.
/**
 * @deprecated consider using browser.storage.local
 */
const storageSet = function (key, value) {
  if (typeof localStorage === "undefined") {
    return;
  }
  const store = localStorage;
  if (value === undefined) {
    store.removeItem(key);
    return;
  }
  try {
    store.setItem(key, JSON.stringify(value));
  } catch (ex) {
    // eslint-disable-next-line no-console
    console.log(ex);
  }
};

const chromeStorageSetHelper = function (key, value, callback) {
  const items = {};
  items[key] = value;
  browser.storage.local
    .set(items)
    .then(() => {
      if (typeof callback === "function") {
        callback();
      }
    })
    .catch((error) => {
      if (typeof callback === "function") {
        callback(error);
      }
    });
};

const chromeStorageGetHelper = function (storageKey) {
  return new Promise((resolve, reject) => {
    browser.storage.local
      .get(storageKey)
      .then((items) => {
        resolve(items[storageKey]);
      })
      .catch((error) => {
        // eslint-disable-next-line no-console
        console.error(error);
        reject(error);
      });
  });
};

const chromeStorageDeleteHelper = function (key) {
  return browser.storage.local.remove(key);
};

// Migrate any stored data from localStorage to
// chrome.storage.local
// if the data is successfully migrated to chrome.storage,
// then the original data in localStorage is removed
// Inputs:
//   key: string - the data storage key
//   parseData: Boolean - indicates if the stored data should be parse prior to being saved
//                        in chrome.storage
const migrateData = function (key, parseData) {
  return new Promise((resolve, reject) => {
    /* eslint-disable no-restricted-globals */
    if (typeof self.localStorage === "undefined") {
      resolve();
    }
    let data = localStorage.getItem(key);
    if (data) {
      if (parseData) {
        data = JSON.parse(data);
      }

      chromeStorageSetHelper(key, data, (error) => {
        if (!error) {
          if (typeof localStorage !== "undefined") {
            localStorage.removeItem(key);
          }
          resolve();
        } else {
          reject(error);
        }
      });
    } else {
      resolve();
    }
  });
};

const reloadOptionsPageTabs = function () {
  const optionTabQuery = {
    url: `chrome-extension://${browser.runtime.id}/options.html*`,
  };
  browser.tabs.query(optionTabQuery).then((tabs) => {
    for (const i in tabs) {
      browser.tabs.reload(tabs[i].id);
    }
  });
};

// eslint-disable-next-line max-len
const isEmptyObject = (obj) =>
  !!(obj && Object.keys(obj).length === 0 && obj.constructor === Object);

// mimics jQuery's functionality
function extend(primaryArg, ...args) {
  const obj = primaryArg;
  for (let i = 0; i < args.length; i++) {
    for (const key in args[i]) {
      if (Object.prototype.hasOwnProperty.call(args[i], key)) {
        obj[key] = args[i][key];
      }
    }
  }
  return obj;
}

// Creates the meta data to be saved with a users custom filter rules
// Return a new object that the following structure:
// created - a Integer representing the number of milliseconds elapsed
//           since January 1, 1970 00:00:00 UTC.
// origin - a String representing the method that user added the filter rule
//
// Inputs: origin? - optional value
const createFilterMetaData = (origin) => {
  const data = { created: Date.now() };
  if (origin) {
    data.origin = origin;
  }
  return data;
};


/***/ }),

/***/ 5412:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _prefs_background_settings__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3288);
/*
 * This file is part of AdBlock  <https://getadblock.com/>,
 * Copyright (C) 2013-present  Adblock, Inc.
 *
 * AdBlock is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * AdBlock is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with AdBlock.  If not, see <http://www.gnu.org/licenses/>.
 */

/* For ESLint: List any global identifiers used in this file below */
/* global browser, addCustomFilter, getUserFilters, isAllowlistFilter */




const ytChannelNamePages = new Map();

const webRequestFilter = {
  url: [{ hostEquals: "www.youtube.com" }],
};

let lastInjectedTimestamp = 10000;

// Creates a custom filter entry that whitelists a YouTube channel
// Inputs: channelName:string parsed channel name
// Returns:  null if successful, otherwise an exception
const createAllowlistFilterForYoutubeChannelName = function (channelName, origin) {
  if (channelName) {
    const filterText = `@@||www.youtube.com/*${channelName}|$document`;
    return addCustomFilter(filterText, origin);
  }
  return undefined;
};

// Creates a custom filter entry that whitelists a YouTube channel
// Inputs: url:string url of the page
// Returns: null if successful, otherwise an exception
const createWhitelistFilterForYoutubeChannel = function (url, origin) {
  let ytChannel;
  if (/ab_channel=/.test(url)) {
    [, ytChannel] = url.match(/ab_channel=([^]*)/);
  } else {
    ytChannel = url.split("/").pop();
  }
  if (ytChannel) {
    return createAllowlistFilterForYoutubeChannelName(ytChannel, origin);
  }
  return undefined;
};

const removeAllowlistFilterForYoutubeChannel = function (text) {
  if (isAllowlistFilter(text)) {
    _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.remove([text]);
  }
};

const injectScript = async function (scriptFileName, tabId) {
  try {
    if (browser.scripting) {
      return browser.scripting.executeScript({
        target: { tabId, allFrames: false },
        files: [scriptFileName],
      });
    }
    return browser.tabs.executeScript(tabId, {
      file: scriptFileName,
      allFrames: false,
      runAt: "document_start",
    });
  } catch (error) {
    /* eslint-disable-next-line no-console */
    console.error(error);
    return null;
  }
};

// inject the manage YT subscription
const injectManagedContentScript = async function (details, historyUpdated) {
  const { tabId } = details;
  const pingResponse = await browser.tabs.sendMessage(tabId, { command: "ping_yt_manage_cs" });
  // Since the onHistoryStateUpdated may get called more than once with the exact same data,
  // check the timestamps, and only inject the content script once
  const diff = details.timeStamp - lastInjectedTimestamp;
  if (pingResponse && pingResponse.status === "yes") {
    lastInjectedTimestamp = details.timeStamp;
    void browser.tabs.sendMessage(tabId, { command: "addYouTubeOnPageIcons", historyUpdated });
  } else if (diff > 100) {
    // check if the timestamp difference is more than 100 ms
    lastInjectedTimestamp = details.timeStamp;
    await Promise.all([
      injectScript("globals-front.js", tabId),
      injectScript("purify.min.js", tabId),
    ]);
    await injectScript("adblock-yt-manage-cs.js", tabId);
    void browser.tabs.sendMessage(tabId, { command: "addYouTubeOnPageIcons", historyUpdated });
  }
};

const managedSubPageCompleted = async (details) => {
  await _prefs_background_settings__WEBPACK_IMPORTED_MODULE_1__/* .settings */ .W0.onload();

  if (!(0,_prefs_background_settings__WEBPACK_IMPORTED_MODULE_1__/* .getSettings */ .mt)().youtube_channel_whitelist || !(0,_prefs_background_settings__WEBPACK_IMPORTED_MODULE_1__/* .getSettings */ .mt)().youtube_manage_subscribed) {
    browser.webNavigation.onCompleted.removeListener(managedSubPageCompleted, webRequestFilter);
    return;
  }

  const theURL = new URL(details.url);
  if (theURL.pathname === "/feed/channels") {
    void injectManagedContentScript(details);
  }
};

// On single page sites, such as YouTube, that update the URL using the History API pushState(),
// they don't actually load a new page, we need to get notified when this happens
// and trigger the injection of the manage subscription content script when the user
// navigates to the page via YT
const ytHistoryHandler = async (details) => {
  await _prefs_background_settings__WEBPACK_IMPORTED_MODULE_1__/* .settings */ .W0.onload();

  if (!(0,_prefs_background_settings__WEBPACK_IMPORTED_MODULE_1__/* .getSettings */ .mt)().youtube_channel_whitelist) {
    browser.webNavigation.onHistoryStateUpdated.removeListener(ytHistoryHandler, webRequestFilter);
    return;
  }

  if (
    details &&
    Object.prototype.hasOwnProperty.call(details, "tabId") &&
    Object.prototype.hasOwnProperty.call(details, "url") &&
    details.transitionType === "link"
  ) {
    const myURL = new URL(details.url);
    if ((0,_prefs_background_settings__WEBPACK_IMPORTED_MODULE_1__/* .getSettings */ .mt)().youtube_manage_subscribed && myURL.pathname === "/feed/channels") {
      // check if the user clicked the back / forward buttons, if so,
      // the data on the page is already loaded,
      // so the content script does not have to wait for it to load.
      void injectManagedContentScript(
        details,
        !(details.transitionQualifiers && details.transitionQualifiers.includes("forward_back")),
      );
    }
  }
};

const addYTChannelListeners = function () {
  browser.webNavigation.onHistoryStateUpdated.addListener(ytHistoryHandler, webRequestFilter);
  browser.webNavigation.onCompleted.addListener(managedSubPageCompleted, webRequestFilter);
};

const removeYTChannelListeners = function () {
  browser.webNavigation.onHistoryStateUpdated.removeListener(ytHistoryHandler, webRequestFilter);
  browser.webNavigation.onCompleted.removeListener(managedSubPageCompleted, webRequestFilter);
};

const openYTManagedSubPage = function () {
  browser.tabs.create({ url: "https://www.youtube.com/feed/channels" });
};

const getAllAdsAllowedUserFilters = async function () {
  const userFilters = await getUserFilters();
  const adsAllowedUserFilters = [];
  for (let inx = 0; inx < userFilters.length; inx++) {
    const filter = userFilters[inx];
    if (isAllowlistFilter(filter.text) && filter.text && filter.text.includes("youtube.com")) {
      adsAllowedUserFilters.push(filter.text);
    }
  }
  return adsAllowedUserFilters;
};

const start = function () {
  addYTChannelListeners();
};

// Listen for the message from the content scripts
browser.runtime.onMessage.addListener((message, sender, sendResponse) => {
  if (message.command === "updateYouTubeChannelName" && message.channelName) {
    ytChannelNamePages.set(sender.tab.id, message.channelName);
    sendResponse({});
    return;
  }
  if (message.command === "getAllAdsAllowedUserFilters") {
    /* eslint-disable consistent-return */
    return getAllAdsAllowedUserFilters();
  }
  if (message.command === "removeAllowlistFilterForYoutubeChannel" && message.text) {
    removeAllowlistFilterForYoutubeChannel(message.text);
    sendResponse({});
  }
  if (message.command === "createWhitelistFilterForYoutubeChannel" && message.url) {
    sendResponse(createWhitelistFilterForYoutubeChannel(message.url, message.origin));
  }
  if (message.command === "createAllowlistFilterForYoutubeChannelName" && message.channelName) {
    sendResponse(createAllowlistFilterForYoutubeChannelName(message.channelName, message.origin));
  }
  if (message.command === "blockAllSubscribedChannel" && message.channelNames) {
    setTimeout(async () => {
      const { channelNames } = message;
      const parsedChannelNames = [];
      const userFilters = await getAllAdsAllowedUserFilters();
      for (const [channelName] of Object.entries(channelNames)) {
        const name = channelNames[channelName].parsedChannelName;
        parsedChannelNames.push(name);
        for (let inx = 0; inx < userFilters.length; inx++) {
          const filterText = userFilters[inx];
          if (filterText.indexOf(name) > 1) {
            removeAllowlistFilterForYoutubeChannel(filterText);
          }
        }
      }
    }, 10);
    sendResponse({});
  }
  if (message.command === "allowAllSubscribedChannel" && message.channelNames) {
    const { channelNames } = message;
    for (const [channelName] of Object.entries(channelNames)) {
      const name = channelNames[channelName].parsedChannelName;
      createAllowlistFilterForYoutubeChannelName(name);
    }
    sendResponse({});
  }
});

// eslint-disable-next-line no-restricted-globals
Object.assign(self, {
  addYTChannelListeners,
  removeYTChannelListeners,
  ytChannelNamePages,
  openYTManagedSubPage,
});

start();


/***/ }),

/***/ 5557:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Wb: () => (/* binding */ setBadge),
/* harmony export */   lK: () => (/* binding */ setIconPath),
/* harmony export */   pT: () => (/* binding */ setIconImageData)
/* harmony export */ });
/* unused harmony export toggleBadge */
/* harmony import */ var _storage_tab_session_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1583);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



let badgeStateByPage = new _storage_tab_session_js__WEBPACK_IMPORTED_MODULE_0__/* .TabSessionStorage */ .b("action:badgeState");
let changesByPage = new _storage_tab_session_js__WEBPACK_IMPORTED_MODULE_0__/* .TabSessionStorage */ .b("action:changes");

async function setBadgeState(tabId, key, value) {
  return badgeStateByPage.transaction(async () => {
    let badgeState = await badgeStateByPage.get(tabId);

    if (!badgeState) {
      return {
        hiddenState: "visible",
        text: "",
      };
    }

    // We need to ignore any text changes while we're hiding the badge
    if (!(badgeState.hiddenState == "hiding" && key == "text")) badgeState[key] = value;

    await badgeStateByPage.set(tabId, badgeState);

    return badgeState;
  });
}

function applyChanges(tabId, changes) {
  return Promise.all(
    Object.keys(changes).map(async (change) => {
      // Firefox for Android displays the browser action not as an icon but
      // as a menu item. There is no icon, but such an option may be added
      // in the future.
      // https://bugzilla.mozilla.org/show_bug.cgi?id=1331746
      if (change == "iconPath" && "setIcon" in browser.action) {
        const path = {
          16: changes.iconPath.replace("$size", "16"),
          20: changes.iconPath.replace("$size", "20"),
          32: changes.iconPath.replace("$size", "32"),
          40: changes.iconPath.replace("$size", "40"),
        };

        return browser.action.setIcon({
          tabId,
          path,
        });
      }

      if (change == "iconImageData" && "setIcon" in browser.action) {
        return browser.action.setIcon({
          tabId,
          imageData: changes.iconImageData,
        });
      }

      // There is no badge on Firefox for Android; the browser action is
      // simply a menu item.
      if (change == "badgeText" && "setBadgeText" in browser.action) {
        // Remember changes to the badge text but don't apply them yet
        // as long as the badge is hidden.
        let badgeState = await setBadgeState(tabId, "text", changes.badgeText);
        if (badgeState.hiddenState == "hidden") return;

        return browser.action.setBadgeText({
          tabId,
          text: changes.badgeText,
        });
      }

      // There is no badge on Firefox for Android; the browser action is
      // simply a menu item.
      if (change == "badgeColor" && "setBadgeBackgroundColor" in browser.action) {
        return browser.action.setBadgeBackgroundColor({
          tabId,
          color: changes.badgeColor,
        });
      }
    }),
  );
}

function addChange(tabId, name, value) {
  void changesByPage.transaction(async () => {
    const changes = (await changesByPage.get(tabId)) || {};
    changes[name] = value;
    await changesByPage.set(tabId, changes);

    try {
      await applyChanges(tabId, changes);
      await changesByPage.delete(tabId);
    } catch (e) {
      // If the tab is prerendered, browser.action.set* fails
      // and we have to delay our changes until the currently visible tab
      // is replaced with the prerendered tab.
    }
  });
}

function onReplaced(addedTabId) {
  void changesByPage.transaction(async () => {
    const changes = await changesByPage.get(addedTabId);
    if (!changes) return;

    try {
      await applyChanges(addedTabId, changes);
    } catch (e) {
      // Ignore if we fail to apply the changes
    }

    await changesByPage.delete(addedTabId);
  });
}
// If the tab is prerendered, browser.action.set* fails
// and we have to delay our changes until the currently visible tab
// is replaced with the prerendered tab.
browser.tabs.onReplaced.addListener(onReplaced);

/**
 * Sets icon badge for given tab.
 *
 * @param {number} tabId
 * @param {object} badge
 * @param {string} badge.color
 * @param {string} badge.number
 */
function setBadge(tabId, badge) {
  if (!badge) {
    addChange(tabId, "badgeText", "");
  } else {
    if ("number" in badge) addChange(tabId, "badgeText", badge.number.toString());

    if ("color" in badge) addChange(tabId, "badgeColor", badge.color);
  }
}

/**
 * Sets icon image for given tab using image data.
 *
 * @param  {number} tabId
 * @param  {object} imageData
 */
function setIconImageData(tabId, imageData) {
  addChange(tabId, "iconImageData", imageData);
}

/**
 * Sets icon image for given tab using file path.
 *
 * @param  {number} tabId
 * @param  {string} path - expected to include "$size" placeholder
 */
function setIconPath(tabId, path) {
  addChange(tabId, "iconPath", path);
}

/**
 * Toggles icon badge for given tab.
 *
 * @param  {number} tabId
 * @param  {boolean} shouldHide
 */
async function toggleBadge(tabId, shouldHide) {
  if (shouldHide) {
    await setBadgeState(tabId, "hiddenState", "hiding");
    addChange(tabId, "badgeText", "");
    await setBadgeState(tabId, "hiddenState", "hidden");
  } else {
    let badgeState = await setBadgeState(tabId, "hiddenState", "visible");
    addChange(tabId, "badgeText", badgeState.text);
  }
}


/***/ }),

/***/ 4336:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   pf: () => (/* binding */ revalidateAllowlistingStates),
/* harmony export */   v: () => (/* binding */ allowlistingState)
/* harmony export */ });
/* unused harmony export allowlist */
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _messaging_port_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(297);
/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(866);
/* harmony import */ var _filterConfiguration_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(2189);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module allowlisting */







let allowlistedDomainRegexp = /^@@\|\|([^/:]+)\^\$document$/;
let eventEmitter = new _events_js__WEBPACK_IMPORTED_MODULE_3__/* .EventEmitter */ .b();

/**
 * @typedef {object} filtersIsAllowlistedResult
 * @property {boolean} hostname
 *   True if an allowing filter for an entire domain matches the given page.
 * @property {boolean} page
 *   True if an allowing filter _not_ for an entire domain matches the given
 *   page.
 */

/**
 * Checks if the given page is allowlisted.
 *
 * @event "filters.isAllowlisted"
 * @returns {filtersIsAllowlistedResult}
 */
_messaging_port_js__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("filters.isAllowlisted", async (message) => {
  let pageAllowlisted = false;
  let hostnameAllowlisted = false;

  for (let filterText of await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getAllowingFilters(message.tab.id)) {
    if (allowlistedDomainRegexp.test(filterText)) hostnameAllowlisted = true;
    else pageAllowlisted = true;

    if (pageAllowlisted && hostnameAllowlisted) break;
  }

  return { hostname: hostnameAllowlisted, page: pageAllowlisted };
});

async function allowlist({ hostname, origin, singlePage = false, url }) {
  let filterText;

  if (!hostname && !url) throw new Error("Hostname or URL required");

  if (url) {
    if (!(url instanceof URL)) throw new Error("Invalid URL");

    if (singlePage) {
      // We generate a filter which only applies to the same protocol and
      // subdomain, but one which doesn't consider the exact query string or
      // fragment.
      // Our logic here is taken from the legacy Firefox extension.
      // See https://hg.adblockplus.org/adblockplus/file/tip/lib/ui.js#l1517
      let ending = "|";
      url.hash = "";
      if (url.search && url.search.includes("&")) {
        url.search = "";
        ending = "?";
      }
      filterText = `@@|${url.href}${ending}$document`;
    } else {
      hostname = url.hostname;
    }
  }

  if (!filterText) {
    let host = hostname.replace(/^www\./, "");
    filterText = `@@||${host}^$document`;
  }

  await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.enable([filterText]);

  const filterSubscriptions = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.getForFilter(filterText);
  if (filterSubscriptions.length == 0) await (0,_filterConfiguration_js__WEBPACK_IMPORTED_MODULE_2__/* .addFilter */ .U2)(filterText, origin);
}

/**
 * Adds an allowing filter for the given page's hostname, if it is not
 * already allowlisted. Note: If a disabled allowing filter exists, we
 * enable that instead.
 *
 * @event "filters.allowlist"
 * @proper {string} [origin]
 *   String indicating where the filter originated from.
 * @property {boolean} [singlePage=false]
 *   If true we add an allowing filter for the given page's URL instead.
 * @property {object} tab
 *   Tab that contains the page to allowlist.
 */
_messaging_port_js__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("filters.allowlist", async (message) => {
  let page = new ext.Page(message.tab);
  await allowlist({
    origin: message.origin,
    singlePage: message.singlePage,
    url: page.url,
  });
});

/**
 * Remove any allowing filters which apply to the given page's URL.
 *
 * @event "filters.unallowlist"
 * @property {boolean} [singlePage=false]
 *   If true we only remove allowing filters which are not for an entire
 *   domain.
 */
_messaging_port_js__WEBPACK_IMPORTED_MODULE_1__/* .port */ .O.on("filters.unallowlist", async (message) => {
  for (let filterText of await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getAllowingFilters(message.tab.id)) {
    if (message.singlePage && allowlistedDomainRegexp.test(filterText)) continue;

    await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.remove([filterText]);

    const filterSubscriptions = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.getForFilter(filterText);
    if (filterSubscriptions.length != 0) await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.disable([filterText]);
  }
});

/**
 * @namespace
 * @static
 */
let allowlistingState = {
  /**
   * Adds a listener for the given event name.
   *
   * @param {string} name
   * @param {function} listener
   */
  addListener: eventEmitter.on.bind(eventEmitter),

  /**
   * Removes a listener for the given event name.
   *
   * @param {string} name
   * @param {function} listener
   */
  removeListener: eventEmitter.off.bind(eventEmitter),
};

async function revalidateAllowlistingState(page) {
  const allowingFilters = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.getAllowingFilters(page.id);
  eventEmitter.emit("changed", page, allowingFilters.length > 0);
}

async function revalidateAllowlistingStates() {
  let tabs = await browser.tabs.query({});
  for (let tab of tabs) revalidateAllowlistingState(new ext.Page(tab));
}

ext.pages.onLoaded.addListener(revalidateAllowlistingState);
_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.onAdded.addListener(revalidateAllowlistingStates);
_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.onChanged.addListener(async (filter, property) => {
  if (property !== "enabled") return;

  await revalidateAllowlistingStates();
});
_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.filters.onRemoved.addListener(revalidateAllowlistingStates);
_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.onAdded.addListener(revalidateAllowlistingStates);
_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.onChanged.addListener(async (subscription, property) => {
  if (property !== null && property !== "enabled") return;

  await revalidateAllowlistingStates();
});
_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.subscriptions.onRemoved.addListener(revalidateAllowlistingStates);


/***/ }),

/***/ 8796:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony import */ var _messaging_port_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(297);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



let lastError = null;

function safeToString(value) {
  try {
    return String(value);
  } catch (e) {
    return "<string conversion error>";
  }
}

self.addEventListener("error", (event) => {
  lastError = safeToString(event.error);
});

self.addEventListener("unhandledrejection", (event) => {
  lastError = safeToString(event.reason);
});

let consoleError = console.error;
console.error = function error(...args) {
  lastError = args.map(safeToString).join(" ");
  consoleError.apply(this, args);
};

_messaging_port_js__WEBPACK_IMPORTED_MODULE_0__/* .port */ .O.on("debug.getLastError", () => {
  let error = lastError;
  lastError = null;
  return error;
});


/***/ }),

/***/ 453:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";

// EXTERNAL MODULE: ./build/templates/info.chrome.js.tmpl
var info_chrome_js = __webpack_require__(9336);
// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/messaging/events.js
var events = __webpack_require__(4299);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/messaging/port.js
var port = __webpack_require__(297);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/messaging/types.js
var types = __webpack_require__(8237);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/storage/tab-session.js
var tab_session = __webpack_require__(1583);
;// CONCATENATED MODULE: ./adblockplusui/adblockpluschrome/lib/versions.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */

function parseVersionComponent(comp) {
  if (comp == "*") return Infinity;
  return parseInt(comp, 10) || 0;
}

/**
 * Compares two versions.
 *
 * @param {string} v1 The first version.
 * @param {string} v2 The second version.
 *
 * @returns {number} `-1` if `v1` is older than `v2`; `1` if `v1` is newer than
 *   `v2`; otherwise `0`.
 *
 * @package
 */
function compareVersions(v1, v2) {
  let regexp = /^(.*?)([a-z].*)?$/i;
  let [, head1, tail1] = regexp.exec(v1);
  let [, head2, tail2] = regexp.exec(v2);
  let components1 = head1.split(".");
  let components2 = head2.split(".");

  for (let i = 0; i < components1.length || i < components2.length; i++) {
    let result = parseVersionComponent(components1[i]) - parseVersionComponent(components2[i]) || 0;

    if (result < 0) return -1;
    else if (result > 0) return 1;
  }

  // Compare version suffix (e.g. 0.1alpha < 0.1b1 < 01.b2 < 0.1).
  // However, note that this is a simple string comparision, meaning: b10 < b2
  if (tail1 == tail2) return 0;
  if (!tail1 || (tail2 && tail1 > tail2)) return 1;
  return -1;
}

;// CONCATENATED MODULE: ./adblockplusui/adblockpluschrome/lib/devtools.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module devtools */











const reloadStateByPage = new tab_session/* TabSessionStorage */.b("devtools:reloadState");

async function onBlockableItem(emit, blockableItem) {
  const { filter } = blockableItem;

  let subscriptions = [];
  if (filter) {
    subscriptions = await ewe_api.subscriptions.getForFilter(filter.text);
    subscriptions = subscriptions
      .filter((subscription) => subscription.enabled)
      .map(types/* toPlainSubscription */.pk);
  }

  emit((0,types/* toPlainBlockableItem */.Kh)(blockableItem), filter ? (0,types/* toPlainFilter */.WP)(filter) : null, subscriptions);
}

function onPageFrame(emit, details) {
  void reloadStateByPage.transaction(async () => {
    const { tabId } = details;
    const reloadState = await reloadStateByPage.get(tabId);

    // Clear the devtools panel and reload the inspected tab without caching
    // when a new request is issued. However, make sure that we don't end up
    // in an infinite recursion if we already triggered a reload.
    if (reloadState === "reloading") {
      await reloadStateByPage.delete(tabId);
      return;
    }

    emit("requests", "reset");

    // We can't repeat the request if it isn't a GET request. The browser would
    // prompt the user to confirm reloading the page, and POST requests are
    // known to cause issues on many websites if repeated.
    if (details.method === "GET") await reloadStateByPage.set(tabId, "needsReload");
  });
}

function onPageLoad(page) {
  void reloadStateByPage.transaction(async () => {
    const reloadState = await reloadStateByPage.get(page.id);

    // Reloading the tab is the only way that allows bypassing all caches, in
    // order to see all requests in the devtools panel. Reloading must not be
    // performed before the tab changes to "loading", otherwise it will load the
    // previous URL.
    if (reloadState === "needsReload") {
      await reloadStateByPage.set(page.id, "reloading");
      browser.tabs.reload(page.id, { bypassCache: true });
    }
  });
}

/**
 * Returns true if our devtools panel is supported by the browser.
 *
 * @event "devtools.supported"
 * @returns {boolean}
 */
port/* port */.O.on(
  "devtools.supported",
  (message, sender) =>
    info_chrome_js.platform == "chromium" ||
    (info_chrome_js.application == "firefox" && compareVersions(info_chrome_js.applicationVersion, "54") >= 0),
);

(0,events/* installHandler */.A)("requests", null, (emit, action, targetTabId) => {
  switch (action) {
    case "hits":
      const blockableItemsOptions = {
        filterType: "all",
        includeElementHiding: true,
        includeUnmatched: true,
        tabId: targetTabId,
      };
      const localOnBlockableItem = onBlockableItem.bind(null, emit);

      ewe_api.reporting.onBlockableItem.addListener(localOnBlockableItem, blockableItemsOptions);
      return () => {
        ewe_api.reporting.onBlockableItem.removeListener(localOnBlockableItem, blockableItemsOptions);
      };
    case "reset":
      const localOnPageFrame = onPageFrame.bind(null, emit);
      const localOnPageLoad = onPageLoad.bind(null, emit);

      browser.webRequest.onBeforeRequest.addListener(localOnPageFrame, {
        urls: ["http://*/*", "https://*/*"],
        types: ["main_frame"],
        tabId: targetTabId,
      });
      ext.pages.onLoading.addListener(localOnPageLoad);

      return () => {
        browser.webRequest.onBeforeRequest.removeListener(localOnPageFrame);
        ext.pages.onLoading.removeListener(localOnPageLoad);
      };
  }
});


/***/ }),

/***/ 866:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b: () => (/* binding */ EventEmitter)
/* harmony export */ });
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */

/**
 * Registers and emits named events.
 */
class EventEmitter {
  constructor() {
    this._listeners = new Map();
  }

  /**
   * Adds a listener for the specified event name.
   *
   * @param {string}   name
   * @param {function} listener
   */
  on(name, listener) {
    let listeners = this._listeners.get(name);
    if (listeners) listeners.push(listener);
    else this._listeners.set(name, [listener]);
  }

  /**
   * Removes a listener for the specified event name.
   *
   * @param {string}   name
   * @param {function} listener
   */
  off(name, listener) {
    let listeners = this._listeners.get(name);
    if (listeners) {
      if (listeners.length > 1) {
        let idx = listeners.indexOf(listener);
        if (idx != -1) listeners.splice(idx, 1);
      } else if (listeners[0] === listener) {
        // We must use strict equality above for compatibility with
        // Array.prototype.indexOf
        this._listeners.delete(name);
      }
    }
  }

  /**
   * Returns a copy of the array of listeners for the specified event.
   *
   * @param {string} name
   *
   * @returns {Array.<function>}
   */
  listeners(name) {
    let listeners = this._listeners.size > 0 ? this._listeners.get(name) : null;
    return listeners ? listeners.slice() : [];
  }

  /**
   * Checks whether there are any listeners for the specified event.
   *
   * @param {string} [name] The name of the event. If omitted, checks whether
   *   there are any listeners for any event.
   *
   * @returns {boolean}
   */
  hasListeners(name) {
    return this._listeners.size > 0 && (typeof name == "undefined" || this._listeners.has(name));
  }

  /**
   * Calls all previously added listeners for the given event name.
   *
   * @param {string} name
   * @param {...*}   [args]
   */
  emit(name, ...args) {
    let listeners = this._listeners.size > 0 ? this._listeners.get(name) : null;
    if (listeners) {
      for (let listener of listeners.slice()) listener(...args);
    }
  }
}


/***/ }),

/***/ 2189:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  U2: () => (/* binding */ addFilter)
});

// UNUSED EXPORTS: askConfirmSubscription, initDisabledFilterCounters

// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/messaging/port.js
var port = __webpack_require__(297);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/storage/session.js
var session = __webpack_require__(1633);
;// CONCATENATED MODULE: ./adblock-betafish/alias/options.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */
/*
 * Same as the original source vendor\adblockplusui\lib\pages\options.js
 * except:
 *  - updated the paths to imported modules
 *  - the 'findOptionsPage' function will correctly find the AdBlock Options page
 *    when a hash is present in the URL.
 *  - use import / export instead of require
 * /

/** @module options */







/**
 * Key to store/retrieve an optional message to send to the options page after
 * it opens.
 */
const optionsMessageKey = "optionsMessage";

let optionsPort = null;

// Firefox won't let us query for moz-extension:// pages, though
// starting with Firefox 56 an extension can query for its own URLs:
// https://bugzilla.mozilla.org/show_bug.cgi?id=1271354
const optionsUrl = browser.runtime.getURL(browser.runtime.getManifest().options_ui.page);

const options_session = new session/* SessionStorage */.u("options");

async function onMessage(message, port) {
  if (message.type != "app.listen") return;

  const optionsMessage = await options_session.get(optionsMessageKey);

  if (!optionsMessage) return;

  await options_session.delete(optionsMessageKey);

  port.postMessage(optionsMessage);
}

async function onConnect(port) {
  if (!ext.isTrustedSender(port.sender)) {
    return;
  }

  if (port.name != "ui") {
    return;
  }

  if (!port.sender.tab || !port.sender.tab.url.startsWith(optionsUrl)) {
    return;
  }

  optionsPort = port;
  optionsPort.onDisconnect.addListener(() => {
    optionsPort = null;
  });
  optionsPort.onMessage.addListener(onMessage);
}
browser.runtime.onConnect.addListener(onConnect);

/**
 * Opens the options page, or switches to its existing tab.
 * @param {Object} [message] - Message to send to options page
 */
async function showOptions(message) {
  await options_session.delete(optionsMessageKey);

  // If the options page is already open, focus its tab manually to avoid
  // potentially opening it again, due to browser.runtime.openOptionsPage()
  // behaving differently across browsers
  if (optionsPort) {
    // Firefox for Android doesn't support browser.windows
    if ("windows" in browser) {
      await browser.windows.update(optionsPort.sender.tab.windowId, { focused: true });
    }

    await browser.tabs.update(optionsPort.sender.tab.id, { active: true });

    // Send message after focusing options page
    if (message) {
      optionsPort.postMessage(message);
    }
  } else {
    // Send message after initializing options page
    if (message) {
      await options_session.set(optionsMessageKey, message);
    }

    await browser.runtime.openOptionsPage();
  }
}


// We need to clear the popup URL on Firefox for Android in order for the
// options page to open instead of the bubble. Unfortunately there's a bug[1]
// which prevents us from doing that, so we must avoid setting the URL on
// Firefox from the manifest at all, instead setting it here only for
// non-mobile.
// [1] - https://bugzilla.mozilla.org/show_bug.cgi?id=1414613
Promise.all([browser.action.getPopup({}), browser.runtime.getPlatformInfo()]).then(
  ([popup, platformInfo]) => {
    if (!popup && platformInfo.os != "android") browser.action.setPopup({ popup: "popup.html" });
  },
);

// On Firefox for Android, open the options page directly when the browser
// action is clicked.
browser.action.onClicked.addListener(async () => {
  const [tab] = await browser.tabs.query({ active: true });
  const currentPage = new ext.Page(tab);

  let message = null;
  if (/^https?:$/.test(currentPage.url.protocol)) {
    const isAllowlisted = await ewe_api.filters.isResourceAllowlisted(
      currentPage.url,
      "document",
      currentPage.id,
    );
    message = {
      type: "app.respond",
      action: "showPageOptions",
      args: [
        {
          host: currentPage.url.hostname.replace(/^www\./, ""),
          allowlisted: isAllowlisted,
        },
      ],
    };
  }

  await showOptions(message);
});

/**
 * Opens the options page in a new tab and waits for it to load, or switches to
 * the existing tab if the options page is already open.
 *
 * @event "options.open"
 */
port/* port */.O.on("options.open", async (message, sender) => {
  await showOptions();
});

// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/messaging/events.js
var events = __webpack_require__(4299);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/messaging/types.js
var types = __webpack_require__(8237);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/events.js
var lib_events = __webpack_require__(866);
;// CONCATENATED MODULE: ./adblockplusui/adblockpluschrome/lib/requestBlocker.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module requestBlocker */



let filterTypes = new Set(
  (function* () {
    for (let type of ewe_api.reporting.contentTypesMap.values()) yield type.toUpperCase();

    yield "SNIPPET";
    yield "REMOVE";
  })(),
);

;// CONCATENATED MODULE: ./adblockplusui/adblockpluschrome/lib/filterConfiguration.js
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */










const disabledFilterCounters = new Map();
const eventEmitter = new lib_events/* EventEmitter */.b();

async function addFilter(filterText, origin) {
  const data = { created: Date.now() };
  if (origin) data.origin = origin;

  try {
    await ewe_api.filters.add([filterText], data);
    await ewe_api.filters.enable([filterText]);
  } catch (ex) {
    return ex;
  }

  return null;
}

async function addSubscription(details) {
  try {
    await ewe_api.subscriptions.add(details.url, details);
  } catch (ex) {
    return false;
  }

  return true;
}

/**
 * Asks user to confirm the subscription details before it is added.
 * @param {Object} details
 */
async function askConfirmSubscription(details) {
  await showOptions({
    type: "app.respond",
    action: "addSubscription",
    args: [
      {
        homepage: details.homepage || null,
        title: details.title || null,
        url: details.url,
      },
    ],
  });
}

function parseFilter(text) {
  let filterText = text.trim() || null;
  let error = null;

  if (filterText) {
    if (filterText[0] == "[") {
      error = { type: "unexpected_filter_list_header" };
    } else {
      let filterError = ewe_api.filters.validate(filterText);
      if (filterError) error = (0,types/* toPlainFilterError */.i_)(filterError);
    }
  }

  return [filterText, error];
}

/**
 * Attempts to add the given filter, or returns an error.
 *
 * @event "filters.add"
 * @property {string} [origin] - Where the filter originated from
 * @property {string} text - The filter text to add
 * @returns {FilterError[]}
 */
port/* port */.O.on("filters.add", (message, sender) => {
  return filtersAdd(message.text, message.origin);
});

/**
 * Returns a serialized version of all filters in special subscriptions.
 *
 * @event "filters.get"
 * @returns {object[]}
 */
port/* port */.O.on("filters.get", async (message, sender) => {
  let filters = await ewe_api.filters.getUserFilters();
  return filters.map(types/* toPlainFilter */.WP);
});

/**
 * Returns the available filter types, e.g. "FONT", "WEBSOCKET", etc.
 *
 * @event "filters.getTypes"
 * @returns {string[]}
 */
port/* port */.O.on("filters.getTypes", (message, sender) => Array.from(filterTypes));

/**
 * Import the given block of filter text as custom user filters.
 *
 * @event "filters.importRaw"
 * @property {string} [origin]
 *   Where the filter originated from.
 * @property {string} text
 *   The filters to add.
 * @returns {string[]} errors
 */
port/* port */.O.on("filters.importRaw", async (message, sender) => {
  let [filterTexts, errors] = filtersValidate(message.text);

  if (errors.length == 0) {
    for (const filterText of filterTexts) {
      const error = await addFilter(filterText, message.origin);
      if (error) errors.push(error);
    }
  }

  return errors;
});

/**
 * Remove the given filter.
 *
 * @event "filters.remove"
 * @property {string} text
 *   The text of the filter to remove.
 * @property {string} [subscriptionUrl]
 *   The URL of the subscription to remove the filter from, defaults to all
 *   subscriptions.
 * @property {number} [index]
 *   The index of the filter in the given subscription to remove, defaults to
 *   all instances and ignored if subscriptionUrl isn't given.
 * @returns {string[]} errors
 */
port/* port */.O.on("filters.remove", (message, sender) => filtersRemove(message));

/**
 * Replaces one custom user filter with another.
 *
 * @event "filters.replace"
 * @property {string} new - The new filter text to add.
 * @property {string} old - The old filter text to remove.
 * @property {string} [origin] - Where the filter originated from.
 * @returns {string[]} errors
 */
port/* port */.O.on("filters.replace", async (message, sender) => {
  let errors = await filtersAdd(message.new, message.origin);
  if (errors.length) return errors;
  await filtersRemove({ text: message.old });
  return [];
});

/**
 * Enabled or disables the given filter.
 *
 * @event "filters.toggle"
 * @property {string} text - The filter text.
 * @property {boolean} disabled - True to disable the filter, false to enable.
 */
port/* port */.O.on("filters.toggle", async (message, sender) => {
  if (message.disabled) await ewe_api.filters.disable([message.text]);
  else await ewe_api.filters.enable([message.text]);
});

/**
 * Validates the filters inside the given block of filter text.
 *
 * @event "filters.validate"
 * @property {string} text - The filters to validate
 * @returns {string[]} errors
 */
port/* port */.O.on("filters.validate", (message, sender) => {
  let [, errors] = filtersValidate(message.text);
  return errors;
});

/**
 * Adds a subscription, either in the background or with the user's
 * confirmation.
 *
 * @event "subscriptions.add"
 * @property {string} url
 *   The subscription's URL.
 * @property {boolean} confirm
 *   If true the user will first be asked to confirm the subscription's details
 *   before it is added.
 * @property {string} [title]
 *   The subscription's title.
 * @property {string} [homepage]
 *   The subscription's homepage.
 * @returns {?boolean}
 *   true if the subscription was added, false if the URL is invalid,
 *   null if the "confirm" property was set
 */
port/* port */.O.on("subscriptions.add", async (message, sender) => {
  if (message.confirm) {
    askConfirmSubscription({
      homepage: message.homepage,
      title: message.title,
      url: message.url,
    });
    return null;
  }

  return addSubscription(message);
});

ewe_api.reporting.onSubscribeLinkClicked.addListener((message) => {
  askConfirmSubscription({
    title: message.title,
    url: message.url,
  });
});

/**
 * Enables all filters from the given subscription.
 *
 * @event "subscriptions.enableAllFilters"
 * @property {string} url
 *   The subscription's URL.
 */
port/* port */.O.on("subscriptions.enableAllFilters", async (message, sender) => {
  const filters = await ewe_api.subscriptions.getFilters(message.url);
  const filterTexts = filters.map((filter) => filter.text);
  await ewe_api.filters.enable(filterTexts);
});

/**
 * Returns a serialized version of all updatable subscriptions which meet
 * the given criteria. Optionally include the disabled filters for those
 * subscriptions.
 *
 * @event "subscriptions.get"
 * @property {boolean} ignoreDisabled
 *   Skip disabled subscriptions if true.
 * @property {boolean} disabledFilters
 *   Include a subscription's disabled filters if true.
 * @returns {object[]} subscriptions
 */
port/* port */.O.on("subscriptions.get", async (message, sender) => {
  let subscriptions = [];
  for (let s of await ewe_api.subscriptions.getSubscriptions()) {
    if (message.ignoreDisabled && !s.enabled) continue;

    let subscription = (0,types/* toPlainSubscription */.pk)(s);
    if (message.disabledFilters) {
      let filters = (await ewe_api.subscriptions.getFilters(s.url)) || [];
      subscription.disabledFilters = filters.filter((f) => f.enabled === false).map((f) => f.text);
    }
    subscriptions.push(subscription);
  }
  return subscriptions;
});

/**
 * Returns the amount of disabled filters contained in a subscription.
 *
 * @event "subscriptions.getDisabledFilterCount"
 * @property {string} url - The subscription's URL.
 */
port/* port */.O.on("subscriptions.getDisabledFilterCount", (message, sender) => {
  return disabledFilterCounters.get(message.url) || 0;
});

/**
 * Returns a list of serialised recommended subscriptions for the user.
 *
 * @event "subscriptions.getRecommendations"
 * @returns {object[]} recommendedSubscriptions
 */
port/* port */.O.on("subscriptions.getRecommendations", async (message, sender) => {
  const recommendations = await ewe_api.subscriptions.getRecommendations();
  return Array.from(recommendations, types/* toPlainRecommendation */.$s);
});

/**
 * Remove the given subscription if it exists.
 *
 * @event "subscriptions.remove"
 * @property {string} url - The subscription's URL.
 */
port/* port */.O.on("subscriptions.remove", async (message, sender) => {
  await ewe_api.subscriptions.remove(message.url);
});

/**
 * Toggles a subscription by either enabling/disabling, or by adding/removing
 * it.
 *
 * @event "subscriptions.toggle"
 * @property {string} url
 *   The subscription's URL.
 * @property {boolean} keepInstalled
 *   If true enable/disable the subscription, otherwise add/remove.
 * @returns {boolean}
 *   true if the subscription was toggled successfully,
 *   false if it's a new subscription with an invalid URL
 */
port/* port */.O.on("subscriptions.toggle", async (message, sender) => {
  if (await ewe_api.subscriptions.has(message.url)) {
    let subscription;
    for (let s of await ewe_api.subscriptions.getSubscriptions()) {
      if (s.url == message.url) {
        subscription = s;
        break;
      }
    }

    if (subscription) {
      if (!subscription.enabled || message.keepInstalled) {
        if (subscription.enabled) await ewe_api.subscriptions.disable(message.url);
        else await ewe_api.subscriptions.enable(message.url);
      } else {
        await ewe_api.subscriptions.remove(subscription.url);
      }
      return true;
    }
  }

  return addSubscription(message);
});

/**
 * Trigger either the given subscription, or all subscriptions, to update.
 *
 * @event "subscriptions.update"
 * @property {string} [url]
 *   The subscription to update, if not specified all subscriptions will be
 *   updated.
 */
port/* port */.O.on("subscriptions.update", async (message, sender) => {
  await ewe_api.subscriptions.sync(message.url);
});

async function filtersAdd(text, origin) {
  let [filterText, error] = parseFilter(text);

  if (!error && filterText) error = await addFilter(filterText, origin);

  return error ? [error] : [];
}

function filtersValidate(text) {
  let filterTexts = [];
  let errors = [];

  let lines = text.split("\n");
  for (let i = 0; i < lines.length; i++) {
    let [filterText, error] = parseFilter(lines[i]);

    if (error) {
      // We don't treat filter headers like invalid filters,
      // instead we simply ignore them and don't show any errors
      // in order to allow pasting complete filter lists.
      // If there are no filters, we do treat it as an invalid filter
      // to inform users about it and to give them a chance to edit it.
      if (error.type === "unexpected_filter_list_header" && lines.length > 1) continue;

      if (lines.length > 1) error.lineno = i + 1;

      errors.push(error);
    } else if (filterText) {
      filterTexts.push(filterText);
    }
  }

  return [filterTexts, errors];
}

async function filtersRemove(message) {
  await ewe_api.filters.remove([message.text]);
  // in order to behave, from consumer perspective, like any other
  // method that could produce errors, return an Array, even if empty
  return [];
}

async function initDisabledFilterCounters() {
  for (const subscription of await ewe.subscriptions.getSubscriptions()) {
    let count = 0;

    for (const filter of await ewe.subscriptions.getFilters(subscription.url)) {
      if (filter.enabled === false) count++;
    }

    if (count > 0) {
      disabledFilterCounters.set(subscription.url, count);
      // Core doesn't expose the subscription's disabled filters state
      // and to avoid adding new "loaded" events and behavior around it,
      // we emit a "filtersDisabled" event to trigger UI changes
      eventEmitter.emit("filtersDisabled", subscription, true, true);
    }
  }
}

async function updateCounters(filterText, enabled) {
  for (const subscription of await ewe_api.subscriptions.getForFilter(filterText)) {
    const oldCount = disabledFilterCounters.get(subscription.url) || 0;
    const newCount = enabled ? oldCount - 1 : oldCount + 1;

    if (newCount === 0) disabledFilterCounters.delete(subscription.url);
    else disabledFilterCounters.set(subscription.url, newCount);

    if (oldCount === 0 || newCount === 0) {
      eventEmitter.emit("filtersDisabled", subscription, newCount > 0, oldCount > 0);
    }
  }
}

ewe_api.filters.onChanged.addListener(async (filter, property) => {
  if (property !== "enabled") return;

  await updateCounters(filter.text, filter.enabled);
});

ewe_api.subscriptions.onRemoved.addListener((subscription) => {
  disabledFilterCounters.delete(subscription.url);
});

(0,events/* installHandler */.A)("filters", "added", (emit) => {
  const onAdded = (filter) => emit((0,types/* toPlainFilter */.WP)(filter));
  ewe_api.filters.onAdded.addListener(onAdded);
  return () => ewe_api.filters.onAdded.removeListener(onAdded);
});

(0,events/* installHandler */.A)("filters", "changed", (emit) => {
  const onChanged = (filter, property) => emit((0,types/* toPlainFilter */.WP)(filter), property);
  ewe_api.filters.onChanged.addListener(onChanged);
  return () => ewe_api.filters.onChanged.removeListener(onChanged);
});

(0,events/* installHandler */.A)("filters", "removed", (emit) => {
  const onRemoved = (filter) => emit((0,types/* toPlainFilter */.WP)(filter));
  ewe_api.filters.onRemoved.addListener(onRemoved);
  return () => ewe_api.filters.onRemoved.removeListener(onRemoved);
});

(0,events/* installHandler */.A)("subscriptions", "added", (emit) => {
  const onAdded = (subscription) => emit((0,types/* toPlainSubscription */.pk)(subscription));
  ewe_api.subscriptions.onAdded.addListener(onAdded);
  return () => ewe_api.subscriptions.onAdded.removeListener(onAdded);
});

(0,events/* installHandler */.A)("subscriptions", "changed", (emit) => {
  const onChanged = (subscription, property) => {
    emit((0,types/* toPlainSubscription */.pk)(subscription), property);
  };
  ewe_api.subscriptions.onChanged.addListener(onChanged);
  return () => ewe_api.subscriptions.onChanged.removeListener(onChanged);
});

(0,events/* installHandler */.A)("subscriptions", "filtersDisabled", (emit) => {
  const onFiltersDisabled = (subscription, hadFilters, hasFilters) => {
    emit((0,types/* toPlainSubscription */.pk)(subscription), hadFilters, hasFilters);
  };
  eventEmitter.on("filtersDisabled", onFiltersDisabled);
  return () => eventEmitter.off("filtersDisabled", onFiltersDisabled);
});

(0,events/* installHandler */.A)("subscriptions", "removed", (emit) => {
  const onRemoved = (subscription) => emit((0,types/* toPlainSubscription */.pk)(subscription));
  ewe_api.subscriptions.onRemoved.addListener(onRemoved);
  return () => ewe_api.subscriptions.onRemoved.removeListener(onRemoved);
});


/***/ }),

/***/ 1960:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony import */ var info__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9336);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _messaging_port_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(297);
/* harmony import */ var _prefs_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2680);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module messageResponder */








function forward(type, message, sender) {
  return _messaging_port_js__WEBPACK_IMPORTED_MODULE_2__/* .port */ .O._onMessage(Object.assign({}, message, { type }), sender);
}

/**
 * @deprecated Please send the "filters.getTypes" message instead.
 *
 * @event "types.get"
 */
_messaging_port_js__WEBPACK_IMPORTED_MODULE_2__/* .port */ .O.on("types.get", (message, sender) => forward("filters.getTypes", message, sender));

/**
 * @deprecated Please send the "options.open" message instead.
 *
 * @event "app.open"
 */
_messaging_port_js__WEBPACK_IMPORTED_MODULE_2__/* .port */ .O.on("app.open", (message, sender) => {
  if (message.what == "options") return forward("options.open", message, sender);
});

/**
 * @deprecated Please send the "subscriptions.getInitIssues",
 *             "prefs.getDocLink", "subscriptions.getRecommendations",
 *             "devtools.supported" or "info.get" messages, or call the
 *             browser.tabs.getCurrent(), browser.i18n.getUILanguage(),
 *             browser.i18n.getMessage("@@bidi_dir") APIs instead.
 *
 * @event "app.get"
 */
_messaging_port_js__WEBPACK_IMPORTED_MODULE_2__/* .port */ .O.on("app.get", async (message, sender) => {
  if (message.what == "localeInfo") {
    return {
      locale: browser.i18n.getUILanguage(),
      bidiDir: browser.i18n.getMessage("@@bidi_dir"),
    };
  }

  if (message.what == "acceptableAdsUrl") return _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.subscriptions.ACCEPTABLE_ADS_URL;

  if (message.what == "acceptableAdsPrivacyUrl")
    return _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.subscriptions.ACCEPTABLE_ADS_PRIVACY_URL;

  if (message.what == "senderId") return sender.page.id;

  if (message.what == "ctalink") {
    const ctaLinkNameToPrefsMap = new Map([
      ["premium-manage", "premium_manage_page_url"],
      ["premium-upgrade", "premium_upgrade_page_url"],
    ]);

    const { link: ctaLinkName, queryParams } = message;
    const prefsUrlKey = ctaLinkNameToPrefsMap.get(ctaLinkName);
    let url = _prefs_js__WEBPACK_IMPORTED_MODULE_3__/* .Prefs */ .N[prefsUrlKey];

    const linkPlaceholders = [
      ["LANG", () => browser.i18n.getUILanguage().replace("-", "_")],
      ["ADDON_NAME", () => info__WEBPACK_IMPORTED_MODULE_0__.addonName],
      ["ADDON_VERSION", () => info__WEBPACK_IMPORTED_MODULE_0__.addonVersion],
      ["APPLICATION_NAME", () => info__WEBPACK_IMPORTED_MODULE_0__.application],
      ["APPLICATION_VERSION", () => info__WEBPACK_IMPORTED_MODULE_0__.applicationVersion],
      ["PLATFORM_NAME", () => info__WEBPACK_IMPORTED_MODULE_0__.platform],
      ["PLATFORM_VERSION", () => info__WEBPACK_IMPORTED_MODULE_0__.platformVersion],
      ["LICENSE_CODE", () => _prefs_js__WEBPACK_IMPORTED_MODULE_3__/* .Prefs */ .N.get("premium_license").code],
      ["SOURCE", () => queryParams.source],
    ];

    for (const [key, getValue] of linkPlaceholders)
      url = url.replace(`%${key}%`, encodeURIComponent(getValue()));

    return url;
  }

  if (message.what == "doclink") return forward("prefs.getDocLink", message, sender);

  if (message.what == "recommendations")
    return forward("subscriptions.getRecommendations", message, sender);

  if (message.what == "features") {
    let devToolsPanel = await forward("devtools.supported", message, sender);
    return { devToolsPanel };
  }

  if (message.what == "os") {
    let platformInfo = await browser.runtime.getPlatformInfo();
    return platformInfo.os;
  }

  return info__WEBPACK_IMPORTED_MODULE_0__[message.what];
});

/**
 * @typedef {object} infoGetResult
 * @property {string} addonName
 *   The extension's name, e.g. "adblockpluschrome".
 * @property {string} addonVersion
 *   The extension's version, e.g. "3.6.3".
 * @property {string} application
 *   The browser's name, e.g. "chrome".
 * @property {string} applicationVersion
 *   The browser's version, e.g. "77.0.3865.90".
 * @property {string} platform
 *   The browser platform, e.g. "chromium".
 * @property {string} platformVersion
 *   The browser platform's version, e.g. "77.0.3865.90".
 */

/**
 * Returns the browser platform information.
 *
 * @event "info.get"
 * @returns {infoGetResult}
 */
_messaging_port_js__WEBPACK_IMPORTED_MODULE_2__/* .port */ .O.on("info.get", (message, sender) => info__WEBPACK_IMPORTED_MODULE_0__);


/***/ }),

/***/ 4299:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A: () => (/* binding */ installHandler)
/* harmony export */ });
/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(866);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



const cleanupByTabId = new Map();
const eventEmitter = new _events_js__WEBPACK_IMPORTED_MODULE_0__/* .EventEmitter */ .b();
const handlerByName = new Map();
const handlerTemplateByType = new Map();

/**
 * Installs a handler for lazily adding/removing event listeners depending on
 * whether someone is actively listening via the Messaging API.
 *
 * @param {string} type
 *   type of events to allow listening to
 * @param {string} [action]
 *   specific event to allow listening to
 *   null if handler applies to all events for the given type
 * @param {Function} install
 *   callback function for adding event listeners
 *   will receive emit, action, targetTabId as arguments
 *   expected to return callback function for removing event listeners
 */
function installHandler(type, action, install) {
  const handler = { install, uninstall: null };

  // Handlers that can be used for arbitrary actions should be used as
  // templates, from which we can create handlers later
  if (!action) {
    handlerTemplateByType.set(type, handler);
    return;
  }

  handlerByName.set(`${type}.${action}`, handler);
}

function listen(type, actions, uiPort, targetTabId = null) {
  const cleanups = [];

  for (const action of actions) {
    let name = `${type}.${action}`;
    if (targetTabId !== null) name = `${name}:${targetTabId}`;

    // Add message response listener
    const onResponse = (...args) => {
      uiPort.postMessage({ type: `${type}.respond`, action, args });
    };
    eventEmitter.on(name, onResponse);

    // Install event handler
    let handler = handlerByName.get(name);
    // If there's no handler for the given action, we should check
    // whether there's a generic handler for the type and create one from that
    if (!handler) {
      const template = handlerTemplateByType.get(type);
      if (template) {
        handler = Object.assign({}, template);
        handlerByName.set(name, handler);
      }
    }
    if (handler && !handler.uninstall) {
      const emit = eventEmitter.emit.bind(eventEmitter, name);
      handler.uninstall = handler.install(emit, action, targetTabId);
    }

    cleanups.push(() => {
      eventEmitter.off(name, onResponse);

      // Uninstall event handler, if it's no longer needed
      if (!eventEmitter.hasListeners(name)) {
        const actionHandler = handlerByName.get(name);
        if (actionHandler && actionHandler.uninstall) {
          actionHandler.uninstall();
          handler.uninstall = null;
        }
      }
    });
  }

  const cleanupAll = () => {
    for (const cleanup of cleanups) cleanup();
  };

  // Stop listening when port disconnects (e.g. page is closed),
  // or when target tab is closed
  uiPort.onDisconnect.addListener(cleanupAll);
  if (targetTabId !== null) cleanupByTabId.set(targetTabId, cleanupAll);
}

function onTabRemoved(tabId) {
  const cleanup = cleanupByTabId.get(tabId);
  if (!cleanup) return;

  cleanup();
  cleanupByTabId.delete(tabId);
}
browser.tabs.onRemoved.addListener(onTabRemoved);

function onConnect(uiPort) {
  if (!ext.isTrustedSender(uiPort.sender)) return;

  if (uiPort.name !== "ui") return;

  uiPort.onMessage.addListener((message) => {
    const [type, action] = message.type.split(".", 2);

    // For now we're only using long-lived connections
    // for handling "*.listen" messages
    // https://issues.adblockplus.org/ticket/6440/
    if (action !== "listen") return;

    listen(type, message.filter, uiPort, message.tabId);
  });
}
browser.runtime.onConnect.addListener(onConnect);


/***/ }),

/***/ 297:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   O: () => (/* binding */ port)
/* harmony export */ });
/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(866);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



/**
 * Communication port wrapping ext.onMessage to receive messages.
 *
 * @constructor
 */
class Port {
  constructor() {
    this._eventEmitter = new _events_js__WEBPACK_IMPORTED_MODULE_0__/* .EventEmitter */ .b();
    this._onMessage = this._onMessage.bind(this);
    ext.onMessage.addListener(this._onMessage);
  }

  async _onMessage(message, sender) {
    let callbacks = this._eventEmitter.listeners(message.type);

    try {
      let responses = callbacks.map((callback) => callback(message, sender));
      return ext.getMessageResponse(responses);
    } catch (err) {
      console.error(err);
    }
  }

  /**
   * Function to be called when a particular message is received.
   *
   * @callback Port~messageCallback
   * @param {object} message
   * @param {object} sender
   * @return The callback can return undefined (no response),
   *         a value (response to be sent to sender immediately)
   *         or a promise (asynchronous response).
   */

  /**
   * Adds a callback for the specified message.
   *
   * The return value of the callback (if not undefined) is sent as response.
   * @param {string}   name
   * @param {Port~messageCallback} callback
   */
  on(name, callback) {
    this._eventEmitter.on(name, callback);
  }

  /**
   * Removes a callback for the specified message.
   *
   * @param {string}   name
   * @param {Port~messageCallback} callback
   */
  off(name, callback) {
    this._eventEmitter.off(name, callback);
  }

  /**
   * Disables the port and makes it stop listening to incoming messages.
   */
  disconnect() {
    ext.onMessage.removeListener(this._onMessage);
  }
}

/**
 * The default port to receive messages.
 *
 * @type {Port}
 */
let port = new Port();


/***/ }),

/***/ 8237:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $s: () => (/* binding */ toPlainRecommendation),
/* harmony export */   Kh: () => (/* binding */ toPlainBlockableItem),
/* harmony export */   WP: () => (/* binding */ toPlainFilter),
/* harmony export */   i_: () => (/* binding */ toPlainFilterError),
/* harmony export */   pk: () => (/* binding */ toPlainSubscription)
/* harmony export */ });
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



const requestMethods = new Set(["allowing", "header", "request"]);

function toPlainBlockableItem({ filter, matchInfo, request }) {
  let isFrame = !requestMethods.has(matchInfo.method);

  let type;
  if (matchInfo.method == "request") type = _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.reporting.contentTypesMap.get(request.type);
  else if (matchInfo.method == "allowing") type = matchInfo.allowingReason;
  // Show matching method when it had an effect on the request
  else if (filter)
    if (filter.remove === true) type = "remove";
    else type = matchInfo.method;
  else type = _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.reporting.contentTypesMap.get(request.type);

  if (!type) type = "other";

  return {
    docDomain: matchInfo.docDomain,
    isFrame,
    rewrittenUrl: matchInfo.rewrittenUrl,
    type: type.toUpperCase(),
    url: request.url,
  };
}

function toPlainFilter(filter) {
  let obj = toPlainObject(["csp", "enabled", "selector", "slow", "text", "type"], filter);

  // For the time being, we are renaming the enabled property to
  // make the UI compatible with EWE without having to rename it
  // in the UI code itself just yet
  // For the same reason, we're not adding the property for comment filters
  if (obj.enabled !== null) obj.disabled = !obj.enabled;
  delete obj.enabled;

  return obj;
}

let toPlainFilterError = toPlainObject.bind(null, ["lineno", "option", "reason", "type"]);

function toPlainObject(keys, obj) {
  let result = {};
  for (let key of keys) {
    if (key in obj) result[key] = obj[key];
  }
  return result;
}

function toPlainRecommendation(recommendation) {
  // The recommendation URL always refers to the one for Manifest v3,
  // so we need to overwrite it for Manifest v2
  if (browser.runtime.getManifest().manifest_version === 2)
    recommendation.url = recommendation.mv2URL;

  return toPlainObject(["languages", "title", "type", "url"], recommendation);
}

function toPlainSubscription(subscription) {
  let obj = toPlainObject(
    [
      "downloading",
      "downloadStatus",
      "enabled",
      "homepage",
      "version",
      "lastDownload",
      "lastSuccess",
      "softExpiration",
      "expires",
      "title",
      "updatable",
      "url",
    ],
    subscription,
  );

  // For the time being, we are renaming the enabled property to
  // make the UI compatible with EWE without having to rename it
  // in the UI code itself just yet
  obj.disabled = !obj.enabled;
  delete obj.enabled;

  return obj;
}


/***/ }),

/***/ 1633:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   u: () => (/* binding */ SessionStorage)
/* harmony export */ });
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/**
 * This file is based on the respective file in adblockplusui@3.19
 * Modifications:
 * - None
 */

/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



/**
 * In-memory storage for use outside of service worker context.
 * @type {Map<string,any>}
 */
const memoryStorage = new Map();

/**
 * Indicates whether we need to store in-memory data using a dedicated browser
 * API. When we're running in the context of a service worker, we can no longer
 * rely on in-memory storage.
 * @type {boolean}
 */
const useMemoryStorage = !("session" in browser.storage);

/**
 * Session storage for storing in-memory data in a way that's safe to use in
 * a service worker context.
 */
class SessionStorage {
  /**
   * Initializes session storage.
   * @param {string} namespace
   */
  constructor(namespace) {
    this._namespace = namespace;
    this._queue = Promise.resolve();
  }

  /**
   * Generates unique storage key for storing values globally for given key.
   * @param {string} key
   * @return {string}
   */
  _getGlobalKey(key) {
    return `session:${this._namespace}:${key}`;
  }

  /**
   * Deletes session storage entry for given key.
   * @param {string} key
   * @return {Promise}
   */
  async delete(key) {
    const globalKey = this._getGlobalKey(key);
    if (useMemoryStorage) return memoryStorage.delete(globalKey);

    return browser.storage.session.remove(globalKey);
  }

  /**
   * Retrieves session storage entry for given key.
   * @param {string} key
   * @return {Promise<any>}
   */
  async get(key) {
    const globalKey = this._getGlobalKey(key);
    if (useMemoryStorage) return memoryStorage.get(globalKey);

    const storage = await browser.storage.session.get(globalKey);
    return storage[globalKey];
  }

  /**
   * Sets session storage entry for given key.
   * @param {string} key
   * @param {any} value
   * @return {Promise}
   */
  async set(key, value) {
    const globalKey = this._getGlobalKey(key);
    if (useMemoryStorage) {
      memoryStorage.set(globalKey, value);
      return;
    }

    await browser.storage.session.set({ [globalKey]: value });
  }

  /**
   * Executes given function as a transaction to avoid race conditions.
   * @param {Function} fn
   * @return {Promise}
   */
  async transaction(fn) {
    this._queue = this._queue
      // Necessary to avoid breakage of promise chain
      .catch((e) => _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.sentry.reportError(e))
      .then(fn);
    return this._queue;
  }
}


/***/ }),

/***/ 1583:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   b: () => (/* binding */ TabSessionStorage)
/* harmony export */ });
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _events_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(866);
/* harmony import */ var _session_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1633);
/**
 * This file is based on the respective file in adblockplusui@3.19
 * Modifications:
 * - None
 */

/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */






/**
 * Reason to clear Tab specific data
 */
const clearStorageReason = {
  startup: "startup",
  tabRemoval: "tabRemoval",
};

/**
 * Session storage instance for storing tab-specific data.
 * @type {SessionStorage<number,any>}
 */
const sessionByTabId = new _session_js__WEBPACK_IMPORTED_MODULE_1__/* .SessionStorage */ .u("_tabs");

// We need to keep track of all tab session storage instances so that we can
// notify them about tab changes. Since we cannot iterate through a WeakSet,
// and since WeakRef is not yet available in all supported browsers, this means
// that we're adding them into memory without removing them. As long as we only
// create instances only right when the extension loads, this should not create
// a memory leak though.
/**
 * List of known tab session storage instances.
 * @type {Set<TabSessionStorage>}
 */
const tabStorages = new Set();

/**
 * Session storage for storing tab-specific in-memory data in a way that's safe
 * to use in a service worker context.
 */
class TabSessionStorage extends _events_js__WEBPACK_IMPORTED_MODULE_2__/* .EventEmitter */ .b {
  /**
   * Initializes session storage.
   * @param {string} namespace
   */
  constructor(namespace) {
    super();

    this._namespace = namespace;
    this._queue = Promise.resolve();
    tabStorages.add(this);
  }

  /**
   * Deletes session storage content specific to given tab ID.
   * @param {number} tabId
   * @return {Promise}
   */
  async delete(tabId) {
    return sessionByTabId.transaction(async () => {
      const session = await sessionByTabId.get(tabId);
      if (!session) return;

      delete session[this._namespace];

      if (Object.keys(session).length) await sessionByTabId.set(tabId, session);
      else await sessionByTabId.delete(tabId);
    });
  }

  /**
   * Emits session storage event relating to given tab ID.
   * @param {string} name
   * @param {number} tabId
   */
  async emit(name, tabId) {
    const session = await sessionByTabId.get(tabId);
    if (!session) return;

    super.emit(name, {
      tabId,
      value: session[this._namespace],
    });
  }

  /**
   * Retrieves session storage content specific to given tab ID.
   * @param {number} tabId
   * @return {Promise<any>}
   */
  async get(tabId) {
    const session = await sessionByTabId.get(tabId);
    if (!session) return;

    return session[this._namespace];
  }

  /**
   * Indicates whether session storage content exists specific to given tab ID.
   * @param {number} tabId
   * @return {Promise<boolean>}
   */
  async has(tabId) {
    const session = await sessionByTabId.get(tabId);
    return session && this._namespace in session;
  }

  /**
   * Sets session storage content specific to given tab ID.
   * @param {number} tabId
   * @param {any} value
   * @return {Promise}
   */
  async set(tabId, value) {
    return sessionByTabId.transaction(async () => {
      const session = (await sessionByTabId.get(tabId)) || {};
      session[this._namespace] = value;
      await sessionByTabId.set(tabId, session);
    });
  }

  /**
   * Sets flag value for given tab ID.
   * @param {number} tabId
   * @param {boolean} value
   * @return {Promise}
   */
  async setFlag(tabId, value) {
    if (value) await this.set(tabId, true);
    else await this.delete(tabId);
  }

  /**
   * Executes given function as a transaction to avoid race conditions.
   * @param {Function} fn
   * @return {Promise}
   */
  async transaction(fn) {
    this._queue = this._queue
      // Necessary to avoid breakage of promise chain
      .catch((e) => _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.sentry.reportError(e))
      .then(fn);
    return this._queue;
  }
}

/**
 * Clears tab-specific data.
 * @param {number} tabId
 * @param {string} reason
 * @return {Promise}
 */
async function clearStorage(tabId, reason) {
  // Provide stored data to listeners before removing it
  const session = await sessionByTabId.get(tabId);
  if (session && reason === clearStorageReason.tabRemoval) {
    for (const tabStorage of tabStorages) {
      await tabStorage.emit("tab-removed", tabId);
    }
  }

  await sessionByTabId.delete(tabId);
}

/**
 * Initializes tab-specific session storage.
 */
function start() {
  // Clear tab-specific data when the tab's content changes
  ext.pages.onLoading.addListener((page) => {
    void clearStorage(page.id, clearStorageReason.startup);
  });

  // Clear tab-specific data when the tab gets removed
  ext.pages.onRemoved.addListener((tabId) => {
    void clearStorage(tabId, clearStorageReason.tabRemoval);
  });
}
start();


/***/ }),

/***/ 3267:
/***/ ((__unused_webpack_module, exports) => {

exports.icannPublicSuffixes = {
  "ac": 1,
  "com.ac": 1,
  "edu.ac": 1,
  "gov.ac": 1,
  "net.ac": 1,
  "mil.ac": 1,
  "org.ac": 1,
  "ad": 1,
  "nom.ad": 1,
  "ae": 1,
  "co.ae": 1,
  "net.ae": 1,
  "org.ae": 1,
  "sch.ae": 1,
  "ac.ae": 1,
  "gov.ae": 1,
  "mil.ae": 1,
  "aero": 1,
  "accident-investigation.aero": 1,
  "accident-prevention.aero": 1,
  "aerobatic.aero": 1,
  "aeroclub.aero": 1,
  "aerodrome.aero": 1,
  "agents.aero": 1,
  "aircraft.aero": 1,
  "airline.aero": 1,
  "airport.aero": 1,
  "air-surveillance.aero": 1,
  "airtraffic.aero": 1,
  "air-traffic-control.aero": 1,
  "ambulance.aero": 1,
  "amusement.aero": 1,
  "association.aero": 1,
  "author.aero": 1,
  "ballooning.aero": 1,
  "broker.aero": 1,
  "caa.aero": 1,
  "cargo.aero": 1,
  "catering.aero": 1,
  "certification.aero": 1,
  "championship.aero": 1,
  "charter.aero": 1,
  "civilaviation.aero": 1,
  "club.aero": 1,
  "conference.aero": 1,
  "consultant.aero": 1,
  "consulting.aero": 1,
  "control.aero": 1,
  "council.aero": 1,
  "crew.aero": 1,
  "design.aero": 1,
  "dgca.aero": 1,
  "educator.aero": 1,
  "emergency.aero": 1,
  "engine.aero": 1,
  "engineer.aero": 1,
  "entertainment.aero": 1,
  "equipment.aero": 1,
  "exchange.aero": 1,
  "express.aero": 1,
  "federation.aero": 1,
  "flight.aero": 1,
  "fuel.aero": 1,
  "gliding.aero": 1,
  "government.aero": 1,
  "groundhandling.aero": 1,
  "group.aero": 1,
  "hanggliding.aero": 1,
  "homebuilt.aero": 1,
  "insurance.aero": 1,
  "journal.aero": 1,
  "journalist.aero": 1,
  "leasing.aero": 1,
  "logistics.aero": 1,
  "magazine.aero": 1,
  "maintenance.aero": 1,
  "media.aero": 1,
  "microlight.aero": 1,
  "modelling.aero": 1,
  "navigation.aero": 1,
  "parachuting.aero": 1,
  "paragliding.aero": 1,
  "passenger-association.aero": 1,
  "pilot.aero": 1,
  "press.aero": 1,
  "production.aero": 1,
  "recreation.aero": 1,
  "repbody.aero": 1,
  "res.aero": 1,
  "research.aero": 1,
  "rotorcraft.aero": 1,
  "safety.aero": 1,
  "scientist.aero": 1,
  "services.aero": 1,
  "show.aero": 1,
  "skydiving.aero": 1,
  "software.aero": 1,
  "student.aero": 1,
  "trader.aero": 1,
  "trading.aero": 1,
  "trainer.aero": 1,
  "union.aero": 1,
  "workinggroup.aero": 1,
  "works.aero": 1,
  "af": 1,
  "gov.af": 1,
  "com.af": 1,
  "org.af": 1,
  "net.af": 1,
  "edu.af": 1,
  "ag": 1,
  "com.ag": 1,
  "org.ag": 1,
  "net.ag": 1,
  "co.ag": 1,
  "nom.ag": 1,
  "ai": 1,
  "off.ai": 1,
  "com.ai": 1,
  "net.ai": 1,
  "org.ai": 1,
  "al": 1,
  "com.al": 1,
  "edu.al": 1,
  "gov.al": 1,
  "mil.al": 1,
  "net.al": 1,
  "org.al": 1,
  "am": 1,
  "co.am": 1,
  "com.am": 1,
  "commune.am": 1,
  "net.am": 1,
  "org.am": 1,
  "ao": 1,
  "ed.ao": 1,
  "gv.ao": 1,
  "og.ao": 1,
  "co.ao": 1,
  "pb.ao": 1,
  "it.ao": 1,
  "aq": 1,
  "ar": 1,
  "bet.ar": 1,
  "com.ar": 1,
  "coop.ar": 1,
  "edu.ar": 1,
  "gob.ar": 1,
  "gov.ar": 1,
  "int.ar": 1,
  "mil.ar": 1,
  "musica.ar": 1,
  "mutual.ar": 1,
  "net.ar": 1,
  "org.ar": 1,
  "senasa.ar": 1,
  "tur.ar": 1,
  "arpa": 1,
  "e164.arpa": 1,
  "in-addr.arpa": 1,
  "ip6.arpa": 1,
  "iris.arpa": 1,
  "uri.arpa": 1,
  "urn.arpa": 1,
  "as": 1,
  "gov.as": 1,
  "asia": 1,
  "at": 1,
  "ac.at": 1,
  "co.at": 1,
  "gv.at": 1,
  "or.at": 1,
  "sth.ac.at": 1,
  "au": 1,
  "com.au": 1,
  "net.au": 1,
  "org.au": 1,
  "edu.au": 1,
  "gov.au": 1,
  "asn.au": 1,
  "id.au": 1,
  "info.au": 1,
  "conf.au": 1,
  "oz.au": 1,
  "act.au": 1,
  "nsw.au": 1,
  "nt.au": 1,
  "qld.au": 1,
  "sa.au": 1,
  "tas.au": 1,
  "vic.au": 1,
  "wa.au": 1,
  "act.edu.au": 1,
  "catholic.edu.au": 1,
  "nsw.edu.au": 1,
  "nt.edu.au": 1,
  "qld.edu.au": 1,
  "sa.edu.au": 1,
  "tas.edu.au": 1,
  "vic.edu.au": 1,
  "wa.edu.au": 1,
  "qld.gov.au": 1,
  "sa.gov.au": 1,
  "tas.gov.au": 1,
  "vic.gov.au": 1,
  "wa.gov.au": 1,
  "schools.nsw.edu.au": 1,
  "aw": 1,
  "com.aw": 1,
  "ax": 1,
  "az": 1,
  "com.az": 1,
  "net.az": 1,
  "int.az": 1,
  "gov.az": 1,
  "org.az": 1,
  "edu.az": 1,
  "info.az": 1,
  "pp.az": 1,
  "mil.az": 1,
  "name.az": 1,
  "pro.az": 1,
  "biz.az": 1,
  "ba": 1,
  "com.ba": 1,
  "edu.ba": 1,
  "gov.ba": 1,
  "mil.ba": 1,
  "net.ba": 1,
  "org.ba": 1,
  "bb": 1,
  "biz.bb": 1,
  "co.bb": 1,
  "com.bb": 1,
  "edu.bb": 1,
  "gov.bb": 1,
  "info.bb": 1,
  "net.bb": 1,
  "org.bb": 1,
  "store.bb": 1,
  "tv.bb": 1,
  "bd": 2,
  "be": 1,
  "ac.be": 1,
  "bf": 1,
  "gov.bf": 1,
  "bg": 1,
  "a.bg": 1,
  "b.bg": 1,
  "c.bg": 1,
  "d.bg": 1,
  "e.bg": 1,
  "f.bg": 1,
  "g.bg": 1,
  "h.bg": 1,
  "i.bg": 1,
  "j.bg": 1,
  "k.bg": 1,
  "l.bg": 1,
  "m.bg": 1,
  "n.bg": 1,
  "o.bg": 1,
  "p.bg": 1,
  "q.bg": 1,
  "r.bg": 1,
  "s.bg": 1,
  "t.bg": 1,
  "u.bg": 1,
  "v.bg": 1,
  "w.bg": 1,
  "x.bg": 1,
  "y.bg": 1,
  "z.bg": 1,
  "0.bg": 1,
  "1.bg": 1,
  "2.bg": 1,
  "3.bg": 1,
  "4.bg": 1,
  "5.bg": 1,
  "6.bg": 1,
  "7.bg": 1,
  "8.bg": 1,
  "9.bg": 1,
  "bh": 1,
  "com.bh": 1,
  "edu.bh": 1,
  "net.bh": 1,
  "org.bh": 1,
  "gov.bh": 1,
  "bi": 1,
  "co.bi": 1,
  "com.bi": 1,
  "edu.bi": 1,
  "or.bi": 1,
  "org.bi": 1,
  "biz": 1,
  "bj": 1,
  "africa.bj": 1,
  "agro.bj": 1,
  "architectes.bj": 1,
  "assur.bj": 1,
  "avocats.bj": 1,
  "co.bj": 1,
  "com.bj": 1,
  "eco.bj": 1,
  "econo.bj": 1,
  "edu.bj": 1,
  "info.bj": 1,
  "loisirs.bj": 1,
  "money.bj": 1,
  "net.bj": 1,
  "org.bj": 1,
  "ote.bj": 1,
  "resto.bj": 1,
  "restaurant.bj": 1,
  "tourism.bj": 1,
  "univ.bj": 1,
  "bm": 1,
  "com.bm": 1,
  "edu.bm": 1,
  "gov.bm": 1,
  "net.bm": 1,
  "org.bm": 1,
  "bn": 1,
  "com.bn": 1,
  "edu.bn": 1,
  "gov.bn": 1,
  "net.bn": 1,
  "org.bn": 1,
  "bo": 1,
  "com.bo": 1,
  "edu.bo": 1,
  "gob.bo": 1,
  "int.bo": 1,
  "org.bo": 1,
  "net.bo": 1,
  "mil.bo": 1,
  "tv.bo": 1,
  "web.bo": 1,
  "academia.bo": 1,
  "agro.bo": 1,
  "arte.bo": 1,
  "blog.bo": 1,
  "bolivia.bo": 1,
  "ciencia.bo": 1,
  "cooperativa.bo": 1,
  "democracia.bo": 1,
  "deporte.bo": 1,
  "ecologia.bo": 1,
  "economia.bo": 1,
  "empresa.bo": 1,
  "indigena.bo": 1,
  "industria.bo": 1,
  "info.bo": 1,
  "medicina.bo": 1,
  "movimiento.bo": 1,
  "musica.bo": 1,
  "natural.bo": 1,
  "nombre.bo": 1,
  "noticias.bo": 1,
  "patria.bo": 1,
  "politica.bo": 1,
  "profesional.bo": 1,
  "plurinacional.bo": 1,
  "pueblo.bo": 1,
  "revista.bo": 1,
  "salud.bo": 1,
  "tecnologia.bo": 1,
  "tksat.bo": 1,
  "transporte.bo": 1,
  "wiki.bo": 1,
  "br": 1,
  "9guacu.br": 1,
  "abc.br": 1,
  "adm.br": 1,
  "adv.br": 1,
  "agr.br": 1,
  "aju.br": 1,
  "am.br": 1,
  "anani.br": 1,
  "aparecida.br": 1,
  "app.br": 1,
  "arq.br": 1,
  "art.br": 1,
  "ato.br": 1,
  "b.br": 1,
  "barueri.br": 1,
  "belem.br": 1,
  "bhz.br": 1,
  "bib.br": 1,
  "bio.br": 1,
  "blog.br": 1,
  "bmd.br": 1,
  "boavista.br": 1,
  "bsb.br": 1,
  "campinagrande.br": 1,
  "campinas.br": 1,
  "caxias.br": 1,
  "cim.br": 1,
  "cng.br": 1,
  "cnt.br": 1,
  "com.br": 1,
  "contagem.br": 1,
  "coop.br": 1,
  "coz.br": 1,
  "cri.br": 1,
  "cuiaba.br": 1,
  "curitiba.br": 1,
  "def.br": 1,
  "des.br": 1,
  "det.br": 1,
  "dev.br": 1,
  "ecn.br": 1,
  "eco.br": 1,
  "edu.br": 1,
  "emp.br": 1,
  "enf.br": 1,
  "eng.br": 1,
  "esp.br": 1,
  "etc.br": 1,
  "eti.br": 1,
  "far.br": 1,
  "feira.br": 1,
  "flog.br": 1,
  "floripa.br": 1,
  "fm.br": 1,
  "fnd.br": 1,
  "fortal.br": 1,
  "fot.br": 1,
  "foz.br": 1,
  "fst.br": 1,
  "g12.br": 1,
  "geo.br": 1,
  "ggf.br": 1,
  "goiania.br": 1,
  "gov.br": 1,
  "ac.gov.br": 1,
  "al.gov.br": 1,
  "am.gov.br": 1,
  "ap.gov.br": 1,
  "ba.gov.br": 1,
  "ce.gov.br": 1,
  "df.gov.br": 1,
  "es.gov.br": 1,
  "go.gov.br": 1,
  "ma.gov.br": 1,
  "mg.gov.br": 1,
  "ms.gov.br": 1,
  "mt.gov.br": 1,
  "pa.gov.br": 1,
  "pb.gov.br": 1,
  "pe.gov.br": 1,
  "pi.gov.br": 1,
  "pr.gov.br": 1,
  "rj.gov.br": 1,
  "rn.gov.br": 1,
  "ro.gov.br": 1,
  "rr.gov.br": 1,
  "rs.gov.br": 1,
  "sc.gov.br": 1,
  "se.gov.br": 1,
  "sp.gov.br": 1,
  "to.gov.br": 1,
  "gru.br": 1,
  "imb.br": 1,
  "ind.br": 1,
  "inf.br": 1,
  "jab.br": 1,
  "jampa.br": 1,
  "jdf.br": 1,
  "joinville.br": 1,
  "jor.br": 1,
  "jus.br": 1,
  "leg.br": 1,
  "lel.br": 1,
  "log.br": 1,
  "londrina.br": 1,
  "macapa.br": 1,
  "maceio.br": 1,
  "manaus.br": 1,
  "maringa.br": 1,
  "mat.br": 1,
  "med.br": 1,
  "mil.br": 1,
  "morena.br": 1,
  "mp.br": 1,
  "mus.br": 1,
  "natal.br": 1,
  "net.br": 1,
  "niteroi.br": 1,
  "nom.br": 2,
  "not.br": 1,
  "ntr.br": 1,
  "odo.br": 1,
  "ong.br": 1,
  "org.br": 1,
  "osasco.br": 1,
  "palmas.br": 1,
  "poa.br": 1,
  "ppg.br": 1,
  "pro.br": 1,
  "psc.br": 1,
  "psi.br": 1,
  "pvh.br": 1,
  "qsl.br": 1,
  "radio.br": 1,
  "rec.br": 1,
  "recife.br": 1,
  "rep.br": 1,
  "ribeirao.br": 1,
  "rio.br": 1,
  "riobranco.br": 1,
  "riopreto.br": 1,
  "salvador.br": 1,
  "sampa.br": 1,
  "santamaria.br": 1,
  "santoandre.br": 1,
  "saobernardo.br": 1,
  "saogonca.br": 1,
  "seg.br": 1,
  "sjc.br": 1,
  "slg.br": 1,
  "slz.br": 1,
  "sorocaba.br": 1,
  "srv.br": 1,
  "taxi.br": 1,
  "tc.br": 1,
  "tec.br": 1,
  "teo.br": 1,
  "the.br": 1,
  "tmp.br": 1,
  "trd.br": 1,
  "tur.br": 1,
  "tv.br": 1,
  "udi.br": 1,
  "vet.br": 1,
  "vix.br": 1,
  "vlog.br": 1,
  "wiki.br": 1,
  "zlg.br": 1,
  "bs": 1,
  "com.bs": 1,
  "net.bs": 1,
  "org.bs": 1,
  "edu.bs": 1,
  "gov.bs": 1,
  "bt": 1,
  "com.bt": 1,
  "edu.bt": 1,
  "gov.bt": 1,
  "net.bt": 1,
  "org.bt": 1,
  "bv": 1,
  "bw": 1,
  "co.bw": 1,
  "org.bw": 1,
  "by": 1,
  "gov.by": 1,
  "mil.by": 1,
  "com.by": 1,
  "of.by": 1,
  "bz": 1,
  "com.bz": 1,
  "net.bz": 1,
  "org.bz": 1,
  "edu.bz": 1,
  "gov.bz": 1,
  "ca": 1,
  "ab.ca": 1,
  "bc.ca": 1,
  "mb.ca": 1,
  "nb.ca": 1,
  "nf.ca": 1,
  "nl.ca": 1,
  "ns.ca": 1,
  "nt.ca": 1,
  "nu.ca": 1,
  "on.ca": 1,
  "pe.ca": 1,
  "qc.ca": 1,
  "sk.ca": 1,
  "yk.ca": 1,
  "gc.ca": 1,
  "cat": 1,
  "cc": 1,
  "cd": 1,
  "gov.cd": 1,
  "cf": 1,
  "cg": 1,
  "ch": 1,
  "ci": 1,
  "org.ci": 1,
  "or.ci": 1,
  "com.ci": 1,
  "co.ci": 1,
  "edu.ci": 1,
  "ed.ci": 1,
  "ac.ci": 1,
  "net.ci": 1,
  "go.ci": 1,
  "asso.ci": 1,
  "xn--aroport-bya.ci": 1,
  "int.ci": 1,
  "presse.ci": 1,
  "md.ci": 1,
  "gouv.ci": 1,
  "ck": 2,
  "www.ck": 0,
  "cl": 1,
  "co.cl": 1,
  "gob.cl": 1,
  "gov.cl": 1,
  "mil.cl": 1,
  "cm": 1,
  "co.cm": 1,
  "com.cm": 1,
  "gov.cm": 1,
  "net.cm": 1,
  "cn": 1,
  "ac.cn": 1,
  "com.cn": 1,
  "edu.cn": 1,
  "gov.cn": 1,
  "net.cn": 1,
  "org.cn": 1,
  "mil.cn": 1,
  "xn--55qx5d.cn": 1,
  "xn--io0a7i.cn": 1,
  "xn--od0alg.cn": 1,
  "ah.cn": 1,
  "bj.cn": 1,
  "cq.cn": 1,
  "fj.cn": 1,
  "gd.cn": 1,
  "gs.cn": 1,
  "gz.cn": 1,
  "gx.cn": 1,
  "ha.cn": 1,
  "hb.cn": 1,
  "he.cn": 1,
  "hi.cn": 1,
  "hl.cn": 1,
  "hn.cn": 1,
  "jl.cn": 1,
  "js.cn": 1,
  "jx.cn": 1,
  "ln.cn": 1,
  "nm.cn": 1,
  "nx.cn": 1,
  "qh.cn": 1,
  "sc.cn": 1,
  "sd.cn": 1,
  "sh.cn": 1,
  "sn.cn": 1,
  "sx.cn": 1,
  "tj.cn": 1,
  "xj.cn": 1,
  "xz.cn": 1,
  "yn.cn": 1,
  "zj.cn": 1,
  "hk.cn": 1,
  "mo.cn": 1,
  "tw.cn": 1,
  "co": 1,
  "arts.co": 1,
  "com.co": 1,
  "edu.co": 1,
  "firm.co": 1,
  "gov.co": 1,
  "info.co": 1,
  "int.co": 1,
  "mil.co": 1,
  "net.co": 1,
  "nom.co": 1,
  "org.co": 1,
  "rec.co": 1,
  "web.co": 1,
  "com": 1,
  "coop": 1,
  "cr": 1,
  "ac.cr": 1,
  "co.cr": 1,
  "ed.cr": 1,
  "fi.cr": 1,
  "go.cr": 1,
  "or.cr": 1,
  "sa.cr": 1,
  "cu": 1,
  "com.cu": 1,
  "edu.cu": 1,
  "org.cu": 1,
  "net.cu": 1,
  "gov.cu": 1,
  "inf.cu": 1,
  "cv": 1,
  "com.cv": 1,
  "edu.cv": 1,
  "int.cv": 1,
  "nome.cv": 1,
  "org.cv": 1,
  "cw": 1,
  "com.cw": 1,
  "edu.cw": 1,
  "net.cw": 1,
  "org.cw": 1,
  "cx": 1,
  "gov.cx": 1,
  "cy": 1,
  "ac.cy": 1,
  "biz.cy": 1,
  "com.cy": 1,
  "ekloges.cy": 1,
  "gov.cy": 1,
  "ltd.cy": 1,
  "mil.cy": 1,
  "net.cy": 1,
  "org.cy": 1,
  "press.cy": 1,
  "pro.cy": 1,
  "tm.cy": 1,
  "cz": 1,
  "de": 1,
  "dj": 1,
  "dk": 1,
  "dm": 1,
  "com.dm": 1,
  "net.dm": 1,
  "org.dm": 1,
  "edu.dm": 1,
  "gov.dm": 1,
  "do": 1,
  "art.do": 1,
  "com.do": 1,
  "edu.do": 1,
  "gob.do": 1,
  "gov.do": 1,
  "mil.do": 1,
  "net.do": 1,
  "org.do": 1,
  "sld.do": 1,
  "web.do": 1,
  "dz": 1,
  "art.dz": 1,
  "asso.dz": 1,
  "com.dz": 1,
  "edu.dz": 1,
  "gov.dz": 1,
  "org.dz": 1,
  "net.dz": 1,
  "pol.dz": 1,
  "soc.dz": 1,
  "tm.dz": 1,
  "ec": 1,
  "com.ec": 1,
  "info.ec": 1,
  "net.ec": 1,
  "fin.ec": 1,
  "k12.ec": 1,
  "med.ec": 1,
  "pro.ec": 1,
  "org.ec": 1,
  "edu.ec": 1,
  "gov.ec": 1,
  "gob.ec": 1,
  "mil.ec": 1,
  "edu": 1,
  "ee": 1,
  "edu.ee": 1,
  "gov.ee": 1,
  "riik.ee": 1,
  "lib.ee": 1,
  "med.ee": 1,
  "com.ee": 1,
  "pri.ee": 1,
  "aip.ee": 1,
  "org.ee": 1,
  "fie.ee": 1,
  "eg": 1,
  "com.eg": 1,
  "edu.eg": 1,
  "eun.eg": 1,
  "gov.eg": 1,
  "mil.eg": 1,
  "name.eg": 1,
  "net.eg": 1,
  "org.eg": 1,
  "sci.eg": 1,
  "er": 2,
  "es": 1,
  "com.es": 1,
  "nom.es": 1,
  "org.es": 1,
  "gob.es": 1,
  "edu.es": 1,
  "et": 1,
  "com.et": 1,
  "gov.et": 1,
  "org.et": 1,
  "edu.et": 1,
  "biz.et": 1,
  "name.et": 1,
  "info.et": 1,
  "net.et": 1,
  "eu": 1,
  "fi": 1,
  "aland.fi": 1,
  "fj": 1,
  "ac.fj": 1,
  "biz.fj": 1,
  "com.fj": 1,
  "gov.fj": 1,
  "info.fj": 1,
  "mil.fj": 1,
  "name.fj": 1,
  "net.fj": 1,
  "org.fj": 1,
  "pro.fj": 1,
  "fk": 2,
  "com.fm": 1,
  "edu.fm": 1,
  "net.fm": 1,
  "org.fm": 1,
  "fm": 1,
  "fo": 1,
  "fr": 1,
  "asso.fr": 1,
  "com.fr": 1,
  "gouv.fr": 1,
  "nom.fr": 1,
  "prd.fr": 1,
  "tm.fr": 1,
  "avoues.fr": 1,
  "cci.fr": 1,
  "greta.fr": 1,
  "huissier-justice.fr": 1,
  "ga": 1,
  "gb": 1,
  "edu.gd": 1,
  "gov.gd": 1,
  "gd": 1,
  "ge": 1,
  "com.ge": 1,
  "edu.ge": 1,
  "gov.ge": 1,
  "org.ge": 1,
  "mil.ge": 1,
  "net.ge": 1,
  "pvt.ge": 1,
  "gf": 1,
  "gg": 1,
  "co.gg": 1,
  "net.gg": 1,
  "org.gg": 1,
  "gh": 1,
  "com.gh": 1,
  "edu.gh": 1,
  "gov.gh": 1,
  "org.gh": 1,
  "mil.gh": 1,
  "gi": 1,
  "com.gi": 1,
  "ltd.gi": 1,
  "gov.gi": 1,
  "mod.gi": 1,
  "edu.gi": 1,
  "org.gi": 1,
  "gl": 1,
  "co.gl": 1,
  "com.gl": 1,
  "edu.gl": 1,
  "net.gl": 1,
  "org.gl": 1,
  "gm": 1,
  "gn": 1,
  "ac.gn": 1,
  "com.gn": 1,
  "edu.gn": 1,
  "gov.gn": 1,
  "org.gn": 1,
  "net.gn": 1,
  "gov": 1,
  "gp": 1,
  "com.gp": 1,
  "net.gp": 1,
  "mobi.gp": 1,
  "edu.gp": 1,
  "org.gp": 1,
  "asso.gp": 1,
  "gq": 1,
  "gr": 1,
  "com.gr": 1,
  "edu.gr": 1,
  "net.gr": 1,
  "org.gr": 1,
  "gov.gr": 1,
  "gs": 1,
  "gt": 1,
  "com.gt": 1,
  "edu.gt": 1,
  "gob.gt": 1,
  "ind.gt": 1,
  "mil.gt": 1,
  "net.gt": 1,
  "org.gt": 1,
  "gu": 1,
  "com.gu": 1,
  "edu.gu": 1,
  "gov.gu": 1,
  "guam.gu": 1,
  "info.gu": 1,
  "net.gu": 1,
  "org.gu": 1,
  "web.gu": 1,
  "gw": 1,
  "gy": 1,
  "co.gy": 1,
  "com.gy": 1,
  "edu.gy": 1,
  "gov.gy": 1,
  "net.gy": 1,
  "org.gy": 1,
  "hk": 1,
  "com.hk": 1,
  "edu.hk": 1,
  "gov.hk": 1,
  "idv.hk": 1,
  "net.hk": 1,
  "org.hk": 1,
  "xn--55qx5d.hk": 1,
  "xn--wcvs22d.hk": 1,
  "xn--lcvr32d.hk": 1,
  "xn--mxtq1m.hk": 1,
  "xn--gmqw5a.hk": 1,
  "xn--ciqpn.hk": 1,
  "xn--gmq050i.hk": 1,
  "xn--zf0avx.hk": 1,
  "xn--io0a7i.hk": 1,
  "xn--mk0axi.hk": 1,
  "xn--od0alg.hk": 1,
  "xn--od0aq3b.hk": 1,
  "xn--tn0ag.hk": 1,
  "xn--uc0atv.hk": 1,
  "xn--uc0ay4a.hk": 1,
  "hm": 1,
  "hn": 1,
  "com.hn": 1,
  "edu.hn": 1,
  "org.hn": 1,
  "net.hn": 1,
  "mil.hn": 1,
  "gob.hn": 1,
  "hr": 1,
  "iz.hr": 1,
  "from.hr": 1,
  "name.hr": 1,
  "com.hr": 1,
  "ht": 1,
  "com.ht": 1,
  "shop.ht": 1,
  "firm.ht": 1,
  "info.ht": 1,
  "adult.ht": 1,
  "net.ht": 1,
  "pro.ht": 1,
  "org.ht": 1,
  "med.ht": 1,
  "art.ht": 1,
  "coop.ht": 1,
  "pol.ht": 1,
  "asso.ht": 1,
  "edu.ht": 1,
  "rel.ht": 1,
  "gouv.ht": 1,
  "perso.ht": 1,
  "hu": 1,
  "co.hu": 1,
  "info.hu": 1,
  "org.hu": 1,
  "priv.hu": 1,
  "sport.hu": 1,
  "tm.hu": 1,
  "2000.hu": 1,
  "agrar.hu": 1,
  "bolt.hu": 1,
  "casino.hu": 1,
  "city.hu": 1,
  "erotica.hu": 1,
  "erotika.hu": 1,
  "film.hu": 1,
  "forum.hu": 1,
  "games.hu": 1,
  "hotel.hu": 1,
  "ingatlan.hu": 1,
  "jogasz.hu": 1,
  "konyvelo.hu": 1,
  "lakas.hu": 1,
  "media.hu": 1,
  "news.hu": 1,
  "reklam.hu": 1,
  "sex.hu": 1,
  "shop.hu": 1,
  "suli.hu": 1,
  "szex.hu": 1,
  "tozsde.hu": 1,
  "utazas.hu": 1,
  "video.hu": 1,
  "id": 1,
  "ac.id": 1,
  "biz.id": 1,
  "co.id": 1,
  "desa.id": 1,
  "go.id": 1,
  "mil.id": 1,
  "my.id": 1,
  "net.id": 1,
  "or.id": 1,
  "ponpes.id": 1,
  "sch.id": 1,
  "web.id": 1,
  "ie": 1,
  "gov.ie": 1,
  "il": 1,
  "ac.il": 1,
  "co.il": 1,
  "gov.il": 1,
  "idf.il": 1,
  "k12.il": 1,
  "muni.il": 1,
  "net.il": 1,
  "org.il": 1,
  "xn--4dbrk0ce": 1,
  "xn--4dbgdty6c.xn--4dbrk0ce": 1,
  "xn--5dbhl8d.xn--4dbrk0ce": 1,
  "xn--8dbq2a.xn--4dbrk0ce": 1,
  "xn--hebda8b.xn--4dbrk0ce": 1,
  "im": 1,
  "ac.im": 1,
  "co.im": 1,
  "com.im": 1,
  "ltd.co.im": 1,
  "net.im": 1,
  "org.im": 1,
  "plc.co.im": 1,
  "tt.im": 1,
  "tv.im": 1,
  "in": 1,
  "5g.in": 1,
  "6g.in": 1,
  "ac.in": 1,
  "ai.in": 1,
  "am.in": 1,
  "bihar.in": 1,
  "biz.in": 1,
  "business.in": 1,
  "ca.in": 1,
  "cn.in": 1,
  "co.in": 1,
  "com.in": 1,
  "coop.in": 1,
  "cs.in": 1,
  "delhi.in": 1,
  "dr.in": 1,
  "edu.in": 1,
  "er.in": 1,
  "firm.in": 1,
  "gen.in": 1,
  "gov.in": 1,
  "gujarat.in": 1,
  "ind.in": 1,
  "info.in": 1,
  "int.in": 1,
  "internet.in": 1,
  "io.in": 1,
  "me.in": 1,
  "mil.in": 1,
  "net.in": 1,
  "nic.in": 1,
  "org.in": 1,
  "pg.in": 1,
  "post.in": 1,
  "pro.in": 1,
  "res.in": 1,
  "travel.in": 1,
  "tv.in": 1,
  "uk.in": 1,
  "up.in": 1,
  "us.in": 1,
  "info": 1,
  "int": 1,
  "eu.int": 1,
  "io": 1,
  "com.io": 1,
  "iq": 1,
  "gov.iq": 1,
  "edu.iq": 1,
  "mil.iq": 1,
  "com.iq": 1,
  "org.iq": 1,
  "net.iq": 1,
  "ir": 1,
  "ac.ir": 1,
  "co.ir": 1,
  "gov.ir": 1,
  "id.ir": 1,
  "net.ir": 1,
  "org.ir": 1,
  "sch.ir": 1,
  "xn--mgba3a4f16a.ir": 1,
  "xn--mgba3a4fra.ir": 1,
  "is": 1,
  "net.is": 1,
  "com.is": 1,
  "edu.is": 1,
  "gov.is": 1,
  "org.is": 1,
  "int.is": 1,
  "it": 1,
  "gov.it": 1,
  "edu.it": 1,
  "abr.it": 1,
  "abruzzo.it": 1,
  "aosta-valley.it": 1,
  "aostavalley.it": 1,
  "bas.it": 1,
  "basilicata.it": 1,
  "cal.it": 1,
  "calabria.it": 1,
  "cam.it": 1,
  "campania.it": 1,
  "emilia-romagna.it": 1,
  "emiliaromagna.it": 1,
  "emr.it": 1,
  "friuli-v-giulia.it": 1,
  "friuli-ve-giulia.it": 1,
  "friuli-vegiulia.it": 1,
  "friuli-venezia-giulia.it": 1,
  "friuli-veneziagiulia.it": 1,
  "friuli-vgiulia.it": 1,
  "friuliv-giulia.it": 1,
  "friulive-giulia.it": 1,
  "friulivegiulia.it": 1,
  "friulivenezia-giulia.it": 1,
  "friuliveneziagiulia.it": 1,
  "friulivgiulia.it": 1,
  "fvg.it": 1,
  "laz.it": 1,
  "lazio.it": 1,
  "lig.it": 1,
  "liguria.it": 1,
  "lom.it": 1,
  "lombardia.it": 1,
  "lombardy.it": 1,
  "lucania.it": 1,
  "mar.it": 1,
  "marche.it": 1,
  "mol.it": 1,
  "molise.it": 1,
  "piedmont.it": 1,
  "piemonte.it": 1,
  "pmn.it": 1,
  "pug.it": 1,
  "puglia.it": 1,
  "sar.it": 1,
  "sardegna.it": 1,
  "sardinia.it": 1,
  "sic.it": 1,
  "sicilia.it": 1,
  "sicily.it": 1,
  "taa.it": 1,
  "tos.it": 1,
  "toscana.it": 1,
  "trentin-sud-tirol.it": 1,
  "xn--trentin-sd-tirol-rzb.it": 1,
  "trentin-sudtirol.it": 1,
  "xn--trentin-sdtirol-7vb.it": 1,
  "trentin-sued-tirol.it": 1,
  "trentin-suedtirol.it": 1,
  "trentino-a-adige.it": 1,
  "trentino-aadige.it": 1,
  "trentino-alto-adige.it": 1,
  "trentino-altoadige.it": 1,
  "trentino-s-tirol.it": 1,
  "trentino-stirol.it": 1,
  "trentino-sud-tirol.it": 1,
  "xn--trentino-sd-tirol-c3b.it": 1,
  "trentino-sudtirol.it": 1,
  "xn--trentino-sdtirol-szb.it": 1,
  "trentino-sued-tirol.it": 1,
  "trentino-suedtirol.it": 1,
  "trentino.it": 1,
  "trentinoa-adige.it": 1,
  "trentinoaadige.it": 1,
  "trentinoalto-adige.it": 1,
  "trentinoaltoadige.it": 1,
  "trentinos-tirol.it": 1,
  "trentinostirol.it": 1,
  "trentinosud-tirol.it": 1,
  "xn--trentinosd-tirol-rzb.it": 1,
  "trentinosudtirol.it": 1,
  "xn--trentinosdtirol-7vb.it": 1,
  "trentinosued-tirol.it": 1,
  "trentinosuedtirol.it": 1,
  "trentinsud-tirol.it": 1,
  "xn--trentinsd-tirol-6vb.it": 1,
  "trentinsudtirol.it": 1,
  "xn--trentinsdtirol-nsb.it": 1,
  "trentinsued-tirol.it": 1,
  "trentinsuedtirol.it": 1,
  "tuscany.it": 1,
  "umb.it": 1,
  "umbria.it": 1,
  "val-d-aosta.it": 1,
  "val-daosta.it": 1,
  "vald-aosta.it": 1,
  "valdaosta.it": 1,
  "valle-aosta.it": 1,
  "valle-d-aosta.it": 1,
  "valle-daosta.it": 1,
  "valleaosta.it": 1,
  "valled-aosta.it": 1,
  "valledaosta.it": 1,
  "vallee-aoste.it": 1,
  "xn--valle-aoste-ebb.it": 1,
  "vallee-d-aoste.it": 1,
  "xn--valle-d-aoste-ehb.it": 1,
  "valleeaoste.it": 1,
  "xn--valleaoste-e7a.it": 1,
  "valleedaoste.it": 1,
  "xn--valledaoste-ebb.it": 1,
  "vao.it": 1,
  "vda.it": 1,
  "ven.it": 1,
  "veneto.it": 1,
  "ag.it": 1,
  "agrigento.it": 1,
  "al.it": 1,
  "alessandria.it": 1,
  "alto-adige.it": 1,
  "altoadige.it": 1,
  "an.it": 1,
  "ancona.it": 1,
  "andria-barletta-trani.it": 1,
  "andria-trani-barletta.it": 1,
  "andriabarlettatrani.it": 1,
  "andriatranibarletta.it": 1,
  "ao.it": 1,
  "aosta.it": 1,
  "aoste.it": 1,
  "ap.it": 1,
  "aq.it": 1,
  "aquila.it": 1,
  "ar.it": 1,
  "arezzo.it": 1,
  "ascoli-piceno.it": 1,
  "ascolipiceno.it": 1,
  "asti.it": 1,
  "at.it": 1,
  "av.it": 1,
  "avellino.it": 1,
  "ba.it": 1,
  "balsan-sudtirol.it": 1,
  "xn--balsan-sdtirol-nsb.it": 1,
  "balsan-suedtirol.it": 1,
  "balsan.it": 1,
  "bari.it": 1,
  "barletta-trani-andria.it": 1,
  "barlettatraniandria.it": 1,
  "belluno.it": 1,
  "benevento.it": 1,
  "bergamo.it": 1,
  "bg.it": 1,
  "bi.it": 1,
  "biella.it": 1,
  "bl.it": 1,
  "bn.it": 1,
  "bo.it": 1,
  "bologna.it": 1,
  "bolzano-altoadige.it": 1,
  "bolzano.it": 1,
  "bozen-sudtirol.it": 1,
  "xn--bozen-sdtirol-2ob.it": 1,
  "bozen-suedtirol.it": 1,
  "bozen.it": 1,
  "br.it": 1,
  "brescia.it": 1,
  "brindisi.it": 1,
  "bs.it": 1,
  "bt.it": 1,
  "bulsan-sudtirol.it": 1,
  "xn--bulsan-sdtirol-nsb.it": 1,
  "bulsan-suedtirol.it": 1,
  "bulsan.it": 1,
  "bz.it": 1,
  "ca.it": 1,
  "cagliari.it": 1,
  "caltanissetta.it": 1,
  "campidano-medio.it": 1,
  "campidanomedio.it": 1,
  "campobasso.it": 1,
  "carbonia-iglesias.it": 1,
  "carboniaiglesias.it": 1,
  "carrara-massa.it": 1,
  "carraramassa.it": 1,
  "caserta.it": 1,
  "catania.it": 1,
  "catanzaro.it": 1,
  "cb.it": 1,
  "ce.it": 1,
  "cesena-forli.it": 1,
  "xn--cesena-forl-mcb.it": 1,
  "cesenaforli.it": 1,
  "xn--cesenaforl-i8a.it": 1,
  "ch.it": 1,
  "chieti.it": 1,
  "ci.it": 1,
  "cl.it": 1,
  "cn.it": 1,
  "co.it": 1,
  "como.it": 1,
  "cosenza.it": 1,
  "cr.it": 1,
  "cremona.it": 1,
  "crotone.it": 1,
  "cs.it": 1,
  "ct.it": 1,
  "cuneo.it": 1,
  "cz.it": 1,
  "dell-ogliastra.it": 1,
  "dellogliastra.it": 1,
  "en.it": 1,
  "enna.it": 1,
  "fc.it": 1,
  "fe.it": 1,
  "fermo.it": 1,
  "ferrara.it": 1,
  "fg.it": 1,
  "fi.it": 1,
  "firenze.it": 1,
  "florence.it": 1,
  "fm.it": 1,
  "foggia.it": 1,
  "forli-cesena.it": 1,
  "xn--forl-cesena-fcb.it": 1,
  "forlicesena.it": 1,
  "xn--forlcesena-c8a.it": 1,
  "fr.it": 1,
  "frosinone.it": 1,
  "ge.it": 1,
  "genoa.it": 1,
  "genova.it": 1,
  "go.it": 1,
  "gorizia.it": 1,
  "gr.it": 1,
  "grosseto.it": 1,
  "iglesias-carbonia.it": 1,
  "iglesiascarbonia.it": 1,
  "im.it": 1,
  "imperia.it": 1,
  "is.it": 1,
  "isernia.it": 1,
  "kr.it": 1,
  "la-spezia.it": 1,
  "laquila.it": 1,
  "laspezia.it": 1,
  "latina.it": 1,
  "lc.it": 1,
  "le.it": 1,
  "lecce.it": 1,
  "lecco.it": 1,
  "li.it": 1,
  "livorno.it": 1,
  "lo.it": 1,
  "lodi.it": 1,
  "lt.it": 1,
  "lu.it": 1,
  "lucca.it": 1,
  "macerata.it": 1,
  "mantova.it": 1,
  "massa-carrara.it": 1,
  "massacarrara.it": 1,
  "matera.it": 1,
  "mb.it": 1,
  "mc.it": 1,
  "me.it": 1,
  "medio-campidano.it": 1,
  "mediocampidano.it": 1,
  "messina.it": 1,
  "mi.it": 1,
  "milan.it": 1,
  "milano.it": 1,
  "mn.it": 1,
  "mo.it": 1,
  "modena.it": 1,
  "monza-brianza.it": 1,
  "monza-e-della-brianza.it": 1,
  "monza.it": 1,
  "monzabrianza.it": 1,
  "monzaebrianza.it": 1,
  "monzaedellabrianza.it": 1,
  "ms.it": 1,
  "mt.it": 1,
  "na.it": 1,
  "naples.it": 1,
  "napoli.it": 1,
  "no.it": 1,
  "novara.it": 1,
  "nu.it": 1,
  "nuoro.it": 1,
  "og.it": 1,
  "ogliastra.it": 1,
  "olbia-tempio.it": 1,
  "olbiatempio.it": 1,
  "or.it": 1,
  "oristano.it": 1,
  "ot.it": 1,
  "pa.it": 1,
  "padova.it": 1,
  "padua.it": 1,
  "palermo.it": 1,
  "parma.it": 1,
  "pavia.it": 1,
  "pc.it": 1,
  "pd.it": 1,
  "pe.it": 1,
  "perugia.it": 1,
  "pesaro-urbino.it": 1,
  "pesarourbino.it": 1,
  "pescara.it": 1,
  "pg.it": 1,
  "pi.it": 1,
  "piacenza.it": 1,
  "pisa.it": 1,
  "pistoia.it": 1,
  "pn.it": 1,
  "po.it": 1,
  "pordenone.it": 1,
  "potenza.it": 1,
  "pr.it": 1,
  "prato.it": 1,
  "pt.it": 1,
  "pu.it": 1,
  "pv.it": 1,
  "pz.it": 1,
  "ra.it": 1,
  "ragusa.it": 1,
  "ravenna.it": 1,
  "rc.it": 1,
  "re.it": 1,
  "reggio-calabria.it": 1,
  "reggio-emilia.it": 1,
  "reggiocalabria.it": 1,
  "reggioemilia.it": 1,
  "rg.it": 1,
  "ri.it": 1,
  "rieti.it": 1,
  "rimini.it": 1,
  "rm.it": 1,
  "rn.it": 1,
  "ro.it": 1,
  "roma.it": 1,
  "rome.it": 1,
  "rovigo.it": 1,
  "sa.it": 1,
  "salerno.it": 1,
  "sassari.it": 1,
  "savona.it": 1,
  "si.it": 1,
  "siena.it": 1,
  "siracusa.it": 1,
  "so.it": 1,
  "sondrio.it": 1,
  "sp.it": 1,
  "sr.it": 1,
  "ss.it": 1,
  "suedtirol.it": 1,
  "xn--sdtirol-n2a.it": 1,
  "sv.it": 1,
  "ta.it": 1,
  "taranto.it": 1,
  "te.it": 1,
  "tempio-olbia.it": 1,
  "tempioolbia.it": 1,
  "teramo.it": 1,
  "terni.it": 1,
  "tn.it": 1,
  "to.it": 1,
  "torino.it": 1,
  "tp.it": 1,
  "tr.it": 1,
  "trani-andria-barletta.it": 1,
  "trani-barletta-andria.it": 1,
  "traniandriabarletta.it": 1,
  "tranibarlettaandria.it": 1,
  "trapani.it": 1,
  "trento.it": 1,
  "treviso.it": 1,
  "trieste.it": 1,
  "ts.it": 1,
  "turin.it": 1,
  "tv.it": 1,
  "ud.it": 1,
  "udine.it": 1,
  "urbino-pesaro.it": 1,
  "urbinopesaro.it": 1,
  "va.it": 1,
  "varese.it": 1,
  "vb.it": 1,
  "vc.it": 1,
  "ve.it": 1,
  "venezia.it": 1,
  "venice.it": 1,
  "verbania.it": 1,
  "vercelli.it": 1,
  "verona.it": 1,
  "vi.it": 1,
  "vibo-valentia.it": 1,
  "vibovalentia.it": 1,
  "vicenza.it": 1,
  "viterbo.it": 1,
  "vr.it": 1,
  "vs.it": 1,
  "vt.it": 1,
  "vv.it": 1,
  "je": 1,
  "co.je": 1,
  "net.je": 1,
  "org.je": 1,
  "jm": 2,
  "jo": 1,
  "com.jo": 1,
  "org.jo": 1,
  "net.jo": 1,
  "edu.jo": 1,
  "sch.jo": 1,
  "gov.jo": 1,
  "mil.jo": 1,
  "name.jo": 1,
  "jobs": 1,
  "jp": 1,
  "ac.jp": 1,
  "ad.jp": 1,
  "co.jp": 1,
  "ed.jp": 1,
  "go.jp": 1,
  "gr.jp": 1,
  "lg.jp": 1,
  "ne.jp": 1,
  "or.jp": 1,
  "aichi.jp": 1,
  "akita.jp": 1,
  "aomori.jp": 1,
  "chiba.jp": 1,
  "ehime.jp": 1,
  "fukui.jp": 1,
  "fukuoka.jp": 1,
  "fukushima.jp": 1,
  "gifu.jp": 1,
  "gunma.jp": 1,
  "hiroshima.jp": 1,
  "hokkaido.jp": 1,
  "hyogo.jp": 1,
  "ibaraki.jp": 1,
  "ishikawa.jp": 1,
  "iwate.jp": 1,
  "kagawa.jp": 1,
  "kagoshima.jp": 1,
  "kanagawa.jp": 1,
  "kochi.jp": 1,
  "kumamoto.jp": 1,
  "kyoto.jp": 1,
  "mie.jp": 1,
  "miyagi.jp": 1,
  "miyazaki.jp": 1,
  "nagano.jp": 1,
  "nagasaki.jp": 1,
  "nara.jp": 1,
  "niigata.jp": 1,
  "oita.jp": 1,
  "okayama.jp": 1,
  "okinawa.jp": 1,
  "osaka.jp": 1,
  "saga.jp": 1,
  "saitama.jp": 1,
  "shiga.jp": 1,
  "shimane.jp": 1,
  "shizuoka.jp": 1,
  "tochigi.jp": 1,
  "tokushima.jp": 1,
  "tokyo.jp": 1,
  "tottori.jp": 1,
  "toyama.jp": 1,
  "wakayama.jp": 1,
  "yamagata.jp": 1,
  "yamaguchi.jp": 1,
  "yamanashi.jp": 1,
  "xn--4pvxs.jp": 1,
  "xn--vgu402c.jp": 1,
  "xn--c3s14m.jp": 1,
  "xn--f6qx53a.jp": 1,
  "xn--8pvr4u.jp": 1,
  "xn--uist22h.jp": 1,
  "xn--djrs72d6uy.jp": 1,
  "xn--mkru45i.jp": 1,
  "xn--0trq7p7nn.jp": 1,
  "xn--8ltr62k.jp": 1,
  "xn--2m4a15e.jp": 1,
  "xn--efvn9s.jp": 1,
  "xn--32vp30h.jp": 1,
  "xn--4it797k.jp": 1,
  "xn--1lqs71d.jp": 1,
  "xn--5rtp49c.jp": 1,
  "xn--5js045d.jp": 1,
  "xn--ehqz56n.jp": 1,
  "xn--1lqs03n.jp": 1,
  "xn--qqqt11m.jp": 1,
  "xn--kbrq7o.jp": 1,
  "xn--pssu33l.jp": 1,
  "xn--ntsq17g.jp": 1,
  "xn--uisz3g.jp": 1,
  "xn--6btw5a.jp": 1,
  "xn--1ctwo.jp": 1,
  "xn--6orx2r.jp": 1,
  "xn--rht61e.jp": 1,
  "xn--rht27z.jp": 1,
  "xn--djty4k.jp": 1,
  "xn--nit225k.jp": 1,
  "xn--rht3d.jp": 1,
  "xn--klty5x.jp": 1,
  "xn--kltx9a.jp": 1,
  "xn--kltp7d.jp": 1,
  "xn--uuwu58a.jp": 1,
  "xn--zbx025d.jp": 1,
  "xn--ntso0iqx3a.jp": 1,
  "xn--elqq16h.jp": 1,
  "xn--4it168d.jp": 1,
  "xn--klt787d.jp": 1,
  "xn--rny31h.jp": 1,
  "xn--7t0a264c.jp": 1,
  "xn--5rtq34k.jp": 1,
  "xn--k7yn95e.jp": 1,
  "xn--tor131o.jp": 1,
  "xn--d5qv7z876c.jp": 1,
  "kawasaki.jp": 2,
  "kitakyushu.jp": 2,
  "kobe.jp": 2,
  "nagoya.jp": 2,
  "sapporo.jp": 2,
  "sendai.jp": 2,
  "yokohama.jp": 2,
  "city.kawasaki.jp": 0,
  "city.kitakyushu.jp": 0,
  "city.kobe.jp": 0,
  "city.nagoya.jp": 0,
  "city.sapporo.jp": 0,
  "city.sendai.jp": 0,
  "city.yokohama.jp": 0,
  "aisai.aichi.jp": 1,
  "ama.aichi.jp": 1,
  "anjo.aichi.jp": 1,
  "asuke.aichi.jp": 1,
  "chiryu.aichi.jp": 1,
  "chita.aichi.jp": 1,
  "fuso.aichi.jp": 1,
  "gamagori.aichi.jp": 1,
  "handa.aichi.jp": 1,
  "hazu.aichi.jp": 1,
  "hekinan.aichi.jp": 1,
  "higashiura.aichi.jp": 1,
  "ichinomiya.aichi.jp": 1,
  "inazawa.aichi.jp": 1,
  "inuyama.aichi.jp": 1,
  "isshiki.aichi.jp": 1,
  "iwakura.aichi.jp": 1,
  "kanie.aichi.jp": 1,
  "kariya.aichi.jp": 1,
  "kasugai.aichi.jp": 1,
  "kira.aichi.jp": 1,
  "kiyosu.aichi.jp": 1,
  "komaki.aichi.jp": 1,
  "konan.aichi.jp": 1,
  "kota.aichi.jp": 1,
  "mihama.aichi.jp": 1,
  "miyoshi.aichi.jp": 1,
  "nishio.aichi.jp": 1,
  "nisshin.aichi.jp": 1,
  "obu.aichi.jp": 1,
  "oguchi.aichi.jp": 1,
  "oharu.aichi.jp": 1,
  "okazaki.aichi.jp": 1,
  "owariasahi.aichi.jp": 1,
  "seto.aichi.jp": 1,
  "shikatsu.aichi.jp": 1,
  "shinshiro.aichi.jp": 1,
  "shitara.aichi.jp": 1,
  "tahara.aichi.jp": 1,
  "takahama.aichi.jp": 1,
  "tobishima.aichi.jp": 1,
  "toei.aichi.jp": 1,
  "togo.aichi.jp": 1,
  "tokai.aichi.jp": 1,
  "tokoname.aichi.jp": 1,
  "toyoake.aichi.jp": 1,
  "toyohashi.aichi.jp": 1,
  "toyokawa.aichi.jp": 1,
  "toyone.aichi.jp": 1,
  "toyota.aichi.jp": 1,
  "tsushima.aichi.jp": 1,
  "yatomi.aichi.jp": 1,
  "akita.akita.jp": 1,
  "daisen.akita.jp": 1,
  "fujisato.akita.jp": 1,
  "gojome.akita.jp": 1,
  "hachirogata.akita.jp": 1,
  "happou.akita.jp": 1,
  "higashinaruse.akita.jp": 1,
  "honjo.akita.jp": 1,
  "honjyo.akita.jp": 1,
  "ikawa.akita.jp": 1,
  "kamikoani.akita.jp": 1,
  "kamioka.akita.jp": 1,
  "katagami.akita.jp": 1,
  "kazuno.akita.jp": 1,
  "kitaakita.akita.jp": 1,
  "kosaka.akita.jp": 1,
  "kyowa.akita.jp": 1,
  "misato.akita.jp": 1,
  "mitane.akita.jp": 1,
  "moriyoshi.akita.jp": 1,
  "nikaho.akita.jp": 1,
  "noshiro.akita.jp": 1,
  "odate.akita.jp": 1,
  "oga.akita.jp": 1,
  "ogata.akita.jp": 1,
  "semboku.akita.jp": 1,
  "yokote.akita.jp": 1,
  "yurihonjo.akita.jp": 1,
  "aomori.aomori.jp": 1,
  "gonohe.aomori.jp": 1,
  "hachinohe.aomori.jp": 1,
  "hashikami.aomori.jp": 1,
  "hiranai.aomori.jp": 1,
  "hirosaki.aomori.jp": 1,
  "itayanagi.aomori.jp": 1,
  "kuroishi.aomori.jp": 1,
  "misawa.aomori.jp": 1,
  "mutsu.aomori.jp": 1,
  "nakadomari.aomori.jp": 1,
  "noheji.aomori.jp": 1,
  "oirase.aomori.jp": 1,
  "owani.aomori.jp": 1,
  "rokunohe.aomori.jp": 1,
  "sannohe.aomori.jp": 1,
  "shichinohe.aomori.jp": 1,
  "shingo.aomori.jp": 1,
  "takko.aomori.jp": 1,
  "towada.aomori.jp": 1,
  "tsugaru.aomori.jp": 1,
  "tsuruta.aomori.jp": 1,
  "abiko.chiba.jp": 1,
  "asahi.chiba.jp": 1,
  "chonan.chiba.jp": 1,
  "chosei.chiba.jp": 1,
  "choshi.chiba.jp": 1,
  "chuo.chiba.jp": 1,
  "funabashi.chiba.jp": 1,
  "futtsu.chiba.jp": 1,
  "hanamigawa.chiba.jp": 1,
  "ichihara.chiba.jp": 1,
  "ichikawa.chiba.jp": 1,
  "ichinomiya.chiba.jp": 1,
  "inzai.chiba.jp": 1,
  "isumi.chiba.jp": 1,
  "kamagaya.chiba.jp": 1,
  "kamogawa.chiba.jp": 1,
  "kashiwa.chiba.jp": 1,
  "katori.chiba.jp": 1,
  "katsuura.chiba.jp": 1,
  "kimitsu.chiba.jp": 1,
  "kisarazu.chiba.jp": 1,
  "kozaki.chiba.jp": 1,
  "kujukuri.chiba.jp": 1,
  "kyonan.chiba.jp": 1,
  "matsudo.chiba.jp": 1,
  "midori.chiba.jp": 1,
  "mihama.chiba.jp": 1,
  "minamiboso.chiba.jp": 1,
  "mobara.chiba.jp": 1,
  "mutsuzawa.chiba.jp": 1,
  "nagara.chiba.jp": 1,
  "nagareyama.chiba.jp": 1,
  "narashino.chiba.jp": 1,
  "narita.chiba.jp": 1,
  "noda.chiba.jp": 1,
  "oamishirasato.chiba.jp": 1,
  "omigawa.chiba.jp": 1,
  "onjuku.chiba.jp": 1,
  "otaki.chiba.jp": 1,
  "sakae.chiba.jp": 1,
  "sakura.chiba.jp": 1,
  "shimofusa.chiba.jp": 1,
  "shirako.chiba.jp": 1,
  "shiroi.chiba.jp": 1,
  "shisui.chiba.jp": 1,
  "sodegaura.chiba.jp": 1,
  "sosa.chiba.jp": 1,
  "tako.chiba.jp": 1,
  "tateyama.chiba.jp": 1,
  "togane.chiba.jp": 1,
  "tohnosho.chiba.jp": 1,
  "tomisato.chiba.jp": 1,
  "urayasu.chiba.jp": 1,
  "yachimata.chiba.jp": 1,
  "yachiyo.chiba.jp": 1,
  "yokaichiba.chiba.jp": 1,
  "yokoshibahikari.chiba.jp": 1,
  "yotsukaido.chiba.jp": 1,
  "ainan.ehime.jp": 1,
  "honai.ehime.jp": 1,
  "ikata.ehime.jp": 1,
  "imabari.ehime.jp": 1,
  "iyo.ehime.jp": 1,
  "kamijima.ehime.jp": 1,
  "kihoku.ehime.jp": 1,
  "kumakogen.ehime.jp": 1,
  "masaki.ehime.jp": 1,
  "matsuno.ehime.jp": 1,
  "matsuyama.ehime.jp": 1,
  "namikata.ehime.jp": 1,
  "niihama.ehime.jp": 1,
  "ozu.ehime.jp": 1,
  "saijo.ehime.jp": 1,
  "seiyo.ehime.jp": 1,
  "shikokuchuo.ehime.jp": 1,
  "tobe.ehime.jp": 1,
  "toon.ehime.jp": 1,
  "uchiko.ehime.jp": 1,
  "uwajima.ehime.jp": 1,
  "yawatahama.ehime.jp": 1,
  "echizen.fukui.jp": 1,
  "eiheiji.fukui.jp": 1,
  "fukui.fukui.jp": 1,
  "ikeda.fukui.jp": 1,
  "katsuyama.fukui.jp": 1,
  "mihama.fukui.jp": 1,
  "minamiechizen.fukui.jp": 1,
  "obama.fukui.jp": 1,
  "ohi.fukui.jp": 1,
  "ono.fukui.jp": 1,
  "sabae.fukui.jp": 1,
  "sakai.fukui.jp": 1,
  "takahama.fukui.jp": 1,
  "tsuruga.fukui.jp": 1,
  "wakasa.fukui.jp": 1,
  "ashiya.fukuoka.jp": 1,
  "buzen.fukuoka.jp": 1,
  "chikugo.fukuoka.jp": 1,
  "chikuho.fukuoka.jp": 1,
  "chikujo.fukuoka.jp": 1,
  "chikushino.fukuoka.jp": 1,
  "chikuzen.fukuoka.jp": 1,
  "chuo.fukuoka.jp": 1,
  "dazaifu.fukuoka.jp": 1,
  "fukuchi.fukuoka.jp": 1,
  "hakata.fukuoka.jp": 1,
  "higashi.fukuoka.jp": 1,
  "hirokawa.fukuoka.jp": 1,
  "hisayama.fukuoka.jp": 1,
  "iizuka.fukuoka.jp": 1,
  "inatsuki.fukuoka.jp": 1,
  "kaho.fukuoka.jp": 1,
  "kasuga.fukuoka.jp": 1,
  "kasuya.fukuoka.jp": 1,
  "kawara.fukuoka.jp": 1,
  "keisen.fukuoka.jp": 1,
  "koga.fukuoka.jp": 1,
  "kurate.fukuoka.jp": 1,
  "kurogi.fukuoka.jp": 1,
  "kurume.fukuoka.jp": 1,
  "minami.fukuoka.jp": 1,
  "miyako.fukuoka.jp": 1,
  "miyama.fukuoka.jp": 1,
  "miyawaka.fukuoka.jp": 1,
  "mizumaki.fukuoka.jp": 1,
  "munakata.fukuoka.jp": 1,
  "nakagawa.fukuoka.jp": 1,
  "nakama.fukuoka.jp": 1,
  "nishi.fukuoka.jp": 1,
  "nogata.fukuoka.jp": 1,
  "ogori.fukuoka.jp": 1,
  "okagaki.fukuoka.jp": 1,
  "okawa.fukuoka.jp": 1,
  "oki.fukuoka.jp": 1,
  "omuta.fukuoka.jp": 1,
  "onga.fukuoka.jp": 1,
  "onojo.fukuoka.jp": 1,
  "oto.fukuoka.jp": 1,
  "saigawa.fukuoka.jp": 1,
  "sasaguri.fukuoka.jp": 1,
  "shingu.fukuoka.jp": 1,
  "shinyoshitomi.fukuoka.jp": 1,
  "shonai.fukuoka.jp": 1,
  "soeda.fukuoka.jp": 1,
  "sue.fukuoka.jp": 1,
  "tachiarai.fukuoka.jp": 1,
  "tagawa.fukuoka.jp": 1,
  "takata.fukuoka.jp": 1,
  "toho.fukuoka.jp": 1,
  "toyotsu.fukuoka.jp": 1,
  "tsuiki.fukuoka.jp": 1,
  "ukiha.fukuoka.jp": 1,
  "umi.fukuoka.jp": 1,
  "usui.fukuoka.jp": 1,
  "yamada.fukuoka.jp": 1,
  "yame.fukuoka.jp": 1,
  "yanagawa.fukuoka.jp": 1,
  "yukuhashi.fukuoka.jp": 1,
  "aizubange.fukushima.jp": 1,
  "aizumisato.fukushima.jp": 1,
  "aizuwakamatsu.fukushima.jp": 1,
  "asakawa.fukushima.jp": 1,
  "bandai.fukushima.jp": 1,
  "date.fukushima.jp": 1,
  "fukushima.fukushima.jp": 1,
  "furudono.fukushima.jp": 1,
  "futaba.fukushima.jp": 1,
  "hanawa.fukushima.jp": 1,
  "higashi.fukushima.jp": 1,
  "hirata.fukushima.jp": 1,
  "hirono.fukushima.jp": 1,
  "iitate.fukushima.jp": 1,
  "inawashiro.fukushima.jp": 1,
  "ishikawa.fukushima.jp": 1,
  "iwaki.fukushima.jp": 1,
  "izumizaki.fukushima.jp": 1,
  "kagamiishi.fukushima.jp": 1,
  "kaneyama.fukushima.jp": 1,
  "kawamata.fukushima.jp": 1,
  "kitakata.fukushima.jp": 1,
  "kitashiobara.fukushima.jp": 1,
  "koori.fukushima.jp": 1,
  "koriyama.fukushima.jp": 1,
  "kunimi.fukushima.jp": 1,
  "miharu.fukushima.jp": 1,
  "mishima.fukushima.jp": 1,
  "namie.fukushima.jp": 1,
  "nango.fukushima.jp": 1,
  "nishiaizu.fukushima.jp": 1,
  "nishigo.fukushima.jp": 1,
  "okuma.fukushima.jp": 1,
  "omotego.fukushima.jp": 1,
  "ono.fukushima.jp": 1,
  "otama.fukushima.jp": 1,
  "samegawa.fukushima.jp": 1,
  "shimogo.fukushima.jp": 1,
  "shirakawa.fukushima.jp": 1,
  "showa.fukushima.jp": 1,
  "soma.fukushima.jp": 1,
  "sukagawa.fukushima.jp": 1,
  "taishin.fukushima.jp": 1,
  "tamakawa.fukushima.jp": 1,
  "tanagura.fukushima.jp": 1,
  "tenei.fukushima.jp": 1,
  "yabuki.fukushima.jp": 1,
  "yamato.fukushima.jp": 1,
  "yamatsuri.fukushima.jp": 1,
  "yanaizu.fukushima.jp": 1,
  "yugawa.fukushima.jp": 1,
  "anpachi.gifu.jp": 1,
  "ena.gifu.jp": 1,
  "gifu.gifu.jp": 1,
  "ginan.gifu.jp": 1,
  "godo.gifu.jp": 1,
  "gujo.gifu.jp": 1,
  "hashima.gifu.jp": 1,
  "hichiso.gifu.jp": 1,
  "hida.gifu.jp": 1,
  "higashishirakawa.gifu.jp": 1,
  "ibigawa.gifu.jp": 1,
  "ikeda.gifu.jp": 1,
  "kakamigahara.gifu.jp": 1,
  "kani.gifu.jp": 1,
  "kasahara.gifu.jp": 1,
  "kasamatsu.gifu.jp": 1,
  "kawaue.gifu.jp": 1,
  "kitagata.gifu.jp": 1,
  "mino.gifu.jp": 1,
  "minokamo.gifu.jp": 1,
  "mitake.gifu.jp": 1,
  "mizunami.gifu.jp": 1,
  "motosu.gifu.jp": 1,
  "nakatsugawa.gifu.jp": 1,
  "ogaki.gifu.jp": 1,
  "sakahogi.gifu.jp": 1,
  "seki.gifu.jp": 1,
  "sekigahara.gifu.jp": 1,
  "shirakawa.gifu.jp": 1,
  "tajimi.gifu.jp": 1,
  "takayama.gifu.jp": 1,
  "tarui.gifu.jp": 1,
  "toki.gifu.jp": 1,
  "tomika.gifu.jp": 1,
  "wanouchi.gifu.jp": 1,
  "yamagata.gifu.jp": 1,
  "yaotsu.gifu.jp": 1,
  "yoro.gifu.jp": 1,
  "annaka.gunma.jp": 1,
  "chiyoda.gunma.jp": 1,
  "fujioka.gunma.jp": 1,
  "higashiagatsuma.gunma.jp": 1,
  "isesaki.gunma.jp": 1,
  "itakura.gunma.jp": 1,
  "kanna.gunma.jp": 1,
  "kanra.gunma.jp": 1,
  "katashina.gunma.jp": 1,
  "kawaba.gunma.jp": 1,
  "kiryu.gunma.jp": 1,
  "kusatsu.gunma.jp": 1,
  "maebashi.gunma.jp": 1,
  "meiwa.gunma.jp": 1,
  "midori.gunma.jp": 1,
  "minakami.gunma.jp": 1,
  "naganohara.gunma.jp": 1,
  "nakanojo.gunma.jp": 1,
  "nanmoku.gunma.jp": 1,
  "numata.gunma.jp": 1,
  "oizumi.gunma.jp": 1,
  "ora.gunma.jp": 1,
  "ota.gunma.jp": 1,
  "shibukawa.gunma.jp": 1,
  "shimonita.gunma.jp": 1,
  "shinto.gunma.jp": 1,
  "showa.gunma.jp": 1,
  "takasaki.gunma.jp": 1,
  "takayama.gunma.jp": 1,
  "tamamura.gunma.jp": 1,
  "tatebayashi.gunma.jp": 1,
  "tomioka.gunma.jp": 1,
  "tsukiyono.gunma.jp": 1,
  "tsumagoi.gunma.jp": 1,
  "ueno.gunma.jp": 1,
  "yoshioka.gunma.jp": 1,
  "asaminami.hiroshima.jp": 1,
  "daiwa.hiroshima.jp": 1,
  "etajima.hiroshima.jp": 1,
  "fuchu.hiroshima.jp": 1,
  "fukuyama.hiroshima.jp": 1,
  "hatsukaichi.hiroshima.jp": 1,
  "higashihiroshima.hiroshima.jp": 1,
  "hongo.hiroshima.jp": 1,
  "jinsekikogen.hiroshima.jp": 1,
  "kaita.hiroshima.jp": 1,
  "kui.hiroshima.jp": 1,
  "kumano.hiroshima.jp": 1,
  "kure.hiroshima.jp": 1,
  "mihara.hiroshima.jp": 1,
  "miyoshi.hiroshima.jp": 1,
  "naka.hiroshima.jp": 1,
  "onomichi.hiroshima.jp": 1,
  "osakikamijima.hiroshima.jp": 1,
  "otake.hiroshima.jp": 1,
  "saka.hiroshima.jp": 1,
  "sera.hiroshima.jp": 1,
  "seranishi.hiroshima.jp": 1,
  "shinichi.hiroshima.jp": 1,
  "shobara.hiroshima.jp": 1,
  "takehara.hiroshima.jp": 1,
  "abashiri.hokkaido.jp": 1,
  "abira.hokkaido.jp": 1,
  "aibetsu.hokkaido.jp": 1,
  "akabira.hokkaido.jp": 1,
  "akkeshi.hokkaido.jp": 1,
  "asahikawa.hokkaido.jp": 1,
  "ashibetsu.hokkaido.jp": 1,
  "ashoro.hokkaido.jp": 1,
  "assabu.hokkaido.jp": 1,
  "atsuma.hokkaido.jp": 1,
  "bibai.hokkaido.jp": 1,
  "biei.hokkaido.jp": 1,
  "bifuka.hokkaido.jp": 1,
  "bihoro.hokkaido.jp": 1,
  "biratori.hokkaido.jp": 1,
  "chippubetsu.hokkaido.jp": 1,
  "chitose.hokkaido.jp": 1,
  "date.hokkaido.jp": 1,
  "ebetsu.hokkaido.jp": 1,
  "embetsu.hokkaido.jp": 1,
  "eniwa.hokkaido.jp": 1,
  "erimo.hokkaido.jp": 1,
  "esan.hokkaido.jp": 1,
  "esashi.hokkaido.jp": 1,
  "fukagawa.hokkaido.jp": 1,
  "fukushima.hokkaido.jp": 1,
  "furano.hokkaido.jp": 1,
  "furubira.hokkaido.jp": 1,
  "haboro.hokkaido.jp": 1,
  "hakodate.hokkaido.jp": 1,
  "hamatonbetsu.hokkaido.jp": 1,
  "hidaka.hokkaido.jp": 1,
  "higashikagura.hokkaido.jp": 1,
  "higashikawa.hokkaido.jp": 1,
  "hiroo.hokkaido.jp": 1,
  "hokuryu.hokkaido.jp": 1,
  "hokuto.hokkaido.jp": 1,
  "honbetsu.hokkaido.jp": 1,
  "horokanai.hokkaido.jp": 1,
  "horonobe.hokkaido.jp": 1,
  "ikeda.hokkaido.jp": 1,
  "imakane.hokkaido.jp": 1,
  "ishikari.hokkaido.jp": 1,
  "iwamizawa.hokkaido.jp": 1,
  "iwanai.hokkaido.jp": 1,
  "kamifurano.hokkaido.jp": 1,
  "kamikawa.hokkaido.jp": 1,
  "kamishihoro.hokkaido.jp": 1,
  "kamisunagawa.hokkaido.jp": 1,
  "kamoenai.hokkaido.jp": 1,
  "kayabe.hokkaido.jp": 1,
  "kembuchi.hokkaido.jp": 1,
  "kikonai.hokkaido.jp": 1,
  "kimobetsu.hokkaido.jp": 1,
  "kitahiroshima.hokkaido.jp": 1,
  "kitami.hokkaido.jp": 1,
  "kiyosato.hokkaido.jp": 1,
  "koshimizu.hokkaido.jp": 1,
  "kunneppu.hokkaido.jp": 1,
  "kuriyama.hokkaido.jp": 1,
  "kuromatsunai.hokkaido.jp": 1,
  "kushiro.hokkaido.jp": 1,
  "kutchan.hokkaido.jp": 1,
  "kyowa.hokkaido.jp": 1,
  "mashike.hokkaido.jp": 1,
  "matsumae.hokkaido.jp": 1,
  "mikasa.hokkaido.jp": 1,
  "minamifurano.hokkaido.jp": 1,
  "mombetsu.hokkaido.jp": 1,
  "moseushi.hokkaido.jp": 1,
  "mukawa.hokkaido.jp": 1,
  "muroran.hokkaido.jp": 1,
  "naie.hokkaido.jp": 1,
  "nakagawa.hokkaido.jp": 1,
  "nakasatsunai.hokkaido.jp": 1,
  "nakatombetsu.hokkaido.jp": 1,
  "nanae.hokkaido.jp": 1,
  "nanporo.hokkaido.jp": 1,
  "nayoro.hokkaido.jp": 1,
  "nemuro.hokkaido.jp": 1,
  "niikappu.hokkaido.jp": 1,
  "niki.hokkaido.jp": 1,
  "nishiokoppe.hokkaido.jp": 1,
  "noboribetsu.hokkaido.jp": 1,
  "numata.hokkaido.jp": 1,
  "obihiro.hokkaido.jp": 1,
  "obira.hokkaido.jp": 1,
  "oketo.hokkaido.jp": 1,
  "okoppe.hokkaido.jp": 1,
  "otaru.hokkaido.jp": 1,
  "otobe.hokkaido.jp": 1,
  "otofuke.hokkaido.jp": 1,
  "otoineppu.hokkaido.jp": 1,
  "oumu.hokkaido.jp": 1,
  "ozora.hokkaido.jp": 1,
  "pippu.hokkaido.jp": 1,
  "rankoshi.hokkaido.jp": 1,
  "rebun.hokkaido.jp": 1,
  "rikubetsu.hokkaido.jp": 1,
  "rishiri.hokkaido.jp": 1,
  "rishirifuji.hokkaido.jp": 1,
  "saroma.hokkaido.jp": 1,
  "sarufutsu.hokkaido.jp": 1,
  "shakotan.hokkaido.jp": 1,
  "shari.hokkaido.jp": 1,
  "shibecha.hokkaido.jp": 1,
  "shibetsu.hokkaido.jp": 1,
  "shikabe.hokkaido.jp": 1,
  "shikaoi.hokkaido.jp": 1,
  "shimamaki.hokkaido.jp": 1,
  "shimizu.hokkaido.jp": 1,
  "shimokawa.hokkaido.jp": 1,
  "shinshinotsu.hokkaido.jp": 1,
  "shintoku.hokkaido.jp": 1,
  "shiranuka.hokkaido.jp": 1,
  "shiraoi.hokkaido.jp": 1,
  "shiriuchi.hokkaido.jp": 1,
  "sobetsu.hokkaido.jp": 1,
  "sunagawa.hokkaido.jp": 1,
  "taiki.hokkaido.jp": 1,
  "takasu.hokkaido.jp": 1,
  "takikawa.hokkaido.jp": 1,
  "takinoue.hokkaido.jp": 1,
  "teshikaga.hokkaido.jp": 1,
  "tobetsu.hokkaido.jp": 1,
  "tohma.hokkaido.jp": 1,
  "tomakomai.hokkaido.jp": 1,
  "tomari.hokkaido.jp": 1,
  "toya.hokkaido.jp": 1,
  "toyako.hokkaido.jp": 1,
  "toyotomi.hokkaido.jp": 1,
  "toyoura.hokkaido.jp": 1,
  "tsubetsu.hokkaido.jp": 1,
  "tsukigata.hokkaido.jp": 1,
  "urakawa.hokkaido.jp": 1,
  "urausu.hokkaido.jp": 1,
  "uryu.hokkaido.jp": 1,
  "utashinai.hokkaido.jp": 1,
  "wakkanai.hokkaido.jp": 1,
  "wassamu.hokkaido.jp": 1,
  "yakumo.hokkaido.jp": 1,
  "yoichi.hokkaido.jp": 1,
  "aioi.hyogo.jp": 1,
  "akashi.hyogo.jp": 1,
  "ako.hyogo.jp": 1,
  "amagasaki.hyogo.jp": 1,
  "aogaki.hyogo.jp": 1,
  "asago.hyogo.jp": 1,
  "ashiya.hyogo.jp": 1,
  "awaji.hyogo.jp": 1,
  "fukusaki.hyogo.jp": 1,
  "goshiki.hyogo.jp": 1,
  "harima.hyogo.jp": 1,
  "himeji.hyogo.jp": 1,
  "ichikawa.hyogo.jp": 1,
  "inagawa.hyogo.jp": 1,
  "itami.hyogo.jp": 1,
  "kakogawa.hyogo.jp": 1,
  "kamigori.hyogo.jp": 1,
  "kamikawa.hyogo.jp": 1,
  "kasai.hyogo.jp": 1,
  "kasuga.hyogo.jp": 1,
  "kawanishi.hyogo.jp": 1,
  "miki.hyogo.jp": 1,
  "minamiawaji.hyogo.jp": 1,
  "nishinomiya.hyogo.jp": 1,
  "nishiwaki.hyogo.jp": 1,
  "ono.hyogo.jp": 1,
  "sanda.hyogo.jp": 1,
  "sannan.hyogo.jp": 1,
  "sasayama.hyogo.jp": 1,
  "sayo.hyogo.jp": 1,
  "shingu.hyogo.jp": 1,
  "shinonsen.hyogo.jp": 1,
  "shiso.hyogo.jp": 1,
  "sumoto.hyogo.jp": 1,
  "taishi.hyogo.jp": 1,
  "taka.hyogo.jp": 1,
  "takarazuka.hyogo.jp": 1,
  "takasago.hyogo.jp": 1,
  "takino.hyogo.jp": 1,
  "tamba.hyogo.jp": 1,
  "tatsuno.hyogo.jp": 1,
  "toyooka.hyogo.jp": 1,
  "yabu.hyogo.jp": 1,
  "yashiro.hyogo.jp": 1,
  "yoka.hyogo.jp": 1,
  "yokawa.hyogo.jp": 1,
  "ami.ibaraki.jp": 1,
  "asahi.ibaraki.jp": 1,
  "bando.ibaraki.jp": 1,
  "chikusei.ibaraki.jp": 1,
  "daigo.ibaraki.jp": 1,
  "fujishiro.ibaraki.jp": 1,
  "hitachi.ibaraki.jp": 1,
  "hitachinaka.ibaraki.jp": 1,
  "hitachiomiya.ibaraki.jp": 1,
  "hitachiota.ibaraki.jp": 1,
  "ibaraki.ibaraki.jp": 1,
  "ina.ibaraki.jp": 1,
  "inashiki.ibaraki.jp": 1,
  "itako.ibaraki.jp": 1,
  "iwama.ibaraki.jp": 1,
  "joso.ibaraki.jp": 1,
  "kamisu.ibaraki.jp": 1,
  "kasama.ibaraki.jp": 1,
  "kashima.ibaraki.jp": 1,
  "kasumigaura.ibaraki.jp": 1,
  "koga.ibaraki.jp": 1,
  "miho.ibaraki.jp": 1,
  "mito.ibaraki.jp": 1,
  "moriya.ibaraki.jp": 1,
  "naka.ibaraki.jp": 1,
  "namegata.ibaraki.jp": 1,
  "oarai.ibaraki.jp": 1,
  "ogawa.ibaraki.jp": 1,
  "omitama.ibaraki.jp": 1,
  "ryugasaki.ibaraki.jp": 1,
  "sakai.ibaraki.jp": 1,
  "sakuragawa.ibaraki.jp": 1,
  "shimodate.ibaraki.jp": 1,
  "shimotsuma.ibaraki.jp": 1,
  "shirosato.ibaraki.jp": 1,
  "sowa.ibaraki.jp": 1,
  "suifu.ibaraki.jp": 1,
  "takahagi.ibaraki.jp": 1,
  "tamatsukuri.ibaraki.jp": 1,
  "tokai.ibaraki.jp": 1,
  "tomobe.ibaraki.jp": 1,
  "tone.ibaraki.jp": 1,
  "toride.ibaraki.jp": 1,
  "tsuchiura.ibaraki.jp": 1,
  "tsukuba.ibaraki.jp": 1,
  "uchihara.ibaraki.jp": 1,
  "ushiku.ibaraki.jp": 1,
  "yachiyo.ibaraki.jp": 1,
  "yamagata.ibaraki.jp": 1,
  "yawara.ibaraki.jp": 1,
  "yuki.ibaraki.jp": 1,
  "anamizu.ishikawa.jp": 1,
  "hakui.ishikawa.jp": 1,
  "hakusan.ishikawa.jp": 1,
  "kaga.ishikawa.jp": 1,
  "kahoku.ishikawa.jp": 1,
  "kanazawa.ishikawa.jp": 1,
  "kawakita.ishikawa.jp": 1,
  "komatsu.ishikawa.jp": 1,
  "nakanoto.ishikawa.jp": 1,
  "nanao.ishikawa.jp": 1,
  "nomi.ishikawa.jp": 1,
  "nonoichi.ishikawa.jp": 1,
  "noto.ishikawa.jp": 1,
  "shika.ishikawa.jp": 1,
  "suzu.ishikawa.jp": 1,
  "tsubata.ishikawa.jp": 1,
  "tsurugi.ishikawa.jp": 1,
  "uchinada.ishikawa.jp": 1,
  "wajima.ishikawa.jp": 1,
  "fudai.iwate.jp": 1,
  "fujisawa.iwate.jp": 1,
  "hanamaki.iwate.jp": 1,
  "hiraizumi.iwate.jp": 1,
  "hirono.iwate.jp": 1,
  "ichinohe.iwate.jp": 1,
  "ichinoseki.iwate.jp": 1,
  "iwaizumi.iwate.jp": 1,
  "iwate.iwate.jp": 1,
  "joboji.iwate.jp": 1,
  "kamaishi.iwate.jp": 1,
  "kanegasaki.iwate.jp": 1,
  "karumai.iwate.jp": 1,
  "kawai.iwate.jp": 1,
  "kitakami.iwate.jp": 1,
  "kuji.iwate.jp": 1,
  "kunohe.iwate.jp": 1,
  "kuzumaki.iwate.jp": 1,
  "miyako.iwate.jp": 1,
  "mizusawa.iwate.jp": 1,
  "morioka.iwate.jp": 1,
  "ninohe.iwate.jp": 1,
  "noda.iwate.jp": 1,
  "ofunato.iwate.jp": 1,
  "oshu.iwate.jp": 1,
  "otsuchi.iwate.jp": 1,
  "rikuzentakata.iwate.jp": 1,
  "shiwa.iwate.jp": 1,
  "shizukuishi.iwate.jp": 1,
  "sumita.iwate.jp": 1,
  "tanohata.iwate.jp": 1,
  "tono.iwate.jp": 1,
  "yahaba.iwate.jp": 1,
  "yamada.iwate.jp": 1,
  "ayagawa.kagawa.jp": 1,
  "higashikagawa.kagawa.jp": 1,
  "kanonji.kagawa.jp": 1,
  "kotohira.kagawa.jp": 1,
  "manno.kagawa.jp": 1,
  "marugame.kagawa.jp": 1,
  "mitoyo.kagawa.jp": 1,
  "naoshima.kagawa.jp": 1,
  "sanuki.kagawa.jp": 1,
  "tadotsu.kagawa.jp": 1,
  "takamatsu.kagawa.jp": 1,
  "tonosho.kagawa.jp": 1,
  "uchinomi.kagawa.jp": 1,
  "utazu.kagawa.jp": 1,
  "zentsuji.kagawa.jp": 1,
  "akune.kagoshima.jp": 1,
  "amami.kagoshima.jp": 1,
  "hioki.kagoshima.jp": 1,
  "isa.kagoshima.jp": 1,
  "isen.kagoshima.jp": 1,
  "izumi.kagoshima.jp": 1,
  "kagoshima.kagoshima.jp": 1,
  "kanoya.kagoshima.jp": 1,
  "kawanabe.kagoshima.jp": 1,
  "kinko.kagoshima.jp": 1,
  "kouyama.kagoshima.jp": 1,
  "makurazaki.kagoshima.jp": 1,
  "matsumoto.kagoshima.jp": 1,
  "minamitane.kagoshima.jp": 1,
  "nakatane.kagoshima.jp": 1,
  "nishinoomote.kagoshima.jp": 1,
  "satsumasendai.kagoshima.jp": 1,
  "soo.kagoshima.jp": 1,
  "tarumizu.kagoshima.jp": 1,
  "yusui.kagoshima.jp": 1,
  "aikawa.kanagawa.jp": 1,
  "atsugi.kanagawa.jp": 1,
  "ayase.kanagawa.jp": 1,
  "chigasaki.kanagawa.jp": 1,
  "ebina.kanagawa.jp": 1,
  "fujisawa.kanagawa.jp": 1,
  "hadano.kanagawa.jp": 1,
  "hakone.kanagawa.jp": 1,
  "hiratsuka.kanagawa.jp": 1,
  "isehara.kanagawa.jp": 1,
  "kaisei.kanagawa.jp": 1,
  "kamakura.kanagawa.jp": 1,
  "kiyokawa.kanagawa.jp": 1,
  "matsuda.kanagawa.jp": 1,
  "minamiashigara.kanagawa.jp": 1,
  "miura.kanagawa.jp": 1,
  "nakai.kanagawa.jp": 1,
  "ninomiya.kanagawa.jp": 1,
  "odawara.kanagawa.jp": 1,
  "oi.kanagawa.jp": 1,
  "oiso.kanagawa.jp": 1,
  "sagamihara.kanagawa.jp": 1,
  "samukawa.kanagawa.jp": 1,
  "tsukui.kanagawa.jp": 1,
  "yamakita.kanagawa.jp": 1,
  "yamato.kanagawa.jp": 1,
  "yokosuka.kanagawa.jp": 1,
  "yugawara.kanagawa.jp": 1,
  "zama.kanagawa.jp": 1,
  "zushi.kanagawa.jp": 1,
  "aki.kochi.jp": 1,
  "geisei.kochi.jp": 1,
  "hidaka.kochi.jp": 1,
  "higashitsuno.kochi.jp": 1,
  "ino.kochi.jp": 1,
  "kagami.kochi.jp": 1,
  "kami.kochi.jp": 1,
  "kitagawa.kochi.jp": 1,
  "kochi.kochi.jp": 1,
  "mihara.kochi.jp": 1,
  "motoyama.kochi.jp": 1,
  "muroto.kochi.jp": 1,
  "nahari.kochi.jp": 1,
  "nakamura.kochi.jp": 1,
  "nankoku.kochi.jp": 1,
  "nishitosa.kochi.jp": 1,
  "niyodogawa.kochi.jp": 1,
  "ochi.kochi.jp": 1,
  "okawa.kochi.jp": 1,
  "otoyo.kochi.jp": 1,
  "otsuki.kochi.jp": 1,
  "sakawa.kochi.jp": 1,
  "sukumo.kochi.jp": 1,
  "susaki.kochi.jp": 1,
  "tosa.kochi.jp": 1,
  "tosashimizu.kochi.jp": 1,
  "toyo.kochi.jp": 1,
  "tsuno.kochi.jp": 1,
  "umaji.kochi.jp": 1,
  "yasuda.kochi.jp": 1,
  "yusuhara.kochi.jp": 1,
  "amakusa.kumamoto.jp": 1,
  "arao.kumamoto.jp": 1,
  "aso.kumamoto.jp": 1,
  "choyo.kumamoto.jp": 1,
  "gyokuto.kumamoto.jp": 1,
  "kamiamakusa.kumamoto.jp": 1,
  "kikuchi.kumamoto.jp": 1,
  "kumamoto.kumamoto.jp": 1,
  "mashiki.kumamoto.jp": 1,
  "mifune.kumamoto.jp": 1,
  "minamata.kumamoto.jp": 1,
  "minamioguni.kumamoto.jp": 1,
  "nagasu.kumamoto.jp": 1,
  "nishihara.kumamoto.jp": 1,
  "oguni.kumamoto.jp": 1,
  "ozu.kumamoto.jp": 1,
  "sumoto.kumamoto.jp": 1,
  "takamori.kumamoto.jp": 1,
  "uki.kumamoto.jp": 1,
  "uto.kumamoto.jp": 1,
  "yamaga.kumamoto.jp": 1,
  "yamato.kumamoto.jp": 1,
  "yatsushiro.kumamoto.jp": 1,
  "ayabe.kyoto.jp": 1,
  "fukuchiyama.kyoto.jp": 1,
  "higashiyama.kyoto.jp": 1,
  "ide.kyoto.jp": 1,
  "ine.kyoto.jp": 1,
  "joyo.kyoto.jp": 1,
  "kameoka.kyoto.jp": 1,
  "kamo.kyoto.jp": 1,
  "kita.kyoto.jp": 1,
  "kizu.kyoto.jp": 1,
  "kumiyama.kyoto.jp": 1,
  "kyotamba.kyoto.jp": 1,
  "kyotanabe.kyoto.jp": 1,
  "kyotango.kyoto.jp": 1,
  "maizuru.kyoto.jp": 1,
  "minami.kyoto.jp": 1,
  "minamiyamashiro.kyoto.jp": 1,
  "miyazu.kyoto.jp": 1,
  "muko.kyoto.jp": 1,
  "nagaokakyo.kyoto.jp": 1,
  "nakagyo.kyoto.jp": 1,
  "nantan.kyoto.jp": 1,
  "oyamazaki.kyoto.jp": 1,
  "sakyo.kyoto.jp": 1,
  "seika.kyoto.jp": 1,
  "tanabe.kyoto.jp": 1,
  "uji.kyoto.jp": 1,
  "ujitawara.kyoto.jp": 1,
  "wazuka.kyoto.jp": 1,
  "yamashina.kyoto.jp": 1,
  "yawata.kyoto.jp": 1,
  "asahi.mie.jp": 1,
  "inabe.mie.jp": 1,
  "ise.mie.jp": 1,
  "kameyama.mie.jp": 1,
  "kawagoe.mie.jp": 1,
  "kiho.mie.jp": 1,
  "kisosaki.mie.jp": 1,
  "kiwa.mie.jp": 1,
  "komono.mie.jp": 1,
  "kumano.mie.jp": 1,
  "kuwana.mie.jp": 1,
  "matsusaka.mie.jp": 1,
  "meiwa.mie.jp": 1,
  "mihama.mie.jp": 1,
  "minamiise.mie.jp": 1,
  "misugi.mie.jp": 1,
  "miyama.mie.jp": 1,
  "nabari.mie.jp": 1,
  "shima.mie.jp": 1,
  "suzuka.mie.jp": 1,
  "tado.mie.jp": 1,
  "taiki.mie.jp": 1,
  "taki.mie.jp": 1,
  "tamaki.mie.jp": 1,
  "toba.mie.jp": 1,
  "tsu.mie.jp": 1,
  "udono.mie.jp": 1,
  "ureshino.mie.jp": 1,
  "watarai.mie.jp": 1,
  "yokkaichi.mie.jp": 1,
  "furukawa.miyagi.jp": 1,
  "higashimatsushima.miyagi.jp": 1,
  "ishinomaki.miyagi.jp": 1,
  "iwanuma.miyagi.jp": 1,
  "kakuda.miyagi.jp": 1,
  "kami.miyagi.jp": 1,
  "kawasaki.miyagi.jp": 1,
  "marumori.miyagi.jp": 1,
  "matsushima.miyagi.jp": 1,
  "minamisanriku.miyagi.jp": 1,
  "misato.miyagi.jp": 1,
  "murata.miyagi.jp": 1,
  "natori.miyagi.jp": 1,
  "ogawara.miyagi.jp": 1,
  "ohira.miyagi.jp": 1,
  "onagawa.miyagi.jp": 1,
  "osaki.miyagi.jp": 1,
  "rifu.miyagi.jp": 1,
  "semine.miyagi.jp": 1,
  "shibata.miyagi.jp": 1,
  "shichikashuku.miyagi.jp": 1,
  "shikama.miyagi.jp": 1,
  "shiogama.miyagi.jp": 1,
  "shiroishi.miyagi.jp": 1,
  "tagajo.miyagi.jp": 1,
  "taiwa.miyagi.jp": 1,
  "tome.miyagi.jp": 1,
  "tomiya.miyagi.jp": 1,
  "wakuya.miyagi.jp": 1,
  "watari.miyagi.jp": 1,
  "yamamoto.miyagi.jp": 1,
  "zao.miyagi.jp": 1,
  "aya.miyazaki.jp": 1,
  "ebino.miyazaki.jp": 1,
  "gokase.miyazaki.jp": 1,
  "hyuga.miyazaki.jp": 1,
  "kadogawa.miyazaki.jp": 1,
  "kawaminami.miyazaki.jp": 1,
  "kijo.miyazaki.jp": 1,
  "kitagawa.miyazaki.jp": 1,
  "kitakata.miyazaki.jp": 1,
  "kitaura.miyazaki.jp": 1,
  "kobayashi.miyazaki.jp": 1,
  "kunitomi.miyazaki.jp": 1,
  "kushima.miyazaki.jp": 1,
  "mimata.miyazaki.jp": 1,
  "miyakonojo.miyazaki.jp": 1,
  "miyazaki.miyazaki.jp": 1,
  "morotsuka.miyazaki.jp": 1,
  "nichinan.miyazaki.jp": 1,
  "nishimera.miyazaki.jp": 1,
  "nobeoka.miyazaki.jp": 1,
  "saito.miyazaki.jp": 1,
  "shiiba.miyazaki.jp": 1,
  "shintomi.miyazaki.jp": 1,
  "takaharu.miyazaki.jp": 1,
  "takanabe.miyazaki.jp": 1,
  "takazaki.miyazaki.jp": 1,
  "tsuno.miyazaki.jp": 1,
  "achi.nagano.jp": 1,
  "agematsu.nagano.jp": 1,
  "anan.nagano.jp": 1,
  "aoki.nagano.jp": 1,
  "asahi.nagano.jp": 1,
  "azumino.nagano.jp": 1,
  "chikuhoku.nagano.jp": 1,
  "chikuma.nagano.jp": 1,
  "chino.nagano.jp": 1,
  "fujimi.nagano.jp": 1,
  "hakuba.nagano.jp": 1,
  "hara.nagano.jp": 1,
  "hiraya.nagano.jp": 1,
  "iida.nagano.jp": 1,
  "iijima.nagano.jp": 1,
  "iiyama.nagano.jp": 1,
  "iizuna.nagano.jp": 1,
  "ikeda.nagano.jp": 1,
  "ikusaka.nagano.jp": 1,
  "ina.nagano.jp": 1,
  "karuizawa.nagano.jp": 1,
  "kawakami.nagano.jp": 1,
  "kiso.nagano.jp": 1,
  "kisofukushima.nagano.jp": 1,
  "kitaaiki.nagano.jp": 1,
  "komagane.nagano.jp": 1,
  "komoro.nagano.jp": 1,
  "matsukawa.nagano.jp": 1,
  "matsumoto.nagano.jp": 1,
  "miasa.nagano.jp": 1,
  "minamiaiki.nagano.jp": 1,
  "minamimaki.nagano.jp": 1,
  "minamiminowa.nagano.jp": 1,
  "minowa.nagano.jp": 1,
  "miyada.nagano.jp": 1,
  "miyota.nagano.jp": 1,
  "mochizuki.nagano.jp": 1,
  "nagano.nagano.jp": 1,
  "nagawa.nagano.jp": 1,
  "nagiso.nagano.jp": 1,
  "nakagawa.nagano.jp": 1,
  "nakano.nagano.jp": 1,
  "nozawaonsen.nagano.jp": 1,
  "obuse.nagano.jp": 1,
  "ogawa.nagano.jp": 1,
  "okaya.nagano.jp": 1,
  "omachi.nagano.jp": 1,
  "omi.nagano.jp": 1,
  "ookuwa.nagano.jp": 1,
  "ooshika.nagano.jp": 1,
  "otaki.nagano.jp": 1,
  "otari.nagano.jp": 1,
  "sakae.nagano.jp": 1,
  "sakaki.nagano.jp": 1,
  "saku.nagano.jp": 1,
  "sakuho.nagano.jp": 1,
  "shimosuwa.nagano.jp": 1,
  "shinanomachi.nagano.jp": 1,
  "shiojiri.nagano.jp": 1,
  "suwa.nagano.jp": 1,
  "suzaka.nagano.jp": 1,
  "takagi.nagano.jp": 1,
  "takamori.nagano.jp": 1,
  "takayama.nagano.jp": 1,
  "tateshina.nagano.jp": 1,
  "tatsuno.nagano.jp": 1,
  "togakushi.nagano.jp": 1,
  "togura.nagano.jp": 1,
  "tomi.nagano.jp": 1,
  "ueda.nagano.jp": 1,
  "wada.nagano.jp": 1,
  "yamagata.nagano.jp": 1,
  "yamanouchi.nagano.jp": 1,
  "yasaka.nagano.jp": 1,
  "yasuoka.nagano.jp": 1,
  "chijiwa.nagasaki.jp": 1,
  "futsu.nagasaki.jp": 1,
  "goto.nagasaki.jp": 1,
  "hasami.nagasaki.jp": 1,
  "hirado.nagasaki.jp": 1,
  "iki.nagasaki.jp": 1,
  "isahaya.nagasaki.jp": 1,
  "kawatana.nagasaki.jp": 1,
  "kuchinotsu.nagasaki.jp": 1,
  "matsuura.nagasaki.jp": 1,
  "nagasaki.nagasaki.jp": 1,
  "obama.nagasaki.jp": 1,
  "omura.nagasaki.jp": 1,
  "oseto.nagasaki.jp": 1,
  "saikai.nagasaki.jp": 1,
  "sasebo.nagasaki.jp": 1,
  "seihi.nagasaki.jp": 1,
  "shimabara.nagasaki.jp": 1,
  "shinkamigoto.nagasaki.jp": 1,
  "togitsu.nagasaki.jp": 1,
  "tsushima.nagasaki.jp": 1,
  "unzen.nagasaki.jp": 1,
  "ando.nara.jp": 1,
  "gose.nara.jp": 1,
  "heguri.nara.jp": 1,
  "higashiyoshino.nara.jp": 1,
  "ikaruga.nara.jp": 1,
  "ikoma.nara.jp": 1,
  "kamikitayama.nara.jp": 1,
  "kanmaki.nara.jp": 1,
  "kashiba.nara.jp": 1,
  "kashihara.nara.jp": 1,
  "katsuragi.nara.jp": 1,
  "kawai.nara.jp": 1,
  "kawakami.nara.jp": 1,
  "kawanishi.nara.jp": 1,
  "koryo.nara.jp": 1,
  "kurotaki.nara.jp": 1,
  "mitsue.nara.jp": 1,
  "miyake.nara.jp": 1,
  "nara.nara.jp": 1,
  "nosegawa.nara.jp": 1,
  "oji.nara.jp": 1,
  "ouda.nara.jp": 1,
  "oyodo.nara.jp": 1,
  "sakurai.nara.jp": 1,
  "sango.nara.jp": 1,
  "shimoichi.nara.jp": 1,
  "shimokitayama.nara.jp": 1,
  "shinjo.nara.jp": 1,
  "soni.nara.jp": 1,
  "takatori.nara.jp": 1,
  "tawaramoto.nara.jp": 1,
  "tenkawa.nara.jp": 1,
  "tenri.nara.jp": 1,
  "uda.nara.jp": 1,
  "yamatokoriyama.nara.jp": 1,
  "yamatotakada.nara.jp": 1,
  "yamazoe.nara.jp": 1,
  "yoshino.nara.jp": 1,
  "aga.niigata.jp": 1,
  "agano.niigata.jp": 1,
  "gosen.niigata.jp": 1,
  "itoigawa.niigata.jp": 1,
  "izumozaki.niigata.jp": 1,
  "joetsu.niigata.jp": 1,
  "kamo.niigata.jp": 1,
  "kariwa.niigata.jp": 1,
  "kashiwazaki.niigata.jp": 1,
  "minamiuonuma.niigata.jp": 1,
  "mitsuke.niigata.jp": 1,
  "muika.niigata.jp": 1,
  "murakami.niigata.jp": 1,
  "myoko.niigata.jp": 1,
  "nagaoka.niigata.jp": 1,
  "niigata.niigata.jp": 1,
  "ojiya.niigata.jp": 1,
  "omi.niigata.jp": 1,
  "sado.niigata.jp": 1,
  "sanjo.niigata.jp": 1,
  "seiro.niigata.jp": 1,
  "seirou.niigata.jp": 1,
  "sekikawa.niigata.jp": 1,
  "shibata.niigata.jp": 1,
  "tagami.niigata.jp": 1,
  "tainai.niigata.jp": 1,
  "tochio.niigata.jp": 1,
  "tokamachi.niigata.jp": 1,
  "tsubame.niigata.jp": 1,
  "tsunan.niigata.jp": 1,
  "uonuma.niigata.jp": 1,
  "yahiko.niigata.jp": 1,
  "yoita.niigata.jp": 1,
  "yuzawa.niigata.jp": 1,
  "beppu.oita.jp": 1,
  "bungoono.oita.jp": 1,
  "bungotakada.oita.jp": 1,
  "hasama.oita.jp": 1,
  "hiji.oita.jp": 1,
  "himeshima.oita.jp": 1,
  "hita.oita.jp": 1,
  "kamitsue.oita.jp": 1,
  "kokonoe.oita.jp": 1,
  "kuju.oita.jp": 1,
  "kunisaki.oita.jp": 1,
  "kusu.oita.jp": 1,
  "oita.oita.jp": 1,
  "saiki.oita.jp": 1,
  "taketa.oita.jp": 1,
  "tsukumi.oita.jp": 1,
  "usa.oita.jp": 1,
  "usuki.oita.jp": 1,
  "yufu.oita.jp": 1,
  "akaiwa.okayama.jp": 1,
  "asakuchi.okayama.jp": 1,
  "bizen.okayama.jp": 1,
  "hayashima.okayama.jp": 1,
  "ibara.okayama.jp": 1,
  "kagamino.okayama.jp": 1,
  "kasaoka.okayama.jp": 1,
  "kibichuo.okayama.jp": 1,
  "kumenan.okayama.jp": 1,
  "kurashiki.okayama.jp": 1,
  "maniwa.okayama.jp": 1,
  "misaki.okayama.jp": 1,
  "nagi.okayama.jp": 1,
  "niimi.okayama.jp": 1,
  "nishiawakura.okayama.jp": 1,
  "okayama.okayama.jp": 1,
  "satosho.okayama.jp": 1,
  "setouchi.okayama.jp": 1,
  "shinjo.okayama.jp": 1,
  "shoo.okayama.jp": 1,
  "soja.okayama.jp": 1,
  "takahashi.okayama.jp": 1,
  "tamano.okayama.jp": 1,
  "tsuyama.okayama.jp": 1,
  "wake.okayama.jp": 1,
  "yakage.okayama.jp": 1,
  "aguni.okinawa.jp": 1,
  "ginowan.okinawa.jp": 1,
  "ginoza.okinawa.jp": 1,
  "gushikami.okinawa.jp": 1,
  "haebaru.okinawa.jp": 1,
  "higashi.okinawa.jp": 1,
  "hirara.okinawa.jp": 1,
  "iheya.okinawa.jp": 1,
  "ishigaki.okinawa.jp": 1,
  "ishikawa.okinawa.jp": 1,
  "itoman.okinawa.jp": 1,
  "izena.okinawa.jp": 1,
  "kadena.okinawa.jp": 1,
  "kin.okinawa.jp": 1,
  "kitadaito.okinawa.jp": 1,
  "kitanakagusuku.okinawa.jp": 1,
  "kumejima.okinawa.jp": 1,
  "kunigami.okinawa.jp": 1,
  "minamidaito.okinawa.jp": 1,
  "motobu.okinawa.jp": 1,
  "nago.okinawa.jp": 1,
  "naha.okinawa.jp": 1,
  "nakagusuku.okinawa.jp": 1,
  "nakijin.okinawa.jp": 1,
  "nanjo.okinawa.jp": 1,
  "nishihara.okinawa.jp": 1,
  "ogimi.okinawa.jp": 1,
  "okinawa.okinawa.jp": 1,
  "onna.okinawa.jp": 1,
  "shimoji.okinawa.jp": 1,
  "taketomi.okinawa.jp": 1,
  "tarama.okinawa.jp": 1,
  "tokashiki.okinawa.jp": 1,
  "tomigusuku.okinawa.jp": 1,
  "tonaki.okinawa.jp": 1,
  "urasoe.okinawa.jp": 1,
  "uruma.okinawa.jp": 1,
  "yaese.okinawa.jp": 1,
  "yomitan.okinawa.jp": 1,
  "yonabaru.okinawa.jp": 1,
  "yonaguni.okinawa.jp": 1,
  "zamami.okinawa.jp": 1,
  "abeno.osaka.jp": 1,
  "chihayaakasaka.osaka.jp": 1,
  "chuo.osaka.jp": 1,
  "daito.osaka.jp": 1,
  "fujiidera.osaka.jp": 1,
  "habikino.osaka.jp": 1,
  "hannan.osaka.jp": 1,
  "higashiosaka.osaka.jp": 1,
  "higashisumiyoshi.osaka.jp": 1,
  "higashiyodogawa.osaka.jp": 1,
  "hirakata.osaka.jp": 1,
  "ibaraki.osaka.jp": 1,
  "ikeda.osaka.jp": 1,
  "izumi.osaka.jp": 1,
  "izumiotsu.osaka.jp": 1,
  "izumisano.osaka.jp": 1,
  "kadoma.osaka.jp": 1,
  "kaizuka.osaka.jp": 1,
  "kanan.osaka.jp": 1,
  "kashiwara.osaka.jp": 1,
  "katano.osaka.jp": 1,
  "kawachinagano.osaka.jp": 1,
  "kishiwada.osaka.jp": 1,
  "kita.osaka.jp": 1,
  "kumatori.osaka.jp": 1,
  "matsubara.osaka.jp": 1,
  "minato.osaka.jp": 1,
  "minoh.osaka.jp": 1,
  "misaki.osaka.jp": 1,
  "moriguchi.osaka.jp": 1,
  "neyagawa.osaka.jp": 1,
  "nishi.osaka.jp": 1,
  "nose.osaka.jp": 1,
  "osakasayama.osaka.jp": 1,
  "sakai.osaka.jp": 1,
  "sayama.osaka.jp": 1,
  "sennan.osaka.jp": 1,
  "settsu.osaka.jp": 1,
  "shijonawate.osaka.jp": 1,
  "shimamoto.osaka.jp": 1,
  "suita.osaka.jp": 1,
  "tadaoka.osaka.jp": 1,
  "taishi.osaka.jp": 1,
  "tajiri.osaka.jp": 1,
  "takaishi.osaka.jp": 1,
  "takatsuki.osaka.jp": 1,
  "tondabayashi.osaka.jp": 1,
  "toyonaka.osaka.jp": 1,
  "toyono.osaka.jp": 1,
  "yao.osaka.jp": 1,
  "ariake.saga.jp": 1,
  "arita.saga.jp": 1,
  "fukudomi.saga.jp": 1,
  "genkai.saga.jp": 1,
  "hamatama.saga.jp": 1,
  "hizen.saga.jp": 1,
  "imari.saga.jp": 1,
  "kamimine.saga.jp": 1,
  "kanzaki.saga.jp": 1,
  "karatsu.saga.jp": 1,
  "kashima.saga.jp": 1,
  "kitagata.saga.jp": 1,
  "kitahata.saga.jp": 1,
  "kiyama.saga.jp": 1,
  "kouhoku.saga.jp": 1,
  "kyuragi.saga.jp": 1,
  "nishiarita.saga.jp": 1,
  "ogi.saga.jp": 1,
  "omachi.saga.jp": 1,
  "ouchi.saga.jp": 1,
  "saga.saga.jp": 1,
  "shiroishi.saga.jp": 1,
  "taku.saga.jp": 1,
  "tara.saga.jp": 1,
  "tosu.saga.jp": 1,
  "yoshinogari.saga.jp": 1,
  "arakawa.saitama.jp": 1,
  "asaka.saitama.jp": 1,
  "chichibu.saitama.jp": 1,
  "fujimi.saitama.jp": 1,
  "fujimino.saitama.jp": 1,
  "fukaya.saitama.jp": 1,
  "hanno.saitama.jp": 1,
  "hanyu.saitama.jp": 1,
  "hasuda.saitama.jp": 1,
  "hatogaya.saitama.jp": 1,
  "hatoyama.saitama.jp": 1,
  "hidaka.saitama.jp": 1,
  "higashichichibu.saitama.jp": 1,
  "higashimatsuyama.saitama.jp": 1,
  "honjo.saitama.jp": 1,
  "ina.saitama.jp": 1,
  "iruma.saitama.jp": 1,
  "iwatsuki.saitama.jp": 1,
  "kamiizumi.saitama.jp": 1,
  "kamikawa.saitama.jp": 1,
  "kamisato.saitama.jp": 1,
  "kasukabe.saitama.jp": 1,
  "kawagoe.saitama.jp": 1,
  "kawaguchi.saitama.jp": 1,
  "kawajima.saitama.jp": 1,
  "kazo.saitama.jp": 1,
  "kitamoto.saitama.jp": 1,
  "koshigaya.saitama.jp": 1,
  "kounosu.saitama.jp": 1,
  "kuki.saitama.jp": 1,
  "kumagaya.saitama.jp": 1,
  "matsubushi.saitama.jp": 1,
  "minano.saitama.jp": 1,
  "misato.saitama.jp": 1,
  "miyashiro.saitama.jp": 1,
  "miyoshi.saitama.jp": 1,
  "moroyama.saitama.jp": 1,
  "nagatoro.saitama.jp": 1,
  "namegawa.saitama.jp": 1,
  "niiza.saitama.jp": 1,
  "ogano.saitama.jp": 1,
  "ogawa.saitama.jp": 1,
  "ogose.saitama.jp": 1,
  "okegawa.saitama.jp": 1,
  "omiya.saitama.jp": 1,
  "otaki.saitama.jp": 1,
  "ranzan.saitama.jp": 1,
  "ryokami.saitama.jp": 1,
  "saitama.saitama.jp": 1,
  "sakado.saitama.jp": 1,
  "satte.saitama.jp": 1,
  "sayama.saitama.jp": 1,
  "shiki.saitama.jp": 1,
  "shiraoka.saitama.jp": 1,
  "soka.saitama.jp": 1,
  "sugito.saitama.jp": 1,
  "toda.saitama.jp": 1,
  "tokigawa.saitama.jp": 1,
  "tokorozawa.saitama.jp": 1,
  "tsurugashima.saitama.jp": 1,
  "urawa.saitama.jp": 1,
  "warabi.saitama.jp": 1,
  "yashio.saitama.jp": 1,
  "yokoze.saitama.jp": 1,
  "yono.saitama.jp": 1,
  "yorii.saitama.jp": 1,
  "yoshida.saitama.jp": 1,
  "yoshikawa.saitama.jp": 1,
  "yoshimi.saitama.jp": 1,
  "aisho.shiga.jp": 1,
  "gamo.shiga.jp": 1,
  "higashiomi.shiga.jp": 1,
  "hikone.shiga.jp": 1,
  "koka.shiga.jp": 1,
  "konan.shiga.jp": 1,
  "kosei.shiga.jp": 1,
  "koto.shiga.jp": 1,
  "kusatsu.shiga.jp": 1,
  "maibara.shiga.jp": 1,
  "moriyama.shiga.jp": 1,
  "nagahama.shiga.jp": 1,
  "nishiazai.shiga.jp": 1,
  "notogawa.shiga.jp": 1,
  "omihachiman.shiga.jp": 1,
  "otsu.shiga.jp": 1,
  "ritto.shiga.jp": 1,
  "ryuoh.shiga.jp": 1,
  "takashima.shiga.jp": 1,
  "takatsuki.shiga.jp": 1,
  "torahime.shiga.jp": 1,
  "toyosato.shiga.jp": 1,
  "yasu.shiga.jp": 1,
  "akagi.shimane.jp": 1,
  "ama.shimane.jp": 1,
  "gotsu.shimane.jp": 1,
  "hamada.shimane.jp": 1,
  "higashiizumo.shimane.jp": 1,
  "hikawa.shimane.jp": 1,
  "hikimi.shimane.jp": 1,
  "izumo.shimane.jp": 1,
  "kakinoki.shimane.jp": 1,
  "masuda.shimane.jp": 1,
  "matsue.shimane.jp": 1,
  "misato.shimane.jp": 1,
  "nishinoshima.shimane.jp": 1,
  "ohda.shimane.jp": 1,
  "okinoshima.shimane.jp": 1,
  "okuizumo.shimane.jp": 1,
  "shimane.shimane.jp": 1,
  "tamayu.shimane.jp": 1,
  "tsuwano.shimane.jp": 1,
  "unnan.shimane.jp": 1,
  "yakumo.shimane.jp": 1,
  "yasugi.shimane.jp": 1,
  "yatsuka.shimane.jp": 1,
  "arai.shizuoka.jp": 1,
  "atami.shizuoka.jp": 1,
  "fuji.shizuoka.jp": 1,
  "fujieda.shizuoka.jp": 1,
  "fujikawa.shizuoka.jp": 1,
  "fujinomiya.shizuoka.jp": 1,
  "fukuroi.shizuoka.jp": 1,
  "gotemba.shizuoka.jp": 1,
  "haibara.shizuoka.jp": 1,
  "hamamatsu.shizuoka.jp": 1,
  "higashiizu.shizuoka.jp": 1,
  "ito.shizuoka.jp": 1,
  "iwata.shizuoka.jp": 1,
  "izu.shizuoka.jp": 1,
  "izunokuni.shizuoka.jp": 1,
  "kakegawa.shizuoka.jp": 1,
  "kannami.shizuoka.jp": 1,
  "kawanehon.shizuoka.jp": 1,
  "kawazu.shizuoka.jp": 1,
  "kikugawa.shizuoka.jp": 1,
  "kosai.shizuoka.jp": 1,
  "makinohara.shizuoka.jp": 1,
  "matsuzaki.shizuoka.jp": 1,
  "minamiizu.shizuoka.jp": 1,
  "mishima.shizuoka.jp": 1,
  "morimachi.shizuoka.jp": 1,
  "nishiizu.shizuoka.jp": 1,
  "numazu.shizuoka.jp": 1,
  "omaezaki.shizuoka.jp": 1,
  "shimada.shizuoka.jp": 1,
  "shimizu.shizuoka.jp": 1,
  "shimoda.shizuoka.jp": 1,
  "shizuoka.shizuoka.jp": 1,
  "susono.shizuoka.jp": 1,
  "yaizu.shizuoka.jp": 1,
  "yoshida.shizuoka.jp": 1,
  "ashikaga.tochigi.jp": 1,
  "bato.tochigi.jp": 1,
  "haga.tochigi.jp": 1,
  "ichikai.tochigi.jp": 1,
  "iwafune.tochigi.jp": 1,
  "kaminokawa.tochigi.jp": 1,
  "kanuma.tochigi.jp": 1,
  "karasuyama.tochigi.jp": 1,
  "kuroiso.tochigi.jp": 1,
  "mashiko.tochigi.jp": 1,
  "mibu.tochigi.jp": 1,
  "moka.tochigi.jp": 1,
  "motegi.tochigi.jp": 1,
  "nasu.tochigi.jp": 1,
  "nasushiobara.tochigi.jp": 1,
  "nikko.tochigi.jp": 1,
  "nishikata.tochigi.jp": 1,
  "nogi.tochigi.jp": 1,
  "ohira.tochigi.jp": 1,
  "ohtawara.tochigi.jp": 1,
  "oyama.tochigi.jp": 1,
  "sakura.tochigi.jp": 1,
  "sano.tochigi.jp": 1,
  "shimotsuke.tochigi.jp": 1,
  "shioya.tochigi.jp": 1,
  "takanezawa.tochigi.jp": 1,
  "tochigi.tochigi.jp": 1,
  "tsuga.tochigi.jp": 1,
  "ujiie.tochigi.jp": 1,
  "utsunomiya.tochigi.jp": 1,
  "yaita.tochigi.jp": 1,
  "aizumi.tokushima.jp": 1,
  "anan.tokushima.jp": 1,
  "ichiba.tokushima.jp": 1,
  "itano.tokushima.jp": 1,
  "kainan.tokushima.jp": 1,
  "komatsushima.tokushima.jp": 1,
  "matsushige.tokushima.jp": 1,
  "mima.tokushima.jp": 1,
  "minami.tokushima.jp": 1,
  "miyoshi.tokushima.jp": 1,
  "mugi.tokushima.jp": 1,
  "nakagawa.tokushima.jp": 1,
  "naruto.tokushima.jp": 1,
  "sanagochi.tokushima.jp": 1,
  "shishikui.tokushima.jp": 1,
  "tokushima.tokushima.jp": 1,
  "wajiki.tokushima.jp": 1,
  "adachi.tokyo.jp": 1,
  "akiruno.tokyo.jp": 1,
  "akishima.tokyo.jp": 1,
  "aogashima.tokyo.jp": 1,
  "arakawa.tokyo.jp": 1,
  "bunkyo.tokyo.jp": 1,
  "chiyoda.tokyo.jp": 1,
  "chofu.tokyo.jp": 1,
  "chuo.tokyo.jp": 1,
  "edogawa.tokyo.jp": 1,
  "fuchu.tokyo.jp": 1,
  "fussa.tokyo.jp": 1,
  "hachijo.tokyo.jp": 1,
  "hachioji.tokyo.jp": 1,
  "hamura.tokyo.jp": 1,
  "higashikurume.tokyo.jp": 1,
  "higashimurayama.tokyo.jp": 1,
  "higashiyamato.tokyo.jp": 1,
  "hino.tokyo.jp": 1,
  "hinode.tokyo.jp": 1,
  "hinohara.tokyo.jp": 1,
  "inagi.tokyo.jp": 1,
  "itabashi.tokyo.jp": 1,
  "katsushika.tokyo.jp": 1,
  "kita.tokyo.jp": 1,
  "kiyose.tokyo.jp": 1,
  "kodaira.tokyo.jp": 1,
  "koganei.tokyo.jp": 1,
  "kokubunji.tokyo.jp": 1,
  "komae.tokyo.jp": 1,
  "koto.tokyo.jp": 1,
  "kouzushima.tokyo.jp": 1,
  "kunitachi.tokyo.jp": 1,
  "machida.tokyo.jp": 1,
  "meguro.tokyo.jp": 1,
  "minato.tokyo.jp": 1,
  "mitaka.tokyo.jp": 1,
  "mizuho.tokyo.jp": 1,
  "musashimurayama.tokyo.jp": 1,
  "musashino.tokyo.jp": 1,
  "nakano.tokyo.jp": 1,
  "nerima.tokyo.jp": 1,
  "ogasawara.tokyo.jp": 1,
  "okutama.tokyo.jp": 1,
  "ome.tokyo.jp": 1,
  "oshima.tokyo.jp": 1,
  "ota.tokyo.jp": 1,
  "setagaya.tokyo.jp": 1,
  "shibuya.tokyo.jp": 1,
  "shinagawa.tokyo.jp": 1,
  "shinjuku.tokyo.jp": 1,
  "suginami.tokyo.jp": 1,
  "sumida.tokyo.jp": 1,
  "tachikawa.tokyo.jp": 1,
  "taito.tokyo.jp": 1,
  "tama.tokyo.jp": 1,
  "toshima.tokyo.jp": 1,
  "chizu.tottori.jp": 1,
  "hino.tottori.jp": 1,
  "kawahara.tottori.jp": 1,
  "koge.tottori.jp": 1,
  "kotoura.tottori.jp": 1,
  "misasa.tottori.jp": 1,
  "nanbu.tottori.jp": 1,
  "nichinan.tottori.jp": 1,
  "sakaiminato.tottori.jp": 1,
  "tottori.tottori.jp": 1,
  "wakasa.tottori.jp": 1,
  "yazu.tottori.jp": 1,
  "yonago.tottori.jp": 1,
  "asahi.toyama.jp": 1,
  "fuchu.toyama.jp": 1,
  "fukumitsu.toyama.jp": 1,
  "funahashi.toyama.jp": 1,
  "himi.toyama.jp": 1,
  "imizu.toyama.jp": 1,
  "inami.toyama.jp": 1,
  "johana.toyama.jp": 1,
  "kamiichi.toyama.jp": 1,
  "kurobe.toyama.jp": 1,
  "nakaniikawa.toyama.jp": 1,
  "namerikawa.toyama.jp": 1,
  "nanto.toyama.jp": 1,
  "nyuzen.toyama.jp": 1,
  "oyabe.toyama.jp": 1,
  "taira.toyama.jp": 1,
  "takaoka.toyama.jp": 1,
  "tateyama.toyama.jp": 1,
  "toga.toyama.jp": 1,
  "tonami.toyama.jp": 1,
  "toyama.toyama.jp": 1,
  "unazuki.toyama.jp": 1,
  "uozu.toyama.jp": 1,
  "yamada.toyama.jp": 1,
  "arida.wakayama.jp": 1,
  "aridagawa.wakayama.jp": 1,
  "gobo.wakayama.jp": 1,
  "hashimoto.wakayama.jp": 1,
  "hidaka.wakayama.jp": 1,
  "hirogawa.wakayama.jp": 1,
  "inami.wakayama.jp": 1,
  "iwade.wakayama.jp": 1,
  "kainan.wakayama.jp": 1,
  "kamitonda.wakayama.jp": 1,
  "katsuragi.wakayama.jp": 1,
  "kimino.wakayama.jp": 1,
  "kinokawa.wakayama.jp": 1,
  "kitayama.wakayama.jp": 1,
  "koya.wakayama.jp": 1,
  "koza.wakayama.jp": 1,
  "kozagawa.wakayama.jp": 1,
  "kudoyama.wakayama.jp": 1,
  "kushimoto.wakayama.jp": 1,
  "mihama.wakayama.jp": 1,
  "misato.wakayama.jp": 1,
  "nachikatsuura.wakayama.jp": 1,
  "shingu.wakayama.jp": 1,
  "shirahama.wakayama.jp": 1,
  "taiji.wakayama.jp": 1,
  "tanabe.wakayama.jp": 1,
  "wakayama.wakayama.jp": 1,
  "yuasa.wakayama.jp": 1,
  "yura.wakayama.jp": 1,
  "asahi.yamagata.jp": 1,
  "funagata.yamagata.jp": 1,
  "higashine.yamagata.jp": 1,
  "iide.yamagata.jp": 1,
  "kahoku.yamagata.jp": 1,
  "kaminoyama.yamagata.jp": 1,
  "kaneyama.yamagata.jp": 1,
  "kawanishi.yamagata.jp": 1,
  "mamurogawa.yamagata.jp": 1,
  "mikawa.yamagata.jp": 1,
  "murayama.yamagata.jp": 1,
  "nagai.yamagata.jp": 1,
  "nakayama.yamagata.jp": 1,
  "nanyo.yamagata.jp": 1,
  "nishikawa.yamagata.jp": 1,
  "obanazawa.yamagata.jp": 1,
  "oe.yamagata.jp": 1,
  "oguni.yamagata.jp": 1,
  "ohkura.yamagata.jp": 1,
  "oishida.yamagata.jp": 1,
  "sagae.yamagata.jp": 1,
  "sakata.yamagata.jp": 1,
  "sakegawa.yamagata.jp": 1,
  "shinjo.yamagata.jp": 1,
  "shirataka.yamagata.jp": 1,
  "shonai.yamagata.jp": 1,
  "takahata.yamagata.jp": 1,
  "tendo.yamagata.jp": 1,
  "tozawa.yamagata.jp": 1,
  "tsuruoka.yamagata.jp": 1,
  "yamagata.yamagata.jp": 1,
  "yamanobe.yamagata.jp": 1,
  "yonezawa.yamagata.jp": 1,
  "yuza.yamagata.jp": 1,
  "abu.yamaguchi.jp": 1,
  "hagi.yamaguchi.jp": 1,
  "hikari.yamaguchi.jp": 1,
  "hofu.yamaguchi.jp": 1,
  "iwakuni.yamaguchi.jp": 1,
  "kudamatsu.yamaguchi.jp": 1,
  "mitou.yamaguchi.jp": 1,
  "nagato.yamaguchi.jp": 1,
  "oshima.yamaguchi.jp": 1,
  "shimonoseki.yamaguchi.jp": 1,
  "shunan.yamaguchi.jp": 1,
  "tabuse.yamaguchi.jp": 1,
  "tokuyama.yamaguchi.jp": 1,
  "toyota.yamaguchi.jp": 1,
  "ube.yamaguchi.jp": 1,
  "yuu.yamaguchi.jp": 1,
  "chuo.yamanashi.jp": 1,
  "doshi.yamanashi.jp": 1,
  "fuefuki.yamanashi.jp": 1,
  "fujikawa.yamanashi.jp": 1,
  "fujikawaguchiko.yamanashi.jp": 1,
  "fujiyoshida.yamanashi.jp": 1,
  "hayakawa.yamanashi.jp": 1,
  "hokuto.yamanashi.jp": 1,
  "ichikawamisato.yamanashi.jp": 1,
  "kai.yamanashi.jp": 1,
  "kofu.yamanashi.jp": 1,
  "koshu.yamanashi.jp": 1,
  "kosuge.yamanashi.jp": 1,
  "minami-alps.yamanashi.jp": 1,
  "minobu.yamanashi.jp": 1,
  "nakamichi.yamanashi.jp": 1,
  "nanbu.yamanashi.jp": 1,
  "narusawa.yamanashi.jp": 1,
  "nirasaki.yamanashi.jp": 1,
  "nishikatsura.yamanashi.jp": 1,
  "oshino.yamanashi.jp": 1,
  "otsuki.yamanashi.jp": 1,
  "showa.yamanashi.jp": 1,
  "tabayama.yamanashi.jp": 1,
  "tsuru.yamanashi.jp": 1,
  "uenohara.yamanashi.jp": 1,
  "yamanakako.yamanashi.jp": 1,
  "yamanashi.yamanashi.jp": 1,
  "ke": 1,
  "ac.ke": 1,
  "co.ke": 1,
  "go.ke": 1,
  "info.ke": 1,
  "me.ke": 1,
  "mobi.ke": 1,
  "ne.ke": 1,
  "or.ke": 1,
  "sc.ke": 1,
  "kg": 1,
  "org.kg": 1,
  "net.kg": 1,
  "com.kg": 1,
  "edu.kg": 1,
  "gov.kg": 1,
  "mil.kg": 1,
  "kh": 2,
  "ki": 1,
  "edu.ki": 1,
  "biz.ki": 1,
  "net.ki": 1,
  "org.ki": 1,
  "gov.ki": 1,
  "info.ki": 1,
  "com.ki": 1,
  "km": 1,
  "org.km": 1,
  "nom.km": 1,
  "gov.km": 1,
  "prd.km": 1,
  "tm.km": 1,
  "edu.km": 1,
  "mil.km": 1,
  "ass.km": 1,
  "com.km": 1,
  "coop.km": 1,
  "asso.km": 1,
  "presse.km": 1,
  "medecin.km": 1,
  "notaires.km": 1,
  "pharmaciens.km": 1,
  "veterinaire.km": 1,
  "gouv.km": 1,
  "kn": 1,
  "net.kn": 1,
  "org.kn": 1,
  "edu.kn": 1,
  "gov.kn": 1,
  "kp": 1,
  "com.kp": 1,
  "edu.kp": 1,
  "gov.kp": 1,
  "org.kp": 1,
  "rep.kp": 1,
  "tra.kp": 1,
  "kr": 1,
  "ac.kr": 1,
  "co.kr": 1,
  "es.kr": 1,
  "go.kr": 1,
  "hs.kr": 1,
  "kg.kr": 1,
  "mil.kr": 1,
  "ms.kr": 1,
  "ne.kr": 1,
  "or.kr": 1,
  "pe.kr": 1,
  "re.kr": 1,
  "sc.kr": 1,
  "busan.kr": 1,
  "chungbuk.kr": 1,
  "chungnam.kr": 1,
  "daegu.kr": 1,
  "daejeon.kr": 1,
  "gangwon.kr": 1,
  "gwangju.kr": 1,
  "gyeongbuk.kr": 1,
  "gyeonggi.kr": 1,
  "gyeongnam.kr": 1,
  "incheon.kr": 1,
  "jeju.kr": 1,
  "jeonbuk.kr": 1,
  "jeonnam.kr": 1,
  "seoul.kr": 1,
  "ulsan.kr": 1,
  "kw": 1,
  "com.kw": 1,
  "edu.kw": 1,
  "emb.kw": 1,
  "gov.kw": 1,
  "ind.kw": 1,
  "net.kw": 1,
  "org.kw": 1,
  "ky": 1,
  "com.ky": 1,
  "edu.ky": 1,
  "net.ky": 1,
  "org.ky": 1,
  "kz": 1,
  "org.kz": 1,
  "edu.kz": 1,
  "net.kz": 1,
  "gov.kz": 1,
  "mil.kz": 1,
  "com.kz": 1,
  "la": 1,
  "int.la": 1,
  "net.la": 1,
  "info.la": 1,
  "edu.la": 1,
  "gov.la": 1,
  "per.la": 1,
  "com.la": 1,
  "org.la": 1,
  "lb": 1,
  "com.lb": 1,
  "edu.lb": 1,
  "gov.lb": 1,
  "net.lb": 1,
  "org.lb": 1,
  "lc": 1,
  "com.lc": 1,
  "net.lc": 1,
  "co.lc": 1,
  "org.lc": 1,
  "edu.lc": 1,
  "gov.lc": 1,
  "li": 1,
  "lk": 1,
  "gov.lk": 1,
  "sch.lk": 1,
  "net.lk": 1,
  "int.lk": 1,
  "com.lk": 1,
  "org.lk": 1,
  "edu.lk": 1,
  "ngo.lk": 1,
  "soc.lk": 1,
  "web.lk": 1,
  "ltd.lk": 1,
  "assn.lk": 1,
  "grp.lk": 1,
  "hotel.lk": 1,
  "ac.lk": 1,
  "lr": 1,
  "com.lr": 1,
  "edu.lr": 1,
  "gov.lr": 1,
  "org.lr": 1,
  "net.lr": 1,
  "ls": 1,
  "ac.ls": 1,
  "biz.ls": 1,
  "co.ls": 1,
  "edu.ls": 1,
  "gov.ls": 1,
  "info.ls": 1,
  "net.ls": 1,
  "org.ls": 1,
  "sc.ls": 1,
  "lt": 1,
  "gov.lt": 1,
  "lu": 1,
  "lv": 1,
  "com.lv": 1,
  "edu.lv": 1,
  "gov.lv": 1,
  "org.lv": 1,
  "mil.lv": 1,
  "id.lv": 1,
  "net.lv": 1,
  "asn.lv": 1,
  "conf.lv": 1,
  "ly": 1,
  "com.ly": 1,
  "net.ly": 1,
  "gov.ly": 1,
  "plc.ly": 1,
  "edu.ly": 1,
  "sch.ly": 1,
  "med.ly": 1,
  "org.ly": 1,
  "id.ly": 1,
  "ma": 1,
  "co.ma": 1,
  "net.ma": 1,
  "gov.ma": 1,
  "org.ma": 1,
  "ac.ma": 1,
  "press.ma": 1,
  "mc": 1,
  "tm.mc": 1,
  "asso.mc": 1,
  "md": 1,
  "me": 1,
  "co.me": 1,
  "net.me": 1,
  "org.me": 1,
  "edu.me": 1,
  "ac.me": 1,
  "gov.me": 1,
  "its.me": 1,
  "priv.me": 1,
  "mg": 1,
  "org.mg": 1,
  "nom.mg": 1,
  "gov.mg": 1,
  "prd.mg": 1,
  "tm.mg": 1,
  "edu.mg": 1,
  "mil.mg": 1,
  "com.mg": 1,
  "co.mg": 1,
  "mh": 1,
  "mil": 1,
  "mk": 1,
  "com.mk": 1,
  "org.mk": 1,
  "net.mk": 1,
  "edu.mk": 1,
  "gov.mk": 1,
  "inf.mk": 1,
  "name.mk": 1,
  "ml": 1,
  "com.ml": 1,
  "edu.ml": 1,
  "gouv.ml": 1,
  "gov.ml": 1,
  "net.ml": 1,
  "org.ml": 1,
  "presse.ml": 1,
  "mm": 2,
  "mn": 1,
  "gov.mn": 1,
  "edu.mn": 1,
  "org.mn": 1,
  "mo": 1,
  "com.mo": 1,
  "net.mo": 1,
  "org.mo": 1,
  "edu.mo": 1,
  "gov.mo": 1,
  "mobi": 1,
  "mp": 1,
  "mq": 1,
  "mr": 1,
  "gov.mr": 1,
  "ms": 1,
  "com.ms": 1,
  "edu.ms": 1,
  "gov.ms": 1,
  "net.ms": 1,
  "org.ms": 1,
  "mt": 1,
  "com.mt": 1,
  "edu.mt": 1,
  "net.mt": 1,
  "org.mt": 1,
  "mu": 1,
  "com.mu": 1,
  "net.mu": 1,
  "org.mu": 1,
  "gov.mu": 1,
  "ac.mu": 1,
  "co.mu": 1,
  "or.mu": 1,
  "museum": 1,
  "mv": 1,
  "aero.mv": 1,
  "biz.mv": 1,
  "com.mv": 1,
  "coop.mv": 1,
  "edu.mv": 1,
  "gov.mv": 1,
  "info.mv": 1,
  "int.mv": 1,
  "mil.mv": 1,
  "museum.mv": 1,
  "name.mv": 1,
  "net.mv": 1,
  "org.mv": 1,
  "pro.mv": 1,
  "mw": 1,
  "ac.mw": 1,
  "biz.mw": 1,
  "co.mw": 1,
  "com.mw": 1,
  "coop.mw": 1,
  "edu.mw": 1,
  "gov.mw": 1,
  "int.mw": 1,
  "museum.mw": 1,
  "net.mw": 1,
  "org.mw": 1,
  "mx": 1,
  "com.mx": 1,
  "org.mx": 1,
  "gob.mx": 1,
  "edu.mx": 1,
  "net.mx": 1,
  "my": 1,
  "biz.my": 1,
  "com.my": 1,
  "edu.my": 1,
  "gov.my": 1,
  "mil.my": 1,
  "name.my": 1,
  "net.my": 1,
  "org.my": 1,
  "mz": 1,
  "ac.mz": 1,
  "adv.mz": 1,
  "co.mz": 1,
  "edu.mz": 1,
  "gov.mz": 1,
  "mil.mz": 1,
  "net.mz": 1,
  "org.mz": 1,
  "na": 1,
  "info.na": 1,
  "pro.na": 1,
  "name.na": 1,
  "school.na": 1,
  "or.na": 1,
  "dr.na": 1,
  "us.na": 1,
  "mx.na": 1,
  "ca.na": 1,
  "in.na": 1,
  "cc.na": 1,
  "tv.na": 1,
  "ws.na": 1,
  "mobi.na": 1,
  "co.na": 1,
  "com.na": 1,
  "org.na": 1,
  "name": 1,
  "nc": 1,
  "asso.nc": 1,
  "nom.nc": 1,
  "ne": 1,
  "net": 1,
  "nf": 1,
  "com.nf": 1,
  "net.nf": 1,
  "per.nf": 1,
  "rec.nf": 1,
  "web.nf": 1,
  "arts.nf": 1,
  "firm.nf": 1,
  "info.nf": 1,
  "other.nf": 1,
  "store.nf": 1,
  "ng": 1,
  "com.ng": 1,
  "edu.ng": 1,
  "gov.ng": 1,
  "i.ng": 1,
  "mil.ng": 1,
  "mobi.ng": 1,
  "name.ng": 1,
  "net.ng": 1,
  "org.ng": 1,
  "sch.ng": 1,
  "ni": 1,
  "ac.ni": 1,
  "biz.ni": 1,
  "co.ni": 1,
  "com.ni": 1,
  "edu.ni": 1,
  "gob.ni": 1,
  "in.ni": 1,
  "info.ni": 1,
  "int.ni": 1,
  "mil.ni": 1,
  "net.ni": 1,
  "nom.ni": 1,
  "org.ni": 1,
  "web.ni": 1,
  "nl": 1,
  "no": 1,
  "fhs.no": 1,
  "vgs.no": 1,
  "fylkesbibl.no": 1,
  "folkebibl.no": 1,
  "museum.no": 1,
  "idrett.no": 1,
  "priv.no": 1,
  "mil.no": 1,
  "stat.no": 1,
  "dep.no": 1,
  "kommune.no": 1,
  "herad.no": 1,
  "aa.no": 1,
  "ah.no": 1,
  "bu.no": 1,
  "fm.no": 1,
  "hl.no": 1,
  "hm.no": 1,
  "jan-mayen.no": 1,
  "mr.no": 1,
  "nl.no": 1,
  "nt.no": 1,
  "of.no": 1,
  "ol.no": 1,
  "oslo.no": 1,
  "rl.no": 1,
  "sf.no": 1,
  "st.no": 1,
  "svalbard.no": 1,
  "tm.no": 1,
  "tr.no": 1,
  "va.no": 1,
  "vf.no": 1,
  "gs.aa.no": 1,
  "gs.ah.no": 1,
  "gs.bu.no": 1,
  "gs.fm.no": 1,
  "gs.hl.no": 1,
  "gs.hm.no": 1,
  "gs.jan-mayen.no": 1,
  "gs.mr.no": 1,
  "gs.nl.no": 1,
  "gs.nt.no": 1,
  "gs.of.no": 1,
  "gs.ol.no": 1,
  "gs.oslo.no": 1,
  "gs.rl.no": 1,
  "gs.sf.no": 1,
  "gs.st.no": 1,
  "gs.svalbard.no": 1,
  "gs.tm.no": 1,
  "gs.tr.no": 1,
  "gs.va.no": 1,
  "gs.vf.no": 1,
  "akrehamn.no": 1,
  "xn--krehamn-dxa.no": 1,
  "algard.no": 1,
  "xn--lgrd-poac.no": 1,
  "arna.no": 1,
  "brumunddal.no": 1,
  "bryne.no": 1,
  "bronnoysund.no": 1,
  "xn--brnnysund-m8ac.no": 1,
  "drobak.no": 1,
  "xn--drbak-wua.no": 1,
  "egersund.no": 1,
  "fetsund.no": 1,
  "floro.no": 1,
  "xn--flor-jra.no": 1,
  "fredrikstad.no": 1,
  "hokksund.no": 1,
  "honefoss.no": 1,
  "xn--hnefoss-q1a.no": 1,
  "jessheim.no": 1,
  "jorpeland.no": 1,
  "xn--jrpeland-54a.no": 1,
  "kirkenes.no": 1,
  "kopervik.no": 1,
  "krokstadelva.no": 1,
  "langevag.no": 1,
  "xn--langevg-jxa.no": 1,
  "leirvik.no": 1,
  "mjondalen.no": 1,
  "xn--mjndalen-64a.no": 1,
  "mo-i-rana.no": 1,
  "mosjoen.no": 1,
  "xn--mosjen-eya.no": 1,
  "nesoddtangen.no": 1,
  "orkanger.no": 1,
  "osoyro.no": 1,
  "xn--osyro-wua.no": 1,
  "raholt.no": 1,
  "xn--rholt-mra.no": 1,
  "sandnessjoen.no": 1,
  "xn--sandnessjen-ogb.no": 1,
  "skedsmokorset.no": 1,
  "slattum.no": 1,
  "spjelkavik.no": 1,
  "stathelle.no": 1,
  "stavern.no": 1,
  "stjordalshalsen.no": 1,
  "xn--stjrdalshalsen-sqb.no": 1,
  "tananger.no": 1,
  "tranby.no": 1,
  "vossevangen.no": 1,
  "afjord.no": 1,
  "xn--fjord-lra.no": 1,
  "agdenes.no": 1,
  "al.no": 1,
  "xn--l-1fa.no": 1,
  "alesund.no": 1,
  "xn--lesund-hua.no": 1,
  "alstahaug.no": 1,
  "alta.no": 1,
  "xn--lt-liac.no": 1,
  "alaheadju.no": 1,
  "xn--laheadju-7ya.no": 1,
  "alvdal.no": 1,
  "amli.no": 1,
  "xn--mli-tla.no": 1,
  "amot.no": 1,
  "xn--mot-tla.no": 1,
  "andebu.no": 1,
  "andoy.no": 1,
  "xn--andy-ira.no": 1,
  "andasuolo.no": 1,
  "ardal.no": 1,
  "xn--rdal-poa.no": 1,
  "aremark.no": 1,
  "arendal.no": 1,
  "xn--s-1fa.no": 1,
  "aseral.no": 1,
  "xn--seral-lra.no": 1,
  "asker.no": 1,
  "askim.no": 1,
  "askvoll.no": 1,
  "askoy.no": 1,
  "xn--asky-ira.no": 1,
  "asnes.no": 1,
  "xn--snes-poa.no": 1,
  "audnedaln.no": 1,
  "aukra.no": 1,
  "aure.no": 1,
  "aurland.no": 1,
  "aurskog-holand.no": 1,
  "xn--aurskog-hland-jnb.no": 1,
  "austevoll.no": 1,
  "austrheim.no": 1,
  "averoy.no": 1,
  "xn--avery-yua.no": 1,
  "balestrand.no": 1,
  "ballangen.no": 1,
  "balat.no": 1,
  "xn--blt-elab.no": 1,
  "balsfjord.no": 1,
  "bahccavuotna.no": 1,
  "xn--bhccavuotna-k7a.no": 1,
  "bamble.no": 1,
  "bardu.no": 1,
  "beardu.no": 1,
  "beiarn.no": 1,
  "bajddar.no": 1,
  "xn--bjddar-pta.no": 1,
  "baidar.no": 1,
  "xn--bidr-5nac.no": 1,
  "berg.no": 1,
  "bergen.no": 1,
  "berlevag.no": 1,
  "xn--berlevg-jxa.no": 1,
  "bearalvahki.no": 1,
  "xn--bearalvhki-y4a.no": 1,
  "bindal.no": 1,
  "birkenes.no": 1,
  "bjarkoy.no": 1,
  "xn--bjarky-fya.no": 1,
  "bjerkreim.no": 1,
  "bjugn.no": 1,
  "bodo.no": 1,
  "xn--bod-2na.no": 1,
  "badaddja.no": 1,
  "xn--bdddj-mrabd.no": 1,
  "budejju.no": 1,
  "bokn.no": 1,
  "bremanger.no": 1,
  "bronnoy.no": 1,
  "xn--brnny-wuac.no": 1,
  "bygland.no": 1,
  "bykle.no": 1,
  "barum.no": 1,
  "xn--brum-voa.no": 1,
  "bo.telemark.no": 1,
  "xn--b-5ga.telemark.no": 1,
  "bo.nordland.no": 1,
  "xn--b-5ga.nordland.no": 1,
  "bievat.no": 1,
  "xn--bievt-0qa.no": 1,
  "bomlo.no": 1,
  "xn--bmlo-gra.no": 1,
  "batsfjord.no": 1,
  "xn--btsfjord-9za.no": 1,
  "bahcavuotna.no": 1,
  "xn--bhcavuotna-s4a.no": 1,
  "dovre.no": 1,
  "drammen.no": 1,
  "drangedal.no": 1,
  "dyroy.no": 1,
  "xn--dyry-ira.no": 1,
  "donna.no": 1,
  "xn--dnna-gra.no": 1,
  "eid.no": 1,
  "eidfjord.no": 1,
  "eidsberg.no": 1,
  "eidskog.no": 1,
  "eidsvoll.no": 1,
  "eigersund.no": 1,
  "elverum.no": 1,
  "enebakk.no": 1,
  "engerdal.no": 1,
  "etne.no": 1,
  "etnedal.no": 1,
  "evenes.no": 1,
  "evenassi.no": 1,
  "xn--eveni-0qa01ga.no": 1,
  "evje-og-hornnes.no": 1,
  "farsund.no": 1,
  "fauske.no": 1,
  "fuossko.no": 1,
  "fuoisku.no": 1,
  "fedje.no": 1,
  "fet.no": 1,
  "finnoy.no": 1,
  "xn--finny-yua.no": 1,
  "fitjar.no": 1,
  "fjaler.no": 1,
  "fjell.no": 1,
  "flakstad.no": 1,
  "flatanger.no": 1,
  "flekkefjord.no": 1,
  "flesberg.no": 1,
  "flora.no": 1,
  "fla.no": 1,
  "xn--fl-zia.no": 1,
  "folldal.no": 1,
  "forsand.no": 1,
  "fosnes.no": 1,
  "frei.no": 1,
  "frogn.no": 1,
  "froland.no": 1,
  "frosta.no": 1,
  "frana.no": 1,
  "xn--frna-woa.no": 1,
  "froya.no": 1,
  "xn--frya-hra.no": 1,
  "fusa.no": 1,
  "fyresdal.no": 1,
  "forde.no": 1,
  "xn--frde-gra.no": 1,
  "gamvik.no": 1,
  "gangaviika.no": 1,
  "xn--ggaviika-8ya47h.no": 1,
  "gaular.no": 1,
  "gausdal.no": 1,
  "gildeskal.no": 1,
  "xn--gildeskl-g0a.no": 1,
  "giske.no": 1,
  "gjemnes.no": 1,
  "gjerdrum.no": 1,
  "gjerstad.no": 1,
  "gjesdal.no": 1,
  "gjovik.no": 1,
  "xn--gjvik-wua.no": 1,
  "gloppen.no": 1,
  "gol.no": 1,
  "gran.no": 1,
  "grane.no": 1,
  "granvin.no": 1,
  "gratangen.no": 1,
  "grimstad.no": 1,
  "grong.no": 1,
  "kraanghke.no": 1,
  "xn--kranghke-b0a.no": 1,
  "grue.no": 1,
  "gulen.no": 1,
  "hadsel.no": 1,
  "halden.no": 1,
  "halsa.no": 1,
  "hamar.no": 1,
  "hamaroy.no": 1,
  "habmer.no": 1,
  "xn--hbmer-xqa.no": 1,
  "hapmir.no": 1,
  "xn--hpmir-xqa.no": 1,
  "hammerfest.no": 1,
  "hammarfeasta.no": 1,
  "xn--hmmrfeasta-s4ac.no": 1,
  "haram.no": 1,
  "hareid.no": 1,
  "harstad.no": 1,
  "hasvik.no": 1,
  "aknoluokta.no": 1,
  "xn--koluokta-7ya57h.no": 1,
  "hattfjelldal.no": 1,
  "aarborte.no": 1,
  "haugesund.no": 1,
  "hemne.no": 1,
  "hemnes.no": 1,
  "hemsedal.no": 1,
  "heroy.more-og-romsdal.no": 1,
  "xn--hery-ira.xn--mre-og-romsdal-qqb.no": 1,
  "heroy.nordland.no": 1,
  "xn--hery-ira.nordland.no": 1,
  "hitra.no": 1,
  "hjartdal.no": 1,
  "hjelmeland.no": 1,
  "hobol.no": 1,
  "xn--hobl-ira.no": 1,
  "hof.no": 1,
  "hol.no": 1,
  "hole.no": 1,
  "holmestrand.no": 1,
  "holtalen.no": 1,
  "xn--holtlen-hxa.no": 1,
  "hornindal.no": 1,
  "horten.no": 1,
  "hurdal.no": 1,
  "hurum.no": 1,
  "hvaler.no": 1,
  "hyllestad.no": 1,
  "hagebostad.no": 1,
  "xn--hgebostad-g3a.no": 1,
  "hoyanger.no": 1,
  "xn--hyanger-q1a.no": 1,
  "hoylandet.no": 1,
  "xn--hylandet-54a.no": 1,
  "ha.no": 1,
  "xn--h-2fa.no": 1,
  "ibestad.no": 1,
  "inderoy.no": 1,
  "xn--indery-fya.no": 1,
  "iveland.no": 1,
  "jevnaker.no": 1,
  "jondal.no": 1,
  "jolster.no": 1,
  "xn--jlster-bya.no": 1,
  "karasjok.no": 1,
  "karasjohka.no": 1,
  "xn--krjohka-hwab49j.no": 1,
  "karlsoy.no": 1,
  "galsa.no": 1,
  "xn--gls-elac.no": 1,
  "karmoy.no": 1,
  "xn--karmy-yua.no": 1,
  "kautokeino.no": 1,
  "guovdageaidnu.no": 1,
  "klepp.no": 1,
  "klabu.no": 1,
  "xn--klbu-woa.no": 1,
  "kongsberg.no": 1,
  "kongsvinger.no": 1,
  "kragero.no": 1,
  "xn--krager-gya.no": 1,
  "kristiansand.no": 1,
  "kristiansund.no": 1,
  "krodsherad.no": 1,
  "xn--krdsherad-m8a.no": 1,
  "kvalsund.no": 1,
  "rahkkeravju.no": 1,
  "xn--rhkkervju-01af.no": 1,
  "kvam.no": 1,
  "kvinesdal.no": 1,
  "kvinnherad.no": 1,
  "kviteseid.no": 1,
  "kvitsoy.no": 1,
  "xn--kvitsy-fya.no": 1,
  "kvafjord.no": 1,
  "xn--kvfjord-nxa.no": 1,
  "giehtavuoatna.no": 1,
  "kvanangen.no": 1,
  "xn--kvnangen-k0a.no": 1,
  "navuotna.no": 1,
  "xn--nvuotna-hwa.no": 1,
  "kafjord.no": 1,
  "xn--kfjord-iua.no": 1,
  "gaivuotna.no": 1,
  "xn--givuotna-8ya.no": 1,
  "larvik.no": 1,
  "lavangen.no": 1,
  "lavagis.no": 1,
  "loabat.no": 1,
  "xn--loabt-0qa.no": 1,
  "lebesby.no": 1,
  "davvesiida.no": 1,
  "leikanger.no": 1,
  "leirfjord.no": 1,
  "leka.no": 1,
  "leksvik.no": 1,
  "lenvik.no": 1,
  "leangaviika.no": 1,
  "xn--leagaviika-52b.no": 1,
  "lesja.no": 1,
  "levanger.no": 1,
  "lier.no": 1,
  "lierne.no": 1,
  "lillehammer.no": 1,
  "lillesand.no": 1,
  "lindesnes.no": 1,
  "lindas.no": 1,
  "xn--linds-pra.no": 1,
  "lom.no": 1,
  "loppa.no": 1,
  "lahppi.no": 1,
  "xn--lhppi-xqa.no": 1,
  "lund.no": 1,
  "lunner.no": 1,
  "luroy.no": 1,
  "xn--lury-ira.no": 1,
  "luster.no": 1,
  "lyngdal.no": 1,
  "lyngen.no": 1,
  "ivgu.no": 1,
  "lardal.no": 1,
  "lerdal.no": 1,
  "xn--lrdal-sra.no": 1,
  "lodingen.no": 1,
  "xn--ldingen-q1a.no": 1,
  "lorenskog.no": 1,
  "xn--lrenskog-54a.no": 1,
  "loten.no": 1,
  "xn--lten-gra.no": 1,
  "malvik.no": 1,
  "masoy.no": 1,
  "xn--msy-ula0h.no": 1,
  "muosat.no": 1,
  "xn--muost-0qa.no": 1,
  "mandal.no": 1,
  "marker.no": 1,
  "marnardal.no": 1,
  "masfjorden.no": 1,
  "meland.no": 1,
  "meldal.no": 1,
  "melhus.no": 1,
  "meloy.no": 1,
  "xn--mely-ira.no": 1,
  "meraker.no": 1,
  "xn--merker-kua.no": 1,
  "moareke.no": 1,
  "xn--moreke-jua.no": 1,
  "midsund.no": 1,
  "midtre-gauldal.no": 1,
  "modalen.no": 1,
  "modum.no": 1,
  "molde.no": 1,
  "moskenes.no": 1,
  "moss.no": 1,
  "mosvik.no": 1,
  "malselv.no": 1,
  "xn--mlselv-iua.no": 1,
  "malatvuopmi.no": 1,
  "xn--mlatvuopmi-s4a.no": 1,
  "namdalseid.no": 1,
  "aejrie.no": 1,
  "namsos.no": 1,
  "namsskogan.no": 1,
  "naamesjevuemie.no": 1,
  "xn--nmesjevuemie-tcba.no": 1,
  "laakesvuemie.no": 1,
  "nannestad.no": 1,
  "narvik.no": 1,
  "narviika.no": 1,
  "naustdal.no": 1,
  "nedre-eiker.no": 1,
  "nes.akershus.no": 1,
  "nes.buskerud.no": 1,
  "nesna.no": 1,
  "nesodden.no": 1,
  "nesseby.no": 1,
  "unjarga.no": 1,
  "xn--unjrga-rta.no": 1,
  "nesset.no": 1,
  "nissedal.no": 1,
  "nittedal.no": 1,
  "nord-aurdal.no": 1,
  "nord-fron.no": 1,
  "nord-odal.no": 1,
  "norddal.no": 1,
  "nordkapp.no": 1,
  "davvenjarga.no": 1,
  "xn--davvenjrga-y4a.no": 1,
  "nordre-land.no": 1,
  "nordreisa.no": 1,
  "raisa.no": 1,
  "xn--risa-5na.no": 1,
  "nore-og-uvdal.no": 1,
  "notodden.no": 1,
  "naroy.no": 1,
  "xn--nry-yla5g.no": 1,
  "notteroy.no": 1,
  "xn--nttery-byae.no": 1,
  "odda.no": 1,
  "oksnes.no": 1,
  "xn--ksnes-uua.no": 1,
  "oppdal.no": 1,
  "oppegard.no": 1,
  "xn--oppegrd-ixa.no": 1,
  "orkdal.no": 1,
  "orland.no": 1,
  "xn--rland-uua.no": 1,
  "orskog.no": 1,
  "xn--rskog-uua.no": 1,
  "orsta.no": 1,
  "xn--rsta-fra.no": 1,
  "os.hedmark.no": 1,
  "os.hordaland.no": 1,
  "osen.no": 1,
  "osteroy.no": 1,
  "xn--ostery-fya.no": 1,
  "ostre-toten.no": 1,
  "xn--stre-toten-zcb.no": 1,
  "overhalla.no": 1,
  "ovre-eiker.no": 1,
  "xn--vre-eiker-k8a.no": 1,
  "oyer.no": 1,
  "xn--yer-zna.no": 1,
  "oygarden.no": 1,
  "xn--ygarden-p1a.no": 1,
  "oystre-slidre.no": 1,
  "xn--ystre-slidre-ujb.no": 1,
  "porsanger.no": 1,
  "porsangu.no": 1,
  "xn--porsgu-sta26f.no": 1,
  "porsgrunn.no": 1,
  "radoy.no": 1,
  "xn--rady-ira.no": 1,
  "rakkestad.no": 1,
  "rana.no": 1,
  "ruovat.no": 1,
  "randaberg.no": 1,
  "rauma.no": 1,
  "rendalen.no": 1,
  "rennebu.no": 1,
  "rennesoy.no": 1,
  "xn--rennesy-v1a.no": 1,
  "rindal.no": 1,
  "ringebu.no": 1,
  "ringerike.no": 1,
  "ringsaker.no": 1,
  "rissa.no": 1,
  "risor.no": 1,
  "xn--risr-ira.no": 1,
  "roan.no": 1,
  "rollag.no": 1,
  "rygge.no": 1,
  "ralingen.no": 1,
  "xn--rlingen-mxa.no": 1,
  "rodoy.no": 1,
  "xn--rdy-0nab.no": 1,
  "romskog.no": 1,
  "xn--rmskog-bya.no": 1,
  "roros.no": 1,
  "xn--rros-gra.no": 1,
  "rost.no": 1,
  "xn--rst-0na.no": 1,
  "royken.no": 1,
  "xn--ryken-vua.no": 1,
  "royrvik.no": 1,
  "xn--ryrvik-bya.no": 1,
  "rade.no": 1,
  "xn--rde-ula.no": 1,
  "salangen.no": 1,
  "siellak.no": 1,
  "saltdal.no": 1,
  "salat.no": 1,
  "xn--slt-elab.no": 1,
  "xn--slat-5na.no": 1,
  "samnanger.no": 1,
  "sande.more-og-romsdal.no": 1,
  "sande.xn--mre-og-romsdal-qqb.no": 1,
  "sande.vestfold.no": 1,
  "sandefjord.no": 1,
  "sandnes.no": 1,
  "sandoy.no": 1,
  "xn--sandy-yua.no": 1,
  "sarpsborg.no": 1,
  "sauda.no": 1,
  "sauherad.no": 1,
  "sel.no": 1,
  "selbu.no": 1,
  "selje.no": 1,
  "seljord.no": 1,
  "sigdal.no": 1,
  "siljan.no": 1,
  "sirdal.no": 1,
  "skaun.no": 1,
  "skedsmo.no": 1,
  "ski.no": 1,
  "skien.no": 1,
  "skiptvet.no": 1,
  "skjervoy.no": 1,
  "xn--skjervy-v1a.no": 1,
  "skierva.no": 1,
  "xn--skierv-uta.no": 1,
  "skjak.no": 1,
  "xn--skjk-soa.no": 1,
  "skodje.no": 1,
  "skanland.no": 1,
  "xn--sknland-fxa.no": 1,
  "skanit.no": 1,
  "xn--sknit-yqa.no": 1,
  "smola.no": 1,
  "xn--smla-hra.no": 1,
  "snillfjord.no": 1,
  "snasa.no": 1,
  "xn--snsa-roa.no": 1,
  "snoasa.no": 1,
  "snaase.no": 1,
  "xn--snase-nra.no": 1,
  "sogndal.no": 1,
  "sokndal.no": 1,
  "sola.no": 1,
  "solund.no": 1,
  "songdalen.no": 1,
  "sortland.no": 1,
  "spydeberg.no": 1,
  "stange.no": 1,
  "stavanger.no": 1,
  "steigen.no": 1,
  "steinkjer.no": 1,
  "stjordal.no": 1,
  "xn--stjrdal-s1a.no": 1,
  "stokke.no": 1,
  "stor-elvdal.no": 1,
  "stord.no": 1,
  "stordal.no": 1,
  "storfjord.no": 1,
  "omasvuotna.no": 1,
  "strand.no": 1,
  "stranda.no": 1,
  "stryn.no": 1,
  "sula.no": 1,
  "suldal.no": 1,
  "sund.no": 1,
  "sunndal.no": 1,
  "surnadal.no": 1,
  "sveio.no": 1,
  "svelvik.no": 1,
  "sykkylven.no": 1,
  "sogne.no": 1,
  "xn--sgne-gra.no": 1,
  "somna.no": 1,
  "xn--smna-gra.no": 1,
  "sondre-land.no": 1,
  "xn--sndre-land-0cb.no": 1,
  "sor-aurdal.no": 1,
  "xn--sr-aurdal-l8a.no": 1,
  "sor-fron.no": 1,
  "xn--sr-fron-q1a.no": 1,
  "sor-odal.no": 1,
  "xn--sr-odal-q1a.no": 1,
  "sor-varanger.no": 1,
  "xn--sr-varanger-ggb.no": 1,
  "matta-varjjat.no": 1,
  "xn--mtta-vrjjat-k7af.no": 1,
  "sorfold.no": 1,
  "xn--srfold-bya.no": 1,
  "sorreisa.no": 1,
  "xn--srreisa-q1a.no": 1,
  "sorum.no": 1,
  "xn--srum-gra.no": 1,
  "tana.no": 1,
  "deatnu.no": 1,
  "time.no": 1,
  "tingvoll.no": 1,
  "tinn.no": 1,
  "tjeldsund.no": 1,
  "dielddanuorri.no": 1,
  "tjome.no": 1,
  "xn--tjme-hra.no": 1,
  "tokke.no": 1,
  "tolga.no": 1,
  "torsken.no": 1,
  "tranoy.no": 1,
  "xn--trany-yua.no": 1,
  "tromso.no": 1,
  "xn--troms-zua.no": 1,
  "tromsa.no": 1,
  "romsa.no": 1,
  "trondheim.no": 1,
  "troandin.no": 1,
  "trysil.no": 1,
  "trana.no": 1,
  "xn--trna-woa.no": 1,
  "trogstad.no": 1,
  "xn--trgstad-r1a.no": 1,
  "tvedestrand.no": 1,
  "tydal.no": 1,
  "tynset.no": 1,
  "tysfjord.no": 1,
  "divtasvuodna.no": 1,
  "divttasvuotna.no": 1,
  "tysnes.no": 1,
  "tysvar.no": 1,
  "xn--tysvr-vra.no": 1,
  "tonsberg.no": 1,
  "xn--tnsberg-q1a.no": 1,
  "ullensaker.no": 1,
  "ullensvang.no": 1,
  "ulvik.no": 1,
  "utsira.no": 1,
  "vadso.no": 1,
  "xn--vads-jra.no": 1,
  "cahcesuolo.no": 1,
  "xn--hcesuolo-7ya35b.no": 1,
  "vaksdal.no": 1,
  "valle.no": 1,
  "vang.no": 1,
  "vanylven.no": 1,
  "vardo.no": 1,
  "xn--vard-jra.no": 1,
  "varggat.no": 1,
  "xn--vrggt-xqad.no": 1,
  "vefsn.no": 1,
  "vaapste.no": 1,
  "vega.no": 1,
  "vegarshei.no": 1,
  "xn--vegrshei-c0a.no": 1,
  "vennesla.no": 1,
  "verdal.no": 1,
  "verran.no": 1,
  "vestby.no": 1,
  "vestnes.no": 1,
  "vestre-slidre.no": 1,
  "vestre-toten.no": 1,
  "vestvagoy.no": 1,
  "xn--vestvgy-ixa6o.no": 1,
  "vevelstad.no": 1,
  "vik.no": 1,
  "vikna.no": 1,
  "vindafjord.no": 1,
  "volda.no": 1,
  "voss.no": 1,
  "varoy.no": 1,
  "xn--vry-yla5g.no": 1,
  "vagan.no": 1,
  "xn--vgan-qoa.no": 1,
  "voagat.no": 1,
  "vagsoy.no": 1,
  "xn--vgsy-qoa0j.no": 1,
  "vaga.no": 1,
  "xn--vg-yiab.no": 1,
  "valer.ostfold.no": 1,
  "xn--vler-qoa.xn--stfold-9xa.no": 1,
  "valer.hedmark.no": 1,
  "xn--vler-qoa.hedmark.no": 1,
  "np": 2,
  "nr": 1,
  "biz.nr": 1,
  "info.nr": 1,
  "gov.nr": 1,
  "edu.nr": 1,
  "org.nr": 1,
  "net.nr": 1,
  "com.nr": 1,
  "nu": 1,
  "nz": 1,
  "ac.nz": 1,
  "co.nz": 1,
  "cri.nz": 1,
  "geek.nz": 1,
  "gen.nz": 1,
  "govt.nz": 1,
  "health.nz": 1,
  "iwi.nz": 1,
  "kiwi.nz": 1,
  "maori.nz": 1,
  "mil.nz": 1,
  "xn--mori-qsa.nz": 1,
  "net.nz": 1,
  "org.nz": 1,
  "parliament.nz": 1,
  "school.nz": 1,
  "om": 1,
  "co.om": 1,
  "com.om": 1,
  "edu.om": 1,
  "gov.om": 1,
  "med.om": 1,
  "museum.om": 1,
  "net.om": 1,
  "org.om": 1,
  "pro.om": 1,
  "onion": 1,
  "org": 1,
  "pa": 1,
  "ac.pa": 1,
  "gob.pa": 1,
  "com.pa": 1,
  "org.pa": 1,
  "sld.pa": 1,
  "edu.pa": 1,
  "net.pa": 1,
  "ing.pa": 1,
  "abo.pa": 1,
  "med.pa": 1,
  "nom.pa": 1,
  "pe": 1,
  "edu.pe": 1,
  "gob.pe": 1,
  "nom.pe": 1,
  "mil.pe": 1,
  "org.pe": 1,
  "com.pe": 1,
  "net.pe": 1,
  "pf": 1,
  "com.pf": 1,
  "org.pf": 1,
  "edu.pf": 1,
  "pg": 2,
  "ph": 1,
  "com.ph": 1,
  "net.ph": 1,
  "org.ph": 1,
  "gov.ph": 1,
  "edu.ph": 1,
  "ngo.ph": 1,
  "mil.ph": 1,
  "i.ph": 1,
  "pk": 1,
  "com.pk": 1,
  "net.pk": 1,
  "edu.pk": 1,
  "org.pk": 1,
  "fam.pk": 1,
  "biz.pk": 1,
  "web.pk": 1,
  "gov.pk": 1,
  "gob.pk": 1,
  "gok.pk": 1,
  "gon.pk": 1,
  "gop.pk": 1,
  "gos.pk": 1,
  "info.pk": 1,
  "pl": 1,
  "com.pl": 1,
  "net.pl": 1,
  "org.pl": 1,
  "aid.pl": 1,
  "agro.pl": 1,
  "atm.pl": 1,
  "auto.pl": 1,
  "biz.pl": 1,
  "edu.pl": 1,
  "gmina.pl": 1,
  "gsm.pl": 1,
  "info.pl": 1,
  "mail.pl": 1,
  "miasta.pl": 1,
  "media.pl": 1,
  "mil.pl": 1,
  "nieruchomosci.pl": 1,
  "nom.pl": 1,
  "pc.pl": 1,
  "powiat.pl": 1,
  "priv.pl": 1,
  "realestate.pl": 1,
  "rel.pl": 1,
  "sex.pl": 1,
  "shop.pl": 1,
  "sklep.pl": 1,
  "sos.pl": 1,
  "szkola.pl": 1,
  "targi.pl": 1,
  "tm.pl": 1,
  "tourism.pl": 1,
  "travel.pl": 1,
  "turystyka.pl": 1,
  "gov.pl": 1,
  "ap.gov.pl": 1,
  "griw.gov.pl": 1,
  "ic.gov.pl": 1,
  "is.gov.pl": 1,
  "kmpsp.gov.pl": 1,
  "konsulat.gov.pl": 1,
  "kppsp.gov.pl": 1,
  "kwp.gov.pl": 1,
  "kwpsp.gov.pl": 1,
  "mup.gov.pl": 1,
  "mw.gov.pl": 1,
  "oia.gov.pl": 1,
  "oirm.gov.pl": 1,
  "oke.gov.pl": 1,
  "oow.gov.pl": 1,
  "oschr.gov.pl": 1,
  "oum.gov.pl": 1,
  "pa.gov.pl": 1,
  "pinb.gov.pl": 1,
  "piw.gov.pl": 1,
  "po.gov.pl": 1,
  "pr.gov.pl": 1,
  "psp.gov.pl": 1,
  "psse.gov.pl": 1,
  "pup.gov.pl": 1,
  "rzgw.gov.pl": 1,
  "sa.gov.pl": 1,
  "sdn.gov.pl": 1,
  "sko.gov.pl": 1,
  "so.gov.pl": 1,
  "sr.gov.pl": 1,
  "starostwo.gov.pl": 1,
  "ug.gov.pl": 1,
  "ugim.gov.pl": 1,
  "um.gov.pl": 1,
  "umig.gov.pl": 1,
  "upow.gov.pl": 1,
  "uppo.gov.pl": 1,
  "us.gov.pl": 1,
  "uw.gov.pl": 1,
  "uzs.gov.pl": 1,
  "wif.gov.pl": 1,
  "wiih.gov.pl": 1,
  "winb.gov.pl": 1,
  "wios.gov.pl": 1,
  "witd.gov.pl": 1,
  "wiw.gov.pl": 1,
  "wkz.gov.pl": 1,
  "wsa.gov.pl": 1,
  "wskr.gov.pl": 1,
  "wsse.gov.pl": 1,
  "wuoz.gov.pl": 1,
  "wzmiuw.gov.pl": 1,
  "zp.gov.pl": 1,
  "zpisdn.gov.pl": 1,
  "augustow.pl": 1,
  "babia-gora.pl": 1,
  "bedzin.pl": 1,
  "beskidy.pl": 1,
  "bialowieza.pl": 1,
  "bialystok.pl": 1,
  "bielawa.pl": 1,
  "bieszczady.pl": 1,
  "boleslawiec.pl": 1,
  "bydgoszcz.pl": 1,
  "bytom.pl": 1,
  "cieszyn.pl": 1,
  "czeladz.pl": 1,
  "czest.pl": 1,
  "dlugoleka.pl": 1,
  "elblag.pl": 1,
  "elk.pl": 1,
  "glogow.pl": 1,
  "gniezno.pl": 1,
  "gorlice.pl": 1,
  "grajewo.pl": 1,
  "ilawa.pl": 1,
  "jaworzno.pl": 1,
  "jelenia-gora.pl": 1,
  "jgora.pl": 1,
  "kalisz.pl": 1,
  "kazimierz-dolny.pl": 1,
  "karpacz.pl": 1,
  "kartuzy.pl": 1,
  "kaszuby.pl": 1,
  "katowice.pl": 1,
  "kepno.pl": 1,
  "ketrzyn.pl": 1,
  "klodzko.pl": 1,
  "kobierzyce.pl": 1,
  "kolobrzeg.pl": 1,
  "konin.pl": 1,
  "konskowola.pl": 1,
  "kutno.pl": 1,
  "lapy.pl": 1,
  "lebork.pl": 1,
  "legnica.pl": 1,
  "lezajsk.pl": 1,
  "limanowa.pl": 1,
  "lomza.pl": 1,
  "lowicz.pl": 1,
  "lubin.pl": 1,
  "lukow.pl": 1,
  "malbork.pl": 1,
  "malopolska.pl": 1,
  "mazowsze.pl": 1,
  "mazury.pl": 1,
  "mielec.pl": 1,
  "mielno.pl": 1,
  "mragowo.pl": 1,
  "naklo.pl": 1,
  "nowaruda.pl": 1,
  "nysa.pl": 1,
  "olawa.pl": 1,
  "olecko.pl": 1,
  "olkusz.pl": 1,
  "olsztyn.pl": 1,
  "opoczno.pl": 1,
  "opole.pl": 1,
  "ostroda.pl": 1,
  "ostroleka.pl": 1,
  "ostrowiec.pl": 1,
  "ostrowwlkp.pl": 1,
  "pila.pl": 1,
  "pisz.pl": 1,
  "podhale.pl": 1,
  "podlasie.pl": 1,
  "polkowice.pl": 1,
  "pomorze.pl": 1,
  "pomorskie.pl": 1,
  "prochowice.pl": 1,
  "pruszkow.pl": 1,
  "przeworsk.pl": 1,
  "pulawy.pl": 1,
  "radom.pl": 1,
  "rawa-maz.pl": 1,
  "rybnik.pl": 1,
  "rzeszow.pl": 1,
  "sanok.pl": 1,
  "sejny.pl": 1,
  "slask.pl": 1,
  "slupsk.pl": 1,
  "sosnowiec.pl": 1,
  "stalowa-wola.pl": 1,
  "skoczow.pl": 1,
  "starachowice.pl": 1,
  "stargard.pl": 1,
  "suwalki.pl": 1,
  "swidnica.pl": 1,
  "swiebodzin.pl": 1,
  "swinoujscie.pl": 1,
  "szczecin.pl": 1,
  "szczytno.pl": 1,
  "tarnobrzeg.pl": 1,
  "tgory.pl": 1,
  "turek.pl": 1,
  "tychy.pl": 1,
  "ustka.pl": 1,
  "walbrzych.pl": 1,
  "warmia.pl": 1,
  "warszawa.pl": 1,
  "waw.pl": 1,
  "wegrow.pl": 1,
  "wielun.pl": 1,
  "wlocl.pl": 1,
  "wloclawek.pl": 1,
  "wodzislaw.pl": 1,
  "wolomin.pl": 1,
  "wroclaw.pl": 1,
  "zachpomor.pl": 1,
  "zagan.pl": 1,
  "zarow.pl": 1,
  "zgora.pl": 1,
  "zgorzelec.pl": 1,
  "pm": 1,
  "pn": 1,
  "gov.pn": 1,
  "co.pn": 1,
  "org.pn": 1,
  "edu.pn": 1,
  "net.pn": 1,
  "post": 1,
  "pr": 1,
  "com.pr": 1,
  "net.pr": 1,
  "org.pr": 1,
  "gov.pr": 1,
  "edu.pr": 1,
  "isla.pr": 1,
  "pro.pr": 1,
  "biz.pr": 1,
  "info.pr": 1,
  "name.pr": 1,
  "est.pr": 1,
  "prof.pr": 1,
  "ac.pr": 1,
  "pro": 1,
  "aaa.pro": 1,
  "aca.pro": 1,
  "acct.pro": 1,
  "avocat.pro": 1,
  "bar.pro": 1,
  "cpa.pro": 1,
  "eng.pro": 1,
  "jur.pro": 1,
  "law.pro": 1,
  "med.pro": 1,
  "recht.pro": 1,
  "ps": 1,
  "edu.ps": 1,
  "gov.ps": 1,
  "sec.ps": 1,
  "plo.ps": 1,
  "com.ps": 1,
  "org.ps": 1,
  "net.ps": 1,
  "pt": 1,
  "net.pt": 1,
  "gov.pt": 1,
  "org.pt": 1,
  "edu.pt": 1,
  "int.pt": 1,
  "publ.pt": 1,
  "com.pt": 1,
  "nome.pt": 1,
  "pw": 1,
  "co.pw": 1,
  "ne.pw": 1,
  "or.pw": 1,
  "ed.pw": 1,
  "go.pw": 1,
  "belau.pw": 1,
  "py": 1,
  "com.py": 1,
  "coop.py": 1,
  "edu.py": 1,
  "gov.py": 1,
  "mil.py": 1,
  "net.py": 1,
  "org.py": 1,
  "qa": 1,
  "com.qa": 1,
  "edu.qa": 1,
  "gov.qa": 1,
  "mil.qa": 1,
  "name.qa": 1,
  "net.qa": 1,
  "org.qa": 1,
  "sch.qa": 1,
  "re": 1,
  "asso.re": 1,
  "com.re": 1,
  "nom.re": 1,
  "ro": 1,
  "arts.ro": 1,
  "com.ro": 1,
  "firm.ro": 1,
  "info.ro": 1,
  "nom.ro": 1,
  "nt.ro": 1,
  "org.ro": 1,
  "rec.ro": 1,
  "store.ro": 1,
  "tm.ro": 1,
  "www.ro": 1,
  "rs": 1,
  "ac.rs": 1,
  "co.rs": 1,
  "edu.rs": 1,
  "gov.rs": 1,
  "in.rs": 1,
  "org.rs": 1,
  "ru": 1,
  "rw": 1,
  "ac.rw": 1,
  "co.rw": 1,
  "coop.rw": 1,
  "gov.rw": 1,
  "mil.rw": 1,
  "net.rw": 1,
  "org.rw": 1,
  "sa": 1,
  "com.sa": 1,
  "net.sa": 1,
  "org.sa": 1,
  "gov.sa": 1,
  "med.sa": 1,
  "pub.sa": 1,
  "edu.sa": 1,
  "sch.sa": 1,
  "sb": 1,
  "com.sb": 1,
  "edu.sb": 1,
  "gov.sb": 1,
  "net.sb": 1,
  "org.sb": 1,
  "sc": 1,
  "com.sc": 1,
  "gov.sc": 1,
  "net.sc": 1,
  "org.sc": 1,
  "edu.sc": 1,
  "sd": 1,
  "com.sd": 1,
  "net.sd": 1,
  "org.sd": 1,
  "edu.sd": 1,
  "med.sd": 1,
  "tv.sd": 1,
  "gov.sd": 1,
  "info.sd": 1,
  "se": 1,
  "a.se": 1,
  "ac.se": 1,
  "b.se": 1,
  "bd.se": 1,
  "brand.se": 1,
  "c.se": 1,
  "d.se": 1,
  "e.se": 1,
  "f.se": 1,
  "fh.se": 1,
  "fhsk.se": 1,
  "fhv.se": 1,
  "g.se": 1,
  "h.se": 1,
  "i.se": 1,
  "k.se": 1,
  "komforb.se": 1,
  "kommunalforbund.se": 1,
  "komvux.se": 1,
  "l.se": 1,
  "lanbib.se": 1,
  "m.se": 1,
  "n.se": 1,
  "naturbruksgymn.se": 1,
  "o.se": 1,
  "org.se": 1,
  "p.se": 1,
  "parti.se": 1,
  "pp.se": 1,
  "press.se": 1,
  "r.se": 1,
  "s.se": 1,
  "t.se": 1,
  "tm.se": 1,
  "u.se": 1,
  "w.se": 1,
  "x.se": 1,
  "y.se": 1,
  "z.se": 1,
  "sg": 1,
  "com.sg": 1,
  "net.sg": 1,
  "org.sg": 1,
  "gov.sg": 1,
  "edu.sg": 1,
  "per.sg": 1,
  "sh": 1,
  "com.sh": 1,
  "net.sh": 1,
  "gov.sh": 1,
  "org.sh": 1,
  "mil.sh": 1,
  "si": 1,
  "sj": 1,
  "sk": 1,
  "sl": 1,
  "com.sl": 1,
  "net.sl": 1,
  "edu.sl": 1,
  "gov.sl": 1,
  "org.sl": 1,
  "sm": 1,
  "sn": 1,
  "art.sn": 1,
  "com.sn": 1,
  "edu.sn": 1,
  "gouv.sn": 1,
  "org.sn": 1,
  "perso.sn": 1,
  "univ.sn": 1,
  "so": 1,
  "com.so": 1,
  "edu.so": 1,
  "gov.so": 1,
  "me.so": 1,
  "net.so": 1,
  "org.so": 1,
  "sr": 1,
  "ss": 1,
  "biz.ss": 1,
  "com.ss": 1,
  "edu.ss": 1,
  "gov.ss": 1,
  "me.ss": 1,
  "net.ss": 1,
  "org.ss": 1,
  "sch.ss": 1,
  "st": 1,
  "co.st": 1,
  "com.st": 1,
  "consulado.st": 1,
  "edu.st": 1,
  "embaixada.st": 1,
  "mil.st": 1,
  "net.st": 1,
  "org.st": 1,
  "principe.st": 1,
  "saotome.st": 1,
  "store.st": 1,
  "su": 1,
  "sv": 1,
  "com.sv": 1,
  "edu.sv": 1,
  "gob.sv": 1,
  "org.sv": 1,
  "red.sv": 1,
  "sx": 1,
  "gov.sx": 1,
  "sy": 1,
  "edu.sy": 1,
  "gov.sy": 1,
  "net.sy": 1,
  "mil.sy": 1,
  "com.sy": 1,
  "org.sy": 1,
  "sz": 1,
  "co.sz": 1,
  "ac.sz": 1,
  "org.sz": 1,
  "tc": 1,
  "td": 1,
  "tel": 1,
  "tf": 1,
  "tg": 1,
  "th": 1,
  "ac.th": 1,
  "co.th": 1,
  "go.th": 1,
  "in.th": 1,
  "mi.th": 1,
  "net.th": 1,
  "or.th": 1,
  "tj": 1,
  "ac.tj": 1,
  "biz.tj": 1,
  "co.tj": 1,
  "com.tj": 1,
  "edu.tj": 1,
  "go.tj": 1,
  "gov.tj": 1,
  "int.tj": 1,
  "mil.tj": 1,
  "name.tj": 1,
  "net.tj": 1,
  "nic.tj": 1,
  "org.tj": 1,
  "test.tj": 1,
  "web.tj": 1,
  "tk": 1,
  "tl": 1,
  "gov.tl": 1,
  "tm": 1,
  "com.tm": 1,
  "co.tm": 1,
  "org.tm": 1,
  "net.tm": 1,
  "nom.tm": 1,
  "gov.tm": 1,
  "mil.tm": 1,
  "edu.tm": 1,
  "tn": 1,
  "com.tn": 1,
  "ens.tn": 1,
  "fin.tn": 1,
  "gov.tn": 1,
  "ind.tn": 1,
  "info.tn": 1,
  "intl.tn": 1,
  "mincom.tn": 1,
  "nat.tn": 1,
  "net.tn": 1,
  "org.tn": 1,
  "perso.tn": 1,
  "tourism.tn": 1,
  "to": 1,
  "com.to": 1,
  "gov.to": 1,
  "net.to": 1,
  "org.to": 1,
  "edu.to": 1,
  "mil.to": 1,
  "tr": 1,
  "av.tr": 1,
  "bbs.tr": 1,
  "bel.tr": 1,
  "biz.tr": 1,
  "com.tr": 1,
  "dr.tr": 1,
  "edu.tr": 1,
  "gen.tr": 1,
  "gov.tr": 1,
  "info.tr": 1,
  "mil.tr": 1,
  "k12.tr": 1,
  "kep.tr": 1,
  "name.tr": 1,
  "net.tr": 1,
  "org.tr": 1,
  "pol.tr": 1,
  "tel.tr": 1,
  "tsk.tr": 1,
  "tv.tr": 1,
  "web.tr": 1,
  "nc.tr": 1,
  "gov.nc.tr": 1,
  "tt": 1,
  "co.tt": 1,
  "com.tt": 1,
  "org.tt": 1,
  "net.tt": 1,
  "biz.tt": 1,
  "info.tt": 1,
  "pro.tt": 1,
  "int.tt": 1,
  "coop.tt": 1,
  "jobs.tt": 1,
  "mobi.tt": 1,
  "travel.tt": 1,
  "museum.tt": 1,
  "aero.tt": 1,
  "name.tt": 1,
  "gov.tt": 1,
  "edu.tt": 1,
  "tv": 1,
  "tw": 1,
  "edu.tw": 1,
  "gov.tw": 1,
  "mil.tw": 1,
  "com.tw": 1,
  "net.tw": 1,
  "org.tw": 1,
  "idv.tw": 1,
  "game.tw": 1,
  "ebiz.tw": 1,
  "club.tw": 1,
  "xn--zf0ao64a.tw": 1,
  "xn--uc0atv.tw": 1,
  "xn--czrw28b.tw": 1,
  "tz": 1,
  "ac.tz": 1,
  "co.tz": 1,
  "go.tz": 1,
  "hotel.tz": 1,
  "info.tz": 1,
  "me.tz": 1,
  "mil.tz": 1,
  "mobi.tz": 1,
  "ne.tz": 1,
  "or.tz": 1,
  "sc.tz": 1,
  "tv.tz": 1,
  "ua": 1,
  "com.ua": 1,
  "edu.ua": 1,
  "gov.ua": 1,
  "in.ua": 1,
  "net.ua": 1,
  "org.ua": 1,
  "cherkassy.ua": 1,
  "cherkasy.ua": 1,
  "chernigov.ua": 1,
  "chernihiv.ua": 1,
  "chernivtsi.ua": 1,
  "chernovtsy.ua": 1,
  "ck.ua": 1,
  "cn.ua": 1,
  "cr.ua": 1,
  "crimea.ua": 1,
  "cv.ua": 1,
  "dn.ua": 1,
  "dnepropetrovsk.ua": 1,
  "dnipropetrovsk.ua": 1,
  "donetsk.ua": 1,
  "dp.ua": 1,
  "if.ua": 1,
  "ivano-frankivsk.ua": 1,
  "kh.ua": 1,
  "kharkiv.ua": 1,
  "kharkov.ua": 1,
  "kherson.ua": 1,
  "khmelnitskiy.ua": 1,
  "khmelnytskyi.ua": 1,
  "kiev.ua": 1,
  "kirovograd.ua": 1,
  "km.ua": 1,
  "kr.ua": 1,
  "kropyvnytskyi.ua": 1,
  "krym.ua": 1,
  "ks.ua": 1,
  "kv.ua": 1,
  "kyiv.ua": 1,
  "lg.ua": 1,
  "lt.ua": 1,
  "lugansk.ua": 1,
  "luhansk.ua": 1,
  "lutsk.ua": 1,
  "lv.ua": 1,
  "lviv.ua": 1,
  "mk.ua": 1,
  "mykolaiv.ua": 1,
  "nikolaev.ua": 1,
  "od.ua": 1,
  "odesa.ua": 1,
  "odessa.ua": 1,
  "pl.ua": 1,
  "poltava.ua": 1,
  "rivne.ua": 1,
  "rovno.ua": 1,
  "rv.ua": 1,
  "sb.ua": 1,
  "sebastopol.ua": 1,
  "sevastopol.ua": 1,
  "sm.ua": 1,
  "sumy.ua": 1,
  "te.ua": 1,
  "ternopil.ua": 1,
  "uz.ua": 1,
  "uzhgorod.ua": 1,
  "uzhhorod.ua": 1,
  "vinnica.ua": 1,
  "vinnytsia.ua": 1,
  "vn.ua": 1,
  "volyn.ua": 1,
  "yalta.ua": 1,
  "zakarpattia.ua": 1,
  "zaporizhzhe.ua": 1,
  "zaporizhzhia.ua": 1,
  "zhitomir.ua": 1,
  "zhytomyr.ua": 1,
  "zp.ua": 1,
  "zt.ua": 1,
  "ug": 1,
  "co.ug": 1,
  "or.ug": 1,
  "ac.ug": 1,
  "sc.ug": 1,
  "go.ug": 1,
  "ne.ug": 1,
  "com.ug": 1,
  "org.ug": 1,
  "uk": 1,
  "ac.uk": 1,
  "co.uk": 1,
  "gov.uk": 1,
  "ltd.uk": 1,
  "me.uk": 1,
  "net.uk": 1,
  "nhs.uk": 1,
  "org.uk": 1,
  "plc.uk": 1,
  "police.uk": 1,
  "sch.uk": 2,
  "us": 1,
  "dni.us": 1,
  "fed.us": 1,
  "isa.us": 1,
  "kids.us": 1,
  "nsn.us": 1,
  "ak.us": 1,
  "al.us": 1,
  "ar.us": 1,
  "as.us": 1,
  "az.us": 1,
  "ca.us": 1,
  "co.us": 1,
  "ct.us": 1,
  "dc.us": 1,
  "de.us": 1,
  "fl.us": 1,
  "ga.us": 1,
  "gu.us": 1,
  "hi.us": 1,
  "ia.us": 1,
  "id.us": 1,
  "il.us": 1,
  "in.us": 1,
  "ks.us": 1,
  "ky.us": 1,
  "la.us": 1,
  "ma.us": 1,
  "md.us": 1,
  "me.us": 1,
  "mi.us": 1,
  "mn.us": 1,
  "mo.us": 1,
  "ms.us": 1,
  "mt.us": 1,
  "nc.us": 1,
  "nd.us": 1,
  "ne.us": 1,
  "nh.us": 1,
  "nj.us": 1,
  "nm.us": 1,
  "nv.us": 1,
  "ny.us": 1,
  "oh.us": 1,
  "ok.us": 1,
  "or.us": 1,
  "pa.us": 1,
  "pr.us": 1,
  "ri.us": 1,
  "sc.us": 1,
  "sd.us": 1,
  "tn.us": 1,
  "tx.us": 1,
  "ut.us": 1,
  "vi.us": 1,
  "vt.us": 1,
  "va.us": 1,
  "wa.us": 1,
  "wi.us": 1,
  "wv.us": 1,
  "wy.us": 1,
  "k12.ak.us": 1,
  "k12.al.us": 1,
  "k12.ar.us": 1,
  "k12.as.us": 1,
  "k12.az.us": 1,
  "k12.ca.us": 1,
  "k12.co.us": 1,
  "k12.ct.us": 1,
  "k12.dc.us": 1,
  "k12.fl.us": 1,
  "k12.ga.us": 1,
  "k12.gu.us": 1,
  "k12.ia.us": 1,
  "k12.id.us": 1,
  "k12.il.us": 1,
  "k12.in.us": 1,
  "k12.ks.us": 1,
  "k12.ky.us": 1,
  "k12.la.us": 1,
  "k12.ma.us": 1,
  "k12.md.us": 1,
  "k12.me.us": 1,
  "k12.mi.us": 1,
  "k12.mn.us": 1,
  "k12.mo.us": 1,
  "k12.ms.us": 1,
  "k12.mt.us": 1,
  "k12.nc.us": 1,
  "k12.ne.us": 1,
  "k12.nh.us": 1,
  "k12.nj.us": 1,
  "k12.nm.us": 1,
  "k12.nv.us": 1,
  "k12.ny.us": 1,
  "k12.oh.us": 1,
  "k12.ok.us": 1,
  "k12.or.us": 1,
  "k12.pa.us": 1,
  "k12.pr.us": 1,
  "k12.sc.us": 1,
  "k12.tn.us": 1,
  "k12.tx.us": 1,
  "k12.ut.us": 1,
  "k12.vi.us": 1,
  "k12.vt.us": 1,
  "k12.va.us": 1,
  "k12.wa.us": 1,
  "k12.wi.us": 1,
  "k12.wy.us": 1,
  "cc.ak.us": 1,
  "cc.al.us": 1,
  "cc.ar.us": 1,
  "cc.as.us": 1,
  "cc.az.us": 1,
  "cc.ca.us": 1,
  "cc.co.us": 1,
  "cc.ct.us": 1,
  "cc.dc.us": 1,
  "cc.de.us": 1,
  "cc.fl.us": 1,
  "cc.ga.us": 1,
  "cc.gu.us": 1,
  "cc.hi.us": 1,
  "cc.ia.us": 1,
  "cc.id.us": 1,
  "cc.il.us": 1,
  "cc.in.us": 1,
  "cc.ks.us": 1,
  "cc.ky.us": 1,
  "cc.la.us": 1,
  "cc.ma.us": 1,
  "cc.md.us": 1,
  "cc.me.us": 1,
  "cc.mi.us": 1,
  "cc.mn.us": 1,
  "cc.mo.us": 1,
  "cc.ms.us": 1,
  "cc.mt.us": 1,
  "cc.nc.us": 1,
  "cc.nd.us": 1,
  "cc.ne.us": 1,
  "cc.nh.us": 1,
  "cc.nj.us": 1,
  "cc.nm.us": 1,
  "cc.nv.us": 1,
  "cc.ny.us": 1,
  "cc.oh.us": 1,
  "cc.ok.us": 1,
  "cc.or.us": 1,
  "cc.pa.us": 1,
  "cc.pr.us": 1,
  "cc.ri.us": 1,
  "cc.sc.us": 1,
  "cc.sd.us": 1,
  "cc.tn.us": 1,
  "cc.tx.us": 1,
  "cc.ut.us": 1,
  "cc.vi.us": 1,
  "cc.vt.us": 1,
  "cc.va.us": 1,
  "cc.wa.us": 1,
  "cc.wi.us": 1,
  "cc.wv.us": 1,
  "cc.wy.us": 1,
  "lib.ak.us": 1,
  "lib.al.us": 1,
  "lib.ar.us": 1,
  "lib.as.us": 1,
  "lib.az.us": 1,
  "lib.ca.us": 1,
  "lib.co.us": 1,
  "lib.ct.us": 1,
  "lib.dc.us": 1,
  "lib.fl.us": 1,
  "lib.ga.us": 1,
  "lib.gu.us": 1,
  "lib.hi.us": 1,
  "lib.ia.us": 1,
  "lib.id.us": 1,
  "lib.il.us": 1,
  "lib.in.us": 1,
  "lib.ks.us": 1,
  "lib.ky.us": 1,
  "lib.la.us": 1,
  "lib.ma.us": 1,
  "lib.md.us": 1,
  "lib.me.us": 1,
  "lib.mi.us": 1,
  "lib.mn.us": 1,
  "lib.mo.us": 1,
  "lib.ms.us": 1,
  "lib.mt.us": 1,
  "lib.nc.us": 1,
  "lib.nd.us": 1,
  "lib.ne.us": 1,
  "lib.nh.us": 1,
  "lib.nj.us": 1,
  "lib.nm.us": 1,
  "lib.nv.us": 1,
  "lib.ny.us": 1,
  "lib.oh.us": 1,
  "lib.ok.us": 1,
  "lib.or.us": 1,
  "lib.pa.us": 1,
  "lib.pr.us": 1,
  "lib.ri.us": 1,
  "lib.sc.us": 1,
  "lib.sd.us": 1,
  "lib.tn.us": 1,
  "lib.tx.us": 1,
  "lib.ut.us": 1,
  "lib.vi.us": 1,
  "lib.vt.us": 1,
  "lib.va.us": 1,
  "lib.wa.us": 1,
  "lib.wi.us": 1,
  "lib.wy.us": 1,
  "pvt.k12.ma.us": 1,
  "chtr.k12.ma.us": 1,
  "paroch.k12.ma.us": 1,
  "ann-arbor.mi.us": 1,
  "cog.mi.us": 1,
  "dst.mi.us": 1,
  "eaton.mi.us": 1,
  "gen.mi.us": 1,
  "mus.mi.us": 1,
  "tec.mi.us": 1,
  "washtenaw.mi.us": 1,
  "uy": 1,
  "com.uy": 1,
  "edu.uy": 1,
  "gub.uy": 1,
  "mil.uy": 1,
  "net.uy": 1,
  "org.uy": 1,
  "uz": 1,
  "co.uz": 1,
  "com.uz": 1,
  "net.uz": 1,
  "org.uz": 1,
  "va": 1,
  "vc": 1,
  "com.vc": 1,
  "net.vc": 1,
  "org.vc": 1,
  "gov.vc": 1,
  "mil.vc": 1,
  "edu.vc": 1,
  "ve": 1,
  "arts.ve": 1,
  "bib.ve": 1,
  "co.ve": 1,
  "com.ve": 1,
  "e12.ve": 1,
  "edu.ve": 1,
  "firm.ve": 1,
  "gob.ve": 1,
  "gov.ve": 1,
  "info.ve": 1,
  "int.ve": 1,
  "mil.ve": 1,
  "net.ve": 1,
  "nom.ve": 1,
  "org.ve": 1,
  "rar.ve": 1,
  "rec.ve": 1,
  "store.ve": 1,
  "tec.ve": 1,
  "web.ve": 1,
  "vg": 1,
  "vi": 1,
  "co.vi": 1,
  "com.vi": 1,
  "k12.vi": 1,
  "net.vi": 1,
  "org.vi": 1,
  "vn": 1,
  "ac.vn": 1,
  "ai.vn": 1,
  "biz.vn": 1,
  "com.vn": 1,
  "edu.vn": 1,
  "gov.vn": 1,
  "health.vn": 1,
  "id.vn": 1,
  "info.vn": 1,
  "int.vn": 1,
  "io.vn": 1,
  "name.vn": 1,
  "net.vn": 1,
  "org.vn": 1,
  "pro.vn": 1,
  "angiang.vn": 1,
  "bacgiang.vn": 1,
  "backan.vn": 1,
  "baclieu.vn": 1,
  "bacninh.vn": 1,
  "baria-vungtau.vn": 1,
  "bentre.vn": 1,
  "binhdinh.vn": 1,
  "binhduong.vn": 1,
  "binhphuoc.vn": 1,
  "binhthuan.vn": 1,
  "camau.vn": 1,
  "cantho.vn": 1,
  "caobang.vn": 1,
  "daklak.vn": 1,
  "daknong.vn": 1,
  "danang.vn": 1,
  "dienbien.vn": 1,
  "dongnai.vn": 1,
  "dongthap.vn": 1,
  "gialai.vn": 1,
  "hagiang.vn": 1,
  "haiduong.vn": 1,
  "haiphong.vn": 1,
  "hanam.vn": 1,
  "hanoi.vn": 1,
  "hatinh.vn": 1,
  "haugiang.vn": 1,
  "hoabinh.vn": 1,
  "hungyen.vn": 1,
  "khanhhoa.vn": 1,
  "kiengiang.vn": 1,
  "kontum.vn": 1,
  "laichau.vn": 1,
  "lamdong.vn": 1,
  "langson.vn": 1,
  "laocai.vn": 1,
  "longan.vn": 1,
  "namdinh.vn": 1,
  "nghean.vn": 1,
  "ninhbinh.vn": 1,
  "ninhthuan.vn": 1,
  "phutho.vn": 1,
  "phuyen.vn": 1,
  "quangbinh.vn": 1,
  "quangnam.vn": 1,
  "quangngai.vn": 1,
  "quangninh.vn": 1,
  "quangtri.vn": 1,
  "soctrang.vn": 1,
  "sonla.vn": 1,
  "tayninh.vn": 1,
  "thaibinh.vn": 1,
  "thainguyen.vn": 1,
  "thanhhoa.vn": 1,
  "thanhphohochiminh.vn": 1,
  "thuathienhue.vn": 1,
  "tiengiang.vn": 1,
  "travinh.vn": 1,
  "tuyenquang.vn": 1,
  "vinhlong.vn": 1,
  "vinhphuc.vn": 1,
  "yenbai.vn": 1,
  "vu": 1,
  "com.vu": 1,
  "edu.vu": 1,
  "net.vu": 1,
  "org.vu": 1,
  "wf": 1,
  "ws": 1,
  "com.ws": 1,
  "net.ws": 1,
  "org.ws": 1,
  "gov.ws": 1,
  "edu.ws": 1,
  "yt": 1,
  "xn--mgbaam7a8h": 1,
  "xn--y9a3aq": 1,
  "xn--54b7fta0cc": 1,
  "xn--90ae": 1,
  "xn--mgbcpq6gpa1a": 1,
  "xn--90ais": 1,
  "xn--fiqs8s": 1,
  "xn--fiqz9s": 1,
  "xn--lgbbat1ad8j": 1,
  "xn--wgbh1c": 1,
  "xn--e1a4c": 1,
  "xn--qxa6a": 1,
  "xn--mgbah1a3hjkrd": 1,
  "xn--node": 1,
  "xn--qxam": 1,
  "xn--j6w193g": 1,
  "xn--55qx5d.xn--j6w193g": 1,
  "xn--wcvs22d.xn--j6w193g": 1,
  "xn--mxtq1m.xn--j6w193g": 1,
  "xn--gmqw5a.xn--j6w193g": 1,
  "xn--od0alg.xn--j6w193g": 1,
  "xn--uc0atv.xn--j6w193g": 1,
  "xn--2scrj9c": 1,
  "xn--3hcrj9c": 1,
  "xn--45br5cyl": 1,
  "xn--h2breg3eve": 1,
  "xn--h2brj9c8c": 1,
  "xn--mgbgu82a": 1,
  "xn--rvc1e0am3e": 1,
  "xn--h2brj9c": 1,
  "xn--mgbbh1a": 1,
  "xn--mgbbh1a71e": 1,
  "xn--fpcrj9c3d": 1,
  "xn--gecrj9c": 1,
  "xn--s9brj9c": 1,
  "xn--45brj9c": 1,
  "xn--xkc2dl3a5ee0h": 1,
  "xn--mgba3a4f16a": 1,
  "xn--mgba3a4fra": 1,
  "xn--mgbtx2b": 1,
  "xn--mgbayh7gpa": 1,
  "xn--3e0b707e": 1,
  "xn--80ao21a": 1,
  "xn--q7ce6a": 1,
  "xn--fzc2c9e2c": 1,
  "xn--xkc2al3hye2a": 1,
  "xn--mgbc0a9azcg": 1,
  "xn--d1alf": 1,
  "xn--l1acc": 1,
  "xn--mix891f": 1,
  "xn--mix082f": 1,
  "xn--mgbx4cd0ab": 1,
  "xn--mgb9awbf": 1,
  "xn--mgbai9azgqp6j": 1,
  "xn--mgbai9a5eva00b": 1,
  "xn--ygbi2ammx": 1,
  "xn--90a3ac": 1,
  "xn--o1ac.xn--90a3ac": 1,
  "xn--c1avg.xn--90a3ac": 1,
  "xn--90azh.xn--90a3ac": 1,
  "xn--d1at.xn--90a3ac": 1,
  "xn--o1ach.xn--90a3ac": 1,
  "xn--80au.xn--90a3ac": 1,
  "xn--p1ai": 1,
  "xn--wgbl6a": 1,
  "xn--mgberp4a5d4ar": 1,
  "xn--mgberp4a5d4a87g": 1,
  "xn--mgbqly7c0a67fbc": 1,
  "xn--mgbqly7cvafr": 1,
  "xn--mgbpl2fh": 1,
  "xn--yfro4i67o": 1,
  "xn--clchc0ea0b2g2a9gcd": 1,
  "xn--ogbpf8fl": 1,
  "xn--mgbtf8fl": 1,
  "xn--o3cw4h": 1,
  "xn--12c1fe0br.xn--o3cw4h": 1,
  "xn--12co0c3b4eva.xn--o3cw4h": 1,
  "xn--h3cuzk1di.xn--o3cw4h": 1,
  "xn--o3cyx2a.xn--o3cw4h": 1,
  "xn--m3ch0j3a.xn--o3cw4h": 1,
  "xn--12cfi8ixb8l.xn--o3cw4h": 1,
  "xn--pgbs0dh": 1,
  "xn--kpry57d": 1,
  "xn--kprw13d": 1,
  "xn--nnx388a": 1,
  "xn--j1amh": 1,
  "xn--mgb2ddes": 1,
  "xxx": 1,
  "ye": 1,
  "com.ye": 1,
  "edu.ye": 1,
  "gov.ye": 1,
  "net.ye": 1,
  "mil.ye": 1,
  "org.ye": 1,
  "ac.za": 1,
  "agric.za": 1,
  "alt.za": 1,
  "co.za": 1,
  "edu.za": 1,
  "gov.za": 1,
  "grondar.za": 1,
  "law.za": 1,
  "mil.za": 1,
  "net.za": 1,
  "ngo.za": 1,
  "nic.za": 1,
  "nis.za": 1,
  "nom.za": 1,
  "org.za": 1,
  "school.za": 1,
  "tm.za": 1,
  "web.za": 1,
  "zm": 1,
  "ac.zm": 1,
  "biz.zm": 1,
  "co.zm": 1,
  "com.zm": 1,
  "edu.zm": 1,
  "gov.zm": 1,
  "info.zm": 1,
  "mil.zm": 1,
  "net.zm": 1,
  "org.zm": 1,
  "sch.zm": 1,
  "zw": 1,
  "ac.zw": 1,
  "co.zw": 1,
  "gov.zw": 1,
  "mil.zw": 1,
  "org.zw": 1,
  "aaa": 1,
  "aarp": 1,
  "abb": 1,
  "abbott": 1,
  "abbvie": 1,
  "abc": 1,
  "able": 1,
  "abogado": 1,
  "abudhabi": 1,
  "academy": 1,
  "accenture": 1,
  "accountant": 1,
  "accountants": 1,
  "aco": 1,
  "actor": 1,
  "ads": 1,
  "adult": 1,
  "aeg": 1,
  "aetna": 1,
  "afl": 1,
  "africa": 1,
  "agakhan": 1,
  "agency": 1,
  "aig": 1,
  "airbus": 1,
  "airforce": 1,
  "airtel": 1,
  "akdn": 1,
  "alibaba": 1,
  "alipay": 1,
  "allfinanz": 1,
  "allstate": 1,
  "ally": 1,
  "alsace": 1,
  "alstom": 1,
  "amazon": 1,
  "americanexpress": 1,
  "americanfamily": 1,
  "amex": 1,
  "amfam": 1,
  "amica": 1,
  "amsterdam": 1,
  "analytics": 1,
  "android": 1,
  "anquan": 1,
  "anz": 1,
  "aol": 1,
  "apartments": 1,
  "app": 1,
  "apple": 1,
  "aquarelle": 1,
  "arab": 1,
  "aramco": 1,
  "archi": 1,
  "army": 1,
  "art": 1,
  "arte": 1,
  "asda": 1,
  "associates": 1,
  "athleta": 1,
  "attorney": 1,
  "auction": 1,
  "audi": 1,
  "audible": 1,
  "audio": 1,
  "auspost": 1,
  "author": 1,
  "auto": 1,
  "autos": 1,
  "avianca": 1,
  "aws": 1,
  "axa": 1,
  "azure": 1,
  "baby": 1,
  "baidu": 1,
  "banamex": 1,
  "bananarepublic": 1,
  "band": 1,
  "bank": 1,
  "bar": 1,
  "barcelona": 1,
  "barclaycard": 1,
  "barclays": 1,
  "barefoot": 1,
  "bargains": 1,
  "baseball": 1,
  "basketball": 1,
  "bauhaus": 1,
  "bayern": 1,
  "bbc": 1,
  "bbt": 1,
  "bbva": 1,
  "bcg": 1,
  "bcn": 1,
  "beats": 1,
  "beauty": 1,
  "beer": 1,
  "bentley": 1,
  "berlin": 1,
  "best": 1,
  "bestbuy": 1,
  "bet": 1,
  "bharti": 1,
  "bible": 1,
  "bid": 1,
  "bike": 1,
  "bing": 1,
  "bingo": 1,
  "bio": 1,
  "black": 1,
  "blackfriday": 1,
  "blockbuster": 1,
  "blog": 1,
  "bloomberg": 1,
  "blue": 1,
  "bms": 1,
  "bmw": 1,
  "bnpparibas": 1,
  "boats": 1,
  "boehringer": 1,
  "bofa": 1,
  "bom": 1,
  "bond": 1,
  "boo": 1,
  "book": 1,
  "booking": 1,
  "bosch": 1,
  "bostik": 1,
  "boston": 1,
  "bot": 1,
  "boutique": 1,
  "box": 1,
  "bradesco": 1,
  "bridgestone": 1,
  "broadway": 1,
  "broker": 1,
  "brother": 1,
  "brussels": 1,
  "build": 1,
  "builders": 1,
  "business": 1,
  "buy": 1,
  "buzz": 1,
  "bzh": 1,
  "cab": 1,
  "cafe": 1,
  "cal": 1,
  "call": 1,
  "calvinklein": 1,
  "cam": 1,
  "camera": 1,
  "camp": 1,
  "canon": 1,
  "capetown": 1,
  "capital": 1,
  "capitalone": 1,
  "car": 1,
  "caravan": 1,
  "cards": 1,
  "care": 1,
  "career": 1,
  "careers": 1,
  "cars": 1,
  "casa": 1,
  "case": 1,
  "cash": 1,
  "casino": 1,
  "catering": 1,
  "catholic": 1,
  "cba": 1,
  "cbn": 1,
  "cbre": 1,
  "center": 1,
  "ceo": 1,
  "cern": 1,
  "cfa": 1,
  "cfd": 1,
  "chanel": 1,
  "channel": 1,
  "charity": 1,
  "chase": 1,
  "chat": 1,
  "cheap": 1,
  "chintai": 1,
  "christmas": 1,
  "chrome": 1,
  "church": 1,
  "cipriani": 1,
  "circle": 1,
  "cisco": 1,
  "citadel": 1,
  "citi": 1,
  "citic": 1,
  "city": 1,
  "claims": 1,
  "cleaning": 1,
  "click": 1,
  "clinic": 1,
  "clinique": 1,
  "clothing": 1,
  "cloud": 1,
  "club": 1,
  "clubmed": 1,
  "coach": 1,
  "codes": 1,
  "coffee": 1,
  "college": 1,
  "cologne": 1,
  "comcast": 1,
  "commbank": 1,
  "community": 1,
  "company": 1,
  "compare": 1,
  "computer": 1,
  "comsec": 1,
  "condos": 1,
  "construction": 1,
  "consulting": 1,
  "contact": 1,
  "contractors": 1,
  "cooking": 1,
  "cool": 1,
  "corsica": 1,
  "country": 1,
  "coupon": 1,
  "coupons": 1,
  "courses": 1,
  "cpa": 1,
  "credit": 1,
  "creditcard": 1,
  "creditunion": 1,
  "cricket": 1,
  "crown": 1,
  "crs": 1,
  "cruise": 1,
  "cruises": 1,
  "cuisinella": 1,
  "cymru": 1,
  "cyou": 1,
  "dabur": 1,
  "dad": 1,
  "dance": 1,
  "data": 1,
  "date": 1,
  "dating": 1,
  "datsun": 1,
  "day": 1,
  "dclk": 1,
  "dds": 1,
  "deal": 1,
  "dealer": 1,
  "deals": 1,
  "degree": 1,
  "delivery": 1,
  "dell": 1,
  "deloitte": 1,
  "delta": 1,
  "democrat": 1,
  "dental": 1,
  "dentist": 1,
  "desi": 1,
  "design": 1,
  "dev": 1,
  "dhl": 1,
  "diamonds": 1,
  "diet": 1,
  "digital": 1,
  "direct": 1,
  "directory": 1,
  "discount": 1,
  "discover": 1,
  "dish": 1,
  "diy": 1,
  "dnp": 1,
  "docs": 1,
  "doctor": 1,
  "dog": 1,
  "domains": 1,
  "dot": 1,
  "download": 1,
  "drive": 1,
  "dtv": 1,
  "dubai": 1,
  "dunlop": 1,
  "dupont": 1,
  "durban": 1,
  "dvag": 1,
  "dvr": 1,
  "earth": 1,
  "eat": 1,
  "eco": 1,
  "edeka": 1,
  "education": 1,
  "email": 1,
  "emerck": 1,
  "energy": 1,
  "engineer": 1,
  "engineering": 1,
  "enterprises": 1,
  "epson": 1,
  "equipment": 1,
  "ericsson": 1,
  "erni": 1,
  "esq": 1,
  "estate": 1,
  "eurovision": 1,
  "eus": 1,
  "events": 1,
  "exchange": 1,
  "expert": 1,
  "exposed": 1,
  "express": 1,
  "extraspace": 1,
  "fage": 1,
  "fail": 1,
  "fairwinds": 1,
  "faith": 1,
  "family": 1,
  "fan": 1,
  "fans": 1,
  "farm": 1,
  "farmers": 1,
  "fashion": 1,
  "fast": 1,
  "fedex": 1,
  "feedback": 1,
  "ferrari": 1,
  "ferrero": 1,
  "fidelity": 1,
  "fido": 1,
  "film": 1,
  "final": 1,
  "finance": 1,
  "financial": 1,
  "fire": 1,
  "firestone": 1,
  "firmdale": 1,
  "fish": 1,
  "fishing": 1,
  "fit": 1,
  "fitness": 1,
  "flickr": 1,
  "flights": 1,
  "flir": 1,
  "florist": 1,
  "flowers": 1,
  "fly": 1,
  "foo": 1,
  "food": 1,
  "football": 1,
  "ford": 1,
  "forex": 1,
  "forsale": 1,
  "forum": 1,
  "foundation": 1,
  "fox": 1,
  "free": 1,
  "fresenius": 1,
  "frl": 1,
  "frogans": 1,
  "frontier": 1,
  "ftr": 1,
  "fujitsu": 1,
  "fun": 1,
  "fund": 1,
  "furniture": 1,
  "futbol": 1,
  "fyi": 1,
  "gal": 1,
  "gallery": 1,
  "gallo": 1,
  "gallup": 1,
  "game": 1,
  "games": 1,
  "gap": 1,
  "garden": 1,
  "gay": 1,
  "gbiz": 1,
  "gdn": 1,
  "gea": 1,
  "gent": 1,
  "genting": 1,
  "george": 1,
  "ggee": 1,
  "gift": 1,
  "gifts": 1,
  "gives": 1,
  "giving": 1,
  "glass": 1,
  "gle": 1,
  "global": 1,
  "globo": 1,
  "gmail": 1,
  "gmbh": 1,
  "gmo": 1,
  "gmx": 1,
  "godaddy": 1,
  "gold": 1,
  "goldpoint": 1,
  "golf": 1,
  "goo": 1,
  "goodyear": 1,
  "goog": 1,
  "google": 1,
  "gop": 1,
  "got": 1,
  "grainger": 1,
  "graphics": 1,
  "gratis": 1,
  "green": 1,
  "gripe": 1,
  "grocery": 1,
  "group": 1,
  "guardian": 1,
  "gucci": 1,
  "guge": 1,
  "guide": 1,
  "guitars": 1,
  "guru": 1,
  "hair": 1,
  "hamburg": 1,
  "hangout": 1,
  "haus": 1,
  "hbo": 1,
  "hdfc": 1,
  "hdfcbank": 1,
  "health": 1,
  "healthcare": 1,
  "help": 1,
  "helsinki": 1,
  "here": 1,
  "hermes": 1,
  "hiphop": 1,
  "hisamitsu": 1,
  "hitachi": 1,
  "hiv": 1,
  "hkt": 1,
  "hockey": 1,
  "holdings": 1,
  "holiday": 1,
  "homedepot": 1,
  "homegoods": 1,
  "homes": 1,
  "homesense": 1,
  "honda": 1,
  "horse": 1,
  "hospital": 1,
  "host": 1,
  "hosting": 1,
  "hot": 1,
  "hotels": 1,
  "hotmail": 1,
  "house": 1,
  "how": 1,
  "hsbc": 1,
  "hughes": 1,
  "hyatt": 1,
  "hyundai": 1,
  "ibm": 1,
  "icbc": 1,
  "ice": 1,
  "icu": 1,
  "ieee": 1,
  "ifm": 1,
  "ikano": 1,
  "imamat": 1,
  "imdb": 1,
  "immo": 1,
  "immobilien": 1,
  "inc": 1,
  "industries": 1,
  "infiniti": 1,
  "ing": 1,
  "ink": 1,
  "institute": 1,
  "insurance": 1,
  "insure": 1,
  "international": 1,
  "intuit": 1,
  "investments": 1,
  "ipiranga": 1,
  "irish": 1,
  "ismaili": 1,
  "ist": 1,
  "istanbul": 1,
  "itau": 1,
  "itv": 1,
  "jaguar": 1,
  "java": 1,
  "jcb": 1,
  "jeep": 1,
  "jetzt": 1,
  "jewelry": 1,
  "jio": 1,
  "jll": 1,
  "jmp": 1,
  "jnj": 1,
  "joburg": 1,
  "jot": 1,
  "joy": 1,
  "jpmorgan": 1,
  "jprs": 1,
  "juegos": 1,
  "juniper": 1,
  "kaufen": 1,
  "kddi": 1,
  "kerryhotels": 1,
  "kerrylogistics": 1,
  "kerryproperties": 1,
  "kfh": 1,
  "kia": 1,
  "kids": 1,
  "kim": 1,
  "kindle": 1,
  "kitchen": 1,
  "kiwi": 1,
  "koeln": 1,
  "komatsu": 1,
  "kosher": 1,
  "kpmg": 1,
  "kpn": 1,
  "krd": 1,
  "kred": 1,
  "kuokgroup": 1,
  "kyoto": 1,
  "lacaixa": 1,
  "lamborghini": 1,
  "lamer": 1,
  "lancaster": 1,
  "land": 1,
  "landrover": 1,
  "lanxess": 1,
  "lasalle": 1,
  "lat": 1,
  "latino": 1,
  "latrobe": 1,
  "law": 1,
  "lawyer": 1,
  "lds": 1,
  "lease": 1,
  "leclerc": 1,
  "lefrak": 1,
  "legal": 1,
  "lego": 1,
  "lexus": 1,
  "lgbt": 1,
  "lidl": 1,
  "life": 1,
  "lifeinsurance": 1,
  "lifestyle": 1,
  "lighting": 1,
  "like": 1,
  "lilly": 1,
  "limited": 1,
  "limo": 1,
  "lincoln": 1,
  "link": 1,
  "lipsy": 1,
  "live": 1,
  "living": 1,
  "llc": 1,
  "llp": 1,
  "loan": 1,
  "loans": 1,
  "locker": 1,
  "locus": 1,
  "lol": 1,
  "london": 1,
  "lotte": 1,
  "lotto": 1,
  "love": 1,
  "lpl": 1,
  "lplfinancial": 1,
  "ltd": 1,
  "ltda": 1,
  "lundbeck": 1,
  "luxe": 1,
  "luxury": 1,
  "madrid": 1,
  "maif": 1,
  "maison": 1,
  "makeup": 1,
  "man": 1,
  "management": 1,
  "mango": 1,
  "map": 1,
  "market": 1,
  "marketing": 1,
  "markets": 1,
  "marriott": 1,
  "marshalls": 1,
  "mattel": 1,
  "mba": 1,
  "mckinsey": 1,
  "med": 1,
  "media": 1,
  "meet": 1,
  "melbourne": 1,
  "meme": 1,
  "memorial": 1,
  "men": 1,
  "menu": 1,
  "merckmsd": 1,
  "miami": 1,
  "microsoft": 1,
  "mini": 1,
  "mint": 1,
  "mit": 1,
  "mitsubishi": 1,
  "mlb": 1,
  "mls": 1,
  "mma": 1,
  "mobile": 1,
  "moda": 1,
  "moe": 1,
  "moi": 1,
  "mom": 1,
  "monash": 1,
  "money": 1,
  "monster": 1,
  "mormon": 1,
  "mortgage": 1,
  "moscow": 1,
  "moto": 1,
  "motorcycles": 1,
  "mov": 1,
  "movie": 1,
  "msd": 1,
  "mtn": 1,
  "mtr": 1,
  "music": 1,
  "nab": 1,
  "nagoya": 1,
  "natura": 1,
  "navy": 1,
  "nba": 1,
  "nec": 1,
  "netbank": 1,
  "netflix": 1,
  "network": 1,
  "neustar": 1,
  "new": 1,
  "news": 1,
  "next": 1,
  "nextdirect": 1,
  "nexus": 1,
  "nfl": 1,
  "ngo": 1,
  "nhk": 1,
  "nico": 1,
  "nike": 1,
  "nikon": 1,
  "ninja": 1,
  "nissan": 1,
  "nissay": 1,
  "nokia": 1,
  "norton": 1,
  "now": 1,
  "nowruz": 1,
  "nowtv": 1,
  "nra": 1,
  "nrw": 1,
  "ntt": 1,
  "nyc": 1,
  "obi": 1,
  "observer": 1,
  "office": 1,
  "okinawa": 1,
  "olayan": 1,
  "olayangroup": 1,
  "oldnavy": 1,
  "ollo": 1,
  "omega": 1,
  "one": 1,
  "ong": 1,
  "onl": 1,
  "online": 1,
  "ooo": 1,
  "open": 1,
  "oracle": 1,
  "orange": 1,
  "organic": 1,
  "origins": 1,
  "osaka": 1,
  "otsuka": 1,
  "ott": 1,
  "ovh": 1,
  "page": 1,
  "panasonic": 1,
  "paris": 1,
  "pars": 1,
  "partners": 1,
  "parts": 1,
  "party": 1,
  "pay": 1,
  "pccw": 1,
  "pet": 1,
  "pfizer": 1,
  "pharmacy": 1,
  "phd": 1,
  "philips": 1,
  "phone": 1,
  "photo": 1,
  "photography": 1,
  "photos": 1,
  "physio": 1,
  "pics": 1,
  "pictet": 1,
  "pictures": 1,
  "pid": 1,
  "pin": 1,
  "ping": 1,
  "pink": 1,
  "pioneer": 1,
  "pizza": 1,
  "place": 1,
  "play": 1,
  "playstation": 1,
  "plumbing": 1,
  "plus": 1,
  "pnc": 1,
  "pohl": 1,
  "poker": 1,
  "politie": 1,
  "porn": 1,
  "pramerica": 1,
  "praxi": 1,
  "press": 1,
  "prime": 1,
  "prod": 1,
  "productions": 1,
  "prof": 1,
  "progressive": 1,
  "promo": 1,
  "properties": 1,
  "property": 1,
  "protection": 1,
  "pru": 1,
  "prudential": 1,
  "pub": 1,
  "pwc": 1,
  "qpon": 1,
  "quebec": 1,
  "quest": 1,
  "racing": 1,
  "radio": 1,
  "read": 1,
  "realestate": 1,
  "realtor": 1,
  "realty": 1,
  "recipes": 1,
  "red": 1,
  "redstone": 1,
  "redumbrella": 1,
  "rehab": 1,
  "reise": 1,
  "reisen": 1,
  "reit": 1,
  "reliance": 1,
  "ren": 1,
  "rent": 1,
  "rentals": 1,
  "repair": 1,
  "report": 1,
  "republican": 1,
  "rest": 1,
  "restaurant": 1,
  "review": 1,
  "reviews": 1,
  "rexroth": 1,
  "rich": 1,
  "richardli": 1,
  "ricoh": 1,
  "ril": 1,
  "rio": 1,
  "rip": 1,
  "rocks": 1,
  "rodeo": 1,
  "rogers": 1,
  "room": 1,
  "rsvp": 1,
  "rugby": 1,
  "ruhr": 1,
  "run": 1,
  "rwe": 1,
  "ryukyu": 1,
  "saarland": 1,
  "safe": 1,
  "safety": 1,
  "sakura": 1,
  "sale": 1,
  "salon": 1,
  "samsclub": 1,
  "samsung": 1,
  "sandvik": 1,
  "sandvikcoromant": 1,
  "sanofi": 1,
  "sap": 1,
  "sarl": 1,
  "sas": 1,
  "save": 1,
  "saxo": 1,
  "sbi": 1,
  "sbs": 1,
  "sca": 1,
  "scb": 1,
  "schaeffler": 1,
  "schmidt": 1,
  "scholarships": 1,
  "school": 1,
  "schule": 1,
  "schwarz": 1,
  "science": 1,
  "scot": 1,
  "search": 1,
  "seat": 1,
  "secure": 1,
  "security": 1,
  "seek": 1,
  "select": 1,
  "sener": 1,
  "services": 1,
  "seven": 1,
  "sew": 1,
  "sex": 1,
  "sexy": 1,
  "sfr": 1,
  "shangrila": 1,
  "sharp": 1,
  "shaw": 1,
  "shell": 1,
  "shia": 1,
  "shiksha": 1,
  "shoes": 1,
  "shop": 1,
  "shopping": 1,
  "shouji": 1,
  "show": 1,
  "silk": 1,
  "sina": 1,
  "singles": 1,
  "site": 1,
  "ski": 1,
  "skin": 1,
  "sky": 1,
  "skype": 1,
  "sling": 1,
  "smart": 1,
  "smile": 1,
  "sncf": 1,
  "soccer": 1,
  "social": 1,
  "softbank": 1,
  "software": 1,
  "sohu": 1,
  "solar": 1,
  "solutions": 1,
  "song": 1,
  "sony": 1,
  "soy": 1,
  "spa": 1,
  "space": 1,
  "sport": 1,
  "spot": 1,
  "srl": 1,
  "stada": 1,
  "staples": 1,
  "star": 1,
  "statebank": 1,
  "statefarm": 1,
  "stc": 1,
  "stcgroup": 1,
  "stockholm": 1,
  "storage": 1,
  "store": 1,
  "stream": 1,
  "studio": 1,
  "study": 1,
  "style": 1,
  "sucks": 1,
  "supplies": 1,
  "supply": 1,
  "support": 1,
  "surf": 1,
  "surgery": 1,
  "suzuki": 1,
  "swatch": 1,
  "swiss": 1,
  "sydney": 1,
  "systems": 1,
  "tab": 1,
  "taipei": 1,
  "talk": 1,
  "taobao": 1,
  "target": 1,
  "tatamotors": 1,
  "tatar": 1,
  "tattoo": 1,
  "tax": 1,
  "taxi": 1,
  "tci": 1,
  "tdk": 1,
  "team": 1,
  "tech": 1,
  "technology": 1,
  "temasek": 1,
  "tennis": 1,
  "teva": 1,
  "thd": 1,
  "theater": 1,
  "theatre": 1,
  "tiaa": 1,
  "tickets": 1,
  "tienda": 1,
  "tips": 1,
  "tires": 1,
  "tirol": 1,
  "tjmaxx": 1,
  "tjx": 1,
  "tkmaxx": 1,
  "tmall": 1,
  "today": 1,
  "tokyo": 1,
  "tools": 1,
  "top": 1,
  "toray": 1,
  "toshiba": 1,
  "total": 1,
  "tours": 1,
  "town": 1,
  "toyota": 1,
  "toys": 1,
  "trade": 1,
  "trading": 1,
  "training": 1,
  "travel": 1,
  "travelers": 1,
  "travelersinsurance": 1,
  "trust": 1,
  "trv": 1,
  "tube": 1,
  "tui": 1,
  "tunes": 1,
  "tushu": 1,
  "tvs": 1,
  "ubank": 1,
  "ubs": 1,
  "unicom": 1,
  "university": 1,
  "uno": 1,
  "uol": 1,
  "ups": 1,
  "vacations": 1,
  "vana": 1,
  "vanguard": 1,
  "vegas": 1,
  "ventures": 1,
  "verisign": 1,
  "versicherung": 1,
  "vet": 1,
  "viajes": 1,
  "video": 1,
  "vig": 1,
  "viking": 1,
  "villas": 1,
  "vin": 1,
  "vip": 1,
  "virgin": 1,
  "visa": 1,
  "vision": 1,
  "viva": 1,
  "vivo": 1,
  "vlaanderen": 1,
  "vodka": 1,
  "volvo": 1,
  "vote": 1,
  "voting": 1,
  "voto": 1,
  "voyage": 1,
  "wales": 1,
  "walmart": 1,
  "walter": 1,
  "wang": 1,
  "wanggou": 1,
  "watch": 1,
  "watches": 1,
  "weather": 1,
  "weatherchannel": 1,
  "webcam": 1,
  "weber": 1,
  "website": 1,
  "wed": 1,
  "wedding": 1,
  "weibo": 1,
  "weir": 1,
  "whoswho": 1,
  "wien": 1,
  "wiki": 1,
  "williamhill": 1,
  "win": 1,
  "windows": 1,
  "wine": 1,
  "winners": 1,
  "wme": 1,
  "wolterskluwer": 1,
  "woodside": 1,
  "work": 1,
  "works": 1,
  "world": 1,
  "wow": 1,
  "wtc": 1,
  "wtf": 1,
  "xbox": 1,
  "xerox": 1,
  "xfinity": 1,
  "xihuan": 1,
  "xin": 1,
  "xn--11b4c3d": 1,
  "xn--1ck2e1b": 1,
  "xn--1qqw23a": 1,
  "xn--30rr7y": 1,
  "xn--3bst00m": 1,
  "xn--3ds443g": 1,
  "xn--3pxu8k": 1,
  "xn--42c2d9a": 1,
  "xn--45q11c": 1,
  "xn--4gbrim": 1,
  "xn--55qw42g": 1,
  "xn--55qx5d": 1,
  "xn--5su34j936bgsg": 1,
  "xn--5tzm5g": 1,
  "xn--6frz82g": 1,
  "xn--6qq986b3xl": 1,
  "xn--80adxhks": 1,
  "xn--80aqecdr1a": 1,
  "xn--80asehdb": 1,
  "xn--80aswg": 1,
  "xn--8y0a063a": 1,
  "xn--9dbq2a": 1,
  "xn--9et52u": 1,
  "xn--9krt00a": 1,
  "xn--b4w605ferd": 1,
  "xn--bck1b9a5dre4c": 1,
  "xn--c1avg": 1,
  "xn--c2br7g": 1,
  "xn--cck2b3b": 1,
  "xn--cckwcxetd": 1,
  "xn--cg4bki": 1,
  "xn--czr694b": 1,
  "xn--czrs0t": 1,
  "xn--czru2d": 1,
  "xn--d1acj3b": 1,
  "xn--eckvdtc9d": 1,
  "xn--efvy88h": 1,
  "xn--fct429k": 1,
  "xn--fhbei": 1,
  "xn--fiq228c5hs": 1,
  "xn--fiq64b": 1,
  "xn--fjq720a": 1,
  "xn--flw351e": 1,
  "xn--fzys8d69uvgm": 1,
  "xn--g2xx48c": 1,
  "xn--gckr3f0f": 1,
  "xn--gk3at1e": 1,
  "xn--hxt814e": 1,
  "xn--i1b6b1a6a2e": 1,
  "xn--imr513n": 1,
  "xn--io0a7i": 1,
  "xn--j1aef": 1,
  "xn--jlq480n2rg": 1,
  "xn--jvr189m": 1,
  "xn--kcrx77d1x4a": 1,
  "xn--kput3i": 1,
  "xn--mgba3a3ejt": 1,
  "xn--mgba7c0bbn0a": 1,
  "xn--mgbab2bd": 1,
  "xn--mgbca7dzdo": 1,
  "xn--mgbi4ecexp": 1,
  "xn--mgbt3dhd": 1,
  "xn--mk1bu44c": 1,
  "xn--mxtq1m": 1,
  "xn--ngbc5azd": 1,
  "xn--ngbe9e0a": 1,
  "xn--ngbrx": 1,
  "xn--nqv7f": 1,
  "xn--nqv7fs00ema": 1,
  "xn--nyqy26a": 1,
  "xn--otu796d": 1,
  "xn--p1acf": 1,
  "xn--pssy2u": 1,
  "xn--q9jyb4c": 1,
  "xn--qcka1pmc": 1,
  "xn--rhqv96g": 1,
  "xn--rovu88b": 1,
  "xn--ses554g": 1,
  "xn--t60b56a": 1,
  "xn--tckwe": 1,
  "xn--tiq49xqyj": 1,
  "xn--unup4y": 1,
  "xn--vermgensberater-ctb": 1,
  "xn--vermgensberatung-pwb": 1,
  "xn--vhquv": 1,
  "xn--vuq861b": 1,
  "xn--w4r85el8fhu5dnra": 1,
  "xn--w4rs40l": 1,
  "xn--xhq521b": 1,
  "xn--zfr164b": 1,
  "xyz": 1,
  "yachts": 1,
  "yahoo": 1,
  "yamaxun": 1,
  "yandex": 1,
  "yodobashi": 1,
  "yoga": 1,
  "yokohama": 1,
  "you": 1,
  "youtube": 1,
  "yun": 1,
  "zappos": 1,
  "zara": 1,
  "zero": 1,
  "zip": 1,
  "zone": 1,
  "zuerich": 1
}

/***/ }),

/***/ 8832:
/***/ ((__unused_webpack_module, exports) => {

exports.nonIcannPublicSuffixes = {
  "cc.ua": 1,
  "inf.ua": 1,
  "ltd.ua": 1,
  "611.to": 1,
  "graphox.us": 1,
  "devcdnaccesso.com": 2,
  "on-acorn.io": 2,
  "activetrail.biz": 1,
  "adobeaemcloud.com": 1,
  "dev.adobeaemcloud.com": 2,
  "hlx.live": 1,
  "adobeaemcloud.net": 1,
  "hlx.page": 1,
  "hlx3.page": 1,
  "adobeio-static.net": 1,
  "adobeioruntime.net": 1,
  "beep.pl": 1,
  "airkitapps.com": 1,
  "airkitapps-au.com": 1,
  "airkitapps.eu": 1,
  "aivencloud.com": 1,
  "akadns.net": 1,
  "akamai.net": 1,
  "akamai-staging.net": 1,
  "akamaiedge.net": 1,
  "akamaiedge-staging.net": 1,
  "akamaihd.net": 1,
  "akamaihd-staging.net": 1,
  "akamaiorigin.net": 1,
  "akamaiorigin-staging.net": 1,
  "akamaized.net": 1,
  "akamaized-staging.net": 1,
  "edgekey.net": 1,
  "edgekey-staging.net": 1,
  "edgesuite.net": 1,
  "edgesuite-staging.net": 1,
  "barsy.ca": 1,
  "compute.estate": 2,
  "alces.network": 2,
  "kasserver.com": 1,
  "altervista.org": 1,
  "alwaysdata.net": 1,
  "myamaze.net": 1,
  "execute-api.cn-north-1.amazonaws.com.cn": 1,
  "execute-api.cn-northwest-1.amazonaws.com.cn": 1,
  "execute-api.af-south-1.amazonaws.com": 1,
  "execute-api.ap-east-1.amazonaws.com": 1,
  "execute-api.ap-northeast-1.amazonaws.com": 1,
  "execute-api.ap-northeast-2.amazonaws.com": 1,
  "execute-api.ap-northeast-3.amazonaws.com": 1,
  "execute-api.ap-south-1.amazonaws.com": 1,
  "execute-api.ap-south-2.amazonaws.com": 1,
  "execute-api.ap-southeast-1.amazonaws.com": 1,
  "execute-api.ap-southeast-2.amazonaws.com": 1,
  "execute-api.ap-southeast-3.amazonaws.com": 1,
  "execute-api.ap-southeast-4.amazonaws.com": 1,
  "execute-api.ca-central-1.amazonaws.com": 1,
  "execute-api.eu-central-1.amazonaws.com": 1,
  "execute-api.eu-central-2.amazonaws.com": 1,
  "execute-api.eu-north-1.amazonaws.com": 1,
  "execute-api.eu-south-1.amazonaws.com": 1,
  "execute-api.eu-south-2.amazonaws.com": 1,
  "execute-api.eu-west-1.amazonaws.com": 1,
  "execute-api.eu-west-2.amazonaws.com": 1,
  "execute-api.eu-west-3.amazonaws.com": 1,
  "execute-api.il-central-1.amazonaws.com": 1,
  "execute-api.me-central-1.amazonaws.com": 1,
  "execute-api.me-south-1.amazonaws.com": 1,
  "execute-api.sa-east-1.amazonaws.com": 1,
  "execute-api.us-east-1.amazonaws.com": 1,
  "execute-api.us-east-2.amazonaws.com": 1,
  "execute-api.us-gov-east-1.amazonaws.com": 1,
  "execute-api.us-gov-west-1.amazonaws.com": 1,
  "execute-api.us-west-1.amazonaws.com": 1,
  "execute-api.us-west-2.amazonaws.com": 1,
  "cloudfront.net": 1,
  "auth.af-south-1.amazoncognito.com": 1,
  "auth.ap-northeast-1.amazoncognito.com": 1,
  "auth.ap-northeast-2.amazoncognito.com": 1,
  "auth.ap-northeast-3.amazoncognito.com": 1,
  "auth.ap-south-1.amazoncognito.com": 1,
  "auth.ap-southeast-1.amazoncognito.com": 1,
  "auth.ap-southeast-2.amazoncognito.com": 1,
  "auth.ap-southeast-3.amazoncognito.com": 1,
  "auth.ca-central-1.amazoncognito.com": 1,
  "auth.eu-central-1.amazoncognito.com": 1,
  "auth.eu-north-1.amazoncognito.com": 1,
  "auth.eu-south-1.amazoncognito.com": 1,
  "auth.eu-west-1.amazoncognito.com": 1,
  "auth.eu-west-2.amazoncognito.com": 1,
  "auth.eu-west-3.amazoncognito.com": 1,
  "auth.il-central-1.amazoncognito.com": 1,
  "auth.me-south-1.amazoncognito.com": 1,
  "auth.sa-east-1.amazoncognito.com": 1,
  "auth.us-east-1.amazoncognito.com": 1,
  "auth-fips.us-east-1.amazoncognito.com": 1,
  "auth.us-east-2.amazoncognito.com": 1,
  "auth-fips.us-east-2.amazoncognito.com": 1,
  "auth-fips.us-gov-west-1.amazoncognito.com": 1,
  "auth.us-west-1.amazoncognito.com": 1,
  "auth-fips.us-west-1.amazoncognito.com": 1,
  "auth.us-west-2.amazoncognito.com": 1,
  "auth-fips.us-west-2.amazoncognito.com": 1,
  "compute.amazonaws.com": 2,
  "compute-1.amazonaws.com": 2,
  "compute.amazonaws.com.cn": 2,
  "us-east-1.amazonaws.com": 1,
  "emrappui-prod.cn-north-1.amazonaws.com.cn": 1,
  "emrnotebooks-prod.cn-north-1.amazonaws.com.cn": 1,
  "emrstudio-prod.cn-north-1.amazonaws.com.cn": 1,
  "emrappui-prod.cn-northwest-1.amazonaws.com.cn": 1,
  "emrnotebooks-prod.cn-northwest-1.amazonaws.com.cn": 1,
  "emrstudio-prod.cn-northwest-1.amazonaws.com.cn": 1,
  "emrappui-prod.af-south-1.amazonaws.com": 1,
  "emrnotebooks-prod.af-south-1.amazonaws.com": 1,
  "emrstudio-prod.af-south-1.amazonaws.com": 1,
  "emrappui-prod.ap-east-1.amazonaws.com": 1,
  "emrnotebooks-prod.ap-east-1.amazonaws.com": 1,
  "emrstudio-prod.ap-east-1.amazonaws.com": 1,
  "emrappui-prod.ap-northeast-1.amazonaws.com": 1,
  "emrnotebooks-prod.ap-northeast-1.amazonaws.com": 1,
  "emrstudio-prod.ap-northeast-1.amazonaws.com": 1,
  "emrappui-prod.ap-northeast-2.amazonaws.com": 1,
  "emrnotebooks-prod.ap-northeast-2.amazonaws.com": 1,
  "emrstudio-prod.ap-northeast-2.amazonaws.com": 1,
  "emrappui-prod.ap-northeast-3.amazonaws.com": 1,
  "emrnotebooks-prod.ap-northeast-3.amazonaws.com": 1,
  "emrstudio-prod.ap-northeast-3.amazonaws.com": 1,
  "emrappui-prod.ap-south-1.amazonaws.com": 1,
  "emrnotebooks-prod.ap-south-1.amazonaws.com": 1,
  "emrstudio-prod.ap-south-1.amazonaws.com": 1,
  "emrappui-prod.ap-southeast-1.amazonaws.com": 1,
  "emrnotebooks-prod.ap-southeast-1.amazonaws.com": 1,
  "emrstudio-prod.ap-southeast-1.amazonaws.com": 1,
  "emrappui-prod.ap-southeast-2.amazonaws.com": 1,
  "emrnotebooks-prod.ap-southeast-2.amazonaws.com": 1,
  "emrstudio-prod.ap-southeast-2.amazonaws.com": 1,
  "emrappui-prod.ap-southeast-3.amazonaws.com": 1,
  "emrnotebooks-prod.ap-southeast-3.amazonaws.com": 1,
  "emrstudio-prod.ap-southeast-3.amazonaws.com": 1,
  "emrappui-prod.ca-central-1.amazonaws.com": 1,
  "emrnotebooks-prod.ca-central-1.amazonaws.com": 1,
  "emrstudio-prod.ca-central-1.amazonaws.com": 1,
  "emrappui-prod.eu-central-1.amazonaws.com": 1,
  "emrnotebooks-prod.eu-central-1.amazonaws.com": 1,
  "emrstudio-prod.eu-central-1.amazonaws.com": 1,
  "emrappui-prod.eu-north-1.amazonaws.com": 1,
  "emrnotebooks-prod.eu-north-1.amazonaws.com": 1,
  "emrstudio-prod.eu-north-1.amazonaws.com": 1,
  "emrappui-prod.eu-south-1.amazonaws.com": 1,
  "emrnotebooks-prod.eu-south-1.amazonaws.com": 1,
  "emrstudio-prod.eu-south-1.amazonaws.com": 1,
  "emrappui-prod.eu-west-1.amazonaws.com": 1,
  "emrnotebooks-prod.eu-west-1.amazonaws.com": 1,
  "emrstudio-prod.eu-west-1.amazonaws.com": 1,
  "emrappui-prod.eu-west-2.amazonaws.com": 1,
  "emrnotebooks-prod.eu-west-2.amazonaws.com": 1,
  "emrstudio-prod.eu-west-2.amazonaws.com": 1,
  "emrappui-prod.eu-west-3.amazonaws.com": 1,
  "emrnotebooks-prod.eu-west-3.amazonaws.com": 1,
  "emrstudio-prod.eu-west-3.amazonaws.com": 1,
  "emrappui-prod.me-central-1.amazonaws.com": 1,
  "emrnotebooks-prod.me-central-1.amazonaws.com": 1,
  "emrstudio-prod.me-central-1.amazonaws.com": 1,
  "emrappui-prod.me-south-1.amazonaws.com": 1,
  "emrnotebooks-prod.me-south-1.amazonaws.com": 1,
  "emrstudio-prod.me-south-1.amazonaws.com": 1,
  "emrappui-prod.sa-east-1.amazonaws.com": 1,
  "emrnotebooks-prod.sa-east-1.amazonaws.com": 1,
  "emrstudio-prod.sa-east-1.amazonaws.com": 1,
  "emrappui-prod.us-east-1.amazonaws.com": 1,
  "emrnotebooks-prod.us-east-1.amazonaws.com": 1,
  "emrstudio-prod.us-east-1.amazonaws.com": 1,
  "emrappui-prod.us-east-2.amazonaws.com": 1,
  "emrnotebooks-prod.us-east-2.amazonaws.com": 1,
  "emrstudio-prod.us-east-2.amazonaws.com": 1,
  "emrappui-prod.us-gov-east-1.amazonaws.com": 1,
  "emrnotebooks-prod.us-gov-east-1.amazonaws.com": 1,
  "emrstudio-prod.us-gov-east-1.amazonaws.com": 1,
  "emrappui-prod.us-gov-west-1.amazonaws.com": 1,
  "emrnotebooks-prod.us-gov-west-1.amazonaws.com": 1,
  "emrstudio-prod.us-gov-west-1.amazonaws.com": 1,
  "emrappui-prod.us-west-1.amazonaws.com": 1,
  "emrnotebooks-prod.us-west-1.amazonaws.com": 1,
  "emrstudio-prod.us-west-1.amazonaws.com": 1,
  "emrappui-prod.us-west-2.amazonaws.com": 1,
  "emrnotebooks-prod.us-west-2.amazonaws.com": 1,
  "emrstudio-prod.us-west-2.amazonaws.com": 1,
  "cn-north-1.airflow.amazonaws.com.cn": 2,
  "cn-northwest-1.airflow.amazonaws.com.cn": 2,
  "ap-northeast-1.airflow.amazonaws.com": 2,
  "ap-northeast-2.airflow.amazonaws.com": 2,
  "ap-south-1.airflow.amazonaws.com": 2,
  "ap-southeast-1.airflow.amazonaws.com": 2,
  "ap-southeast-2.airflow.amazonaws.com": 2,
  "ca-central-1.airflow.amazonaws.com": 2,
  "eu-central-1.airflow.amazonaws.com": 2,
  "eu-north-1.airflow.amazonaws.com": 2,
  "eu-west-1.airflow.amazonaws.com": 2,
  "eu-west-2.airflow.amazonaws.com": 2,
  "eu-west-3.airflow.amazonaws.com": 2,
  "sa-east-1.airflow.amazonaws.com": 2,
  "us-east-1.airflow.amazonaws.com": 2,
  "us-east-2.airflow.amazonaws.com": 2,
  "us-west-2.airflow.amazonaws.com": 2,
  "s3.dualstack.cn-north-1.amazonaws.com.cn": 1,
  "s3-accesspoint.dualstack.cn-north-1.amazonaws.com.cn": 1,
  "s3-website.dualstack.cn-north-1.amazonaws.com.cn": 1,
  "s3.cn-north-1.amazonaws.com.cn": 1,
  "s3-accesspoint.cn-north-1.amazonaws.com.cn": 1,
  "s3-deprecated.cn-north-1.amazonaws.com.cn": 1,
  "s3-object-lambda.cn-north-1.amazonaws.com.cn": 1,
  "s3-website.cn-north-1.amazonaws.com.cn": 1,
  "s3.dualstack.cn-northwest-1.amazonaws.com.cn": 1,
  "s3-accesspoint.dualstack.cn-northwest-1.amazonaws.com.cn": 1,
  "s3.cn-northwest-1.amazonaws.com.cn": 1,
  "s3-accesspoint.cn-northwest-1.amazonaws.com.cn": 1,
  "s3-object-lambda.cn-northwest-1.amazonaws.com.cn": 1,
  "s3-website.cn-northwest-1.amazonaws.com.cn": 1,
  "s3.dualstack.af-south-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.af-south-1.amazonaws.com": 1,
  "s3-website.dualstack.af-south-1.amazonaws.com": 1,
  "s3.af-south-1.amazonaws.com": 1,
  "s3-accesspoint.af-south-1.amazonaws.com": 1,
  "s3-object-lambda.af-south-1.amazonaws.com": 1,
  "s3-website.af-south-1.amazonaws.com": 1,
  "s3.dualstack.ap-east-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-east-1.amazonaws.com": 1,
  "s3.ap-east-1.amazonaws.com": 1,
  "s3-accesspoint.ap-east-1.amazonaws.com": 1,
  "s3-object-lambda.ap-east-1.amazonaws.com": 1,
  "s3-website.ap-east-1.amazonaws.com": 1,
  "s3.dualstack.ap-northeast-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-northeast-1.amazonaws.com": 1,
  "s3-website.dualstack.ap-northeast-1.amazonaws.com": 1,
  "s3.ap-northeast-1.amazonaws.com": 1,
  "s3-accesspoint.ap-northeast-1.amazonaws.com": 1,
  "s3-object-lambda.ap-northeast-1.amazonaws.com": 1,
  "s3-website.ap-northeast-1.amazonaws.com": 1,
  "s3.dualstack.ap-northeast-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-northeast-2.amazonaws.com": 1,
  "s3-website.dualstack.ap-northeast-2.amazonaws.com": 1,
  "s3.ap-northeast-2.amazonaws.com": 1,
  "s3-accesspoint.ap-northeast-2.amazonaws.com": 1,
  "s3-object-lambda.ap-northeast-2.amazonaws.com": 1,
  "s3-website.ap-northeast-2.amazonaws.com": 1,
  "s3.dualstack.ap-northeast-3.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-northeast-3.amazonaws.com": 1,
  "s3-website.dualstack.ap-northeast-3.amazonaws.com": 1,
  "s3.ap-northeast-3.amazonaws.com": 1,
  "s3-accesspoint.ap-northeast-3.amazonaws.com": 1,
  "s3-object-lambda.ap-northeast-3.amazonaws.com": 1,
  "s3-website.ap-northeast-3.amazonaws.com": 1,
  "s3.dualstack.ap-south-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-south-1.amazonaws.com": 1,
  "s3-website.dualstack.ap-south-1.amazonaws.com": 1,
  "s3.ap-south-1.amazonaws.com": 1,
  "s3-accesspoint.ap-south-1.amazonaws.com": 1,
  "s3-object-lambda.ap-south-1.amazonaws.com": 1,
  "s3-website.ap-south-1.amazonaws.com": 1,
  "s3.dualstack.ap-south-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-south-2.amazonaws.com": 1,
  "s3.ap-south-2.amazonaws.com": 1,
  "s3-accesspoint.ap-south-2.amazonaws.com": 1,
  "s3-object-lambda.ap-south-2.amazonaws.com": 1,
  "s3-website.ap-south-2.amazonaws.com": 1,
  "s3.dualstack.ap-southeast-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-southeast-1.amazonaws.com": 1,
  "s3-website.dualstack.ap-southeast-1.amazonaws.com": 1,
  "s3.ap-southeast-1.amazonaws.com": 1,
  "s3-accesspoint.ap-southeast-1.amazonaws.com": 1,
  "s3-object-lambda.ap-southeast-1.amazonaws.com": 1,
  "s3-website.ap-southeast-1.amazonaws.com": 1,
  "s3.dualstack.ap-southeast-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-southeast-2.amazonaws.com": 1,
  "s3-website.dualstack.ap-southeast-2.amazonaws.com": 1,
  "s3.ap-southeast-2.amazonaws.com": 1,
  "s3-accesspoint.ap-southeast-2.amazonaws.com": 1,
  "s3-object-lambda.ap-southeast-2.amazonaws.com": 1,
  "s3-website.ap-southeast-2.amazonaws.com": 1,
  "s3.dualstack.ap-southeast-3.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-southeast-3.amazonaws.com": 1,
  "s3.ap-southeast-3.amazonaws.com": 1,
  "s3-accesspoint.ap-southeast-3.amazonaws.com": 1,
  "s3-object-lambda.ap-southeast-3.amazonaws.com": 1,
  "s3-website.ap-southeast-3.amazonaws.com": 1,
  "s3.dualstack.ap-southeast-4.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-southeast-4.amazonaws.com": 1,
  "s3.ap-southeast-4.amazonaws.com": 1,
  "s3-accesspoint.ap-southeast-4.amazonaws.com": 1,
  "s3-object-lambda.ap-southeast-4.amazonaws.com": 1,
  "s3-website.ap-southeast-4.amazonaws.com": 1,
  "s3.dualstack.ca-central-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ca-central-1.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.ca-central-1.amazonaws.com": 1,
  "s3-fips.dualstack.ca-central-1.amazonaws.com": 1,
  "s3-website.dualstack.ca-central-1.amazonaws.com": 1,
  "s3.ca-central-1.amazonaws.com": 1,
  "s3-accesspoint.ca-central-1.amazonaws.com": 1,
  "s3-accesspoint-fips.ca-central-1.amazonaws.com": 1,
  "s3-fips.ca-central-1.amazonaws.com": 1,
  "s3-object-lambda.ca-central-1.amazonaws.com": 1,
  "s3-website.ca-central-1.amazonaws.com": 1,
  "s3.dualstack.eu-central-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-central-1.amazonaws.com": 1,
  "s3-website.dualstack.eu-central-1.amazonaws.com": 1,
  "s3.eu-central-1.amazonaws.com": 1,
  "s3-accesspoint.eu-central-1.amazonaws.com": 1,
  "s3-object-lambda.eu-central-1.amazonaws.com": 1,
  "s3-website.eu-central-1.amazonaws.com": 1,
  "s3.dualstack.eu-central-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-central-2.amazonaws.com": 1,
  "s3.eu-central-2.amazonaws.com": 1,
  "s3-accesspoint.eu-central-2.amazonaws.com": 1,
  "s3-object-lambda.eu-central-2.amazonaws.com": 1,
  "s3-website.eu-central-2.amazonaws.com": 1,
  "s3.dualstack.eu-north-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-north-1.amazonaws.com": 1,
  "s3.eu-north-1.amazonaws.com": 1,
  "s3-accesspoint.eu-north-1.amazonaws.com": 1,
  "s3-object-lambda.eu-north-1.amazonaws.com": 1,
  "s3-website.eu-north-1.amazonaws.com": 1,
  "s3.dualstack.eu-south-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-south-1.amazonaws.com": 1,
  "s3-website.dualstack.eu-south-1.amazonaws.com": 1,
  "s3.eu-south-1.amazonaws.com": 1,
  "s3-accesspoint.eu-south-1.amazonaws.com": 1,
  "s3-object-lambda.eu-south-1.amazonaws.com": 1,
  "s3-website.eu-south-1.amazonaws.com": 1,
  "s3.dualstack.eu-south-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-south-2.amazonaws.com": 1,
  "s3.eu-south-2.amazonaws.com": 1,
  "s3-accesspoint.eu-south-2.amazonaws.com": 1,
  "s3-object-lambda.eu-south-2.amazonaws.com": 1,
  "s3-website.eu-south-2.amazonaws.com": 1,
  "s3.dualstack.eu-west-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-west-1.amazonaws.com": 1,
  "s3-website.dualstack.eu-west-1.amazonaws.com": 1,
  "s3.eu-west-1.amazonaws.com": 1,
  "s3-accesspoint.eu-west-1.amazonaws.com": 1,
  "s3-deprecated.eu-west-1.amazonaws.com": 1,
  "s3-object-lambda.eu-west-1.amazonaws.com": 1,
  "s3-website.eu-west-1.amazonaws.com": 1,
  "s3.dualstack.eu-west-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-west-2.amazonaws.com": 1,
  "s3.eu-west-2.amazonaws.com": 1,
  "s3-accesspoint.eu-west-2.amazonaws.com": 1,
  "s3-object-lambda.eu-west-2.amazonaws.com": 1,
  "s3-website.eu-west-2.amazonaws.com": 1,
  "s3.dualstack.eu-west-3.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-west-3.amazonaws.com": 1,
  "s3-website.dualstack.eu-west-3.amazonaws.com": 1,
  "s3.eu-west-3.amazonaws.com": 1,
  "s3-accesspoint.eu-west-3.amazonaws.com": 1,
  "s3-object-lambda.eu-west-3.amazonaws.com": 1,
  "s3-website.eu-west-3.amazonaws.com": 1,
  "s3.dualstack.il-central-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.il-central-1.amazonaws.com": 1,
  "s3.il-central-1.amazonaws.com": 1,
  "s3-accesspoint.il-central-1.amazonaws.com": 1,
  "s3-object-lambda.il-central-1.amazonaws.com": 1,
  "s3-website.il-central-1.amazonaws.com": 1,
  "s3.dualstack.me-central-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.me-central-1.amazonaws.com": 1,
  "s3.me-central-1.amazonaws.com": 1,
  "s3-accesspoint.me-central-1.amazonaws.com": 1,
  "s3-object-lambda.me-central-1.amazonaws.com": 1,
  "s3-website.me-central-1.amazonaws.com": 1,
  "s3.dualstack.me-south-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.me-south-1.amazonaws.com": 1,
  "s3.me-south-1.amazonaws.com": 1,
  "s3-accesspoint.me-south-1.amazonaws.com": 1,
  "s3-object-lambda.me-south-1.amazonaws.com": 1,
  "s3-website.me-south-1.amazonaws.com": 1,
  "s3.amazonaws.com": 1,
  "s3-1.amazonaws.com": 1,
  "s3-ap-east-1.amazonaws.com": 1,
  "s3-ap-northeast-1.amazonaws.com": 1,
  "s3-ap-northeast-2.amazonaws.com": 1,
  "s3-ap-northeast-3.amazonaws.com": 1,
  "s3-ap-south-1.amazonaws.com": 1,
  "s3-ap-southeast-1.amazonaws.com": 1,
  "s3-ap-southeast-2.amazonaws.com": 1,
  "s3-ca-central-1.amazonaws.com": 1,
  "s3-eu-central-1.amazonaws.com": 1,
  "s3-eu-north-1.amazonaws.com": 1,
  "s3-eu-west-1.amazonaws.com": 1,
  "s3-eu-west-2.amazonaws.com": 1,
  "s3-eu-west-3.amazonaws.com": 1,
  "s3-external-1.amazonaws.com": 1,
  "s3-fips-us-gov-east-1.amazonaws.com": 1,
  "s3-fips-us-gov-west-1.amazonaws.com": 1,
  "mrap.accesspoint.s3-global.amazonaws.com": 1,
  "s3-me-south-1.amazonaws.com": 1,
  "s3-sa-east-1.amazonaws.com": 1,
  "s3-us-east-2.amazonaws.com": 1,
  "s3-us-gov-east-1.amazonaws.com": 1,
  "s3-us-gov-west-1.amazonaws.com": 1,
  "s3-us-west-1.amazonaws.com": 1,
  "s3-us-west-2.amazonaws.com": 1,
  "s3-website-ap-northeast-1.amazonaws.com": 1,
  "s3-website-ap-southeast-1.amazonaws.com": 1,
  "s3-website-ap-southeast-2.amazonaws.com": 1,
  "s3-website-eu-west-1.amazonaws.com": 1,
  "s3-website-sa-east-1.amazonaws.com": 1,
  "s3-website-us-east-1.amazonaws.com": 1,
  "s3-website-us-gov-west-1.amazonaws.com": 1,
  "s3-website-us-west-1.amazonaws.com": 1,
  "s3-website-us-west-2.amazonaws.com": 1,
  "s3.dualstack.sa-east-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.sa-east-1.amazonaws.com": 1,
  "s3-website.dualstack.sa-east-1.amazonaws.com": 1,
  "s3.sa-east-1.amazonaws.com": 1,
  "s3-accesspoint.sa-east-1.amazonaws.com": 1,
  "s3-object-lambda.sa-east-1.amazonaws.com": 1,
  "s3-website.sa-east-1.amazonaws.com": 1,
  "s3.dualstack.us-east-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.us-east-1.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.us-east-1.amazonaws.com": 1,
  "s3-fips.dualstack.us-east-1.amazonaws.com": 1,
  "s3-website.dualstack.us-east-1.amazonaws.com": 1,
  "s3.us-east-1.amazonaws.com": 1,
  "s3-accesspoint.us-east-1.amazonaws.com": 1,
  "s3-accesspoint-fips.us-east-1.amazonaws.com": 1,
  "s3-deprecated.us-east-1.amazonaws.com": 1,
  "s3-fips.us-east-1.amazonaws.com": 1,
  "s3-object-lambda.us-east-1.amazonaws.com": 1,
  "s3-website.us-east-1.amazonaws.com": 1,
  "s3.dualstack.us-east-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.us-east-2.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.us-east-2.amazonaws.com": 1,
  "s3-fips.dualstack.us-east-2.amazonaws.com": 1,
  "s3.us-east-2.amazonaws.com": 1,
  "s3-accesspoint.us-east-2.amazonaws.com": 1,
  "s3-accesspoint-fips.us-east-2.amazonaws.com": 1,
  "s3-deprecated.us-east-2.amazonaws.com": 1,
  "s3-fips.us-east-2.amazonaws.com": 1,
  "s3-object-lambda.us-east-2.amazonaws.com": 1,
  "s3-website.us-east-2.amazonaws.com": 1,
  "s3.dualstack.us-gov-east-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.us-gov-east-1.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.us-gov-east-1.amazonaws.com": 1,
  "s3-fips.dualstack.us-gov-east-1.amazonaws.com": 1,
  "s3.us-gov-east-1.amazonaws.com": 1,
  "s3-accesspoint.us-gov-east-1.amazonaws.com": 1,
  "s3-accesspoint-fips.us-gov-east-1.amazonaws.com": 1,
  "s3-fips.us-gov-east-1.amazonaws.com": 1,
  "s3-object-lambda.us-gov-east-1.amazonaws.com": 1,
  "s3-website.us-gov-east-1.amazonaws.com": 1,
  "s3.dualstack.us-gov-west-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.us-gov-west-1.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.us-gov-west-1.amazonaws.com": 1,
  "s3-fips.dualstack.us-gov-west-1.amazonaws.com": 1,
  "s3.us-gov-west-1.amazonaws.com": 1,
  "s3-accesspoint.us-gov-west-1.amazonaws.com": 1,
  "s3-accesspoint-fips.us-gov-west-1.amazonaws.com": 1,
  "s3-fips.us-gov-west-1.amazonaws.com": 1,
  "s3-object-lambda.us-gov-west-1.amazonaws.com": 1,
  "s3-website.us-gov-west-1.amazonaws.com": 1,
  "s3.dualstack.us-west-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.us-west-1.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.us-west-1.amazonaws.com": 1,
  "s3-fips.dualstack.us-west-1.amazonaws.com": 1,
  "s3-website.dualstack.us-west-1.amazonaws.com": 1,
  "s3.us-west-1.amazonaws.com": 1,
  "s3-accesspoint.us-west-1.amazonaws.com": 1,
  "s3-accesspoint-fips.us-west-1.amazonaws.com": 1,
  "s3-fips.us-west-1.amazonaws.com": 1,
  "s3-object-lambda.us-west-1.amazonaws.com": 1,
  "s3-website.us-west-1.amazonaws.com": 1,
  "s3.dualstack.us-west-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.us-west-2.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.us-west-2.amazonaws.com": 1,
  "s3-fips.dualstack.us-west-2.amazonaws.com": 1,
  "s3-website.dualstack.us-west-2.amazonaws.com": 1,
  "s3.us-west-2.amazonaws.com": 1,
  "s3-accesspoint.us-west-2.amazonaws.com": 1,
  "s3-accesspoint-fips.us-west-2.amazonaws.com": 1,
  "s3-deprecated.us-west-2.amazonaws.com": 1,
  "s3-fips.us-west-2.amazonaws.com": 1,
  "s3-object-lambda.us-west-2.amazonaws.com": 1,
  "s3-website.us-west-2.amazonaws.com": 1,
  "notebook.af-south-1.sagemaker.aws": 1,
  "notebook.ap-east-1.sagemaker.aws": 1,
  "notebook.ap-northeast-1.sagemaker.aws": 1,
  "notebook.ap-northeast-2.sagemaker.aws": 1,
  "notebook.ap-northeast-3.sagemaker.aws": 1,
  "notebook.ap-south-1.sagemaker.aws": 1,
  "notebook.ap-south-2.sagemaker.aws": 1,
  "notebook.ap-southeast-1.sagemaker.aws": 1,
  "notebook.ap-southeast-2.sagemaker.aws": 1,
  "notebook.ap-southeast-3.sagemaker.aws": 1,
  "notebook.ap-southeast-4.sagemaker.aws": 1,
  "notebook.ca-central-1.sagemaker.aws": 1,
  "notebook.eu-central-1.sagemaker.aws": 1,
  "notebook.eu-central-2.sagemaker.aws": 1,
  "notebook.eu-north-1.sagemaker.aws": 1,
  "notebook.eu-south-1.sagemaker.aws": 1,
  "notebook.eu-south-2.sagemaker.aws": 1,
  "notebook.eu-west-1.sagemaker.aws": 1,
  "notebook.eu-west-2.sagemaker.aws": 1,
  "notebook.eu-west-3.sagemaker.aws": 1,
  "notebook.il-central-1.sagemaker.aws": 1,
  "notebook.me-central-1.sagemaker.aws": 1,
  "notebook.me-south-1.sagemaker.aws": 1,
  "notebook.sa-east-1.sagemaker.aws": 1,
  "notebook.us-east-1.sagemaker.aws": 1,
  "notebook-fips.us-east-1.sagemaker.aws": 1,
  "notebook.us-east-2.sagemaker.aws": 1,
  "notebook-fips.us-east-2.sagemaker.aws": 1,
  "notebook.us-gov-east-1.sagemaker.aws": 1,
  "notebook-fips.us-gov-east-1.sagemaker.aws": 1,
  "notebook.us-gov-west-1.sagemaker.aws": 1,
  "notebook-fips.us-gov-west-1.sagemaker.aws": 1,
  "notebook.us-west-1.sagemaker.aws": 1,
  "notebook.us-west-2.sagemaker.aws": 1,
  "notebook-fips.us-west-2.sagemaker.aws": 1,
  "notebook.cn-north-1.sagemaker.com.cn": 1,
  "notebook.cn-northwest-1.sagemaker.com.cn": 1,
  "studio.af-south-1.sagemaker.aws": 1,
  "studio.ap-east-1.sagemaker.aws": 1,
  "studio.ap-northeast-1.sagemaker.aws": 1,
  "studio.ap-northeast-2.sagemaker.aws": 1,
  "studio.ap-northeast-3.sagemaker.aws": 1,
  "studio.ap-south-1.sagemaker.aws": 1,
  "studio.ap-southeast-1.sagemaker.aws": 1,
  "studio.ap-southeast-2.sagemaker.aws": 1,
  "studio.ap-southeast-3.sagemaker.aws": 1,
  "studio.ca-central-1.sagemaker.aws": 1,
  "studio.eu-central-1.sagemaker.aws": 1,
  "studio.eu-north-1.sagemaker.aws": 1,
  "studio.eu-south-1.sagemaker.aws": 1,
  "studio.eu-west-1.sagemaker.aws": 1,
  "studio.eu-west-2.sagemaker.aws": 1,
  "studio.eu-west-3.sagemaker.aws": 1,
  "studio.il-central-1.sagemaker.aws": 1,
  "studio.me-central-1.sagemaker.aws": 1,
  "studio.me-south-1.sagemaker.aws": 1,
  "studio.sa-east-1.sagemaker.aws": 1,
  "studio.us-east-1.sagemaker.aws": 1,
  "studio.us-east-2.sagemaker.aws": 1,
  "studio.us-gov-east-1.sagemaker.aws": 1,
  "studio-fips.us-gov-east-1.sagemaker.aws": 1,
  "studio.us-gov-west-1.sagemaker.aws": 1,
  "studio-fips.us-gov-west-1.sagemaker.aws": 1,
  "studio.us-west-1.sagemaker.aws": 1,
  "studio.us-west-2.sagemaker.aws": 1,
  "studio.cn-north-1.sagemaker.com.cn": 1,
  "studio.cn-northwest-1.sagemaker.com.cn": 1,
  "analytics-gateway.ap-northeast-1.amazonaws.com": 1,
  "analytics-gateway.ap-northeast-2.amazonaws.com": 1,
  "analytics-gateway.ap-south-1.amazonaws.com": 1,
  "analytics-gateway.ap-southeast-1.amazonaws.com": 1,
  "analytics-gateway.ap-southeast-2.amazonaws.com": 1,
  "analytics-gateway.eu-central-1.amazonaws.com": 1,
  "analytics-gateway.eu-west-1.amazonaws.com": 1,
  "analytics-gateway.us-east-1.amazonaws.com": 1,
  "analytics-gateway.us-east-2.amazonaws.com": 1,
  "analytics-gateway.us-west-2.amazonaws.com": 1,
  "amplifyapp.com": 2,
  "awsapprunner.com": 2,
  "webview-assets.aws-cloud9.af-south-1.amazonaws.com": 1,
  "vfs.cloud9.af-south-1.amazonaws.com": 1,
  "webview-assets.cloud9.af-south-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-east-1.amazonaws.com": 1,
  "vfs.cloud9.ap-east-1.amazonaws.com": 1,
  "webview-assets.cloud9.ap-east-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-northeast-1.amazonaws.com": 1,
  "vfs.cloud9.ap-northeast-1.amazonaws.com": 1,
  "webview-assets.cloud9.ap-northeast-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-northeast-2.amazonaws.com": 1,
  "vfs.cloud9.ap-northeast-2.amazonaws.com": 1,
  "webview-assets.cloud9.ap-northeast-2.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-northeast-3.amazonaws.com": 1,
  "vfs.cloud9.ap-northeast-3.amazonaws.com": 1,
  "webview-assets.cloud9.ap-northeast-3.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-south-1.amazonaws.com": 1,
  "vfs.cloud9.ap-south-1.amazonaws.com": 1,
  "webview-assets.cloud9.ap-south-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-southeast-1.amazonaws.com": 1,
  "vfs.cloud9.ap-southeast-1.amazonaws.com": 1,
  "webview-assets.cloud9.ap-southeast-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-southeast-2.amazonaws.com": 1,
  "vfs.cloud9.ap-southeast-2.amazonaws.com": 1,
  "webview-assets.cloud9.ap-southeast-2.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ca-central-1.amazonaws.com": 1,
  "vfs.cloud9.ca-central-1.amazonaws.com": 1,
  "webview-assets.cloud9.ca-central-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.eu-central-1.amazonaws.com": 1,
  "vfs.cloud9.eu-central-1.amazonaws.com": 1,
  "webview-assets.cloud9.eu-central-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.eu-north-1.amazonaws.com": 1,
  "vfs.cloud9.eu-north-1.amazonaws.com": 1,
  "webview-assets.cloud9.eu-north-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.eu-south-1.amazonaws.com": 1,
  "vfs.cloud9.eu-south-1.amazonaws.com": 1,
  "webview-assets.cloud9.eu-south-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.eu-west-1.amazonaws.com": 1,
  "vfs.cloud9.eu-west-1.amazonaws.com": 1,
  "webview-assets.cloud9.eu-west-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.eu-west-2.amazonaws.com": 1,
  "vfs.cloud9.eu-west-2.amazonaws.com": 1,
  "webview-assets.cloud9.eu-west-2.amazonaws.com": 1,
  "webview-assets.aws-cloud9.eu-west-3.amazonaws.com": 1,
  "vfs.cloud9.eu-west-3.amazonaws.com": 1,
  "webview-assets.cloud9.eu-west-3.amazonaws.com": 1,
  "webview-assets.aws-cloud9.me-south-1.amazonaws.com": 1,
  "vfs.cloud9.me-south-1.amazonaws.com": 1,
  "webview-assets.cloud9.me-south-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.sa-east-1.amazonaws.com": 1,
  "vfs.cloud9.sa-east-1.amazonaws.com": 1,
  "webview-assets.cloud9.sa-east-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.us-east-1.amazonaws.com": 1,
  "vfs.cloud9.us-east-1.amazonaws.com": 1,
  "webview-assets.cloud9.us-east-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.us-east-2.amazonaws.com": 1,
  "vfs.cloud9.us-east-2.amazonaws.com": 1,
  "webview-assets.cloud9.us-east-2.amazonaws.com": 1,
  "webview-assets.aws-cloud9.us-west-1.amazonaws.com": 1,
  "vfs.cloud9.us-west-1.amazonaws.com": 1,
  "webview-assets.cloud9.us-west-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.us-west-2.amazonaws.com": 1,
  "vfs.cloud9.us-west-2.amazonaws.com": 1,
  "webview-assets.cloud9.us-west-2.amazonaws.com": 1,
  "cn-north-1.eb.amazonaws.com.cn": 1,
  "cn-northwest-1.eb.amazonaws.com.cn": 1,
  "elasticbeanstalk.com": 1,
  "af-south-1.elasticbeanstalk.com": 1,
  "ap-east-1.elasticbeanstalk.com": 1,
  "ap-northeast-1.elasticbeanstalk.com": 1,
  "ap-northeast-2.elasticbeanstalk.com": 1,
  "ap-northeast-3.elasticbeanstalk.com": 1,
  "ap-south-1.elasticbeanstalk.com": 1,
  "ap-southeast-1.elasticbeanstalk.com": 1,
  "ap-southeast-2.elasticbeanstalk.com": 1,
  "ap-southeast-3.elasticbeanstalk.com": 1,
  "ca-central-1.elasticbeanstalk.com": 1,
  "eu-central-1.elasticbeanstalk.com": 1,
  "eu-north-1.elasticbeanstalk.com": 1,
  "eu-south-1.elasticbeanstalk.com": 1,
  "eu-west-1.elasticbeanstalk.com": 1,
  "eu-west-2.elasticbeanstalk.com": 1,
  "eu-west-3.elasticbeanstalk.com": 1,
  "il-central-1.elasticbeanstalk.com": 1,
  "me-south-1.elasticbeanstalk.com": 1,
  "sa-east-1.elasticbeanstalk.com": 1,
  "us-east-1.elasticbeanstalk.com": 1,
  "us-east-2.elasticbeanstalk.com": 1,
  "us-gov-east-1.elasticbeanstalk.com": 1,
  "us-gov-west-1.elasticbeanstalk.com": 1,
  "us-west-1.elasticbeanstalk.com": 1,
  "us-west-2.elasticbeanstalk.com": 1,
  "elb.amazonaws.com.cn": 2,
  "elb.amazonaws.com": 2,
  "awsglobalaccelerator.com": 1,
  "eero.online": 1,
  "eero-stage.online": 1,
  "t3l3p0rt.net": 1,
  "tele.amune.org": 1,
  "apigee.io": 1,
  "siiites.com": 1,
  "appspacehosted.com": 1,
  "appspaceusercontent.com": 1,
  "appudo.net": 1,
  "on-aptible.com": 1,
  "user.aseinet.ne.jp": 1,
  "gv.vc": 1,
  "d.gv.vc": 1,
  "user.party.eus": 1,
  "pimienta.org": 1,
  "poivron.org": 1,
  "potager.org": 1,
  "sweetpepper.org": 1,
  "myasustor.com": 1,
  "cdn.prod.atlassian-dev.net": 1,
  "translated.page": 1,
  "autocode.dev": 1,
  "myfritz.net": 1,
  "onavstack.net": 1,
  "awdev.ca": 2,
  "advisor.ws": 2,
  "ecommerce-shop.pl": 1,
  "b-data.io": 1,
  "backplaneapp.io": 1,
  "balena-devices.com": 1,
  "rs.ba": 1,
  "banzai.cloud": 2,
  "app.banzaicloud.io": 1,
  "backyards.banzaicloud.io": 2,
  "base.ec": 1,
  "official.ec": 1,
  "buyshop.jp": 1,
  "fashionstore.jp": 1,
  "handcrafted.jp": 1,
  "kawaiishop.jp": 1,
  "supersale.jp": 1,
  "theshop.jp": 1,
  "shopselect.net": 1,
  "base.shop": 1,
  "beagleboard.io": 1,
  "beget.app": 2,
  "betainabox.com": 1,
  "bnr.la": 1,
  "bitbucket.io": 1,
  "blackbaudcdn.net": 1,
  "of.je": 1,
  "bluebite.io": 1,
  "boomla.net": 1,
  "boutir.com": 1,
  "boxfuse.io": 1,
  "square7.ch": 1,
  "bplaced.com": 1,
  "bplaced.de": 1,
  "square7.de": 1,
  "bplaced.net": 1,
  "square7.net": 1,
  "shop.brendly.rs": 1,
  "browsersafetymark.io": 1,
  "uk0.bigv.io": 1,
  "dh.bytemark.co.uk": 1,
  "vm.bytemark.co.uk": 1,
  "cafjs.com": 1,
  "mycd.eu": 1,
  "canva-apps.cn": 1,
  "canva-apps.com": 1,
  "drr.ac": 1,
  "uwu.ai": 1,
  "carrd.co": 1,
  "crd.co": 1,
  "ju.mp": 1,
  "ae.org": 1,
  "br.com": 1,
  "cn.com": 1,
  "com.de": 1,
  "com.se": 1,
  "de.com": 1,
  "eu.com": 1,
  "gb.net": 1,
  "hu.net": 1,
  "jp.net": 1,
  "jpn.com": 1,
  "mex.com": 1,
  "ru.com": 1,
  "sa.com": 1,
  "se.net": 1,
  "uk.com": 1,
  "uk.net": 1,
  "us.com": 1,
  "za.bz": 1,
  "za.com": 1,
  "ar.com": 1,
  "hu.com": 1,
  "kr.com": 1,
  "no.com": 1,
  "qc.com": 1,
  "uy.com": 1,
  "africa.com": 1,
  "gr.com": 1,
  "in.net": 1,
  "web.in": 1,
  "us.org": 1,
  "co.com": 1,
  "aus.basketball": 1,
  "nz.basketball": 1,
  "radio.am": 1,
  "radio.fm": 1,
  "c.la": 1,
  "certmgr.org": 1,
  "cx.ua": 1,
  "discourse.group": 1,
  "discourse.team": 1,
  "cleverapps.io": 1,
  "clerk.app": 1,
  "clerkstage.app": 1,
  "lcl.dev": 2,
  "lclstage.dev": 2,
  "stg.dev": 2,
  "stgstage.dev": 2,
  "clickrising.net": 1,
  "c66.me": 1,
  "cloud66.ws": 1,
  "cloud66.zone": 1,
  "jdevcloud.com": 1,
  "wpdevcloud.com": 1,
  "cloudaccess.host": 1,
  "freesite.host": 1,
  "cloudaccess.net": 1,
  "cloudcontrolled.com": 1,
  "cloudcontrolapp.com": 1,
  "cloudera.site": 2,
  "cf-ipfs.com": 1,
  "cloudflare-ipfs.com": 1,
  "trycloudflare.com": 1,
  "pages.dev": 1,
  "r2.dev": 1,
  "workers.dev": 1,
  "wnext.app": 1,
  "co.ca": 1,
  "otap.co": 2,
  "co.cz": 1,
  "c.cdn77.org": 1,
  "cdn77-ssl.net": 1,
  "r.cdn77.net": 1,
  "rsc.cdn77.org": 1,
  "ssl.origin.cdn77-secure.org": 1,
  "cloudns.asia": 1,
  "cloudns.biz": 1,
  "cloudns.club": 1,
  "cloudns.cc": 1,
  "cloudns.eu": 1,
  "cloudns.in": 1,
  "cloudns.info": 1,
  "cloudns.org": 1,
  "cloudns.pro": 1,
  "cloudns.pw": 1,
  "cloudns.us": 1,
  "cnpy.gdn": 1,
  "codeberg.page": 1,
  "co.nl": 1,
  "co.no": 1,
  "webhosting.be": 1,
  "hosting-cluster.nl": 1,
  "ac.ru": 1,
  "edu.ru": 1,
  "gov.ru": 1,
  "int.ru": 1,
  "mil.ru": 1,
  "test.ru": 1,
  "dyn.cosidns.de": 1,
  "dynamisches-dns.de": 1,
  "dnsupdater.de": 1,
  "internet-dns.de": 1,
  "l-o-g-i-n.de": 1,
  "dynamic-dns.info": 1,
  "feste-ip.net": 1,
  "knx-server.net": 1,
  "static-access.net": 1,
  "realm.cz": 1,
  "cryptonomic.net": 2,
  "cupcake.is": 1,
  "curv.dev": 1,
  "customer-oci.com": 2,
  "oci.customer-oci.com": 2,
  "ocp.customer-oci.com": 2,
  "ocs.customer-oci.com": 2,
  "cyon.link": 1,
  "cyon.site": 1,
  "fnwk.site": 1,
  "folionetwork.site": 1,
  "platform0.app": 1,
  "daplie.me": 1,
  "localhost.daplie.me": 1,
  "dattolocal.com": 1,
  "dattorelay.com": 1,
  "dattoweb.com": 1,
  "mydatto.com": 1,
  "dattolocal.net": 1,
  "mydatto.net": 1,
  "biz.dk": 1,
  "co.dk": 1,
  "firm.dk": 1,
  "reg.dk": 1,
  "store.dk": 1,
  "dyndns.dappnode.io": 1,
  "dapps.earth": 2,
  "bzz.dapps.earth": 2,
  "builtwithdark.com": 1,
  "demo.datadetect.com": 1,
  "instance.datadetect.com": 1,
  "edgestack.me": 1,
  "ddns5.com": 1,
  "debian.net": 1,
  "deno.dev": 1,
  "deno-staging.dev": 1,
  "dedyn.io": 1,
  "deta.app": 1,
  "deta.dev": 1,
  "rss.my.id": 2,
  "diher.solutions": 2,
  "discordsays.com": 1,
  "discordsez.com": 1,
  "jozi.biz": 1,
  "dnshome.de": 1,
  "online.th": 1,
  "shop.th": 1,
  "drayddns.com": 1,
  "shoparena.pl": 1,
  "dreamhosters.com": 1,
  "mydrobo.com": 1,
  "drud.io": 1,
  "drud.us": 1,
  "duckdns.org": 1,
  "bip.sh": 1,
  "bitbridge.net": 1,
  "dy.fi": 1,
  "tunk.org": 1,
  "dyndns-at-home.com": 1,
  "dyndns-at-work.com": 1,
  "dyndns-blog.com": 1,
  "dyndns-free.com": 1,
  "dyndns-home.com": 1,
  "dyndns-ip.com": 1,
  "dyndns-mail.com": 1,
  "dyndns-office.com": 1,
  "dyndns-pics.com": 1,
  "dyndns-remote.com": 1,
  "dyndns-server.com": 1,
  "dyndns-web.com": 1,
  "dyndns-wiki.com": 1,
  "dyndns-work.com": 1,
  "dyndns.biz": 1,
  "dyndns.info": 1,
  "dyndns.org": 1,
  "dyndns.tv": 1,
  "at-band-camp.net": 1,
  "ath.cx": 1,
  "barrel-of-knowledge.info": 1,
  "barrell-of-knowledge.info": 1,
  "better-than.tv": 1,
  "blogdns.com": 1,
  "blogdns.net": 1,
  "blogdns.org": 1,
  "blogsite.org": 1,
  "boldlygoingnowhere.org": 1,
  "broke-it.net": 1,
  "buyshouses.net": 1,
  "cechire.com": 1,
  "dnsalias.com": 1,
  "dnsalias.net": 1,
  "dnsalias.org": 1,
  "dnsdojo.com": 1,
  "dnsdojo.net": 1,
  "dnsdojo.org": 1,
  "does-it.net": 1,
  "doesntexist.com": 1,
  "doesntexist.org": 1,
  "dontexist.com": 1,
  "dontexist.net": 1,
  "dontexist.org": 1,
  "doomdns.com": 1,
  "doomdns.org": 1,
  "dvrdns.org": 1,
  "dyn-o-saur.com": 1,
  "dynalias.com": 1,
  "dynalias.net": 1,
  "dynalias.org": 1,
  "dynathome.net": 1,
  "dyndns.ws": 1,
  "endofinternet.net": 1,
  "endofinternet.org": 1,
  "endoftheinternet.org": 1,
  "est-a-la-maison.com": 1,
  "est-a-la-masion.com": 1,
  "est-le-patron.com": 1,
  "est-mon-blogueur.com": 1,
  "for-better.biz": 1,
  "for-more.biz": 1,
  "for-our.info": 1,
  "for-some.biz": 1,
  "for-the.biz": 1,
  "forgot.her.name": 1,
  "forgot.his.name": 1,
  "from-ak.com": 1,
  "from-al.com": 1,
  "from-ar.com": 1,
  "from-az.net": 1,
  "from-ca.com": 1,
  "from-co.net": 1,
  "from-ct.com": 1,
  "from-dc.com": 1,
  "from-de.com": 1,
  "from-fl.com": 1,
  "from-ga.com": 1,
  "from-hi.com": 1,
  "from-ia.com": 1,
  "from-id.com": 1,
  "from-il.com": 1,
  "from-in.com": 1,
  "from-ks.com": 1,
  "from-ky.com": 1,
  "from-la.net": 1,
  "from-ma.com": 1,
  "from-md.com": 1,
  "from-me.org": 1,
  "from-mi.com": 1,
  "from-mn.com": 1,
  "from-mo.com": 1,
  "from-ms.com": 1,
  "from-mt.com": 1,
  "from-nc.com": 1,
  "from-nd.com": 1,
  "from-ne.com": 1,
  "from-nh.com": 1,
  "from-nj.com": 1,
  "from-nm.com": 1,
  "from-nv.com": 1,
  "from-ny.net": 1,
  "from-oh.com": 1,
  "from-ok.com": 1,
  "from-or.com": 1,
  "from-pa.com": 1,
  "from-pr.com": 1,
  "from-ri.com": 1,
  "from-sc.com": 1,
  "from-sd.com": 1,
  "from-tn.com": 1,
  "from-tx.com": 1,
  "from-ut.com": 1,
  "from-va.com": 1,
  "from-vt.com": 1,
  "from-wa.com": 1,
  "from-wi.com": 1,
  "from-wv.com": 1,
  "from-wy.com": 1,
  "ftpaccess.cc": 1,
  "fuettertdasnetz.de": 1,
  "game-host.org": 1,
  "game-server.cc": 1,
  "getmyip.com": 1,
  "gets-it.net": 1,
  "go.dyndns.org": 1,
  "gotdns.com": 1,
  "gotdns.org": 1,
  "groks-the.info": 1,
  "groks-this.info": 1,
  "ham-radio-op.net": 1,
  "here-for-more.info": 1,
  "hobby-site.com": 1,
  "hobby-site.org": 1,
  "home.dyndns.org": 1,
  "homedns.org": 1,
  "homeftp.net": 1,
  "homeftp.org": 1,
  "homeip.net": 1,
  "homelinux.com": 1,
  "homelinux.net": 1,
  "homelinux.org": 1,
  "homeunix.com": 1,
  "homeunix.net": 1,
  "homeunix.org": 1,
  "iamallama.com": 1,
  "in-the-band.net": 1,
  "is-a-anarchist.com": 1,
  "is-a-blogger.com": 1,
  "is-a-bookkeeper.com": 1,
  "is-a-bruinsfan.org": 1,
  "is-a-bulls-fan.com": 1,
  "is-a-candidate.org": 1,
  "is-a-caterer.com": 1,
  "is-a-celticsfan.org": 1,
  "is-a-chef.com": 1,
  "is-a-chef.net": 1,
  "is-a-chef.org": 1,
  "is-a-conservative.com": 1,
  "is-a-cpa.com": 1,
  "is-a-cubicle-slave.com": 1,
  "is-a-democrat.com": 1,
  "is-a-designer.com": 1,
  "is-a-doctor.com": 1,
  "is-a-financialadvisor.com": 1,
  "is-a-geek.com": 1,
  "is-a-geek.net": 1,
  "is-a-geek.org": 1,
  "is-a-green.com": 1,
  "is-a-guru.com": 1,
  "is-a-hard-worker.com": 1,
  "is-a-hunter.com": 1,
  "is-a-knight.org": 1,
  "is-a-landscaper.com": 1,
  "is-a-lawyer.com": 1,
  "is-a-liberal.com": 1,
  "is-a-libertarian.com": 1,
  "is-a-linux-user.org": 1,
  "is-a-llama.com": 1,
  "is-a-musician.com": 1,
  "is-a-nascarfan.com": 1,
  "is-a-nurse.com": 1,
  "is-a-painter.com": 1,
  "is-a-patsfan.org": 1,
  "is-a-personaltrainer.com": 1,
  "is-a-photographer.com": 1,
  "is-a-player.com": 1,
  "is-a-republican.com": 1,
  "is-a-rockstar.com": 1,
  "is-a-socialist.com": 1,
  "is-a-soxfan.org": 1,
  "is-a-student.com": 1,
  "is-a-teacher.com": 1,
  "is-a-techie.com": 1,
  "is-a-therapist.com": 1,
  "is-an-accountant.com": 1,
  "is-an-actor.com": 1,
  "is-an-actress.com": 1,
  "is-an-anarchist.com": 1,
  "is-an-artist.com": 1,
  "is-an-engineer.com": 1,
  "is-an-entertainer.com": 1,
  "is-by.us": 1,
  "is-certified.com": 1,
  "is-found.org": 1,
  "is-gone.com": 1,
  "is-into-anime.com": 1,
  "is-into-cars.com": 1,
  "is-into-cartoons.com": 1,
  "is-into-games.com": 1,
  "is-leet.com": 1,
  "is-lost.org": 1,
  "is-not-certified.com": 1,
  "is-saved.org": 1,
  "is-slick.com": 1,
  "is-uberleet.com": 1,
  "is-very-bad.org": 1,
  "is-very-evil.org": 1,
  "is-very-good.org": 1,
  "is-very-nice.org": 1,
  "is-very-sweet.org": 1,
  "is-with-theband.com": 1,
  "isa-geek.com": 1,
  "isa-geek.net": 1,
  "isa-geek.org": 1,
  "isa-hockeynut.com": 1,
  "issmarterthanyou.com": 1,
  "isteingeek.de": 1,
  "istmein.de": 1,
  "kicks-ass.net": 1,
  "kicks-ass.org": 1,
  "knowsitall.info": 1,
  "land-4-sale.us": 1,
  "lebtimnetz.de": 1,
  "leitungsen.de": 1,
  "likes-pie.com": 1,
  "likescandy.com": 1,
  "merseine.nu": 1,
  "mine.nu": 1,
  "misconfused.org": 1,
  "mypets.ws": 1,
  "myphotos.cc": 1,
  "neat-url.com": 1,
  "office-on-the.net": 1,
  "on-the-web.tv": 1,
  "podzone.net": 1,
  "podzone.org": 1,
  "readmyblog.org": 1,
  "saves-the-whales.com": 1,
  "scrapper-site.net": 1,
  "scrapping.cc": 1,
  "selfip.biz": 1,
  "selfip.com": 1,
  "selfip.info": 1,
  "selfip.net": 1,
  "selfip.org": 1,
  "sells-for-less.com": 1,
  "sells-for-u.com": 1,
  "sells-it.net": 1,
  "sellsyourhome.org": 1,
  "servebbs.com": 1,
  "servebbs.net": 1,
  "servebbs.org": 1,
  "serveftp.net": 1,
  "serveftp.org": 1,
  "servegame.org": 1,
  "shacknet.nu": 1,
  "simple-url.com": 1,
  "space-to-rent.com": 1,
  "stuff-4-sale.org": 1,
  "stuff-4-sale.us": 1,
  "teaches-yoga.com": 1,
  "thruhere.net": 1,
  "traeumtgerade.de": 1,
  "webhop.biz": 1,
  "webhop.info": 1,
  "webhop.net": 1,
  "webhop.org": 1,
  "worse-than.tv": 1,
  "writesthisblog.com": 1,
  "ddnss.de": 1,
  "dyn.ddnss.de": 1,
  "dyndns.ddnss.de": 1,
  "dyndns1.de": 1,
  "dyn-ip24.de": 1,
  "home-webserver.de": 1,
  "dyn.home-webserver.de": 1,
  "myhome-server.de": 1,
  "ddnss.org": 1,
  "definima.net": 1,
  "definima.io": 1,
  "ondigitalocean.app": 1,
  "digitaloceanspaces.com": 2,
  "bci.dnstrace.pro": 1,
  "ddnsfree.com": 1,
  "ddnsgeek.com": 1,
  "giize.com": 1,
  "gleeze.com": 1,
  "kozow.com": 1,
  "loseyourip.com": 1,
  "ooguy.com": 1,
  "theworkpc.com": 1,
  "casacam.net": 1,
  "dynu.net": 1,
  "accesscam.org": 1,
  "camdvr.org": 1,
  "freeddns.org": 1,
  "mywire.org": 1,
  "webredirect.org": 1,
  "myddns.rocks": 1,
  "blogsite.xyz": 1,
  "dynv6.net": 1,
  "e4.cz": 1,
  "easypanel.app": 1,
  "easypanel.host": 1,
  "elementor.cloud": 1,
  "elementor.cool": 1,
  "en-root.fr": 1,
  "mytuleap.com": 1,
  "tuleap-partners.com": 1,
  "encr.app": 1,
  "encoreapi.com": 1,
  "onred.one": 1,
  "staging.onred.one": 1,
  "eu.encoway.cloud": 1,
  "eu.org": 1,
  "al.eu.org": 1,
  "asso.eu.org": 1,
  "at.eu.org": 1,
  "au.eu.org": 1,
  "be.eu.org": 1,
  "bg.eu.org": 1,
  "ca.eu.org": 1,
  "cd.eu.org": 1,
  "ch.eu.org": 1,
  "cn.eu.org": 1,
  "cy.eu.org": 1,
  "cz.eu.org": 1,
  "de.eu.org": 1,
  "dk.eu.org": 1,
  "edu.eu.org": 1,
  "ee.eu.org": 1,
  "es.eu.org": 1,
  "fi.eu.org": 1,
  "fr.eu.org": 1,
  "gr.eu.org": 1,
  "hr.eu.org": 1,
  "hu.eu.org": 1,
  "ie.eu.org": 1,
  "il.eu.org": 1,
  "in.eu.org": 1,
  "int.eu.org": 1,
  "is.eu.org": 1,
  "it.eu.org": 1,
  "jp.eu.org": 1,
  "kr.eu.org": 1,
  "lt.eu.org": 1,
  "lu.eu.org": 1,
  "lv.eu.org": 1,
  "mc.eu.org": 1,
  "me.eu.org": 1,
  "mk.eu.org": 1,
  "mt.eu.org": 1,
  "my.eu.org": 1,
  "net.eu.org": 1,
  "ng.eu.org": 1,
  "nl.eu.org": 1,
  "no.eu.org": 1,
  "nz.eu.org": 1,
  "paris.eu.org": 1,
  "pl.eu.org": 1,
  "pt.eu.org": 1,
  "q-a.eu.org": 1,
  "ro.eu.org": 1,
  "ru.eu.org": 1,
  "se.eu.org": 1,
  "si.eu.org": 1,
  "sk.eu.org": 1,
  "tr.eu.org": 1,
  "uk.eu.org": 1,
  "us.eu.org": 1,
  "eurodir.ru": 1,
  "eu-1.evennode.com": 1,
  "eu-2.evennode.com": 1,
  "eu-3.evennode.com": 1,
  "eu-4.evennode.com": 1,
  "us-1.evennode.com": 1,
  "us-2.evennode.com": 1,
  "us-3.evennode.com": 1,
  "us-4.evennode.com": 1,
  "twmail.cc": 1,
  "twmail.net": 1,
  "twmail.org": 1,
  "mymailer.com.tw": 1,
  "url.tw": 1,
  "onfabrica.com": 1,
  "apps.fbsbx.com": 1,
  "ru.net": 1,
  "adygeya.ru": 1,
  "bashkiria.ru": 1,
  "bir.ru": 1,
  "cbg.ru": 1,
  "com.ru": 1,
  "dagestan.ru": 1,
  "grozny.ru": 1,
  "kalmykia.ru": 1,
  "kustanai.ru": 1,
  "marine.ru": 1,
  "mordovia.ru": 1,
  "msk.ru": 1,
  "mytis.ru": 1,
  "nalchik.ru": 1,
  "nov.ru": 1,
  "pyatigorsk.ru": 1,
  "spb.ru": 1,
  "vladikavkaz.ru": 1,
  "vladimir.ru": 1,
  "abkhazia.su": 1,
  "adygeya.su": 1,
  "aktyubinsk.su": 1,
  "arkhangelsk.su": 1,
  "armenia.su": 1,
  "ashgabad.su": 1,
  "azerbaijan.su": 1,
  "balashov.su": 1,
  "bashkiria.su": 1,
  "bryansk.su": 1,
  "bukhara.su": 1,
  "chimkent.su": 1,
  "dagestan.su": 1,
  "east-kazakhstan.su": 1,
  "exnet.su": 1,
  "georgia.su": 1,
  "grozny.su": 1,
  "ivanovo.su": 1,
  "jambyl.su": 1,
  "kalmykia.su": 1,
  "kaluga.su": 1,
  "karacol.su": 1,
  "karaganda.su": 1,
  "karelia.su": 1,
  "khakassia.su": 1,
  "krasnodar.su": 1,
  "kurgan.su": 1,
  "kustanai.su": 1,
  "lenug.su": 1,
  "mangyshlak.su": 1,
  "mordovia.su": 1,
  "msk.su": 1,
  "murmansk.su": 1,
  "nalchik.su": 1,
  "navoi.su": 1,
  "north-kazakhstan.su": 1,
  "nov.su": 1,
  "obninsk.su": 1,
  "penza.su": 1,
  "pokrovsk.su": 1,
  "sochi.su": 1,
  "spb.su": 1,
  "tashkent.su": 1,
  "termez.su": 1,
  "togliatti.su": 1,
  "troitsk.su": 1,
  "tselinograd.su": 1,
  "tula.su": 1,
  "tuva.su": 1,
  "vladikavkaz.su": 1,
  "vladimir.su": 1,
  "vologda.su": 1,
  "channelsdvr.net": 1,
  "u.channelsdvr.net": 1,
  "edgecompute.app": 1,
  "fastly-edge.com": 1,
  "fastly-terrarium.com": 1,
  "fastlylb.net": 1,
  "map.fastlylb.net": 1,
  "freetls.fastly.net": 1,
  "map.fastly.net": 1,
  "a.prod.fastly.net": 1,
  "global.prod.fastly.net": 1,
  "a.ssl.fastly.net": 1,
  "b.ssl.fastly.net": 1,
  "global.ssl.fastly.net": 1,
  "user.fm": 2,
  "fastvps-server.com": 1,
  "fastvps.host": 1,
  "myfast.host": 1,
  "fastvps.site": 1,
  "myfast.space": 1,
  "fedorainfracloud.org": 1,
  "fedorapeople.org": 1,
  "cloud.fedoraproject.org": 1,
  "app.os.fedoraproject.org": 1,
  "app.os.stg.fedoraproject.org": 1,
  "conn.uk": 1,
  "copro.uk": 1,
  "hosp.uk": 1,
  "mydobiss.com": 1,
  "fh-muenster.io": 1,
  "filegear.me": 1,
  "filegear-au.me": 1,
  "filegear-de.me": 1,
  "filegear-gb.me": 1,
  "filegear-ie.me": 1,
  "filegear-jp.me": 1,
  "filegear-sg.me": 1,
  "firebaseapp.com": 1,
  "fireweb.app": 1,
  "flap.id": 1,
  "onflashdrive.app": 1,
  "fldrv.com": 1,
  "fly.dev": 1,
  "edgeapp.net": 1,
  "shw.io": 1,
  "flynnhosting.net": 1,
  "forgeblocks.com": 1,
  "id.forgerock.io": 1,
  "framer.app": 1,
  "framercanvas.com": 1,
  "framer.media": 1,
  "framer.photos": 1,
  "framer.website": 1,
  "framer.wiki": 1,
  "frusky.de": 2,
  "ravpage.co.il": 1,
  "0e.vc": 1,
  "freebox-os.com": 1,
  "freeboxos.com": 1,
  "fbx-os.fr": 1,
  "fbxos.fr": 1,
  "freebox-os.fr": 1,
  "freeboxos.fr": 1,
  "freedesktop.org": 1,
  "freemyip.com": 1,
  "wien.funkfeuer.at": 1,
  "futurecms.at": 2,
  "ex.futurecms.at": 2,
  "in.futurecms.at": 2,
  "futurehosting.at": 1,
  "futuremailing.at": 1,
  "ex.ortsinfo.at": 2,
  "kunden.ortsinfo.at": 2,
  "statics.cloud": 2,
  "independent-commission.uk": 1,
  "independent-inquest.uk": 1,
  "independent-inquiry.uk": 1,
  "independent-panel.uk": 1,
  "independent-review.uk": 1,
  "public-inquiry.uk": 1,
  "royal-commission.uk": 1,
  "campaign.gov.uk": 1,
  "service.gov.uk": 1,
  "api.gov.uk": 1,
  "gehirn.ne.jp": 1,
  "usercontent.jp": 1,
  "gentapps.com": 1,
  "gentlentapis.com": 1,
  "lab.ms": 1,
  "cdn-edges.net": 1,
  "ghost.io": 1,
  "gsj.bz": 1,
  "githubusercontent.com": 1,
  "githubpreview.dev": 1,
  "github.io": 1,
  "gitlab.io": 1,
  "gitapp.si": 1,
  "gitpage.si": 1,
  "glitch.me": 1,
  "nog.community": 1,
  "co.ro": 1,
  "shop.ro": 1,
  "lolipop.io": 1,
  "angry.jp": 1,
  "babyblue.jp": 1,
  "babymilk.jp": 1,
  "backdrop.jp": 1,
  "bambina.jp": 1,
  "bitter.jp": 1,
  "blush.jp": 1,
  "boo.jp": 1,
  "boy.jp": 1,
  "boyfriend.jp": 1,
  "but.jp": 1,
  "candypop.jp": 1,
  "capoo.jp": 1,
  "catfood.jp": 1,
  "cheap.jp": 1,
  "chicappa.jp": 1,
  "chillout.jp": 1,
  "chips.jp": 1,
  "chowder.jp": 1,
  "chu.jp": 1,
  "ciao.jp": 1,
  "cocotte.jp": 1,
  "coolblog.jp": 1,
  "cranky.jp": 1,
  "cutegirl.jp": 1,
  "daa.jp": 1,
  "deca.jp": 1,
  "deci.jp": 1,
  "digick.jp": 1,
  "egoism.jp": 1,
  "fakefur.jp": 1,
  "fem.jp": 1,
  "flier.jp": 1,
  "floppy.jp": 1,
  "fool.jp": 1,
  "frenchkiss.jp": 1,
  "girlfriend.jp": 1,
  "girly.jp": 1,
  "gloomy.jp": 1,
  "gonna.jp": 1,
  "greater.jp": 1,
  "hacca.jp": 1,
  "heavy.jp": 1,
  "her.jp": 1,
  "hiho.jp": 1,
  "hippy.jp": 1,
  "holy.jp": 1,
  "hungry.jp": 1,
  "icurus.jp": 1,
  "itigo.jp": 1,
  "jellybean.jp": 1,
  "kikirara.jp": 1,
  "kill.jp": 1,
  "kilo.jp": 1,
  "kuron.jp": 1,
  "littlestar.jp": 1,
  "lolipopmc.jp": 1,
  "lolitapunk.jp": 1,
  "lomo.jp": 1,
  "lovepop.jp": 1,
  "lovesick.jp": 1,
  "main.jp": 1,
  "mods.jp": 1,
  "mond.jp": 1,
  "mongolian.jp": 1,
  "moo.jp": 1,
  "namaste.jp": 1,
  "nikita.jp": 1,
  "nobushi.jp": 1,
  "noor.jp": 1,
  "oops.jp": 1,
  "parallel.jp": 1,
  "parasite.jp": 1,
  "pecori.jp": 1,
  "peewee.jp": 1,
  "penne.jp": 1,
  "pepper.jp": 1,
  "perma.jp": 1,
  "pigboat.jp": 1,
  "pinoko.jp": 1,
  "punyu.jp": 1,
  "pupu.jp": 1,
  "pussycat.jp": 1,
  "pya.jp": 1,
  "raindrop.jp": 1,
  "readymade.jp": 1,
  "sadist.jp": 1,
  "schoolbus.jp": 1,
  "secret.jp": 1,
  "staba.jp": 1,
  "stripper.jp": 1,
  "sub.jp": 1,
  "sunnyday.jp": 1,
  "thick.jp": 1,
  "tonkotsu.jp": 1,
  "under.jp": 1,
  "upper.jp": 1,
  "velvet.jp": 1,
  "verse.jp": 1,
  "versus.jp": 1,
  "vivian.jp": 1,
  "watson.jp": 1,
  "weblike.jp": 1,
  "whitesnow.jp": 1,
  "zombie.jp": 1,
  "heteml.net": 1,
  "cloudapps.digital": 1,
  "london.cloudapps.digital": 1,
  "pymnt.uk": 1,
  "homeoffice.gov.uk": 1,
  "ro.im": 1,
  "goip.de": 1,
  "run.app": 1,
  "a.run.app": 1,
  "web.app": 1,
  "0emm.com": 2,
  "appspot.com": 1,
  "r.appspot.com": 2,
  "codespot.com": 1,
  "googleapis.com": 1,
  "googlecode.com": 1,
  "pagespeedmobilizer.com": 1,
  "publishproxy.com": 1,
  "withgoogle.com": 1,
  "withyoutube.com": 1,
  "gateway.dev": 2,
  "cloud.goog": 1,
  "translate.goog": 1,
  "usercontent.goog": 2,
  "cloudfunctions.net": 1,
  "blogspot.ae": 1,
  "blogspot.al": 1,
  "blogspot.am": 1,
  "blogspot.ba": 1,
  "blogspot.be": 1,
  "blogspot.bg": 1,
  "blogspot.bj": 1,
  "blogspot.ca": 1,
  "blogspot.cf": 1,
  "blogspot.ch": 1,
  "blogspot.cl": 1,
  "blogspot.co.at": 1,
  "blogspot.co.id": 1,
  "blogspot.co.il": 1,
  "blogspot.co.ke": 1,
  "blogspot.co.nz": 1,
  "blogspot.co.uk": 1,
  "blogspot.co.za": 1,
  "blogspot.com": 1,
  "blogspot.com.ar": 1,
  "blogspot.com.au": 1,
  "blogspot.com.br": 1,
  "blogspot.com.by": 1,
  "blogspot.com.co": 1,
  "blogspot.com.cy": 1,
  "blogspot.com.ee": 1,
  "blogspot.com.eg": 1,
  "blogspot.com.es": 1,
  "blogspot.com.mt": 1,
  "blogspot.com.ng": 1,
  "blogspot.com.tr": 1,
  "blogspot.com.uy": 1,
  "blogspot.cv": 1,
  "blogspot.cz": 1,
  "blogspot.de": 1,
  "blogspot.dk": 1,
  "blogspot.fi": 1,
  "blogspot.fr": 1,
  "blogspot.gr": 1,
  "blogspot.hk": 1,
  "blogspot.hr": 1,
  "blogspot.hu": 1,
  "blogspot.ie": 1,
  "blogspot.in": 1,
  "blogspot.is": 1,
  "blogspot.it": 1,
  "blogspot.jp": 1,
  "blogspot.kr": 1,
  "blogspot.li": 1,
  "blogspot.lt": 1,
  "blogspot.lu": 1,
  "blogspot.md": 1,
  "blogspot.mk": 1,
  "blogspot.mr": 1,
  "blogspot.mx": 1,
  "blogspot.my": 1,
  "blogspot.nl": 1,
  "blogspot.no": 1,
  "blogspot.pe": 1,
  "blogspot.pt": 1,
  "blogspot.qa": 1,
  "blogspot.re": 1,
  "blogspot.ro": 1,
  "blogspot.rs": 1,
  "blogspot.ru": 1,
  "blogspot.se": 1,
  "blogspot.sg": 1,
  "blogspot.si": 1,
  "blogspot.sk": 1,
  "blogspot.sn": 1,
  "blogspot.td": 1,
  "blogspot.tw": 1,
  "blogspot.ug": 1,
  "blogspot.vn": 1,
  "goupile.fr": 1,
  "gov.nl": 1,
  "awsmppl.com": 1,
  "xn--gnstigbestellen-zvb.de": 1,
  "xn--gnstigliefern-wob.de": 1,
  "fin.ci": 1,
  "free.hr": 1,
  "caa.li": 1,
  "ua.rs": 1,
  "conf.se": 1,
  "hs.zone": 1,
  "hs.run": 1,
  "hashbang.sh": 1,
  "hasura.app": 1,
  "hasura-app.io": 1,
  "pages.it.hs-heilbronn.de": 1,
  "hepforge.org": 1,
  "herokuapp.com": 1,
  "herokussl.com": 1,
  "ravendb.cloud": 1,
  "ravendb.community": 1,
  "ravendb.me": 1,
  "development.run": 1,
  "ravendb.run": 1,
  "homesklep.pl": 1,
  "secaas.hk": 1,
  "hoplix.shop": 1,
  "orx.biz": 1,
  "biz.gl": 1,
  "col.ng": 1,
  "firm.ng": 1,
  "gen.ng": 1,
  "ltd.ng": 1,
  "ngo.ng": 1,
  "edu.scot": 1,
  "sch.so": 1,
  "ie.ua": 1,
  "hostyhosting.io": 1,
  "xn--hkkinen-5wa.fi": 1,
  "moonscale.io": 2,
  "moonscale.net": 1,
  "iki.fi": 1,
  "ibxos.it": 1,
  "iliadboxos.it": 1,
  "impertrixcdn.com": 1,
  "impertrix.com": 1,
  "smushcdn.com": 1,
  "wphostedmail.com": 1,
  "wpmucdn.com": 1,
  "tempurl.host": 1,
  "wpmudev.host": 1,
  "dyn-berlin.de": 1,
  "in-berlin.de": 1,
  "in-brb.de": 1,
  "in-butter.de": 1,
  "in-dsl.de": 1,
  "in-dsl.net": 1,
  "in-dsl.org": 1,
  "in-vpn.de": 1,
  "in-vpn.net": 1,
  "in-vpn.org": 1,
  "biz.at": 1,
  "info.at": 1,
  "info.cx": 1,
  "ac.leg.br": 1,
  "al.leg.br": 1,
  "am.leg.br": 1,
  "ap.leg.br": 1,
  "ba.leg.br": 1,
  "ce.leg.br": 1,
  "df.leg.br": 1,
  "es.leg.br": 1,
  "go.leg.br": 1,
  "ma.leg.br": 1,
  "mg.leg.br": 1,
  "ms.leg.br": 1,
  "mt.leg.br": 1,
  "pa.leg.br": 1,
  "pb.leg.br": 1,
  "pe.leg.br": 1,
  "pi.leg.br": 1,
  "pr.leg.br": 1,
  "rj.leg.br": 1,
  "rn.leg.br": 1,
  "ro.leg.br": 1,
  "rr.leg.br": 1,
  "rs.leg.br": 1,
  "sc.leg.br": 1,
  "se.leg.br": 1,
  "sp.leg.br": 1,
  "to.leg.br": 1,
  "pixolino.com": 1,
  "na4u.ru": 1,
  "iopsys.se": 1,
  "ipifony.net": 1,
  "iservschule.de": 1,
  "mein-iserv.de": 1,
  "schulplattform.de": 1,
  "schulserver.de": 1,
  "test-iserv.de": 1,
  "iserv.dev": 1,
  "iobb.net": 1,
  "mel.cloudlets.com.au": 1,
  "cloud.interhostsolutions.be": 1,
  "mycloud.by": 1,
  "alp1.ae.flow.ch": 1,
  "appengine.flow.ch": 1,
  "es-1.axarnet.cloud": 1,
  "diadem.cloud": 1,
  "vip.jelastic.cloud": 1,
  "jele.cloud": 1,
  "it1.eur.aruba.jenv-aruba.cloud": 1,
  "it1.jenv-aruba.cloud": 1,
  "keliweb.cloud": 1,
  "cs.keliweb.cloud": 1,
  "oxa.cloud": 1,
  "tn.oxa.cloud": 1,
  "uk.oxa.cloud": 1,
  "primetel.cloud": 1,
  "uk.primetel.cloud": 1,
  "ca.reclaim.cloud": 1,
  "uk.reclaim.cloud": 1,
  "us.reclaim.cloud": 1,
  "ch.trendhosting.cloud": 1,
  "de.trendhosting.cloud": 1,
  "jele.club": 1,
  "amscompute.com": 1,
  "dopaas.com": 1,
  "paas.hosted-by-previder.com": 1,
  "rag-cloud.hosteur.com": 1,
  "rag-cloud-ch.hosteur.com": 1,
  "jcloud.ik-server.com": 1,
  "jcloud-ver-jpc.ik-server.com": 1,
  "demo.jelastic.com": 1,
  "kilatiron.com": 1,
  "paas.massivegrid.com": 1,
  "jed.wafaicloud.com": 1,
  "lon.wafaicloud.com": 1,
  "ryd.wafaicloud.com": 1,
  "j.scaleforce.com.cy": 1,
  "jelastic.dogado.eu": 1,
  "fi.cloudplatform.fi": 1,
  "demo.datacenter.fi": 1,
  "paas.datacenter.fi": 1,
  "jele.host": 1,
  "mircloud.host": 1,
  "paas.beebyte.io": 1,
  "sekd1.beebyteapp.io": 1,
  "jele.io": 1,
  "cloud-fr1.unispace.io": 1,
  "jc.neen.it": 1,
  "cloud.jelastic.open.tim.it": 1,
  "jcloud.kz": 1,
  "upaas.kazteleport.kz": 1,
  "cloudjiffy.net": 1,
  "fra1-de.cloudjiffy.net": 1,
  "west1-us.cloudjiffy.net": 1,
  "jls-sto1.elastx.net": 1,
  "jls-sto2.elastx.net": 1,
  "jls-sto3.elastx.net": 1,
  "faststacks.net": 1,
  "fr-1.paas.massivegrid.net": 1,
  "lon-1.paas.massivegrid.net": 1,
  "lon-2.paas.massivegrid.net": 1,
  "ny-1.paas.massivegrid.net": 1,
  "ny-2.paas.massivegrid.net": 1,
  "sg-1.paas.massivegrid.net": 1,
  "jelastic.saveincloud.net": 1,
  "nordeste-idc.saveincloud.net": 1,
  "j.scaleforce.net": 1,
  "jelastic.tsukaeru.net": 1,
  "sdscloud.pl": 1,
  "unicloud.pl": 1,
  "mircloud.ru": 1,
  "jelastic.regruhosting.ru": 1,
  "enscaled.sg": 1,
  "jele.site": 1,
  "jelastic.team": 1,
  "orangecloud.tn": 1,
  "j.layershift.co.uk": 1,
  "phx.enscaled.us": 1,
  "mircloud.us": 1,
  "myjino.ru": 1,
  "hosting.myjino.ru": 2,
  "landing.myjino.ru": 2,
  "spectrum.myjino.ru": 2,
  "vps.myjino.ru": 2,
  "jotelulu.cloud": 1,
  "triton.zone": 2,
  "cns.joyent.com": 2,
  "js.org": 1,
  "kaas.gg": 1,
  "khplay.nl": 1,
  "ktistory.com": 1,
  "kapsi.fi": 1,
  "keymachine.de": 1,
  "kinghost.net": 1,
  "uni5.net": 1,
  "knightpoint.systems": 1,
  "koobin.events": 1,
  "oya.to": 1,
  "kuleuven.cloud": 1,
  "ezproxy.kuleuven.be": 1,
  "co.krd": 1,
  "edu.krd": 1,
  "krellian.net": 1,
  "webthings.io": 1,
  "git-repos.de": 1,
  "lcube-server.de": 1,
  "svn-repos.de": 1,
  "leadpages.co": 1,
  "lpages.co": 1,
  "lpusercontent.com": 1,
  "lelux.site": 1,
  "co.business": 1,
  "co.education": 1,
  "co.events": 1,
  "co.financial": 1,
  "co.network": 1,
  "co.place": 1,
  "co.technology": 1,
  "app.lmpm.com": 1,
  "linkyard.cloud": 1,
  "linkyard-cloud.ch": 1,
  "members.linode.com": 1,
  "nodebalancer.linode.com": 2,
  "linodeobjects.com": 2,
  "ip.linodeusercontent.com": 1,
  "we.bs": 1,
  "user.localcert.dev": 2,
  "localzone.xyz": 1,
  "loginline.app": 1,
  "loginline.dev": 1,
  "loginline.io": 1,
  "loginline.services": 1,
  "loginline.site": 1,
  "servers.run": 1,
  "lohmus.me": 1,
  "krasnik.pl": 1,
  "leczna.pl": 1,
  "lubartow.pl": 1,
  "lublin.pl": 1,
  "poniatowa.pl": 1,
  "swidnik.pl": 1,
  "glug.org.uk": 1,
  "lug.org.uk": 1,
  "lugs.org.uk": 1,
  "barsy.bg": 1,
  "barsy.co.uk": 1,
  "barsyonline.co.uk": 1,
  "barsycenter.com": 1,
  "barsyonline.com": 1,
  "barsy.club": 1,
  "barsy.de": 1,
  "barsy.eu": 1,
  "barsy.in": 1,
  "barsy.info": 1,
  "barsy.io": 1,
  "barsy.me": 1,
  "barsy.menu": 1,
  "barsy.mobi": 1,
  "barsy.net": 1,
  "barsy.online": 1,
  "barsy.org": 1,
  "barsy.pro": 1,
  "barsy.pub": 1,
  "barsy.ro": 1,
  "barsy.shop": 1,
  "barsy.site": 1,
  "barsy.support": 1,
  "barsy.uk": 1,
  "magentosite.cloud": 2,
  "mayfirst.info": 1,
  "mayfirst.org": 1,
  "hb.cldmail.ru": 1,
  "cn.vu": 1,
  "mazeplay.com": 1,
  "mcpe.me": 1,
  "mcdir.me": 1,
  "mcdir.ru": 1,
  "mcpre.ru": 1,
  "vps.mcdir.ru": 1,
  "mediatech.by": 1,
  "mediatech.dev": 1,
  "hra.health": 1,
  "miniserver.com": 1,
  "memset.net": 1,
  "messerli.app": 1,
  "cloud.metacentrum.cz": 2,
  "custom.metacentrum.cz": 1,
  "flt.cloud.muni.cz": 1,
  "usr.cloud.muni.cz": 1,
  "meteorapp.com": 1,
  "eu.meteorapp.com": 1,
  "co.pl": 1,
  "azurecontainer.io": 2,
  "azurewebsites.net": 1,
  "azure-mobile.net": 1,
  "cloudapp.net": 1,
  "azurestaticapps.net": 1,
  "1.azurestaticapps.net": 1,
  "2.azurestaticapps.net": 1,
  "3.azurestaticapps.net": 1,
  "4.azurestaticapps.net": 1,
  "5.azurestaticapps.net": 1,
  "6.azurestaticapps.net": 1,
  "7.azurestaticapps.net": 1,
  "centralus.azurestaticapps.net": 1,
  "eastasia.azurestaticapps.net": 1,
  "eastus2.azurestaticapps.net": 1,
  "westeurope.azurestaticapps.net": 1,
  "westus2.azurestaticapps.net": 1,
  "csx.cc": 1,
  "mintere.site": 1,
  "forte.id": 1,
  "mozilla-iot.org": 1,
  "bmoattachments.org": 1,
  "net.ru": 1,
  "org.ru": 1,
  "pp.ru": 1,
  "hostedpi.com": 1,
  "customer.mythic-beasts.com": 1,
  "caracal.mythic-beasts.com": 1,
  "fentiger.mythic-beasts.com": 1,
  "lynx.mythic-beasts.com": 1,
  "ocelot.mythic-beasts.com": 1,
  "oncilla.mythic-beasts.com": 1,
  "onza.mythic-beasts.com": 1,
  "sphinx.mythic-beasts.com": 1,
  "vs.mythic-beasts.com": 1,
  "x.mythic-beasts.com": 1,
  "yali.mythic-beasts.com": 1,
  "cust.retrosnub.co.uk": 1,
  "ui.nabu.casa": 1,
  "cloud.nospamproxy.com": 1,
  "netlify.app": 1,
  "4u.com": 1,
  "ngrok.app": 1,
  "ngrok-free.app": 1,
  "ngrok.dev": 1,
  "ngrok-free.dev": 1,
  "ngrok.io": 1,
  "ap.ngrok.io": 1,
  "au.ngrok.io": 1,
  "eu.ngrok.io": 1,
  "in.ngrok.io": 1,
  "jp.ngrok.io": 1,
  "sa.ngrok.io": 1,
  "us.ngrok.io": 1,
  "ngrok.pizza": 1,
  "torun.pl": 1,
  "nh-serv.co.uk": 1,
  "nfshost.com": 1,
  "developer.app": 2,
  "noop.app": 1,
  "northflank.app": 2,
  "build.run": 2,
  "code.run": 2,
  "database.run": 2,
  "migration.run": 2,
  "noticeable.news": 1,
  "dnsking.ch": 1,
  "mypi.co": 1,
  "n4t.co": 1,
  "001www.com": 1,
  "ddnslive.com": 1,
  "myiphost.com": 1,
  "forumz.info": 1,
  "16-b.it": 1,
  "32-b.it": 1,
  "64-b.it": 1,
  "soundcast.me": 1,
  "tcp4.me": 1,
  "dnsup.net": 1,
  "hicam.net": 1,
  "now-dns.net": 1,
  "ownip.net": 1,
  "vpndns.net": 1,
  "dynserv.org": 1,
  "now-dns.org": 1,
  "x443.pw": 1,
  "now-dns.top": 1,
  "ntdll.top": 1,
  "freeddns.us": 1,
  "crafting.xyz": 1,
  "zapto.xyz": 1,
  "nsupdate.info": 1,
  "nerdpol.ovh": 1,
  "blogsyte.com": 1,
  "brasilia.me": 1,
  "cable-modem.org": 1,
  "ciscofreak.com": 1,
  "collegefan.org": 1,
  "couchpotatofries.org": 1,
  "damnserver.com": 1,
  "ddns.me": 1,
  "ditchyourip.com": 1,
  "dnsfor.me": 1,
  "dnsiskinky.com": 1,
  "dvrcam.info": 1,
  "dynns.com": 1,
  "eating-organic.net": 1,
  "fantasyleague.cc": 1,
  "geekgalaxy.com": 1,
  "golffan.us": 1,
  "health-carereform.com": 1,
  "homesecuritymac.com": 1,
  "homesecuritypc.com": 1,
  "hopto.me": 1,
  "ilovecollege.info": 1,
  "loginto.me": 1,
  "mlbfan.org": 1,
  "mmafan.biz": 1,
  "myactivedirectory.com": 1,
  "mydissent.net": 1,
  "myeffect.net": 1,
  "mymediapc.net": 1,
  "mypsx.net": 1,
  "mysecuritycamera.com": 1,
  "mysecuritycamera.net": 1,
  "mysecuritycamera.org": 1,
  "net-freaks.com": 1,
  "nflfan.org": 1,
  "nhlfan.net": 1,
  "no-ip.ca": 1,
  "no-ip.co.uk": 1,
  "no-ip.net": 1,
  "noip.us": 1,
  "onthewifi.com": 1,
  "pgafan.net": 1,
  "point2this.com": 1,
  "pointto.us": 1,
  "privatizehealthinsurance.net": 1,
  "quicksytes.com": 1,
  "read-books.org": 1,
  "securitytactics.com": 1,
  "serveexchange.com": 1,
  "servehumour.com": 1,
  "servep2p.com": 1,
  "servesarcasm.com": 1,
  "stufftoread.com": 1,
  "ufcfan.org": 1,
  "unusualperson.com": 1,
  "workisboring.com": 1,
  "3utilities.com": 1,
  "bounceme.net": 1,
  "ddns.net": 1,
  "ddnsking.com": 1,
  "gotdns.ch": 1,
  "hopto.org": 1,
  "myftp.biz": 1,
  "myftp.org": 1,
  "myvnc.com": 1,
  "no-ip.biz": 1,
  "no-ip.info": 1,
  "no-ip.org": 1,
  "noip.me": 1,
  "redirectme.net": 1,
  "servebeer.com": 1,
  "serveblog.net": 1,
  "servecounterstrike.com": 1,
  "serveftp.com": 1,
  "servegame.com": 1,
  "servehalflife.com": 1,
  "servehttp.com": 1,
  "serveirc.com": 1,
  "serveminecraft.net": 1,
  "servemp3.com": 1,
  "servepics.com": 1,
  "servequake.com": 1,
  "sytes.net": 1,
  "webhop.me": 1,
  "zapto.org": 1,
  "stage.nodeart.io": 1,
  "pcloud.host": 1,
  "nyc.mn": 1,
  "static.observableusercontent.com": 1,
  "cya.gg": 1,
  "omg.lol": 1,
  "cloudycluster.net": 1,
  "omniwe.site": 1,
  "123hjemmeside.dk": 1,
  "123hjemmeside.no": 1,
  "123homepage.it": 1,
  "123kotisivu.fi": 1,
  "123minsida.se": 1,
  "123miweb.es": 1,
  "123paginaweb.pt": 1,
  "123sait.ru": 1,
  "123siteweb.fr": 1,
  "123webseite.at": 1,
  "123webseite.de": 1,
  "123website.be": 1,
  "123website.ch": 1,
  "123website.lu": 1,
  "123website.nl": 1,
  "service.one": 1,
  "simplesite.com": 1,
  "simplesite.com.br": 1,
  "simplesite.gr": 1,
  "simplesite.pl": 1,
  "nid.io": 1,
  "opensocial.site": 1,
  "opencraft.hosting": 1,
  "orsites.com": 1,
  "operaunite.com": 1,
  "tech.orange": 1,
  "authgear-staging.com": 1,
  "authgearapps.com": 1,
  "skygearapp.com": 1,
  "outsystemscloud.com": 1,
  "webpaas.ovh.net": 2,
  "hosting.ovh.net": 2,
  "ownprovider.com": 1,
  "own.pm": 1,
  "owo.codes": 2,
  "ox.rs": 1,
  "oy.lc": 1,
  "pgfog.com": 1,
  "pagefrontapp.com": 1,
  "pagexl.com": 1,
  "paywhirl.com": 2,
  "bar0.net": 1,
  "bar1.net": 1,
  "bar2.net": 1,
  "rdv.to": 1,
  "art.pl": 1,
  "gliwice.pl": 1,
  "krakow.pl": 1,
  "poznan.pl": 1,
  "wroc.pl": 1,
  "zakopane.pl": 1,
  "pantheonsite.io": 1,
  "gotpantheon.com": 1,
  "mypep.link": 1,
  "perspecta.cloud": 1,
  "lk3.ru": 1,
  "on-web.fr": 1,
  "bc.platform.sh": 1,
  "ent.platform.sh": 1,
  "eu.platform.sh": 1,
  "us.platform.sh": 1,
  "platformsh.site": 2,
  "tst.site": 2,
  "platter-app.com": 1,
  "platter-app.dev": 1,
  "platterp.us": 1,
  "pdns.page": 1,
  "plesk.page": 1,
  "pleskns.com": 1,
  "dyn53.io": 1,
  "onporter.run": 1,
  "co.bn": 1,
  "postman-echo.com": 1,
  "pstmn.io": 1,
  "mock.pstmn.io": 1,
  "httpbin.org": 1,
  "prequalifyme.today": 1,
  "xen.prgmr.com": 1,
  "priv.at": 1,
  "prvcy.page": 1,
  "dweb.link": 2,
  "protonet.io": 1,
  "chirurgiens-dentistes-en-france.fr": 1,
  "byen.site": 1,
  "pubtls.org": 1,
  "pythonanywhere.com": 1,
  "eu.pythonanywhere.com": 1,
  "qoto.io": 1,
  "qualifioapp.com": 1,
  "ladesk.com": 1,
  "qbuser.com": 1,
  "cloudsite.builders": 1,
  "instances.spawn.cc": 1,
  "instantcloud.cn": 1,
  "ras.ru": 1,
  "qa2.com": 1,
  "qcx.io": 1,
  "sys.qcx.io": 2,
  "dev-myqnapcloud.com": 1,
  "alpha-myqnapcloud.com": 1,
  "myqnapcloud.com": 1,
  "quipelements.com": 2,
  "vapor.cloud": 1,
  "vaporcloud.io": 1,
  "rackmaze.com": 1,
  "rackmaze.net": 1,
  "g.vbrplsbx.io": 1,
  "on-k3s.io": 2,
  "on-rancher.cloud": 2,
  "on-rio.io": 2,
  "readthedocs.io": 1,
  "rhcloud.com": 1,
  "app.render.com": 1,
  "onrender.com": 1,
  "firewalledreplit.co": 1,
  "id.firewalledreplit.co": 1,
  "repl.co": 1,
  "id.repl.co": 1,
  "repl.run": 1,
  "resindevice.io": 1,
  "devices.resinstaging.io": 1,
  "hzc.io": 1,
  "wellbeingzone.eu": 1,
  "wellbeingzone.co.uk": 1,
  "adimo.co.uk": 1,
  "itcouldbewor.se": 1,
  "git-pages.rit.edu": 1,
  "rocky.page": 1,
  "xn--90amc.xn--p1acf": 1,
  "xn--j1aef.xn--p1acf": 1,
  "xn--j1ael8b.xn--p1acf": 1,
  "xn--h1ahn.xn--p1acf": 1,
  "xn--j1adp.xn--p1acf": 1,
  "xn--c1avg.xn--p1acf": 1,
  "xn--80aaa0cvac.xn--p1acf": 1,
  "xn--h1aliz.xn--p1acf": 1,
  "xn--90a1af.xn--p1acf": 1,
  "xn--41a.xn--p1acf": 1,
  "180r.com": 1,
  "dojin.com": 1,
  "sakuratan.com": 1,
  "sakuraweb.com": 1,
  "x0.com": 1,
  "2-d.jp": 1,
  "bona.jp": 1,
  "crap.jp": 1,
  "daynight.jp": 1,
  "eek.jp": 1,
  "flop.jp": 1,
  "halfmoon.jp": 1,
  "jeez.jp": 1,
  "matrix.jp": 1,
  "mimoza.jp": 1,
  "ivory.ne.jp": 1,
  "mail-box.ne.jp": 1,
  "mints.ne.jp": 1,
  "mokuren.ne.jp": 1,
  "opal.ne.jp": 1,
  "sakura.ne.jp": 1,
  "sumomo.ne.jp": 1,
  "topaz.ne.jp": 1,
  "netgamers.jp": 1,
  "nyanta.jp": 1,
  "o0o0.jp": 1,
  "rdy.jp": 1,
  "rgr.jp": 1,
  "rulez.jp": 1,
  "s3.isk01.sakurastorage.jp": 1,
  "s3.isk02.sakurastorage.jp": 1,
  "saloon.jp": 1,
  "sblo.jp": 1,
  "skr.jp": 1,
  "tank.jp": 1,
  "uh-oh.jp": 1,
  "undo.jp": 1,
  "rs.webaccel.jp": 1,
  "user.webaccel.jp": 1,
  "websozai.jp": 1,
  "xii.jp": 1,
  "squares.net": 1,
  "jpn.org": 1,
  "kirara.st": 1,
  "x0.to": 1,
  "from.tv": 1,
  "sakura.tv": 1,
  "builder.code.com": 2,
  "dev-builder.code.com": 2,
  "stg-builder.code.com": 2,
  "sandcats.io": 1,
  "logoip.de": 1,
  "logoip.com": 1,
  "fr-par-1.baremetal.scw.cloud": 1,
  "fr-par-2.baremetal.scw.cloud": 1,
  "nl-ams-1.baremetal.scw.cloud": 1,
  "fnc.fr-par.scw.cloud": 1,
  "functions.fnc.fr-par.scw.cloud": 1,
  "k8s.fr-par.scw.cloud": 1,
  "nodes.k8s.fr-par.scw.cloud": 1,
  "s3.fr-par.scw.cloud": 1,
  "s3-website.fr-par.scw.cloud": 1,
  "whm.fr-par.scw.cloud": 1,
  "priv.instances.scw.cloud": 1,
  "pub.instances.scw.cloud": 1,
  "k8s.scw.cloud": 1,
  "k8s.nl-ams.scw.cloud": 1,
  "nodes.k8s.nl-ams.scw.cloud": 1,
  "s3.nl-ams.scw.cloud": 1,
  "s3-website.nl-ams.scw.cloud": 1,
  "whm.nl-ams.scw.cloud": 1,
  "k8s.pl-waw.scw.cloud": 1,
  "nodes.k8s.pl-waw.scw.cloud": 1,
  "s3.pl-waw.scw.cloud": 1,
  "s3-website.pl-waw.scw.cloud": 1,
  "scalebook.scw.cloud": 1,
  "smartlabeling.scw.cloud": 1,
  "dedibox.fr": 1,
  "schokokeks.net": 1,
  "gov.scot": 1,
  "service.gov.scot": 1,
  "scrysec.com": 1,
  "firewall-gateway.com": 1,
  "firewall-gateway.de": 1,
  "my-gateway.de": 1,
  "my-router.de": 1,
  "spdns.de": 1,
  "spdns.eu": 1,
  "firewall-gateway.net": 1,
  "my-firewall.org": 1,
  "myfirewall.org": 1,
  "spdns.org": 1,
  "seidat.net": 1,
  "sellfy.store": 1,
  "senseering.net": 1,
  "minisite.ms": 1,
  "magnet.page": 1,
  "biz.ua": 1,
  "co.ua": 1,
  "pp.ua": 1,
  "shiftcrypto.dev": 1,
  "shiftcrypto.io": 1,
  "shiftedit.io": 1,
  "myshopblocks.com": 1,
  "myshopify.com": 1,
  "shopitsite.com": 1,
  "shopware.store": 1,
  "mo-siemens.io": 1,
  "1kapp.com": 1,
  "appchizi.com": 1,
  "applinzi.com": 1,
  "sinaapp.com": 1,
  "vipsinaapp.com": 1,
  "siteleaf.net": 1,
  "bounty-full.com": 1,
  "alpha.bounty-full.com": 1,
  "beta.bounty-full.com": 1,
  "aeroport.fr": 1,
  "avocat.fr": 1,
  "chambagri.fr": 1,
  "chirurgiens-dentistes.fr": 1,
  "experts-comptables.fr": 1,
  "medecin.fr": 1,
  "notaires.fr": 1,
  "pharmacien.fr": 1,
  "port.fr": 1,
  "veterinaire.fr": 1,
  "small-web.org": 1,
  "vp4.me": 1,
  "snowflake.app": 1,
  "privatelink.snowflake.app": 1,
  "streamlit.app": 1,
  "streamlitapp.com": 1,
  "try-snowplow.com": 1,
  "srht.site": 1,
  "stackhero-network.com": 1,
  "musician.io": 1,
  "novecore.site": 1,
  "static.land": 1,
  "dev.static.land": 1,
  "sites.static.land": 1,
  "storebase.store": 1,
  "vps-host.net": 1,
  "atl.jelastic.vps-host.net": 1,
  "njs.jelastic.vps-host.net": 1,
  "ric.jelastic.vps-host.net": 1,
  "playstation-cloud.com": 1,
  "apps.lair.io": 1,
  "stolos.io": 2,
  "spacekit.io": 1,
  "customer.speedpartner.de": 1,
  "myspreadshop.at": 1,
  "myspreadshop.com.au": 1,
  "myspreadshop.be": 1,
  "myspreadshop.ca": 1,
  "myspreadshop.ch": 1,
  "myspreadshop.com": 1,
  "myspreadshop.de": 1,
  "myspreadshop.dk": 1,
  "myspreadshop.es": 1,
  "myspreadshop.fi": 1,
  "myspreadshop.fr": 1,
  "myspreadshop.ie": 1,
  "myspreadshop.it": 1,
  "myspreadshop.net": 1,
  "myspreadshop.nl": 1,
  "myspreadshop.no": 1,
  "myspreadshop.pl": 1,
  "myspreadshop.se": 1,
  "myspreadshop.co.uk": 1,
  "api.stdlib.com": 1,
  "storipress.app": 1,
  "storj.farm": 1,
  "utwente.io": 1,
  "soc.srcf.net": 1,
  "user.srcf.net": 1,
  "temp-dns.com": 1,
  "supabase.co": 1,
  "supabase.in": 1,
  "supabase.net": 1,
  "su.paba.se": 1,
  "s5y.io": 2,
  "sensiosite.cloud": 2,
  "syncloud.it": 1,
  "dscloud.biz": 1,
  "direct.quickconnect.cn": 1,
  "dsmynas.com": 1,
  "familyds.com": 1,
  "diskstation.me": 1,
  "dscloud.me": 1,
  "i234.me": 1,
  "myds.me": 1,
  "synology.me": 1,
  "dscloud.mobi": 1,
  "dsmynas.net": 1,
  "familyds.net": 1,
  "dsmynas.org": 1,
  "familyds.org": 1,
  "vpnplus.to": 1,
  "direct.quickconnect.to": 1,
  "tabitorder.co.il": 1,
  "mytabit.co.il": 1,
  "mytabit.com": 1,
  "taifun-dns.de": 1,
  "beta.tailscale.net": 1,
  "ts.net": 1,
  "gda.pl": 1,
  "gdansk.pl": 1,
  "gdynia.pl": 1,
  "med.pl": 1,
  "sopot.pl": 1,
  "site.tb-hosting.com": 1,
  "edugit.io": 1,
  "s3.teckids.org": 1,
  "telebit.app": 1,
  "telebit.io": 1,
  "telebit.xyz": 2,
  "firenet.ch": 2,
  "svc.firenet.ch": 2,
  "reservd.com": 1,
  "thingdustdata.com": 1,
  "cust.dev.thingdust.io": 1,
  "cust.disrec.thingdust.io": 1,
  "cust.prod.thingdust.io": 1,
  "cust.testing.thingdust.io": 1,
  "reservd.dev.thingdust.io": 1,
  "reservd.disrec.thingdust.io": 1,
  "reservd.testing.thingdust.io": 1,
  "tickets.io": 1,
  "arvo.network": 1,
  "azimuth.network": 1,
  "tlon.network": 1,
  "torproject.net": 1,
  "pages.torproject.net": 1,
  "bloxcms.com": 1,
  "townnews-staging.com": 1,
  "12hp.at": 1,
  "2ix.at": 1,
  "4lima.at": 1,
  "lima-city.at": 1,
  "12hp.ch": 1,
  "2ix.ch": 1,
  "4lima.ch": 1,
  "lima-city.ch": 1,
  "trafficplex.cloud": 1,
  "de.cool": 1,
  "12hp.de": 1,
  "2ix.de": 1,
  "4lima.de": 1,
  "lima-city.de": 1,
  "1337.pictures": 1,
  "clan.rip": 1,
  "lima-city.rocks": 1,
  "webspace.rocks": 1,
  "lima.zone": 1,
  "transurl.be": 2,
  "transurl.eu": 2,
  "transurl.nl": 2,
  "site.transip.me": 1,
  "tuxfamily.org": 1,
  "dd-dns.de": 1,
  "diskstation.eu": 1,
  "diskstation.org": 1,
  "dray-dns.de": 1,
  "draydns.de": 1,
  "dyn-vpn.de": 1,
  "dynvpn.de": 1,
  "mein-vigor.de": 1,
  "my-vigor.de": 1,
  "my-wan.de": 1,
  "syno-ds.de": 1,
  "synology-diskstation.de": 1,
  "synology-ds.de": 1,
  "typedream.app": 1,
  "pro.typeform.com": 1,
  "uber.space": 1,
  "uberspace.de": 2,
  "hk.com": 1,
  "hk.org": 1,
  "ltd.hk": 1,
  "inc.hk": 1,
  "it.com": 1,
  "name.pm": 1,
  "sch.tf": 1,
  "biz.wf": 1,
  "sch.wf": 1,
  "org.yt": 1,
  "virtualuser.de": 1,
  "virtual-user.de": 1,
  "upli.io": 1,
  "urown.cloud": 1,
  "dnsupdate.info": 1,
  "lib.de.us": 1,
  "2038.io": 1,
  "vercel.app": 1,
  "vercel.dev": 1,
  "now.sh": 1,
  "router.management": 1,
  "v-info.info": 1,
  "voorloper.cloud": 1,
  "neko.am": 1,
  "nyaa.am": 1,
  "be.ax": 1,
  "cat.ax": 1,
  "es.ax": 1,
  "eu.ax": 1,
  "gg.ax": 1,
  "mc.ax": 1,
  "us.ax": 1,
  "xy.ax": 1,
  "nl.ci": 1,
  "xx.gl": 1,
  "app.gp": 1,
  "blog.gt": 1,
  "de.gt": 1,
  "to.gt": 1,
  "be.gy": 1,
  "cc.hn": 1,
  "blog.kg": 1,
  "io.kg": 1,
  "jp.kg": 1,
  "tv.kg": 1,
  "uk.kg": 1,
  "us.kg": 1,
  "de.ls": 1,
  "at.md": 1,
  "de.md": 1,
  "jp.md": 1,
  "to.md": 1,
  "indie.porn": 1,
  "vxl.sh": 1,
  "ch.tc": 1,
  "me.tc": 1,
  "we.tc": 1,
  "nyan.to": 1,
  "at.vg": 1,
  "blog.vu": 1,
  "dev.vu": 1,
  "me.vu": 1,
  "v.ua": 1,
  "vultrobjects.com": 2,
  "wafflecell.com": 1,
  "webhare.dev": 2,
  "reserve-online.net": 1,
  "reserve-online.com": 1,
  "bookonline.app": 1,
  "hotelwithflight.com": 1,
  "wedeploy.io": 1,
  "wedeploy.me": 1,
  "wedeploy.sh": 1,
  "remotewd.com": 1,
  "pages.wiardweb.com": 1,
  "wmflabs.org": 1,
  "toolforge.org": 1,
  "wmcloud.org": 1,
  "panel.gg": 1,
  "daemon.panel.gg": 1,
  "messwithdns.com": 1,
  "woltlab-demo.com": 1,
  "myforum.community": 1,
  "community-pro.de": 1,
  "diskussionsbereich.de": 1,
  "community-pro.net": 1,
  "meinforum.net": 1,
  "affinitylottery.org.uk": 1,
  "raffleentry.org.uk": 1,
  "weeklylottery.org.uk": 1,
  "wpenginepowered.com": 1,
  "js.wpenginepowered.com": 1,
  "wixsite.com": 1,
  "editorx.io": 1,
  "wixstudio.io": 1,
  "wix.run": 1,
  "half.host": 1,
  "xnbay.com": 1,
  "u2.xnbay.com": 1,
  "u2-local.xnbay.com": 1,
  "cistron.nl": 1,
  "demon.nl": 1,
  "xs4all.space": 1,
  "yandexcloud.net": 1,
  "storage.yandexcloud.net": 1,
  "website.yandexcloud.net": 1,
  "official.academy": 1,
  "yolasite.com": 1,
  "ybo.faith": 1,
  "yombo.me": 1,
  "homelink.one": 1,
  "ybo.party": 1,
  "ybo.review": 1,
  "ybo.science": 1,
  "ybo.trade": 1,
  "ynh.fr": 1,
  "nohost.me": 1,
  "noho.st": 1,
  "za.net": 1,
  "za.org": 1,
  "bss.design": 1,
  "basicserver.io": 1,
  "virtualserver.io": 1,
  "enterprisecloud.nu": 1
}

/***/ }),

/***/ 130:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * A `Cache` object represents a cache of arbitrary data.
 * @package
 */
exports.Cache = class Cache extends Map {
  /**
   * Creates a cache.
   * @param {number} capacity The maximum number of entries that can exist in
   *   the cache.
   */
  constructor(capacity) {
    // Note: This check works for non-number values.
    if (!(capacity >= 1)) {
      throw new Error("capacity must be a positive number.");
    }

    super();
    this._capacity = capacity;
  }

  /**
   * Writes an entry to the cache.
   *
   * If the cache has reached the specified maximum number of entries, all the
   * old entries are cleared first.
   *
   * @param {?*} key The key for the entry.
   * @param {?*} value The value of the entry.
   */
  set(key, value) {
    // To prevent logical errors, neither key nor value is allowed to be
    // undefined.
    if (typeof key == "undefined") {
      throw new Error("key must not be undefined.");
    }

    if (typeof value == "undefined") {
      throw new Error("value must not be undefined.");
    }

    if (this.size == this._capacity && !this.has(key)) {
      this.clear();
    }

    super.set(key, value);
  }
};


/***/ }),

/***/ 3809:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
var __webpack_unused_export__;
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



let contentTypes =
/**
 * Content types for request blocking and allowing (allowlisting).
 *
 * There are two kinds of content types: resource types, and special
 * (non-resource) types.
 *
 * Resource types include web resources like scripts, images, and so on.
 *
 * Special types include filter options for popup blocking and CSP header
 * injection as well as flags for allowing documents.
 *
 * By default a filter matches any resource type, but if a filter has an
 * explicit resource type, special option, or allowing flag, like
 * `$script`, `$popup`, or `$elemhide`, then it matches only the given type,
 * option, or flag.
 *
 * @type {Object}
 *
 * @public
 */
exports.fE = {
  // Types of web resources.
  OTHER: 1,
  SCRIPT: 2,
  IMAGE: 4,
  STYLESHEET: 8,
  OBJECT: 16,
  SUBDOCUMENT: 32,
  WEBSOCKET: 128,
  WEBRTC: 256,
  WEBBUNDLE: 512,
  PING: 1024,
  XMLHTTPREQUEST: 2048, // 1 << 11

  MEDIA: 16384,
  FONT: 32768, // 1 << 15

  // Special filter options.
  POPUP: 1 << 24,
  CSP: 1 << 25,
  HEADER: 1 << 26,

  // Allowing flags.
  DOCUMENT: 1 << 27,
  GENERICBLOCK: 1 << 28,
  ELEMHIDE: 1 << 29,
  GENERICHIDE: 1 << 30
};

// Backwards compatibility.
contentTypes.BACKGROUND = contentTypes.IMAGE;
contentTypes.XBL = contentTypes.OTHER;
contentTypes.DTD = contentTypes.OTHER;

const RESOURCE_TYPES =
/**
 * Bitmask for resource types like `$script`, `$image`, `$stylesheet`, and so
 * on.
 *
 * If a filter has no explicit content type, it applies to all resource types
 * (but not to any {@link module:contentTypes.SPECIAL_TYPES special types}).
 *
 * @const {number}
 *
 * @package
 */
// The first 24 bits are reserved for resource types like "script", "image",
// and so on.
// https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/ResourceType
__webpack_unused_export__ = (1 << 24) - 1;

const SPECIAL_TYPES = ~RESOURCE_TYPES & (1 << 31) - 1;
/**
 * Bitmask for special "types" (options and flags) like `$csp`, `$elemhide`,
 * and so on.
 *
 * @const {number}
 *
 * @package
 */
__webpack_unused_export__ = SPECIAL_TYPES;

/**
 * Bitmask for "types" that match against request context more than
 * actual content type. When matching against context types, you
 * should also include the request's resource type.
 *
 * @const {number}
 *
 * @package
 */
const CONTEXT_TYPES = contentTypes.HEADER | contentTypes.CSP;
__webpack_unused_export__ = CONTEXT_TYPES;

/**
 * Bitmask for "types" (flags) that are for exception rules only, like
 * `$document`, `$elemhide`, and so on.
 *
 * @const {number}
 *
 * @package
 */
__webpack_unused_export__ = contentTypes.DOCUMENT |
                         contentTypes.GENERICBLOCK |
                         contentTypes.ELEMHIDE |
                         contentTypes.GENERICHIDE;

/**
 * Yields individual types from a filter's type mask.
 *
 * @param {number} contentType A filter's type mask.
 * @param {number} [selection] Which types to yield.
 *
 * @generator
 * @yields {number}
 *
 * @package
 */
__webpack_unused_export__ = function* enumerateTypes(contentType, selection = ~0) {
  for (let mask = contentType & selection, bitIndex = 0;
    mask != 0; mask >>>= 1, bitIndex++) {
    if ((mask & 1) != 0) {
      // Note: The zero-fill right shift by zero is necessary for dropping the
      // sign.
      yield 1 << bitIndex >>> 0;
    }
  }
};


/***/ }),

/***/ 1870:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * Registers and emits named events.
 */
exports.EventEmitter = class EventEmitter {
  constructor() {
    this._listeners = new Map();
  }

  /**
   * Adds a listener for the specified event name.
   *
   * @param {string}   name
   * @param {function} listener
   */
  on(name, listener) {
    let listeners = this._listeners.get(name);
    if (listeners) {
      listeners.push(listener);
    }
    else {
      this._listeners.set(name, [listener]);
    }
  }

  /**
   * Removes a listener for the specified event name.
   *
   * @param {string}   name
   * @param {function} listener
   */
  off(name, listener) {
    let listeners = this._listeners.get(name);
    if (listeners) {
      if (listeners.length > 1) {
        let idx = listeners.indexOf(listener);
        if (idx != -1) {
          listeners.splice(idx, 1);
        }
      }
      else if (listeners[0] === listener) {
        // We must use strict equality above for compatibility with
        // Array.prototype.indexOf
        this._listeners.delete(name);
      }
    }
  }

  /**
   * Returns a copy of the array of listeners for the specified event.
   *
   * @param {string} name
   *
   * @returns {Array.<function>}
   */
  listeners(name) {
    let listeners = this._listeners.size > 0 ? this._listeners.get(name) : null;
    return listeners ? listeners.slice() : [];
  }

  /**
   * Checks whether there are any listeners for the specified event.
   *
   * @param {string} [name] The name of the event. If omitted, checks whether
   *   there are any listeners for any event.
   *
   * @returns {boolean}
   */
  hasListeners(name) {
    return this._listeners.size > 0 &&
           (typeof name == "undefined" || this._listeners.has(name));
  }

  /**
   * Calls all previously added listeners for the given event name.
   *
   * @param {string} name
   * @param {...*}   [args]
   */
  emit(name, ...args) {
    let listeners = this._listeners.size > 0 ? this._listeners.get(name) : null;
    if (listeners) {
      for (let listener of listeners.slice()) {
        listener(...args);
      }
    }
  }
};


/***/ }),

/***/ 5801:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var __webpack_unused_export__;
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file Snippets implementation.
 */

const {EventEmitter} = __webpack_require__(1870);

let singleCharacterEscapes = new Map([
  ["n", "\n"], ["r", "\r"], ["t", "\t"]
]);

/**
 * `{@link module:snippets.snippets snippets}` implementation.
 */
class Snippets extends EventEmitter {
  /**
   * @hideconstructor
   */
  constructor() {
    super();

    /**
     * All known snippet filters.
     * @type {Set.<module:filterClasses.SnippetFilter>}
     * @private
     */
    this._filters = new Set();
  }

  /**
   * Removes all known snippet filters.
   */
  clear() {
    let {_filters} = this;

    if (_filters.size == 0) {
      return;
    }

    _filters.clear();

    this.emit("snippets.filtersCleared");
  }

  /**
   * Adds a new snippet filter.
   * @param {module:filterClasses.SnippetFilter} filter
   */
  add(filter) {
    let {_filters} = this;
    let {size} = _filters;

    _filters.add(filter);

    if (size != _filters.size) {
      this.emit("snippets.filterAdded", filter);
    }
  }

  /**
   * Removes an existing snippet filter.
   * @param {module:filterClasses.SnippetFilter} filter
   */
  remove(filter) {
    let {_filters} = this;
    let {size} = _filters;

    _filters.delete(filter);

    if (size != _filters.size) {
      this.emit("snippets.filterRemoved", filter);
    }
  }

  /**
   * Checks whether a snippet filter exists.
   * @param {module:filterClasses.SnippetFilter} filter
   * @returns {boolean}
   */
  has(filter) {
    return this._filters.has(filter);
  }

  /**
   * Returns a list of all snippet filters active on the given domain.
   * @param {string} domain The domain.
   * @returns {Array.<module:filterClasses.SnippetFilter>} A list of snippet
   *   filters.
   */
  getFilters(domain) {
    let result = [];

    for (let filter of this._filters) {
      if (filter.isActiveOnDomain(domain)) {
        result.push(filter);
      }
    }

    return result;
  }

  /**
   * Returns a list of all snippet filters active on the given domain.
   * @param {string} domain The domain.
   * @returns {Array.<module:filterClasses.SnippetFilter>} A list of snippet
   *   filters.
   *
   * @deprecated Use <code>{@link module:snippets~Snippets#getFilters}</code>
   *   instead.
   * @see module:snippets~Snippets#getFilters
   */
  getFiltersForDomain(domain) {
    return this.getFilters(domain);
  }
}

/**
 * Container for snippet filters.
 */
__webpack_unused_export__ = Snippets;

let parseScript =
/**
 * Parses a script and returns a list of all its commands and their arguments.
 * @param {string} script The script.
 * @returns {Array.<string[]>} A list of commands and their arguments.
 * @package
 */
__webpack_unused_export__ = function parseScript(script) {
  let tree = [];

  let escape = false;
  let withinQuotes = false;

  let unicodeEscape = null;

  let quotesClosed = false;

  let call = [];
  let argument = "";

  for (let character of script.trim() + ";") {
    let afterQuotesClosed = quotesClosed;
    quotesClosed = false;

    if (unicodeEscape != null) {
      unicodeEscape += character;

      if (unicodeEscape.length == 4) {
        let codePoint = parseInt(unicodeEscape, 16);
        if (!isNaN(codePoint)) {
          argument += String.fromCodePoint(codePoint);
        }

        unicodeEscape = null;
      }
    }
    else if (escape) {
      escape = false;

      if (character == "u") {
        unicodeEscape = "";
      }
      else {
        argument += singleCharacterEscapes.get(character) || character;
      }
    }
    else if (character == "\\") {
      escape = true;
    }
    else if (character == "'") {
      withinQuotes = !withinQuotes;

      if (!withinQuotes) {
        quotesClosed = true;
      }
    }
    else if (withinQuotes || character != ";" && !/\s/.test(character)) {
      argument += character;
    }
    else {
      if (argument || afterQuotesClosed) {
        call.push(argument);
        argument = "";
      }

      if (character == ";" && call.length > 0) {
        tree.push(call);
        call = [];
      }
    }
  }

  return tree;
};

/**
 * Compiles a script against a given list of libraries, passed as JSON
 * serialized string, or a an array of strings, into executable code.
 * @param {string|Array.<string>} scripts One or more scripts to convert into
 *  executable code.
 * @param {string} isolatedSnippetsLibrary The stringified bundle to be executed
 * in the isolated content script context.
 * @param {string} injectedSnippetsLibrary The stringified bundle to be injected
 * and executed in the main context.
 * @param {string|Array.<string>} injectedSnippetsList An array containing the
 * available injectable snippets.
 * @param {object} [environment] An object containing environment variables.
 * @returns {string} Executable code.
 */
__webpack_unused_export__ = function compileScript(scripts,
                                               isolatedSnippetsLibrary,
                                               injectedSnippetsLibrary,
                                               injectedSnippetsList,
                                               environment = {}) {
  let isolatedLib = JSON.stringify(isolatedSnippetsLibrary);
  let injectedLib = JSON.stringify(injectedSnippetsLibrary);
  let jsonEnv = JSON.stringify(environment);
  return `
    "use strict";
    (() => 
    {
      let scripts = ${JSON.stringify([].concat(scripts).map(parseScript))};

      let isolatedLib = ${isolatedLib};
      let imports = Object.create(null);
      let injectedSnippetsCount = 0;
      let loadLibrary = new Function("exports", "environment", isolatedLib);
      loadLibrary(imports, ${jsonEnv});
      const isolatedSnippets = imports.snippets;

      let injectedLib = ${injectedLib};
      let injectedSnippetsList = ${JSON.stringify(injectedSnippetsList)};
      let executable = "(() => {";
      executable += "let environment = ${jsonEnv.replace(/[\\"]/g, "\\$&")};";
      executable += injectedLib;

      let {hasOwnProperty} = Object.prototype;
      for (let script of scripts)
      {
        for (let [name, ...args] of script)
        {
          if (hasOwnProperty.call(isolatedSnippets, name))
          {
            let value = isolatedSnippets[name];
            if (typeof value == "function")
              value(...args);
          }
          if (injectedSnippetsList.includes(name))
          {
            executable += stringifyFunctionCall(name, ...args);
            injectedSnippetsCount++;
          }
        }
      }

      executable += "})();";

      if (injectedSnippetsCount > 0)
        injectSnippetsInMainContext(executable);

      function stringifyFunctionCall(func, ...params)
      {
        // Call JSON.stringify on the arguments to avoid any arbitrary code
        // execution.
        const f = "snippets['" + func + "']";
        const parameters = params.map(JSON.stringify).join(",");
        return f + "(" + parameters + ");";
      }

      function injectSnippetsInMainContext(exec)
      {
        // injecting phase
        let script = document.createElement("script");
        script.type = "application/javascript";
        script.async = false;

        // Firefox 58 only bypasses site CSPs when assigning to 'src',
        // while Chrome 67 and Microsoft Edge (tested on 44.17763.1.0)
        // only bypass site CSPs when using 'textContent'.
        if (typeof netscape != "undefined" && typeof browser != "undefined")
        {
          let url = URL.createObjectURL(new Blob([exec]));
          script.src = url;
          document.documentElement.appendChild(script);
          URL.revokeObjectURL(url);
        }
        else
        {
          script.textContent = exec;
          document.documentElement.appendChild(script);
        }

        document.documentElement.removeChild(script);
      }
    })();
  `;
};

/**
 * Prepares an inline script for injecting code into the main context.
 * This is necessary when `browser.scripting` is not available.
 * tabs.executeScript does not allow injecting scripts to main context.
 * So we resort to creating an inline script element.
 *
 * @param {any} codeToInject The code to be injected
 * @param {Array<any>} params Parameters to be passed to the injected code
 * @returns {string} The executable code to be injected
 */
exports.Gn =
  function prepareInlineScriptForInjection(codeToInject, ...params) {
    const args = JSON.stringify(params);
    // stringify injectedLib to escape backticks
    let code = JSON.stringify(codeToInject.toString());
    code = `"(${code.slice(1, -1)}).apply(null,${JSON.stringify(args).slice(1, -1)});"`;
    let executable =
      `function injectScriptInMainContext(executable)
        {
          // injecting phases
          let script = document.createElement("script");
          script.type = "application/javascript";
          script.async = false;

          // Firefox 58 only bypasses site CSPs when assigning to 'src',
          // while Chrome 67 and Microsoft Edge (tested on 44.17763.1.0)
          // only bypass site CSPs when using 'textContent'.
          if (typeof netscape != "undefined" && typeof browser != "undefined")
          {
            let url = URL.createObjectURL(new Blob([executable]));
            script.src = url;
            document.documentElement.appendChild(script);
            URL.revokeObjectURL(url);
          }
          else
          {
            script.textContent = executable;
            document.documentElement.appendChild(script);
          }

          document.documentElement.removeChild(script);
        };
        {
          const executable = ${code};
          injectScriptInMainContext(executable);
        }`;
    return executable;
  };


/***/ }),

/***/ 8990:
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

"use strict";
var __webpack_unused_export__;
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



const {Cache} = __webpack_require__(130);

const {icannPublicSuffixes} = __webpack_require__(3267);
const {nonIcannPublicSuffixes} = __webpack_require__(8832);

// ensure no conflict ever happens with inherited properties
Object.setPrototypeOf(icannPublicSuffixes, null);
Object.setPrototypeOf(nonIcannPublicSuffixes, null);

/**
 * Cache of domain maps.
 *
 * The domains part of filter text (e.g. `example.com,~mail.example.com`) is
 * often repeated across filters. This cache enables deduplication of the
 * `Map` objects that specify on which domains the filter does and does not
 * apply, which reduces memory usage and improves performance.
 *
 * @type {Map.<string, Map.<string, boolean>>}
 */
let domainsCache = new Cache(1000);

/**
 * A `URLInfo` object represents information about a URL.
 *
 * It is returned by `{@link module:url.parseURL parseURL()}`.
 */
class URLInfo {
  /**
   * Creates a `URLInfo` object.
   *
   * @param {string} href The entire URL.
   * @param {string} protocol The protocol scheme of the URL, including the
   *   final `:`.
   * @param {string} [hostname] The hostname of the URL.
   *
   * @private
   */
  constructor(href, protocol, hostname = "") {
    this._href = href;
    this._protocol = protocol;
    this._hostname = hostname;
  }

  /**
   * The entire URL.
   * @type {string}
   */
  get href() {
    return this._href;
  }

  /**
   * The protocol scheme of the URL, including the final `:`.
   * @type {string}
   */
  get protocol() {
    return this._protocol;
  }

  /**
   * The hostname of the URL.
   * @type {string}
   */
  get hostname() {
    return this._hostname;
  }

  /**
   * Returns the entire URL.
   * @returns {string} The entire URL.
   */
  toString() {
    return this._href;
  }
}

let parseURL =
/**
 * Parses a URL to extract the protocol and the hostname.
 *
 * __This is a lightweight alternative to the native `URL` object intended for
 * use primarily within Adblock Plus. Unlike the `URL` object, the `parseURL()`
 * function is not robust and will give incorrect results for invalid URLs. Use
 * this function with valid,
 * [normalized](https://url.spec.whatwg.org/#concept-basic-url-parser),
 * properly encoded (IDNA, etc.) URLs only.__
 *
 * @param {string} url The URL.
 *
 * @returns {module:url~URLInfo} Information about the URL.
 *
 * @public
 */
__webpack_unused_export__ = function parseURL(url) {
  let match = /^([^:]+:)(?:\/\/(?:[^/]*@)?(\[[^\]]*\]|[^:/]+))?/.exec(url);

  if (!match) {
    throw new Error(`Failed to parse invalid URL "${url}"`);
  }

  return new URLInfo(url, match[1], match[2]);
};

let domainSuffixes =
/**
 * Yields all suffixes for a domain.
 *
 * For example, given the domain `www.example.com`, this function yields
 * `www.example.com`, `example.com`, and `com`, in that order.
 *
 * If the domain ends with a dot, the dot is ignored.
 *
 * @param {string} domain The domain.
 * @param {boolean} [includeBlank] Whether to include the blank suffix at the
 *   end.
 *
 * @generator
 * @yields {string} The next suffix for the domain.
 *
 * @package
 */
__webpack_unused_export__ = function* domainSuffixes(
  domain, includeBlank = false
) {
  // Since any IP address is already expected to be normalized, there's no need
  // to validate it.
  if (isIPAddress(domain)) {
    yield domain;
  }
  else {
    if (domain[domain.length - 1] == ".") {
      domain = domain.substring(0, domain.length - 1);
    }

    while (domain != "") {
      yield domain;

      let dotIndex = domain.indexOf(".");
      domain = dotIndex == -1 ? "" : domain.substr(dotIndex + 1);
    }
  }

  if (includeBlank) {
    yield "";
  }
};

/**
 * Checks whether the given hostname refers to
 * {@link https://en.wikipedia.org/wiki/Localhost localhost}.
 *
 * If the hostname is `localhost`, `127.0.0.1`, or `[::1]`, the function
 * returns `true`; otherwise, it returns `false`.
 *
 * @param {string} hostname The hostname.
 *
 * @returns {boolean} Whether the hostname refers to localhost.
 *
 * @package
 */
__webpack_unused_export__ = function isLocalhost(hostname) {
  return hostname == "localhost" || hostname == "127.0.0.1" ||
         hostname == "[::1]";
};

/**
 * Checks whether URL is of HTTP or HTTPS protocol
 * @param {*} URL url to check
 * @returns {boolean} `true` if url is of HTTPS or HTTPS protocol
 */
__webpack_unused_export__ = function(URL) {
  const protocol = URL.protocol;
  return protocol == "http:" || protocol == "https:";
};

/**
 * Checks whether the given hostname is an IP address.
 *
 * Unlike `{@link module:url~isValidIPv4Address isValidIPv4Address()}`, this
 * function only checks whether the hostname _looks like_ an IP address. Use
 * this function with valid, normalized, properly encoded (IDNA) hostnames
 * only.
 *
 * @param {string} hostname An IDNA-encoded hostname.
 *
 * @returns {boolean} Whether the hostname is an IP address.
 */
function isIPAddress(hostname) {
  // Does it look like an IPv6 address?
  if (hostname[0] == "[" && hostname[hostname.length - 1] == "]") {
    return true;
  }

  // Note: The first condition helps us avoid the more expensive regular
  // expression match for most hostnames.
  return hostname[hostname.length - 1] >= 0 &&
         /^\d+\.\d+\.\d+\.\d+$/.test(hostname);
}

/**
 * Checks whether a given address is a valid IPv4 address.
 *
 * Only a normalized IPv4 address is considered valid. e.g. `0x7f.0x0.0x0.0x1`
 * is invalid, whereas `127.0.0.1` is valid.
 *
 * @param {string} address The address to check.
 *
 * @returns {boolean} Whether the address is a valid IPv4 address.
 */
function isValidIPv4Address(address) {
  return /^(((2[0-4]|1[0-9]|[1-9])?[0-9]|25[0-5])\.){4}$/.test(address + ".");
}

/**
 * Checks whether a given hostname is valid.
 *
 * This function is used for filter validation.
 *
 * A hostname occurring in a filter must be normalized. For example,
 * <code>&#x1f642;</code> (slightly smiling face) should be normalized to
 * `xn--938h`; otherwise this function returns `false` for such a hostname.
 * Similarly, IP addresses should be normalized.
 *
 * @param {string} hostname The hostname to check.
 *
 * @returns {boolean} Whether the hostname is valid.
 */
__webpack_unused_export__ = function isValidHostname(hostname) {
  if (isValidIPv4Address(hostname)) {
    return true;
  }

  // This does not in fact validate the IPv6 address but it's alright for now.
  if (hostname[0] == "[" && hostname[hostname.length - 1] == "]") {
    return true;
  }

  // Based on
  // https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_hostnames
  if (hostname[hostname.length - 1] == ".") {
    hostname = hostname.substring(0, hostname.length - 1);
  }

  if (hostname.length > 253) {
    return false;
  }

  let labels = hostname.split(".");
  for (let [index, label] of labels.entries()) {
    // Wildcards support
    if (label == "*" && index == (labels.length - 1)) {
      return true;
    }
    if (!/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(label)) {
      return false;
    }
  }

  // Based on https://tools.ietf.org/html/rfc3696#section-2
  if (!/\D/.test(labels[labels.length - 1])) {
    return false;
  }

  return true;
};

let getBaseDomain =
/**
 * Gets the base domain for the given hostname.
 *
 * @param {string} hostname
 *
 * @returns {string}
 *
 * @package
 */
exports.Ai = function getBaseDomain(hostname) {
  let slices = [];
  let cutoff = NaN;

  for (let suffix of domainSuffixes(hostname)) {
    slices.push(suffix);

    let offset = icannPublicSuffixes[suffix];
    if (!(typeof offset == "number")) {
      offset = nonIcannPublicSuffixes[suffix];
    }

    if (typeof offset == "number") {
      cutoff = slices.length - 1 - offset;
      break;
    }
  }

  if (isNaN(cutoff)) {
    return slices.length > 2 ? slices[slices.length - 2] : hostname;
  }

  if (cutoff <= 0) {
    return hostname;
  }

  return slices[cutoff];
};

/**
 * Checks whether a request's origin is different from its document's origin.
 *
 * @param {string} requestHostname The IDNA-encoded hostname of the request.
 * @param {string} documentHostname The IDNA-encoded hostname of the document.
 *
 * @returns {boolean}
 */
function isThirdParty(requestHostname, documentHostname) {
  if (requestHostname[requestHostname.length - 1] == ".") {
    requestHostname = requestHostname.substring(0, requestHostname.length - 1);
  }

  if (documentHostname[documentHostname.length - 1] == ".") {
    documentHostname =
      documentHostname.substring(0, documentHostname.length - 1);
  }

  if (requestHostname == documentHostname) {
    return false;
  }

  if (!requestHostname || !documentHostname) {
    return true;
  }

  if (isIPAddress(requestHostname) || isIPAddress(documentHostname)) {
    return true;
  }

  return getBaseDomain(requestHostname) != getBaseDomain(documentHostname);
}

let URLRequest =
/**
 * The `URLRequest` class represents a URL request.
 */
__webpack_unused_export__ = class URLRequest {
  /**
   * @private
   */
  constructor() {}

  /**
   * The URL of the request.
   * @type {string}
   */
  get href() {
    return this._href;
  }

  /**
   * Information about the URL of the request.
   * @type {module:url~URLInfo}
   * @package
   */
  get urlInfo() {
    if (!this._urlInfo) {
      this._urlInfo = parseURL(this._href);
    }

    return this._urlInfo;
  }

  /**
   * The hostname of the document making the request.
   * @type {?string}
   */
  get documentHostname() {
    return this._documentHostname == null ? null : this._documentHostname;
  }

  /**
   * Whether this is a third-party request.
   * @type {boolean}
   */
  get thirdParty() {
    if (typeof this._thirdParty == "undefined") {
      this._thirdParty = this._documentHostname == null ? false :
        isThirdParty(this.urlInfo.hostname,
          this._documentHostname);
    }

    return this._thirdParty;
  }

  /**
   * Returns the URL of the request.
   * @returns {string}
   */
  toString() {
    return this._href;
  }

  /**
   * The lower-case version of the URL of the request.
   * @type {string}
   * @package
   */
  get lowerCaseHref() {
    if (this._lowerCaseHref == null) {
      this._lowerCaseHref = this._href.toLowerCase();
    }

    return this._lowerCaseHref;
  }
};

/**
 * Returns a `{@link module:url.URLRequest URLRequest}` object for the given
 * URL.
 *
 * @param {string|module:url~URLInfo|URL} url The URL. If this is a `string`,
 *   it must be a canonicalized URL (see
 *   `{@link module:url.parseURL parseURL()}`).
 * @param {?string} [documentHostname] The IDNA-encoded hostname of the
 *   document making the request.
 *
 * @returns {module:url.URLRequest}
 */
__webpack_unused_export__ = function(url, documentHostname = null) {
  let request = new URLRequest();

  if (typeof url == "string") {
    request._href = url;
  }
  else {
    request._urlInfo = url instanceof URLInfo ? url :
      new URLInfo(url.href, url.protocol, url.hostname);
    request._href = url.href;
  }

  if (documentHostname != null) {
    request._documentHostname = documentHostname;
  }

  return request;
};

/**
 * Parses the domains part of a filter text
 * (e.g. `example.com,~mail.example.com`) into a `Map` object.
 *
 * @param {string} source The domains part of a filter text.
 * @param {string} separator The string used to separate two or more domains in
 *   the domains part of a filter text.
 *
 * @returns {?Map.<string, boolean>}
 *
 * @package
 */
__webpack_unused_export__ = function parseDomains(source, separator) {
  let domains = domainsCache.get(source);
  if (typeof domains != "undefined") {
    return domains;
  }

  if (source[0] != "~" && !source.includes(separator)) {
    // Fast track for the common one-domain scenario.
    domains = new Map([["", false], [source, true]]);
  }
  else {
    domains = null;

    let hasIncludes = false;
    for (let domain of source.split(separator)) {
      if (domain == "") {
        continue;
      }

      let include;
      if (domain[0] == "~") {
        include = false;
        domain = domain.substring(1);
      }
      else {
        include = true;
        hasIncludes = true;
      }

      if (!domains) {
        domains = new Map();
      }

      domains.set(domain, include);
    }

    if (domains) {
      domains.set("", !hasIncludes);
    }
  }

  domainsCache.set(source, domains);

  return domains;
};

__webpack_unused_export__ = function hasWildcard(string) {
  return string.includes(".*");
};

/**
 * Checks whether domain URL matches wildcards mask.
 * Note: PSL is taken into account (base domain is checked actually).
 * @param {string} domain domain to check (assuming it's lower-cased)
 * @param {string} domainWithWildcards domain mask (assuming it's lower-cased)
 * @returns {boolean} `true` if domain matches the mask
 */
__webpack_unused_export__ = function matchesWildcards(
  domain, domainWithWildcards) {
  // cut off the wildcard. Luckily we know exactly where it is already.
  let expectedPrefix = domainWithWildcards.slice(0, -1);

  // cut off the port if specified
  let portMatch = /^.+(:\d+)$/.exec(domain);
  if (portMatch && portMatch.length > 1) {
    domain = domain.slice(0, -portMatch[1].length);
  }

  for (let suffix of domainSuffixes(domain)) {
    if (!suffix.startsWith(expectedPrefix)) {
      continue;
    }
    let expectedTld = suffix.slice(expectedPrefix.length);
    if (typeof icannPublicSuffixes[expectedTld] == "number") {
      return true;
    }
  }

  return false;
};

__webpack_unused_export__ = function isValidDomainWildcard(domain) {
  // ? are not supported
  if (domain.includes("?")) {
    return false;
  }

  // multiple * are not supported
  let asteriskCount = (domain.match(/\*/g) || []).length;
  if (asteriskCount > 1) {
    return false;
  }

  if (asteriskCount == 1) {
    let pos = domain.indexOf("*");

    // * must be the last character in the string
    if (pos < (domain.length - 1)) {
      return false;
    }

    // but not the only character in the string
    if (domain.length == 1) {
      return false;
    }

    // * must be preceeded with .
    if (pos > 0 && domain[pos - 1] != ".") {
      return false;
    }
  }

  return true;
};

/**
 * Strip query string from the URL if included
 * @param {string} url URL with possible query string
 * @returns {string} URL without query string
 */
__webpack_unused_export__ = function(url) {
  return url.split("?")[0];
};


/***/ }),

/***/ 2558:
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

"use strict";
/* @@package_name - v@@version - @@timestamp */
/* -*- Mode: indent-tabs-mode: nil; js-indent-level: 2 -*- */
/* vim: set sts=2 sw=2 et tw=80: */
/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */


if (!(globalThis.chrome && globalThis.chrome.runtime && globalThis.chrome.runtime.id)) {
  throw new Error("This script should only be loaded in a browser extension.");
}

if (!(globalThis.browser && globalThis.browser.runtime && globalThis.browser.runtime.id)) {
  const CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE = "The message port closed before a response was received.";

  // Wrapping the bulk of this polyfill in a one-time-use function is a minor
  // optimization for Firefox. Since Spidermonkey does not fully parse the
  // contents of a function until the first time it's called, and since it will
  // never actually need to be called, this allows the polyfill to be included
  // in Firefox nearly for free.
  const wrapAPIs = extensionAPIs => {
    // NOTE: apiMetadata is associated to the content of the api-metadata.json file
    // at build time by replacing the following "include" with the content of the
    // JSON file.
    const apiMetadata = __webpack_require__(2058);

    if (Object.keys(apiMetadata).length === 0) {
      throw new Error("api-metadata.json has not been included in browser-polyfill");
    }

    /**
     * A WeakMap subclass which creates and stores a value for any key which does
     * not exist when accessed, but behaves exactly as an ordinary WeakMap
     * otherwise.
     *
     * @param {function} createItem
     *        A function which will be called in order to create the value for any
     *        key which does not exist, the first time it is accessed. The
     *        function receives, as its only argument, the key being created.
     */
    class DefaultWeakMap extends WeakMap {
      constructor(createItem, items = undefined) {
        super(items);
        this.createItem = createItem;
      }

      get(key) {
        if (!this.has(key)) {
          this.set(key, this.createItem(key));
        }

        return super.get(key);
      }
    }

    /**
     * Returns true if the given object is an object with a `then` method, and can
     * therefore be assumed to behave as a Promise.
     *
     * @param {*} value The value to test.
     * @returns {boolean} True if the value is thenable.
     */
    const isThenable = value => {
      return value && typeof value === "object" && typeof value.then === "function";
    };

    /**
     * Creates and returns a function which, when called, will resolve or reject
     * the given promise based on how it is called:
     *
     * - If, when called, `chrome.runtime.lastError` contains a non-null object,
     *   the promise is rejected with that value.
     * - If the function is called with exactly one argument, the promise is
     *   resolved to that value.
     * - Otherwise, the promise is resolved to an array containing all of the
     *   function's arguments.
     *
     * @param {object} promise
     *        An object containing the resolution and rejection functions of a
     *        promise.
     * @param {function} promise.resolve
     *        The promise's resolution function.
     * @param {function} promise.reject
     *        The promise's rejection function.
     * @param {object} metadata
     *        Metadata about the wrapped method which has created the callback.
     * @param {boolean} metadata.singleCallbackArg
     *        Whether or not the promise is resolved with only the first
     *        argument of the callback, alternatively an array of all the
     *        callback arguments is resolved. By default, if the callback
     *        function is invoked with only a single argument, that will be
     *        resolved to the promise, while all arguments will be resolved as
     *        an array if multiple are given.
     *
     * @returns {function}
     *        The generated callback function.
     */
    const makeCallback = (promise, metadata) => {
      // In case we encounter a browser error in the callback function, we don't
      // want to lose the stack trace leading up to this point. For that reason,
      // we need to instantiate the error outside the callback function.
      let error = new Error();
      return (...callbackArgs) => {
        if (extensionAPIs.runtime.lastError) {
          error.message = extensionAPIs.runtime.lastError.message;
          promise.reject(error);
        } else if (metadata.singleCallbackArg ||
                   (callbackArgs.length <= 1 && metadata.singleCallbackArg !== false)) {
          promise.resolve(callbackArgs[0]);
        } else {
          promise.resolve(callbackArgs);
        }
      };
    };

    const pluralizeArguments = (numArgs) => numArgs == 1 ? "argument" : "arguments";

    /**
     * Creates a wrapper function for a method with the given name and metadata.
     *
     * @param {string} name
     *        The name of the method which is being wrapped.
     * @param {object} metadata
     *        Metadata about the method being wrapped.
     * @param {integer} metadata.minArgs
     *        The minimum number of arguments which must be passed to the
     *        function. If called with fewer than this number of arguments, the
     *        wrapper will raise an exception.
     * @param {integer} metadata.maxArgs
     *        The maximum number of arguments which may be passed to the
     *        function. If called with more than this number of arguments, the
     *        wrapper will raise an exception.
     * @param {boolean} metadata.singleCallbackArg
     *        Whether or not the promise is resolved with only the first
     *        argument of the callback, alternatively an array of all the
     *        callback arguments is resolved. By default, if the callback
     *        function is invoked with only a single argument, that will be
     *        resolved to the promise, while all arguments will be resolved as
     *        an array if multiple are given.
     *
     * @returns {function(object, ...*)}
     *       The generated wrapper function.
     */
    const wrapAsyncFunction = (name, metadata) => {
      return function asyncFunctionWrapper(target, ...args) {
        if (args.length < metadata.minArgs) {
          throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);
        }

        if (args.length > metadata.maxArgs) {
          throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);
        }

        return new Promise((resolve, reject) => {
          if (metadata.fallbackToNoCallback) {
            // This API method has currently no callback on Chrome, but it return a promise on Firefox,
            // and so the polyfill will try to call it with a callback first, and it will fallback
            // to not passing the callback if the first call fails.
            try {
              target[name](...args, makeCallback({resolve, reject}, metadata));
            } catch (cbError) {
              console.warn(`${name} API method doesn't seem to support the callback parameter, ` +
                           "falling back to call it without a callback: ", cbError);

              target[name](...args);

              // Update the API method metadata, so that the next API calls will not try to
              // use the unsupported callback anymore.
              metadata.fallbackToNoCallback = false;
              metadata.noCallback = true;

              resolve();
            }
          } else if (metadata.noCallback) {
            target[name](...args);
            resolve();
          } else {
            target[name](...args, makeCallback({resolve, reject}, metadata));
          }
        });
      };
    };

    /**
     * Wraps an existing method of the target object, so that calls to it are
     * intercepted by the given wrapper function. The wrapper function receives,
     * as its first argument, the original `target` object, followed by each of
     * the arguments passed to the original method.
     *
     * @param {object} target
     *        The original target object that the wrapped method belongs to.
     * @param {function} method
     *        The method being wrapped. This is used as the target of the Proxy
     *        object which is created to wrap the method.
     * @param {function} wrapper
     *        The wrapper function which is called in place of a direct invocation
     *        of the wrapped method.
     *
     * @returns {Proxy<function>}
     *        A Proxy object for the given method, which invokes the given wrapper
     *        method in its place.
     */
    const wrapMethod = (target, method, wrapper) => {
      return new Proxy(method, {
        apply(targetMethod, thisObj, args) {
          return wrapper.call(thisObj, target, ...args);
        },
      });
    };

    let hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);

    /**
     * Wraps an object in a Proxy which intercepts and wraps certain methods
     * based on the given `wrappers` and `metadata` objects.
     *
     * @param {object} target
     *        The target object to wrap.
     *
     * @param {object} [wrappers = {}]
     *        An object tree containing wrapper functions for special cases. Any
     *        function present in this object tree is called in place of the
     *        method in the same location in the `target` object tree. These
     *        wrapper methods are invoked as described in {@see wrapMethod}.
     *
     * @param {object} [metadata = {}]
     *        An object tree containing metadata used to automatically generate
     *        Promise-based wrapper functions for asynchronous. Any function in
     *        the `target` object tree which has a corresponding metadata object
     *        in the same location in the `metadata` tree is replaced with an
     *        automatically-generated wrapper function, as described in
     *        {@see wrapAsyncFunction}
     *
     * @returns {Proxy<object>}
     */
    const wrapObject = (target, wrappers = {}, metadata = {}) => {
      let cache = Object.create(null);
      let handlers = {
        has(proxyTarget, prop) {
          return prop in target || prop in cache;
        },

        get(proxyTarget, prop, receiver) {
          if (prop in cache) {
            return cache[prop];
          }

          if (!(prop in target)) {
            return undefined;
          }

          let value = target[prop];

          if (typeof value === "function") {
            // This is a method on the underlying object. Check if we need to do
            // any wrapping.

            if (typeof wrappers[prop] === "function") {
              // We have a special-case wrapper for this method.
              value = wrapMethod(target, target[prop], wrappers[prop]);
            } else if (hasOwnProperty(metadata, prop)) {
              // This is an async method that we have metadata for. Create a
              // Promise wrapper for it.
              let wrapper = wrapAsyncFunction(prop, metadata[prop]);
              value = wrapMethod(target, target[prop], wrapper);
            } else {
              // This is a method that we don't know or care about. Return the
              // original method, bound to the underlying object.
              value = value.bind(target);
            }
          } else if (typeof value === "object" && value !== null &&
                     (hasOwnProperty(wrappers, prop) ||
                      hasOwnProperty(metadata, prop))) {
            // This is an object that we need to do some wrapping for the children
            // of. Create a sub-object wrapper for it with the appropriate child
            // metadata.
            value = wrapObject(value, wrappers[prop], metadata[prop]);
          } else if (hasOwnProperty(metadata, "*")) {
            // Wrap all properties in * namespace.
            value = wrapObject(value, wrappers[prop], metadata["*"]);
          } else {
            // We don't need to do any wrapping for this property,
            // so just forward all access to the underlying object.
            Object.defineProperty(cache, prop, {
              configurable: true,
              enumerable: true,
              get() {
                return target[prop];
              },
              set(value) {
                target[prop] = value;
              },
            });

            return value;
          }

          cache[prop] = value;
          return value;
        },

        set(proxyTarget, prop, value, receiver) {
          if (prop in cache) {
            cache[prop] = value;
          } else {
            target[prop] = value;
          }
          return true;
        },

        defineProperty(proxyTarget, prop, desc) {
          return Reflect.defineProperty(cache, prop, desc);
        },

        deleteProperty(proxyTarget, prop) {
          return Reflect.deleteProperty(cache, prop);
        },
      };

      // Per contract of the Proxy API, the "get" proxy handler must return the
      // original value of the target if that value is declared read-only and
      // non-configurable. For this reason, we create an object with the
      // prototype set to `target` instead of using `target` directly.
      // Otherwise we cannot return a custom object for APIs that
      // are declared read-only and non-configurable, such as `chrome.devtools`.
      //
      // The proxy handlers themselves will still use the original `target`
      // instead of the `proxyTarget`, so that the methods and properties are
      // dereferenced via the original targets.
      let proxyTarget = Object.create(target);
      return new Proxy(proxyTarget, handlers);
    };

    /**
     * Creates a set of wrapper functions for an event object, which handles
     * wrapping of listener functions that those messages are passed.
     *
     * A single wrapper is created for each listener function, and stored in a
     * map. Subsequent calls to `addListener`, `hasListener`, or `removeListener`
     * retrieve the original wrapper, so that  attempts to remove a
     * previously-added listener work as expected.
     *
     * @param {DefaultWeakMap<function, function>} wrapperMap
     *        A DefaultWeakMap object which will create the appropriate wrapper
     *        for a given listener function when one does not exist, and retrieve
     *        an existing one when it does.
     *
     * @returns {object}
     */
    const wrapEvent = wrapperMap => ({
      addListener(target, listener, ...args) {
        target.addListener(wrapperMap.get(listener), ...args);
      },

      hasListener(target, listener) {
        return target.hasListener(wrapperMap.get(listener));
      },

      removeListener(target, listener) {
        target.removeListener(wrapperMap.get(listener));
      },
    });

    const onRequestFinishedWrappers = new DefaultWeakMap(listener => {
      if (typeof listener !== "function") {
        return listener;
      }

      /**
       * Wraps an onRequestFinished listener function so that it will return a
       * `getContent()` property which returns a `Promise` rather than using a
       * callback API.
       *
       * @param {object} req
       *        The HAR entry object representing the network request.
       */
      return function onRequestFinished(req) {
        const wrappedReq = wrapObject(req, {} /* wrappers */, {
          getContent: {
            minArgs: 0,
            maxArgs: 0,
          },
        });
        listener(wrappedReq);
      };
    });

    const onMessageWrappers = new DefaultWeakMap(listener => {
      if (typeof listener !== "function") {
        return listener;
      }

      /**
       * Wraps a message listener function so that it may send responses based on
       * its return value, rather than by returning a sentinel value and calling a
       * callback. If the listener function returns a Promise, the response is
       * sent when the promise either resolves or rejects.
       *
       * @param {*} message
       *        The message sent by the other end of the channel.
       * @param {object} sender
       *        Details about the sender of the message.
       * @param {function(*)} sendResponse
       *        A callback which, when called with an arbitrary argument, sends
       *        that value as a response.
       * @returns {boolean}
       *        True if the wrapped listener returned a Promise, which will later
       *        yield a response. False otherwise.
       */
      return function onMessage(message, sender, sendResponse) {
        let didCallSendResponse = false;

        let wrappedSendResponse;
        let sendResponsePromise = new Promise(resolve => {
          wrappedSendResponse = function(response) {
            didCallSendResponse = true;
            resolve(response);
          };
        });

        let result;
        try {
          result = listener(message, sender, wrappedSendResponse);
        } catch (err) {
          result = Promise.reject(err);
        }

        const isResultThenable = result !== true && isThenable(result);

        // If the listener didn't returned true or a Promise, or called
        // wrappedSendResponse synchronously, we can exit earlier
        // because there will be no response sent from this listener.
        if (result !== true && !isResultThenable && !didCallSendResponse) {
          return false;
        }

        // A small helper to send the message if the promise resolves
        // and an error if the promise rejects (a wrapped sendMessage has
        // to translate the message into a resolved promise or a rejected
        // promise).
        const sendPromisedResult = (promise) => {
          promise.then(msg => {
            // send the message value.
            sendResponse(msg);
          }, error => {
            // Send a JSON representation of the error if the rejected value
            // is an instance of error, or the object itself otherwise.
            let message;
            if (error && (error instanceof Error ||
                typeof error.message === "string")) {
              message = error.message;
            } else {
              message = "An unexpected error occurred";
            }

            sendResponse({
              __mozWebExtensionPolyfillReject__: true,
              message,
            });
          }).catch(err => {
            // Print an error on the console if unable to send the response.
            console.error("Failed to send onMessage rejected reply", err);
          });
        };

        // If the listener returned a Promise, send the resolved value as a
        // result, otherwise wait the promise related to the wrappedSendResponse
        // callback to resolve and send it as a response.
        if (isResultThenable) {
          sendPromisedResult(result);
        } else {
          sendPromisedResult(sendResponsePromise);
        }

        // Let Chrome know that the listener is replying.
        return true;
      };
    });

    const wrappedSendMessageCallback = ({reject, resolve}, reply) => {
      if (extensionAPIs.runtime.lastError) {
        // Detect when none of the listeners replied to the sendMessage call and resolve
        // the promise to undefined as in Firefox.
        // See https://github.com/mozilla/webextension-polyfill/issues/130
        if (extensionAPIs.runtime.lastError.message === CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE) {
          resolve();
        } else {
          reject(new Error(extensionAPIs.runtime.lastError.message));
        }
      } else if (reply && reply.__mozWebExtensionPolyfillReject__) {
        // Convert back the JSON representation of the error into
        // an Error instance.
        reject(new Error(reply.message));
      } else {
        resolve(reply);
      }
    };

    const wrappedSendMessage = (name, metadata, apiNamespaceObj, ...args) => {
      if (args.length < metadata.minArgs) {
        throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);
      }

      if (args.length > metadata.maxArgs) {
        throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);
      }

      return new Promise((resolve, reject) => {
        const wrappedCb = wrappedSendMessageCallback.bind(null, {resolve, reject});
        args.push(wrappedCb);
        apiNamespaceObj.sendMessage(...args);
      });
    };

    const staticWrappers = {
      devtools: {
        network: {
          onRequestFinished: wrapEvent(onRequestFinishedWrappers),
        },
      },
      runtime: {
        onMessage: wrapEvent(onMessageWrappers),
        onMessageExternal: wrapEvent(onMessageWrappers),
        sendMessage: wrappedSendMessage.bind(null, "sendMessage", {minArgs: 1, maxArgs: 3}),
      },
      tabs: {
        sendMessage: wrappedSendMessage.bind(null, "sendMessage", {minArgs: 2, maxArgs: 3}),
      },
    };
    const settingMetadata = {
      clear: {minArgs: 1, maxArgs: 1},
      get: {minArgs: 1, maxArgs: 1},
      set: {minArgs: 1, maxArgs: 1},
    };
    apiMetadata.privacy = {
      network: {"*": settingMetadata},
      services: {"*": settingMetadata},
      websites: {"*": settingMetadata},
    };

    return wrapObject(extensionAPIs, staticWrappers, apiMetadata);
  };

  // The build process adds a UMD wrapper around this file, which makes the
  // `module` variable available.
  module.exports = wrapAPIs(chrome);
} else {
  module.exports = globalThis.browser;
}


/***/ }),

/***/ 7099:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  F: () => (/* reexport */ getUserId)
});

// EXTERNAL MODULE: ../../node_modules/webextension-polyfill/src/browser-polyfill.js
var browser_polyfill = __webpack_require__(2558);
;// CONCATENATED MODULE: ./adblock-betafish/id/background/id.ts

const userIdStorageKey = "userid";
let userId = "";
async function getUserId() {
    if (userId) {
        return userId;
    }
    const response = await browser_polyfill.storage.local.get(userIdStorageKey);
    if (!response[userIdStorageKey]) {
        const timeSuffix = Date.now() % 1e8;
        const alphabet = "abcdefghijklmnopqrstuvwxyz0123456789";
        const result = [];
        for (let i = 0; i < 8; i++) {
            const choice = Math.floor(Math.random() * alphabet.length);
            result.push(alphabet[choice]);
        }
        userId = result.join("") + timeSuffix;
        await browser_polyfill.storage.local.set({ [userIdStorageKey]: userId });
    }
    else {
        const value = response[userIdStorageKey];
        userId = typeof value === "string" ? value : "";
    }
    return userId;
}

;// CONCATENATED MODULE: ./adblock-betafish/id/background/index.ts



/***/ }),

/***/ 1918:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  E7: () => (/* binding */ dismissCommand),
  Ak: () => (/* binding */ executeIPMCommands),
  j3: () => (/* binding */ command_library_getBehavior),
  OE: () => (/* binding */ getCommand),
  _A: () => (/* binding */ command_library_getContent),
  ZK: () => (/* binding */ getStoredCommandIds),
  Jj: () => (/* binding */ isCommandExpired),
  vf: () => (/* binding */ setCommandActor)
});

// UNUSED EXPORTS: isCommandMap, removeAllCommands

// EXTERNAL MODULE: ../../node_modules/webextension-polyfill/src/browser-polyfill.js
var browser_polyfill = __webpack_require__(2558);
var browser_polyfill_default = /*#__PURE__*/__webpack_require__.n(browser_polyfill);
// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/index.ts + 1 modules
var background = __webpack_require__(199);
// EXTERNAL MODULE: ./adblock-betafish/alias/prefs.js
var prefs = __webpack_require__(2680);
// EXTERNAL MODULE: ./adblock-betafish/ipm/background/command-library.types.ts
var command_library_types = __webpack_require__(6122);
;// CONCATENATED MODULE: ./adblock-betafish/ipm/background/delete-commands.types.ts
const deleteAllKey = "__all__";

// EXTERNAL MODULE: ./adblock-betafish/ipm/background/param-validator.ts
var param_validator = __webpack_require__(3968);
;// CONCATENATED MODULE: ./adblock-betafish/ipm/background/delete-commands.ts





const paramDefinitionList = [
    {
        name: "commands",
        validate: (param) => typeof param === "string" && param.trim() !== "",
    },
];
function isDeleteCommand(command) {
    const validationErrors = (0,param_validator/* validateParams */.XB)(command, paramDefinitionList);
    if (validationErrors.length === 0) {
        return true;
    }
    background.error("[delete-commands]: Invalid parameteres received:", validationErrors.join(" "));
    return false;
}
function isDeleteBehavior(candidate) {
    return candidate !== null && typeof candidate === "object" && "commandIds" in candidate;
}
function getBehavior(command) {
    if (!isDeleteCommand(command)) {
        return null;
    }
    const commands = command.commands.trim();
    let commandIds;
    if (commands === deleteAllKey) {
        commandIds = getStoredCommandIds();
    }
    else {
        commandIds = commands.split(",").map((id) => id.trim());
    }
    return { commandIds };
}
function getContent() {
    return {};
}
function setDeleteCommandHandler(handler) {
    setCommandActor(command_library_types/* CommandName */.bp.deleteCommands, {
        getBehavior,
        getContent,
        handleCommand: handler,
        isValidCommand: isDeleteCommand,
        onCommandsProcessed: () => { },
    });
}

// EXTERNAL MODULE: ./adblock-betafish/ipm/background/event-recording.ts
var event_recording = __webpack_require__(2780);
// EXTERNAL MODULE: ./adblock-betafish/ipm/background/language-check.ts
var language_check = __webpack_require__(1915);
;// CONCATENATED MODULE: ./adblock-betafish/ipm/background/command-library.ts









const knownCommandsList = Object.values(command_library_types/* CommandName */.bp);
const actorByCommandName = new Map();
const unexecutableCommands = new Map();
function isCommand(candidate) {
    return (typeof candidate === "object" &&
        candidate !== null &&
        "version" in candidate &&
        "ipm_id" in candidate &&
        "command_name" in candidate &&
        "expiry" in candidate);
}
function isCommandMap(candidate) {
    return (typeof candidate === "object" &&
        candidate !== null &&
        Object.keys(candidate).every((key) => typeof key === "string") &&
        Object.values(candidate).every(isCommand));
}
function setCommandActor(commandName, actor) {
    actorByCommandName.set(commandName, actor);
    retryExecuteCommands(commandName);
}
function dismissCommand(ipmId) {
    const command = getCommand(ipmId);
    if (!command) {
        return;
    }
    const commandStorage = prefs/* Prefs */.N.get(command_library_types/* commandStorageKey */.EQ);
    delete commandStorage[command.ipm_id];
    prefs/* Prefs */.N.set(command_library_types/* commandStorageKey */.EQ, commandStorage);
}
function command_library_getBehavior(ipmId) {
    const command = getCommand(ipmId);
    if (!command) {
        return null;
    }
    const actor = actorByCommandName.get(command.command_name);
    if (!actor) {
        return null;
    }
    return actor.getBehavior(command);
}
function getCommand(ipmId) {
    const commandStorage = prefs/* Prefs */.N.get(command_library_types/* commandStorageKey */.EQ);
    return commandStorage[ipmId] || null;
}
function getStoredCommandIds() {
    const commandStorage = prefs/* Prefs */.N.get(command_library_types/* commandStorageKey */.EQ);
    if (!isCommandMap(commandStorage)) {
        return [];
    }
    return Object.keys(commandStorage);
}
function command_library_getContent(ipmId) {
    const command = getCommand(ipmId);
    if (!command) {
        return null;
    }
    const actor = actorByCommandName.get(command.command_name);
    if (!actor) {
        return null;
    }
    return actor.getContent(command);
}
function isCommandExpired(command) {
    if (!(0,param_validator/* isValidDate */.vd)(command.expiry)) {
        return true;
    }
    const expiryDateOnly = new Date(command.expiry);
    const nowDateTime = new Date();
    if (nowDateTime >= expiryDateOnly) {
        return true;
    }
    return false;
}
function retryExecuteCommands(commandName) {
    for (const [command, isInitialization] of unexecutableCommands) {
        if (command.command_name !== commandName) {
            continue;
        }
        unexecutableCommands.delete(command);
        void executeIPMCommands([command], isInitialization);
    }
}
function storeCommands(commands) {
    let changed = false;
    const storage = prefs/* Prefs */.N.get(command_library_types/* commandStorageKey */.EQ);
    for (const command of commands) {
        if (storage[command.ipm_id]) {
            background.debug("[ipm]: Campaign already stored:", command.ipm_id);
            continue;
        }
        storage[command.ipm_id] = command;
        changed = true;
    }
    if (changed) {
        void prefs/* Prefs */.N.set(command_library_types/* commandStorageKey */.EQ, storage);
    }
}
async function executeIPMCommands(commands, isInitialization = false) {
    const actorByExecutableCommand = new Map();
    if (commands.length > command_library_types/* maximumProcessableCommands */.gh) {
        background.error("[ipm]: Too many commands received.");
        (0,event_recording/* recordGenericEvent */.V)("too_many_commands");
        return;
    }
    for (const command of commands) {
        if (!isCommand(command)) {
            background.error("[ipm]: Invalid command received.");
            continue;
        }
        if (!knownCommandsList.includes(command.command_name)) {
            background.error("[ipm]: Unknown command name received:", command.command_name);
            continue;
        }
        if (command.version !== command_library_types/* CommandVersion */.GV[command.command_name]) {
            background.error(`[ipm]: Command version mismatch for command "${command.command_name}". Requested version was ${command.version}, version present is ${command_library_types/* CommandVersion */.GV[command.command_name]}`);
            continue;
        }
        if (isCommandExpired(command)) {
            background.error("[ipm]: Command has expired.");
            (0,event_recording/* recordEvent */.y)(command.ipm_id, command.command_name, command_library_types/* CommandEventType */.k4.expired);
            if (isInitialization) {
                dismissCommand(command.ipm_id);
            }
            continue;
        }
        const actor = actorByCommandName.get(command.command_name);
        if (!actor) {
            background.warn("[ipm]: No actor found:", command.command_name);
            unexecutableCommands.set(command, isInitialization);
            continue;
        }
        if (!actor.isValidCommand(command)) {
            background.error("[ipm]: Invalid parameters received.");
            continue;
        }
        if (!("attributes" in command)) {
            command.attributes = {
                received: Date.now(),
                language: browser_polyfill_default().i18n.getUILanguage(),
            };
        }
        actorByExecutableCommand.set(command, actor);
    }
    const executableCommands = Array.from(actorByExecutableCommand.keys());
    if (!isInitialization && executableCommands.length > 0) {
        storeCommands(executableCommands);
    }
    const commandHandlingPromises = Array.from(actorByExecutableCommand).map(async ([executableCommand, actor]) => {
        await actor.handleCommand(executableCommand.ipm_id, isInitialization);
    });
    void Promise.all(commandHandlingPromises).then(() => {
        knownCommandsList
            .map((name) => actorByCommandName.get(name))
            .forEach((actor) => actor === null || actor === void 0 ? void 0 : actor.onCommandsProcessed());
    });
}
async function removeAllCommands(name) {
    await Prefs.untilLoaded;
    const commandStorage = Prefs.get(commandStorageKey);
    for (const command of Object.values(commandStorage)) {
        if (isCommand(command) && name === command.command_name) {
            logger.debug("[ipm]: removing command ", command.ipm_id, command.command_name);
            recordEvent(command.ipm_id, command.command_name, CommandEventType.ipmCancelled);
            dismissCommand(command.ipm_id);
        }
    }
}
function registerDeleteEvent(ipmId, name) {
    (0,event_recording/* recordEvent */.y)(ipmId, command_library_types/* CommandName */.bp.deleteCommands, name);
}
async function handleDeleteCommand(ipmId) {
    const command = getCommand(ipmId);
    if (!command) {
        return;
    }
    const behavior = command_library_getBehavior(ipmId);
    if (!isDeleteBehavior(behavior)) {
        background.error("[delete-commands]: Invalid command behavior.");
        return;
    }
    void (0,language_check/* checkLanguage */.Z)(ipmId);
    if (isCommandExpired(command)) {
        background.error("[delete-commands]: Command has expired.");
        registerDeleteEvent(ipmId, command_library_types/* CommandEventType */.k4.expired);
        dismissCommand(ipmId);
        return;
    }
    const { commandIds } = behavior;
    let success = true;
    for (const commandId of commandIds) {
        try {
            dismissCommand(commandId);
            if (getCommand(commandId) !== null) {
                throw new Error("Command was not successfully deleted.");
            }
        }
        catch (error) {
            success = false;
            background.error("[delete-commands]: Error trying to delete command with ID ", commandId);
        }
    }
    registerDeleteEvent(ipmId, success ? command_library_types/* DeleteEventType */.Ms.sucess : command_library_types/* DeleteEventType */.Ms.error);
    dismissCommand(ipmId);
}
async function resetIPMCommands() {
    await prefs/* Prefs */.N.untilLoaded;
    const ipmCommandsReset = prefs/* Prefs */.N.get("ipm_commands_second_reset_completed");
    if (!ipmCommandsReset) {
        await prefs/* Prefs */.N.set(command_library_types/* commandStorageKey */.EQ, {});
        await prefs/* Prefs */.N.set("ipm_commands_second_reset_completed", true);
    }
}
async function start() {
    await prefs/* Prefs */.N.untilLoaded;
    await resetIPMCommands();
    ewe_api.experiments.onChanged.addListener(async () => {
        await resetIPMCommands();
    });
    setDeleteCommandHandler(handleDeleteCommand);
    const commandStorage = prefs/* Prefs */.N.get(command_library_types/* commandStorageKey */.EQ);
    if (!isCommandMap(commandStorage)) {
        return;
    }
    const commands = Object.values(commandStorage);
    await executeIPMCommands(commands, true);
}
start().catch(background.error);


/***/ }),

/***/ 6122:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   EQ: () => (/* binding */ commandStorageKey),
/* harmony export */   GV: () => (/* binding */ CommandVersion),
/* harmony export */   Ms: () => (/* binding */ DeleteEventType),
/* harmony export */   Nk: () => (/* binding */ commandStats),
/* harmony export */   bp: () => (/* binding */ CommandName),
/* harmony export */   gh: () => (/* binding */ maximumProcessableCommands),
/* harmony export */   k4: () => (/* binding */ CommandEventType)
/* harmony export */ });
const maximumProcessableCommands = 100;
const commandStorageKey = "ipm_commands";
const commandStats = "ipm_commands_stats";
var CommandName;
(function (CommandName) {
    CommandName["createOnPageDialog"] = "create_on_page_dialog";
    CommandName["createTab"] = "create_tab";
    CommandName["deleteCommands"] = "delete_commands";
})(CommandName || (CommandName = {}));
const CommandVersion = {
    [CommandName.createOnPageDialog]: 7,
    [CommandName.createTab]: 6,
    [CommandName.deleteCommands]: 2,
};
var CommandEventType;
(function (CommandEventType) {
    CommandEventType["ipmCancelled"] = "ipm_cancelled";
    CommandEventType["expired"] = "command_expired";
})(CommandEventType || (CommandEventType = {}));
var DeleteEventType;
(function (DeleteEventType) {
    DeleteEventType["sucess"] = "deletion_success";
    DeleteEventType["error"] = "deletion_error";
})(DeleteEventType || (DeleteEventType = {}));


/***/ }),

/***/ 9525:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Kh: () => (/* binding */ storeEvent),
/* harmony export */   lh: () => (/* binding */ clearEvents),
/* harmony export */   nm: () => (/* binding */ getPayload)
/* harmony export */ });
/* unused harmony export getSupportedCommandsData */
/* harmony import */ var info__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(9336);
/* harmony import */ var webextension_polyfill__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2558);
/* harmony import */ var webextension_polyfill__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(webextension_polyfill__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _command_library__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1918);
/* harmony import */ var _command_library_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6122);
/* harmony import */ var _data_collection_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(4702);
/* harmony import */ var _id_background_index__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(7099);
/* harmony import */ var _picreplacement_check__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(4770);
/* harmony import */ var _alias_prefs__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(2680);








function leftPad(value) {
    return value.toString().padStart(2, "0");
}
function getLocalTime() {
    const date = new Date();
    return [
        date.getFullYear(),
        "-",
        leftPad(date.getMonth() + 1),
        "-",
        leftPad(date.getDate()),
        "T",
        leftPad(date.getHours()),
        ":",
        leftPad(date.getMinutes()),
        ":",
        leftPad(date.getSeconds()),
    ].join("");
}
async function getBaseAttributes() {
    return {
        app_name: info__WEBPACK_IMPORTED_MODULE_0__.baseName,
        browser_name: info__WEBPACK_IMPORTED_MODULE_0__.application,
        browser_version: info__WEBPACK_IMPORTED_MODULE_0__.applicationVersion.split(".").shift(),
        os: (await webextension_polyfill__WEBPACK_IMPORTED_MODULE_1__.runtime.getPlatformInfo()).os,
        language_tag: webextension_polyfill__WEBPACK_IMPORTED_MODULE_1__.i18n.getUILanguage(),
        app_version: info__WEBPACK_IMPORTED_MODULE_0__.addonVersion,
        install_type: (await webextension_polyfill__WEBPACK_IMPORTED_MODULE_1__.management.getSelf()).installType,
        manifest_version: webextension_polyfill__WEBPACK_IMPORTED_MODULE_1__.runtime.getManifest().manifest_version,
    };
}
async function getEventData(ipmId, commandName, commandVersion, name) {
    return {
        type: _data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.event,
        device_id: await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_5__/* .getUserId */ .F)(),
        action: name,
        platform: _data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .PlatformType */ .Yw.web,
        app_version: info__WEBPACK_IMPORTED_MODULE_0__.addonVersion,
        user_time: getLocalTime(),
        attributes: {
            ...(await getBaseAttributes()),
            ipm_id: ipmId,
            command_name: commandName,
            command_version: commandVersion,
        },
    };
}
async function getDeviceData() {
    await _alias_prefs__WEBPACK_IMPORTED_MODULE_7__/* .Prefs */ .N.untilLoaded;
    return {
        type: _data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.device,
        device_id: await (0,_id_background_index__WEBPACK_IMPORTED_MODULE_5__/* .getUserId */ .F)(),
        attributes: {
            ...(await getBaseAttributes()),
            extension_id: webextension_polyfill__WEBPACK_IMPORTED_MODULE_1__.runtime.id,
            blocked_total: _alias_prefs__WEBPACK_IMPORTED_MODULE_7__/* .Prefs */ .N.blocked_total,
            license_status: _picreplacement_check__WEBPACK_IMPORTED_MODULE_6__/* .License */ .u8.isActiveLicense() ? _data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .LicenseState */ .dm.active : _data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .LicenseState */ .dm.inactive,
        },
    };
}
async function getIPMPingCount() {
    const pingCountStorage = await webextension_polyfill__WEBPACK_IMPORTED_MODULE_1__.storage.local.get(_data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .pingCountStorageKey */ .Sc);
    const count = pingCountStorage[_data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .pingCountStorageKey */ .Sc];
    return typeof count === "number" && !Number.isNaN(count) ? count : 0;
}
async function getUserData() {
    return {
        type: _data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .DataType */ .pe.customer,
        platforms: [{ platform: _data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .PlatformType */ .Yw.web, active: _data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .PlatformStatus */ .iQ.true }],
        attributes: {
            ...(await getBaseAttributes()),
            ping_count: await getIPMPingCount(),
        },
    };
}
function getSupportedCommandsData() {
    const commandNames = Object.values(_command_library_types__WEBPACK_IMPORTED_MODULE_3__/* .CommandName */ .bp);
    const supportedCommandsData = commandNames.map((name) => ({
        name,
        version: _command_library_types__WEBPACK_IMPORTED_MODULE_3__/* .CommandVersion */ .GV[name],
    }));
    return supportedCommandsData;
}
function getIpmData() {
    return {
        active: (0,_command_library__WEBPACK_IMPORTED_MODULE_2__/* .getStoredCommandIds */ .ZK)().map((id) => ({ id })),
        capabilities: [
            {
                name: "multi_ipm_response",
                version: 1,
            },
            ...getSupportedCommandsData(),
        ],
    };
}
async function getPayload() {
    await _alias_prefs__WEBPACK_IMPORTED_MODULE_7__/* .Prefs */ .N.untilLoaded;
    const user = await getUserData();
    const device = await getDeviceData();
    const events = _alias_prefs__WEBPACK_IMPORTED_MODULE_7__/* .Prefs */ .N.get(_data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .eventStorageKey */ .tz);
    const ipm = getIpmData();
    return { user, device, events, ipm };
}
async function clearEvents() {
    await _alias_prefs__WEBPACK_IMPORTED_MODULE_7__/* .Prefs */ .N.untilLoaded;
    _alias_prefs__WEBPACK_IMPORTED_MODULE_7__/* .Prefs */ .N.set(_data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .eventStorageKey */ .tz, []);
}
async function storeEvent(ipmId, commandName, commandVersion, name) {
    await _alias_prefs__WEBPACK_IMPORTED_MODULE_7__/* .Prefs */ .N.untilLoaded;
    const eventData = await getEventData(ipmId, commandName, commandVersion, name);
    const eventStorage = _alias_prefs__WEBPACK_IMPORTED_MODULE_7__/* .Prefs */ .N.get(_data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .eventStorageKey */ .tz);
    eventStorage.push(eventData);
    void _alias_prefs__WEBPACK_IMPORTED_MODULE_7__/* .Prefs */ .N.set(_data_collection_types__WEBPACK_IMPORTED_MODULE_4__/* .eventStorageKey */ .tz, eventStorage);
}


/***/ }),

/***/ 4702:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Sc: () => (/* binding */ pingCountStorageKey),
/* harmony export */   Yw: () => (/* binding */ PlatformType),
/* harmony export */   dm: () => (/* binding */ LicenseState),
/* harmony export */   iQ: () => (/* binding */ PlatformStatus),
/* harmony export */   pe: () => (/* binding */ DataType),
/* harmony export */   tz: () => (/* binding */ eventStorageKey)
/* harmony export */ });
const pingCountStorageKey = "total_ipm_pings";
var DataType;
(function (DataType) {
    DataType["customer"] = "customer";
    DataType["device"] = "device";
    DataType["event"] = "event";
})(DataType || (DataType = {}));
var PlatformType;
(function (PlatformType) {
    PlatformType["web"] = "web";
})(PlatformType || (PlatformType = {}));
var LicenseState;
(function (LicenseState) {
    LicenseState["active"] = "premium";
    LicenseState["inactive"] = "free";
})(LicenseState || (LicenseState = {}));
var PlatformStatus;
(function (PlatformStatus) {
    PlatformStatus["true"] = "true";
})(PlatformStatus || (PlatformStatus = {}));
const eventStorageKey = "ipm_events";


/***/ }),

/***/ 2780:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   V: () => (/* binding */ recordGenericEvent),
/* harmony export */   y: () => (/* binding */ recordEvent)
/* harmony export */ });
/* harmony import */ var _command_library_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(6122);
/* harmony import */ var _data_collection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(9525);


function recordEvent(ipmId, command, name) {
    void (0,_data_collection__WEBPACK_IMPORTED_MODULE_1__/* .storeEvent */ .Kh)(ipmId || "no ipm value", command, _command_library_types__WEBPACK_IMPORTED_MODULE_0__/* .CommandVersion */ .GV[command], name);
}
function recordGenericEvent(name) {
    void (0,_data_collection__WEBPACK_IMPORTED_MODULE_1__/* .storeEvent */ .Kh)("__no_ipm__", "__no_command__", 0, name);
}


/***/ }),

/***/ 8146:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Ak: () => (/* reexport safe */ _command_library__WEBPACK_IMPORTED_MODULE_0__.Ak),
/* harmony export */   Dh: () => (/* reexport safe */ _license__WEBPACK_IMPORTED_MODULE_4__.Dh),
/* harmony export */   E7: () => (/* reexport safe */ _command_library__WEBPACK_IMPORTED_MODULE_0__.E7),
/* harmony export */   FY: () => (/* reexport safe */ _param_validator__WEBPACK_IMPORTED_MODULE_5__.FY),
/* harmony export */   Jj: () => (/* reexport safe */ _command_library__WEBPACK_IMPORTED_MODULE_0__.Jj),
/* harmony export */   O1: () => (/* reexport safe */ _license__WEBPACK_IMPORTED_MODULE_4__.O1),
/* harmony export */   OE: () => (/* reexport safe */ _command_library__WEBPACK_IMPORTED_MODULE_0__.OE),
/* harmony export */   Qo: () => (/* reexport safe */ _param_validator__WEBPACK_IMPORTED_MODULE_5__.Qo),
/* harmony export */   U6: () => (/* reexport safe */ _url__WEBPACK_IMPORTED_MODULE_6__.U),
/* harmony export */   XB: () => (/* reexport safe */ _param_validator__WEBPACK_IMPORTED_MODULE_5__.XB),
/* harmony export */   _A: () => (/* reexport safe */ _command_library__WEBPACK_IMPORTED_MODULE_0__._A),
/* harmony export */   bT: () => (/* reexport safe */ _param_validator__WEBPACK_IMPORTED_MODULE_5__.bT),
/* harmony export */   bp: () => (/* reexport safe */ _command_library_types__WEBPACK_IMPORTED_MODULE_1__.bp),
/* harmony export */   hj: () => (/* reexport safe */ _param_validator__WEBPACK_IMPORTED_MODULE_5__.hj),
/* harmony export */   j3: () => (/* reexport safe */ _command_library__WEBPACK_IMPORTED_MODULE_0__.j3),
/* harmony export */   k4: () => (/* reexport safe */ _command_library_types__WEBPACK_IMPORTED_MODULE_1__.k4),
/* harmony export */   lh: () => (/* reexport safe */ _data_collection__WEBPACK_IMPORTED_MODULE_2__.lh),
/* harmony export */   lj: () => (/* reexport safe */ _url__WEBPACK_IMPORTED_MODULE_6__.l),
/* harmony export */   lq: () => (/* reexport safe */ _param_validator__WEBPACK_IMPORTED_MODULE_5__.lq),
/* harmony export */   nm: () => (/* reexport safe */ _data_collection__WEBPACK_IMPORTED_MODULE_2__.nm),
/* harmony export */   vf: () => (/* reexport safe */ _command_library__WEBPACK_IMPORTED_MODULE_0__.vf),
/* harmony export */   yM: () => (/* reexport safe */ _event_recording__WEBPACK_IMPORTED_MODULE_8__.y)
/* harmony export */ });
/* harmony import */ var _command_library__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1918);
/* harmony import */ var _command_library_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(6122);
/* harmony import */ var _data_collection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(9525);
/* harmony import */ var _data_collection_types__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(4702);
/* harmony import */ var _license__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2949);
/* harmony import */ var _param_validator__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(3968);
/* harmony import */ var _url__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(1607);
/* harmony import */ var _url_types__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(1912);
/* harmony import */ var _event_recording__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(2780);












/***/ }),

/***/ 1915:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Z: () => (/* binding */ checkLanguage)
/* harmony export */ });
/* harmony import */ var webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2558);
/* harmony import */ var webextension_polyfill__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _alias_prefs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2680);
/* harmony import */ var _command_library_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(6122);
/* harmony import */ var _event_recording__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(2780);




async function checkLanguage(ipmId) {
    var _a;
    await _alias_prefs__WEBPACK_IMPORTED_MODULE_1__/* .Prefs */ .N.untilLoaded;
    const commandStorage = _alias_prefs__WEBPACK_IMPORTED_MODULE_1__/* .Prefs */ .N.get(_command_library_types__WEBPACK_IMPORTED_MODULE_2__/* .commandStorageKey */ .EQ);
    if (!(ipmId in commandStorage)) {
        return;
    }
    const command = commandStorage[ipmId];
    if (typeof ((_a = command.attributes) === null || _a === void 0 ? void 0 : _a.language) !== "string") {
        return;
    }
    if (webextension_polyfill__WEBPACK_IMPORTED_MODULE_0___default().i18n.getUILanguage() === command.attributes.language) {
        return;
    }
    (0,_event_recording__WEBPACK_IMPORTED_MODULE_3__/* .recordEvent */ .y)(command.ipm_id, command.command_name, "language_skew");
}


/***/ }),

/***/ 2949:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Dh: () => (/* binding */ doesLicenseStateMatch),
/* harmony export */   O1: () => (/* binding */ defaultLicenseState),
/* harmony export */   pu: () => (/* binding */ isValidLicenseState)
/* harmony export */ });
/* harmony import */ var _picreplacement_check__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4770);
/* harmony import */ var _data_collection_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(4702);


function isValidLicenseState(candidate) {
    return (typeof candidate === "string" && Object.values(_data_collection_types__WEBPACK_IMPORTED_MODULE_1__/* .LicenseState */ .dm).includes(candidate));
}
const doesLicenseStateMatch = async function (behavior) {
    if (!behavior.licenseStateList) {
        return true;
    }
    const licenseStates = behavior.licenseStateList.split(",");
    await _picreplacement_check__WEBPACK_IMPORTED_MODULE_0__/* .License */ .u8.ready();
    return licenseStates.some((state) => (state === _data_collection_types__WEBPACK_IMPORTED_MODULE_1__/* .LicenseState */ .dm.active && _picreplacement_check__WEBPACK_IMPORTED_MODULE_0__/* .License */ .u8.isActiveLicense()) ||
        (state === _data_collection_types__WEBPACK_IMPORTED_MODULE_1__/* .LicenseState */ .dm.inactive && !_picreplacement_check__WEBPACK_IMPORTED_MODULE_0__/* .License */ .u8.isActiveLicense()));
};
const defaultLicenseState = _data_collection_types__WEBPACK_IMPORTED_MODULE_1__/* .LicenseState */ .dm.inactive;


/***/ }),

/***/ 3968:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FY: () => (/* binding */ isSafeUrl),
/* harmony export */   Qo: () => (/* binding */ isValidLicenseStates),
/* harmony export */   XB: () => (/* binding */ validateParams),
/* harmony export */   bT: () => (/* binding */ isEmptyOrPositiveNumber),
/* harmony export */   hj: () => (/* binding */ isNotEmpty),
/* harmony export */   lq: () => (/* binding */ isValidDomainList),
/* harmony export */   vd: () => (/* binding */ isValidDate)
/* harmony export */ });
/* unused harmony export isNumeric */
/* harmony import */ var _src_core_url_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(3638);
/* harmony import */ var _license__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2949);
/* harmony import */ var _url__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(1607);



const validDateRegExp = /^\d{4}-\d{1,2}-\d{1,2}$/;
const isNumeric = (param) => typeof param === "number" && !Number.isNaN(param);
const isNotEmpty = (param) => typeof param === "string" && param.length > 0;
const isEmptyOrPositiveNumber = (param) => typeof param === "undefined" || (typeof param === "number" && param > 0);
const isValidLicenseStates = (param) => {
    if (!param) {
        return true;
    }
    if (typeof param !== "string") {
        return false;
    }
    const licenseStates = param.split(",");
    return licenseStates.every((state) => (0,_license__WEBPACK_IMPORTED_MODULE_0__/* .isValidLicenseState */ .pu)(state));
};
const isSafeUrl = (param) => {
    if (typeof param !== "string") {
        return false;
    }
    const url = (0,_url__WEBPACK_IMPORTED_MODULE_1__/* .createSafeOriginUrl */ .l)(param);
    return typeof url === "string";
};
function validateParams(command, paramDefinitions) {
    return paramDefinitions
        .map((definition) => {
        const name = String(definition.name);
        const param = command[name];
        return definition.validate(param)
            ? ""
            : `Invalid value for parameter "${name}", got "${param}":`;
    })
        .filter((result) => result !== "");
}
const isValidDomainList = (param) => {
    if (!param) {
        return true;
    }
    if (typeof param !== "string") {
        return false;
    }
    return (0,_src_core_url_shared__WEBPACK_IMPORTED_MODULE_2__/* .isDomainList */ .L)(param);
};
const isValidDate = (param) => {
    if (!param) {
        return false;
    }
    if (typeof param !== "string") {
        return false;
    }
    if (!validDateRegExp.test(param)) {
        return false;
    }
    if (!Date.parse(param)) {
        return false;
    }
    return true;
};


/***/ }),

/***/ 1607:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   U: () => (/* binding */ addExperimentsSearchParams),
/* harmony export */   l: () => (/* binding */ createSafeOriginUrl)
/* harmony export */ });
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _alias_prefs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2680);
/* harmony import */ var _url_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(1912);
/* harmony import */ var _alias_uninstall__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(8624);




function createSafeOriginUrl(url) {
    const defaultOrigin = _alias_prefs__WEBPACK_IMPORTED_MODULE_1__/* .Prefs */ .N.get("ipm_default_origin");
    const safeOrigins = _alias_prefs__WEBPACK_IMPORTED_MODULE_1__/* .Prefs */ .N.get("ipm_safe_origins");
    let safeOriginUrl;
    try {
        safeOriginUrl = new URL(url, defaultOrigin);
    }
    catch (ex) {
        return null;
    }
    if (!safeOrigins.includes(safeOriginUrl.origin)) {
        return null;
    }
    return safeOriginUrl.href;
}
async function addExperimentsSearchParams(url) {
    var _a;
    let extendedUrl;
    try {
        extendedUrl = new URL(url);
    }
    catch (ex) {
        return null;
    }
    extendedUrl.searchParams.append(_url_types__WEBPACK_IMPORTED_MODULE_2__/* .ExperimentSearchParameterKeys */ .l.revision, (_a = (await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.experiments.getRevisionId())) !== null && _a !== void 0 ? _a : _url_types__WEBPACK_IMPORTED_MODULE_2__/* .noRevisionId */ .a);
    extendedUrl.searchParams.append(_url_types__WEBPACK_IMPORTED_MODULE_2__/* .ExperimentSearchParameterKeys */ .l.variants, await (0,_alias_uninstall__WEBPACK_IMPORTED_MODULE_3__/* .getExperiments */ .D)());
    return extendedUrl.href;
}


/***/ }),

/***/ 1912:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   a: () => (/* binding */ noRevisionId),
/* harmony export */   l: () => (/* binding */ ExperimentSearchParameterKeys)
/* harmony export */ });
var ExperimentSearchParameterKeys;
(function (ExperimentSearchParameterKeys) {
    ExperimentSearchParameterKeys["revision"] = "er";
    ExperimentSearchParameterKeys["variants"] = "ev";
})(ExperimentSearchParameterKeys || (ExperimentSearchParameterKeys = {}));
const noRevisionId = "";


/***/ }),

/***/ 5997:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";

// EXTERNAL MODULE: ../../node_modules/webextension-polyfill/src/browser-polyfill.js
var browser_polyfill = __webpack_require__(2558);
// EXTERNAL MODULE: ./adblock-betafish/ipm/background/index.ts
var background = __webpack_require__(8146);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/index.ts + 1 modules
var utilities_background = __webpack_require__(199);
// EXTERNAL MODULE: ./adblock-betafish/prefs/background/settings.js
var settings = __webpack_require__(3288);
;// CONCATENATED MODULE: ./adblock-betafish/new-tab/background/middleware/new-tab.types.ts
var CreationMethod;
(function (CreationMethod) {
    CreationMethod["default"] = "default";
    CreationMethod["force"] = "force";
})(CreationMethod || (CreationMethod = {}));
const defaultCreationMethod = CreationMethod.default;
const defaultPriority = 1;

;// CONCATENATED MODULE: ./adblock-betafish/new-tab/background/middleware/new-tab.ts



const paramDefinitionList = [
    {
        name: "url",
        validate: background/* isSafeUrl */.FY,
    },
    {
        name: "license_state_list",
        validate: background/* isValidLicenseStates */.Qo,
    },
    {
        name: "method",
        validate: (param) => typeof param === "undefined" ||
            (typeof param === "string" &&
                Object.values(CreationMethod)
                    .map((method) => String(method))
                    .includes(param)),
    },
    {
        name: "priority",
        validate: background/* isEmptyOrPositiveNumber */.bT,
    },
];
function isNewTabCommand(command) {
    const validationErrors = (0,background/* validateParams */.XB)(command, paramDefinitionList);
    if (validationErrors.length === 0) {
        return true;
    }
    utilities_background.error("[new-tab]: Invalid parameters received:", validationErrors.join(" "));
    return false;
}
function isNewTabBehavior(candidate) {
    return (candidate !== null &&
        typeof candidate === "object" &&
        "target" in candidate &&
        "method" in candidate &&
        "priority" in candidate);
}
function getBehavior(command) {
    if (!isNewTabCommand(command)) {
        return null;
    }
    const method = typeof command.method === "undefined" ? defaultCreationMethod : CreationMethod[command.method];
    return {
        target: command.url,
        licenseStateList: command.license_state_list || background/* defaultLicenseState */.O1,
        method,
        priority: typeof command.priority === "number" ? command.priority : defaultPriority,
    };
}
function getContent() {
    return null;
}
function setNewTabCommandHandler(handler, onCommandsProcessed) {
    (0,background/* setCommandActor */.vf)(background/* CommandName */.bp.createTab, {
        getBehavior,
        getContent,
        handleCommand: handler,
        isValidCommand: isNewTabCommand,
        onCommandsProcessed,
    });
}

;// CONCATENATED MODULE: ./adblock-betafish/new-tab/background/middleware/index.ts



;// CONCATENATED MODULE: ./adblock-betafish/new-tab/background/tab-manager.types.ts
const blockCountQueryParameter = "bc";
const lastShownKey = "new_tab_last_shown";
const coolDownPeriodKey = "new_tab_cool_down";
var NewTabEventType;
(function (NewTabEventType) {
    NewTabEventType["created"] = "tab_created";
    NewTabEventType["loaded"] = "tab_loaded";
    NewTabEventType["received"] = "received";
    NewTabEventType["has_content"] = "has_content";
})(NewTabEventType || (NewTabEventType = {}));
var NewTabErrorEventType;
(function (NewTabErrorEventType) {
    NewTabErrorEventType["noBehaviorFound"] = "error_no_behavior";
    NewTabErrorEventType["licenseStateNoMatch"] = "license_state_no_match";
    NewTabErrorEventType["noUrlFound"] = "error_no_url";
    NewTabErrorEventType["tabCreationError"] = "tab_creation_error";
})(NewTabErrorEventType || (NewTabErrorEventType = {}));
var NewTabExitEventType;
(function (NewTabExitEventType) {
    NewTabExitEventType["admin"] = "newtab_admin";
    NewTabExitEventType["disabled"] = "newtab_disabled";
})(NewTabExitEventType || (NewTabExitEventType = {}));

// EXTERNAL MODULE: ./adblock-betafish/alias/prefs.js
var prefs = __webpack_require__(2680);
// EXTERNAL MODULE: ./adblock-betafish/ipm/background/language-check.ts
var language_check = __webpack_require__(1915);
;// CONCATENATED MODULE: ./adblock-betafish/new-tab/background/tab-manager.ts








const tabIds = new Set();
const onCreatedHandlerByIPMids = new Map();
const onUpdatedHandlerByIPMids = new Map();
const openNewtabOnUpdatedHandlerByIPMids = new Map();
let newTabCounter = 0;
const newTabMessageSendTrigger = [1, 10, 20, 100, 200];
const waitingTabs = {};
const createdTabsMap = new Map();
function compareNewTabRequestsByPriority(newTabA, newTabB) {
    if (newTabA.behavior.method === CreationMethod.force &&
        newTabB.behavior.method !== CreationMethod.force) {
        return -1;
    }
    if (newTabA.behavior.method !== CreationMethod.force &&
        newTabB.behavior.method === CreationMethod.force) {
        return 1;
    }
    if (newTabA.behavior.priority > newTabB.behavior.priority) {
        return -1;
    }
    if (newTabA.behavior.priority < newTabB.behavior.priority) {
        return 1;
    }
    if (newTabA.ipmId < newTabB.ipmId) {
        return -1;
    }
    if (newTabA.ipmId > newTabB.ipmId) {
        return 1;
    }
    return 0;
}
function registerEvent(ipmId, name) {
    (0,background/* recordEvent */.yM)(ipmId, background/* CommandName */.bp.createTab, name);
}
async function isCoolDownPeriodOngoing() {
    await prefs/* Prefs */.N.untilLoaded;
    return prefs/* Prefs */.N.get(lastShownKey) + prefs/* Prefs */.N.get(coolDownPeriodKey) > Date.now();
}
const openNewtabOnUpdated = (tabId, changeInfo, tab) => {
    if (changeInfo.status !== "complete" ||
        tab === null ||
        tabId !== tab.id ||
        !createdTabsMap.has(tabId)) {
        return;
    }
    const ipmId = createdTabsMap.get(tabId);
    if (typeof ipmId !== "string") {
        return;
    }
    const onUpdatedHandler = openNewtabOnUpdatedHandlerByIPMids.get(ipmId);
    openNewtabOnUpdatedHandlerByIPMids.delete(ipmId);
    browser_polyfill.tabs.onUpdated.removeListener(onUpdatedHandler);
    registerEvent(ipmId, NewTabEventType.loaded);
};
async function addBlockCountToURL(urlString) {
    let url;
    try {
        url = new URL(urlString);
    }
    catch (_) {
        return null;
    }
    await prefs/* Prefs */.N.untilLoaded;
    const blockCount = prefs/* Prefs */.N.get("blocked_total");
    url.searchParams.append(blockCountQueryParameter, blockCount);
    return url.toString();
}
async function openNewtab() {
    utilities_background.debug("[new-tab]:openNewtab");
    const candidates = Object.values(waitingTabs).sort(compareNewTabRequestsByPriority);
    for (const candidate of candidates) {
        utilities_background.debug("[new-tab]:openNewtab");
        const { ipmId } = candidate;
        void (0,language_check/* checkLanguage */.Z)(ipmId);
        removeListeners(ipmId);
        if (await isCoolDownPeriodOngoing()) {
            utilities_background.debug("[new-tab]: Cool down period still ongoing");
            return;
        }
        const behavior = (0,background/* getBehavior */.j3)(ipmId);
        if (!isNewTabBehavior(behavior)) {
            utilities_background.debug("[new-tab]: No command behavior");
            registerEvent(ipmId, NewTabErrorEventType.noBehaviorFound);
            (0,background/* dismissCommand */.E7)(ipmId);
            continue;
        }
        if (!(await (0,background/* doesLicenseStateMatch */.Dh)(behavior))) {
            utilities_background.debug("[new-tab]: License state mis-match");
            registerEvent(ipmId, NewTabErrorEventType.licenseStateNoMatch);
            (0,background/* dismissCommand */.E7)(ipmId);
            continue;
        }
        const targetUrl = (0,background/* createSafeOriginUrl */.lj)(behavior.target);
        if (!targetUrl) {
            registerEvent(ipmId, NewTabErrorEventType.noUrlFound);
            utilities_background.debug("[new-tab]: Invalid target URL.");
            (0,background/* dismissCommand */.E7)(ipmId);
            continue;
        }
        let url = await (0,background/* addExperimentsSearchParams */.U6)(targetUrl);
        if (url === null) {
            utilities_background.debug("[new-tab]: Failed to append experiments search params.");
            url = targetUrl;
        }
        url = await addBlockCountToURL(url);
        if (url === null) {
            (0,background/* recordEvent */.yM)(ipmId, background/* CommandName */.bp.createTab, NewTabErrorEventType.noUrlFound);
            (0,background/* dismissCommand */.E7)(ipmId);
            utilities_background.debug("[new-tab]: Invalid target URL.");
            continue;
        }
        const command = (0,background/* getCommand */.OE)(ipmId);
        if (!command) {
            continue;
        }
        if ((0,background/* isCommandExpired */.Jj)(command)) {
            utilities_background.error("[new-tab]: Command has expired.");
            registerEvent(ipmId, background/* CommandEventType */.k4.expired);
            (0,background/* dismissCommand */.E7)(ipmId);
            continue;
        }
        const loadEventListener = openNewtabOnUpdated.bind(null);
        browser_polyfill.tabs.onUpdated.addListener(loadEventListener);
        let tabId;
        try {
            const tab = await browser_polyfill.tabs.create({ url });
            tabId = tab.id;
        }
        catch (ex) {
            utilities_background.error(`[new-tab]: Tab creation error for IPM id "${ipmId}"`, ex);
            registerEvent(ipmId, NewTabErrorEventType.tabCreationError);
            continue;
        }
        if (typeof tabId === "undefined") {
            utilities_background.error(`[new-tab]: Invalid ID "${tabId}" for created tab for IPM ID "${ipmId}"`);
            registerEvent(ipmId, NewTabErrorEventType.tabCreationError);
            continue;
        }
        createdTabsMap.set(tabId, ipmId);
        openNewtabOnUpdatedHandlerByIPMids.set(ipmId, loadEventListener);
        await prefs/* Prefs */.N.set(lastShownKey, Date.now());
        registerEvent(ipmId, NewTabEventType.created);
        (0,background/* dismissCommand */.E7)(ipmId);
    }
}
function removeListeners(ipmId) {
    const onCreatedHandler = onCreatedHandlerByIPMids.get(ipmId);
    onCreatedHandlerByIPMids.delete(ipmId);
    const onUpdatedHandler = onUpdatedHandlerByIPMids.get(ipmId);
    onUpdatedHandlerByIPMids.delete(ipmId);
    if (typeof onCreatedHandler !== "undefined") {
        browser_polyfill.tabs.onCreated.removeListener(onCreatedHandler);
        browser_polyfill.tabs.onUpdated.removeListener(onUpdatedHandler);
    }
    browser_polyfill.tabs.onRemoved.removeListener(onRemoved);
}
const openNotificationTab = () => {
    tabIds.clear();
    openNewtab();
};
const onCreated = (tab) => {
    if (tab.url === "about:newtab") {
        openNotificationTab();
        return;
    }
    tabIds.add(tab.id);
};
const onRemoved = (tabId) => {
    tabIds.delete(tabId);
};
const onUpdated = (tabId, changeInfo, tab) => {
    if (!tabIds.has(tabId) || changeInfo.status !== "complete") {
        return;
    }
    tabIds.delete(tabId);
    if (tab.url && /^https?:/.test(tab.url)) {
        newTabCounter += 1;
        const ipmId = createdTabsMap.get(tabId);
        if (typeof ipmId === "string" && newTabMessageSendTrigger.includes(newTabCounter)) {
            (0,background/* recordEvent */.yM)(ipmId, background/* CommandName */.bp.createTab, `${NewTabEventType.has_content}:${newTabCounter}`);
        }
        return;
    }
    openNotificationTab();
};
async function handleCommand(ipmId) {
    utilities_background.debug("[new-tab]:tab manager handleCommand", ipmId);
    const { installType } = await browser_polyfill.management.getSelf();
    if (installType === "admin") {
        registerEvent(ipmId, NewTabExitEventType.admin);
        (0,background/* dismissCommand */.E7)(ipmId);
        return;
    }
    await settings/* settings */.W0.onload();
    if ((0,settings/* getSettings */.mt)().suppress_update_page) {
        utilities_background.debug("[new-tab]:suppress_update_page - true");
        registerEvent(ipmId, NewTabExitEventType.disabled);
        (0,background/* dismissCommand */.E7)(ipmId);
        return;
    }
    utilities_background.debug("[new-tab]:openNewtab");
    const behavior = (0,background/* getBehavior */.j3)(ipmId);
    if (!isNewTabBehavior(behavior)) {
        utilities_background.debug("[new-tab]: Invalid command behavior");
        registerEvent(ipmId, NewTabErrorEventType.noBehaviorFound);
        (0,background/* dismissCommand */.E7)(ipmId);
        return;
    }
    registerEvent(ipmId, NewTabEventType.received);
    waitingTabs[ipmId] = { behavior, ipmId };
    if (behavior.method === CreationMethod.force) {
        return;
    }
    const onCreatedHandler = onCreated.bind(null);
    onCreatedHandlerByIPMids.set(ipmId, onCreatedHandler);
    const onUpdatedHandler = onUpdated.bind(null);
    onUpdatedHandlerByIPMids.set(ipmId, onUpdatedHandler);
    browser_polyfill.tabs.onCreated.addListener(onCreatedHandler);
    browser_polyfill.tabs.onRemoved.addListener(onRemoved);
    browser_polyfill.tabs.onUpdated.addListener(onUpdatedHandler);
    newTabCounter = 0;
}
function onCommandsProcessed() {
    if (Array.from(Object.values(waitingTabs)).some((candidate) => candidate.behavior.method === CreationMethod.force)) {
        void openNewtab();
    }
}
async function start() {
    utilities_background.debug("[new-tab]:tab manager start");
    setNewTabCommandHandler(handleCommand, onCommandsProcessed);
}
void start().catch(utilities_background.error);

;// CONCATENATED MODULE: ./adblock-betafish/new-tab/background/index.ts



/***/ }),

/***/ 8558:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";

// UNUSED EXPORTS: DialogErrorEventType, DialogEventType, ShowOnpageDialogResult, Timing, compareDialogsByPriority, coolDownPeriodKey, eventEmitter, isCoolDownPeriodOngoing, lastShownKey, showDialogFromList, showOnpageDialog

// EXTERNAL MODULE: ../../node_modules/webextension-polyfill/src/browser-polyfill.js
var browser_polyfill = __webpack_require__(2558);
// EXTERNAL MODULE: ./adblock-betafish/alias/prefs.js
var prefs = __webpack_require__(2680);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/messaging/port.js
var port = __webpack_require__(297);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/storage/tab-session.js
var tab_session = __webpack_require__(1583);
// EXTERNAL MODULE: ./adblockplusui/adblockpluschrome/lib/events.js
var events = __webpack_require__(866);
;// CONCATENATED MODULE: ./adblock-betafish/i18n/background/locale.ts

function getLocaleInfo() {
    return {
        locale: browser_polyfill.i18n.getUILanguage(),
        readingDirection: browser_polyfill.i18n.getMessage("@@bidi_dir"),
    };
}

;// CONCATENATED MODULE: ./adblock-betafish/i18n/background/index.ts



// EXTERNAL MODULE: ./adblock-betafish/ipm/background/index.ts
var background = __webpack_require__(8146);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/index.ts + 1 modules
var utilities_background = __webpack_require__(199);
// EXTERNAL MODULE: ./adblock-betafish/prefs/background/settings.js
var settings = __webpack_require__(3288);
;// CONCATENATED MODULE: ./adblock-betafish/onpage-dialog/background/timing.types.ts
var Timing;
(function (Timing) {
    Timing["afterWebAllowlisting"] = "after_web_allowlisting";
    Timing["immediate"] = "immediate";
    Timing["revisitWebAllowlisted"] = "revisit_web_allowlisted_site";
    Timing["afterNavigation"] = "after_navigation";
    Timing["cookieBanner"] = "cookie_banner";
})(Timing || (Timing = {}));

;// CONCATENATED MODULE: ./adblock-betafish/onpage-dialog/background/dialog.ts

function isDialog(candidate) {
    return (candidate !== null &&
        typeof candidate === "object" &&
        "behavior" in candidate &&
        "content" in candidate);
}
function isDialogBehavior(candidate) {
    return (candidate !== null &&
        typeof candidate === "object" &&
        "displayDuration" in candidate &&
        "target" in candidate &&
        "timing" in candidate);
}
function isDialogContent(candidate) {
    return (candidate !== null &&
        typeof candidate === "object" &&
        "body" in candidate &&
        "button" in candidate &&
        "title" in candidate);
}
function isCookieBannerDialog(dialog) {
    return dialog.behavior.timing === Timing.cookieBanner;
}

;// CONCATENATED MODULE: ./adblock-betafish/onpage-dialog/shared/messages.ts
function isPingMessage(candidate) {
    return (candidate !== null &&
        typeof candidate === "object" &&
        "displayDuration" in candidate &&
        "type" in candidate);
}

;// CONCATENATED MODULE: ./adblock-betafish/onpage-dialog/background/middleware/ipm-onpage-dialog.types.ts
const defaultPriority = 1;

;// CONCATENATED MODULE: ./adblock-betafish/onpage-dialog/background/middleware/ipm-onpage-dialog.ts




const paramDefinitionList = [
    {
        name: "timing",
        validate: (param) => typeof param === "undefined" ||
            param === Timing.afterWebAllowlisting ||
            param === Timing.revisitWebAllowlisted ||
            param === Timing.afterNavigation ||
            param === Timing.cookieBanner,
    },
    {
        name: "display_duration",
        validate: (param) => typeof param === "undefined" || (typeof param === "number" && param >= 0 && param <= 20),
    },
    {
        name: "sub_title",
        validate: background/* isNotEmpty */.hj,
    },
    {
        name: "upper_body",
        validate: background/* isNotEmpty */.hj,
    },
    {
        name: "button_label",
        validate: background/* isNotEmpty */.hj,
    },
    {
        name: "button_target",
        validate: background/* isSafeUrl */.FY,
    },
    {
        name: "domain_list",
        validate: background/* isValidDomainList */.lq,
    },
    {
        name: "license_state_list",
        validate: background/* isValidLicenseStates */.Qo,
    },
    {
        name: "priority",
        validate: background/* isEmptyOrPositiveNumber */.bT,
    },
];
function getBehavior(command) {
    var _a;
    if (!isDialogCommand(command)) {
        return null;
    }
    return {
        displayDuration: typeof command.display_duration === "number" ? command.display_duration : 5,
        target: command.button_target,
        timing: command.timing,
        domainList: command.domain_list,
        licenseStateList: (_a = command.license_state_list) !== null && _a !== void 0 ? _a : background/* defaultLicenseState */.O1,
        priority: typeof command.priority === "number" ? command.priority : defaultPriority,
    };
}
function getContent(command) {
    if (!isDialogCommand(command)) {
        return null;
    }
    return {
        body: typeof command.lower_body === "string"
            ? [command.upper_body, command.lower_body]
            : [command.upper_body],
        button: command.button_label,
        title: command.sub_title,
    };
}
function isDialogCommand(command) {
    const validationErrors = (0,background/* validateParams */.XB)(command, paramDefinitionList);
    if (validationErrors.length === 0) {
        return true;
    }
    utilities_background.error("[onpage-dialog]: Invalid parameters received:", validationErrors.join(" "));
    return false;
}
function setDialogCommandHandler(handler) {
    (0,background/* setCommandActor */.vf)(background/* CommandName */.bp.createOnPageDialog, {
        getBehavior,
        getContent,
        handleCommand: handler,
        isValidCommand: isDialogCommand,
        onCommandsProcessed: () => { },
    });
}

;// CONCATENATED MODULE: ./adblock-betafish/onpage-dialog/background/middleware/index.ts



;// CONCATENATED MODULE: ./adblock-betafish/onpage-dialog/background/stats.ts

const statsStorageKey = "onpage_dialog_command_stats";
function clearStats(dialogId) {
    const statsStorage = prefs/* Prefs */.N.get(statsStorageKey);
    delete statsStorage[dialogId];
    void prefs/* Prefs */.N.set(statsStorageKey, statsStorage);
}
function getStats(dialogId) {
    const storage = prefs/* Prefs */.N.get(statsStorageKey);
    const storedStats = storage[dialogId];
    if (isStats(storedStats)) {
        return storedStats;
    }
    const initialStats = {
        displayCount: 0,
        lastDisplayTime: 0,
    };
    setStats(dialogId, initialStats);
    return initialStats;
}
function isStats(candidate) {
    return (candidate !== null &&
        typeof candidate === "object" &&
        "displayCount" in candidate &&
        "lastDisplayTime" in candidate);
}
function setStats(dialogId, stats) {
    const storage = prefs/* Prefs */.N.get(statsStorageKey);
    storage[dialogId] = stats;
    void prefs/* Prefs */.N.set(statsStorageKey, storage);
}

;// CONCATENATED MODULE: ./adblock-betafish/onpage-dialog/background/tab-manager.types.ts
const lastShownKey = "onpage_dialog_last_shown";
const coolDownPeriodKey = "onpage_dialog_cool_down";
var DialogEventType;
(function (DialogEventType) {
    DialogEventType["buttonClicked"] = "dialog_button_clicked";
    DialogEventType["closed"] = "dialog_closed";
    DialogEventType["ignored"] = "dialog_ignored";
    DialogEventType["injected"] = "dialog_injected";
    DialogEventType["injected_error"] = "dialog_injected_error";
    DialogEventType["initial_ping"] = "ping.initial";
    DialogEventType["received"] = "received";
})(DialogEventType || (DialogEventType = {}));
var ShowOnpageDialogResult;
(function (ShowOnpageDialogResult) {
    ShowOnpageDialogResult[ShowOnpageDialogResult["ignored"] = 0] = "ignored";
    ShowOnpageDialogResult[ShowOnpageDialogResult["rejected"] = 1] = "rejected";
    ShowOnpageDialogResult[ShowOnpageDialogResult["shown"] = 2] = "shown";
    ShowOnpageDialogResult[ShowOnpageDialogResult["error"] = 3] = "error";
})(ShowOnpageDialogResult || (ShowOnpageDialogResult = {}));
var DialogErrorEventType;
(function (DialogErrorEventType) {
    DialogErrorEventType["error_no_dialog_found"] = "error.no_ipm";
    DialogErrorEventType["get_no_dialog_found"] = "get.no_dialog";
    DialogErrorEventType["ping_no_dialog_found"] = "ping.no_dialog";
})(DialogErrorEventType || (DialogErrorEventType = {}));

// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
;// CONCATENATED MODULE: ./adblock-betafish/polyfills/background/polyfill.ts
function isFilterMetadata(candidate) {
    return (candidate !== null &&
        typeof candidate === "object" &&
        "created" in candidate &&
        "origin" in candidate);
}

// EXTERNAL MODULE: ./src/core/url/shared/url.ts
var url = __webpack_require__(3638);
// EXTERNAL MODULE: ./src/filters/shared/index.ts
var shared = __webpack_require__(7057);
;// CONCATENATED MODULE: ./adblock-betafish/onpage-dialog/background/timing.ts








const configsStorageKey = "onpage_dialog_timing_configurations";
const knownConfigs = new Map();
async function getAllowlistingTime(tabId) {
    const allowlistingFilterTexts = await ewe_api.filters.getAllowingFilters(tabId);
    if (allowlistingFilterTexts.length === 0) {
        return null;
    }
    for (const filterText of allowlistingFilterTexts) {
        const metadata = await ewe_api.filters.getMetadata(filterText);
        if (!isFilterMetadata(metadata)) {
            continue;
        }
        if (metadata.origin !== shared.FilterOrigin.web) {
            continue;
        }
        return metadata.created;
    }
    return null;
}
function isTiming(candidate) {
    return typeof candidate === "string" && Object.values(Timing).includes(candidate);
}
function isTimingConfiguration(candidate) {
    return (candidate !== null &&
        typeof candidate === "object" &&
        "cooldownDuration" in candidate &&
        "maxDisplayCount" in candidate);
}
function isWithin(timestamp, minutes) {
    return timestamp < Date.now() - minutes * 60 * 1000;
}
function initializeConfigs() {
    const configs = prefs/* Prefs */.N.get(configsStorageKey);
    for (const [timing, config] of Object.entries(configs)) {
        if (!isTiming(timing) || !isTimingConfiguration(config)) {
            utilities_background.warn("[onpage-dialog] Unknown timing configuration", timing);
            continue;
        }
        knownConfigs.set(timing, config);
    }
    utilities_background.debug("[onpage-dialog]: Known timing configurations", knownConfigs);
}
function shouldBeDismissed(dialog, stats) {
    if (typeof stats !== "object") {
        return false;
    }
    const config = knownConfigs.get(dialog.behavior.timing);
    if (typeof config !== "object") {
        utilities_background.debug("[onpage-dialog]: Unknown timing");
        return true;
    }
    if (config.maxDisplayCount === 0) {
        return false;
    }
    utilities_background.debug("[onpage-dialog]: Display count", `${stats.displayCount}/${config.maxDisplayCount}`);
    return stats.displayCount >= config.maxDisplayCount;
}
async function shouldBeShownForAfterWebAllowlisting(timing, tab, stats) {
    var _a;
    const tabId = (_a = tab.id) !== null && _a !== void 0 ? _a : browser_polyfill.tabs.TAB_ID_NONE;
    const config = knownConfigs.get(timing);
    if (typeof config !== "object") {
        utilities_background.debug("[onpage-dialog]: Unknown timing");
        return false;
    }
    const allowlistingTime = await getAllowlistingTime(tabId);
    if (allowlistingTime === null) {
        utilities_background.debug("[onpage-dialog]: Not allowlisted");
        return false;
    }
    if (typeof config.maxAllowlistingDelay === "number" &&
        isWithin(allowlistingTime, config.maxAllowlistingDelay)) {
        utilities_background.debug("[onpage-dialog]: Allowlisted too long ago");
        return false;
    }
    if (typeof config.minAllowlistingDelay === "number" &&
        !isWithin(allowlistingTime, config.minAllowlistingDelay)) {
        utilities_background.debug("[onpage-dialog]: Allowlisted too recently");
        return false;
    }
    if (!isWithin(stats.lastDisplayTime, config.cooldownDuration * 60)) {
        utilities_background.debug("[onpage-dialog]: Dialog shown too recently");
        return false;
    }
    return true;
}
async function shouldBeShown(tab, dialog, stats) {
    var _a;
    const { domainList, timing } = dialog.behavior;
    const isWebAllowlistingRelated = [
        Timing.afterWebAllowlisting,
        Timing.revisitWebAllowlisted,
    ].includes(timing);
    if (isWebAllowlistingRelated &&
        !(await shouldBeShownForAfterWebAllowlisting(timing, tab, stats))) {
        return false;
    }
    return (0,url/* isActiveOnDomain */.g)((_a = tab.url) !== null && _a !== void 0 ? _a : "", domainList);
}
async function start() {
    await prefs/* Prefs */.N.untilLoaded;
    initializeConfigs();
    prefs/* Prefs */.N.on(configsStorageKey, () => {
        initializeConfigs();
    });
}

// EXTERNAL MODULE: ./adblock-betafish/ipm/background/language-check.ts
var language_check = __webpack_require__(1915);
;// CONCATENATED MODULE: ./adblock-betafish/onpage-dialog/background/tab-manager.ts
















const assignedDialogs = new tab_session/* TabSessionStorage */.b("onpage-dialog:dialogs");
const eventEmitter = new events/* EventEmitter */.b();
const unassignedDialogs = new Map();
const pagesWithCookieBanner = new Set();
function compareDialogsByPriority(dialogA, dialogB) {
    var _a, _b;
    if (dialogA.behavior.priority > dialogB.behavior.priority) {
        return -1;
    }
    if (dialogA.behavior.priority < dialogB.behavior.priority) {
        return 1;
    }
    const lowPriorityFallbackValue = "z";
    const ipmIdA = (_a = dialogA.ipmId) !== null && _a !== void 0 ? _a : lowPriorityFallbackValue;
    const ipmIdB = (_b = dialogB.ipmId) !== null && _b !== void 0 ? _b : lowPriorityFallbackValue;
    if (ipmIdA < ipmIdB) {
        return -1;
    }
    if (ipmIdA > ipmIdB) {
        return 1;
    }
    return 0;
}
async function isCoolDownPeriodOngoing() {
    await prefs/* Prefs */.N.untilLoaded;
    return prefs/* Prefs */.N.get(lastShownKey) + prefs/* Prefs */.N.get(coolDownPeriodKey) > Date.now();
}
function sendMessage(tabId, message) {
    return browser_polyfill.tabs.sendMessage(tabId, message, { frameId: 0 });
}
function recordDialogEvent(dialog, eventType) {
    eventEmitter.emit(eventType, dialog);
    if (typeof dialog.ipmId === "string") {
        (0,background/* recordEvent */.yM)(dialog.ipmId, background/* CommandName */.bp.createOnPageDialog, eventType);
    }
}
function recordDialogErrorEvent(eventType) {
    (0,background/* recordEvent */.yM)(null, background/* CommandName */.bp.createOnPageDialog, eventType);
}
function dismissDialog(dialog) {
    utilities_background.debug("[onpage-dialog]: Dismiss dialog");
    unassignedDialogs.delete(dialog.id);
    if (typeof dialog.ipmId === "string") {
        (0,background/* dismissCommand */.E7)(dialog.ipmId);
    }
}
async function removeDialogFrame(tabId) {
    const message = { type: "onpage-dialog.hide" };
    await sendMessage(tabId, message);
}
async function removeDialog(tabId, dialog) {
    utilities_background.debug("[onpage-dialog]: Remove dialog");
    if (!isDialog(dialog)) {
        utilities_background.debug("[onpage-dialog]: Remove dialog, no dialog found");
        return;
    }
    try {
        await removeDialogFrame(tabId);
        await assignedDialogs.delete(tabId);
    }
    catch (ex) {
    }
    const stats = getStats(dialog.id);
    if (!shouldBeDismissed(dialog, stats)) {
        utilities_background.debug("[onpage-dialog]: Keep dialog active");
        return;
    }
    dismissDialog(dialog);
    clearStats(dialog.id);
}
async function handleDialogCommand(ipmId, isInitialization) {
    if (typeof ipmId !== "string") {
        return;
    }
    const behavior = (0,background/* getBehavior */.j3)(ipmId);
    if (!isDialogBehavior(behavior)) {
        return;
    }
    const content = (0,background/* getContent */._A)(ipmId);
    if (!isDialogContent(content)) {
        return;
    }
    const dialog = { behavior, content, id: ipmId, ipmId };
    unassignedDialogs.set(dialog.id, dialog);
    if (!isInitialization) {
        recordDialogEvent(dialog, DialogEventType.received);
    }
}
async function handleCloseMessage(message, sender) {
    var _a;
    if (typeof ((_a = sender.page) === null || _a === void 0 ? void 0 : _a.id) === "undefined") {
        return;
    }
    const dialog = await assignedDialogs.get(sender.page.id);
    if (!isDialog(dialog)) {
        return;
    }
    void removeDialog(sender.page.id, dialog);
    recordDialogEvent(dialog, DialogEventType.closed);
}
async function handleContinueMessage(message, sender) {
    var _a;
    if (typeof ((_a = sender.page) === null || _a === void 0 ? void 0 : _a.id) === "undefined") {
        return;
    }
    const dialog = await assignedDialogs.get(sender.page.id);
    if (!isDialog(dialog)) {
        return;
    }
    const safeTargetUrl = (0,background/* createSafeOriginUrl */.lj)(dialog.behavior.target);
    if (safeTargetUrl === null) {
        return;
    }
    void browser_polyfill.tabs.create({ url: safeTargetUrl });
    void removeDialog(sender.page.id, dialog);
    recordDialogEvent(dialog, DialogEventType.buttonClicked);
}
async function handleGetMessage(message, sender) {
    var _a;
    utilities_background.debug("[onpage-dialog]: get");
    if (typeof ((_a = sender.page) === null || _a === void 0 ? void 0 : _a.id) === "undefined") {
        return null;
    }
    const dialog = await assignedDialogs.get(sender.page.id);
    if (!isDialog(dialog)) {
        utilities_background.debug("[onpage-dialog]: get, no dialog");
        recordDialogErrorEvent(DialogErrorEventType.get_no_dialog_found);
        return null;
    }
    return {
        content: dialog.content,
        localeInfo: getLocaleInfo(),
    };
}
async function handlePingMessage(message, sender) {
    var _a;
    if (!isPingMessage(message) || typeof ((_a = sender.page) === null || _a === void 0 ? void 0 : _a.id) === "undefined") {
        return;
    }
    const dialog = await assignedDialogs.get(sender.page.id);
    if (!isDialog(dialog)) {
        utilities_background.debug("[onpage-dialog]: ping message, no dialog");
        recordDialogErrorEvent(DialogErrorEventType.ping_no_dialog_found);
        return;
    }
    if (dialog.behavior.displayDuration === 0 ||
        message.displayDuration < dialog.behavior.displayDuration) {
        utilities_background.debug("[onpage-dialog]: ping message, duration exceeded");
        return;
    }
    void removeDialog(sender.page.id, dialog);
    recordDialogEvent(dialog, DialogEventType.ignored);
}
async function handleErrorMessage(message, sender) {
    var _a;
    if (typeof ((_a = sender.page) === null || _a === void 0 ? void 0 : _a.id) === "undefined") {
        return;
    }
    const dialog = await assignedDialogs.get(sender.page.id);
    if (!dialog) {
        (0,background/* recordEvent */.yM)(null, background/* CommandName */.bp.createOnPageDialog, DialogErrorEventType.error_no_dialog_found);
    }
    (0,background/* recordEvent */.yM)(dialog.ipmId, background/* CommandName */.bp.createOnPageDialog, `${message.type}.${message.error}`);
}
function handleTabRemovedEvent(data) {
    const { tabId, value: dialog } = data;
    utilities_background.debug("[onpage-dialog]: Handle Tab Removed Event");
    if (!isDialog(dialog)) {
        utilities_background.debug("[onpage-dialog]: Handle Tab Removed Event, no dialog");
        return;
    }
    void removeDialog(tabId, dialog);
    recordDialogEvent(dialog, DialogEventType.ignored);
}
async function injectScriptAndStyle(tabId) {
    try {
        if (browser_polyfill.scripting) {
            await browser_polyfill.scripting.insertCSS({
                files: ["adblock-onpage-dialog-user.css"],
                origin: "USER",
                target: { tabId },
            });
            await browser_polyfill.scripting.executeScript({
                files: ["onpage-dialog.postload.js"],
                target: { tabId },
            });
        }
        else {
            await browser_polyfill.tabs.insertCSS(tabId, {
                file: "adblock-onpage-dialog-user.css",
                allFrames: false,
                cssOrigin: "user",
                runAt: "document_start",
            });
            await browser_polyfill.tabs.executeScript(tabId, {
                file: "onpage-dialog.postload.js",
                allFrames: false,
            });
        }
        return true;
    }
    catch (error) {
        utilities_background.error("Injection of Dialog css & script failed");
        utilities_background.error(error);
        return false;
    }
}
async function addDialog(tabId) {
    utilities_background.debug("[onpage-dialog]: addDialog");
    return injectScriptAndStyle(tabId);
}
async function shouldBeIgnored() {
    if ((0,settings/* getSettings */.mt)().show_survey === false) {
        utilities_background.debug("[onpage-dialog]:show_survey - disabled");
        return true;
    }
    if ((0,settings/* getSettings */.mt)().suppress_surveys) {
        utilities_background.debug("[onpage-dialog]:suppress_surveys - enabled");
        return true;
    }
    if ((0,settings/* getSettings */.mt)().onpageMessages === false) {
        utilities_background.debug("[onpage-dialog]:onpageMessages - disabled");
        return true;
    }
    return false;
}
async function showOnpageDialog(tabId, tab, dialog) {
    if (typeof dialog.ipmId === "string") {
        void (0,language_check/* checkLanguage */.Z)(dialog.ipmId);
    }
    if (await shouldBeIgnored()) {
        utilities_background.debug("[onpage-dialog]: User ignores notifications");
        return ShowOnpageDialogResult.rejected;
    }
    if (await isCoolDownPeriodOngoing()) {
        utilities_background.debug("[onpage-dialog]: Cool down period still ongoing");
        return ShowOnpageDialogResult.ignored;
    }
    const stats = getStats(dialog.id);
    const shouldDialogBeDismissed = shouldBeDismissed(dialog, stats);
    const shouldDialogBeShown = await shouldBeShown(tab, dialog, stats);
    if (shouldDialogBeDismissed) {
        utilities_background.debug("[onpage-dialog]: Reject dialog");
        return ShowOnpageDialogResult.rejected;
    }
    if (shouldDialogBeShown && (await assignedDialogs.has(tabId))) {
        utilities_background.debug("[onpage-dialog]: Tab already contains dialog");
        return ShowOnpageDialogResult.rejected;
    }
    if (!shouldDialogBeShown) {
        utilities_background.debug("[onpage-dialog]: Don't show");
        return ShowOnpageDialogResult.ignored;
    }
    if (isCookieBannerDialog(dialog) && !pagesWithCookieBanner.has(tabId)) {
        utilities_background.debug("[onpage-dialog]: No cookie banner detected on page");
        return ShowOnpageDialogResult.ignored;
    }
    utilities_background.debug("[onpage-dialog]: Show dialog");
    await assignedDialogs.set(tabId, dialog);
    const assignedDialogOnPage = await assignedDialogs.get(tabId);
    if (!isDialog(assignedDialogOnPage)) {
        utilities_background.debug("[onpage-dialog]: Failed to be assigned to the page ", tabId);
        return ShowOnpageDialogResult.ignored;
    }
    const now = Date.now();
    setStats(dialog.id, {
        displayCount: stats.displayCount + 1,
        lastDisplayTime: now,
    });
    await prefs/* Prefs */.N.set(lastShownKey, now);
    const successfulInjection = await addDialog(tabId);
    if (!successfulInjection) {
        recordDialogEvent(dialog, DialogEventType.injected_error);
        return ShowOnpageDialogResult.error;
    }
    recordDialogEvent(dialog, DialogEventType.injected);
    return ShowOnpageDialogResult.shown;
}
function isTabPage(candidate) {
    return (candidate !== null && typeof candidate === "object" && "id" in candidate && "url" in candidate);
}
async function showDialogFromList(dialogs, tab, dismissDialogFn = dismissDialog) {
    if (!tab.id) {
        return;
    }
    for (const dialog of dialogs) {
        if (!(await (0,background/* doesLicenseStateMatch */.Dh)(dialog.behavior))) {
            utilities_background.debug("[onpage-dialog]: License has mismatch");
            dismissDialogFn(dialog);
            continue;
        }
        if (typeof dialog.ipmId === "string") {
            const command = (0,background/* getCommand */.OE)(dialog.ipmId);
            if (command && (0,background/* isCommandExpired */.Jj)(command)) {
                utilities_background.error("[onpage-dialog]: Command has expired.");
                recordDialogEvent(dialog, background/* CommandEventType */.k4.expired);
                dismissDialogFn(dialog);
                continue;
            }
        }
        if (isCookieBannerDialog(dialog)) {
            const subs = (await SubscriptionAdapter.getSubscriptionsMinusText());
            const cookieSubsbscriptionId = "cookies-premium";
            const isCookieSubscriptionActive = Object.keys(subs).includes(cookieSubsbscriptionId);
            if (isCookieSubscriptionActive) {
                utilities_background.debug("[onpage-dialog]: Dismiss 'cookie banner' OPD due to Premium cookie subscription active");
                dismissDialogFn(dialog);
                continue;
            }
        }
        const result = await showOnpageDialog(tab.id, tab, dialog);
        if (result === ShowOnpageDialogResult.rejected) {
            dismissDialogFn(dialog);
        }
    }
}
async function handlePageLoadedEvent(page) {
    if (!isTabPage(page)) {
        return;
    }
    if (!page.id) {
        return;
    }
    try {
        if (await assignedDialogs.has(page.id)) {
            utilities_background.debug("[onpage-dialog]: Tab already contains dialog");
            return;
        }
        await removeDialogFrame(page.id);
    }
    catch (ex) {
    }
    if (unassignedDialogs.size === 0) {
        utilities_background.debug("[onpage-dialog]: No command");
        return;
    }
    let tab = null;
    try {
        tab = await browser_polyfill.tabs.get(page.id);
    }
    catch (ex) {
        return;
    }
    if (tab.incognito || typeof tab.url !== "string" || !/^https?:/.test(tab.url)) {
        return;
    }
    const dialogs = Array.from(unassignedDialogs.values()).sort(compareDialogsByPriority);
    void showDialogFromList(dialogs, tab);
}
async function handleCookieBannerDetected(message, sender, processCookieBannerDialogs = showDialogFromList) {
    utilities_background.debug("[onpage-dialog]: Cookie banner detected");
    const { page } = sender;
    let tab = null;
    try {
        tab = await browser_polyfill.tabs.get(page.id);
    }
    catch (ex) {
        return;
    }
    if (!tab) {
        return;
    }
    if (!tab.id) {
        return;
    }
    pagesWithCookieBanner.add(tab.id);
    let dialogs = Array.from(unassignedDialogs.values()).sort(compareDialogsByPriority);
    dialogs = dialogs.filter((dialog) => isCookieBannerDialog(dialog));
    void processCookieBannerDialogs(dialogs, tab);
}
async function tab_manager_start() {
    await start();
    port/* port */.O.on("onpage-dialog.close", handleCloseMessage);
    port/* port */.O.on("onpage-dialog.continue", handleContinueMessage);
    port/* port */.O.on("onpage-dialog.get", handleGetMessage);
    port/* port */.O.on("onpage-dialog.ping", handlePingMessage);
    port/* port */.O.on("onpage-dialog.error", handleErrorMessage);
    port/* port */.O.on("cookie-banner.detected", handleCookieBannerDetected);
    ext.addTrustedMessageTypes(null, [
        "onpage-dialog.continue",
        "onpage-dialog.close",
        "onpage-dialog.get",
        "onpage-dialog.ping",
        "onpage-dialog.error",
        "cookie-banner.detected",
    ]);
    assignedDialogs.on("tab-removed", handleTabRemovedEvent);
    ext.pages.onRemoved.addListener((tabId) => {
        if (pagesWithCookieBanner.has(tabId)) {
            pagesWithCookieBanner.delete(tabId);
        }
    });
    ext.pages.onLoaded.addListener(handlePageLoadedEvent);
    setDialogCommandHandler(handleDialogCommand);
}
void tab_manager_start().catch(utilities_background.error);

;// CONCATENATED MODULE: ./adblock-betafish/onpage-dialog/background/index.ts






/***/ }),

/***/ 3138:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  vj: () => (/* reexport */ ReadyState),
  BH: () => (/* reexport */ getReadyState),
  Po: () => (/* reexport */ setReadyState)
});

;// CONCATENATED MODULE: ./adblock-betafish/testing/ready-state/background/ready-state.types.ts
var ReadyState;
(function (ReadyState) {
    ReadyState["loading"] = "loading";
    ReadyState["started"] = "started";
})(ReadyState || (ReadyState = {}));

;// CONCATENATED MODULE: ./adblock-betafish/testing/ready-state/background/ready-state.ts

let state = ReadyState.loading;
function setReadyState(newState) {
    state = newState;
}
function getReadyState() {
    return state;
}

;// CONCATENATED MODULE: ./adblock-betafish/testing/ready-state/background/index.ts




/***/ }),

/***/ 199:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  FlavorType: () => (/* reexport */ user_agent_info_types/* FlavorType */.z),
  LogLevel: () => (/* reexport */ logger_types/* LogLevel */.$),
  chromeStorageDeleteHelper: () => (/* reexport */ bg_functions/* chromeStorageDeleteHelper */.PM),
  chromeStorageGetHelper: () => (/* reexport */ bg_functions/* chromeStorageGetHelper */.s3),
  chromeStorageSetHelper: () => (/* reexport */ bg_functions/* chromeStorageSetHelper */.AX),
  createFilterMetaData: () => (/* reexport */ bg_functions/* createFilterMetaData */.yf),
  debug: () => (/* reexport */ logger/* debug */.Yz),
  determineUserLanguage: () => (/* reexport */ bg_functions/* determineUserLanguage */.v0),
  error: () => (/* reexport */ logger/* error */.z3),
  extend: () => (/* reexport */ bg_functions/* extend */.X$),
  getUserAgentInfo: () => (/* reexport */ getUserAgentInfo),
  info: () => (/* reexport */ logger/* info */.pq),
  isEmptyObject: () => (/* reexport */ bg_functions/* isEmptyObject */.RI),
  log: () => (/* reexport */ bg_functions/* log */.Rm),
  logging: () => (/* reexport */ bg_functions/* logging */.m9),
  migrateData: () => (/* reexport */ bg_functions/* migrateData */.YK),
  parseUri: () => (/* reexport */ bg_functions/* parseUri */.wY),
  reloadOptionsPageTabs: () => (/* reexport */ bg_functions/* reloadOptionsPageTabs */.h_),
  reportAndLogError: () => (/* reexport */ logger/* reportAndLogError */.A1),
  sessionStorageGet: () => (/* reexport */ bg_functions/* sessionStorageGet */.mI),
  sessionStorageSet: () => (/* reexport */ bg_functions/* sessionStorageSet */.i_),
  storageGet: () => (/* reexport */ bg_functions/* storageGet */["if"]),
  storageSet: () => (/* reexport */ bg_functions/* storageSet */.EI),
  warn: () => (/* reexport */ logger/* warn */.R8)
});

// EXTERNAL MODULE: ./adblock-betafish/utilities/background/logger.ts
var logger = __webpack_require__(1328);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/logger.types.ts
var logger_types = __webpack_require__(995);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/bg-functions.js
var bg_functions = __webpack_require__(7656);
// EXTERNAL MODULE: ./adblock-betafish/utilities/background/user-agent-info.types.ts
var user_agent_info_types = __webpack_require__(7996);
;// CONCATENATED MODULE: ./adblock-betafish/utilities/background/user-agent-info.ts

let info;
function parseUserAgent() {
    let flavor = user_agent_info_types/* FlavorType */.z.chrome;
    let match = navigator.userAgent.match(/(CrOS \w+|Windows NT|Mac OS X|Linux) ([\d._]+)?/);
    const os = (match || [])[1] || "Unknown";
    const osVersion = (match || [])[2] || "Unknown";
    match = navigator.userAgent.match(/(?:Chrome|Version)\/([\d.]+)/);
    const edgeMatch = navigator.userAgent.match(/(?:Edg|Version)\/([\d.]+)/);
    const firefoxMatch = navigator.userAgent.match(/(?:Firefox)\/([\d.]+)/);
    if (edgeMatch) {
        match = edgeMatch;
        flavor = user_agent_info_types/* FlavorType */.z.edge;
    }
    else if (firefoxMatch) {
        match = firefoxMatch;
        flavor = user_agent_info_types/* FlavorType */.z.firefox;
    }
    const browserVersion = (match || [])[1] || "Unknown";
    return {
        flavor,
        os,
        osVersion,
        browserVersion,
    };
}
function getUserAgentInfo() {
    if (!info) {
        info = parseUserAgent();
    }
    return info;
}

;// CONCATENATED MODULE: ./adblock-betafish/utilities/background/index.ts







/***/ }),

/***/ 1328:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   A1: () => (/* binding */ reportAndLogError),
/* harmony export */   R8: () => (/* binding */ warn),
/* harmony export */   Yz: () => (/* binding */ debug),
/* harmony export */   pq: () => (/* binding */ info),
/* harmony export */   z3: () => (/* binding */ error)
/* harmony export */ });
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _alias_prefs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2680);
/* harmony import */ var _logger_types__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(995);



function log(level, fn, ...data) {
    const minLevel = _alias_prefs__WEBPACK_IMPORTED_MODULE_1__/* .Prefs */ .N.get("logger_log_level");
    if (level < minLevel) {
        return;
    }
    fn(...data);
}
const debug = log.bind(null, _logger_types__WEBPACK_IMPORTED_MODULE_2__/* .LogLevel */ .$.debug, console.debug);
const error = log.bind(null, _logger_types__WEBPACK_IMPORTED_MODULE_2__/* .LogLevel */ .$.error, console.error);
const info = log.bind(null, _logger_types__WEBPACK_IMPORTED_MODULE_2__/* .LogLevel */ .$.info, console.info);
const warn = log.bind(null, _logger_types__WEBPACK_IMPORTED_MODULE_2__/* .LogLevel */ .$.warn, console.warn);
function reportAndLogError(e, logContext) {
    if (e instanceof Error) {
        _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_0__.sentry.reportError(e);
    }
    if (logContext) {
        error(logContext, e);
    }
    else {
        error(e);
    }
}


/***/ }),

/***/ 995:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $: () => (/* binding */ LogLevel)
/* harmony export */ });
var LogLevel;
(function (LogLevel) {
    LogLevel[LogLevel["debug"] = 1] = "debug";
    LogLevel[LogLevel["info"] = 2] = "info";
    LogLevel[LogLevel["warn"] = 3] = "warn";
    LogLevel[LogLevel["error"] = 4] = "error";
})(LogLevel || (LogLevel = {}));


/***/ }),

/***/ 7240:
/***/ ((__unused_webpack_module, __unused_webpack___webpack_exports__, __webpack_require__) => {

"use strict";

// EXTERNAL MODULE: ./build/templates/info.chrome.js.tmpl
var info_chrome_js = __webpack_require__(9336);
// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/dist/ewe-api.js
var ewe_api = __webpack_require__(5407);
// EXTERNAL MODULE: ./adblock-betafish/alias/prefs.js
var prefs = __webpack_require__(2680);
// EXTERNAL MODULE: ./adblock-betafish/prefs/background/index.js + 1 modules
var background = __webpack_require__(2644);
// EXTERNAL MODULE: ./adblock-betafish/servermessages.js
var servermessages = __webpack_require__(5754);
// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/adblockpluscore/lib/url.js
var url = __webpack_require__(8990);
;// CONCATENATED MODULE: ./src/pageview-metrics/background/shared.ts



async function getMatchingDomain(domain) {
    if (!domain) {
        return null;
    }
    const domains = await ewe_api.experiments.getFlag("pageview-metrics:domains");
    if (!isStringArray(domains) || !domains.length) {
        return null;
    }
    const baseDomain = (0,url/* getBaseDomain */.Ai)(domain);
    if (!domains.includes(baseDomain)) {
        return null;
    }
    return baseDomain;
}
async function hasUbo() {
    await prefs/* Prefs */.N.untilLoaded;
    return Date.now() - prefs/* Prefs */.N.get("uboDetected") < 7 * 24 * 60 * 60 * 1000;
}
async function uboDetectionWasActive() {
    await prefs/* Prefs */.N.untilLoaded;
    return Date.now() - prefs/* Prefs */.N.get("uboDetectionLastRun") < 7 * 24 * 60 * 60 * 1000;
}
function isStringArray(candidate) {
    return Array.isArray(candidate) && (!candidate.length || typeof candidate[0] === "string");
}

;// CONCATENATED MODULE: ./src/pageview-metrics/background/btaa-detection-event.ts



async function handleBTAADetectionEvent(details) {
    const domain = await getMatchingDomain(details.siteId);
    if (!domain) {
        return;
    }
    let packedDetails = 0;
    packedDetails |= (await hasUbo()) ? 1 : 0;
    packedDetails <<= 1;
    packedDetails |= details.isAAPV ? 1 : 0;
    packedDetails <<= 1;
    packedDetails |= details.ab ? 1 : 0;
    packedDetails <<= 1;
    packedDetails |= details.acceptable ? 1 : 0;
    servermessages/* default */.A.recordAnonymousMessage("btaa_detection", "stats", null, {
        misc_text: domain,
        sid: details.sessionId,
        var: packedDetails,
    });
}
function start() {
    ewe_api.cdp.onBTAADetectionEvent.addListener(handleBTAADetectionEvent);
}

// EXTERNAL MODULE: ./adblock-betafish/telemetry/background/index.js + 4 modules
var telemetry_background = __webpack_require__(3322);
;// CONCATENATED MODULE: ./src/pageview-metrics/background/pageview-event.ts




async function handlePageLoaded(page) {
    if (typeof page.id === "undefined" || page.id === browser.tabs.TAB_ID_NONE) {
        return;
    }
    const domain = await getMatchingDomain(page.url.hostname);
    if (!domain) {
        return;
    }
    let pageState = 0;
    pageState |= (await hasUbo()) ? 1 : 0;
    pageState <<= 1;
    pageState |= (await uboDetectionWasActive()) ? 1 : 0;
    pageState <<= 1;
    pageState |= (await isTabAllowlisted(page.id)) ? 1 : 0;
    pageState <<= 1;
    pageState |= (await isTabPrivate(page.id)) ? 1 : 0;
    pageState <<= 1;
    pageState |= (await isAcceptableAdsEnabled()) ? 1 : 0;
    servermessages/* default */.A.recordAnonymousMessage("pageview", "stats", null, {
        misc_text: domain,
        var: pageState,
    });
}
async function isAcceptableAdsEnabled() {
    const status = await (0,telemetry_background/* getAAStatus */.xN)();
    return status === "1" || status === "2";
}
async function isTabAllowlisted(tabId) {
    const allowingFilters = await ewe_api.filters.getAllowingFilters(tabId);
    return allowingFilters.length > 0;
}
async function isTabPrivate(tabId) {
    const tab = await browser.tabs.get(tabId);
    return tab.incognito;
}
function pageview_event_start() {
    ext.pages.onLoaded.addListener(handlePageLoaded);
}

;// CONCATENATED MODULE: ./src/pageview-metrics/background/request-events.ts



const requestFilter = {
    urls: [],
};
function getOriginDomain(details) {
    var _a, _b;
    const url = (_b = (_a = details.initiator) !== null && _a !== void 0 ? _a : details.documentUrl) !== null && _b !== void 0 ? _b : details.originUrl;
    if (!url) {
        return null;
    }
    return new URL(url).hostname;
}
async function recordRequestCreated(originDomain) {
    const domain = await getMatchingDomain(originDomain);
    if (!domain) {
        return;
    }
    servermessages/* default */.A.recordAnonymousMessage("request_created", "stats", null, {
        misc_text: domain,
    });
}
async function recordRequestCompleted(originDomain) {
    const domain = await getMatchingDomain(originDomain);
    if (!domain) {
        return;
    }
    servermessages/* default */.A.recordAnonymousMessage("request_completed", "stats", null, {
        misc_text: domain,
    });
}
async function recordRequestFailed(originDomain, error) {
    const domain = await getMatchingDomain(originDomain);
    if (!domain) {
        return;
    }
    servermessages/* default */.A.recordAnonymousMessage("request_failed", "stats", null, {
        error_msg: error,
        misc_text: domain,
    });
}
async function request_events_start() {
    await prefs/* Prefs */.N.untilLoaded;
    requestFilter.urls = prefs/* Prefs */.N.get("pageviewMetrics_requestUrls");
    browser.webRequest.onBeforeRequest.addListener((details) => {
        const originDomain = getOriginDomain(details);
        void recordRequestCreated(originDomain);
        return {};
    }, requestFilter);
    browser.webRequest.onCompleted.addListener((details) => {
        const originDomain = getOriginDomain(details);
        if (details.statusCode >= 400 && details.statusCode <= 599) {
            void recordRequestFailed(originDomain, `HTTP ${details.statusCode}`);
            return;
        }
        void recordRequestCompleted(originDomain);
    }, requestFilter);
    browser.webRequest.onErrorOccurred.addListener((details) => {
        const originDomain = getOriginDomain(details);
        void recordRequestFailed(originDomain, details.error);
    }, requestFilter);
}

;// CONCATENATED MODULE: ./src/pageview-metrics/background/metrics.ts



async function metrics_start() {
    start();
    pageview_event_start();
    await request_events_start();
}

;// CONCATENATED MODULE: ./src/pageview-metrics/background/index.ts



;// CONCATENATED MODULE: ./src/bootstrap/background/bootstrap.entry.ts





async function bootstrap() {
    if (prefs/* Prefs */.N.get("data_collection_opt_out")) {
        console.warn("Sentry is not initialized");
    }
    else {
        void ewe_api.sentry.start("https://6758518d020dfd043e00c6f7dc4a2f8c@o526868.ingest.us.sentry.io/4507299627991040", "production", info_chrome_js.addonVersion);
    }
    (0,background/* start */.ni)();
    await metrics_start();
}
void bootstrap();


/***/ }),

/***/ 3638:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   L: () => (/* binding */ isDomainList),
/* harmony export */   g: () => (/* binding */ isActiveOnDomain)
/* harmony export */ });
function parseDomains(source, separator) {
    let domains;
    if (source[0] !== "~" && !source.includes(separator)) {
        domains = new Map([
            ["", false],
            [source, true],
        ]);
    }
    else {
        domains = null;
        let hasIncludes = false;
        for (let domain of source.split(separator)) {
            if (domain === "") {
                continue;
            }
            let include;
            if (domain[0] === "~") {
                include = false;
                domain = domain.substring(1);
            }
            else {
                include = true;
                hasIncludes = true;
            }
            if (!domains) {
                domains = new Map();
            }
            domains.set(domain, include);
        }
        if (domains) {
            domains.set("", !hasIncludes);
        }
    }
    return domains;
}
function isIPAddress(hostname) {
    if (hostname[0] === "[" && hostname[hostname.length - 1] === "]") {
        return true;
    }
    return Number(hostname[hostname.length - 1]) >= 0 && /^\d+\.\d+\.\d+\.\d+$/.test(hostname);
}
function isValidIPv4Address(address) {
    return /^(((2[0-4]|1[0-9]|[1-9])?[0-9]|25[0-5])\.){4}$/.test(address + ".");
}
function isValidHostname(hostname) {
    if (isValidIPv4Address(hostname)) {
        return true;
    }
    if (hostname[0] === "[" && hostname[hostname.length - 1] === "]") {
        return true;
    }
    if (hostname[hostname.length - 1] === ".") {
        hostname = hostname.substring(0, hostname.length - 1);
    }
    if (hostname.length > 253)
        return false;
    const labels = hostname.split(".");
    for (const label of labels) {
        if (!/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(label))
            return false;
    }
    if (!/\D/.test(labels[labels.length - 1]))
        return false;
    return true;
}
function* domainSuffixes(domain, includeBlank = false) {
    if (isIPAddress(domain)) {
        yield domain;
    }
    else {
        if (domain[domain.length - 1] === ".") {
            domain = domain.substring(0, domain.length - 1);
        }
        while (domain !== "") {
            yield domain;
            const dotIndex = domain.indexOf(".");
            domain = dotIndex === -1 ? "" : domain.substr(dotIndex + 1);
        }
    }
    if (includeBlank) {
        yield "";
    }
}
function isActiveOnDomain(url, domainList) {
    if (!domainList) {
        return true;
    }
    const domains = parseDomains(domainList, ",");
    if (!domains) {
        return true;
    }
    const tabURL = new URL(url);
    let tabDomain = tabURL.hostname;
    if (tabDomain === null) {
        tabDomain = "";
    }
    else if (tabDomain[tabDomain.length - 1] === ".") {
        tabDomain = tabDomain.substring(0, tabDomain.length - 1);
    }
    if (!tabDomain) {
        return !!domains.get("");
    }
    for (tabDomain of domainSuffixes(tabDomain)) {
        const isDomainIncluded = domains.get(tabDomain);
        if (typeof isDomainIncluded !== "undefined") {
            return isDomainIncluded;
        }
    }
    return !!domains.get("");
}
function isDomainList(list) {
    const domains = parseDomains(list, ",");
    if (domains === null) {
        return true;
    }
    return Array.from(domains.keys()).every((domain) => !domain || isValidHostname(domain));
}


/***/ }),

/***/ 7968:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   X: () => (/* binding */ FilterOrigin)
/* harmony export */ });
var FilterOrigin;
(function (FilterOrigin) {
    FilterOrigin["popup"] = "popup";
    FilterOrigin["web"] = "web";
    FilterOrigin["devtools"] = "devtools";
    FilterOrigin["wizard"] = "wizard";
    FilterOrigin["youtube"] = "youtube";
    FilterOrigin["customize"] = "customize";
    FilterOrigin["context"] = "context";
})(FilterOrigin || (FilterOrigin = {}));


/***/ }),

/***/ 7057:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FilterOrigin: () => (/* reexport safe */ _filter_types__WEBPACK_IMPORTED_MODULE_0__.X)
/* harmony export */ });
/* harmony import */ var _filter_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7968);



/***/ }),

/***/ 4255:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Gz: () => (/* binding */ removeAllAllowlistRulesForTab),
/* harmony export */   Zl: () => (/* binding */ adblockIsPaused),
/* harmony export */   fd: () => (/* binding */ pausedFilterText1),
/* harmony export */   m: () => (/* binding */ pausedFilterText2),
/* harmony export */   tk: () => (/* binding */ isTabTemporaryAllowlisted),
/* harmony export */   vB: () => (/* binding */ allowlistTab)
/* harmony export */ });
/* harmony import */ var webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2558);
/* harmony import */ var webextension_polyfill__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(5407);
/* harmony import */ var _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _filters_shared__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(7057);
/* harmony import */ var _utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(7656);
/* harmony import */ var _alias_prefs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(2680);
/* harmony import */ var _alias_subscriptionInit__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(7802);
/* harmony import */ var _servermessages__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(5754);







const pausedKey = "paused";
const pausedFilterText1 = "@@*";
const pausedFilterText2 = "@@*$document";
const createDomainAllowlistRule = function (domain) {
    return `@@||${domain}^$document`;
};
const adblockIsPaused = function (newValue) {
    if (newValue === undefined) {
        return (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_3__/* .sessionStorageGet */ .mI)(pausedKey) === true;
    }
    if (newValue) {
        (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_3__/* .chromeStorageSetHelper */ .AX)(pausedKey, true, async () => {
            await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.filters.add([pausedFilterText1, pausedFilterText2]);
        });
    }
    else {
        void _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.filters.remove([pausedFilterText1, pausedFilterText2]);
        void webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.storage.local.remove(pausedKey);
    }
    (0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_3__/* .sessionStorageSet */ .i_)(pausedKey, newValue);
    return undefined;
};
const allowlistTab = async (tabURL, origin = _filters_shared__WEBPACK_IMPORTED_MODULE_2__.FilterOrigin.popup) => {
    const autoExtendMs = _alias_prefs__WEBPACK_IMPORTED_MODULE_4__/* .Prefs */ .N.get("allowlisting_auto_extend_ms");
    const metadata = {
        ...(0,_utilities_background_bg_functions__WEBPACK_IMPORTED_MODULE_3__/* .createFilterMetaData */ .yf)(origin),
        expiresAt: Date.now() + autoExtendMs,
        autoExtendMs,
    };
    const url = new URL(tabURL);
    const host = url.hostname.replace(/^www\./, "");
    await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.filters.add(createDomainAllowlistRule(host), metadata);
};
const removeAllAllowlistRulesForTab = async (tabId) => {
    const filters = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.filters.getAllowingFilters(tabId);
    await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.filters.remove(filters);
    return filters.length > 0;
};
const isTabTemporaryAllowlisted = async (tabId) => {
    const filters = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.filters.getAllowingFilters(tabId);
    let metaDataMatch = false;
    for (let i = 0; i < filters.length && !metaDataMatch; i++) {
        const metadata = await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.filters.getMetadata(filters[i]);
        metaDataMatch = (metadata === null || metadata === void 0 ? void 0 : metadata.expiresByTabId) === tabId;
    }
    return metaDataMatch;
};
async function start() {
    const response = await webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.storage.local.get(pausedKey);
    if (response[pausedKey]) {
        await _alias_subscriptionInit__WEBPACK_IMPORTED_MODULE_5__/* .initialize */ .n.then();
        await _eyeo_webext_ad_filtering_solution__WEBPACK_IMPORTED_MODULE_1__.filters.remove([pausedFilterText1, pausedFilterText2]);
        await webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.storage.local.remove(pausedKey);
    }
    const domainPausedKey = "domainPaused";
    void webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.storage.local.remove(domainPausedKey);
}
function handleExtensionStartup() {
    void start();
}
webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.runtime.onStartup.addListener(handleExtensionStartup);
webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.commands.onCommand.addListener((command) => {
    if (command === "toggle_pause") {
        adblockIsPaused(!adblockIsPaused());
        _servermessages__WEBPACK_IMPORTED_MODULE_6__/* ["default"] */ .A.recordGeneralMessage("pause_shortcut_used");
    }
});



/***/ }),

/***/ 5407:
/***/ ((module) => {

(function webpackUniversalModuleDefinition(root, factory) {
	if(true)
		module.exports = factory();
	else {}
})(self, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ 7234:
/***/ ((__unused_webpack_module, exports) => {

exports.icannPublicSuffixes = {
  "ac": 1,
  "com.ac": 1,
  "edu.ac": 1,
  "gov.ac": 1,
  "net.ac": 1,
  "mil.ac": 1,
  "org.ac": 1,
  "ad": 1,
  "nom.ad": 1,
  "ae": 1,
  "co.ae": 1,
  "net.ae": 1,
  "org.ae": 1,
  "sch.ae": 1,
  "ac.ae": 1,
  "gov.ae": 1,
  "mil.ae": 1,
  "aero": 1,
  "accident-investigation.aero": 1,
  "accident-prevention.aero": 1,
  "aerobatic.aero": 1,
  "aeroclub.aero": 1,
  "aerodrome.aero": 1,
  "agents.aero": 1,
  "aircraft.aero": 1,
  "airline.aero": 1,
  "airport.aero": 1,
  "air-surveillance.aero": 1,
  "airtraffic.aero": 1,
  "air-traffic-control.aero": 1,
  "ambulance.aero": 1,
  "amusement.aero": 1,
  "association.aero": 1,
  "author.aero": 1,
  "ballooning.aero": 1,
  "broker.aero": 1,
  "caa.aero": 1,
  "cargo.aero": 1,
  "catering.aero": 1,
  "certification.aero": 1,
  "championship.aero": 1,
  "charter.aero": 1,
  "civilaviation.aero": 1,
  "club.aero": 1,
  "conference.aero": 1,
  "consultant.aero": 1,
  "consulting.aero": 1,
  "control.aero": 1,
  "council.aero": 1,
  "crew.aero": 1,
  "design.aero": 1,
  "dgca.aero": 1,
  "educator.aero": 1,
  "emergency.aero": 1,
  "engine.aero": 1,
  "engineer.aero": 1,
  "entertainment.aero": 1,
  "equipment.aero": 1,
  "exchange.aero": 1,
  "express.aero": 1,
  "federation.aero": 1,
  "flight.aero": 1,
  "fuel.aero": 1,
  "gliding.aero": 1,
  "government.aero": 1,
  "groundhandling.aero": 1,
  "group.aero": 1,
  "hanggliding.aero": 1,
  "homebuilt.aero": 1,
  "insurance.aero": 1,
  "journal.aero": 1,
  "journalist.aero": 1,
  "leasing.aero": 1,
  "logistics.aero": 1,
  "magazine.aero": 1,
  "maintenance.aero": 1,
  "media.aero": 1,
  "microlight.aero": 1,
  "modelling.aero": 1,
  "navigation.aero": 1,
  "parachuting.aero": 1,
  "paragliding.aero": 1,
  "passenger-association.aero": 1,
  "pilot.aero": 1,
  "press.aero": 1,
  "production.aero": 1,
  "recreation.aero": 1,
  "repbody.aero": 1,
  "res.aero": 1,
  "research.aero": 1,
  "rotorcraft.aero": 1,
  "safety.aero": 1,
  "scientist.aero": 1,
  "services.aero": 1,
  "show.aero": 1,
  "skydiving.aero": 1,
  "software.aero": 1,
  "student.aero": 1,
  "trader.aero": 1,
  "trading.aero": 1,
  "trainer.aero": 1,
  "union.aero": 1,
  "workinggroup.aero": 1,
  "works.aero": 1,
  "af": 1,
  "gov.af": 1,
  "com.af": 1,
  "org.af": 1,
  "net.af": 1,
  "edu.af": 1,
  "ag": 1,
  "com.ag": 1,
  "org.ag": 1,
  "net.ag": 1,
  "co.ag": 1,
  "nom.ag": 1,
  "ai": 1,
  "off.ai": 1,
  "com.ai": 1,
  "net.ai": 1,
  "org.ai": 1,
  "al": 1,
  "com.al": 1,
  "edu.al": 1,
  "gov.al": 1,
  "mil.al": 1,
  "net.al": 1,
  "org.al": 1,
  "am": 1,
  "co.am": 1,
  "com.am": 1,
  "commune.am": 1,
  "net.am": 1,
  "org.am": 1,
  "ao": 1,
  "ed.ao": 1,
  "gv.ao": 1,
  "og.ao": 1,
  "co.ao": 1,
  "pb.ao": 1,
  "it.ao": 1,
  "aq": 1,
  "ar": 1,
  "bet.ar": 1,
  "com.ar": 1,
  "coop.ar": 1,
  "edu.ar": 1,
  "gob.ar": 1,
  "gov.ar": 1,
  "int.ar": 1,
  "mil.ar": 1,
  "musica.ar": 1,
  "mutual.ar": 1,
  "net.ar": 1,
  "org.ar": 1,
  "senasa.ar": 1,
  "tur.ar": 1,
  "arpa": 1,
  "e164.arpa": 1,
  "in-addr.arpa": 1,
  "ip6.arpa": 1,
  "iris.arpa": 1,
  "uri.arpa": 1,
  "urn.arpa": 1,
  "as": 1,
  "gov.as": 1,
  "asia": 1,
  "at": 1,
  "ac.at": 1,
  "co.at": 1,
  "gv.at": 1,
  "or.at": 1,
  "sth.ac.at": 1,
  "au": 1,
  "com.au": 1,
  "net.au": 1,
  "org.au": 1,
  "edu.au": 1,
  "gov.au": 1,
  "asn.au": 1,
  "id.au": 1,
  "info.au": 1,
  "conf.au": 1,
  "oz.au": 1,
  "act.au": 1,
  "nsw.au": 1,
  "nt.au": 1,
  "qld.au": 1,
  "sa.au": 1,
  "tas.au": 1,
  "vic.au": 1,
  "wa.au": 1,
  "act.edu.au": 1,
  "catholic.edu.au": 1,
  "nsw.edu.au": 1,
  "nt.edu.au": 1,
  "qld.edu.au": 1,
  "sa.edu.au": 1,
  "tas.edu.au": 1,
  "vic.edu.au": 1,
  "wa.edu.au": 1,
  "qld.gov.au": 1,
  "sa.gov.au": 1,
  "tas.gov.au": 1,
  "vic.gov.au": 1,
  "wa.gov.au": 1,
  "schools.nsw.edu.au": 1,
  "aw": 1,
  "com.aw": 1,
  "ax": 1,
  "az": 1,
  "com.az": 1,
  "net.az": 1,
  "int.az": 1,
  "gov.az": 1,
  "org.az": 1,
  "edu.az": 1,
  "info.az": 1,
  "pp.az": 1,
  "mil.az": 1,
  "name.az": 1,
  "pro.az": 1,
  "biz.az": 1,
  "ba": 1,
  "com.ba": 1,
  "edu.ba": 1,
  "gov.ba": 1,
  "mil.ba": 1,
  "net.ba": 1,
  "org.ba": 1,
  "bb": 1,
  "biz.bb": 1,
  "co.bb": 1,
  "com.bb": 1,
  "edu.bb": 1,
  "gov.bb": 1,
  "info.bb": 1,
  "net.bb": 1,
  "org.bb": 1,
  "store.bb": 1,
  "tv.bb": 1,
  "bd": 2,
  "be": 1,
  "ac.be": 1,
  "bf": 1,
  "gov.bf": 1,
  "bg": 1,
  "a.bg": 1,
  "b.bg": 1,
  "c.bg": 1,
  "d.bg": 1,
  "e.bg": 1,
  "f.bg": 1,
  "g.bg": 1,
  "h.bg": 1,
  "i.bg": 1,
  "j.bg": 1,
  "k.bg": 1,
  "l.bg": 1,
  "m.bg": 1,
  "n.bg": 1,
  "o.bg": 1,
  "p.bg": 1,
  "q.bg": 1,
  "r.bg": 1,
  "s.bg": 1,
  "t.bg": 1,
  "u.bg": 1,
  "v.bg": 1,
  "w.bg": 1,
  "x.bg": 1,
  "y.bg": 1,
  "z.bg": 1,
  "0.bg": 1,
  "1.bg": 1,
  "2.bg": 1,
  "3.bg": 1,
  "4.bg": 1,
  "5.bg": 1,
  "6.bg": 1,
  "7.bg": 1,
  "8.bg": 1,
  "9.bg": 1,
  "bh": 1,
  "com.bh": 1,
  "edu.bh": 1,
  "net.bh": 1,
  "org.bh": 1,
  "gov.bh": 1,
  "bi": 1,
  "co.bi": 1,
  "com.bi": 1,
  "edu.bi": 1,
  "or.bi": 1,
  "org.bi": 1,
  "biz": 1,
  "bj": 1,
  "africa.bj": 1,
  "agro.bj": 1,
  "architectes.bj": 1,
  "assur.bj": 1,
  "avocats.bj": 1,
  "co.bj": 1,
  "com.bj": 1,
  "eco.bj": 1,
  "econo.bj": 1,
  "edu.bj": 1,
  "info.bj": 1,
  "loisirs.bj": 1,
  "money.bj": 1,
  "net.bj": 1,
  "org.bj": 1,
  "ote.bj": 1,
  "resto.bj": 1,
  "restaurant.bj": 1,
  "tourism.bj": 1,
  "univ.bj": 1,
  "bm": 1,
  "com.bm": 1,
  "edu.bm": 1,
  "gov.bm": 1,
  "net.bm": 1,
  "org.bm": 1,
  "bn": 1,
  "com.bn": 1,
  "edu.bn": 1,
  "gov.bn": 1,
  "net.bn": 1,
  "org.bn": 1,
  "bo": 1,
  "com.bo": 1,
  "edu.bo": 1,
  "gob.bo": 1,
  "int.bo": 1,
  "org.bo": 1,
  "net.bo": 1,
  "mil.bo": 1,
  "tv.bo": 1,
  "web.bo": 1,
  "academia.bo": 1,
  "agro.bo": 1,
  "arte.bo": 1,
  "blog.bo": 1,
  "bolivia.bo": 1,
  "ciencia.bo": 1,
  "cooperativa.bo": 1,
  "democracia.bo": 1,
  "deporte.bo": 1,
  "ecologia.bo": 1,
  "economia.bo": 1,
  "empresa.bo": 1,
  "indigena.bo": 1,
  "industria.bo": 1,
  "info.bo": 1,
  "medicina.bo": 1,
  "movimiento.bo": 1,
  "musica.bo": 1,
  "natural.bo": 1,
  "nombre.bo": 1,
  "noticias.bo": 1,
  "patria.bo": 1,
  "politica.bo": 1,
  "profesional.bo": 1,
  "plurinacional.bo": 1,
  "pueblo.bo": 1,
  "revista.bo": 1,
  "salud.bo": 1,
  "tecnologia.bo": 1,
  "tksat.bo": 1,
  "transporte.bo": 1,
  "wiki.bo": 1,
  "br": 1,
  "9guacu.br": 1,
  "abc.br": 1,
  "adm.br": 1,
  "adv.br": 1,
  "agr.br": 1,
  "aju.br": 1,
  "am.br": 1,
  "anani.br": 1,
  "aparecida.br": 1,
  "app.br": 1,
  "arq.br": 1,
  "art.br": 1,
  "ato.br": 1,
  "b.br": 1,
  "barueri.br": 1,
  "belem.br": 1,
  "bhz.br": 1,
  "bib.br": 1,
  "bio.br": 1,
  "blog.br": 1,
  "bmd.br": 1,
  "boavista.br": 1,
  "bsb.br": 1,
  "campinagrande.br": 1,
  "campinas.br": 1,
  "caxias.br": 1,
  "cim.br": 1,
  "cng.br": 1,
  "cnt.br": 1,
  "com.br": 1,
  "contagem.br": 1,
  "coop.br": 1,
  "coz.br": 1,
  "cri.br": 1,
  "cuiaba.br": 1,
  "curitiba.br": 1,
  "def.br": 1,
  "des.br": 1,
  "det.br": 1,
  "dev.br": 1,
  "ecn.br": 1,
  "eco.br": 1,
  "edu.br": 1,
  "emp.br": 1,
  "enf.br": 1,
  "eng.br": 1,
  "esp.br": 1,
  "etc.br": 1,
  "eti.br": 1,
  "far.br": 1,
  "feira.br": 1,
  "flog.br": 1,
  "floripa.br": 1,
  "fm.br": 1,
  "fnd.br": 1,
  "fortal.br": 1,
  "fot.br": 1,
  "foz.br": 1,
  "fst.br": 1,
  "g12.br": 1,
  "geo.br": 1,
  "ggf.br": 1,
  "goiania.br": 1,
  "gov.br": 1,
  "ac.gov.br": 1,
  "al.gov.br": 1,
  "am.gov.br": 1,
  "ap.gov.br": 1,
  "ba.gov.br": 1,
  "ce.gov.br": 1,
  "df.gov.br": 1,
  "es.gov.br": 1,
  "go.gov.br": 1,
  "ma.gov.br": 1,
  "mg.gov.br": 1,
  "ms.gov.br": 1,
  "mt.gov.br": 1,
  "pa.gov.br": 1,
  "pb.gov.br": 1,
  "pe.gov.br": 1,
  "pi.gov.br": 1,
  "pr.gov.br": 1,
  "rj.gov.br": 1,
  "rn.gov.br": 1,
  "ro.gov.br": 1,
  "rr.gov.br": 1,
  "rs.gov.br": 1,
  "sc.gov.br": 1,
  "se.gov.br": 1,
  "sp.gov.br": 1,
  "to.gov.br": 1,
  "gru.br": 1,
  "imb.br": 1,
  "ind.br": 1,
  "inf.br": 1,
  "jab.br": 1,
  "jampa.br": 1,
  "jdf.br": 1,
  "joinville.br": 1,
  "jor.br": 1,
  "jus.br": 1,
  "leg.br": 1,
  "lel.br": 1,
  "log.br": 1,
  "londrina.br": 1,
  "macapa.br": 1,
  "maceio.br": 1,
  "manaus.br": 1,
  "maringa.br": 1,
  "mat.br": 1,
  "med.br": 1,
  "mil.br": 1,
  "morena.br": 1,
  "mp.br": 1,
  "mus.br": 1,
  "natal.br": 1,
  "net.br": 1,
  "niteroi.br": 1,
  "nom.br": 2,
  "not.br": 1,
  "ntr.br": 1,
  "odo.br": 1,
  "ong.br": 1,
  "org.br": 1,
  "osasco.br": 1,
  "palmas.br": 1,
  "poa.br": 1,
  "ppg.br": 1,
  "pro.br": 1,
  "psc.br": 1,
  "psi.br": 1,
  "pvh.br": 1,
  "qsl.br": 1,
  "radio.br": 1,
  "rec.br": 1,
  "recife.br": 1,
  "rep.br": 1,
  "ribeirao.br": 1,
  "rio.br": 1,
  "riobranco.br": 1,
  "riopreto.br": 1,
  "salvador.br": 1,
  "sampa.br": 1,
  "santamaria.br": 1,
  "santoandre.br": 1,
  "saobernardo.br": 1,
  "saogonca.br": 1,
  "seg.br": 1,
  "sjc.br": 1,
  "slg.br": 1,
  "slz.br": 1,
  "sorocaba.br": 1,
  "srv.br": 1,
  "taxi.br": 1,
  "tc.br": 1,
  "tec.br": 1,
  "teo.br": 1,
  "the.br": 1,
  "tmp.br": 1,
  "trd.br": 1,
  "tur.br": 1,
  "tv.br": 1,
  "udi.br": 1,
  "vet.br": 1,
  "vix.br": 1,
  "vlog.br": 1,
  "wiki.br": 1,
  "zlg.br": 1,
  "bs": 1,
  "com.bs": 1,
  "net.bs": 1,
  "org.bs": 1,
  "edu.bs": 1,
  "gov.bs": 1,
  "bt": 1,
  "com.bt": 1,
  "edu.bt": 1,
  "gov.bt": 1,
  "net.bt": 1,
  "org.bt": 1,
  "bv": 1,
  "bw": 1,
  "co.bw": 1,
  "org.bw": 1,
  "by": 1,
  "gov.by": 1,
  "mil.by": 1,
  "com.by": 1,
  "of.by": 1,
  "bz": 1,
  "com.bz": 1,
  "net.bz": 1,
  "org.bz": 1,
  "edu.bz": 1,
  "gov.bz": 1,
  "ca": 1,
  "ab.ca": 1,
  "bc.ca": 1,
  "mb.ca": 1,
  "nb.ca": 1,
  "nf.ca": 1,
  "nl.ca": 1,
  "ns.ca": 1,
  "nt.ca": 1,
  "nu.ca": 1,
  "on.ca": 1,
  "pe.ca": 1,
  "qc.ca": 1,
  "sk.ca": 1,
  "yk.ca": 1,
  "gc.ca": 1,
  "cat": 1,
  "cc": 1,
  "cd": 1,
  "gov.cd": 1,
  "cf": 1,
  "cg": 1,
  "ch": 1,
  "ci": 1,
  "org.ci": 1,
  "or.ci": 1,
  "com.ci": 1,
  "co.ci": 1,
  "edu.ci": 1,
  "ed.ci": 1,
  "ac.ci": 1,
  "net.ci": 1,
  "go.ci": 1,
  "asso.ci": 1,
  "xn--aroport-bya.ci": 1,
  "int.ci": 1,
  "presse.ci": 1,
  "md.ci": 1,
  "gouv.ci": 1,
  "ck": 2,
  "www.ck": 0,
  "cl": 1,
  "co.cl": 1,
  "gob.cl": 1,
  "gov.cl": 1,
  "mil.cl": 1,
  "cm": 1,
  "co.cm": 1,
  "com.cm": 1,
  "gov.cm": 1,
  "net.cm": 1,
  "cn": 1,
  "ac.cn": 1,
  "com.cn": 1,
  "edu.cn": 1,
  "gov.cn": 1,
  "net.cn": 1,
  "org.cn": 1,
  "mil.cn": 1,
  "xn--55qx5d.cn": 1,
  "xn--io0a7i.cn": 1,
  "xn--od0alg.cn": 1,
  "ah.cn": 1,
  "bj.cn": 1,
  "cq.cn": 1,
  "fj.cn": 1,
  "gd.cn": 1,
  "gs.cn": 1,
  "gz.cn": 1,
  "gx.cn": 1,
  "ha.cn": 1,
  "hb.cn": 1,
  "he.cn": 1,
  "hi.cn": 1,
  "hl.cn": 1,
  "hn.cn": 1,
  "jl.cn": 1,
  "js.cn": 1,
  "jx.cn": 1,
  "ln.cn": 1,
  "nm.cn": 1,
  "nx.cn": 1,
  "qh.cn": 1,
  "sc.cn": 1,
  "sd.cn": 1,
  "sh.cn": 1,
  "sn.cn": 1,
  "sx.cn": 1,
  "tj.cn": 1,
  "xj.cn": 1,
  "xz.cn": 1,
  "yn.cn": 1,
  "zj.cn": 1,
  "hk.cn": 1,
  "mo.cn": 1,
  "tw.cn": 1,
  "co": 1,
  "arts.co": 1,
  "com.co": 1,
  "edu.co": 1,
  "firm.co": 1,
  "gov.co": 1,
  "info.co": 1,
  "int.co": 1,
  "mil.co": 1,
  "net.co": 1,
  "nom.co": 1,
  "org.co": 1,
  "rec.co": 1,
  "web.co": 1,
  "com": 1,
  "coop": 1,
  "cr": 1,
  "ac.cr": 1,
  "co.cr": 1,
  "ed.cr": 1,
  "fi.cr": 1,
  "go.cr": 1,
  "or.cr": 1,
  "sa.cr": 1,
  "cu": 1,
  "com.cu": 1,
  "edu.cu": 1,
  "org.cu": 1,
  "net.cu": 1,
  "gov.cu": 1,
  "inf.cu": 1,
  "cv": 1,
  "com.cv": 1,
  "edu.cv": 1,
  "int.cv": 1,
  "nome.cv": 1,
  "org.cv": 1,
  "cw": 1,
  "com.cw": 1,
  "edu.cw": 1,
  "net.cw": 1,
  "org.cw": 1,
  "cx": 1,
  "gov.cx": 1,
  "cy": 1,
  "ac.cy": 1,
  "biz.cy": 1,
  "com.cy": 1,
  "ekloges.cy": 1,
  "gov.cy": 1,
  "ltd.cy": 1,
  "mil.cy": 1,
  "net.cy": 1,
  "org.cy": 1,
  "press.cy": 1,
  "pro.cy": 1,
  "tm.cy": 1,
  "cz": 1,
  "de": 1,
  "dj": 1,
  "dk": 1,
  "dm": 1,
  "com.dm": 1,
  "net.dm": 1,
  "org.dm": 1,
  "edu.dm": 1,
  "gov.dm": 1,
  "do": 1,
  "art.do": 1,
  "com.do": 1,
  "edu.do": 1,
  "gob.do": 1,
  "gov.do": 1,
  "mil.do": 1,
  "net.do": 1,
  "org.do": 1,
  "sld.do": 1,
  "web.do": 1,
  "dz": 1,
  "art.dz": 1,
  "asso.dz": 1,
  "com.dz": 1,
  "edu.dz": 1,
  "gov.dz": 1,
  "org.dz": 1,
  "net.dz": 1,
  "pol.dz": 1,
  "soc.dz": 1,
  "tm.dz": 1,
  "ec": 1,
  "com.ec": 1,
  "info.ec": 1,
  "net.ec": 1,
  "fin.ec": 1,
  "k12.ec": 1,
  "med.ec": 1,
  "pro.ec": 1,
  "org.ec": 1,
  "edu.ec": 1,
  "gov.ec": 1,
  "gob.ec": 1,
  "mil.ec": 1,
  "edu": 1,
  "ee": 1,
  "edu.ee": 1,
  "gov.ee": 1,
  "riik.ee": 1,
  "lib.ee": 1,
  "med.ee": 1,
  "com.ee": 1,
  "pri.ee": 1,
  "aip.ee": 1,
  "org.ee": 1,
  "fie.ee": 1,
  "eg": 1,
  "com.eg": 1,
  "edu.eg": 1,
  "eun.eg": 1,
  "gov.eg": 1,
  "mil.eg": 1,
  "name.eg": 1,
  "net.eg": 1,
  "org.eg": 1,
  "sci.eg": 1,
  "er": 2,
  "es": 1,
  "com.es": 1,
  "nom.es": 1,
  "org.es": 1,
  "gob.es": 1,
  "edu.es": 1,
  "et": 1,
  "com.et": 1,
  "gov.et": 1,
  "org.et": 1,
  "edu.et": 1,
  "biz.et": 1,
  "name.et": 1,
  "info.et": 1,
  "net.et": 1,
  "eu": 1,
  "fi": 1,
  "aland.fi": 1,
  "fj": 1,
  "ac.fj": 1,
  "biz.fj": 1,
  "com.fj": 1,
  "gov.fj": 1,
  "info.fj": 1,
  "mil.fj": 1,
  "name.fj": 1,
  "net.fj": 1,
  "org.fj": 1,
  "pro.fj": 1,
  "fk": 2,
  "com.fm": 1,
  "edu.fm": 1,
  "net.fm": 1,
  "org.fm": 1,
  "fm": 1,
  "fo": 1,
  "fr": 1,
  "asso.fr": 1,
  "com.fr": 1,
  "gouv.fr": 1,
  "nom.fr": 1,
  "prd.fr": 1,
  "tm.fr": 1,
  "avoues.fr": 1,
  "cci.fr": 1,
  "greta.fr": 1,
  "huissier-justice.fr": 1,
  "ga": 1,
  "gb": 1,
  "edu.gd": 1,
  "gov.gd": 1,
  "gd": 1,
  "ge": 1,
  "com.ge": 1,
  "edu.ge": 1,
  "gov.ge": 1,
  "org.ge": 1,
  "mil.ge": 1,
  "net.ge": 1,
  "pvt.ge": 1,
  "gf": 1,
  "gg": 1,
  "co.gg": 1,
  "net.gg": 1,
  "org.gg": 1,
  "gh": 1,
  "com.gh": 1,
  "edu.gh": 1,
  "gov.gh": 1,
  "org.gh": 1,
  "mil.gh": 1,
  "gi": 1,
  "com.gi": 1,
  "ltd.gi": 1,
  "gov.gi": 1,
  "mod.gi": 1,
  "edu.gi": 1,
  "org.gi": 1,
  "gl": 1,
  "co.gl": 1,
  "com.gl": 1,
  "edu.gl": 1,
  "net.gl": 1,
  "org.gl": 1,
  "gm": 1,
  "gn": 1,
  "ac.gn": 1,
  "com.gn": 1,
  "edu.gn": 1,
  "gov.gn": 1,
  "org.gn": 1,
  "net.gn": 1,
  "gov": 1,
  "gp": 1,
  "com.gp": 1,
  "net.gp": 1,
  "mobi.gp": 1,
  "edu.gp": 1,
  "org.gp": 1,
  "asso.gp": 1,
  "gq": 1,
  "gr": 1,
  "com.gr": 1,
  "edu.gr": 1,
  "net.gr": 1,
  "org.gr": 1,
  "gov.gr": 1,
  "gs": 1,
  "gt": 1,
  "com.gt": 1,
  "edu.gt": 1,
  "gob.gt": 1,
  "ind.gt": 1,
  "mil.gt": 1,
  "net.gt": 1,
  "org.gt": 1,
  "gu": 1,
  "com.gu": 1,
  "edu.gu": 1,
  "gov.gu": 1,
  "guam.gu": 1,
  "info.gu": 1,
  "net.gu": 1,
  "org.gu": 1,
  "web.gu": 1,
  "gw": 1,
  "gy": 1,
  "co.gy": 1,
  "com.gy": 1,
  "edu.gy": 1,
  "gov.gy": 1,
  "net.gy": 1,
  "org.gy": 1,
  "hk": 1,
  "com.hk": 1,
  "edu.hk": 1,
  "gov.hk": 1,
  "idv.hk": 1,
  "net.hk": 1,
  "org.hk": 1,
  "xn--55qx5d.hk": 1,
  "xn--wcvs22d.hk": 1,
  "xn--lcvr32d.hk": 1,
  "xn--mxtq1m.hk": 1,
  "xn--gmqw5a.hk": 1,
  "xn--ciqpn.hk": 1,
  "xn--gmq050i.hk": 1,
  "xn--zf0avx.hk": 1,
  "xn--io0a7i.hk": 1,
  "xn--mk0axi.hk": 1,
  "xn--od0alg.hk": 1,
  "xn--od0aq3b.hk": 1,
  "xn--tn0ag.hk": 1,
  "xn--uc0atv.hk": 1,
  "xn--uc0ay4a.hk": 1,
  "hm": 1,
  "hn": 1,
  "com.hn": 1,
  "edu.hn": 1,
  "org.hn": 1,
  "net.hn": 1,
  "mil.hn": 1,
  "gob.hn": 1,
  "hr": 1,
  "iz.hr": 1,
  "from.hr": 1,
  "name.hr": 1,
  "com.hr": 1,
  "ht": 1,
  "com.ht": 1,
  "shop.ht": 1,
  "firm.ht": 1,
  "info.ht": 1,
  "adult.ht": 1,
  "net.ht": 1,
  "pro.ht": 1,
  "org.ht": 1,
  "med.ht": 1,
  "art.ht": 1,
  "coop.ht": 1,
  "pol.ht": 1,
  "asso.ht": 1,
  "edu.ht": 1,
  "rel.ht": 1,
  "gouv.ht": 1,
  "perso.ht": 1,
  "hu": 1,
  "co.hu": 1,
  "info.hu": 1,
  "org.hu": 1,
  "priv.hu": 1,
  "sport.hu": 1,
  "tm.hu": 1,
  "2000.hu": 1,
  "agrar.hu": 1,
  "bolt.hu": 1,
  "casino.hu": 1,
  "city.hu": 1,
  "erotica.hu": 1,
  "erotika.hu": 1,
  "film.hu": 1,
  "forum.hu": 1,
  "games.hu": 1,
  "hotel.hu": 1,
  "ingatlan.hu": 1,
  "jogasz.hu": 1,
  "konyvelo.hu": 1,
  "lakas.hu": 1,
  "media.hu": 1,
  "news.hu": 1,
  "reklam.hu": 1,
  "sex.hu": 1,
  "shop.hu": 1,
  "suli.hu": 1,
  "szex.hu": 1,
  "tozsde.hu": 1,
  "utazas.hu": 1,
  "video.hu": 1,
  "id": 1,
  "ac.id": 1,
  "biz.id": 1,
  "co.id": 1,
  "desa.id": 1,
  "go.id": 1,
  "mil.id": 1,
  "my.id": 1,
  "net.id": 1,
  "or.id": 1,
  "ponpes.id": 1,
  "sch.id": 1,
  "web.id": 1,
  "ie": 1,
  "gov.ie": 1,
  "il": 1,
  "ac.il": 1,
  "co.il": 1,
  "gov.il": 1,
  "idf.il": 1,
  "k12.il": 1,
  "muni.il": 1,
  "net.il": 1,
  "org.il": 1,
  "xn--4dbrk0ce": 1,
  "xn--4dbgdty6c.xn--4dbrk0ce": 1,
  "xn--5dbhl8d.xn--4dbrk0ce": 1,
  "xn--8dbq2a.xn--4dbrk0ce": 1,
  "xn--hebda8b.xn--4dbrk0ce": 1,
  "im": 1,
  "ac.im": 1,
  "co.im": 1,
  "com.im": 1,
  "ltd.co.im": 1,
  "net.im": 1,
  "org.im": 1,
  "plc.co.im": 1,
  "tt.im": 1,
  "tv.im": 1,
  "in": 1,
  "5g.in": 1,
  "6g.in": 1,
  "ac.in": 1,
  "ai.in": 1,
  "am.in": 1,
  "bihar.in": 1,
  "biz.in": 1,
  "business.in": 1,
  "ca.in": 1,
  "cn.in": 1,
  "co.in": 1,
  "com.in": 1,
  "coop.in": 1,
  "cs.in": 1,
  "delhi.in": 1,
  "dr.in": 1,
  "edu.in": 1,
  "er.in": 1,
  "firm.in": 1,
  "gen.in": 1,
  "gov.in": 1,
  "gujarat.in": 1,
  "ind.in": 1,
  "info.in": 1,
  "int.in": 1,
  "internet.in": 1,
  "io.in": 1,
  "me.in": 1,
  "mil.in": 1,
  "net.in": 1,
  "nic.in": 1,
  "org.in": 1,
  "pg.in": 1,
  "post.in": 1,
  "pro.in": 1,
  "res.in": 1,
  "travel.in": 1,
  "tv.in": 1,
  "uk.in": 1,
  "up.in": 1,
  "us.in": 1,
  "info": 1,
  "int": 1,
  "eu.int": 1,
  "io": 1,
  "com.io": 1,
  "iq": 1,
  "gov.iq": 1,
  "edu.iq": 1,
  "mil.iq": 1,
  "com.iq": 1,
  "org.iq": 1,
  "net.iq": 1,
  "ir": 1,
  "ac.ir": 1,
  "co.ir": 1,
  "gov.ir": 1,
  "id.ir": 1,
  "net.ir": 1,
  "org.ir": 1,
  "sch.ir": 1,
  "xn--mgba3a4f16a.ir": 1,
  "xn--mgba3a4fra.ir": 1,
  "is": 1,
  "net.is": 1,
  "com.is": 1,
  "edu.is": 1,
  "gov.is": 1,
  "org.is": 1,
  "int.is": 1,
  "it": 1,
  "gov.it": 1,
  "edu.it": 1,
  "abr.it": 1,
  "abruzzo.it": 1,
  "aosta-valley.it": 1,
  "aostavalley.it": 1,
  "bas.it": 1,
  "basilicata.it": 1,
  "cal.it": 1,
  "calabria.it": 1,
  "cam.it": 1,
  "campania.it": 1,
  "emilia-romagna.it": 1,
  "emiliaromagna.it": 1,
  "emr.it": 1,
  "friuli-v-giulia.it": 1,
  "friuli-ve-giulia.it": 1,
  "friuli-vegiulia.it": 1,
  "friuli-venezia-giulia.it": 1,
  "friuli-veneziagiulia.it": 1,
  "friuli-vgiulia.it": 1,
  "friuliv-giulia.it": 1,
  "friulive-giulia.it": 1,
  "friulivegiulia.it": 1,
  "friulivenezia-giulia.it": 1,
  "friuliveneziagiulia.it": 1,
  "friulivgiulia.it": 1,
  "fvg.it": 1,
  "laz.it": 1,
  "lazio.it": 1,
  "lig.it": 1,
  "liguria.it": 1,
  "lom.it": 1,
  "lombardia.it": 1,
  "lombardy.it": 1,
  "lucania.it": 1,
  "mar.it": 1,
  "marche.it": 1,
  "mol.it": 1,
  "molise.it": 1,
  "piedmont.it": 1,
  "piemonte.it": 1,
  "pmn.it": 1,
  "pug.it": 1,
  "puglia.it": 1,
  "sar.it": 1,
  "sardegna.it": 1,
  "sardinia.it": 1,
  "sic.it": 1,
  "sicilia.it": 1,
  "sicily.it": 1,
  "taa.it": 1,
  "tos.it": 1,
  "toscana.it": 1,
  "trentin-sud-tirol.it": 1,
  "xn--trentin-sd-tirol-rzb.it": 1,
  "trentin-sudtirol.it": 1,
  "xn--trentin-sdtirol-7vb.it": 1,
  "trentin-sued-tirol.it": 1,
  "trentin-suedtirol.it": 1,
  "trentino-a-adige.it": 1,
  "trentino-aadige.it": 1,
  "trentino-alto-adige.it": 1,
  "trentino-altoadige.it": 1,
  "trentino-s-tirol.it": 1,
  "trentino-stirol.it": 1,
  "trentino-sud-tirol.it": 1,
  "xn--trentino-sd-tirol-c3b.it": 1,
  "trentino-sudtirol.it": 1,
  "xn--trentino-sdtirol-szb.it": 1,
  "trentino-sued-tirol.it": 1,
  "trentino-suedtirol.it": 1,
  "trentino.it": 1,
  "trentinoa-adige.it": 1,
  "trentinoaadige.it": 1,
  "trentinoalto-adige.it": 1,
  "trentinoaltoadige.it": 1,
  "trentinos-tirol.it": 1,
  "trentinostirol.it": 1,
  "trentinosud-tirol.it": 1,
  "xn--trentinosd-tirol-rzb.it": 1,
  "trentinosudtirol.it": 1,
  "xn--trentinosdtirol-7vb.it": 1,
  "trentinosued-tirol.it": 1,
  "trentinosuedtirol.it": 1,
  "trentinsud-tirol.it": 1,
  "xn--trentinsd-tirol-6vb.it": 1,
  "trentinsudtirol.it": 1,
  "xn--trentinsdtirol-nsb.it": 1,
  "trentinsued-tirol.it": 1,
  "trentinsuedtirol.it": 1,
  "tuscany.it": 1,
  "umb.it": 1,
  "umbria.it": 1,
  "val-d-aosta.it": 1,
  "val-daosta.it": 1,
  "vald-aosta.it": 1,
  "valdaosta.it": 1,
  "valle-aosta.it": 1,
  "valle-d-aosta.it": 1,
  "valle-daosta.it": 1,
  "valleaosta.it": 1,
  "valled-aosta.it": 1,
  "valledaosta.it": 1,
  "vallee-aoste.it": 1,
  "xn--valle-aoste-ebb.it": 1,
  "vallee-d-aoste.it": 1,
  "xn--valle-d-aoste-ehb.it": 1,
  "valleeaoste.it": 1,
  "xn--valleaoste-e7a.it": 1,
  "valleedaoste.it": 1,
  "xn--valledaoste-ebb.it": 1,
  "vao.it": 1,
  "vda.it": 1,
  "ven.it": 1,
  "veneto.it": 1,
  "ag.it": 1,
  "agrigento.it": 1,
  "al.it": 1,
  "alessandria.it": 1,
  "alto-adige.it": 1,
  "altoadige.it": 1,
  "an.it": 1,
  "ancona.it": 1,
  "andria-barletta-trani.it": 1,
  "andria-trani-barletta.it": 1,
  "andriabarlettatrani.it": 1,
  "andriatranibarletta.it": 1,
  "ao.it": 1,
  "aosta.it": 1,
  "aoste.it": 1,
  "ap.it": 1,
  "aq.it": 1,
  "aquila.it": 1,
  "ar.it": 1,
  "arezzo.it": 1,
  "ascoli-piceno.it": 1,
  "ascolipiceno.it": 1,
  "asti.it": 1,
  "at.it": 1,
  "av.it": 1,
  "avellino.it": 1,
  "ba.it": 1,
  "balsan-sudtirol.it": 1,
  "xn--balsan-sdtirol-nsb.it": 1,
  "balsan-suedtirol.it": 1,
  "balsan.it": 1,
  "bari.it": 1,
  "barletta-trani-andria.it": 1,
  "barlettatraniandria.it": 1,
  "belluno.it": 1,
  "benevento.it": 1,
  "bergamo.it": 1,
  "bg.it": 1,
  "bi.it": 1,
  "biella.it": 1,
  "bl.it": 1,
  "bn.it": 1,
  "bo.it": 1,
  "bologna.it": 1,
  "bolzano-altoadige.it": 1,
  "bolzano.it": 1,
  "bozen-sudtirol.it": 1,
  "xn--bozen-sdtirol-2ob.it": 1,
  "bozen-suedtirol.it": 1,
  "bozen.it": 1,
  "br.it": 1,
  "brescia.it": 1,
  "brindisi.it": 1,
  "bs.it": 1,
  "bt.it": 1,
  "bulsan-sudtirol.it": 1,
  "xn--bulsan-sdtirol-nsb.it": 1,
  "bulsan-suedtirol.it": 1,
  "bulsan.it": 1,
  "bz.it": 1,
  "ca.it": 1,
  "cagliari.it": 1,
  "caltanissetta.it": 1,
  "campidano-medio.it": 1,
  "campidanomedio.it": 1,
  "campobasso.it": 1,
  "carbonia-iglesias.it": 1,
  "carboniaiglesias.it": 1,
  "carrara-massa.it": 1,
  "carraramassa.it": 1,
  "caserta.it": 1,
  "catania.it": 1,
  "catanzaro.it": 1,
  "cb.it": 1,
  "ce.it": 1,
  "cesena-forli.it": 1,
  "xn--cesena-forl-mcb.it": 1,
  "cesenaforli.it": 1,
  "xn--cesenaforl-i8a.it": 1,
  "ch.it": 1,
  "chieti.it": 1,
  "ci.it": 1,
  "cl.it": 1,
  "cn.it": 1,
  "co.it": 1,
  "como.it": 1,
  "cosenza.it": 1,
  "cr.it": 1,
  "cremona.it": 1,
  "crotone.it": 1,
  "cs.it": 1,
  "ct.it": 1,
  "cuneo.it": 1,
  "cz.it": 1,
  "dell-ogliastra.it": 1,
  "dellogliastra.it": 1,
  "en.it": 1,
  "enna.it": 1,
  "fc.it": 1,
  "fe.it": 1,
  "fermo.it": 1,
  "ferrara.it": 1,
  "fg.it": 1,
  "fi.it": 1,
  "firenze.it": 1,
  "florence.it": 1,
  "fm.it": 1,
  "foggia.it": 1,
  "forli-cesena.it": 1,
  "xn--forl-cesena-fcb.it": 1,
  "forlicesena.it": 1,
  "xn--forlcesena-c8a.it": 1,
  "fr.it": 1,
  "frosinone.it": 1,
  "ge.it": 1,
  "genoa.it": 1,
  "genova.it": 1,
  "go.it": 1,
  "gorizia.it": 1,
  "gr.it": 1,
  "grosseto.it": 1,
  "iglesias-carbonia.it": 1,
  "iglesiascarbonia.it": 1,
  "im.it": 1,
  "imperia.it": 1,
  "is.it": 1,
  "isernia.it": 1,
  "kr.it": 1,
  "la-spezia.it": 1,
  "laquila.it": 1,
  "laspezia.it": 1,
  "latina.it": 1,
  "lc.it": 1,
  "le.it": 1,
  "lecce.it": 1,
  "lecco.it": 1,
  "li.it": 1,
  "livorno.it": 1,
  "lo.it": 1,
  "lodi.it": 1,
  "lt.it": 1,
  "lu.it": 1,
  "lucca.it": 1,
  "macerata.it": 1,
  "mantova.it": 1,
  "massa-carrara.it": 1,
  "massacarrara.it": 1,
  "matera.it": 1,
  "mb.it": 1,
  "mc.it": 1,
  "me.it": 1,
  "medio-campidano.it": 1,
  "mediocampidano.it": 1,
  "messina.it": 1,
  "mi.it": 1,
  "milan.it": 1,
  "milano.it": 1,
  "mn.it": 1,
  "mo.it": 1,
  "modena.it": 1,
  "monza-brianza.it": 1,
  "monza-e-della-brianza.it": 1,
  "monza.it": 1,
  "monzabrianza.it": 1,
  "monzaebrianza.it": 1,
  "monzaedellabrianza.it": 1,
  "ms.it": 1,
  "mt.it": 1,
  "na.it": 1,
  "naples.it": 1,
  "napoli.it": 1,
  "no.it": 1,
  "novara.it": 1,
  "nu.it": 1,
  "nuoro.it": 1,
  "og.it": 1,
  "ogliastra.it": 1,
  "olbia-tempio.it": 1,
  "olbiatempio.it": 1,
  "or.it": 1,
  "oristano.it": 1,
  "ot.it": 1,
  "pa.it": 1,
  "padova.it": 1,
  "padua.it": 1,
  "palermo.it": 1,
  "parma.it": 1,
  "pavia.it": 1,
  "pc.it": 1,
  "pd.it": 1,
  "pe.it": 1,
  "perugia.it": 1,
  "pesaro-urbino.it": 1,
  "pesarourbino.it": 1,
  "pescara.it": 1,
  "pg.it": 1,
  "pi.it": 1,
  "piacenza.it": 1,
  "pisa.it": 1,
  "pistoia.it": 1,
  "pn.it": 1,
  "po.it": 1,
  "pordenone.it": 1,
  "potenza.it": 1,
  "pr.it": 1,
  "prato.it": 1,
  "pt.it": 1,
  "pu.it": 1,
  "pv.it": 1,
  "pz.it": 1,
  "ra.it": 1,
  "ragusa.it": 1,
  "ravenna.it": 1,
  "rc.it": 1,
  "re.it": 1,
  "reggio-calabria.it": 1,
  "reggio-emilia.it": 1,
  "reggiocalabria.it": 1,
  "reggioemilia.it": 1,
  "rg.it": 1,
  "ri.it": 1,
  "rieti.it": 1,
  "rimini.it": 1,
  "rm.it": 1,
  "rn.it": 1,
  "ro.it": 1,
  "roma.it": 1,
  "rome.it": 1,
  "rovigo.it": 1,
  "sa.it": 1,
  "salerno.it": 1,
  "sassari.it": 1,
  "savona.it": 1,
  "si.it": 1,
  "siena.it": 1,
  "siracusa.it": 1,
  "so.it": 1,
  "sondrio.it": 1,
  "sp.it": 1,
  "sr.it": 1,
  "ss.it": 1,
  "suedtirol.it": 1,
  "xn--sdtirol-n2a.it": 1,
  "sv.it": 1,
  "ta.it": 1,
  "taranto.it": 1,
  "te.it": 1,
  "tempio-olbia.it": 1,
  "tempioolbia.it": 1,
  "teramo.it": 1,
  "terni.it": 1,
  "tn.it": 1,
  "to.it": 1,
  "torino.it": 1,
  "tp.it": 1,
  "tr.it": 1,
  "trani-andria-barletta.it": 1,
  "trani-barletta-andria.it": 1,
  "traniandriabarletta.it": 1,
  "tranibarlettaandria.it": 1,
  "trapani.it": 1,
  "trento.it": 1,
  "treviso.it": 1,
  "trieste.it": 1,
  "ts.it": 1,
  "turin.it": 1,
  "tv.it": 1,
  "ud.it": 1,
  "udine.it": 1,
  "urbino-pesaro.it": 1,
  "urbinopesaro.it": 1,
  "va.it": 1,
  "varese.it": 1,
  "vb.it": 1,
  "vc.it": 1,
  "ve.it": 1,
  "venezia.it": 1,
  "venice.it": 1,
  "verbania.it": 1,
  "vercelli.it": 1,
  "verona.it": 1,
  "vi.it": 1,
  "vibo-valentia.it": 1,
  "vibovalentia.it": 1,
  "vicenza.it": 1,
  "viterbo.it": 1,
  "vr.it": 1,
  "vs.it": 1,
  "vt.it": 1,
  "vv.it": 1,
  "je": 1,
  "co.je": 1,
  "net.je": 1,
  "org.je": 1,
  "jm": 2,
  "jo": 1,
  "com.jo": 1,
  "org.jo": 1,
  "net.jo": 1,
  "edu.jo": 1,
  "sch.jo": 1,
  "gov.jo": 1,
  "mil.jo": 1,
  "name.jo": 1,
  "jobs": 1,
  "jp": 1,
  "ac.jp": 1,
  "ad.jp": 1,
  "co.jp": 1,
  "ed.jp": 1,
  "go.jp": 1,
  "gr.jp": 1,
  "lg.jp": 1,
  "ne.jp": 1,
  "or.jp": 1,
  "aichi.jp": 1,
  "akita.jp": 1,
  "aomori.jp": 1,
  "chiba.jp": 1,
  "ehime.jp": 1,
  "fukui.jp": 1,
  "fukuoka.jp": 1,
  "fukushima.jp": 1,
  "gifu.jp": 1,
  "gunma.jp": 1,
  "hiroshima.jp": 1,
  "hokkaido.jp": 1,
  "hyogo.jp": 1,
  "ibaraki.jp": 1,
  "ishikawa.jp": 1,
  "iwate.jp": 1,
  "kagawa.jp": 1,
  "kagoshima.jp": 1,
  "kanagawa.jp": 1,
  "kochi.jp": 1,
  "kumamoto.jp": 1,
  "kyoto.jp": 1,
  "mie.jp": 1,
  "miyagi.jp": 1,
  "miyazaki.jp": 1,
  "nagano.jp": 1,
  "nagasaki.jp": 1,
  "nara.jp": 1,
  "niigata.jp": 1,
  "oita.jp": 1,
  "okayama.jp": 1,
  "okinawa.jp": 1,
  "osaka.jp": 1,
  "saga.jp": 1,
  "saitama.jp": 1,
  "shiga.jp": 1,
  "shimane.jp": 1,
  "shizuoka.jp": 1,
  "tochigi.jp": 1,
  "tokushima.jp": 1,
  "tokyo.jp": 1,
  "tottori.jp": 1,
  "toyama.jp": 1,
  "wakayama.jp": 1,
  "yamagata.jp": 1,
  "yamaguchi.jp": 1,
  "yamanashi.jp": 1,
  "xn--4pvxs.jp": 1,
  "xn--vgu402c.jp": 1,
  "xn--c3s14m.jp": 1,
  "xn--f6qx53a.jp": 1,
  "xn--8pvr4u.jp": 1,
  "xn--uist22h.jp": 1,
  "xn--djrs72d6uy.jp": 1,
  "xn--mkru45i.jp": 1,
  "xn--0trq7p7nn.jp": 1,
  "xn--8ltr62k.jp": 1,
  "xn--2m4a15e.jp": 1,
  "xn--efvn9s.jp": 1,
  "xn--32vp30h.jp": 1,
  "xn--4it797k.jp": 1,
  "xn--1lqs71d.jp": 1,
  "xn--5rtp49c.jp": 1,
  "xn--5js045d.jp": 1,
  "xn--ehqz56n.jp": 1,
  "xn--1lqs03n.jp": 1,
  "xn--qqqt11m.jp": 1,
  "xn--kbrq7o.jp": 1,
  "xn--pssu33l.jp": 1,
  "xn--ntsq17g.jp": 1,
  "xn--uisz3g.jp": 1,
  "xn--6btw5a.jp": 1,
  "xn--1ctwo.jp": 1,
  "xn--6orx2r.jp": 1,
  "xn--rht61e.jp": 1,
  "xn--rht27z.jp": 1,
  "xn--djty4k.jp": 1,
  "xn--nit225k.jp": 1,
  "xn--rht3d.jp": 1,
  "xn--klty5x.jp": 1,
  "xn--kltx9a.jp": 1,
  "xn--kltp7d.jp": 1,
  "xn--uuwu58a.jp": 1,
  "xn--zbx025d.jp": 1,
  "xn--ntso0iqx3a.jp": 1,
  "xn--elqq16h.jp": 1,
  "xn--4it168d.jp": 1,
  "xn--klt787d.jp": 1,
  "xn--rny31h.jp": 1,
  "xn--7t0a264c.jp": 1,
  "xn--5rtq34k.jp": 1,
  "xn--k7yn95e.jp": 1,
  "xn--tor131o.jp": 1,
  "xn--d5qv7z876c.jp": 1,
  "kawasaki.jp": 2,
  "kitakyushu.jp": 2,
  "kobe.jp": 2,
  "nagoya.jp": 2,
  "sapporo.jp": 2,
  "sendai.jp": 2,
  "yokohama.jp": 2,
  "city.kawasaki.jp": 0,
  "city.kitakyushu.jp": 0,
  "city.kobe.jp": 0,
  "city.nagoya.jp": 0,
  "city.sapporo.jp": 0,
  "city.sendai.jp": 0,
  "city.yokohama.jp": 0,
  "aisai.aichi.jp": 1,
  "ama.aichi.jp": 1,
  "anjo.aichi.jp": 1,
  "asuke.aichi.jp": 1,
  "chiryu.aichi.jp": 1,
  "chita.aichi.jp": 1,
  "fuso.aichi.jp": 1,
  "gamagori.aichi.jp": 1,
  "handa.aichi.jp": 1,
  "hazu.aichi.jp": 1,
  "hekinan.aichi.jp": 1,
  "higashiura.aichi.jp": 1,
  "ichinomiya.aichi.jp": 1,
  "inazawa.aichi.jp": 1,
  "inuyama.aichi.jp": 1,
  "isshiki.aichi.jp": 1,
  "iwakura.aichi.jp": 1,
  "kanie.aichi.jp": 1,
  "kariya.aichi.jp": 1,
  "kasugai.aichi.jp": 1,
  "kira.aichi.jp": 1,
  "kiyosu.aichi.jp": 1,
  "komaki.aichi.jp": 1,
  "konan.aichi.jp": 1,
  "kota.aichi.jp": 1,
  "mihama.aichi.jp": 1,
  "miyoshi.aichi.jp": 1,
  "nishio.aichi.jp": 1,
  "nisshin.aichi.jp": 1,
  "obu.aichi.jp": 1,
  "oguchi.aichi.jp": 1,
  "oharu.aichi.jp": 1,
  "okazaki.aichi.jp": 1,
  "owariasahi.aichi.jp": 1,
  "seto.aichi.jp": 1,
  "shikatsu.aichi.jp": 1,
  "shinshiro.aichi.jp": 1,
  "shitara.aichi.jp": 1,
  "tahara.aichi.jp": 1,
  "takahama.aichi.jp": 1,
  "tobishima.aichi.jp": 1,
  "toei.aichi.jp": 1,
  "togo.aichi.jp": 1,
  "tokai.aichi.jp": 1,
  "tokoname.aichi.jp": 1,
  "toyoake.aichi.jp": 1,
  "toyohashi.aichi.jp": 1,
  "toyokawa.aichi.jp": 1,
  "toyone.aichi.jp": 1,
  "toyota.aichi.jp": 1,
  "tsushima.aichi.jp": 1,
  "yatomi.aichi.jp": 1,
  "akita.akita.jp": 1,
  "daisen.akita.jp": 1,
  "fujisato.akita.jp": 1,
  "gojome.akita.jp": 1,
  "hachirogata.akita.jp": 1,
  "happou.akita.jp": 1,
  "higashinaruse.akita.jp": 1,
  "honjo.akita.jp": 1,
  "honjyo.akita.jp": 1,
  "ikawa.akita.jp": 1,
  "kamikoani.akita.jp": 1,
  "kamioka.akita.jp": 1,
  "katagami.akita.jp": 1,
  "kazuno.akita.jp": 1,
  "kitaakita.akita.jp": 1,
  "kosaka.akita.jp": 1,
  "kyowa.akita.jp": 1,
  "misato.akita.jp": 1,
  "mitane.akita.jp": 1,
  "moriyoshi.akita.jp": 1,
  "nikaho.akita.jp": 1,
  "noshiro.akita.jp": 1,
  "odate.akita.jp": 1,
  "oga.akita.jp": 1,
  "ogata.akita.jp": 1,
  "semboku.akita.jp": 1,
  "yokote.akita.jp": 1,
  "yurihonjo.akita.jp": 1,
  "aomori.aomori.jp": 1,
  "gonohe.aomori.jp": 1,
  "hachinohe.aomori.jp": 1,
  "hashikami.aomori.jp": 1,
  "hiranai.aomori.jp": 1,
  "hirosaki.aomori.jp": 1,
  "itayanagi.aomori.jp": 1,
  "kuroishi.aomori.jp": 1,
  "misawa.aomori.jp": 1,
  "mutsu.aomori.jp": 1,
  "nakadomari.aomori.jp": 1,
  "noheji.aomori.jp": 1,
  "oirase.aomori.jp": 1,
  "owani.aomori.jp": 1,
  "rokunohe.aomori.jp": 1,
  "sannohe.aomori.jp": 1,
  "shichinohe.aomori.jp": 1,
  "shingo.aomori.jp": 1,
  "takko.aomori.jp": 1,
  "towada.aomori.jp": 1,
  "tsugaru.aomori.jp": 1,
  "tsuruta.aomori.jp": 1,
  "abiko.chiba.jp": 1,
  "asahi.chiba.jp": 1,
  "chonan.chiba.jp": 1,
  "chosei.chiba.jp": 1,
  "choshi.chiba.jp": 1,
  "chuo.chiba.jp": 1,
  "funabashi.chiba.jp": 1,
  "futtsu.chiba.jp": 1,
  "hanamigawa.chiba.jp": 1,
  "ichihara.chiba.jp": 1,
  "ichikawa.chiba.jp": 1,
  "ichinomiya.chiba.jp": 1,
  "inzai.chiba.jp": 1,
  "isumi.chiba.jp": 1,
  "kamagaya.chiba.jp": 1,
  "kamogawa.chiba.jp": 1,
  "kashiwa.chiba.jp": 1,
  "katori.chiba.jp": 1,
  "katsuura.chiba.jp": 1,
  "kimitsu.chiba.jp": 1,
  "kisarazu.chiba.jp": 1,
  "kozaki.chiba.jp": 1,
  "kujukuri.chiba.jp": 1,
  "kyonan.chiba.jp": 1,
  "matsudo.chiba.jp": 1,
  "midori.chiba.jp": 1,
  "mihama.chiba.jp": 1,
  "minamiboso.chiba.jp": 1,
  "mobara.chiba.jp": 1,
  "mutsuzawa.chiba.jp": 1,
  "nagara.chiba.jp": 1,
  "nagareyama.chiba.jp": 1,
  "narashino.chiba.jp": 1,
  "narita.chiba.jp": 1,
  "noda.chiba.jp": 1,
  "oamishirasato.chiba.jp": 1,
  "omigawa.chiba.jp": 1,
  "onjuku.chiba.jp": 1,
  "otaki.chiba.jp": 1,
  "sakae.chiba.jp": 1,
  "sakura.chiba.jp": 1,
  "shimofusa.chiba.jp": 1,
  "shirako.chiba.jp": 1,
  "shiroi.chiba.jp": 1,
  "shisui.chiba.jp": 1,
  "sodegaura.chiba.jp": 1,
  "sosa.chiba.jp": 1,
  "tako.chiba.jp": 1,
  "tateyama.chiba.jp": 1,
  "togane.chiba.jp": 1,
  "tohnosho.chiba.jp": 1,
  "tomisato.chiba.jp": 1,
  "urayasu.chiba.jp": 1,
  "yachimata.chiba.jp": 1,
  "yachiyo.chiba.jp": 1,
  "yokaichiba.chiba.jp": 1,
  "yokoshibahikari.chiba.jp": 1,
  "yotsukaido.chiba.jp": 1,
  "ainan.ehime.jp": 1,
  "honai.ehime.jp": 1,
  "ikata.ehime.jp": 1,
  "imabari.ehime.jp": 1,
  "iyo.ehime.jp": 1,
  "kamijima.ehime.jp": 1,
  "kihoku.ehime.jp": 1,
  "kumakogen.ehime.jp": 1,
  "masaki.ehime.jp": 1,
  "matsuno.ehime.jp": 1,
  "matsuyama.ehime.jp": 1,
  "namikata.ehime.jp": 1,
  "niihama.ehime.jp": 1,
  "ozu.ehime.jp": 1,
  "saijo.ehime.jp": 1,
  "seiyo.ehime.jp": 1,
  "shikokuchuo.ehime.jp": 1,
  "tobe.ehime.jp": 1,
  "toon.ehime.jp": 1,
  "uchiko.ehime.jp": 1,
  "uwajima.ehime.jp": 1,
  "yawatahama.ehime.jp": 1,
  "echizen.fukui.jp": 1,
  "eiheiji.fukui.jp": 1,
  "fukui.fukui.jp": 1,
  "ikeda.fukui.jp": 1,
  "katsuyama.fukui.jp": 1,
  "mihama.fukui.jp": 1,
  "minamiechizen.fukui.jp": 1,
  "obama.fukui.jp": 1,
  "ohi.fukui.jp": 1,
  "ono.fukui.jp": 1,
  "sabae.fukui.jp": 1,
  "sakai.fukui.jp": 1,
  "takahama.fukui.jp": 1,
  "tsuruga.fukui.jp": 1,
  "wakasa.fukui.jp": 1,
  "ashiya.fukuoka.jp": 1,
  "buzen.fukuoka.jp": 1,
  "chikugo.fukuoka.jp": 1,
  "chikuho.fukuoka.jp": 1,
  "chikujo.fukuoka.jp": 1,
  "chikushino.fukuoka.jp": 1,
  "chikuzen.fukuoka.jp": 1,
  "chuo.fukuoka.jp": 1,
  "dazaifu.fukuoka.jp": 1,
  "fukuchi.fukuoka.jp": 1,
  "hakata.fukuoka.jp": 1,
  "higashi.fukuoka.jp": 1,
  "hirokawa.fukuoka.jp": 1,
  "hisayama.fukuoka.jp": 1,
  "iizuka.fukuoka.jp": 1,
  "inatsuki.fukuoka.jp": 1,
  "kaho.fukuoka.jp": 1,
  "kasuga.fukuoka.jp": 1,
  "kasuya.fukuoka.jp": 1,
  "kawara.fukuoka.jp": 1,
  "keisen.fukuoka.jp": 1,
  "koga.fukuoka.jp": 1,
  "kurate.fukuoka.jp": 1,
  "kurogi.fukuoka.jp": 1,
  "kurume.fukuoka.jp": 1,
  "minami.fukuoka.jp": 1,
  "miyako.fukuoka.jp": 1,
  "miyama.fukuoka.jp": 1,
  "miyawaka.fukuoka.jp": 1,
  "mizumaki.fukuoka.jp": 1,
  "munakata.fukuoka.jp": 1,
  "nakagawa.fukuoka.jp": 1,
  "nakama.fukuoka.jp": 1,
  "nishi.fukuoka.jp": 1,
  "nogata.fukuoka.jp": 1,
  "ogori.fukuoka.jp": 1,
  "okagaki.fukuoka.jp": 1,
  "okawa.fukuoka.jp": 1,
  "oki.fukuoka.jp": 1,
  "omuta.fukuoka.jp": 1,
  "onga.fukuoka.jp": 1,
  "onojo.fukuoka.jp": 1,
  "oto.fukuoka.jp": 1,
  "saigawa.fukuoka.jp": 1,
  "sasaguri.fukuoka.jp": 1,
  "shingu.fukuoka.jp": 1,
  "shinyoshitomi.fukuoka.jp": 1,
  "shonai.fukuoka.jp": 1,
  "soeda.fukuoka.jp": 1,
  "sue.fukuoka.jp": 1,
  "tachiarai.fukuoka.jp": 1,
  "tagawa.fukuoka.jp": 1,
  "takata.fukuoka.jp": 1,
  "toho.fukuoka.jp": 1,
  "toyotsu.fukuoka.jp": 1,
  "tsuiki.fukuoka.jp": 1,
  "ukiha.fukuoka.jp": 1,
  "umi.fukuoka.jp": 1,
  "usui.fukuoka.jp": 1,
  "yamada.fukuoka.jp": 1,
  "yame.fukuoka.jp": 1,
  "yanagawa.fukuoka.jp": 1,
  "yukuhashi.fukuoka.jp": 1,
  "aizubange.fukushima.jp": 1,
  "aizumisato.fukushima.jp": 1,
  "aizuwakamatsu.fukushima.jp": 1,
  "asakawa.fukushima.jp": 1,
  "bandai.fukushima.jp": 1,
  "date.fukushima.jp": 1,
  "fukushima.fukushima.jp": 1,
  "furudono.fukushima.jp": 1,
  "futaba.fukushima.jp": 1,
  "hanawa.fukushima.jp": 1,
  "higashi.fukushima.jp": 1,
  "hirata.fukushima.jp": 1,
  "hirono.fukushima.jp": 1,
  "iitate.fukushima.jp": 1,
  "inawashiro.fukushima.jp": 1,
  "ishikawa.fukushima.jp": 1,
  "iwaki.fukushima.jp": 1,
  "izumizaki.fukushima.jp": 1,
  "kagamiishi.fukushima.jp": 1,
  "kaneyama.fukushima.jp": 1,
  "kawamata.fukushima.jp": 1,
  "kitakata.fukushima.jp": 1,
  "kitashiobara.fukushima.jp": 1,
  "koori.fukushima.jp": 1,
  "koriyama.fukushima.jp": 1,
  "kunimi.fukushima.jp": 1,
  "miharu.fukushima.jp": 1,
  "mishima.fukushima.jp": 1,
  "namie.fukushima.jp": 1,
  "nango.fukushima.jp": 1,
  "nishiaizu.fukushima.jp": 1,
  "nishigo.fukushima.jp": 1,
  "okuma.fukushima.jp": 1,
  "omotego.fukushima.jp": 1,
  "ono.fukushima.jp": 1,
  "otama.fukushima.jp": 1,
  "samegawa.fukushima.jp": 1,
  "shimogo.fukushima.jp": 1,
  "shirakawa.fukushima.jp": 1,
  "showa.fukushima.jp": 1,
  "soma.fukushima.jp": 1,
  "sukagawa.fukushima.jp": 1,
  "taishin.fukushima.jp": 1,
  "tamakawa.fukushima.jp": 1,
  "tanagura.fukushima.jp": 1,
  "tenei.fukushima.jp": 1,
  "yabuki.fukushima.jp": 1,
  "yamato.fukushima.jp": 1,
  "yamatsuri.fukushima.jp": 1,
  "yanaizu.fukushima.jp": 1,
  "yugawa.fukushima.jp": 1,
  "anpachi.gifu.jp": 1,
  "ena.gifu.jp": 1,
  "gifu.gifu.jp": 1,
  "ginan.gifu.jp": 1,
  "godo.gifu.jp": 1,
  "gujo.gifu.jp": 1,
  "hashima.gifu.jp": 1,
  "hichiso.gifu.jp": 1,
  "hida.gifu.jp": 1,
  "higashishirakawa.gifu.jp": 1,
  "ibigawa.gifu.jp": 1,
  "ikeda.gifu.jp": 1,
  "kakamigahara.gifu.jp": 1,
  "kani.gifu.jp": 1,
  "kasahara.gifu.jp": 1,
  "kasamatsu.gifu.jp": 1,
  "kawaue.gifu.jp": 1,
  "kitagata.gifu.jp": 1,
  "mino.gifu.jp": 1,
  "minokamo.gifu.jp": 1,
  "mitake.gifu.jp": 1,
  "mizunami.gifu.jp": 1,
  "motosu.gifu.jp": 1,
  "nakatsugawa.gifu.jp": 1,
  "ogaki.gifu.jp": 1,
  "sakahogi.gifu.jp": 1,
  "seki.gifu.jp": 1,
  "sekigahara.gifu.jp": 1,
  "shirakawa.gifu.jp": 1,
  "tajimi.gifu.jp": 1,
  "takayama.gifu.jp": 1,
  "tarui.gifu.jp": 1,
  "toki.gifu.jp": 1,
  "tomika.gifu.jp": 1,
  "wanouchi.gifu.jp": 1,
  "yamagata.gifu.jp": 1,
  "yaotsu.gifu.jp": 1,
  "yoro.gifu.jp": 1,
  "annaka.gunma.jp": 1,
  "chiyoda.gunma.jp": 1,
  "fujioka.gunma.jp": 1,
  "higashiagatsuma.gunma.jp": 1,
  "isesaki.gunma.jp": 1,
  "itakura.gunma.jp": 1,
  "kanna.gunma.jp": 1,
  "kanra.gunma.jp": 1,
  "katashina.gunma.jp": 1,
  "kawaba.gunma.jp": 1,
  "kiryu.gunma.jp": 1,
  "kusatsu.gunma.jp": 1,
  "maebashi.gunma.jp": 1,
  "meiwa.gunma.jp": 1,
  "midori.gunma.jp": 1,
  "minakami.gunma.jp": 1,
  "naganohara.gunma.jp": 1,
  "nakanojo.gunma.jp": 1,
  "nanmoku.gunma.jp": 1,
  "numata.gunma.jp": 1,
  "oizumi.gunma.jp": 1,
  "ora.gunma.jp": 1,
  "ota.gunma.jp": 1,
  "shibukawa.gunma.jp": 1,
  "shimonita.gunma.jp": 1,
  "shinto.gunma.jp": 1,
  "showa.gunma.jp": 1,
  "takasaki.gunma.jp": 1,
  "takayama.gunma.jp": 1,
  "tamamura.gunma.jp": 1,
  "tatebayashi.gunma.jp": 1,
  "tomioka.gunma.jp": 1,
  "tsukiyono.gunma.jp": 1,
  "tsumagoi.gunma.jp": 1,
  "ueno.gunma.jp": 1,
  "yoshioka.gunma.jp": 1,
  "asaminami.hiroshima.jp": 1,
  "daiwa.hiroshima.jp": 1,
  "etajima.hiroshima.jp": 1,
  "fuchu.hiroshima.jp": 1,
  "fukuyama.hiroshima.jp": 1,
  "hatsukaichi.hiroshima.jp": 1,
  "higashihiroshima.hiroshima.jp": 1,
  "hongo.hiroshima.jp": 1,
  "jinsekikogen.hiroshima.jp": 1,
  "kaita.hiroshima.jp": 1,
  "kui.hiroshima.jp": 1,
  "kumano.hiroshima.jp": 1,
  "kure.hiroshima.jp": 1,
  "mihara.hiroshima.jp": 1,
  "miyoshi.hiroshima.jp": 1,
  "naka.hiroshima.jp": 1,
  "onomichi.hiroshima.jp": 1,
  "osakikamijima.hiroshima.jp": 1,
  "otake.hiroshima.jp": 1,
  "saka.hiroshima.jp": 1,
  "sera.hiroshima.jp": 1,
  "seranishi.hiroshima.jp": 1,
  "shinichi.hiroshima.jp": 1,
  "shobara.hiroshima.jp": 1,
  "takehara.hiroshima.jp": 1,
  "abashiri.hokkaido.jp": 1,
  "abira.hokkaido.jp": 1,
  "aibetsu.hokkaido.jp": 1,
  "akabira.hokkaido.jp": 1,
  "akkeshi.hokkaido.jp": 1,
  "asahikawa.hokkaido.jp": 1,
  "ashibetsu.hokkaido.jp": 1,
  "ashoro.hokkaido.jp": 1,
  "assabu.hokkaido.jp": 1,
  "atsuma.hokkaido.jp": 1,
  "bibai.hokkaido.jp": 1,
  "biei.hokkaido.jp": 1,
  "bifuka.hokkaido.jp": 1,
  "bihoro.hokkaido.jp": 1,
  "biratori.hokkaido.jp": 1,
  "chippubetsu.hokkaido.jp": 1,
  "chitose.hokkaido.jp": 1,
  "date.hokkaido.jp": 1,
  "ebetsu.hokkaido.jp": 1,
  "embetsu.hokkaido.jp": 1,
  "eniwa.hokkaido.jp": 1,
  "erimo.hokkaido.jp": 1,
  "esan.hokkaido.jp": 1,
  "esashi.hokkaido.jp": 1,
  "fukagawa.hokkaido.jp": 1,
  "fukushima.hokkaido.jp": 1,
  "furano.hokkaido.jp": 1,
  "furubira.hokkaido.jp": 1,
  "haboro.hokkaido.jp": 1,
  "hakodate.hokkaido.jp": 1,
  "hamatonbetsu.hokkaido.jp": 1,
  "hidaka.hokkaido.jp": 1,
  "higashikagura.hokkaido.jp": 1,
  "higashikawa.hokkaido.jp": 1,
  "hiroo.hokkaido.jp": 1,
  "hokuryu.hokkaido.jp": 1,
  "hokuto.hokkaido.jp": 1,
  "honbetsu.hokkaido.jp": 1,
  "horokanai.hokkaido.jp": 1,
  "horonobe.hokkaido.jp": 1,
  "ikeda.hokkaido.jp": 1,
  "imakane.hokkaido.jp": 1,
  "ishikari.hokkaido.jp": 1,
  "iwamizawa.hokkaido.jp": 1,
  "iwanai.hokkaido.jp": 1,
  "kamifurano.hokkaido.jp": 1,
  "kamikawa.hokkaido.jp": 1,
  "kamishihoro.hokkaido.jp": 1,
  "kamisunagawa.hokkaido.jp": 1,
  "kamoenai.hokkaido.jp": 1,
  "kayabe.hokkaido.jp": 1,
  "kembuchi.hokkaido.jp": 1,
  "kikonai.hokkaido.jp": 1,
  "kimobetsu.hokkaido.jp": 1,
  "kitahiroshima.hokkaido.jp": 1,
  "kitami.hokkaido.jp": 1,
  "kiyosato.hokkaido.jp": 1,
  "koshimizu.hokkaido.jp": 1,
  "kunneppu.hokkaido.jp": 1,
  "kuriyama.hokkaido.jp": 1,
  "kuromatsunai.hokkaido.jp": 1,
  "kushiro.hokkaido.jp": 1,
  "kutchan.hokkaido.jp": 1,
  "kyowa.hokkaido.jp": 1,
  "mashike.hokkaido.jp": 1,
  "matsumae.hokkaido.jp": 1,
  "mikasa.hokkaido.jp": 1,
  "minamifurano.hokkaido.jp": 1,
  "mombetsu.hokkaido.jp": 1,
  "moseushi.hokkaido.jp": 1,
  "mukawa.hokkaido.jp": 1,
  "muroran.hokkaido.jp": 1,
  "naie.hokkaido.jp": 1,
  "nakagawa.hokkaido.jp": 1,
  "nakasatsunai.hokkaido.jp": 1,
  "nakatombetsu.hokkaido.jp": 1,
  "nanae.hokkaido.jp": 1,
  "nanporo.hokkaido.jp": 1,
  "nayoro.hokkaido.jp": 1,
  "nemuro.hokkaido.jp": 1,
  "niikappu.hokkaido.jp": 1,
  "niki.hokkaido.jp": 1,
  "nishiokoppe.hokkaido.jp": 1,
  "noboribetsu.hokkaido.jp": 1,
  "numata.hokkaido.jp": 1,
  "obihiro.hokkaido.jp": 1,
  "obira.hokkaido.jp": 1,
  "oketo.hokkaido.jp": 1,
  "okoppe.hokkaido.jp": 1,
  "otaru.hokkaido.jp": 1,
  "otobe.hokkaido.jp": 1,
  "otofuke.hokkaido.jp": 1,
  "otoineppu.hokkaido.jp": 1,
  "oumu.hokkaido.jp": 1,
  "ozora.hokkaido.jp": 1,
  "pippu.hokkaido.jp": 1,
  "rankoshi.hokkaido.jp": 1,
  "rebun.hokkaido.jp": 1,
  "rikubetsu.hokkaido.jp": 1,
  "rishiri.hokkaido.jp": 1,
  "rishirifuji.hokkaido.jp": 1,
  "saroma.hokkaido.jp": 1,
  "sarufutsu.hokkaido.jp": 1,
  "shakotan.hokkaido.jp": 1,
  "shari.hokkaido.jp": 1,
  "shibecha.hokkaido.jp": 1,
  "shibetsu.hokkaido.jp": 1,
  "shikabe.hokkaido.jp": 1,
  "shikaoi.hokkaido.jp": 1,
  "shimamaki.hokkaido.jp": 1,
  "shimizu.hokkaido.jp": 1,
  "shimokawa.hokkaido.jp": 1,
  "shinshinotsu.hokkaido.jp": 1,
  "shintoku.hokkaido.jp": 1,
  "shiranuka.hokkaido.jp": 1,
  "shiraoi.hokkaido.jp": 1,
  "shiriuchi.hokkaido.jp": 1,
  "sobetsu.hokkaido.jp": 1,
  "sunagawa.hokkaido.jp": 1,
  "taiki.hokkaido.jp": 1,
  "takasu.hokkaido.jp": 1,
  "takikawa.hokkaido.jp": 1,
  "takinoue.hokkaido.jp": 1,
  "teshikaga.hokkaido.jp": 1,
  "tobetsu.hokkaido.jp": 1,
  "tohma.hokkaido.jp": 1,
  "tomakomai.hokkaido.jp": 1,
  "tomari.hokkaido.jp": 1,
  "toya.hokkaido.jp": 1,
  "toyako.hokkaido.jp": 1,
  "toyotomi.hokkaido.jp": 1,
  "toyoura.hokkaido.jp": 1,
  "tsubetsu.hokkaido.jp": 1,
  "tsukigata.hokkaido.jp": 1,
  "urakawa.hokkaido.jp": 1,
  "urausu.hokkaido.jp": 1,
  "uryu.hokkaido.jp": 1,
  "utashinai.hokkaido.jp": 1,
  "wakkanai.hokkaido.jp": 1,
  "wassamu.hokkaido.jp": 1,
  "yakumo.hokkaido.jp": 1,
  "yoichi.hokkaido.jp": 1,
  "aioi.hyogo.jp": 1,
  "akashi.hyogo.jp": 1,
  "ako.hyogo.jp": 1,
  "amagasaki.hyogo.jp": 1,
  "aogaki.hyogo.jp": 1,
  "asago.hyogo.jp": 1,
  "ashiya.hyogo.jp": 1,
  "awaji.hyogo.jp": 1,
  "fukusaki.hyogo.jp": 1,
  "goshiki.hyogo.jp": 1,
  "harima.hyogo.jp": 1,
  "himeji.hyogo.jp": 1,
  "ichikawa.hyogo.jp": 1,
  "inagawa.hyogo.jp": 1,
  "itami.hyogo.jp": 1,
  "kakogawa.hyogo.jp": 1,
  "kamigori.hyogo.jp": 1,
  "kamikawa.hyogo.jp": 1,
  "kasai.hyogo.jp": 1,
  "kasuga.hyogo.jp": 1,
  "kawanishi.hyogo.jp": 1,
  "miki.hyogo.jp": 1,
  "minamiawaji.hyogo.jp": 1,
  "nishinomiya.hyogo.jp": 1,
  "nishiwaki.hyogo.jp": 1,
  "ono.hyogo.jp": 1,
  "sanda.hyogo.jp": 1,
  "sannan.hyogo.jp": 1,
  "sasayama.hyogo.jp": 1,
  "sayo.hyogo.jp": 1,
  "shingu.hyogo.jp": 1,
  "shinonsen.hyogo.jp": 1,
  "shiso.hyogo.jp": 1,
  "sumoto.hyogo.jp": 1,
  "taishi.hyogo.jp": 1,
  "taka.hyogo.jp": 1,
  "takarazuka.hyogo.jp": 1,
  "takasago.hyogo.jp": 1,
  "takino.hyogo.jp": 1,
  "tamba.hyogo.jp": 1,
  "tatsuno.hyogo.jp": 1,
  "toyooka.hyogo.jp": 1,
  "yabu.hyogo.jp": 1,
  "yashiro.hyogo.jp": 1,
  "yoka.hyogo.jp": 1,
  "yokawa.hyogo.jp": 1,
  "ami.ibaraki.jp": 1,
  "asahi.ibaraki.jp": 1,
  "bando.ibaraki.jp": 1,
  "chikusei.ibaraki.jp": 1,
  "daigo.ibaraki.jp": 1,
  "fujishiro.ibaraki.jp": 1,
  "hitachi.ibaraki.jp": 1,
  "hitachinaka.ibaraki.jp": 1,
  "hitachiomiya.ibaraki.jp": 1,
  "hitachiota.ibaraki.jp": 1,
  "ibaraki.ibaraki.jp": 1,
  "ina.ibaraki.jp": 1,
  "inashiki.ibaraki.jp": 1,
  "itako.ibaraki.jp": 1,
  "iwama.ibaraki.jp": 1,
  "joso.ibaraki.jp": 1,
  "kamisu.ibaraki.jp": 1,
  "kasama.ibaraki.jp": 1,
  "kashima.ibaraki.jp": 1,
  "kasumigaura.ibaraki.jp": 1,
  "koga.ibaraki.jp": 1,
  "miho.ibaraki.jp": 1,
  "mito.ibaraki.jp": 1,
  "moriya.ibaraki.jp": 1,
  "naka.ibaraki.jp": 1,
  "namegata.ibaraki.jp": 1,
  "oarai.ibaraki.jp": 1,
  "ogawa.ibaraki.jp": 1,
  "omitama.ibaraki.jp": 1,
  "ryugasaki.ibaraki.jp": 1,
  "sakai.ibaraki.jp": 1,
  "sakuragawa.ibaraki.jp": 1,
  "shimodate.ibaraki.jp": 1,
  "shimotsuma.ibaraki.jp": 1,
  "shirosato.ibaraki.jp": 1,
  "sowa.ibaraki.jp": 1,
  "suifu.ibaraki.jp": 1,
  "takahagi.ibaraki.jp": 1,
  "tamatsukuri.ibaraki.jp": 1,
  "tokai.ibaraki.jp": 1,
  "tomobe.ibaraki.jp": 1,
  "tone.ibaraki.jp": 1,
  "toride.ibaraki.jp": 1,
  "tsuchiura.ibaraki.jp": 1,
  "tsukuba.ibaraki.jp": 1,
  "uchihara.ibaraki.jp": 1,
  "ushiku.ibaraki.jp": 1,
  "yachiyo.ibaraki.jp": 1,
  "yamagata.ibaraki.jp": 1,
  "yawara.ibaraki.jp": 1,
  "yuki.ibaraki.jp": 1,
  "anamizu.ishikawa.jp": 1,
  "hakui.ishikawa.jp": 1,
  "hakusan.ishikawa.jp": 1,
  "kaga.ishikawa.jp": 1,
  "kahoku.ishikawa.jp": 1,
  "kanazawa.ishikawa.jp": 1,
  "kawakita.ishikawa.jp": 1,
  "komatsu.ishikawa.jp": 1,
  "nakanoto.ishikawa.jp": 1,
  "nanao.ishikawa.jp": 1,
  "nomi.ishikawa.jp": 1,
  "nonoichi.ishikawa.jp": 1,
  "noto.ishikawa.jp": 1,
  "shika.ishikawa.jp": 1,
  "suzu.ishikawa.jp": 1,
  "tsubata.ishikawa.jp": 1,
  "tsurugi.ishikawa.jp": 1,
  "uchinada.ishikawa.jp": 1,
  "wajima.ishikawa.jp": 1,
  "fudai.iwate.jp": 1,
  "fujisawa.iwate.jp": 1,
  "hanamaki.iwate.jp": 1,
  "hiraizumi.iwate.jp": 1,
  "hirono.iwate.jp": 1,
  "ichinohe.iwate.jp": 1,
  "ichinoseki.iwate.jp": 1,
  "iwaizumi.iwate.jp": 1,
  "iwate.iwate.jp": 1,
  "joboji.iwate.jp": 1,
  "kamaishi.iwate.jp": 1,
  "kanegasaki.iwate.jp": 1,
  "karumai.iwate.jp": 1,
  "kawai.iwate.jp": 1,
  "kitakami.iwate.jp": 1,
  "kuji.iwate.jp": 1,
  "kunohe.iwate.jp": 1,
  "kuzumaki.iwate.jp": 1,
  "miyako.iwate.jp": 1,
  "mizusawa.iwate.jp": 1,
  "morioka.iwate.jp": 1,
  "ninohe.iwate.jp": 1,
  "noda.iwate.jp": 1,
  "ofunato.iwate.jp": 1,
  "oshu.iwate.jp": 1,
  "otsuchi.iwate.jp": 1,
  "rikuzentakata.iwate.jp": 1,
  "shiwa.iwate.jp": 1,
  "shizukuishi.iwate.jp": 1,
  "sumita.iwate.jp": 1,
  "tanohata.iwate.jp": 1,
  "tono.iwate.jp": 1,
  "yahaba.iwate.jp": 1,
  "yamada.iwate.jp": 1,
  "ayagawa.kagawa.jp": 1,
  "higashikagawa.kagawa.jp": 1,
  "kanonji.kagawa.jp": 1,
  "kotohira.kagawa.jp": 1,
  "manno.kagawa.jp": 1,
  "marugame.kagawa.jp": 1,
  "mitoyo.kagawa.jp": 1,
  "naoshima.kagawa.jp": 1,
  "sanuki.kagawa.jp": 1,
  "tadotsu.kagawa.jp": 1,
  "takamatsu.kagawa.jp": 1,
  "tonosho.kagawa.jp": 1,
  "uchinomi.kagawa.jp": 1,
  "utazu.kagawa.jp": 1,
  "zentsuji.kagawa.jp": 1,
  "akune.kagoshima.jp": 1,
  "amami.kagoshima.jp": 1,
  "hioki.kagoshima.jp": 1,
  "isa.kagoshima.jp": 1,
  "isen.kagoshima.jp": 1,
  "izumi.kagoshima.jp": 1,
  "kagoshima.kagoshima.jp": 1,
  "kanoya.kagoshima.jp": 1,
  "kawanabe.kagoshima.jp": 1,
  "kinko.kagoshima.jp": 1,
  "kouyama.kagoshima.jp": 1,
  "makurazaki.kagoshima.jp": 1,
  "matsumoto.kagoshima.jp": 1,
  "minamitane.kagoshima.jp": 1,
  "nakatane.kagoshima.jp": 1,
  "nishinoomote.kagoshima.jp": 1,
  "satsumasendai.kagoshima.jp": 1,
  "soo.kagoshima.jp": 1,
  "tarumizu.kagoshima.jp": 1,
  "yusui.kagoshima.jp": 1,
  "aikawa.kanagawa.jp": 1,
  "atsugi.kanagawa.jp": 1,
  "ayase.kanagawa.jp": 1,
  "chigasaki.kanagawa.jp": 1,
  "ebina.kanagawa.jp": 1,
  "fujisawa.kanagawa.jp": 1,
  "hadano.kanagawa.jp": 1,
  "hakone.kanagawa.jp": 1,
  "hiratsuka.kanagawa.jp": 1,
  "isehara.kanagawa.jp": 1,
  "kaisei.kanagawa.jp": 1,
  "kamakura.kanagawa.jp": 1,
  "kiyokawa.kanagawa.jp": 1,
  "matsuda.kanagawa.jp": 1,
  "minamiashigara.kanagawa.jp": 1,
  "miura.kanagawa.jp": 1,
  "nakai.kanagawa.jp": 1,
  "ninomiya.kanagawa.jp": 1,
  "odawara.kanagawa.jp": 1,
  "oi.kanagawa.jp": 1,
  "oiso.kanagawa.jp": 1,
  "sagamihara.kanagawa.jp": 1,
  "samukawa.kanagawa.jp": 1,
  "tsukui.kanagawa.jp": 1,
  "yamakita.kanagawa.jp": 1,
  "yamato.kanagawa.jp": 1,
  "yokosuka.kanagawa.jp": 1,
  "yugawara.kanagawa.jp": 1,
  "zama.kanagawa.jp": 1,
  "zushi.kanagawa.jp": 1,
  "aki.kochi.jp": 1,
  "geisei.kochi.jp": 1,
  "hidaka.kochi.jp": 1,
  "higashitsuno.kochi.jp": 1,
  "ino.kochi.jp": 1,
  "kagami.kochi.jp": 1,
  "kami.kochi.jp": 1,
  "kitagawa.kochi.jp": 1,
  "kochi.kochi.jp": 1,
  "mihara.kochi.jp": 1,
  "motoyama.kochi.jp": 1,
  "muroto.kochi.jp": 1,
  "nahari.kochi.jp": 1,
  "nakamura.kochi.jp": 1,
  "nankoku.kochi.jp": 1,
  "nishitosa.kochi.jp": 1,
  "niyodogawa.kochi.jp": 1,
  "ochi.kochi.jp": 1,
  "okawa.kochi.jp": 1,
  "otoyo.kochi.jp": 1,
  "otsuki.kochi.jp": 1,
  "sakawa.kochi.jp": 1,
  "sukumo.kochi.jp": 1,
  "susaki.kochi.jp": 1,
  "tosa.kochi.jp": 1,
  "tosashimizu.kochi.jp": 1,
  "toyo.kochi.jp": 1,
  "tsuno.kochi.jp": 1,
  "umaji.kochi.jp": 1,
  "yasuda.kochi.jp": 1,
  "yusuhara.kochi.jp": 1,
  "amakusa.kumamoto.jp": 1,
  "arao.kumamoto.jp": 1,
  "aso.kumamoto.jp": 1,
  "choyo.kumamoto.jp": 1,
  "gyokuto.kumamoto.jp": 1,
  "kamiamakusa.kumamoto.jp": 1,
  "kikuchi.kumamoto.jp": 1,
  "kumamoto.kumamoto.jp": 1,
  "mashiki.kumamoto.jp": 1,
  "mifune.kumamoto.jp": 1,
  "minamata.kumamoto.jp": 1,
  "minamioguni.kumamoto.jp": 1,
  "nagasu.kumamoto.jp": 1,
  "nishihara.kumamoto.jp": 1,
  "oguni.kumamoto.jp": 1,
  "ozu.kumamoto.jp": 1,
  "sumoto.kumamoto.jp": 1,
  "takamori.kumamoto.jp": 1,
  "uki.kumamoto.jp": 1,
  "uto.kumamoto.jp": 1,
  "yamaga.kumamoto.jp": 1,
  "yamato.kumamoto.jp": 1,
  "yatsushiro.kumamoto.jp": 1,
  "ayabe.kyoto.jp": 1,
  "fukuchiyama.kyoto.jp": 1,
  "higashiyama.kyoto.jp": 1,
  "ide.kyoto.jp": 1,
  "ine.kyoto.jp": 1,
  "joyo.kyoto.jp": 1,
  "kameoka.kyoto.jp": 1,
  "kamo.kyoto.jp": 1,
  "kita.kyoto.jp": 1,
  "kizu.kyoto.jp": 1,
  "kumiyama.kyoto.jp": 1,
  "kyotamba.kyoto.jp": 1,
  "kyotanabe.kyoto.jp": 1,
  "kyotango.kyoto.jp": 1,
  "maizuru.kyoto.jp": 1,
  "minami.kyoto.jp": 1,
  "minamiyamashiro.kyoto.jp": 1,
  "miyazu.kyoto.jp": 1,
  "muko.kyoto.jp": 1,
  "nagaokakyo.kyoto.jp": 1,
  "nakagyo.kyoto.jp": 1,
  "nantan.kyoto.jp": 1,
  "oyamazaki.kyoto.jp": 1,
  "sakyo.kyoto.jp": 1,
  "seika.kyoto.jp": 1,
  "tanabe.kyoto.jp": 1,
  "uji.kyoto.jp": 1,
  "ujitawara.kyoto.jp": 1,
  "wazuka.kyoto.jp": 1,
  "yamashina.kyoto.jp": 1,
  "yawata.kyoto.jp": 1,
  "asahi.mie.jp": 1,
  "inabe.mie.jp": 1,
  "ise.mie.jp": 1,
  "kameyama.mie.jp": 1,
  "kawagoe.mie.jp": 1,
  "kiho.mie.jp": 1,
  "kisosaki.mie.jp": 1,
  "kiwa.mie.jp": 1,
  "komono.mie.jp": 1,
  "kumano.mie.jp": 1,
  "kuwana.mie.jp": 1,
  "matsusaka.mie.jp": 1,
  "meiwa.mie.jp": 1,
  "mihama.mie.jp": 1,
  "minamiise.mie.jp": 1,
  "misugi.mie.jp": 1,
  "miyama.mie.jp": 1,
  "nabari.mie.jp": 1,
  "shima.mie.jp": 1,
  "suzuka.mie.jp": 1,
  "tado.mie.jp": 1,
  "taiki.mie.jp": 1,
  "taki.mie.jp": 1,
  "tamaki.mie.jp": 1,
  "toba.mie.jp": 1,
  "tsu.mie.jp": 1,
  "udono.mie.jp": 1,
  "ureshino.mie.jp": 1,
  "watarai.mie.jp": 1,
  "yokkaichi.mie.jp": 1,
  "furukawa.miyagi.jp": 1,
  "higashimatsushima.miyagi.jp": 1,
  "ishinomaki.miyagi.jp": 1,
  "iwanuma.miyagi.jp": 1,
  "kakuda.miyagi.jp": 1,
  "kami.miyagi.jp": 1,
  "kawasaki.miyagi.jp": 1,
  "marumori.miyagi.jp": 1,
  "matsushima.miyagi.jp": 1,
  "minamisanriku.miyagi.jp": 1,
  "misato.miyagi.jp": 1,
  "murata.miyagi.jp": 1,
  "natori.miyagi.jp": 1,
  "ogawara.miyagi.jp": 1,
  "ohira.miyagi.jp": 1,
  "onagawa.miyagi.jp": 1,
  "osaki.miyagi.jp": 1,
  "rifu.miyagi.jp": 1,
  "semine.miyagi.jp": 1,
  "shibata.miyagi.jp": 1,
  "shichikashuku.miyagi.jp": 1,
  "shikama.miyagi.jp": 1,
  "shiogama.miyagi.jp": 1,
  "shiroishi.miyagi.jp": 1,
  "tagajo.miyagi.jp": 1,
  "taiwa.miyagi.jp": 1,
  "tome.miyagi.jp": 1,
  "tomiya.miyagi.jp": 1,
  "wakuya.miyagi.jp": 1,
  "watari.miyagi.jp": 1,
  "yamamoto.miyagi.jp": 1,
  "zao.miyagi.jp": 1,
  "aya.miyazaki.jp": 1,
  "ebino.miyazaki.jp": 1,
  "gokase.miyazaki.jp": 1,
  "hyuga.miyazaki.jp": 1,
  "kadogawa.miyazaki.jp": 1,
  "kawaminami.miyazaki.jp": 1,
  "kijo.miyazaki.jp": 1,
  "kitagawa.miyazaki.jp": 1,
  "kitakata.miyazaki.jp": 1,
  "kitaura.miyazaki.jp": 1,
  "kobayashi.miyazaki.jp": 1,
  "kunitomi.miyazaki.jp": 1,
  "kushima.miyazaki.jp": 1,
  "mimata.miyazaki.jp": 1,
  "miyakonojo.miyazaki.jp": 1,
  "miyazaki.miyazaki.jp": 1,
  "morotsuka.miyazaki.jp": 1,
  "nichinan.miyazaki.jp": 1,
  "nishimera.miyazaki.jp": 1,
  "nobeoka.miyazaki.jp": 1,
  "saito.miyazaki.jp": 1,
  "shiiba.miyazaki.jp": 1,
  "shintomi.miyazaki.jp": 1,
  "takaharu.miyazaki.jp": 1,
  "takanabe.miyazaki.jp": 1,
  "takazaki.miyazaki.jp": 1,
  "tsuno.miyazaki.jp": 1,
  "achi.nagano.jp": 1,
  "agematsu.nagano.jp": 1,
  "anan.nagano.jp": 1,
  "aoki.nagano.jp": 1,
  "asahi.nagano.jp": 1,
  "azumino.nagano.jp": 1,
  "chikuhoku.nagano.jp": 1,
  "chikuma.nagano.jp": 1,
  "chino.nagano.jp": 1,
  "fujimi.nagano.jp": 1,
  "hakuba.nagano.jp": 1,
  "hara.nagano.jp": 1,
  "hiraya.nagano.jp": 1,
  "iida.nagano.jp": 1,
  "iijima.nagano.jp": 1,
  "iiyama.nagano.jp": 1,
  "iizuna.nagano.jp": 1,
  "ikeda.nagano.jp": 1,
  "ikusaka.nagano.jp": 1,
  "ina.nagano.jp": 1,
  "karuizawa.nagano.jp": 1,
  "kawakami.nagano.jp": 1,
  "kiso.nagano.jp": 1,
  "kisofukushima.nagano.jp": 1,
  "kitaaiki.nagano.jp": 1,
  "komagane.nagano.jp": 1,
  "komoro.nagano.jp": 1,
  "matsukawa.nagano.jp": 1,
  "matsumoto.nagano.jp": 1,
  "miasa.nagano.jp": 1,
  "minamiaiki.nagano.jp": 1,
  "minamimaki.nagano.jp": 1,
  "minamiminowa.nagano.jp": 1,
  "minowa.nagano.jp": 1,
  "miyada.nagano.jp": 1,
  "miyota.nagano.jp": 1,
  "mochizuki.nagano.jp": 1,
  "nagano.nagano.jp": 1,
  "nagawa.nagano.jp": 1,
  "nagiso.nagano.jp": 1,
  "nakagawa.nagano.jp": 1,
  "nakano.nagano.jp": 1,
  "nozawaonsen.nagano.jp": 1,
  "obuse.nagano.jp": 1,
  "ogawa.nagano.jp": 1,
  "okaya.nagano.jp": 1,
  "omachi.nagano.jp": 1,
  "omi.nagano.jp": 1,
  "ookuwa.nagano.jp": 1,
  "ooshika.nagano.jp": 1,
  "otaki.nagano.jp": 1,
  "otari.nagano.jp": 1,
  "sakae.nagano.jp": 1,
  "sakaki.nagano.jp": 1,
  "saku.nagano.jp": 1,
  "sakuho.nagano.jp": 1,
  "shimosuwa.nagano.jp": 1,
  "shinanomachi.nagano.jp": 1,
  "shiojiri.nagano.jp": 1,
  "suwa.nagano.jp": 1,
  "suzaka.nagano.jp": 1,
  "takagi.nagano.jp": 1,
  "takamori.nagano.jp": 1,
  "takayama.nagano.jp": 1,
  "tateshina.nagano.jp": 1,
  "tatsuno.nagano.jp": 1,
  "togakushi.nagano.jp": 1,
  "togura.nagano.jp": 1,
  "tomi.nagano.jp": 1,
  "ueda.nagano.jp": 1,
  "wada.nagano.jp": 1,
  "yamagata.nagano.jp": 1,
  "yamanouchi.nagano.jp": 1,
  "yasaka.nagano.jp": 1,
  "yasuoka.nagano.jp": 1,
  "chijiwa.nagasaki.jp": 1,
  "futsu.nagasaki.jp": 1,
  "goto.nagasaki.jp": 1,
  "hasami.nagasaki.jp": 1,
  "hirado.nagasaki.jp": 1,
  "iki.nagasaki.jp": 1,
  "isahaya.nagasaki.jp": 1,
  "kawatana.nagasaki.jp": 1,
  "kuchinotsu.nagasaki.jp": 1,
  "matsuura.nagasaki.jp": 1,
  "nagasaki.nagasaki.jp": 1,
  "obama.nagasaki.jp": 1,
  "omura.nagasaki.jp": 1,
  "oseto.nagasaki.jp": 1,
  "saikai.nagasaki.jp": 1,
  "sasebo.nagasaki.jp": 1,
  "seihi.nagasaki.jp": 1,
  "shimabara.nagasaki.jp": 1,
  "shinkamigoto.nagasaki.jp": 1,
  "togitsu.nagasaki.jp": 1,
  "tsushima.nagasaki.jp": 1,
  "unzen.nagasaki.jp": 1,
  "ando.nara.jp": 1,
  "gose.nara.jp": 1,
  "heguri.nara.jp": 1,
  "higashiyoshino.nara.jp": 1,
  "ikaruga.nara.jp": 1,
  "ikoma.nara.jp": 1,
  "kamikitayama.nara.jp": 1,
  "kanmaki.nara.jp": 1,
  "kashiba.nara.jp": 1,
  "kashihara.nara.jp": 1,
  "katsuragi.nara.jp": 1,
  "kawai.nara.jp": 1,
  "kawakami.nara.jp": 1,
  "kawanishi.nara.jp": 1,
  "koryo.nara.jp": 1,
  "kurotaki.nara.jp": 1,
  "mitsue.nara.jp": 1,
  "miyake.nara.jp": 1,
  "nara.nara.jp": 1,
  "nosegawa.nara.jp": 1,
  "oji.nara.jp": 1,
  "ouda.nara.jp": 1,
  "oyodo.nara.jp": 1,
  "sakurai.nara.jp": 1,
  "sango.nara.jp": 1,
  "shimoichi.nara.jp": 1,
  "shimokitayama.nara.jp": 1,
  "shinjo.nara.jp": 1,
  "soni.nara.jp": 1,
  "takatori.nara.jp": 1,
  "tawaramoto.nara.jp": 1,
  "tenkawa.nara.jp": 1,
  "tenri.nara.jp": 1,
  "uda.nara.jp": 1,
  "yamatokoriyama.nara.jp": 1,
  "yamatotakada.nara.jp": 1,
  "yamazoe.nara.jp": 1,
  "yoshino.nara.jp": 1,
  "aga.niigata.jp": 1,
  "agano.niigata.jp": 1,
  "gosen.niigata.jp": 1,
  "itoigawa.niigata.jp": 1,
  "izumozaki.niigata.jp": 1,
  "joetsu.niigata.jp": 1,
  "kamo.niigata.jp": 1,
  "kariwa.niigata.jp": 1,
  "kashiwazaki.niigata.jp": 1,
  "minamiuonuma.niigata.jp": 1,
  "mitsuke.niigata.jp": 1,
  "muika.niigata.jp": 1,
  "murakami.niigata.jp": 1,
  "myoko.niigata.jp": 1,
  "nagaoka.niigata.jp": 1,
  "niigata.niigata.jp": 1,
  "ojiya.niigata.jp": 1,
  "omi.niigata.jp": 1,
  "sado.niigata.jp": 1,
  "sanjo.niigata.jp": 1,
  "seiro.niigata.jp": 1,
  "seirou.niigata.jp": 1,
  "sekikawa.niigata.jp": 1,
  "shibata.niigata.jp": 1,
  "tagami.niigata.jp": 1,
  "tainai.niigata.jp": 1,
  "tochio.niigata.jp": 1,
  "tokamachi.niigata.jp": 1,
  "tsubame.niigata.jp": 1,
  "tsunan.niigata.jp": 1,
  "uonuma.niigata.jp": 1,
  "yahiko.niigata.jp": 1,
  "yoita.niigata.jp": 1,
  "yuzawa.niigata.jp": 1,
  "beppu.oita.jp": 1,
  "bungoono.oita.jp": 1,
  "bungotakada.oita.jp": 1,
  "hasama.oita.jp": 1,
  "hiji.oita.jp": 1,
  "himeshima.oita.jp": 1,
  "hita.oita.jp": 1,
  "kamitsue.oita.jp": 1,
  "kokonoe.oita.jp": 1,
  "kuju.oita.jp": 1,
  "kunisaki.oita.jp": 1,
  "kusu.oita.jp": 1,
  "oita.oita.jp": 1,
  "saiki.oita.jp": 1,
  "taketa.oita.jp": 1,
  "tsukumi.oita.jp": 1,
  "usa.oita.jp": 1,
  "usuki.oita.jp": 1,
  "yufu.oita.jp": 1,
  "akaiwa.okayama.jp": 1,
  "asakuchi.okayama.jp": 1,
  "bizen.okayama.jp": 1,
  "hayashima.okayama.jp": 1,
  "ibara.okayama.jp": 1,
  "kagamino.okayama.jp": 1,
  "kasaoka.okayama.jp": 1,
  "kibichuo.okayama.jp": 1,
  "kumenan.okayama.jp": 1,
  "kurashiki.okayama.jp": 1,
  "maniwa.okayama.jp": 1,
  "misaki.okayama.jp": 1,
  "nagi.okayama.jp": 1,
  "niimi.okayama.jp": 1,
  "nishiawakura.okayama.jp": 1,
  "okayama.okayama.jp": 1,
  "satosho.okayama.jp": 1,
  "setouchi.okayama.jp": 1,
  "shinjo.okayama.jp": 1,
  "shoo.okayama.jp": 1,
  "soja.okayama.jp": 1,
  "takahashi.okayama.jp": 1,
  "tamano.okayama.jp": 1,
  "tsuyama.okayama.jp": 1,
  "wake.okayama.jp": 1,
  "yakage.okayama.jp": 1,
  "aguni.okinawa.jp": 1,
  "ginowan.okinawa.jp": 1,
  "ginoza.okinawa.jp": 1,
  "gushikami.okinawa.jp": 1,
  "haebaru.okinawa.jp": 1,
  "higashi.okinawa.jp": 1,
  "hirara.okinawa.jp": 1,
  "iheya.okinawa.jp": 1,
  "ishigaki.okinawa.jp": 1,
  "ishikawa.okinawa.jp": 1,
  "itoman.okinawa.jp": 1,
  "izena.okinawa.jp": 1,
  "kadena.okinawa.jp": 1,
  "kin.okinawa.jp": 1,
  "kitadaito.okinawa.jp": 1,
  "kitanakagusuku.okinawa.jp": 1,
  "kumejima.okinawa.jp": 1,
  "kunigami.okinawa.jp": 1,
  "minamidaito.okinawa.jp": 1,
  "motobu.okinawa.jp": 1,
  "nago.okinawa.jp": 1,
  "naha.okinawa.jp": 1,
  "nakagusuku.okinawa.jp": 1,
  "nakijin.okinawa.jp": 1,
  "nanjo.okinawa.jp": 1,
  "nishihara.okinawa.jp": 1,
  "ogimi.okinawa.jp": 1,
  "okinawa.okinawa.jp": 1,
  "onna.okinawa.jp": 1,
  "shimoji.okinawa.jp": 1,
  "taketomi.okinawa.jp": 1,
  "tarama.okinawa.jp": 1,
  "tokashiki.okinawa.jp": 1,
  "tomigusuku.okinawa.jp": 1,
  "tonaki.okinawa.jp": 1,
  "urasoe.okinawa.jp": 1,
  "uruma.okinawa.jp": 1,
  "yaese.okinawa.jp": 1,
  "yomitan.okinawa.jp": 1,
  "yonabaru.okinawa.jp": 1,
  "yonaguni.okinawa.jp": 1,
  "zamami.okinawa.jp": 1,
  "abeno.osaka.jp": 1,
  "chihayaakasaka.osaka.jp": 1,
  "chuo.osaka.jp": 1,
  "daito.osaka.jp": 1,
  "fujiidera.osaka.jp": 1,
  "habikino.osaka.jp": 1,
  "hannan.osaka.jp": 1,
  "higashiosaka.osaka.jp": 1,
  "higashisumiyoshi.osaka.jp": 1,
  "higashiyodogawa.osaka.jp": 1,
  "hirakata.osaka.jp": 1,
  "ibaraki.osaka.jp": 1,
  "ikeda.osaka.jp": 1,
  "izumi.osaka.jp": 1,
  "izumiotsu.osaka.jp": 1,
  "izumisano.osaka.jp": 1,
  "kadoma.osaka.jp": 1,
  "kaizuka.osaka.jp": 1,
  "kanan.osaka.jp": 1,
  "kashiwara.osaka.jp": 1,
  "katano.osaka.jp": 1,
  "kawachinagano.osaka.jp": 1,
  "kishiwada.osaka.jp": 1,
  "kita.osaka.jp": 1,
  "kumatori.osaka.jp": 1,
  "matsubara.osaka.jp": 1,
  "minato.osaka.jp": 1,
  "minoh.osaka.jp": 1,
  "misaki.osaka.jp": 1,
  "moriguchi.osaka.jp": 1,
  "neyagawa.osaka.jp": 1,
  "nishi.osaka.jp": 1,
  "nose.osaka.jp": 1,
  "osakasayama.osaka.jp": 1,
  "sakai.osaka.jp": 1,
  "sayama.osaka.jp": 1,
  "sennan.osaka.jp": 1,
  "settsu.osaka.jp": 1,
  "shijonawate.osaka.jp": 1,
  "shimamoto.osaka.jp": 1,
  "suita.osaka.jp": 1,
  "tadaoka.osaka.jp": 1,
  "taishi.osaka.jp": 1,
  "tajiri.osaka.jp": 1,
  "takaishi.osaka.jp": 1,
  "takatsuki.osaka.jp": 1,
  "tondabayashi.osaka.jp": 1,
  "toyonaka.osaka.jp": 1,
  "toyono.osaka.jp": 1,
  "yao.osaka.jp": 1,
  "ariake.saga.jp": 1,
  "arita.saga.jp": 1,
  "fukudomi.saga.jp": 1,
  "genkai.saga.jp": 1,
  "hamatama.saga.jp": 1,
  "hizen.saga.jp": 1,
  "imari.saga.jp": 1,
  "kamimine.saga.jp": 1,
  "kanzaki.saga.jp": 1,
  "karatsu.saga.jp": 1,
  "kashima.saga.jp": 1,
  "kitagata.saga.jp": 1,
  "kitahata.saga.jp": 1,
  "kiyama.saga.jp": 1,
  "kouhoku.saga.jp": 1,
  "kyuragi.saga.jp": 1,
  "nishiarita.saga.jp": 1,
  "ogi.saga.jp": 1,
  "omachi.saga.jp": 1,
  "ouchi.saga.jp": 1,
  "saga.saga.jp": 1,
  "shiroishi.saga.jp": 1,
  "taku.saga.jp": 1,
  "tara.saga.jp": 1,
  "tosu.saga.jp": 1,
  "yoshinogari.saga.jp": 1,
  "arakawa.saitama.jp": 1,
  "asaka.saitama.jp": 1,
  "chichibu.saitama.jp": 1,
  "fujimi.saitama.jp": 1,
  "fujimino.saitama.jp": 1,
  "fukaya.saitama.jp": 1,
  "hanno.saitama.jp": 1,
  "hanyu.saitama.jp": 1,
  "hasuda.saitama.jp": 1,
  "hatogaya.saitama.jp": 1,
  "hatoyama.saitama.jp": 1,
  "hidaka.saitama.jp": 1,
  "higashichichibu.saitama.jp": 1,
  "higashimatsuyama.saitama.jp": 1,
  "honjo.saitama.jp": 1,
  "ina.saitama.jp": 1,
  "iruma.saitama.jp": 1,
  "iwatsuki.saitama.jp": 1,
  "kamiizumi.saitama.jp": 1,
  "kamikawa.saitama.jp": 1,
  "kamisato.saitama.jp": 1,
  "kasukabe.saitama.jp": 1,
  "kawagoe.saitama.jp": 1,
  "kawaguchi.saitama.jp": 1,
  "kawajima.saitama.jp": 1,
  "kazo.saitama.jp": 1,
  "kitamoto.saitama.jp": 1,
  "koshigaya.saitama.jp": 1,
  "kounosu.saitama.jp": 1,
  "kuki.saitama.jp": 1,
  "kumagaya.saitama.jp": 1,
  "matsubushi.saitama.jp": 1,
  "minano.saitama.jp": 1,
  "misato.saitama.jp": 1,
  "miyashiro.saitama.jp": 1,
  "miyoshi.saitama.jp": 1,
  "moroyama.saitama.jp": 1,
  "nagatoro.saitama.jp": 1,
  "namegawa.saitama.jp": 1,
  "niiza.saitama.jp": 1,
  "ogano.saitama.jp": 1,
  "ogawa.saitama.jp": 1,
  "ogose.saitama.jp": 1,
  "okegawa.saitama.jp": 1,
  "omiya.saitama.jp": 1,
  "otaki.saitama.jp": 1,
  "ranzan.saitama.jp": 1,
  "ryokami.saitama.jp": 1,
  "saitama.saitama.jp": 1,
  "sakado.saitama.jp": 1,
  "satte.saitama.jp": 1,
  "sayama.saitama.jp": 1,
  "shiki.saitama.jp": 1,
  "shiraoka.saitama.jp": 1,
  "soka.saitama.jp": 1,
  "sugito.saitama.jp": 1,
  "toda.saitama.jp": 1,
  "tokigawa.saitama.jp": 1,
  "tokorozawa.saitama.jp": 1,
  "tsurugashima.saitama.jp": 1,
  "urawa.saitama.jp": 1,
  "warabi.saitama.jp": 1,
  "yashio.saitama.jp": 1,
  "yokoze.saitama.jp": 1,
  "yono.saitama.jp": 1,
  "yorii.saitama.jp": 1,
  "yoshida.saitama.jp": 1,
  "yoshikawa.saitama.jp": 1,
  "yoshimi.saitama.jp": 1,
  "aisho.shiga.jp": 1,
  "gamo.shiga.jp": 1,
  "higashiomi.shiga.jp": 1,
  "hikone.shiga.jp": 1,
  "koka.shiga.jp": 1,
  "konan.shiga.jp": 1,
  "kosei.shiga.jp": 1,
  "koto.shiga.jp": 1,
  "kusatsu.shiga.jp": 1,
  "maibara.shiga.jp": 1,
  "moriyama.shiga.jp": 1,
  "nagahama.shiga.jp": 1,
  "nishiazai.shiga.jp": 1,
  "notogawa.shiga.jp": 1,
  "omihachiman.shiga.jp": 1,
  "otsu.shiga.jp": 1,
  "ritto.shiga.jp": 1,
  "ryuoh.shiga.jp": 1,
  "takashima.shiga.jp": 1,
  "takatsuki.shiga.jp": 1,
  "torahime.shiga.jp": 1,
  "toyosato.shiga.jp": 1,
  "yasu.shiga.jp": 1,
  "akagi.shimane.jp": 1,
  "ama.shimane.jp": 1,
  "gotsu.shimane.jp": 1,
  "hamada.shimane.jp": 1,
  "higashiizumo.shimane.jp": 1,
  "hikawa.shimane.jp": 1,
  "hikimi.shimane.jp": 1,
  "izumo.shimane.jp": 1,
  "kakinoki.shimane.jp": 1,
  "masuda.shimane.jp": 1,
  "matsue.shimane.jp": 1,
  "misato.shimane.jp": 1,
  "nishinoshima.shimane.jp": 1,
  "ohda.shimane.jp": 1,
  "okinoshima.shimane.jp": 1,
  "okuizumo.shimane.jp": 1,
  "shimane.shimane.jp": 1,
  "tamayu.shimane.jp": 1,
  "tsuwano.shimane.jp": 1,
  "unnan.shimane.jp": 1,
  "yakumo.shimane.jp": 1,
  "yasugi.shimane.jp": 1,
  "yatsuka.shimane.jp": 1,
  "arai.shizuoka.jp": 1,
  "atami.shizuoka.jp": 1,
  "fuji.shizuoka.jp": 1,
  "fujieda.shizuoka.jp": 1,
  "fujikawa.shizuoka.jp": 1,
  "fujinomiya.shizuoka.jp": 1,
  "fukuroi.shizuoka.jp": 1,
  "gotemba.shizuoka.jp": 1,
  "haibara.shizuoka.jp": 1,
  "hamamatsu.shizuoka.jp": 1,
  "higashiizu.shizuoka.jp": 1,
  "ito.shizuoka.jp": 1,
  "iwata.shizuoka.jp": 1,
  "izu.shizuoka.jp": 1,
  "izunokuni.shizuoka.jp": 1,
  "kakegawa.shizuoka.jp": 1,
  "kannami.shizuoka.jp": 1,
  "kawanehon.shizuoka.jp": 1,
  "kawazu.shizuoka.jp": 1,
  "kikugawa.shizuoka.jp": 1,
  "kosai.shizuoka.jp": 1,
  "makinohara.shizuoka.jp": 1,
  "matsuzaki.shizuoka.jp": 1,
  "minamiizu.shizuoka.jp": 1,
  "mishima.shizuoka.jp": 1,
  "morimachi.shizuoka.jp": 1,
  "nishiizu.shizuoka.jp": 1,
  "numazu.shizuoka.jp": 1,
  "omaezaki.shizuoka.jp": 1,
  "shimada.shizuoka.jp": 1,
  "shimizu.shizuoka.jp": 1,
  "shimoda.shizuoka.jp": 1,
  "shizuoka.shizuoka.jp": 1,
  "susono.shizuoka.jp": 1,
  "yaizu.shizuoka.jp": 1,
  "yoshida.shizuoka.jp": 1,
  "ashikaga.tochigi.jp": 1,
  "bato.tochigi.jp": 1,
  "haga.tochigi.jp": 1,
  "ichikai.tochigi.jp": 1,
  "iwafune.tochigi.jp": 1,
  "kaminokawa.tochigi.jp": 1,
  "kanuma.tochigi.jp": 1,
  "karasuyama.tochigi.jp": 1,
  "kuroiso.tochigi.jp": 1,
  "mashiko.tochigi.jp": 1,
  "mibu.tochigi.jp": 1,
  "moka.tochigi.jp": 1,
  "motegi.tochigi.jp": 1,
  "nasu.tochigi.jp": 1,
  "nasushiobara.tochigi.jp": 1,
  "nikko.tochigi.jp": 1,
  "nishikata.tochigi.jp": 1,
  "nogi.tochigi.jp": 1,
  "ohira.tochigi.jp": 1,
  "ohtawara.tochigi.jp": 1,
  "oyama.tochigi.jp": 1,
  "sakura.tochigi.jp": 1,
  "sano.tochigi.jp": 1,
  "shimotsuke.tochigi.jp": 1,
  "shioya.tochigi.jp": 1,
  "takanezawa.tochigi.jp": 1,
  "tochigi.tochigi.jp": 1,
  "tsuga.tochigi.jp": 1,
  "ujiie.tochigi.jp": 1,
  "utsunomiya.tochigi.jp": 1,
  "yaita.tochigi.jp": 1,
  "aizumi.tokushima.jp": 1,
  "anan.tokushima.jp": 1,
  "ichiba.tokushima.jp": 1,
  "itano.tokushima.jp": 1,
  "kainan.tokushima.jp": 1,
  "komatsushima.tokushima.jp": 1,
  "matsushige.tokushima.jp": 1,
  "mima.tokushima.jp": 1,
  "minami.tokushima.jp": 1,
  "miyoshi.tokushima.jp": 1,
  "mugi.tokushima.jp": 1,
  "nakagawa.tokushima.jp": 1,
  "naruto.tokushima.jp": 1,
  "sanagochi.tokushima.jp": 1,
  "shishikui.tokushima.jp": 1,
  "tokushima.tokushima.jp": 1,
  "wajiki.tokushima.jp": 1,
  "adachi.tokyo.jp": 1,
  "akiruno.tokyo.jp": 1,
  "akishima.tokyo.jp": 1,
  "aogashima.tokyo.jp": 1,
  "arakawa.tokyo.jp": 1,
  "bunkyo.tokyo.jp": 1,
  "chiyoda.tokyo.jp": 1,
  "chofu.tokyo.jp": 1,
  "chuo.tokyo.jp": 1,
  "edogawa.tokyo.jp": 1,
  "fuchu.tokyo.jp": 1,
  "fussa.tokyo.jp": 1,
  "hachijo.tokyo.jp": 1,
  "hachioji.tokyo.jp": 1,
  "hamura.tokyo.jp": 1,
  "higashikurume.tokyo.jp": 1,
  "higashimurayama.tokyo.jp": 1,
  "higashiyamato.tokyo.jp": 1,
  "hino.tokyo.jp": 1,
  "hinode.tokyo.jp": 1,
  "hinohara.tokyo.jp": 1,
  "inagi.tokyo.jp": 1,
  "itabashi.tokyo.jp": 1,
  "katsushika.tokyo.jp": 1,
  "kita.tokyo.jp": 1,
  "kiyose.tokyo.jp": 1,
  "kodaira.tokyo.jp": 1,
  "koganei.tokyo.jp": 1,
  "kokubunji.tokyo.jp": 1,
  "komae.tokyo.jp": 1,
  "koto.tokyo.jp": 1,
  "kouzushima.tokyo.jp": 1,
  "kunitachi.tokyo.jp": 1,
  "machida.tokyo.jp": 1,
  "meguro.tokyo.jp": 1,
  "minato.tokyo.jp": 1,
  "mitaka.tokyo.jp": 1,
  "mizuho.tokyo.jp": 1,
  "musashimurayama.tokyo.jp": 1,
  "musashino.tokyo.jp": 1,
  "nakano.tokyo.jp": 1,
  "nerima.tokyo.jp": 1,
  "ogasawara.tokyo.jp": 1,
  "okutama.tokyo.jp": 1,
  "ome.tokyo.jp": 1,
  "oshima.tokyo.jp": 1,
  "ota.tokyo.jp": 1,
  "setagaya.tokyo.jp": 1,
  "shibuya.tokyo.jp": 1,
  "shinagawa.tokyo.jp": 1,
  "shinjuku.tokyo.jp": 1,
  "suginami.tokyo.jp": 1,
  "sumida.tokyo.jp": 1,
  "tachikawa.tokyo.jp": 1,
  "taito.tokyo.jp": 1,
  "tama.tokyo.jp": 1,
  "toshima.tokyo.jp": 1,
  "chizu.tottori.jp": 1,
  "hino.tottori.jp": 1,
  "kawahara.tottori.jp": 1,
  "koge.tottori.jp": 1,
  "kotoura.tottori.jp": 1,
  "misasa.tottori.jp": 1,
  "nanbu.tottori.jp": 1,
  "nichinan.tottori.jp": 1,
  "sakaiminato.tottori.jp": 1,
  "tottori.tottori.jp": 1,
  "wakasa.tottori.jp": 1,
  "yazu.tottori.jp": 1,
  "yonago.tottori.jp": 1,
  "asahi.toyama.jp": 1,
  "fuchu.toyama.jp": 1,
  "fukumitsu.toyama.jp": 1,
  "funahashi.toyama.jp": 1,
  "himi.toyama.jp": 1,
  "imizu.toyama.jp": 1,
  "inami.toyama.jp": 1,
  "johana.toyama.jp": 1,
  "kamiichi.toyama.jp": 1,
  "kurobe.toyama.jp": 1,
  "nakaniikawa.toyama.jp": 1,
  "namerikawa.toyama.jp": 1,
  "nanto.toyama.jp": 1,
  "nyuzen.toyama.jp": 1,
  "oyabe.toyama.jp": 1,
  "taira.toyama.jp": 1,
  "takaoka.toyama.jp": 1,
  "tateyama.toyama.jp": 1,
  "toga.toyama.jp": 1,
  "tonami.toyama.jp": 1,
  "toyama.toyama.jp": 1,
  "unazuki.toyama.jp": 1,
  "uozu.toyama.jp": 1,
  "yamada.toyama.jp": 1,
  "arida.wakayama.jp": 1,
  "aridagawa.wakayama.jp": 1,
  "gobo.wakayama.jp": 1,
  "hashimoto.wakayama.jp": 1,
  "hidaka.wakayama.jp": 1,
  "hirogawa.wakayama.jp": 1,
  "inami.wakayama.jp": 1,
  "iwade.wakayama.jp": 1,
  "kainan.wakayama.jp": 1,
  "kamitonda.wakayama.jp": 1,
  "katsuragi.wakayama.jp": 1,
  "kimino.wakayama.jp": 1,
  "kinokawa.wakayama.jp": 1,
  "kitayama.wakayama.jp": 1,
  "koya.wakayama.jp": 1,
  "koza.wakayama.jp": 1,
  "kozagawa.wakayama.jp": 1,
  "kudoyama.wakayama.jp": 1,
  "kushimoto.wakayama.jp": 1,
  "mihama.wakayama.jp": 1,
  "misato.wakayama.jp": 1,
  "nachikatsuura.wakayama.jp": 1,
  "shingu.wakayama.jp": 1,
  "shirahama.wakayama.jp": 1,
  "taiji.wakayama.jp": 1,
  "tanabe.wakayama.jp": 1,
  "wakayama.wakayama.jp": 1,
  "yuasa.wakayama.jp": 1,
  "yura.wakayama.jp": 1,
  "asahi.yamagata.jp": 1,
  "funagata.yamagata.jp": 1,
  "higashine.yamagata.jp": 1,
  "iide.yamagata.jp": 1,
  "kahoku.yamagata.jp": 1,
  "kaminoyama.yamagata.jp": 1,
  "kaneyama.yamagata.jp": 1,
  "kawanishi.yamagata.jp": 1,
  "mamurogawa.yamagata.jp": 1,
  "mikawa.yamagata.jp": 1,
  "murayama.yamagata.jp": 1,
  "nagai.yamagata.jp": 1,
  "nakayama.yamagata.jp": 1,
  "nanyo.yamagata.jp": 1,
  "nishikawa.yamagata.jp": 1,
  "obanazawa.yamagata.jp": 1,
  "oe.yamagata.jp": 1,
  "oguni.yamagata.jp": 1,
  "ohkura.yamagata.jp": 1,
  "oishida.yamagata.jp": 1,
  "sagae.yamagata.jp": 1,
  "sakata.yamagata.jp": 1,
  "sakegawa.yamagata.jp": 1,
  "shinjo.yamagata.jp": 1,
  "shirataka.yamagata.jp": 1,
  "shonai.yamagata.jp": 1,
  "takahata.yamagata.jp": 1,
  "tendo.yamagata.jp": 1,
  "tozawa.yamagata.jp": 1,
  "tsuruoka.yamagata.jp": 1,
  "yamagata.yamagata.jp": 1,
  "yamanobe.yamagata.jp": 1,
  "yonezawa.yamagata.jp": 1,
  "yuza.yamagata.jp": 1,
  "abu.yamaguchi.jp": 1,
  "hagi.yamaguchi.jp": 1,
  "hikari.yamaguchi.jp": 1,
  "hofu.yamaguchi.jp": 1,
  "iwakuni.yamaguchi.jp": 1,
  "kudamatsu.yamaguchi.jp": 1,
  "mitou.yamaguchi.jp": 1,
  "nagato.yamaguchi.jp": 1,
  "oshima.yamaguchi.jp": 1,
  "shimonoseki.yamaguchi.jp": 1,
  "shunan.yamaguchi.jp": 1,
  "tabuse.yamaguchi.jp": 1,
  "tokuyama.yamaguchi.jp": 1,
  "toyota.yamaguchi.jp": 1,
  "ube.yamaguchi.jp": 1,
  "yuu.yamaguchi.jp": 1,
  "chuo.yamanashi.jp": 1,
  "doshi.yamanashi.jp": 1,
  "fuefuki.yamanashi.jp": 1,
  "fujikawa.yamanashi.jp": 1,
  "fujikawaguchiko.yamanashi.jp": 1,
  "fujiyoshida.yamanashi.jp": 1,
  "hayakawa.yamanashi.jp": 1,
  "hokuto.yamanashi.jp": 1,
  "ichikawamisato.yamanashi.jp": 1,
  "kai.yamanashi.jp": 1,
  "kofu.yamanashi.jp": 1,
  "koshu.yamanashi.jp": 1,
  "kosuge.yamanashi.jp": 1,
  "minami-alps.yamanashi.jp": 1,
  "minobu.yamanashi.jp": 1,
  "nakamichi.yamanashi.jp": 1,
  "nanbu.yamanashi.jp": 1,
  "narusawa.yamanashi.jp": 1,
  "nirasaki.yamanashi.jp": 1,
  "nishikatsura.yamanashi.jp": 1,
  "oshino.yamanashi.jp": 1,
  "otsuki.yamanashi.jp": 1,
  "showa.yamanashi.jp": 1,
  "tabayama.yamanashi.jp": 1,
  "tsuru.yamanashi.jp": 1,
  "uenohara.yamanashi.jp": 1,
  "yamanakako.yamanashi.jp": 1,
  "yamanashi.yamanashi.jp": 1,
  "ke": 1,
  "ac.ke": 1,
  "co.ke": 1,
  "go.ke": 1,
  "info.ke": 1,
  "me.ke": 1,
  "mobi.ke": 1,
  "ne.ke": 1,
  "or.ke": 1,
  "sc.ke": 1,
  "kg": 1,
  "org.kg": 1,
  "net.kg": 1,
  "com.kg": 1,
  "edu.kg": 1,
  "gov.kg": 1,
  "mil.kg": 1,
  "kh": 2,
  "ki": 1,
  "edu.ki": 1,
  "biz.ki": 1,
  "net.ki": 1,
  "org.ki": 1,
  "gov.ki": 1,
  "info.ki": 1,
  "com.ki": 1,
  "km": 1,
  "org.km": 1,
  "nom.km": 1,
  "gov.km": 1,
  "prd.km": 1,
  "tm.km": 1,
  "edu.km": 1,
  "mil.km": 1,
  "ass.km": 1,
  "com.km": 1,
  "coop.km": 1,
  "asso.km": 1,
  "presse.km": 1,
  "medecin.km": 1,
  "notaires.km": 1,
  "pharmaciens.km": 1,
  "veterinaire.km": 1,
  "gouv.km": 1,
  "kn": 1,
  "net.kn": 1,
  "org.kn": 1,
  "edu.kn": 1,
  "gov.kn": 1,
  "kp": 1,
  "com.kp": 1,
  "edu.kp": 1,
  "gov.kp": 1,
  "org.kp": 1,
  "rep.kp": 1,
  "tra.kp": 1,
  "kr": 1,
  "ac.kr": 1,
  "co.kr": 1,
  "es.kr": 1,
  "go.kr": 1,
  "hs.kr": 1,
  "kg.kr": 1,
  "mil.kr": 1,
  "ms.kr": 1,
  "ne.kr": 1,
  "or.kr": 1,
  "pe.kr": 1,
  "re.kr": 1,
  "sc.kr": 1,
  "busan.kr": 1,
  "chungbuk.kr": 1,
  "chungnam.kr": 1,
  "daegu.kr": 1,
  "daejeon.kr": 1,
  "gangwon.kr": 1,
  "gwangju.kr": 1,
  "gyeongbuk.kr": 1,
  "gyeonggi.kr": 1,
  "gyeongnam.kr": 1,
  "incheon.kr": 1,
  "jeju.kr": 1,
  "jeonbuk.kr": 1,
  "jeonnam.kr": 1,
  "seoul.kr": 1,
  "ulsan.kr": 1,
  "kw": 1,
  "com.kw": 1,
  "edu.kw": 1,
  "emb.kw": 1,
  "gov.kw": 1,
  "ind.kw": 1,
  "net.kw": 1,
  "org.kw": 1,
  "ky": 1,
  "com.ky": 1,
  "edu.ky": 1,
  "net.ky": 1,
  "org.ky": 1,
  "kz": 1,
  "org.kz": 1,
  "edu.kz": 1,
  "net.kz": 1,
  "gov.kz": 1,
  "mil.kz": 1,
  "com.kz": 1,
  "la": 1,
  "int.la": 1,
  "net.la": 1,
  "info.la": 1,
  "edu.la": 1,
  "gov.la": 1,
  "per.la": 1,
  "com.la": 1,
  "org.la": 1,
  "lb": 1,
  "com.lb": 1,
  "edu.lb": 1,
  "gov.lb": 1,
  "net.lb": 1,
  "org.lb": 1,
  "lc": 1,
  "com.lc": 1,
  "net.lc": 1,
  "co.lc": 1,
  "org.lc": 1,
  "edu.lc": 1,
  "gov.lc": 1,
  "li": 1,
  "lk": 1,
  "gov.lk": 1,
  "sch.lk": 1,
  "net.lk": 1,
  "int.lk": 1,
  "com.lk": 1,
  "org.lk": 1,
  "edu.lk": 1,
  "ngo.lk": 1,
  "soc.lk": 1,
  "web.lk": 1,
  "ltd.lk": 1,
  "assn.lk": 1,
  "grp.lk": 1,
  "hotel.lk": 1,
  "ac.lk": 1,
  "lr": 1,
  "com.lr": 1,
  "edu.lr": 1,
  "gov.lr": 1,
  "org.lr": 1,
  "net.lr": 1,
  "ls": 1,
  "ac.ls": 1,
  "biz.ls": 1,
  "co.ls": 1,
  "edu.ls": 1,
  "gov.ls": 1,
  "info.ls": 1,
  "net.ls": 1,
  "org.ls": 1,
  "sc.ls": 1,
  "lt": 1,
  "gov.lt": 1,
  "lu": 1,
  "lv": 1,
  "com.lv": 1,
  "edu.lv": 1,
  "gov.lv": 1,
  "org.lv": 1,
  "mil.lv": 1,
  "id.lv": 1,
  "net.lv": 1,
  "asn.lv": 1,
  "conf.lv": 1,
  "ly": 1,
  "com.ly": 1,
  "net.ly": 1,
  "gov.ly": 1,
  "plc.ly": 1,
  "edu.ly": 1,
  "sch.ly": 1,
  "med.ly": 1,
  "org.ly": 1,
  "id.ly": 1,
  "ma": 1,
  "co.ma": 1,
  "net.ma": 1,
  "gov.ma": 1,
  "org.ma": 1,
  "ac.ma": 1,
  "press.ma": 1,
  "mc": 1,
  "tm.mc": 1,
  "asso.mc": 1,
  "md": 1,
  "me": 1,
  "co.me": 1,
  "net.me": 1,
  "org.me": 1,
  "edu.me": 1,
  "ac.me": 1,
  "gov.me": 1,
  "its.me": 1,
  "priv.me": 1,
  "mg": 1,
  "org.mg": 1,
  "nom.mg": 1,
  "gov.mg": 1,
  "prd.mg": 1,
  "tm.mg": 1,
  "edu.mg": 1,
  "mil.mg": 1,
  "com.mg": 1,
  "co.mg": 1,
  "mh": 1,
  "mil": 1,
  "mk": 1,
  "com.mk": 1,
  "org.mk": 1,
  "net.mk": 1,
  "edu.mk": 1,
  "gov.mk": 1,
  "inf.mk": 1,
  "name.mk": 1,
  "ml": 1,
  "com.ml": 1,
  "edu.ml": 1,
  "gouv.ml": 1,
  "gov.ml": 1,
  "net.ml": 1,
  "org.ml": 1,
  "presse.ml": 1,
  "mm": 2,
  "mn": 1,
  "gov.mn": 1,
  "edu.mn": 1,
  "org.mn": 1,
  "mo": 1,
  "com.mo": 1,
  "net.mo": 1,
  "org.mo": 1,
  "edu.mo": 1,
  "gov.mo": 1,
  "mobi": 1,
  "mp": 1,
  "mq": 1,
  "mr": 1,
  "gov.mr": 1,
  "ms": 1,
  "com.ms": 1,
  "edu.ms": 1,
  "gov.ms": 1,
  "net.ms": 1,
  "org.ms": 1,
  "mt": 1,
  "com.mt": 1,
  "edu.mt": 1,
  "net.mt": 1,
  "org.mt": 1,
  "mu": 1,
  "com.mu": 1,
  "net.mu": 1,
  "org.mu": 1,
  "gov.mu": 1,
  "ac.mu": 1,
  "co.mu": 1,
  "or.mu": 1,
  "museum": 1,
  "mv": 1,
  "aero.mv": 1,
  "biz.mv": 1,
  "com.mv": 1,
  "coop.mv": 1,
  "edu.mv": 1,
  "gov.mv": 1,
  "info.mv": 1,
  "int.mv": 1,
  "mil.mv": 1,
  "museum.mv": 1,
  "name.mv": 1,
  "net.mv": 1,
  "org.mv": 1,
  "pro.mv": 1,
  "mw": 1,
  "ac.mw": 1,
  "biz.mw": 1,
  "co.mw": 1,
  "com.mw": 1,
  "coop.mw": 1,
  "edu.mw": 1,
  "gov.mw": 1,
  "int.mw": 1,
  "museum.mw": 1,
  "net.mw": 1,
  "org.mw": 1,
  "mx": 1,
  "com.mx": 1,
  "org.mx": 1,
  "gob.mx": 1,
  "edu.mx": 1,
  "net.mx": 1,
  "my": 1,
  "biz.my": 1,
  "com.my": 1,
  "edu.my": 1,
  "gov.my": 1,
  "mil.my": 1,
  "name.my": 1,
  "net.my": 1,
  "org.my": 1,
  "mz": 1,
  "ac.mz": 1,
  "adv.mz": 1,
  "co.mz": 1,
  "edu.mz": 1,
  "gov.mz": 1,
  "mil.mz": 1,
  "net.mz": 1,
  "org.mz": 1,
  "na": 1,
  "info.na": 1,
  "pro.na": 1,
  "name.na": 1,
  "school.na": 1,
  "or.na": 1,
  "dr.na": 1,
  "us.na": 1,
  "mx.na": 1,
  "ca.na": 1,
  "in.na": 1,
  "cc.na": 1,
  "tv.na": 1,
  "ws.na": 1,
  "mobi.na": 1,
  "co.na": 1,
  "com.na": 1,
  "org.na": 1,
  "name": 1,
  "nc": 1,
  "asso.nc": 1,
  "nom.nc": 1,
  "ne": 1,
  "net": 1,
  "nf": 1,
  "com.nf": 1,
  "net.nf": 1,
  "per.nf": 1,
  "rec.nf": 1,
  "web.nf": 1,
  "arts.nf": 1,
  "firm.nf": 1,
  "info.nf": 1,
  "other.nf": 1,
  "store.nf": 1,
  "ng": 1,
  "com.ng": 1,
  "edu.ng": 1,
  "gov.ng": 1,
  "i.ng": 1,
  "mil.ng": 1,
  "mobi.ng": 1,
  "name.ng": 1,
  "net.ng": 1,
  "org.ng": 1,
  "sch.ng": 1,
  "ni": 1,
  "ac.ni": 1,
  "biz.ni": 1,
  "co.ni": 1,
  "com.ni": 1,
  "edu.ni": 1,
  "gob.ni": 1,
  "in.ni": 1,
  "info.ni": 1,
  "int.ni": 1,
  "mil.ni": 1,
  "net.ni": 1,
  "nom.ni": 1,
  "org.ni": 1,
  "web.ni": 1,
  "nl": 1,
  "no": 1,
  "fhs.no": 1,
  "vgs.no": 1,
  "fylkesbibl.no": 1,
  "folkebibl.no": 1,
  "museum.no": 1,
  "idrett.no": 1,
  "priv.no": 1,
  "mil.no": 1,
  "stat.no": 1,
  "dep.no": 1,
  "kommune.no": 1,
  "herad.no": 1,
  "aa.no": 1,
  "ah.no": 1,
  "bu.no": 1,
  "fm.no": 1,
  "hl.no": 1,
  "hm.no": 1,
  "jan-mayen.no": 1,
  "mr.no": 1,
  "nl.no": 1,
  "nt.no": 1,
  "of.no": 1,
  "ol.no": 1,
  "oslo.no": 1,
  "rl.no": 1,
  "sf.no": 1,
  "st.no": 1,
  "svalbard.no": 1,
  "tm.no": 1,
  "tr.no": 1,
  "va.no": 1,
  "vf.no": 1,
  "gs.aa.no": 1,
  "gs.ah.no": 1,
  "gs.bu.no": 1,
  "gs.fm.no": 1,
  "gs.hl.no": 1,
  "gs.hm.no": 1,
  "gs.jan-mayen.no": 1,
  "gs.mr.no": 1,
  "gs.nl.no": 1,
  "gs.nt.no": 1,
  "gs.of.no": 1,
  "gs.ol.no": 1,
  "gs.oslo.no": 1,
  "gs.rl.no": 1,
  "gs.sf.no": 1,
  "gs.st.no": 1,
  "gs.svalbard.no": 1,
  "gs.tm.no": 1,
  "gs.tr.no": 1,
  "gs.va.no": 1,
  "gs.vf.no": 1,
  "akrehamn.no": 1,
  "xn--krehamn-dxa.no": 1,
  "algard.no": 1,
  "xn--lgrd-poac.no": 1,
  "arna.no": 1,
  "brumunddal.no": 1,
  "bryne.no": 1,
  "bronnoysund.no": 1,
  "xn--brnnysund-m8ac.no": 1,
  "drobak.no": 1,
  "xn--drbak-wua.no": 1,
  "egersund.no": 1,
  "fetsund.no": 1,
  "floro.no": 1,
  "xn--flor-jra.no": 1,
  "fredrikstad.no": 1,
  "hokksund.no": 1,
  "honefoss.no": 1,
  "xn--hnefoss-q1a.no": 1,
  "jessheim.no": 1,
  "jorpeland.no": 1,
  "xn--jrpeland-54a.no": 1,
  "kirkenes.no": 1,
  "kopervik.no": 1,
  "krokstadelva.no": 1,
  "langevag.no": 1,
  "xn--langevg-jxa.no": 1,
  "leirvik.no": 1,
  "mjondalen.no": 1,
  "xn--mjndalen-64a.no": 1,
  "mo-i-rana.no": 1,
  "mosjoen.no": 1,
  "xn--mosjen-eya.no": 1,
  "nesoddtangen.no": 1,
  "orkanger.no": 1,
  "osoyro.no": 1,
  "xn--osyro-wua.no": 1,
  "raholt.no": 1,
  "xn--rholt-mra.no": 1,
  "sandnessjoen.no": 1,
  "xn--sandnessjen-ogb.no": 1,
  "skedsmokorset.no": 1,
  "slattum.no": 1,
  "spjelkavik.no": 1,
  "stathelle.no": 1,
  "stavern.no": 1,
  "stjordalshalsen.no": 1,
  "xn--stjrdalshalsen-sqb.no": 1,
  "tananger.no": 1,
  "tranby.no": 1,
  "vossevangen.no": 1,
  "afjord.no": 1,
  "xn--fjord-lra.no": 1,
  "agdenes.no": 1,
  "al.no": 1,
  "xn--l-1fa.no": 1,
  "alesund.no": 1,
  "xn--lesund-hua.no": 1,
  "alstahaug.no": 1,
  "alta.no": 1,
  "xn--lt-liac.no": 1,
  "alaheadju.no": 1,
  "xn--laheadju-7ya.no": 1,
  "alvdal.no": 1,
  "amli.no": 1,
  "xn--mli-tla.no": 1,
  "amot.no": 1,
  "xn--mot-tla.no": 1,
  "andebu.no": 1,
  "andoy.no": 1,
  "xn--andy-ira.no": 1,
  "andasuolo.no": 1,
  "ardal.no": 1,
  "xn--rdal-poa.no": 1,
  "aremark.no": 1,
  "arendal.no": 1,
  "xn--s-1fa.no": 1,
  "aseral.no": 1,
  "xn--seral-lra.no": 1,
  "asker.no": 1,
  "askim.no": 1,
  "askvoll.no": 1,
  "askoy.no": 1,
  "xn--asky-ira.no": 1,
  "asnes.no": 1,
  "xn--snes-poa.no": 1,
  "audnedaln.no": 1,
  "aukra.no": 1,
  "aure.no": 1,
  "aurland.no": 1,
  "aurskog-holand.no": 1,
  "xn--aurskog-hland-jnb.no": 1,
  "austevoll.no": 1,
  "austrheim.no": 1,
  "averoy.no": 1,
  "xn--avery-yua.no": 1,
  "balestrand.no": 1,
  "ballangen.no": 1,
  "balat.no": 1,
  "xn--blt-elab.no": 1,
  "balsfjord.no": 1,
  "bahccavuotna.no": 1,
  "xn--bhccavuotna-k7a.no": 1,
  "bamble.no": 1,
  "bardu.no": 1,
  "beardu.no": 1,
  "beiarn.no": 1,
  "bajddar.no": 1,
  "xn--bjddar-pta.no": 1,
  "baidar.no": 1,
  "xn--bidr-5nac.no": 1,
  "berg.no": 1,
  "bergen.no": 1,
  "berlevag.no": 1,
  "xn--berlevg-jxa.no": 1,
  "bearalvahki.no": 1,
  "xn--bearalvhki-y4a.no": 1,
  "bindal.no": 1,
  "birkenes.no": 1,
  "bjarkoy.no": 1,
  "xn--bjarky-fya.no": 1,
  "bjerkreim.no": 1,
  "bjugn.no": 1,
  "bodo.no": 1,
  "xn--bod-2na.no": 1,
  "badaddja.no": 1,
  "xn--bdddj-mrabd.no": 1,
  "budejju.no": 1,
  "bokn.no": 1,
  "bremanger.no": 1,
  "bronnoy.no": 1,
  "xn--brnny-wuac.no": 1,
  "bygland.no": 1,
  "bykle.no": 1,
  "barum.no": 1,
  "xn--brum-voa.no": 1,
  "bo.telemark.no": 1,
  "xn--b-5ga.telemark.no": 1,
  "bo.nordland.no": 1,
  "xn--b-5ga.nordland.no": 1,
  "bievat.no": 1,
  "xn--bievt-0qa.no": 1,
  "bomlo.no": 1,
  "xn--bmlo-gra.no": 1,
  "batsfjord.no": 1,
  "xn--btsfjord-9za.no": 1,
  "bahcavuotna.no": 1,
  "xn--bhcavuotna-s4a.no": 1,
  "dovre.no": 1,
  "drammen.no": 1,
  "drangedal.no": 1,
  "dyroy.no": 1,
  "xn--dyry-ira.no": 1,
  "donna.no": 1,
  "xn--dnna-gra.no": 1,
  "eid.no": 1,
  "eidfjord.no": 1,
  "eidsberg.no": 1,
  "eidskog.no": 1,
  "eidsvoll.no": 1,
  "eigersund.no": 1,
  "elverum.no": 1,
  "enebakk.no": 1,
  "engerdal.no": 1,
  "etne.no": 1,
  "etnedal.no": 1,
  "evenes.no": 1,
  "evenassi.no": 1,
  "xn--eveni-0qa01ga.no": 1,
  "evje-og-hornnes.no": 1,
  "farsund.no": 1,
  "fauske.no": 1,
  "fuossko.no": 1,
  "fuoisku.no": 1,
  "fedje.no": 1,
  "fet.no": 1,
  "finnoy.no": 1,
  "xn--finny-yua.no": 1,
  "fitjar.no": 1,
  "fjaler.no": 1,
  "fjell.no": 1,
  "flakstad.no": 1,
  "flatanger.no": 1,
  "flekkefjord.no": 1,
  "flesberg.no": 1,
  "flora.no": 1,
  "fla.no": 1,
  "xn--fl-zia.no": 1,
  "folldal.no": 1,
  "forsand.no": 1,
  "fosnes.no": 1,
  "frei.no": 1,
  "frogn.no": 1,
  "froland.no": 1,
  "frosta.no": 1,
  "frana.no": 1,
  "xn--frna-woa.no": 1,
  "froya.no": 1,
  "xn--frya-hra.no": 1,
  "fusa.no": 1,
  "fyresdal.no": 1,
  "forde.no": 1,
  "xn--frde-gra.no": 1,
  "gamvik.no": 1,
  "gangaviika.no": 1,
  "xn--ggaviika-8ya47h.no": 1,
  "gaular.no": 1,
  "gausdal.no": 1,
  "gildeskal.no": 1,
  "xn--gildeskl-g0a.no": 1,
  "giske.no": 1,
  "gjemnes.no": 1,
  "gjerdrum.no": 1,
  "gjerstad.no": 1,
  "gjesdal.no": 1,
  "gjovik.no": 1,
  "xn--gjvik-wua.no": 1,
  "gloppen.no": 1,
  "gol.no": 1,
  "gran.no": 1,
  "grane.no": 1,
  "granvin.no": 1,
  "gratangen.no": 1,
  "grimstad.no": 1,
  "grong.no": 1,
  "kraanghke.no": 1,
  "xn--kranghke-b0a.no": 1,
  "grue.no": 1,
  "gulen.no": 1,
  "hadsel.no": 1,
  "halden.no": 1,
  "halsa.no": 1,
  "hamar.no": 1,
  "hamaroy.no": 1,
  "habmer.no": 1,
  "xn--hbmer-xqa.no": 1,
  "hapmir.no": 1,
  "xn--hpmir-xqa.no": 1,
  "hammerfest.no": 1,
  "hammarfeasta.no": 1,
  "xn--hmmrfeasta-s4ac.no": 1,
  "haram.no": 1,
  "hareid.no": 1,
  "harstad.no": 1,
  "hasvik.no": 1,
  "aknoluokta.no": 1,
  "xn--koluokta-7ya57h.no": 1,
  "hattfjelldal.no": 1,
  "aarborte.no": 1,
  "haugesund.no": 1,
  "hemne.no": 1,
  "hemnes.no": 1,
  "hemsedal.no": 1,
  "heroy.more-og-romsdal.no": 1,
  "xn--hery-ira.xn--mre-og-romsdal-qqb.no": 1,
  "heroy.nordland.no": 1,
  "xn--hery-ira.nordland.no": 1,
  "hitra.no": 1,
  "hjartdal.no": 1,
  "hjelmeland.no": 1,
  "hobol.no": 1,
  "xn--hobl-ira.no": 1,
  "hof.no": 1,
  "hol.no": 1,
  "hole.no": 1,
  "holmestrand.no": 1,
  "holtalen.no": 1,
  "xn--holtlen-hxa.no": 1,
  "hornindal.no": 1,
  "horten.no": 1,
  "hurdal.no": 1,
  "hurum.no": 1,
  "hvaler.no": 1,
  "hyllestad.no": 1,
  "hagebostad.no": 1,
  "xn--hgebostad-g3a.no": 1,
  "hoyanger.no": 1,
  "xn--hyanger-q1a.no": 1,
  "hoylandet.no": 1,
  "xn--hylandet-54a.no": 1,
  "ha.no": 1,
  "xn--h-2fa.no": 1,
  "ibestad.no": 1,
  "inderoy.no": 1,
  "xn--indery-fya.no": 1,
  "iveland.no": 1,
  "jevnaker.no": 1,
  "jondal.no": 1,
  "jolster.no": 1,
  "xn--jlster-bya.no": 1,
  "karasjok.no": 1,
  "karasjohka.no": 1,
  "xn--krjohka-hwab49j.no": 1,
  "karlsoy.no": 1,
  "galsa.no": 1,
  "xn--gls-elac.no": 1,
  "karmoy.no": 1,
  "xn--karmy-yua.no": 1,
  "kautokeino.no": 1,
  "guovdageaidnu.no": 1,
  "klepp.no": 1,
  "klabu.no": 1,
  "xn--klbu-woa.no": 1,
  "kongsberg.no": 1,
  "kongsvinger.no": 1,
  "kragero.no": 1,
  "xn--krager-gya.no": 1,
  "kristiansand.no": 1,
  "kristiansund.no": 1,
  "krodsherad.no": 1,
  "xn--krdsherad-m8a.no": 1,
  "kvalsund.no": 1,
  "rahkkeravju.no": 1,
  "xn--rhkkervju-01af.no": 1,
  "kvam.no": 1,
  "kvinesdal.no": 1,
  "kvinnherad.no": 1,
  "kviteseid.no": 1,
  "kvitsoy.no": 1,
  "xn--kvitsy-fya.no": 1,
  "kvafjord.no": 1,
  "xn--kvfjord-nxa.no": 1,
  "giehtavuoatna.no": 1,
  "kvanangen.no": 1,
  "xn--kvnangen-k0a.no": 1,
  "navuotna.no": 1,
  "xn--nvuotna-hwa.no": 1,
  "kafjord.no": 1,
  "xn--kfjord-iua.no": 1,
  "gaivuotna.no": 1,
  "xn--givuotna-8ya.no": 1,
  "larvik.no": 1,
  "lavangen.no": 1,
  "lavagis.no": 1,
  "loabat.no": 1,
  "xn--loabt-0qa.no": 1,
  "lebesby.no": 1,
  "davvesiida.no": 1,
  "leikanger.no": 1,
  "leirfjord.no": 1,
  "leka.no": 1,
  "leksvik.no": 1,
  "lenvik.no": 1,
  "leangaviika.no": 1,
  "xn--leagaviika-52b.no": 1,
  "lesja.no": 1,
  "levanger.no": 1,
  "lier.no": 1,
  "lierne.no": 1,
  "lillehammer.no": 1,
  "lillesand.no": 1,
  "lindesnes.no": 1,
  "lindas.no": 1,
  "xn--linds-pra.no": 1,
  "lom.no": 1,
  "loppa.no": 1,
  "lahppi.no": 1,
  "xn--lhppi-xqa.no": 1,
  "lund.no": 1,
  "lunner.no": 1,
  "luroy.no": 1,
  "xn--lury-ira.no": 1,
  "luster.no": 1,
  "lyngdal.no": 1,
  "lyngen.no": 1,
  "ivgu.no": 1,
  "lardal.no": 1,
  "lerdal.no": 1,
  "xn--lrdal-sra.no": 1,
  "lodingen.no": 1,
  "xn--ldingen-q1a.no": 1,
  "lorenskog.no": 1,
  "xn--lrenskog-54a.no": 1,
  "loten.no": 1,
  "xn--lten-gra.no": 1,
  "malvik.no": 1,
  "masoy.no": 1,
  "xn--msy-ula0h.no": 1,
  "muosat.no": 1,
  "xn--muost-0qa.no": 1,
  "mandal.no": 1,
  "marker.no": 1,
  "marnardal.no": 1,
  "masfjorden.no": 1,
  "meland.no": 1,
  "meldal.no": 1,
  "melhus.no": 1,
  "meloy.no": 1,
  "xn--mely-ira.no": 1,
  "meraker.no": 1,
  "xn--merker-kua.no": 1,
  "moareke.no": 1,
  "xn--moreke-jua.no": 1,
  "midsund.no": 1,
  "midtre-gauldal.no": 1,
  "modalen.no": 1,
  "modum.no": 1,
  "molde.no": 1,
  "moskenes.no": 1,
  "moss.no": 1,
  "mosvik.no": 1,
  "malselv.no": 1,
  "xn--mlselv-iua.no": 1,
  "malatvuopmi.no": 1,
  "xn--mlatvuopmi-s4a.no": 1,
  "namdalseid.no": 1,
  "aejrie.no": 1,
  "namsos.no": 1,
  "namsskogan.no": 1,
  "naamesjevuemie.no": 1,
  "xn--nmesjevuemie-tcba.no": 1,
  "laakesvuemie.no": 1,
  "nannestad.no": 1,
  "narvik.no": 1,
  "narviika.no": 1,
  "naustdal.no": 1,
  "nedre-eiker.no": 1,
  "nes.akershus.no": 1,
  "nes.buskerud.no": 1,
  "nesna.no": 1,
  "nesodden.no": 1,
  "nesseby.no": 1,
  "unjarga.no": 1,
  "xn--unjrga-rta.no": 1,
  "nesset.no": 1,
  "nissedal.no": 1,
  "nittedal.no": 1,
  "nord-aurdal.no": 1,
  "nord-fron.no": 1,
  "nord-odal.no": 1,
  "norddal.no": 1,
  "nordkapp.no": 1,
  "davvenjarga.no": 1,
  "xn--davvenjrga-y4a.no": 1,
  "nordre-land.no": 1,
  "nordreisa.no": 1,
  "raisa.no": 1,
  "xn--risa-5na.no": 1,
  "nore-og-uvdal.no": 1,
  "notodden.no": 1,
  "naroy.no": 1,
  "xn--nry-yla5g.no": 1,
  "notteroy.no": 1,
  "xn--nttery-byae.no": 1,
  "odda.no": 1,
  "oksnes.no": 1,
  "xn--ksnes-uua.no": 1,
  "oppdal.no": 1,
  "oppegard.no": 1,
  "xn--oppegrd-ixa.no": 1,
  "orkdal.no": 1,
  "orland.no": 1,
  "xn--rland-uua.no": 1,
  "orskog.no": 1,
  "xn--rskog-uua.no": 1,
  "orsta.no": 1,
  "xn--rsta-fra.no": 1,
  "os.hedmark.no": 1,
  "os.hordaland.no": 1,
  "osen.no": 1,
  "osteroy.no": 1,
  "xn--ostery-fya.no": 1,
  "ostre-toten.no": 1,
  "xn--stre-toten-zcb.no": 1,
  "overhalla.no": 1,
  "ovre-eiker.no": 1,
  "xn--vre-eiker-k8a.no": 1,
  "oyer.no": 1,
  "xn--yer-zna.no": 1,
  "oygarden.no": 1,
  "xn--ygarden-p1a.no": 1,
  "oystre-slidre.no": 1,
  "xn--ystre-slidre-ujb.no": 1,
  "porsanger.no": 1,
  "porsangu.no": 1,
  "xn--porsgu-sta26f.no": 1,
  "porsgrunn.no": 1,
  "radoy.no": 1,
  "xn--rady-ira.no": 1,
  "rakkestad.no": 1,
  "rana.no": 1,
  "ruovat.no": 1,
  "randaberg.no": 1,
  "rauma.no": 1,
  "rendalen.no": 1,
  "rennebu.no": 1,
  "rennesoy.no": 1,
  "xn--rennesy-v1a.no": 1,
  "rindal.no": 1,
  "ringebu.no": 1,
  "ringerike.no": 1,
  "ringsaker.no": 1,
  "rissa.no": 1,
  "risor.no": 1,
  "xn--risr-ira.no": 1,
  "roan.no": 1,
  "rollag.no": 1,
  "rygge.no": 1,
  "ralingen.no": 1,
  "xn--rlingen-mxa.no": 1,
  "rodoy.no": 1,
  "xn--rdy-0nab.no": 1,
  "romskog.no": 1,
  "xn--rmskog-bya.no": 1,
  "roros.no": 1,
  "xn--rros-gra.no": 1,
  "rost.no": 1,
  "xn--rst-0na.no": 1,
  "royken.no": 1,
  "xn--ryken-vua.no": 1,
  "royrvik.no": 1,
  "xn--ryrvik-bya.no": 1,
  "rade.no": 1,
  "xn--rde-ula.no": 1,
  "salangen.no": 1,
  "siellak.no": 1,
  "saltdal.no": 1,
  "salat.no": 1,
  "xn--slt-elab.no": 1,
  "xn--slat-5na.no": 1,
  "samnanger.no": 1,
  "sande.more-og-romsdal.no": 1,
  "sande.xn--mre-og-romsdal-qqb.no": 1,
  "sande.vestfold.no": 1,
  "sandefjord.no": 1,
  "sandnes.no": 1,
  "sandoy.no": 1,
  "xn--sandy-yua.no": 1,
  "sarpsborg.no": 1,
  "sauda.no": 1,
  "sauherad.no": 1,
  "sel.no": 1,
  "selbu.no": 1,
  "selje.no": 1,
  "seljord.no": 1,
  "sigdal.no": 1,
  "siljan.no": 1,
  "sirdal.no": 1,
  "skaun.no": 1,
  "skedsmo.no": 1,
  "ski.no": 1,
  "skien.no": 1,
  "skiptvet.no": 1,
  "skjervoy.no": 1,
  "xn--skjervy-v1a.no": 1,
  "skierva.no": 1,
  "xn--skierv-uta.no": 1,
  "skjak.no": 1,
  "xn--skjk-soa.no": 1,
  "skodje.no": 1,
  "skanland.no": 1,
  "xn--sknland-fxa.no": 1,
  "skanit.no": 1,
  "xn--sknit-yqa.no": 1,
  "smola.no": 1,
  "xn--smla-hra.no": 1,
  "snillfjord.no": 1,
  "snasa.no": 1,
  "xn--snsa-roa.no": 1,
  "snoasa.no": 1,
  "snaase.no": 1,
  "xn--snase-nra.no": 1,
  "sogndal.no": 1,
  "sokndal.no": 1,
  "sola.no": 1,
  "solund.no": 1,
  "songdalen.no": 1,
  "sortland.no": 1,
  "spydeberg.no": 1,
  "stange.no": 1,
  "stavanger.no": 1,
  "steigen.no": 1,
  "steinkjer.no": 1,
  "stjordal.no": 1,
  "xn--stjrdal-s1a.no": 1,
  "stokke.no": 1,
  "stor-elvdal.no": 1,
  "stord.no": 1,
  "stordal.no": 1,
  "storfjord.no": 1,
  "omasvuotna.no": 1,
  "strand.no": 1,
  "stranda.no": 1,
  "stryn.no": 1,
  "sula.no": 1,
  "suldal.no": 1,
  "sund.no": 1,
  "sunndal.no": 1,
  "surnadal.no": 1,
  "sveio.no": 1,
  "svelvik.no": 1,
  "sykkylven.no": 1,
  "sogne.no": 1,
  "xn--sgne-gra.no": 1,
  "somna.no": 1,
  "xn--smna-gra.no": 1,
  "sondre-land.no": 1,
  "xn--sndre-land-0cb.no": 1,
  "sor-aurdal.no": 1,
  "xn--sr-aurdal-l8a.no": 1,
  "sor-fron.no": 1,
  "xn--sr-fron-q1a.no": 1,
  "sor-odal.no": 1,
  "xn--sr-odal-q1a.no": 1,
  "sor-varanger.no": 1,
  "xn--sr-varanger-ggb.no": 1,
  "matta-varjjat.no": 1,
  "xn--mtta-vrjjat-k7af.no": 1,
  "sorfold.no": 1,
  "xn--srfold-bya.no": 1,
  "sorreisa.no": 1,
  "xn--srreisa-q1a.no": 1,
  "sorum.no": 1,
  "xn--srum-gra.no": 1,
  "tana.no": 1,
  "deatnu.no": 1,
  "time.no": 1,
  "tingvoll.no": 1,
  "tinn.no": 1,
  "tjeldsund.no": 1,
  "dielddanuorri.no": 1,
  "tjome.no": 1,
  "xn--tjme-hra.no": 1,
  "tokke.no": 1,
  "tolga.no": 1,
  "torsken.no": 1,
  "tranoy.no": 1,
  "xn--trany-yua.no": 1,
  "tromso.no": 1,
  "xn--troms-zua.no": 1,
  "tromsa.no": 1,
  "romsa.no": 1,
  "trondheim.no": 1,
  "troandin.no": 1,
  "trysil.no": 1,
  "trana.no": 1,
  "xn--trna-woa.no": 1,
  "trogstad.no": 1,
  "xn--trgstad-r1a.no": 1,
  "tvedestrand.no": 1,
  "tydal.no": 1,
  "tynset.no": 1,
  "tysfjord.no": 1,
  "divtasvuodna.no": 1,
  "divttasvuotna.no": 1,
  "tysnes.no": 1,
  "tysvar.no": 1,
  "xn--tysvr-vra.no": 1,
  "tonsberg.no": 1,
  "xn--tnsberg-q1a.no": 1,
  "ullensaker.no": 1,
  "ullensvang.no": 1,
  "ulvik.no": 1,
  "utsira.no": 1,
  "vadso.no": 1,
  "xn--vads-jra.no": 1,
  "cahcesuolo.no": 1,
  "xn--hcesuolo-7ya35b.no": 1,
  "vaksdal.no": 1,
  "valle.no": 1,
  "vang.no": 1,
  "vanylven.no": 1,
  "vardo.no": 1,
  "xn--vard-jra.no": 1,
  "varggat.no": 1,
  "xn--vrggt-xqad.no": 1,
  "vefsn.no": 1,
  "vaapste.no": 1,
  "vega.no": 1,
  "vegarshei.no": 1,
  "xn--vegrshei-c0a.no": 1,
  "vennesla.no": 1,
  "verdal.no": 1,
  "verran.no": 1,
  "vestby.no": 1,
  "vestnes.no": 1,
  "vestre-slidre.no": 1,
  "vestre-toten.no": 1,
  "vestvagoy.no": 1,
  "xn--vestvgy-ixa6o.no": 1,
  "vevelstad.no": 1,
  "vik.no": 1,
  "vikna.no": 1,
  "vindafjord.no": 1,
  "volda.no": 1,
  "voss.no": 1,
  "varoy.no": 1,
  "xn--vry-yla5g.no": 1,
  "vagan.no": 1,
  "xn--vgan-qoa.no": 1,
  "voagat.no": 1,
  "vagsoy.no": 1,
  "xn--vgsy-qoa0j.no": 1,
  "vaga.no": 1,
  "xn--vg-yiab.no": 1,
  "valer.ostfold.no": 1,
  "xn--vler-qoa.xn--stfold-9xa.no": 1,
  "valer.hedmark.no": 1,
  "xn--vler-qoa.hedmark.no": 1,
  "np": 2,
  "nr": 1,
  "biz.nr": 1,
  "info.nr": 1,
  "gov.nr": 1,
  "edu.nr": 1,
  "org.nr": 1,
  "net.nr": 1,
  "com.nr": 1,
  "nu": 1,
  "nz": 1,
  "ac.nz": 1,
  "co.nz": 1,
  "cri.nz": 1,
  "geek.nz": 1,
  "gen.nz": 1,
  "govt.nz": 1,
  "health.nz": 1,
  "iwi.nz": 1,
  "kiwi.nz": 1,
  "maori.nz": 1,
  "mil.nz": 1,
  "xn--mori-qsa.nz": 1,
  "net.nz": 1,
  "org.nz": 1,
  "parliament.nz": 1,
  "school.nz": 1,
  "om": 1,
  "co.om": 1,
  "com.om": 1,
  "edu.om": 1,
  "gov.om": 1,
  "med.om": 1,
  "museum.om": 1,
  "net.om": 1,
  "org.om": 1,
  "pro.om": 1,
  "onion": 1,
  "org": 1,
  "pa": 1,
  "ac.pa": 1,
  "gob.pa": 1,
  "com.pa": 1,
  "org.pa": 1,
  "sld.pa": 1,
  "edu.pa": 1,
  "net.pa": 1,
  "ing.pa": 1,
  "abo.pa": 1,
  "med.pa": 1,
  "nom.pa": 1,
  "pe": 1,
  "edu.pe": 1,
  "gob.pe": 1,
  "nom.pe": 1,
  "mil.pe": 1,
  "org.pe": 1,
  "com.pe": 1,
  "net.pe": 1,
  "pf": 1,
  "com.pf": 1,
  "org.pf": 1,
  "edu.pf": 1,
  "pg": 2,
  "ph": 1,
  "com.ph": 1,
  "net.ph": 1,
  "org.ph": 1,
  "gov.ph": 1,
  "edu.ph": 1,
  "ngo.ph": 1,
  "mil.ph": 1,
  "i.ph": 1,
  "pk": 1,
  "com.pk": 1,
  "net.pk": 1,
  "edu.pk": 1,
  "org.pk": 1,
  "fam.pk": 1,
  "biz.pk": 1,
  "web.pk": 1,
  "gov.pk": 1,
  "gob.pk": 1,
  "gok.pk": 1,
  "gon.pk": 1,
  "gop.pk": 1,
  "gos.pk": 1,
  "info.pk": 1,
  "pl": 1,
  "com.pl": 1,
  "net.pl": 1,
  "org.pl": 1,
  "aid.pl": 1,
  "agro.pl": 1,
  "atm.pl": 1,
  "auto.pl": 1,
  "biz.pl": 1,
  "edu.pl": 1,
  "gmina.pl": 1,
  "gsm.pl": 1,
  "info.pl": 1,
  "mail.pl": 1,
  "miasta.pl": 1,
  "media.pl": 1,
  "mil.pl": 1,
  "nieruchomosci.pl": 1,
  "nom.pl": 1,
  "pc.pl": 1,
  "powiat.pl": 1,
  "priv.pl": 1,
  "realestate.pl": 1,
  "rel.pl": 1,
  "sex.pl": 1,
  "shop.pl": 1,
  "sklep.pl": 1,
  "sos.pl": 1,
  "szkola.pl": 1,
  "targi.pl": 1,
  "tm.pl": 1,
  "tourism.pl": 1,
  "travel.pl": 1,
  "turystyka.pl": 1,
  "gov.pl": 1,
  "ap.gov.pl": 1,
  "griw.gov.pl": 1,
  "ic.gov.pl": 1,
  "is.gov.pl": 1,
  "kmpsp.gov.pl": 1,
  "konsulat.gov.pl": 1,
  "kppsp.gov.pl": 1,
  "kwp.gov.pl": 1,
  "kwpsp.gov.pl": 1,
  "mup.gov.pl": 1,
  "mw.gov.pl": 1,
  "oia.gov.pl": 1,
  "oirm.gov.pl": 1,
  "oke.gov.pl": 1,
  "oow.gov.pl": 1,
  "oschr.gov.pl": 1,
  "oum.gov.pl": 1,
  "pa.gov.pl": 1,
  "pinb.gov.pl": 1,
  "piw.gov.pl": 1,
  "po.gov.pl": 1,
  "pr.gov.pl": 1,
  "psp.gov.pl": 1,
  "psse.gov.pl": 1,
  "pup.gov.pl": 1,
  "rzgw.gov.pl": 1,
  "sa.gov.pl": 1,
  "sdn.gov.pl": 1,
  "sko.gov.pl": 1,
  "so.gov.pl": 1,
  "sr.gov.pl": 1,
  "starostwo.gov.pl": 1,
  "ug.gov.pl": 1,
  "ugim.gov.pl": 1,
  "um.gov.pl": 1,
  "umig.gov.pl": 1,
  "upow.gov.pl": 1,
  "uppo.gov.pl": 1,
  "us.gov.pl": 1,
  "uw.gov.pl": 1,
  "uzs.gov.pl": 1,
  "wif.gov.pl": 1,
  "wiih.gov.pl": 1,
  "winb.gov.pl": 1,
  "wios.gov.pl": 1,
  "witd.gov.pl": 1,
  "wiw.gov.pl": 1,
  "wkz.gov.pl": 1,
  "wsa.gov.pl": 1,
  "wskr.gov.pl": 1,
  "wsse.gov.pl": 1,
  "wuoz.gov.pl": 1,
  "wzmiuw.gov.pl": 1,
  "zp.gov.pl": 1,
  "zpisdn.gov.pl": 1,
  "augustow.pl": 1,
  "babia-gora.pl": 1,
  "bedzin.pl": 1,
  "beskidy.pl": 1,
  "bialowieza.pl": 1,
  "bialystok.pl": 1,
  "bielawa.pl": 1,
  "bieszczady.pl": 1,
  "boleslawiec.pl": 1,
  "bydgoszcz.pl": 1,
  "bytom.pl": 1,
  "cieszyn.pl": 1,
  "czeladz.pl": 1,
  "czest.pl": 1,
  "dlugoleka.pl": 1,
  "elblag.pl": 1,
  "elk.pl": 1,
  "glogow.pl": 1,
  "gniezno.pl": 1,
  "gorlice.pl": 1,
  "grajewo.pl": 1,
  "ilawa.pl": 1,
  "jaworzno.pl": 1,
  "jelenia-gora.pl": 1,
  "jgora.pl": 1,
  "kalisz.pl": 1,
  "kazimierz-dolny.pl": 1,
  "karpacz.pl": 1,
  "kartuzy.pl": 1,
  "kaszuby.pl": 1,
  "katowice.pl": 1,
  "kepno.pl": 1,
  "ketrzyn.pl": 1,
  "klodzko.pl": 1,
  "kobierzyce.pl": 1,
  "kolobrzeg.pl": 1,
  "konin.pl": 1,
  "konskowola.pl": 1,
  "kutno.pl": 1,
  "lapy.pl": 1,
  "lebork.pl": 1,
  "legnica.pl": 1,
  "lezajsk.pl": 1,
  "limanowa.pl": 1,
  "lomza.pl": 1,
  "lowicz.pl": 1,
  "lubin.pl": 1,
  "lukow.pl": 1,
  "malbork.pl": 1,
  "malopolska.pl": 1,
  "mazowsze.pl": 1,
  "mazury.pl": 1,
  "mielec.pl": 1,
  "mielno.pl": 1,
  "mragowo.pl": 1,
  "naklo.pl": 1,
  "nowaruda.pl": 1,
  "nysa.pl": 1,
  "olawa.pl": 1,
  "olecko.pl": 1,
  "olkusz.pl": 1,
  "olsztyn.pl": 1,
  "opoczno.pl": 1,
  "opole.pl": 1,
  "ostroda.pl": 1,
  "ostroleka.pl": 1,
  "ostrowiec.pl": 1,
  "ostrowwlkp.pl": 1,
  "pila.pl": 1,
  "pisz.pl": 1,
  "podhale.pl": 1,
  "podlasie.pl": 1,
  "polkowice.pl": 1,
  "pomorze.pl": 1,
  "pomorskie.pl": 1,
  "prochowice.pl": 1,
  "pruszkow.pl": 1,
  "przeworsk.pl": 1,
  "pulawy.pl": 1,
  "radom.pl": 1,
  "rawa-maz.pl": 1,
  "rybnik.pl": 1,
  "rzeszow.pl": 1,
  "sanok.pl": 1,
  "sejny.pl": 1,
  "slask.pl": 1,
  "slupsk.pl": 1,
  "sosnowiec.pl": 1,
  "stalowa-wola.pl": 1,
  "skoczow.pl": 1,
  "starachowice.pl": 1,
  "stargard.pl": 1,
  "suwalki.pl": 1,
  "swidnica.pl": 1,
  "swiebodzin.pl": 1,
  "swinoujscie.pl": 1,
  "szczecin.pl": 1,
  "szczytno.pl": 1,
  "tarnobrzeg.pl": 1,
  "tgory.pl": 1,
  "turek.pl": 1,
  "tychy.pl": 1,
  "ustka.pl": 1,
  "walbrzych.pl": 1,
  "warmia.pl": 1,
  "warszawa.pl": 1,
  "waw.pl": 1,
  "wegrow.pl": 1,
  "wielun.pl": 1,
  "wlocl.pl": 1,
  "wloclawek.pl": 1,
  "wodzislaw.pl": 1,
  "wolomin.pl": 1,
  "wroclaw.pl": 1,
  "zachpomor.pl": 1,
  "zagan.pl": 1,
  "zarow.pl": 1,
  "zgora.pl": 1,
  "zgorzelec.pl": 1,
  "pm": 1,
  "pn": 1,
  "gov.pn": 1,
  "co.pn": 1,
  "org.pn": 1,
  "edu.pn": 1,
  "net.pn": 1,
  "post": 1,
  "pr": 1,
  "com.pr": 1,
  "net.pr": 1,
  "org.pr": 1,
  "gov.pr": 1,
  "edu.pr": 1,
  "isla.pr": 1,
  "pro.pr": 1,
  "biz.pr": 1,
  "info.pr": 1,
  "name.pr": 1,
  "est.pr": 1,
  "prof.pr": 1,
  "ac.pr": 1,
  "pro": 1,
  "aaa.pro": 1,
  "aca.pro": 1,
  "acct.pro": 1,
  "avocat.pro": 1,
  "bar.pro": 1,
  "cpa.pro": 1,
  "eng.pro": 1,
  "jur.pro": 1,
  "law.pro": 1,
  "med.pro": 1,
  "recht.pro": 1,
  "ps": 1,
  "edu.ps": 1,
  "gov.ps": 1,
  "sec.ps": 1,
  "plo.ps": 1,
  "com.ps": 1,
  "org.ps": 1,
  "net.ps": 1,
  "pt": 1,
  "net.pt": 1,
  "gov.pt": 1,
  "org.pt": 1,
  "edu.pt": 1,
  "int.pt": 1,
  "publ.pt": 1,
  "com.pt": 1,
  "nome.pt": 1,
  "pw": 1,
  "co.pw": 1,
  "ne.pw": 1,
  "or.pw": 1,
  "ed.pw": 1,
  "go.pw": 1,
  "belau.pw": 1,
  "py": 1,
  "com.py": 1,
  "coop.py": 1,
  "edu.py": 1,
  "gov.py": 1,
  "mil.py": 1,
  "net.py": 1,
  "org.py": 1,
  "qa": 1,
  "com.qa": 1,
  "edu.qa": 1,
  "gov.qa": 1,
  "mil.qa": 1,
  "name.qa": 1,
  "net.qa": 1,
  "org.qa": 1,
  "sch.qa": 1,
  "re": 1,
  "asso.re": 1,
  "com.re": 1,
  "nom.re": 1,
  "ro": 1,
  "arts.ro": 1,
  "com.ro": 1,
  "firm.ro": 1,
  "info.ro": 1,
  "nom.ro": 1,
  "nt.ro": 1,
  "org.ro": 1,
  "rec.ro": 1,
  "store.ro": 1,
  "tm.ro": 1,
  "www.ro": 1,
  "rs": 1,
  "ac.rs": 1,
  "co.rs": 1,
  "edu.rs": 1,
  "gov.rs": 1,
  "in.rs": 1,
  "org.rs": 1,
  "ru": 1,
  "rw": 1,
  "ac.rw": 1,
  "co.rw": 1,
  "coop.rw": 1,
  "gov.rw": 1,
  "mil.rw": 1,
  "net.rw": 1,
  "org.rw": 1,
  "sa": 1,
  "com.sa": 1,
  "net.sa": 1,
  "org.sa": 1,
  "gov.sa": 1,
  "med.sa": 1,
  "pub.sa": 1,
  "edu.sa": 1,
  "sch.sa": 1,
  "sb": 1,
  "com.sb": 1,
  "edu.sb": 1,
  "gov.sb": 1,
  "net.sb": 1,
  "org.sb": 1,
  "sc": 1,
  "com.sc": 1,
  "gov.sc": 1,
  "net.sc": 1,
  "org.sc": 1,
  "edu.sc": 1,
  "sd": 1,
  "com.sd": 1,
  "net.sd": 1,
  "org.sd": 1,
  "edu.sd": 1,
  "med.sd": 1,
  "tv.sd": 1,
  "gov.sd": 1,
  "info.sd": 1,
  "se": 1,
  "a.se": 1,
  "ac.se": 1,
  "b.se": 1,
  "bd.se": 1,
  "brand.se": 1,
  "c.se": 1,
  "d.se": 1,
  "e.se": 1,
  "f.se": 1,
  "fh.se": 1,
  "fhsk.se": 1,
  "fhv.se": 1,
  "g.se": 1,
  "h.se": 1,
  "i.se": 1,
  "k.se": 1,
  "komforb.se": 1,
  "kommunalforbund.se": 1,
  "komvux.se": 1,
  "l.se": 1,
  "lanbib.se": 1,
  "m.se": 1,
  "n.se": 1,
  "naturbruksgymn.se": 1,
  "o.se": 1,
  "org.se": 1,
  "p.se": 1,
  "parti.se": 1,
  "pp.se": 1,
  "press.se": 1,
  "r.se": 1,
  "s.se": 1,
  "t.se": 1,
  "tm.se": 1,
  "u.se": 1,
  "w.se": 1,
  "x.se": 1,
  "y.se": 1,
  "z.se": 1,
  "sg": 1,
  "com.sg": 1,
  "net.sg": 1,
  "org.sg": 1,
  "gov.sg": 1,
  "edu.sg": 1,
  "per.sg": 1,
  "sh": 1,
  "com.sh": 1,
  "net.sh": 1,
  "gov.sh": 1,
  "org.sh": 1,
  "mil.sh": 1,
  "si": 1,
  "sj": 1,
  "sk": 1,
  "sl": 1,
  "com.sl": 1,
  "net.sl": 1,
  "edu.sl": 1,
  "gov.sl": 1,
  "org.sl": 1,
  "sm": 1,
  "sn": 1,
  "art.sn": 1,
  "com.sn": 1,
  "edu.sn": 1,
  "gouv.sn": 1,
  "org.sn": 1,
  "perso.sn": 1,
  "univ.sn": 1,
  "so": 1,
  "com.so": 1,
  "edu.so": 1,
  "gov.so": 1,
  "me.so": 1,
  "net.so": 1,
  "org.so": 1,
  "sr": 1,
  "ss": 1,
  "biz.ss": 1,
  "com.ss": 1,
  "edu.ss": 1,
  "gov.ss": 1,
  "me.ss": 1,
  "net.ss": 1,
  "org.ss": 1,
  "sch.ss": 1,
  "st": 1,
  "co.st": 1,
  "com.st": 1,
  "consulado.st": 1,
  "edu.st": 1,
  "embaixada.st": 1,
  "mil.st": 1,
  "net.st": 1,
  "org.st": 1,
  "principe.st": 1,
  "saotome.st": 1,
  "store.st": 1,
  "su": 1,
  "sv": 1,
  "com.sv": 1,
  "edu.sv": 1,
  "gob.sv": 1,
  "org.sv": 1,
  "red.sv": 1,
  "sx": 1,
  "gov.sx": 1,
  "sy": 1,
  "edu.sy": 1,
  "gov.sy": 1,
  "net.sy": 1,
  "mil.sy": 1,
  "com.sy": 1,
  "org.sy": 1,
  "sz": 1,
  "co.sz": 1,
  "ac.sz": 1,
  "org.sz": 1,
  "tc": 1,
  "td": 1,
  "tel": 1,
  "tf": 1,
  "tg": 1,
  "th": 1,
  "ac.th": 1,
  "co.th": 1,
  "go.th": 1,
  "in.th": 1,
  "mi.th": 1,
  "net.th": 1,
  "or.th": 1,
  "tj": 1,
  "ac.tj": 1,
  "biz.tj": 1,
  "co.tj": 1,
  "com.tj": 1,
  "edu.tj": 1,
  "go.tj": 1,
  "gov.tj": 1,
  "int.tj": 1,
  "mil.tj": 1,
  "name.tj": 1,
  "net.tj": 1,
  "nic.tj": 1,
  "org.tj": 1,
  "test.tj": 1,
  "web.tj": 1,
  "tk": 1,
  "tl": 1,
  "gov.tl": 1,
  "tm": 1,
  "com.tm": 1,
  "co.tm": 1,
  "org.tm": 1,
  "net.tm": 1,
  "nom.tm": 1,
  "gov.tm": 1,
  "mil.tm": 1,
  "edu.tm": 1,
  "tn": 1,
  "com.tn": 1,
  "ens.tn": 1,
  "fin.tn": 1,
  "gov.tn": 1,
  "ind.tn": 1,
  "info.tn": 1,
  "intl.tn": 1,
  "mincom.tn": 1,
  "nat.tn": 1,
  "net.tn": 1,
  "org.tn": 1,
  "perso.tn": 1,
  "tourism.tn": 1,
  "to": 1,
  "com.to": 1,
  "gov.to": 1,
  "net.to": 1,
  "org.to": 1,
  "edu.to": 1,
  "mil.to": 1,
  "tr": 1,
  "av.tr": 1,
  "bbs.tr": 1,
  "bel.tr": 1,
  "biz.tr": 1,
  "com.tr": 1,
  "dr.tr": 1,
  "edu.tr": 1,
  "gen.tr": 1,
  "gov.tr": 1,
  "info.tr": 1,
  "mil.tr": 1,
  "k12.tr": 1,
  "kep.tr": 1,
  "name.tr": 1,
  "net.tr": 1,
  "org.tr": 1,
  "pol.tr": 1,
  "tel.tr": 1,
  "tsk.tr": 1,
  "tv.tr": 1,
  "web.tr": 1,
  "nc.tr": 1,
  "gov.nc.tr": 1,
  "tt": 1,
  "co.tt": 1,
  "com.tt": 1,
  "org.tt": 1,
  "net.tt": 1,
  "biz.tt": 1,
  "info.tt": 1,
  "pro.tt": 1,
  "int.tt": 1,
  "coop.tt": 1,
  "jobs.tt": 1,
  "mobi.tt": 1,
  "travel.tt": 1,
  "museum.tt": 1,
  "aero.tt": 1,
  "name.tt": 1,
  "gov.tt": 1,
  "edu.tt": 1,
  "tv": 1,
  "tw": 1,
  "edu.tw": 1,
  "gov.tw": 1,
  "mil.tw": 1,
  "com.tw": 1,
  "net.tw": 1,
  "org.tw": 1,
  "idv.tw": 1,
  "game.tw": 1,
  "ebiz.tw": 1,
  "club.tw": 1,
  "xn--zf0ao64a.tw": 1,
  "xn--uc0atv.tw": 1,
  "xn--czrw28b.tw": 1,
  "tz": 1,
  "ac.tz": 1,
  "co.tz": 1,
  "go.tz": 1,
  "hotel.tz": 1,
  "info.tz": 1,
  "me.tz": 1,
  "mil.tz": 1,
  "mobi.tz": 1,
  "ne.tz": 1,
  "or.tz": 1,
  "sc.tz": 1,
  "tv.tz": 1,
  "ua": 1,
  "com.ua": 1,
  "edu.ua": 1,
  "gov.ua": 1,
  "in.ua": 1,
  "net.ua": 1,
  "org.ua": 1,
  "cherkassy.ua": 1,
  "cherkasy.ua": 1,
  "chernigov.ua": 1,
  "chernihiv.ua": 1,
  "chernivtsi.ua": 1,
  "chernovtsy.ua": 1,
  "ck.ua": 1,
  "cn.ua": 1,
  "cr.ua": 1,
  "crimea.ua": 1,
  "cv.ua": 1,
  "dn.ua": 1,
  "dnepropetrovsk.ua": 1,
  "dnipropetrovsk.ua": 1,
  "donetsk.ua": 1,
  "dp.ua": 1,
  "if.ua": 1,
  "ivano-frankivsk.ua": 1,
  "kh.ua": 1,
  "kharkiv.ua": 1,
  "kharkov.ua": 1,
  "kherson.ua": 1,
  "khmelnitskiy.ua": 1,
  "khmelnytskyi.ua": 1,
  "kiev.ua": 1,
  "kirovograd.ua": 1,
  "km.ua": 1,
  "kr.ua": 1,
  "kropyvnytskyi.ua": 1,
  "krym.ua": 1,
  "ks.ua": 1,
  "kv.ua": 1,
  "kyiv.ua": 1,
  "lg.ua": 1,
  "lt.ua": 1,
  "lugansk.ua": 1,
  "luhansk.ua": 1,
  "lutsk.ua": 1,
  "lv.ua": 1,
  "lviv.ua": 1,
  "mk.ua": 1,
  "mykolaiv.ua": 1,
  "nikolaev.ua": 1,
  "od.ua": 1,
  "odesa.ua": 1,
  "odessa.ua": 1,
  "pl.ua": 1,
  "poltava.ua": 1,
  "rivne.ua": 1,
  "rovno.ua": 1,
  "rv.ua": 1,
  "sb.ua": 1,
  "sebastopol.ua": 1,
  "sevastopol.ua": 1,
  "sm.ua": 1,
  "sumy.ua": 1,
  "te.ua": 1,
  "ternopil.ua": 1,
  "uz.ua": 1,
  "uzhgorod.ua": 1,
  "uzhhorod.ua": 1,
  "vinnica.ua": 1,
  "vinnytsia.ua": 1,
  "vn.ua": 1,
  "volyn.ua": 1,
  "yalta.ua": 1,
  "zakarpattia.ua": 1,
  "zaporizhzhe.ua": 1,
  "zaporizhzhia.ua": 1,
  "zhitomir.ua": 1,
  "zhytomyr.ua": 1,
  "zp.ua": 1,
  "zt.ua": 1,
  "ug": 1,
  "co.ug": 1,
  "or.ug": 1,
  "ac.ug": 1,
  "sc.ug": 1,
  "go.ug": 1,
  "ne.ug": 1,
  "com.ug": 1,
  "org.ug": 1,
  "uk": 1,
  "ac.uk": 1,
  "co.uk": 1,
  "gov.uk": 1,
  "ltd.uk": 1,
  "me.uk": 1,
  "net.uk": 1,
  "nhs.uk": 1,
  "org.uk": 1,
  "plc.uk": 1,
  "police.uk": 1,
  "sch.uk": 2,
  "us": 1,
  "dni.us": 1,
  "fed.us": 1,
  "isa.us": 1,
  "kids.us": 1,
  "nsn.us": 1,
  "ak.us": 1,
  "al.us": 1,
  "ar.us": 1,
  "as.us": 1,
  "az.us": 1,
  "ca.us": 1,
  "co.us": 1,
  "ct.us": 1,
  "dc.us": 1,
  "de.us": 1,
  "fl.us": 1,
  "ga.us": 1,
  "gu.us": 1,
  "hi.us": 1,
  "ia.us": 1,
  "id.us": 1,
  "il.us": 1,
  "in.us": 1,
  "ks.us": 1,
  "ky.us": 1,
  "la.us": 1,
  "ma.us": 1,
  "md.us": 1,
  "me.us": 1,
  "mi.us": 1,
  "mn.us": 1,
  "mo.us": 1,
  "ms.us": 1,
  "mt.us": 1,
  "nc.us": 1,
  "nd.us": 1,
  "ne.us": 1,
  "nh.us": 1,
  "nj.us": 1,
  "nm.us": 1,
  "nv.us": 1,
  "ny.us": 1,
  "oh.us": 1,
  "ok.us": 1,
  "or.us": 1,
  "pa.us": 1,
  "pr.us": 1,
  "ri.us": 1,
  "sc.us": 1,
  "sd.us": 1,
  "tn.us": 1,
  "tx.us": 1,
  "ut.us": 1,
  "vi.us": 1,
  "vt.us": 1,
  "va.us": 1,
  "wa.us": 1,
  "wi.us": 1,
  "wv.us": 1,
  "wy.us": 1,
  "k12.ak.us": 1,
  "k12.al.us": 1,
  "k12.ar.us": 1,
  "k12.as.us": 1,
  "k12.az.us": 1,
  "k12.ca.us": 1,
  "k12.co.us": 1,
  "k12.ct.us": 1,
  "k12.dc.us": 1,
  "k12.fl.us": 1,
  "k12.ga.us": 1,
  "k12.gu.us": 1,
  "k12.ia.us": 1,
  "k12.id.us": 1,
  "k12.il.us": 1,
  "k12.in.us": 1,
  "k12.ks.us": 1,
  "k12.ky.us": 1,
  "k12.la.us": 1,
  "k12.ma.us": 1,
  "k12.md.us": 1,
  "k12.me.us": 1,
  "k12.mi.us": 1,
  "k12.mn.us": 1,
  "k12.mo.us": 1,
  "k12.ms.us": 1,
  "k12.mt.us": 1,
  "k12.nc.us": 1,
  "k12.ne.us": 1,
  "k12.nh.us": 1,
  "k12.nj.us": 1,
  "k12.nm.us": 1,
  "k12.nv.us": 1,
  "k12.ny.us": 1,
  "k12.oh.us": 1,
  "k12.ok.us": 1,
  "k12.or.us": 1,
  "k12.pa.us": 1,
  "k12.pr.us": 1,
  "k12.sc.us": 1,
  "k12.tn.us": 1,
  "k12.tx.us": 1,
  "k12.ut.us": 1,
  "k12.vi.us": 1,
  "k12.vt.us": 1,
  "k12.va.us": 1,
  "k12.wa.us": 1,
  "k12.wi.us": 1,
  "k12.wy.us": 1,
  "cc.ak.us": 1,
  "cc.al.us": 1,
  "cc.ar.us": 1,
  "cc.as.us": 1,
  "cc.az.us": 1,
  "cc.ca.us": 1,
  "cc.co.us": 1,
  "cc.ct.us": 1,
  "cc.dc.us": 1,
  "cc.de.us": 1,
  "cc.fl.us": 1,
  "cc.ga.us": 1,
  "cc.gu.us": 1,
  "cc.hi.us": 1,
  "cc.ia.us": 1,
  "cc.id.us": 1,
  "cc.il.us": 1,
  "cc.in.us": 1,
  "cc.ks.us": 1,
  "cc.ky.us": 1,
  "cc.la.us": 1,
  "cc.ma.us": 1,
  "cc.md.us": 1,
  "cc.me.us": 1,
  "cc.mi.us": 1,
  "cc.mn.us": 1,
  "cc.mo.us": 1,
  "cc.ms.us": 1,
  "cc.mt.us": 1,
  "cc.nc.us": 1,
  "cc.nd.us": 1,
  "cc.ne.us": 1,
  "cc.nh.us": 1,
  "cc.nj.us": 1,
  "cc.nm.us": 1,
  "cc.nv.us": 1,
  "cc.ny.us": 1,
  "cc.oh.us": 1,
  "cc.ok.us": 1,
  "cc.or.us": 1,
  "cc.pa.us": 1,
  "cc.pr.us": 1,
  "cc.ri.us": 1,
  "cc.sc.us": 1,
  "cc.sd.us": 1,
  "cc.tn.us": 1,
  "cc.tx.us": 1,
  "cc.ut.us": 1,
  "cc.vi.us": 1,
  "cc.vt.us": 1,
  "cc.va.us": 1,
  "cc.wa.us": 1,
  "cc.wi.us": 1,
  "cc.wv.us": 1,
  "cc.wy.us": 1,
  "lib.ak.us": 1,
  "lib.al.us": 1,
  "lib.ar.us": 1,
  "lib.as.us": 1,
  "lib.az.us": 1,
  "lib.ca.us": 1,
  "lib.co.us": 1,
  "lib.ct.us": 1,
  "lib.dc.us": 1,
  "lib.fl.us": 1,
  "lib.ga.us": 1,
  "lib.gu.us": 1,
  "lib.hi.us": 1,
  "lib.ia.us": 1,
  "lib.id.us": 1,
  "lib.il.us": 1,
  "lib.in.us": 1,
  "lib.ks.us": 1,
  "lib.ky.us": 1,
  "lib.la.us": 1,
  "lib.ma.us": 1,
  "lib.md.us": 1,
  "lib.me.us": 1,
  "lib.mi.us": 1,
  "lib.mn.us": 1,
  "lib.mo.us": 1,
  "lib.ms.us": 1,
  "lib.mt.us": 1,
  "lib.nc.us": 1,
  "lib.nd.us": 1,
  "lib.ne.us": 1,
  "lib.nh.us": 1,
  "lib.nj.us": 1,
  "lib.nm.us": 1,
  "lib.nv.us": 1,
  "lib.ny.us": 1,
  "lib.oh.us": 1,
  "lib.ok.us": 1,
  "lib.or.us": 1,
  "lib.pa.us": 1,
  "lib.pr.us": 1,
  "lib.ri.us": 1,
  "lib.sc.us": 1,
  "lib.sd.us": 1,
  "lib.tn.us": 1,
  "lib.tx.us": 1,
  "lib.ut.us": 1,
  "lib.vi.us": 1,
  "lib.vt.us": 1,
  "lib.va.us": 1,
  "lib.wa.us": 1,
  "lib.wi.us": 1,
  "lib.wy.us": 1,
  "pvt.k12.ma.us": 1,
  "chtr.k12.ma.us": 1,
  "paroch.k12.ma.us": 1,
  "ann-arbor.mi.us": 1,
  "cog.mi.us": 1,
  "dst.mi.us": 1,
  "eaton.mi.us": 1,
  "gen.mi.us": 1,
  "mus.mi.us": 1,
  "tec.mi.us": 1,
  "washtenaw.mi.us": 1,
  "uy": 1,
  "com.uy": 1,
  "edu.uy": 1,
  "gub.uy": 1,
  "mil.uy": 1,
  "net.uy": 1,
  "org.uy": 1,
  "uz": 1,
  "co.uz": 1,
  "com.uz": 1,
  "net.uz": 1,
  "org.uz": 1,
  "va": 1,
  "vc": 1,
  "com.vc": 1,
  "net.vc": 1,
  "org.vc": 1,
  "gov.vc": 1,
  "mil.vc": 1,
  "edu.vc": 1,
  "ve": 1,
  "arts.ve": 1,
  "bib.ve": 1,
  "co.ve": 1,
  "com.ve": 1,
  "e12.ve": 1,
  "edu.ve": 1,
  "firm.ve": 1,
  "gob.ve": 1,
  "gov.ve": 1,
  "info.ve": 1,
  "int.ve": 1,
  "mil.ve": 1,
  "net.ve": 1,
  "nom.ve": 1,
  "org.ve": 1,
  "rar.ve": 1,
  "rec.ve": 1,
  "store.ve": 1,
  "tec.ve": 1,
  "web.ve": 1,
  "vg": 1,
  "vi": 1,
  "co.vi": 1,
  "com.vi": 1,
  "k12.vi": 1,
  "net.vi": 1,
  "org.vi": 1,
  "vn": 1,
  "ac.vn": 1,
  "ai.vn": 1,
  "biz.vn": 1,
  "com.vn": 1,
  "edu.vn": 1,
  "gov.vn": 1,
  "health.vn": 1,
  "id.vn": 1,
  "info.vn": 1,
  "int.vn": 1,
  "io.vn": 1,
  "name.vn": 1,
  "net.vn": 1,
  "org.vn": 1,
  "pro.vn": 1,
  "angiang.vn": 1,
  "bacgiang.vn": 1,
  "backan.vn": 1,
  "baclieu.vn": 1,
  "bacninh.vn": 1,
  "baria-vungtau.vn": 1,
  "bentre.vn": 1,
  "binhdinh.vn": 1,
  "binhduong.vn": 1,
  "binhphuoc.vn": 1,
  "binhthuan.vn": 1,
  "camau.vn": 1,
  "cantho.vn": 1,
  "caobang.vn": 1,
  "daklak.vn": 1,
  "daknong.vn": 1,
  "danang.vn": 1,
  "dienbien.vn": 1,
  "dongnai.vn": 1,
  "dongthap.vn": 1,
  "gialai.vn": 1,
  "hagiang.vn": 1,
  "haiduong.vn": 1,
  "haiphong.vn": 1,
  "hanam.vn": 1,
  "hanoi.vn": 1,
  "hatinh.vn": 1,
  "haugiang.vn": 1,
  "hoabinh.vn": 1,
  "hungyen.vn": 1,
  "khanhhoa.vn": 1,
  "kiengiang.vn": 1,
  "kontum.vn": 1,
  "laichau.vn": 1,
  "lamdong.vn": 1,
  "langson.vn": 1,
  "laocai.vn": 1,
  "longan.vn": 1,
  "namdinh.vn": 1,
  "nghean.vn": 1,
  "ninhbinh.vn": 1,
  "ninhthuan.vn": 1,
  "phutho.vn": 1,
  "phuyen.vn": 1,
  "quangbinh.vn": 1,
  "quangnam.vn": 1,
  "quangngai.vn": 1,
  "quangninh.vn": 1,
  "quangtri.vn": 1,
  "soctrang.vn": 1,
  "sonla.vn": 1,
  "tayninh.vn": 1,
  "thaibinh.vn": 1,
  "thainguyen.vn": 1,
  "thanhhoa.vn": 1,
  "thanhphohochiminh.vn": 1,
  "thuathienhue.vn": 1,
  "tiengiang.vn": 1,
  "travinh.vn": 1,
  "tuyenquang.vn": 1,
  "vinhlong.vn": 1,
  "vinhphuc.vn": 1,
  "yenbai.vn": 1,
  "vu": 1,
  "com.vu": 1,
  "edu.vu": 1,
  "net.vu": 1,
  "org.vu": 1,
  "wf": 1,
  "ws": 1,
  "com.ws": 1,
  "net.ws": 1,
  "org.ws": 1,
  "gov.ws": 1,
  "edu.ws": 1,
  "yt": 1,
  "xn--mgbaam7a8h": 1,
  "xn--y9a3aq": 1,
  "xn--54b7fta0cc": 1,
  "xn--90ae": 1,
  "xn--mgbcpq6gpa1a": 1,
  "xn--90ais": 1,
  "xn--fiqs8s": 1,
  "xn--fiqz9s": 1,
  "xn--lgbbat1ad8j": 1,
  "xn--wgbh1c": 1,
  "xn--e1a4c": 1,
  "xn--qxa6a": 1,
  "xn--mgbah1a3hjkrd": 1,
  "xn--node": 1,
  "xn--qxam": 1,
  "xn--j6w193g": 1,
  "xn--55qx5d.xn--j6w193g": 1,
  "xn--wcvs22d.xn--j6w193g": 1,
  "xn--mxtq1m.xn--j6w193g": 1,
  "xn--gmqw5a.xn--j6w193g": 1,
  "xn--od0alg.xn--j6w193g": 1,
  "xn--uc0atv.xn--j6w193g": 1,
  "xn--2scrj9c": 1,
  "xn--3hcrj9c": 1,
  "xn--45br5cyl": 1,
  "xn--h2breg3eve": 1,
  "xn--h2brj9c8c": 1,
  "xn--mgbgu82a": 1,
  "xn--rvc1e0am3e": 1,
  "xn--h2brj9c": 1,
  "xn--mgbbh1a": 1,
  "xn--mgbbh1a71e": 1,
  "xn--fpcrj9c3d": 1,
  "xn--gecrj9c": 1,
  "xn--s9brj9c": 1,
  "xn--45brj9c": 1,
  "xn--xkc2dl3a5ee0h": 1,
  "xn--mgba3a4f16a": 1,
  "xn--mgba3a4fra": 1,
  "xn--mgbtx2b": 1,
  "xn--mgbayh7gpa": 1,
  "xn--3e0b707e": 1,
  "xn--80ao21a": 1,
  "xn--q7ce6a": 1,
  "xn--fzc2c9e2c": 1,
  "xn--xkc2al3hye2a": 1,
  "xn--mgbc0a9azcg": 1,
  "xn--d1alf": 1,
  "xn--l1acc": 1,
  "xn--mix891f": 1,
  "xn--mix082f": 1,
  "xn--mgbx4cd0ab": 1,
  "xn--mgb9awbf": 1,
  "xn--mgbai9azgqp6j": 1,
  "xn--mgbai9a5eva00b": 1,
  "xn--ygbi2ammx": 1,
  "xn--90a3ac": 1,
  "xn--o1ac.xn--90a3ac": 1,
  "xn--c1avg.xn--90a3ac": 1,
  "xn--90azh.xn--90a3ac": 1,
  "xn--d1at.xn--90a3ac": 1,
  "xn--o1ach.xn--90a3ac": 1,
  "xn--80au.xn--90a3ac": 1,
  "xn--p1ai": 1,
  "xn--wgbl6a": 1,
  "xn--mgberp4a5d4ar": 1,
  "xn--mgberp4a5d4a87g": 1,
  "xn--mgbqly7c0a67fbc": 1,
  "xn--mgbqly7cvafr": 1,
  "xn--mgbpl2fh": 1,
  "xn--yfro4i67o": 1,
  "xn--clchc0ea0b2g2a9gcd": 1,
  "xn--ogbpf8fl": 1,
  "xn--mgbtf8fl": 1,
  "xn--o3cw4h": 1,
  "xn--12c1fe0br.xn--o3cw4h": 1,
  "xn--12co0c3b4eva.xn--o3cw4h": 1,
  "xn--h3cuzk1di.xn--o3cw4h": 1,
  "xn--o3cyx2a.xn--o3cw4h": 1,
  "xn--m3ch0j3a.xn--o3cw4h": 1,
  "xn--12cfi8ixb8l.xn--o3cw4h": 1,
  "xn--pgbs0dh": 1,
  "xn--kpry57d": 1,
  "xn--kprw13d": 1,
  "xn--nnx388a": 1,
  "xn--j1amh": 1,
  "xn--mgb2ddes": 1,
  "xxx": 1,
  "ye": 1,
  "com.ye": 1,
  "edu.ye": 1,
  "gov.ye": 1,
  "net.ye": 1,
  "mil.ye": 1,
  "org.ye": 1,
  "ac.za": 1,
  "agric.za": 1,
  "alt.za": 1,
  "co.za": 1,
  "edu.za": 1,
  "gov.za": 1,
  "grondar.za": 1,
  "law.za": 1,
  "mil.za": 1,
  "net.za": 1,
  "ngo.za": 1,
  "nic.za": 1,
  "nis.za": 1,
  "nom.za": 1,
  "org.za": 1,
  "school.za": 1,
  "tm.za": 1,
  "web.za": 1,
  "zm": 1,
  "ac.zm": 1,
  "biz.zm": 1,
  "co.zm": 1,
  "com.zm": 1,
  "edu.zm": 1,
  "gov.zm": 1,
  "info.zm": 1,
  "mil.zm": 1,
  "net.zm": 1,
  "org.zm": 1,
  "sch.zm": 1,
  "zw": 1,
  "ac.zw": 1,
  "co.zw": 1,
  "gov.zw": 1,
  "mil.zw": 1,
  "org.zw": 1,
  "aaa": 1,
  "aarp": 1,
  "abb": 1,
  "abbott": 1,
  "abbvie": 1,
  "abc": 1,
  "able": 1,
  "abogado": 1,
  "abudhabi": 1,
  "academy": 1,
  "accenture": 1,
  "accountant": 1,
  "accountants": 1,
  "aco": 1,
  "actor": 1,
  "ads": 1,
  "adult": 1,
  "aeg": 1,
  "aetna": 1,
  "afl": 1,
  "africa": 1,
  "agakhan": 1,
  "agency": 1,
  "aig": 1,
  "airbus": 1,
  "airforce": 1,
  "airtel": 1,
  "akdn": 1,
  "alibaba": 1,
  "alipay": 1,
  "allfinanz": 1,
  "allstate": 1,
  "ally": 1,
  "alsace": 1,
  "alstom": 1,
  "amazon": 1,
  "americanexpress": 1,
  "americanfamily": 1,
  "amex": 1,
  "amfam": 1,
  "amica": 1,
  "amsterdam": 1,
  "analytics": 1,
  "android": 1,
  "anquan": 1,
  "anz": 1,
  "aol": 1,
  "apartments": 1,
  "app": 1,
  "apple": 1,
  "aquarelle": 1,
  "arab": 1,
  "aramco": 1,
  "archi": 1,
  "army": 1,
  "art": 1,
  "arte": 1,
  "asda": 1,
  "associates": 1,
  "athleta": 1,
  "attorney": 1,
  "auction": 1,
  "audi": 1,
  "audible": 1,
  "audio": 1,
  "auspost": 1,
  "author": 1,
  "auto": 1,
  "autos": 1,
  "avianca": 1,
  "aws": 1,
  "axa": 1,
  "azure": 1,
  "baby": 1,
  "baidu": 1,
  "banamex": 1,
  "bananarepublic": 1,
  "band": 1,
  "bank": 1,
  "bar": 1,
  "barcelona": 1,
  "barclaycard": 1,
  "barclays": 1,
  "barefoot": 1,
  "bargains": 1,
  "baseball": 1,
  "basketball": 1,
  "bauhaus": 1,
  "bayern": 1,
  "bbc": 1,
  "bbt": 1,
  "bbva": 1,
  "bcg": 1,
  "bcn": 1,
  "beats": 1,
  "beauty": 1,
  "beer": 1,
  "bentley": 1,
  "berlin": 1,
  "best": 1,
  "bestbuy": 1,
  "bet": 1,
  "bharti": 1,
  "bible": 1,
  "bid": 1,
  "bike": 1,
  "bing": 1,
  "bingo": 1,
  "bio": 1,
  "black": 1,
  "blackfriday": 1,
  "blockbuster": 1,
  "blog": 1,
  "bloomberg": 1,
  "blue": 1,
  "bms": 1,
  "bmw": 1,
  "bnpparibas": 1,
  "boats": 1,
  "boehringer": 1,
  "bofa": 1,
  "bom": 1,
  "bond": 1,
  "boo": 1,
  "book": 1,
  "booking": 1,
  "bosch": 1,
  "bostik": 1,
  "boston": 1,
  "bot": 1,
  "boutique": 1,
  "box": 1,
  "bradesco": 1,
  "bridgestone": 1,
  "broadway": 1,
  "broker": 1,
  "brother": 1,
  "brussels": 1,
  "build": 1,
  "builders": 1,
  "business": 1,
  "buy": 1,
  "buzz": 1,
  "bzh": 1,
  "cab": 1,
  "cafe": 1,
  "cal": 1,
  "call": 1,
  "calvinklein": 1,
  "cam": 1,
  "camera": 1,
  "camp": 1,
  "canon": 1,
  "capetown": 1,
  "capital": 1,
  "capitalone": 1,
  "car": 1,
  "caravan": 1,
  "cards": 1,
  "care": 1,
  "career": 1,
  "careers": 1,
  "cars": 1,
  "casa": 1,
  "case": 1,
  "cash": 1,
  "casino": 1,
  "catering": 1,
  "catholic": 1,
  "cba": 1,
  "cbn": 1,
  "cbre": 1,
  "center": 1,
  "ceo": 1,
  "cern": 1,
  "cfa": 1,
  "cfd": 1,
  "chanel": 1,
  "channel": 1,
  "charity": 1,
  "chase": 1,
  "chat": 1,
  "cheap": 1,
  "chintai": 1,
  "christmas": 1,
  "chrome": 1,
  "church": 1,
  "cipriani": 1,
  "circle": 1,
  "cisco": 1,
  "citadel": 1,
  "citi": 1,
  "citic": 1,
  "city": 1,
  "claims": 1,
  "cleaning": 1,
  "click": 1,
  "clinic": 1,
  "clinique": 1,
  "clothing": 1,
  "cloud": 1,
  "club": 1,
  "clubmed": 1,
  "coach": 1,
  "codes": 1,
  "coffee": 1,
  "college": 1,
  "cologne": 1,
  "comcast": 1,
  "commbank": 1,
  "community": 1,
  "company": 1,
  "compare": 1,
  "computer": 1,
  "comsec": 1,
  "condos": 1,
  "construction": 1,
  "consulting": 1,
  "contact": 1,
  "contractors": 1,
  "cooking": 1,
  "cool": 1,
  "corsica": 1,
  "country": 1,
  "coupon": 1,
  "coupons": 1,
  "courses": 1,
  "cpa": 1,
  "credit": 1,
  "creditcard": 1,
  "creditunion": 1,
  "cricket": 1,
  "crown": 1,
  "crs": 1,
  "cruise": 1,
  "cruises": 1,
  "cuisinella": 1,
  "cymru": 1,
  "cyou": 1,
  "dabur": 1,
  "dad": 1,
  "dance": 1,
  "data": 1,
  "date": 1,
  "dating": 1,
  "datsun": 1,
  "day": 1,
  "dclk": 1,
  "dds": 1,
  "deal": 1,
  "dealer": 1,
  "deals": 1,
  "degree": 1,
  "delivery": 1,
  "dell": 1,
  "deloitte": 1,
  "delta": 1,
  "democrat": 1,
  "dental": 1,
  "dentist": 1,
  "desi": 1,
  "design": 1,
  "dev": 1,
  "dhl": 1,
  "diamonds": 1,
  "diet": 1,
  "digital": 1,
  "direct": 1,
  "directory": 1,
  "discount": 1,
  "discover": 1,
  "dish": 1,
  "diy": 1,
  "dnp": 1,
  "docs": 1,
  "doctor": 1,
  "dog": 1,
  "domains": 1,
  "dot": 1,
  "download": 1,
  "drive": 1,
  "dtv": 1,
  "dubai": 1,
  "dunlop": 1,
  "dupont": 1,
  "durban": 1,
  "dvag": 1,
  "dvr": 1,
  "earth": 1,
  "eat": 1,
  "eco": 1,
  "edeka": 1,
  "education": 1,
  "email": 1,
  "emerck": 1,
  "energy": 1,
  "engineer": 1,
  "engineering": 1,
  "enterprises": 1,
  "epson": 1,
  "equipment": 1,
  "ericsson": 1,
  "erni": 1,
  "esq": 1,
  "estate": 1,
  "eurovision": 1,
  "eus": 1,
  "events": 1,
  "exchange": 1,
  "expert": 1,
  "exposed": 1,
  "express": 1,
  "extraspace": 1,
  "fage": 1,
  "fail": 1,
  "fairwinds": 1,
  "faith": 1,
  "family": 1,
  "fan": 1,
  "fans": 1,
  "farm": 1,
  "farmers": 1,
  "fashion": 1,
  "fast": 1,
  "fedex": 1,
  "feedback": 1,
  "ferrari": 1,
  "ferrero": 1,
  "fidelity": 1,
  "fido": 1,
  "film": 1,
  "final": 1,
  "finance": 1,
  "financial": 1,
  "fire": 1,
  "firestone": 1,
  "firmdale": 1,
  "fish": 1,
  "fishing": 1,
  "fit": 1,
  "fitness": 1,
  "flickr": 1,
  "flights": 1,
  "flir": 1,
  "florist": 1,
  "flowers": 1,
  "fly": 1,
  "foo": 1,
  "food": 1,
  "football": 1,
  "ford": 1,
  "forex": 1,
  "forsale": 1,
  "forum": 1,
  "foundation": 1,
  "fox": 1,
  "free": 1,
  "fresenius": 1,
  "frl": 1,
  "frogans": 1,
  "frontier": 1,
  "ftr": 1,
  "fujitsu": 1,
  "fun": 1,
  "fund": 1,
  "furniture": 1,
  "futbol": 1,
  "fyi": 1,
  "gal": 1,
  "gallery": 1,
  "gallo": 1,
  "gallup": 1,
  "game": 1,
  "games": 1,
  "gap": 1,
  "garden": 1,
  "gay": 1,
  "gbiz": 1,
  "gdn": 1,
  "gea": 1,
  "gent": 1,
  "genting": 1,
  "george": 1,
  "ggee": 1,
  "gift": 1,
  "gifts": 1,
  "gives": 1,
  "giving": 1,
  "glass": 1,
  "gle": 1,
  "global": 1,
  "globo": 1,
  "gmail": 1,
  "gmbh": 1,
  "gmo": 1,
  "gmx": 1,
  "godaddy": 1,
  "gold": 1,
  "goldpoint": 1,
  "golf": 1,
  "goo": 1,
  "goodyear": 1,
  "goog": 1,
  "google": 1,
  "gop": 1,
  "got": 1,
  "grainger": 1,
  "graphics": 1,
  "gratis": 1,
  "green": 1,
  "gripe": 1,
  "grocery": 1,
  "group": 1,
  "guardian": 1,
  "gucci": 1,
  "guge": 1,
  "guide": 1,
  "guitars": 1,
  "guru": 1,
  "hair": 1,
  "hamburg": 1,
  "hangout": 1,
  "haus": 1,
  "hbo": 1,
  "hdfc": 1,
  "hdfcbank": 1,
  "health": 1,
  "healthcare": 1,
  "help": 1,
  "helsinki": 1,
  "here": 1,
  "hermes": 1,
  "hiphop": 1,
  "hisamitsu": 1,
  "hitachi": 1,
  "hiv": 1,
  "hkt": 1,
  "hockey": 1,
  "holdings": 1,
  "holiday": 1,
  "homedepot": 1,
  "homegoods": 1,
  "homes": 1,
  "homesense": 1,
  "honda": 1,
  "horse": 1,
  "hospital": 1,
  "host": 1,
  "hosting": 1,
  "hot": 1,
  "hotels": 1,
  "hotmail": 1,
  "house": 1,
  "how": 1,
  "hsbc": 1,
  "hughes": 1,
  "hyatt": 1,
  "hyundai": 1,
  "ibm": 1,
  "icbc": 1,
  "ice": 1,
  "icu": 1,
  "ieee": 1,
  "ifm": 1,
  "ikano": 1,
  "imamat": 1,
  "imdb": 1,
  "immo": 1,
  "immobilien": 1,
  "inc": 1,
  "industries": 1,
  "infiniti": 1,
  "ing": 1,
  "ink": 1,
  "institute": 1,
  "insurance": 1,
  "insure": 1,
  "international": 1,
  "intuit": 1,
  "investments": 1,
  "ipiranga": 1,
  "irish": 1,
  "ismaili": 1,
  "ist": 1,
  "istanbul": 1,
  "itau": 1,
  "itv": 1,
  "jaguar": 1,
  "java": 1,
  "jcb": 1,
  "jeep": 1,
  "jetzt": 1,
  "jewelry": 1,
  "jio": 1,
  "jll": 1,
  "jmp": 1,
  "jnj": 1,
  "joburg": 1,
  "jot": 1,
  "joy": 1,
  "jpmorgan": 1,
  "jprs": 1,
  "juegos": 1,
  "juniper": 1,
  "kaufen": 1,
  "kddi": 1,
  "kerryhotels": 1,
  "kerrylogistics": 1,
  "kerryproperties": 1,
  "kfh": 1,
  "kia": 1,
  "kids": 1,
  "kim": 1,
  "kindle": 1,
  "kitchen": 1,
  "kiwi": 1,
  "koeln": 1,
  "komatsu": 1,
  "kosher": 1,
  "kpmg": 1,
  "kpn": 1,
  "krd": 1,
  "kred": 1,
  "kuokgroup": 1,
  "kyoto": 1,
  "lacaixa": 1,
  "lamborghini": 1,
  "lamer": 1,
  "lancaster": 1,
  "land": 1,
  "landrover": 1,
  "lanxess": 1,
  "lasalle": 1,
  "lat": 1,
  "latino": 1,
  "latrobe": 1,
  "law": 1,
  "lawyer": 1,
  "lds": 1,
  "lease": 1,
  "leclerc": 1,
  "lefrak": 1,
  "legal": 1,
  "lego": 1,
  "lexus": 1,
  "lgbt": 1,
  "lidl": 1,
  "life": 1,
  "lifeinsurance": 1,
  "lifestyle": 1,
  "lighting": 1,
  "like": 1,
  "lilly": 1,
  "limited": 1,
  "limo": 1,
  "lincoln": 1,
  "link": 1,
  "lipsy": 1,
  "live": 1,
  "living": 1,
  "llc": 1,
  "llp": 1,
  "loan": 1,
  "loans": 1,
  "locker": 1,
  "locus": 1,
  "lol": 1,
  "london": 1,
  "lotte": 1,
  "lotto": 1,
  "love": 1,
  "lpl": 1,
  "lplfinancial": 1,
  "ltd": 1,
  "ltda": 1,
  "lundbeck": 1,
  "luxe": 1,
  "luxury": 1,
  "madrid": 1,
  "maif": 1,
  "maison": 1,
  "makeup": 1,
  "man": 1,
  "management": 1,
  "mango": 1,
  "map": 1,
  "market": 1,
  "marketing": 1,
  "markets": 1,
  "marriott": 1,
  "marshalls": 1,
  "mattel": 1,
  "mba": 1,
  "mckinsey": 1,
  "med": 1,
  "media": 1,
  "meet": 1,
  "melbourne": 1,
  "meme": 1,
  "memorial": 1,
  "men": 1,
  "menu": 1,
  "merckmsd": 1,
  "miami": 1,
  "microsoft": 1,
  "mini": 1,
  "mint": 1,
  "mit": 1,
  "mitsubishi": 1,
  "mlb": 1,
  "mls": 1,
  "mma": 1,
  "mobile": 1,
  "moda": 1,
  "moe": 1,
  "moi": 1,
  "mom": 1,
  "monash": 1,
  "money": 1,
  "monster": 1,
  "mormon": 1,
  "mortgage": 1,
  "moscow": 1,
  "moto": 1,
  "motorcycles": 1,
  "mov": 1,
  "movie": 1,
  "msd": 1,
  "mtn": 1,
  "mtr": 1,
  "music": 1,
  "nab": 1,
  "nagoya": 1,
  "natura": 1,
  "navy": 1,
  "nba": 1,
  "nec": 1,
  "netbank": 1,
  "netflix": 1,
  "network": 1,
  "neustar": 1,
  "new": 1,
  "news": 1,
  "next": 1,
  "nextdirect": 1,
  "nexus": 1,
  "nfl": 1,
  "ngo": 1,
  "nhk": 1,
  "nico": 1,
  "nike": 1,
  "nikon": 1,
  "ninja": 1,
  "nissan": 1,
  "nissay": 1,
  "nokia": 1,
  "norton": 1,
  "now": 1,
  "nowruz": 1,
  "nowtv": 1,
  "nra": 1,
  "nrw": 1,
  "ntt": 1,
  "nyc": 1,
  "obi": 1,
  "observer": 1,
  "office": 1,
  "okinawa": 1,
  "olayan": 1,
  "olayangroup": 1,
  "oldnavy": 1,
  "ollo": 1,
  "omega": 1,
  "one": 1,
  "ong": 1,
  "onl": 1,
  "online": 1,
  "ooo": 1,
  "open": 1,
  "oracle": 1,
  "orange": 1,
  "organic": 1,
  "origins": 1,
  "osaka": 1,
  "otsuka": 1,
  "ott": 1,
  "ovh": 1,
  "page": 1,
  "panasonic": 1,
  "paris": 1,
  "pars": 1,
  "partners": 1,
  "parts": 1,
  "party": 1,
  "pay": 1,
  "pccw": 1,
  "pet": 1,
  "pfizer": 1,
  "pharmacy": 1,
  "phd": 1,
  "philips": 1,
  "phone": 1,
  "photo": 1,
  "photography": 1,
  "photos": 1,
  "physio": 1,
  "pics": 1,
  "pictet": 1,
  "pictures": 1,
  "pid": 1,
  "pin": 1,
  "ping": 1,
  "pink": 1,
  "pioneer": 1,
  "pizza": 1,
  "place": 1,
  "play": 1,
  "playstation": 1,
  "plumbing": 1,
  "plus": 1,
  "pnc": 1,
  "pohl": 1,
  "poker": 1,
  "politie": 1,
  "porn": 1,
  "pramerica": 1,
  "praxi": 1,
  "press": 1,
  "prime": 1,
  "prod": 1,
  "productions": 1,
  "prof": 1,
  "progressive": 1,
  "promo": 1,
  "properties": 1,
  "property": 1,
  "protection": 1,
  "pru": 1,
  "prudential": 1,
  "pub": 1,
  "pwc": 1,
  "qpon": 1,
  "quebec": 1,
  "quest": 1,
  "racing": 1,
  "radio": 1,
  "read": 1,
  "realestate": 1,
  "realtor": 1,
  "realty": 1,
  "recipes": 1,
  "red": 1,
  "redstone": 1,
  "redumbrella": 1,
  "rehab": 1,
  "reise": 1,
  "reisen": 1,
  "reit": 1,
  "reliance": 1,
  "ren": 1,
  "rent": 1,
  "rentals": 1,
  "repair": 1,
  "report": 1,
  "republican": 1,
  "rest": 1,
  "restaurant": 1,
  "review": 1,
  "reviews": 1,
  "rexroth": 1,
  "rich": 1,
  "richardli": 1,
  "ricoh": 1,
  "ril": 1,
  "rio": 1,
  "rip": 1,
  "rocks": 1,
  "rodeo": 1,
  "rogers": 1,
  "room": 1,
  "rsvp": 1,
  "rugby": 1,
  "ruhr": 1,
  "run": 1,
  "rwe": 1,
  "ryukyu": 1,
  "saarland": 1,
  "safe": 1,
  "safety": 1,
  "sakura": 1,
  "sale": 1,
  "salon": 1,
  "samsclub": 1,
  "samsung": 1,
  "sandvik": 1,
  "sandvikcoromant": 1,
  "sanofi": 1,
  "sap": 1,
  "sarl": 1,
  "sas": 1,
  "save": 1,
  "saxo": 1,
  "sbi": 1,
  "sbs": 1,
  "sca": 1,
  "scb": 1,
  "schaeffler": 1,
  "schmidt": 1,
  "scholarships": 1,
  "school": 1,
  "schule": 1,
  "schwarz": 1,
  "science": 1,
  "scot": 1,
  "search": 1,
  "seat": 1,
  "secure": 1,
  "security": 1,
  "seek": 1,
  "select": 1,
  "sener": 1,
  "services": 1,
  "seven": 1,
  "sew": 1,
  "sex": 1,
  "sexy": 1,
  "sfr": 1,
  "shangrila": 1,
  "sharp": 1,
  "shaw": 1,
  "shell": 1,
  "shia": 1,
  "shiksha": 1,
  "shoes": 1,
  "shop": 1,
  "shopping": 1,
  "shouji": 1,
  "show": 1,
  "silk": 1,
  "sina": 1,
  "singles": 1,
  "site": 1,
  "ski": 1,
  "skin": 1,
  "sky": 1,
  "skype": 1,
  "sling": 1,
  "smart": 1,
  "smile": 1,
  "sncf": 1,
  "soccer": 1,
  "social": 1,
  "softbank": 1,
  "software": 1,
  "sohu": 1,
  "solar": 1,
  "solutions": 1,
  "song": 1,
  "sony": 1,
  "soy": 1,
  "spa": 1,
  "space": 1,
  "sport": 1,
  "spot": 1,
  "srl": 1,
  "stada": 1,
  "staples": 1,
  "star": 1,
  "statebank": 1,
  "statefarm": 1,
  "stc": 1,
  "stcgroup": 1,
  "stockholm": 1,
  "storage": 1,
  "store": 1,
  "stream": 1,
  "studio": 1,
  "study": 1,
  "style": 1,
  "sucks": 1,
  "supplies": 1,
  "supply": 1,
  "support": 1,
  "surf": 1,
  "surgery": 1,
  "suzuki": 1,
  "swatch": 1,
  "swiss": 1,
  "sydney": 1,
  "systems": 1,
  "tab": 1,
  "taipei": 1,
  "talk": 1,
  "taobao": 1,
  "target": 1,
  "tatamotors": 1,
  "tatar": 1,
  "tattoo": 1,
  "tax": 1,
  "taxi": 1,
  "tci": 1,
  "tdk": 1,
  "team": 1,
  "tech": 1,
  "technology": 1,
  "temasek": 1,
  "tennis": 1,
  "teva": 1,
  "thd": 1,
  "theater": 1,
  "theatre": 1,
  "tiaa": 1,
  "tickets": 1,
  "tienda": 1,
  "tips": 1,
  "tires": 1,
  "tirol": 1,
  "tjmaxx": 1,
  "tjx": 1,
  "tkmaxx": 1,
  "tmall": 1,
  "today": 1,
  "tokyo": 1,
  "tools": 1,
  "top": 1,
  "toray": 1,
  "toshiba": 1,
  "total": 1,
  "tours": 1,
  "town": 1,
  "toyota": 1,
  "toys": 1,
  "trade": 1,
  "trading": 1,
  "training": 1,
  "travel": 1,
  "travelers": 1,
  "travelersinsurance": 1,
  "trust": 1,
  "trv": 1,
  "tube": 1,
  "tui": 1,
  "tunes": 1,
  "tushu": 1,
  "tvs": 1,
  "ubank": 1,
  "ubs": 1,
  "unicom": 1,
  "university": 1,
  "uno": 1,
  "uol": 1,
  "ups": 1,
  "vacations": 1,
  "vana": 1,
  "vanguard": 1,
  "vegas": 1,
  "ventures": 1,
  "verisign": 1,
  "versicherung": 1,
  "vet": 1,
  "viajes": 1,
  "video": 1,
  "vig": 1,
  "viking": 1,
  "villas": 1,
  "vin": 1,
  "vip": 1,
  "virgin": 1,
  "visa": 1,
  "vision": 1,
  "viva": 1,
  "vivo": 1,
  "vlaanderen": 1,
  "vodka": 1,
  "volvo": 1,
  "vote": 1,
  "voting": 1,
  "voto": 1,
  "voyage": 1,
  "wales": 1,
  "walmart": 1,
  "walter": 1,
  "wang": 1,
  "wanggou": 1,
  "watch": 1,
  "watches": 1,
  "weather": 1,
  "weatherchannel": 1,
  "webcam": 1,
  "weber": 1,
  "website": 1,
  "wed": 1,
  "wedding": 1,
  "weibo": 1,
  "weir": 1,
  "whoswho": 1,
  "wien": 1,
  "wiki": 1,
  "williamhill": 1,
  "win": 1,
  "windows": 1,
  "wine": 1,
  "winners": 1,
  "wme": 1,
  "wolterskluwer": 1,
  "woodside": 1,
  "work": 1,
  "works": 1,
  "world": 1,
  "wow": 1,
  "wtc": 1,
  "wtf": 1,
  "xbox": 1,
  "xerox": 1,
  "xfinity": 1,
  "xihuan": 1,
  "xin": 1,
  "xn--11b4c3d": 1,
  "xn--1ck2e1b": 1,
  "xn--1qqw23a": 1,
  "xn--30rr7y": 1,
  "xn--3bst00m": 1,
  "xn--3ds443g": 1,
  "xn--3pxu8k": 1,
  "xn--42c2d9a": 1,
  "xn--45q11c": 1,
  "xn--4gbrim": 1,
  "xn--55qw42g": 1,
  "xn--55qx5d": 1,
  "xn--5su34j936bgsg": 1,
  "xn--5tzm5g": 1,
  "xn--6frz82g": 1,
  "xn--6qq986b3xl": 1,
  "xn--80adxhks": 1,
  "xn--80aqecdr1a": 1,
  "xn--80asehdb": 1,
  "xn--80aswg": 1,
  "xn--8y0a063a": 1,
  "xn--9dbq2a": 1,
  "xn--9et52u": 1,
  "xn--9krt00a": 1,
  "xn--b4w605ferd": 1,
  "xn--bck1b9a5dre4c": 1,
  "xn--c1avg": 1,
  "xn--c2br7g": 1,
  "xn--cck2b3b": 1,
  "xn--cckwcxetd": 1,
  "xn--cg4bki": 1,
  "xn--czr694b": 1,
  "xn--czrs0t": 1,
  "xn--czru2d": 1,
  "xn--d1acj3b": 1,
  "xn--eckvdtc9d": 1,
  "xn--efvy88h": 1,
  "xn--fct429k": 1,
  "xn--fhbei": 1,
  "xn--fiq228c5hs": 1,
  "xn--fiq64b": 1,
  "xn--fjq720a": 1,
  "xn--flw351e": 1,
  "xn--fzys8d69uvgm": 1,
  "xn--g2xx48c": 1,
  "xn--gckr3f0f": 1,
  "xn--gk3at1e": 1,
  "xn--hxt814e": 1,
  "xn--i1b6b1a6a2e": 1,
  "xn--imr513n": 1,
  "xn--io0a7i": 1,
  "xn--j1aef": 1,
  "xn--jlq480n2rg": 1,
  "xn--jvr189m": 1,
  "xn--kcrx77d1x4a": 1,
  "xn--kput3i": 1,
  "xn--mgba3a3ejt": 1,
  "xn--mgba7c0bbn0a": 1,
  "xn--mgbab2bd": 1,
  "xn--mgbca7dzdo": 1,
  "xn--mgbi4ecexp": 1,
  "xn--mgbt3dhd": 1,
  "xn--mk1bu44c": 1,
  "xn--mxtq1m": 1,
  "xn--ngbc5azd": 1,
  "xn--ngbe9e0a": 1,
  "xn--ngbrx": 1,
  "xn--nqv7f": 1,
  "xn--nqv7fs00ema": 1,
  "xn--nyqy26a": 1,
  "xn--otu796d": 1,
  "xn--p1acf": 1,
  "xn--pssy2u": 1,
  "xn--q9jyb4c": 1,
  "xn--qcka1pmc": 1,
  "xn--rhqv96g": 1,
  "xn--rovu88b": 1,
  "xn--ses554g": 1,
  "xn--t60b56a": 1,
  "xn--tckwe": 1,
  "xn--tiq49xqyj": 1,
  "xn--unup4y": 1,
  "xn--vermgensberater-ctb": 1,
  "xn--vermgensberatung-pwb": 1,
  "xn--vhquv": 1,
  "xn--vuq861b": 1,
  "xn--w4r85el8fhu5dnra": 1,
  "xn--w4rs40l": 1,
  "xn--xhq521b": 1,
  "xn--zfr164b": 1,
  "xyz": 1,
  "yachts": 1,
  "yahoo": 1,
  "yamaxun": 1,
  "yandex": 1,
  "yodobashi": 1,
  "yoga": 1,
  "yokohama": 1,
  "you": 1,
  "youtube": 1,
  "yun": 1,
  "zappos": 1,
  "zara": 1,
  "zero": 1,
  "zip": 1,
  "zone": 1,
  "zuerich": 1
}

/***/ }),

/***/ 987:
/***/ ((__unused_webpack_module, exports) => {

exports.nonIcannPublicSuffixes = {
  "cc.ua": 1,
  "inf.ua": 1,
  "ltd.ua": 1,
  "611.to": 1,
  "graphox.us": 1,
  "devcdnaccesso.com": 2,
  "on-acorn.io": 2,
  "activetrail.biz": 1,
  "adobeaemcloud.com": 1,
  "dev.adobeaemcloud.com": 2,
  "hlx.live": 1,
  "adobeaemcloud.net": 1,
  "hlx.page": 1,
  "hlx3.page": 1,
  "adobeio-static.net": 1,
  "adobeioruntime.net": 1,
  "beep.pl": 1,
  "airkitapps.com": 1,
  "airkitapps-au.com": 1,
  "airkitapps.eu": 1,
  "aivencloud.com": 1,
  "akadns.net": 1,
  "akamai.net": 1,
  "akamai-staging.net": 1,
  "akamaiedge.net": 1,
  "akamaiedge-staging.net": 1,
  "akamaihd.net": 1,
  "akamaihd-staging.net": 1,
  "akamaiorigin.net": 1,
  "akamaiorigin-staging.net": 1,
  "akamaized.net": 1,
  "akamaized-staging.net": 1,
  "edgekey.net": 1,
  "edgekey-staging.net": 1,
  "edgesuite.net": 1,
  "edgesuite-staging.net": 1,
  "barsy.ca": 1,
  "compute.estate": 2,
  "alces.network": 2,
  "kasserver.com": 1,
  "altervista.org": 1,
  "alwaysdata.net": 1,
  "myamaze.net": 1,
  "execute-api.cn-north-1.amazonaws.com.cn": 1,
  "execute-api.cn-northwest-1.amazonaws.com.cn": 1,
  "execute-api.af-south-1.amazonaws.com": 1,
  "execute-api.ap-east-1.amazonaws.com": 1,
  "execute-api.ap-northeast-1.amazonaws.com": 1,
  "execute-api.ap-northeast-2.amazonaws.com": 1,
  "execute-api.ap-northeast-3.amazonaws.com": 1,
  "execute-api.ap-south-1.amazonaws.com": 1,
  "execute-api.ap-south-2.amazonaws.com": 1,
  "execute-api.ap-southeast-1.amazonaws.com": 1,
  "execute-api.ap-southeast-2.amazonaws.com": 1,
  "execute-api.ap-southeast-3.amazonaws.com": 1,
  "execute-api.ap-southeast-4.amazonaws.com": 1,
  "execute-api.ca-central-1.amazonaws.com": 1,
  "execute-api.eu-central-1.amazonaws.com": 1,
  "execute-api.eu-central-2.amazonaws.com": 1,
  "execute-api.eu-north-1.amazonaws.com": 1,
  "execute-api.eu-south-1.amazonaws.com": 1,
  "execute-api.eu-south-2.amazonaws.com": 1,
  "execute-api.eu-west-1.amazonaws.com": 1,
  "execute-api.eu-west-2.amazonaws.com": 1,
  "execute-api.eu-west-3.amazonaws.com": 1,
  "execute-api.il-central-1.amazonaws.com": 1,
  "execute-api.me-central-1.amazonaws.com": 1,
  "execute-api.me-south-1.amazonaws.com": 1,
  "execute-api.sa-east-1.amazonaws.com": 1,
  "execute-api.us-east-1.amazonaws.com": 1,
  "execute-api.us-east-2.amazonaws.com": 1,
  "execute-api.us-gov-east-1.amazonaws.com": 1,
  "execute-api.us-gov-west-1.amazonaws.com": 1,
  "execute-api.us-west-1.amazonaws.com": 1,
  "execute-api.us-west-2.amazonaws.com": 1,
  "cloudfront.net": 1,
  "auth.af-south-1.amazoncognito.com": 1,
  "auth.ap-northeast-1.amazoncognito.com": 1,
  "auth.ap-northeast-2.amazoncognito.com": 1,
  "auth.ap-northeast-3.amazoncognito.com": 1,
  "auth.ap-south-1.amazoncognito.com": 1,
  "auth.ap-southeast-1.amazoncognito.com": 1,
  "auth.ap-southeast-2.amazoncognito.com": 1,
  "auth.ap-southeast-3.amazoncognito.com": 1,
  "auth.ca-central-1.amazoncognito.com": 1,
  "auth.eu-central-1.amazoncognito.com": 1,
  "auth.eu-north-1.amazoncognito.com": 1,
  "auth.eu-south-1.amazoncognito.com": 1,
  "auth.eu-west-1.amazoncognito.com": 1,
  "auth.eu-west-2.amazoncognito.com": 1,
  "auth.eu-west-3.amazoncognito.com": 1,
  "auth.il-central-1.amazoncognito.com": 1,
  "auth.me-south-1.amazoncognito.com": 1,
  "auth.sa-east-1.amazoncognito.com": 1,
  "auth.us-east-1.amazoncognito.com": 1,
  "auth-fips.us-east-1.amazoncognito.com": 1,
  "auth.us-east-2.amazoncognito.com": 1,
  "auth-fips.us-east-2.amazoncognito.com": 1,
  "auth-fips.us-gov-west-1.amazoncognito.com": 1,
  "auth.us-west-1.amazoncognito.com": 1,
  "auth-fips.us-west-1.amazoncognito.com": 1,
  "auth.us-west-2.amazoncognito.com": 1,
  "auth-fips.us-west-2.amazoncognito.com": 1,
  "compute.amazonaws.com": 2,
  "compute-1.amazonaws.com": 2,
  "compute.amazonaws.com.cn": 2,
  "us-east-1.amazonaws.com": 1,
  "emrappui-prod.cn-north-1.amazonaws.com.cn": 1,
  "emrnotebooks-prod.cn-north-1.amazonaws.com.cn": 1,
  "emrstudio-prod.cn-north-1.amazonaws.com.cn": 1,
  "emrappui-prod.cn-northwest-1.amazonaws.com.cn": 1,
  "emrnotebooks-prod.cn-northwest-1.amazonaws.com.cn": 1,
  "emrstudio-prod.cn-northwest-1.amazonaws.com.cn": 1,
  "emrappui-prod.af-south-1.amazonaws.com": 1,
  "emrnotebooks-prod.af-south-1.amazonaws.com": 1,
  "emrstudio-prod.af-south-1.amazonaws.com": 1,
  "emrappui-prod.ap-east-1.amazonaws.com": 1,
  "emrnotebooks-prod.ap-east-1.amazonaws.com": 1,
  "emrstudio-prod.ap-east-1.amazonaws.com": 1,
  "emrappui-prod.ap-northeast-1.amazonaws.com": 1,
  "emrnotebooks-prod.ap-northeast-1.amazonaws.com": 1,
  "emrstudio-prod.ap-northeast-1.amazonaws.com": 1,
  "emrappui-prod.ap-northeast-2.amazonaws.com": 1,
  "emrnotebooks-prod.ap-northeast-2.amazonaws.com": 1,
  "emrstudio-prod.ap-northeast-2.amazonaws.com": 1,
  "emrappui-prod.ap-northeast-3.amazonaws.com": 1,
  "emrnotebooks-prod.ap-northeast-3.amazonaws.com": 1,
  "emrstudio-prod.ap-northeast-3.amazonaws.com": 1,
  "emrappui-prod.ap-south-1.amazonaws.com": 1,
  "emrnotebooks-prod.ap-south-1.amazonaws.com": 1,
  "emrstudio-prod.ap-south-1.amazonaws.com": 1,
  "emrappui-prod.ap-southeast-1.amazonaws.com": 1,
  "emrnotebooks-prod.ap-southeast-1.amazonaws.com": 1,
  "emrstudio-prod.ap-southeast-1.amazonaws.com": 1,
  "emrappui-prod.ap-southeast-2.amazonaws.com": 1,
  "emrnotebooks-prod.ap-southeast-2.amazonaws.com": 1,
  "emrstudio-prod.ap-southeast-2.amazonaws.com": 1,
  "emrappui-prod.ap-southeast-3.amazonaws.com": 1,
  "emrnotebooks-prod.ap-southeast-3.amazonaws.com": 1,
  "emrstudio-prod.ap-southeast-3.amazonaws.com": 1,
  "emrappui-prod.ca-central-1.amazonaws.com": 1,
  "emrnotebooks-prod.ca-central-1.amazonaws.com": 1,
  "emrstudio-prod.ca-central-1.amazonaws.com": 1,
  "emrappui-prod.eu-central-1.amazonaws.com": 1,
  "emrnotebooks-prod.eu-central-1.amazonaws.com": 1,
  "emrstudio-prod.eu-central-1.amazonaws.com": 1,
  "emrappui-prod.eu-north-1.amazonaws.com": 1,
  "emrnotebooks-prod.eu-north-1.amazonaws.com": 1,
  "emrstudio-prod.eu-north-1.amazonaws.com": 1,
  "emrappui-prod.eu-south-1.amazonaws.com": 1,
  "emrnotebooks-prod.eu-south-1.amazonaws.com": 1,
  "emrstudio-prod.eu-south-1.amazonaws.com": 1,
  "emrappui-prod.eu-west-1.amazonaws.com": 1,
  "emrnotebooks-prod.eu-west-1.amazonaws.com": 1,
  "emrstudio-prod.eu-west-1.amazonaws.com": 1,
  "emrappui-prod.eu-west-2.amazonaws.com": 1,
  "emrnotebooks-prod.eu-west-2.amazonaws.com": 1,
  "emrstudio-prod.eu-west-2.amazonaws.com": 1,
  "emrappui-prod.eu-west-3.amazonaws.com": 1,
  "emrnotebooks-prod.eu-west-3.amazonaws.com": 1,
  "emrstudio-prod.eu-west-3.amazonaws.com": 1,
  "emrappui-prod.me-central-1.amazonaws.com": 1,
  "emrnotebooks-prod.me-central-1.amazonaws.com": 1,
  "emrstudio-prod.me-central-1.amazonaws.com": 1,
  "emrappui-prod.me-south-1.amazonaws.com": 1,
  "emrnotebooks-prod.me-south-1.amazonaws.com": 1,
  "emrstudio-prod.me-south-1.amazonaws.com": 1,
  "emrappui-prod.sa-east-1.amazonaws.com": 1,
  "emrnotebooks-prod.sa-east-1.amazonaws.com": 1,
  "emrstudio-prod.sa-east-1.amazonaws.com": 1,
  "emrappui-prod.us-east-1.amazonaws.com": 1,
  "emrnotebooks-prod.us-east-1.amazonaws.com": 1,
  "emrstudio-prod.us-east-1.amazonaws.com": 1,
  "emrappui-prod.us-east-2.amazonaws.com": 1,
  "emrnotebooks-prod.us-east-2.amazonaws.com": 1,
  "emrstudio-prod.us-east-2.amazonaws.com": 1,
  "emrappui-prod.us-gov-east-1.amazonaws.com": 1,
  "emrnotebooks-prod.us-gov-east-1.amazonaws.com": 1,
  "emrstudio-prod.us-gov-east-1.amazonaws.com": 1,
  "emrappui-prod.us-gov-west-1.amazonaws.com": 1,
  "emrnotebooks-prod.us-gov-west-1.amazonaws.com": 1,
  "emrstudio-prod.us-gov-west-1.amazonaws.com": 1,
  "emrappui-prod.us-west-1.amazonaws.com": 1,
  "emrnotebooks-prod.us-west-1.amazonaws.com": 1,
  "emrstudio-prod.us-west-1.amazonaws.com": 1,
  "emrappui-prod.us-west-2.amazonaws.com": 1,
  "emrnotebooks-prod.us-west-2.amazonaws.com": 1,
  "emrstudio-prod.us-west-2.amazonaws.com": 1,
  "cn-north-1.airflow.amazonaws.com.cn": 2,
  "cn-northwest-1.airflow.amazonaws.com.cn": 2,
  "ap-northeast-1.airflow.amazonaws.com": 2,
  "ap-northeast-2.airflow.amazonaws.com": 2,
  "ap-south-1.airflow.amazonaws.com": 2,
  "ap-southeast-1.airflow.amazonaws.com": 2,
  "ap-southeast-2.airflow.amazonaws.com": 2,
  "ca-central-1.airflow.amazonaws.com": 2,
  "eu-central-1.airflow.amazonaws.com": 2,
  "eu-north-1.airflow.amazonaws.com": 2,
  "eu-west-1.airflow.amazonaws.com": 2,
  "eu-west-2.airflow.amazonaws.com": 2,
  "eu-west-3.airflow.amazonaws.com": 2,
  "sa-east-1.airflow.amazonaws.com": 2,
  "us-east-1.airflow.amazonaws.com": 2,
  "us-east-2.airflow.amazonaws.com": 2,
  "us-west-2.airflow.amazonaws.com": 2,
  "s3.dualstack.cn-north-1.amazonaws.com.cn": 1,
  "s3-accesspoint.dualstack.cn-north-1.amazonaws.com.cn": 1,
  "s3-website.dualstack.cn-north-1.amazonaws.com.cn": 1,
  "s3.cn-north-1.amazonaws.com.cn": 1,
  "s3-accesspoint.cn-north-1.amazonaws.com.cn": 1,
  "s3-deprecated.cn-north-1.amazonaws.com.cn": 1,
  "s3-object-lambda.cn-north-1.amazonaws.com.cn": 1,
  "s3-website.cn-north-1.amazonaws.com.cn": 1,
  "s3.dualstack.cn-northwest-1.amazonaws.com.cn": 1,
  "s3-accesspoint.dualstack.cn-northwest-1.amazonaws.com.cn": 1,
  "s3.cn-northwest-1.amazonaws.com.cn": 1,
  "s3-accesspoint.cn-northwest-1.amazonaws.com.cn": 1,
  "s3-object-lambda.cn-northwest-1.amazonaws.com.cn": 1,
  "s3-website.cn-northwest-1.amazonaws.com.cn": 1,
  "s3.dualstack.af-south-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.af-south-1.amazonaws.com": 1,
  "s3-website.dualstack.af-south-1.amazonaws.com": 1,
  "s3.af-south-1.amazonaws.com": 1,
  "s3-accesspoint.af-south-1.amazonaws.com": 1,
  "s3-object-lambda.af-south-1.amazonaws.com": 1,
  "s3-website.af-south-1.amazonaws.com": 1,
  "s3.dualstack.ap-east-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-east-1.amazonaws.com": 1,
  "s3.ap-east-1.amazonaws.com": 1,
  "s3-accesspoint.ap-east-1.amazonaws.com": 1,
  "s3-object-lambda.ap-east-1.amazonaws.com": 1,
  "s3-website.ap-east-1.amazonaws.com": 1,
  "s3.dualstack.ap-northeast-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-northeast-1.amazonaws.com": 1,
  "s3-website.dualstack.ap-northeast-1.amazonaws.com": 1,
  "s3.ap-northeast-1.amazonaws.com": 1,
  "s3-accesspoint.ap-northeast-1.amazonaws.com": 1,
  "s3-object-lambda.ap-northeast-1.amazonaws.com": 1,
  "s3-website.ap-northeast-1.amazonaws.com": 1,
  "s3.dualstack.ap-northeast-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-northeast-2.amazonaws.com": 1,
  "s3-website.dualstack.ap-northeast-2.amazonaws.com": 1,
  "s3.ap-northeast-2.amazonaws.com": 1,
  "s3-accesspoint.ap-northeast-2.amazonaws.com": 1,
  "s3-object-lambda.ap-northeast-2.amazonaws.com": 1,
  "s3-website.ap-northeast-2.amazonaws.com": 1,
  "s3.dualstack.ap-northeast-3.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-northeast-3.amazonaws.com": 1,
  "s3-website.dualstack.ap-northeast-3.amazonaws.com": 1,
  "s3.ap-northeast-3.amazonaws.com": 1,
  "s3-accesspoint.ap-northeast-3.amazonaws.com": 1,
  "s3-object-lambda.ap-northeast-3.amazonaws.com": 1,
  "s3-website.ap-northeast-3.amazonaws.com": 1,
  "s3.dualstack.ap-south-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-south-1.amazonaws.com": 1,
  "s3-website.dualstack.ap-south-1.amazonaws.com": 1,
  "s3.ap-south-1.amazonaws.com": 1,
  "s3-accesspoint.ap-south-1.amazonaws.com": 1,
  "s3-object-lambda.ap-south-1.amazonaws.com": 1,
  "s3-website.ap-south-1.amazonaws.com": 1,
  "s3.dualstack.ap-south-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-south-2.amazonaws.com": 1,
  "s3.ap-south-2.amazonaws.com": 1,
  "s3-accesspoint.ap-south-2.amazonaws.com": 1,
  "s3-object-lambda.ap-south-2.amazonaws.com": 1,
  "s3-website.ap-south-2.amazonaws.com": 1,
  "s3.dualstack.ap-southeast-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-southeast-1.amazonaws.com": 1,
  "s3-website.dualstack.ap-southeast-1.amazonaws.com": 1,
  "s3.ap-southeast-1.amazonaws.com": 1,
  "s3-accesspoint.ap-southeast-1.amazonaws.com": 1,
  "s3-object-lambda.ap-southeast-1.amazonaws.com": 1,
  "s3-website.ap-southeast-1.amazonaws.com": 1,
  "s3.dualstack.ap-southeast-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-southeast-2.amazonaws.com": 1,
  "s3-website.dualstack.ap-southeast-2.amazonaws.com": 1,
  "s3.ap-southeast-2.amazonaws.com": 1,
  "s3-accesspoint.ap-southeast-2.amazonaws.com": 1,
  "s3-object-lambda.ap-southeast-2.amazonaws.com": 1,
  "s3-website.ap-southeast-2.amazonaws.com": 1,
  "s3.dualstack.ap-southeast-3.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-southeast-3.amazonaws.com": 1,
  "s3.ap-southeast-3.amazonaws.com": 1,
  "s3-accesspoint.ap-southeast-3.amazonaws.com": 1,
  "s3-object-lambda.ap-southeast-3.amazonaws.com": 1,
  "s3-website.ap-southeast-3.amazonaws.com": 1,
  "s3.dualstack.ap-southeast-4.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ap-southeast-4.amazonaws.com": 1,
  "s3.ap-southeast-4.amazonaws.com": 1,
  "s3-accesspoint.ap-southeast-4.amazonaws.com": 1,
  "s3-object-lambda.ap-southeast-4.amazonaws.com": 1,
  "s3-website.ap-southeast-4.amazonaws.com": 1,
  "s3.dualstack.ca-central-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.ca-central-1.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.ca-central-1.amazonaws.com": 1,
  "s3-fips.dualstack.ca-central-1.amazonaws.com": 1,
  "s3-website.dualstack.ca-central-1.amazonaws.com": 1,
  "s3.ca-central-1.amazonaws.com": 1,
  "s3-accesspoint.ca-central-1.amazonaws.com": 1,
  "s3-accesspoint-fips.ca-central-1.amazonaws.com": 1,
  "s3-fips.ca-central-1.amazonaws.com": 1,
  "s3-object-lambda.ca-central-1.amazonaws.com": 1,
  "s3-website.ca-central-1.amazonaws.com": 1,
  "s3.dualstack.eu-central-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-central-1.amazonaws.com": 1,
  "s3-website.dualstack.eu-central-1.amazonaws.com": 1,
  "s3.eu-central-1.amazonaws.com": 1,
  "s3-accesspoint.eu-central-1.amazonaws.com": 1,
  "s3-object-lambda.eu-central-1.amazonaws.com": 1,
  "s3-website.eu-central-1.amazonaws.com": 1,
  "s3.dualstack.eu-central-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-central-2.amazonaws.com": 1,
  "s3.eu-central-2.amazonaws.com": 1,
  "s3-accesspoint.eu-central-2.amazonaws.com": 1,
  "s3-object-lambda.eu-central-2.amazonaws.com": 1,
  "s3-website.eu-central-2.amazonaws.com": 1,
  "s3.dualstack.eu-north-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-north-1.amazonaws.com": 1,
  "s3.eu-north-1.amazonaws.com": 1,
  "s3-accesspoint.eu-north-1.amazonaws.com": 1,
  "s3-object-lambda.eu-north-1.amazonaws.com": 1,
  "s3-website.eu-north-1.amazonaws.com": 1,
  "s3.dualstack.eu-south-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-south-1.amazonaws.com": 1,
  "s3-website.dualstack.eu-south-1.amazonaws.com": 1,
  "s3.eu-south-1.amazonaws.com": 1,
  "s3-accesspoint.eu-south-1.amazonaws.com": 1,
  "s3-object-lambda.eu-south-1.amazonaws.com": 1,
  "s3-website.eu-south-1.amazonaws.com": 1,
  "s3.dualstack.eu-south-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-south-2.amazonaws.com": 1,
  "s3.eu-south-2.amazonaws.com": 1,
  "s3-accesspoint.eu-south-2.amazonaws.com": 1,
  "s3-object-lambda.eu-south-2.amazonaws.com": 1,
  "s3-website.eu-south-2.amazonaws.com": 1,
  "s3.dualstack.eu-west-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-west-1.amazonaws.com": 1,
  "s3-website.dualstack.eu-west-1.amazonaws.com": 1,
  "s3.eu-west-1.amazonaws.com": 1,
  "s3-accesspoint.eu-west-1.amazonaws.com": 1,
  "s3-deprecated.eu-west-1.amazonaws.com": 1,
  "s3-object-lambda.eu-west-1.amazonaws.com": 1,
  "s3-website.eu-west-1.amazonaws.com": 1,
  "s3.dualstack.eu-west-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-west-2.amazonaws.com": 1,
  "s3.eu-west-2.amazonaws.com": 1,
  "s3-accesspoint.eu-west-2.amazonaws.com": 1,
  "s3-object-lambda.eu-west-2.amazonaws.com": 1,
  "s3-website.eu-west-2.amazonaws.com": 1,
  "s3.dualstack.eu-west-3.amazonaws.com": 1,
  "s3-accesspoint.dualstack.eu-west-3.amazonaws.com": 1,
  "s3-website.dualstack.eu-west-3.amazonaws.com": 1,
  "s3.eu-west-3.amazonaws.com": 1,
  "s3-accesspoint.eu-west-3.amazonaws.com": 1,
  "s3-object-lambda.eu-west-3.amazonaws.com": 1,
  "s3-website.eu-west-3.amazonaws.com": 1,
  "s3.dualstack.il-central-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.il-central-1.amazonaws.com": 1,
  "s3.il-central-1.amazonaws.com": 1,
  "s3-accesspoint.il-central-1.amazonaws.com": 1,
  "s3-object-lambda.il-central-1.amazonaws.com": 1,
  "s3-website.il-central-1.amazonaws.com": 1,
  "s3.dualstack.me-central-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.me-central-1.amazonaws.com": 1,
  "s3.me-central-1.amazonaws.com": 1,
  "s3-accesspoint.me-central-1.amazonaws.com": 1,
  "s3-object-lambda.me-central-1.amazonaws.com": 1,
  "s3-website.me-central-1.amazonaws.com": 1,
  "s3.dualstack.me-south-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.me-south-1.amazonaws.com": 1,
  "s3.me-south-1.amazonaws.com": 1,
  "s3-accesspoint.me-south-1.amazonaws.com": 1,
  "s3-object-lambda.me-south-1.amazonaws.com": 1,
  "s3-website.me-south-1.amazonaws.com": 1,
  "s3.amazonaws.com": 1,
  "s3-1.amazonaws.com": 1,
  "s3-ap-east-1.amazonaws.com": 1,
  "s3-ap-northeast-1.amazonaws.com": 1,
  "s3-ap-northeast-2.amazonaws.com": 1,
  "s3-ap-northeast-3.amazonaws.com": 1,
  "s3-ap-south-1.amazonaws.com": 1,
  "s3-ap-southeast-1.amazonaws.com": 1,
  "s3-ap-southeast-2.amazonaws.com": 1,
  "s3-ca-central-1.amazonaws.com": 1,
  "s3-eu-central-1.amazonaws.com": 1,
  "s3-eu-north-1.amazonaws.com": 1,
  "s3-eu-west-1.amazonaws.com": 1,
  "s3-eu-west-2.amazonaws.com": 1,
  "s3-eu-west-3.amazonaws.com": 1,
  "s3-external-1.amazonaws.com": 1,
  "s3-fips-us-gov-east-1.amazonaws.com": 1,
  "s3-fips-us-gov-west-1.amazonaws.com": 1,
  "mrap.accesspoint.s3-global.amazonaws.com": 1,
  "s3-me-south-1.amazonaws.com": 1,
  "s3-sa-east-1.amazonaws.com": 1,
  "s3-us-east-2.amazonaws.com": 1,
  "s3-us-gov-east-1.amazonaws.com": 1,
  "s3-us-gov-west-1.amazonaws.com": 1,
  "s3-us-west-1.amazonaws.com": 1,
  "s3-us-west-2.amazonaws.com": 1,
  "s3-website-ap-northeast-1.amazonaws.com": 1,
  "s3-website-ap-southeast-1.amazonaws.com": 1,
  "s3-website-ap-southeast-2.amazonaws.com": 1,
  "s3-website-eu-west-1.amazonaws.com": 1,
  "s3-website-sa-east-1.amazonaws.com": 1,
  "s3-website-us-east-1.amazonaws.com": 1,
  "s3-website-us-gov-west-1.amazonaws.com": 1,
  "s3-website-us-west-1.amazonaws.com": 1,
  "s3-website-us-west-2.amazonaws.com": 1,
  "s3.dualstack.sa-east-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.sa-east-1.amazonaws.com": 1,
  "s3-website.dualstack.sa-east-1.amazonaws.com": 1,
  "s3.sa-east-1.amazonaws.com": 1,
  "s3-accesspoint.sa-east-1.amazonaws.com": 1,
  "s3-object-lambda.sa-east-1.amazonaws.com": 1,
  "s3-website.sa-east-1.amazonaws.com": 1,
  "s3.dualstack.us-east-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.us-east-1.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.us-east-1.amazonaws.com": 1,
  "s3-fips.dualstack.us-east-1.amazonaws.com": 1,
  "s3-website.dualstack.us-east-1.amazonaws.com": 1,
  "s3.us-east-1.amazonaws.com": 1,
  "s3-accesspoint.us-east-1.amazonaws.com": 1,
  "s3-accesspoint-fips.us-east-1.amazonaws.com": 1,
  "s3-deprecated.us-east-1.amazonaws.com": 1,
  "s3-fips.us-east-1.amazonaws.com": 1,
  "s3-object-lambda.us-east-1.amazonaws.com": 1,
  "s3-website.us-east-1.amazonaws.com": 1,
  "s3.dualstack.us-east-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.us-east-2.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.us-east-2.amazonaws.com": 1,
  "s3-fips.dualstack.us-east-2.amazonaws.com": 1,
  "s3.us-east-2.amazonaws.com": 1,
  "s3-accesspoint.us-east-2.amazonaws.com": 1,
  "s3-accesspoint-fips.us-east-2.amazonaws.com": 1,
  "s3-deprecated.us-east-2.amazonaws.com": 1,
  "s3-fips.us-east-2.amazonaws.com": 1,
  "s3-object-lambda.us-east-2.amazonaws.com": 1,
  "s3-website.us-east-2.amazonaws.com": 1,
  "s3.dualstack.us-gov-east-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.us-gov-east-1.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.us-gov-east-1.amazonaws.com": 1,
  "s3-fips.dualstack.us-gov-east-1.amazonaws.com": 1,
  "s3.us-gov-east-1.amazonaws.com": 1,
  "s3-accesspoint.us-gov-east-1.amazonaws.com": 1,
  "s3-accesspoint-fips.us-gov-east-1.amazonaws.com": 1,
  "s3-fips.us-gov-east-1.amazonaws.com": 1,
  "s3-object-lambda.us-gov-east-1.amazonaws.com": 1,
  "s3-website.us-gov-east-1.amazonaws.com": 1,
  "s3.dualstack.us-gov-west-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.us-gov-west-1.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.us-gov-west-1.amazonaws.com": 1,
  "s3-fips.dualstack.us-gov-west-1.amazonaws.com": 1,
  "s3.us-gov-west-1.amazonaws.com": 1,
  "s3-accesspoint.us-gov-west-1.amazonaws.com": 1,
  "s3-accesspoint-fips.us-gov-west-1.amazonaws.com": 1,
  "s3-fips.us-gov-west-1.amazonaws.com": 1,
  "s3-object-lambda.us-gov-west-1.amazonaws.com": 1,
  "s3-website.us-gov-west-1.amazonaws.com": 1,
  "s3.dualstack.us-west-1.amazonaws.com": 1,
  "s3-accesspoint.dualstack.us-west-1.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.us-west-1.amazonaws.com": 1,
  "s3-fips.dualstack.us-west-1.amazonaws.com": 1,
  "s3-website.dualstack.us-west-1.amazonaws.com": 1,
  "s3.us-west-1.amazonaws.com": 1,
  "s3-accesspoint.us-west-1.amazonaws.com": 1,
  "s3-accesspoint-fips.us-west-1.amazonaws.com": 1,
  "s3-fips.us-west-1.amazonaws.com": 1,
  "s3-object-lambda.us-west-1.amazonaws.com": 1,
  "s3-website.us-west-1.amazonaws.com": 1,
  "s3.dualstack.us-west-2.amazonaws.com": 1,
  "s3-accesspoint.dualstack.us-west-2.amazonaws.com": 1,
  "s3-accesspoint-fips.dualstack.us-west-2.amazonaws.com": 1,
  "s3-fips.dualstack.us-west-2.amazonaws.com": 1,
  "s3-website.dualstack.us-west-2.amazonaws.com": 1,
  "s3.us-west-2.amazonaws.com": 1,
  "s3-accesspoint.us-west-2.amazonaws.com": 1,
  "s3-accesspoint-fips.us-west-2.amazonaws.com": 1,
  "s3-deprecated.us-west-2.amazonaws.com": 1,
  "s3-fips.us-west-2.amazonaws.com": 1,
  "s3-object-lambda.us-west-2.amazonaws.com": 1,
  "s3-website.us-west-2.amazonaws.com": 1,
  "notebook.af-south-1.sagemaker.aws": 1,
  "notebook.ap-east-1.sagemaker.aws": 1,
  "notebook.ap-northeast-1.sagemaker.aws": 1,
  "notebook.ap-northeast-2.sagemaker.aws": 1,
  "notebook.ap-northeast-3.sagemaker.aws": 1,
  "notebook.ap-south-1.sagemaker.aws": 1,
  "notebook.ap-south-2.sagemaker.aws": 1,
  "notebook.ap-southeast-1.sagemaker.aws": 1,
  "notebook.ap-southeast-2.sagemaker.aws": 1,
  "notebook.ap-southeast-3.sagemaker.aws": 1,
  "notebook.ap-southeast-4.sagemaker.aws": 1,
  "notebook.ca-central-1.sagemaker.aws": 1,
  "notebook.eu-central-1.sagemaker.aws": 1,
  "notebook.eu-central-2.sagemaker.aws": 1,
  "notebook.eu-north-1.sagemaker.aws": 1,
  "notebook.eu-south-1.sagemaker.aws": 1,
  "notebook.eu-south-2.sagemaker.aws": 1,
  "notebook.eu-west-1.sagemaker.aws": 1,
  "notebook.eu-west-2.sagemaker.aws": 1,
  "notebook.eu-west-3.sagemaker.aws": 1,
  "notebook.il-central-1.sagemaker.aws": 1,
  "notebook.me-central-1.sagemaker.aws": 1,
  "notebook.me-south-1.sagemaker.aws": 1,
  "notebook.sa-east-1.sagemaker.aws": 1,
  "notebook.us-east-1.sagemaker.aws": 1,
  "notebook-fips.us-east-1.sagemaker.aws": 1,
  "notebook.us-east-2.sagemaker.aws": 1,
  "notebook-fips.us-east-2.sagemaker.aws": 1,
  "notebook.us-gov-east-1.sagemaker.aws": 1,
  "notebook-fips.us-gov-east-1.sagemaker.aws": 1,
  "notebook.us-gov-west-1.sagemaker.aws": 1,
  "notebook-fips.us-gov-west-1.sagemaker.aws": 1,
  "notebook.us-west-1.sagemaker.aws": 1,
  "notebook.us-west-2.sagemaker.aws": 1,
  "notebook-fips.us-west-2.sagemaker.aws": 1,
  "notebook.cn-north-1.sagemaker.com.cn": 1,
  "notebook.cn-northwest-1.sagemaker.com.cn": 1,
  "studio.af-south-1.sagemaker.aws": 1,
  "studio.ap-east-1.sagemaker.aws": 1,
  "studio.ap-northeast-1.sagemaker.aws": 1,
  "studio.ap-northeast-2.sagemaker.aws": 1,
  "studio.ap-northeast-3.sagemaker.aws": 1,
  "studio.ap-south-1.sagemaker.aws": 1,
  "studio.ap-southeast-1.sagemaker.aws": 1,
  "studio.ap-southeast-2.sagemaker.aws": 1,
  "studio.ap-southeast-3.sagemaker.aws": 1,
  "studio.ca-central-1.sagemaker.aws": 1,
  "studio.eu-central-1.sagemaker.aws": 1,
  "studio.eu-north-1.sagemaker.aws": 1,
  "studio.eu-south-1.sagemaker.aws": 1,
  "studio.eu-west-1.sagemaker.aws": 1,
  "studio.eu-west-2.sagemaker.aws": 1,
  "studio.eu-west-3.sagemaker.aws": 1,
  "studio.il-central-1.sagemaker.aws": 1,
  "studio.me-central-1.sagemaker.aws": 1,
  "studio.me-south-1.sagemaker.aws": 1,
  "studio.sa-east-1.sagemaker.aws": 1,
  "studio.us-east-1.sagemaker.aws": 1,
  "studio.us-east-2.sagemaker.aws": 1,
  "studio.us-gov-east-1.sagemaker.aws": 1,
  "studio-fips.us-gov-east-1.sagemaker.aws": 1,
  "studio.us-gov-west-1.sagemaker.aws": 1,
  "studio-fips.us-gov-west-1.sagemaker.aws": 1,
  "studio.us-west-1.sagemaker.aws": 1,
  "studio.us-west-2.sagemaker.aws": 1,
  "studio.cn-north-1.sagemaker.com.cn": 1,
  "studio.cn-northwest-1.sagemaker.com.cn": 1,
  "analytics-gateway.ap-northeast-1.amazonaws.com": 1,
  "analytics-gateway.ap-northeast-2.amazonaws.com": 1,
  "analytics-gateway.ap-south-1.amazonaws.com": 1,
  "analytics-gateway.ap-southeast-1.amazonaws.com": 1,
  "analytics-gateway.ap-southeast-2.amazonaws.com": 1,
  "analytics-gateway.eu-central-1.amazonaws.com": 1,
  "analytics-gateway.eu-west-1.amazonaws.com": 1,
  "analytics-gateway.us-east-1.amazonaws.com": 1,
  "analytics-gateway.us-east-2.amazonaws.com": 1,
  "analytics-gateway.us-west-2.amazonaws.com": 1,
  "amplifyapp.com": 2,
  "awsapprunner.com": 2,
  "webview-assets.aws-cloud9.af-south-1.amazonaws.com": 1,
  "vfs.cloud9.af-south-1.amazonaws.com": 1,
  "webview-assets.cloud9.af-south-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-east-1.amazonaws.com": 1,
  "vfs.cloud9.ap-east-1.amazonaws.com": 1,
  "webview-assets.cloud9.ap-east-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-northeast-1.amazonaws.com": 1,
  "vfs.cloud9.ap-northeast-1.amazonaws.com": 1,
  "webview-assets.cloud9.ap-northeast-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-northeast-2.amazonaws.com": 1,
  "vfs.cloud9.ap-northeast-2.amazonaws.com": 1,
  "webview-assets.cloud9.ap-northeast-2.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-northeast-3.amazonaws.com": 1,
  "vfs.cloud9.ap-northeast-3.amazonaws.com": 1,
  "webview-assets.cloud9.ap-northeast-3.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-south-1.amazonaws.com": 1,
  "vfs.cloud9.ap-south-1.amazonaws.com": 1,
  "webview-assets.cloud9.ap-south-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-southeast-1.amazonaws.com": 1,
  "vfs.cloud9.ap-southeast-1.amazonaws.com": 1,
  "webview-assets.cloud9.ap-southeast-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ap-southeast-2.amazonaws.com": 1,
  "vfs.cloud9.ap-southeast-2.amazonaws.com": 1,
  "webview-assets.cloud9.ap-southeast-2.amazonaws.com": 1,
  "webview-assets.aws-cloud9.ca-central-1.amazonaws.com": 1,
  "vfs.cloud9.ca-central-1.amazonaws.com": 1,
  "webview-assets.cloud9.ca-central-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.eu-central-1.amazonaws.com": 1,
  "vfs.cloud9.eu-central-1.amazonaws.com": 1,
  "webview-assets.cloud9.eu-central-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.eu-north-1.amazonaws.com": 1,
  "vfs.cloud9.eu-north-1.amazonaws.com": 1,
  "webview-assets.cloud9.eu-north-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.eu-south-1.amazonaws.com": 1,
  "vfs.cloud9.eu-south-1.amazonaws.com": 1,
  "webview-assets.cloud9.eu-south-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.eu-west-1.amazonaws.com": 1,
  "vfs.cloud9.eu-west-1.amazonaws.com": 1,
  "webview-assets.cloud9.eu-west-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.eu-west-2.amazonaws.com": 1,
  "vfs.cloud9.eu-west-2.amazonaws.com": 1,
  "webview-assets.cloud9.eu-west-2.amazonaws.com": 1,
  "webview-assets.aws-cloud9.eu-west-3.amazonaws.com": 1,
  "vfs.cloud9.eu-west-3.amazonaws.com": 1,
  "webview-assets.cloud9.eu-west-3.amazonaws.com": 1,
  "webview-assets.aws-cloud9.me-south-1.amazonaws.com": 1,
  "vfs.cloud9.me-south-1.amazonaws.com": 1,
  "webview-assets.cloud9.me-south-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.sa-east-1.amazonaws.com": 1,
  "vfs.cloud9.sa-east-1.amazonaws.com": 1,
  "webview-assets.cloud9.sa-east-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.us-east-1.amazonaws.com": 1,
  "vfs.cloud9.us-east-1.amazonaws.com": 1,
  "webview-assets.cloud9.us-east-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.us-east-2.amazonaws.com": 1,
  "vfs.cloud9.us-east-2.amazonaws.com": 1,
  "webview-assets.cloud9.us-east-2.amazonaws.com": 1,
  "webview-assets.aws-cloud9.us-west-1.amazonaws.com": 1,
  "vfs.cloud9.us-west-1.amazonaws.com": 1,
  "webview-assets.cloud9.us-west-1.amazonaws.com": 1,
  "webview-assets.aws-cloud9.us-west-2.amazonaws.com": 1,
  "vfs.cloud9.us-west-2.amazonaws.com": 1,
  "webview-assets.cloud9.us-west-2.amazonaws.com": 1,
  "cn-north-1.eb.amazonaws.com.cn": 1,
  "cn-northwest-1.eb.amazonaws.com.cn": 1,
  "elasticbeanstalk.com": 1,
  "af-south-1.elasticbeanstalk.com": 1,
  "ap-east-1.elasticbeanstalk.com": 1,
  "ap-northeast-1.elasticbeanstalk.com": 1,
  "ap-northeast-2.elasticbeanstalk.com": 1,
  "ap-northeast-3.elasticbeanstalk.com": 1,
  "ap-south-1.elasticbeanstalk.com": 1,
  "ap-southeast-1.elasticbeanstalk.com": 1,
  "ap-southeast-2.elasticbeanstalk.com": 1,
  "ap-southeast-3.elasticbeanstalk.com": 1,
  "ca-central-1.elasticbeanstalk.com": 1,
  "eu-central-1.elasticbeanstalk.com": 1,
  "eu-north-1.elasticbeanstalk.com": 1,
  "eu-south-1.elasticbeanstalk.com": 1,
  "eu-west-1.elasticbeanstalk.com": 1,
  "eu-west-2.elasticbeanstalk.com": 1,
  "eu-west-3.elasticbeanstalk.com": 1,
  "il-central-1.elasticbeanstalk.com": 1,
  "me-south-1.elasticbeanstalk.com": 1,
  "sa-east-1.elasticbeanstalk.com": 1,
  "us-east-1.elasticbeanstalk.com": 1,
  "us-east-2.elasticbeanstalk.com": 1,
  "us-gov-east-1.elasticbeanstalk.com": 1,
  "us-gov-west-1.elasticbeanstalk.com": 1,
  "us-west-1.elasticbeanstalk.com": 1,
  "us-west-2.elasticbeanstalk.com": 1,
  "elb.amazonaws.com.cn": 2,
  "elb.amazonaws.com": 2,
  "awsglobalaccelerator.com": 1,
  "eero.online": 1,
  "eero-stage.online": 1,
  "t3l3p0rt.net": 1,
  "tele.amune.org": 1,
  "apigee.io": 1,
  "siiites.com": 1,
  "appspacehosted.com": 1,
  "appspaceusercontent.com": 1,
  "appudo.net": 1,
  "on-aptible.com": 1,
  "user.aseinet.ne.jp": 1,
  "gv.vc": 1,
  "d.gv.vc": 1,
  "user.party.eus": 1,
  "pimienta.org": 1,
  "poivron.org": 1,
  "potager.org": 1,
  "sweetpepper.org": 1,
  "myasustor.com": 1,
  "cdn.prod.atlassian-dev.net": 1,
  "translated.page": 1,
  "autocode.dev": 1,
  "myfritz.net": 1,
  "onavstack.net": 1,
  "awdev.ca": 2,
  "advisor.ws": 2,
  "ecommerce-shop.pl": 1,
  "b-data.io": 1,
  "backplaneapp.io": 1,
  "balena-devices.com": 1,
  "rs.ba": 1,
  "banzai.cloud": 2,
  "app.banzaicloud.io": 1,
  "backyards.banzaicloud.io": 2,
  "base.ec": 1,
  "official.ec": 1,
  "buyshop.jp": 1,
  "fashionstore.jp": 1,
  "handcrafted.jp": 1,
  "kawaiishop.jp": 1,
  "supersale.jp": 1,
  "theshop.jp": 1,
  "shopselect.net": 1,
  "base.shop": 1,
  "beagleboard.io": 1,
  "beget.app": 2,
  "betainabox.com": 1,
  "bnr.la": 1,
  "bitbucket.io": 1,
  "blackbaudcdn.net": 1,
  "of.je": 1,
  "bluebite.io": 1,
  "boomla.net": 1,
  "boutir.com": 1,
  "boxfuse.io": 1,
  "square7.ch": 1,
  "bplaced.com": 1,
  "bplaced.de": 1,
  "square7.de": 1,
  "bplaced.net": 1,
  "square7.net": 1,
  "shop.brendly.rs": 1,
  "browsersafetymark.io": 1,
  "uk0.bigv.io": 1,
  "dh.bytemark.co.uk": 1,
  "vm.bytemark.co.uk": 1,
  "cafjs.com": 1,
  "mycd.eu": 1,
  "canva-apps.cn": 1,
  "canva-apps.com": 1,
  "drr.ac": 1,
  "uwu.ai": 1,
  "carrd.co": 1,
  "crd.co": 1,
  "ju.mp": 1,
  "ae.org": 1,
  "br.com": 1,
  "cn.com": 1,
  "com.de": 1,
  "com.se": 1,
  "de.com": 1,
  "eu.com": 1,
  "gb.net": 1,
  "hu.net": 1,
  "jp.net": 1,
  "jpn.com": 1,
  "mex.com": 1,
  "ru.com": 1,
  "sa.com": 1,
  "se.net": 1,
  "uk.com": 1,
  "uk.net": 1,
  "us.com": 1,
  "za.bz": 1,
  "za.com": 1,
  "ar.com": 1,
  "hu.com": 1,
  "kr.com": 1,
  "no.com": 1,
  "qc.com": 1,
  "uy.com": 1,
  "africa.com": 1,
  "gr.com": 1,
  "in.net": 1,
  "web.in": 1,
  "us.org": 1,
  "co.com": 1,
  "aus.basketball": 1,
  "nz.basketball": 1,
  "radio.am": 1,
  "radio.fm": 1,
  "c.la": 1,
  "certmgr.org": 1,
  "cx.ua": 1,
  "discourse.group": 1,
  "discourse.team": 1,
  "cleverapps.io": 1,
  "clerk.app": 1,
  "clerkstage.app": 1,
  "lcl.dev": 2,
  "lclstage.dev": 2,
  "stg.dev": 2,
  "stgstage.dev": 2,
  "clickrising.net": 1,
  "c66.me": 1,
  "cloud66.ws": 1,
  "cloud66.zone": 1,
  "jdevcloud.com": 1,
  "wpdevcloud.com": 1,
  "cloudaccess.host": 1,
  "freesite.host": 1,
  "cloudaccess.net": 1,
  "cloudcontrolled.com": 1,
  "cloudcontrolapp.com": 1,
  "cloudera.site": 2,
  "cf-ipfs.com": 1,
  "cloudflare-ipfs.com": 1,
  "trycloudflare.com": 1,
  "pages.dev": 1,
  "r2.dev": 1,
  "workers.dev": 1,
  "wnext.app": 1,
  "co.ca": 1,
  "otap.co": 2,
  "co.cz": 1,
  "c.cdn77.org": 1,
  "cdn77-ssl.net": 1,
  "r.cdn77.net": 1,
  "rsc.cdn77.org": 1,
  "ssl.origin.cdn77-secure.org": 1,
  "cloudns.asia": 1,
  "cloudns.biz": 1,
  "cloudns.club": 1,
  "cloudns.cc": 1,
  "cloudns.eu": 1,
  "cloudns.in": 1,
  "cloudns.info": 1,
  "cloudns.org": 1,
  "cloudns.pro": 1,
  "cloudns.pw": 1,
  "cloudns.us": 1,
  "cnpy.gdn": 1,
  "codeberg.page": 1,
  "co.nl": 1,
  "co.no": 1,
  "webhosting.be": 1,
  "hosting-cluster.nl": 1,
  "ac.ru": 1,
  "edu.ru": 1,
  "gov.ru": 1,
  "int.ru": 1,
  "mil.ru": 1,
  "test.ru": 1,
  "dyn.cosidns.de": 1,
  "dynamisches-dns.de": 1,
  "dnsupdater.de": 1,
  "internet-dns.de": 1,
  "l-o-g-i-n.de": 1,
  "dynamic-dns.info": 1,
  "feste-ip.net": 1,
  "knx-server.net": 1,
  "static-access.net": 1,
  "realm.cz": 1,
  "cryptonomic.net": 2,
  "cupcake.is": 1,
  "curv.dev": 1,
  "customer-oci.com": 2,
  "oci.customer-oci.com": 2,
  "ocp.customer-oci.com": 2,
  "ocs.customer-oci.com": 2,
  "cyon.link": 1,
  "cyon.site": 1,
  "fnwk.site": 1,
  "folionetwork.site": 1,
  "platform0.app": 1,
  "daplie.me": 1,
  "localhost.daplie.me": 1,
  "dattolocal.com": 1,
  "dattorelay.com": 1,
  "dattoweb.com": 1,
  "mydatto.com": 1,
  "dattolocal.net": 1,
  "mydatto.net": 1,
  "biz.dk": 1,
  "co.dk": 1,
  "firm.dk": 1,
  "reg.dk": 1,
  "store.dk": 1,
  "dyndns.dappnode.io": 1,
  "dapps.earth": 2,
  "bzz.dapps.earth": 2,
  "builtwithdark.com": 1,
  "demo.datadetect.com": 1,
  "instance.datadetect.com": 1,
  "edgestack.me": 1,
  "ddns5.com": 1,
  "debian.net": 1,
  "deno.dev": 1,
  "deno-staging.dev": 1,
  "dedyn.io": 1,
  "deta.app": 1,
  "deta.dev": 1,
  "rss.my.id": 2,
  "diher.solutions": 2,
  "discordsays.com": 1,
  "discordsez.com": 1,
  "jozi.biz": 1,
  "dnshome.de": 1,
  "online.th": 1,
  "shop.th": 1,
  "drayddns.com": 1,
  "shoparena.pl": 1,
  "dreamhosters.com": 1,
  "mydrobo.com": 1,
  "drud.io": 1,
  "drud.us": 1,
  "duckdns.org": 1,
  "bip.sh": 1,
  "bitbridge.net": 1,
  "dy.fi": 1,
  "tunk.org": 1,
  "dyndns-at-home.com": 1,
  "dyndns-at-work.com": 1,
  "dyndns-blog.com": 1,
  "dyndns-free.com": 1,
  "dyndns-home.com": 1,
  "dyndns-ip.com": 1,
  "dyndns-mail.com": 1,
  "dyndns-office.com": 1,
  "dyndns-pics.com": 1,
  "dyndns-remote.com": 1,
  "dyndns-server.com": 1,
  "dyndns-web.com": 1,
  "dyndns-wiki.com": 1,
  "dyndns-work.com": 1,
  "dyndns.biz": 1,
  "dyndns.info": 1,
  "dyndns.org": 1,
  "dyndns.tv": 1,
  "at-band-camp.net": 1,
  "ath.cx": 1,
  "barrel-of-knowledge.info": 1,
  "barrell-of-knowledge.info": 1,
  "better-than.tv": 1,
  "blogdns.com": 1,
  "blogdns.net": 1,
  "blogdns.org": 1,
  "blogsite.org": 1,
  "boldlygoingnowhere.org": 1,
  "broke-it.net": 1,
  "buyshouses.net": 1,
  "cechire.com": 1,
  "dnsalias.com": 1,
  "dnsalias.net": 1,
  "dnsalias.org": 1,
  "dnsdojo.com": 1,
  "dnsdojo.net": 1,
  "dnsdojo.org": 1,
  "does-it.net": 1,
  "doesntexist.com": 1,
  "doesntexist.org": 1,
  "dontexist.com": 1,
  "dontexist.net": 1,
  "dontexist.org": 1,
  "doomdns.com": 1,
  "doomdns.org": 1,
  "dvrdns.org": 1,
  "dyn-o-saur.com": 1,
  "dynalias.com": 1,
  "dynalias.net": 1,
  "dynalias.org": 1,
  "dynathome.net": 1,
  "dyndns.ws": 1,
  "endofinternet.net": 1,
  "endofinternet.org": 1,
  "endoftheinternet.org": 1,
  "est-a-la-maison.com": 1,
  "est-a-la-masion.com": 1,
  "est-le-patron.com": 1,
  "est-mon-blogueur.com": 1,
  "for-better.biz": 1,
  "for-more.biz": 1,
  "for-our.info": 1,
  "for-some.biz": 1,
  "for-the.biz": 1,
  "forgot.her.name": 1,
  "forgot.his.name": 1,
  "from-ak.com": 1,
  "from-al.com": 1,
  "from-ar.com": 1,
  "from-az.net": 1,
  "from-ca.com": 1,
  "from-co.net": 1,
  "from-ct.com": 1,
  "from-dc.com": 1,
  "from-de.com": 1,
  "from-fl.com": 1,
  "from-ga.com": 1,
  "from-hi.com": 1,
  "from-ia.com": 1,
  "from-id.com": 1,
  "from-il.com": 1,
  "from-in.com": 1,
  "from-ks.com": 1,
  "from-ky.com": 1,
  "from-la.net": 1,
  "from-ma.com": 1,
  "from-md.com": 1,
  "from-me.org": 1,
  "from-mi.com": 1,
  "from-mn.com": 1,
  "from-mo.com": 1,
  "from-ms.com": 1,
  "from-mt.com": 1,
  "from-nc.com": 1,
  "from-nd.com": 1,
  "from-ne.com": 1,
  "from-nh.com": 1,
  "from-nj.com": 1,
  "from-nm.com": 1,
  "from-nv.com": 1,
  "from-ny.net": 1,
  "from-oh.com": 1,
  "from-ok.com": 1,
  "from-or.com": 1,
  "from-pa.com": 1,
  "from-pr.com": 1,
  "from-ri.com": 1,
  "from-sc.com": 1,
  "from-sd.com": 1,
  "from-tn.com": 1,
  "from-tx.com": 1,
  "from-ut.com": 1,
  "from-va.com": 1,
  "from-vt.com": 1,
  "from-wa.com": 1,
  "from-wi.com": 1,
  "from-wv.com": 1,
  "from-wy.com": 1,
  "ftpaccess.cc": 1,
  "fuettertdasnetz.de": 1,
  "game-host.org": 1,
  "game-server.cc": 1,
  "getmyip.com": 1,
  "gets-it.net": 1,
  "go.dyndns.org": 1,
  "gotdns.com": 1,
  "gotdns.org": 1,
  "groks-the.info": 1,
  "groks-this.info": 1,
  "ham-radio-op.net": 1,
  "here-for-more.info": 1,
  "hobby-site.com": 1,
  "hobby-site.org": 1,
  "home.dyndns.org": 1,
  "homedns.org": 1,
  "homeftp.net": 1,
  "homeftp.org": 1,
  "homeip.net": 1,
  "homelinux.com": 1,
  "homelinux.net": 1,
  "homelinux.org": 1,
  "homeunix.com": 1,
  "homeunix.net": 1,
  "homeunix.org": 1,
  "iamallama.com": 1,
  "in-the-band.net": 1,
  "is-a-anarchist.com": 1,
  "is-a-blogger.com": 1,
  "is-a-bookkeeper.com": 1,
  "is-a-bruinsfan.org": 1,
  "is-a-bulls-fan.com": 1,
  "is-a-candidate.org": 1,
  "is-a-caterer.com": 1,
  "is-a-celticsfan.org": 1,
  "is-a-chef.com": 1,
  "is-a-chef.net": 1,
  "is-a-chef.org": 1,
  "is-a-conservative.com": 1,
  "is-a-cpa.com": 1,
  "is-a-cubicle-slave.com": 1,
  "is-a-democrat.com": 1,
  "is-a-designer.com": 1,
  "is-a-doctor.com": 1,
  "is-a-financialadvisor.com": 1,
  "is-a-geek.com": 1,
  "is-a-geek.net": 1,
  "is-a-geek.org": 1,
  "is-a-green.com": 1,
  "is-a-guru.com": 1,
  "is-a-hard-worker.com": 1,
  "is-a-hunter.com": 1,
  "is-a-knight.org": 1,
  "is-a-landscaper.com": 1,
  "is-a-lawyer.com": 1,
  "is-a-liberal.com": 1,
  "is-a-libertarian.com": 1,
  "is-a-linux-user.org": 1,
  "is-a-llama.com": 1,
  "is-a-musician.com": 1,
  "is-a-nascarfan.com": 1,
  "is-a-nurse.com": 1,
  "is-a-painter.com": 1,
  "is-a-patsfan.org": 1,
  "is-a-personaltrainer.com": 1,
  "is-a-photographer.com": 1,
  "is-a-player.com": 1,
  "is-a-republican.com": 1,
  "is-a-rockstar.com": 1,
  "is-a-socialist.com": 1,
  "is-a-soxfan.org": 1,
  "is-a-student.com": 1,
  "is-a-teacher.com": 1,
  "is-a-techie.com": 1,
  "is-a-therapist.com": 1,
  "is-an-accountant.com": 1,
  "is-an-actor.com": 1,
  "is-an-actress.com": 1,
  "is-an-anarchist.com": 1,
  "is-an-artist.com": 1,
  "is-an-engineer.com": 1,
  "is-an-entertainer.com": 1,
  "is-by.us": 1,
  "is-certified.com": 1,
  "is-found.org": 1,
  "is-gone.com": 1,
  "is-into-anime.com": 1,
  "is-into-cars.com": 1,
  "is-into-cartoons.com": 1,
  "is-into-games.com": 1,
  "is-leet.com": 1,
  "is-lost.org": 1,
  "is-not-certified.com": 1,
  "is-saved.org": 1,
  "is-slick.com": 1,
  "is-uberleet.com": 1,
  "is-very-bad.org": 1,
  "is-very-evil.org": 1,
  "is-very-good.org": 1,
  "is-very-nice.org": 1,
  "is-very-sweet.org": 1,
  "is-with-theband.com": 1,
  "isa-geek.com": 1,
  "isa-geek.net": 1,
  "isa-geek.org": 1,
  "isa-hockeynut.com": 1,
  "issmarterthanyou.com": 1,
  "isteingeek.de": 1,
  "istmein.de": 1,
  "kicks-ass.net": 1,
  "kicks-ass.org": 1,
  "knowsitall.info": 1,
  "land-4-sale.us": 1,
  "lebtimnetz.de": 1,
  "leitungsen.de": 1,
  "likes-pie.com": 1,
  "likescandy.com": 1,
  "merseine.nu": 1,
  "mine.nu": 1,
  "misconfused.org": 1,
  "mypets.ws": 1,
  "myphotos.cc": 1,
  "neat-url.com": 1,
  "office-on-the.net": 1,
  "on-the-web.tv": 1,
  "podzone.net": 1,
  "podzone.org": 1,
  "readmyblog.org": 1,
  "saves-the-whales.com": 1,
  "scrapper-site.net": 1,
  "scrapping.cc": 1,
  "selfip.biz": 1,
  "selfip.com": 1,
  "selfip.info": 1,
  "selfip.net": 1,
  "selfip.org": 1,
  "sells-for-less.com": 1,
  "sells-for-u.com": 1,
  "sells-it.net": 1,
  "sellsyourhome.org": 1,
  "servebbs.com": 1,
  "servebbs.net": 1,
  "servebbs.org": 1,
  "serveftp.net": 1,
  "serveftp.org": 1,
  "servegame.org": 1,
  "shacknet.nu": 1,
  "simple-url.com": 1,
  "space-to-rent.com": 1,
  "stuff-4-sale.org": 1,
  "stuff-4-sale.us": 1,
  "teaches-yoga.com": 1,
  "thruhere.net": 1,
  "traeumtgerade.de": 1,
  "webhop.biz": 1,
  "webhop.info": 1,
  "webhop.net": 1,
  "webhop.org": 1,
  "worse-than.tv": 1,
  "writesthisblog.com": 1,
  "ddnss.de": 1,
  "dyn.ddnss.de": 1,
  "dyndns.ddnss.de": 1,
  "dyndns1.de": 1,
  "dyn-ip24.de": 1,
  "home-webserver.de": 1,
  "dyn.home-webserver.de": 1,
  "myhome-server.de": 1,
  "ddnss.org": 1,
  "definima.net": 1,
  "definima.io": 1,
  "ondigitalocean.app": 1,
  "digitaloceanspaces.com": 2,
  "bci.dnstrace.pro": 1,
  "ddnsfree.com": 1,
  "ddnsgeek.com": 1,
  "giize.com": 1,
  "gleeze.com": 1,
  "kozow.com": 1,
  "loseyourip.com": 1,
  "ooguy.com": 1,
  "theworkpc.com": 1,
  "casacam.net": 1,
  "dynu.net": 1,
  "accesscam.org": 1,
  "camdvr.org": 1,
  "freeddns.org": 1,
  "mywire.org": 1,
  "webredirect.org": 1,
  "myddns.rocks": 1,
  "blogsite.xyz": 1,
  "dynv6.net": 1,
  "e4.cz": 1,
  "easypanel.app": 1,
  "easypanel.host": 1,
  "elementor.cloud": 1,
  "elementor.cool": 1,
  "en-root.fr": 1,
  "mytuleap.com": 1,
  "tuleap-partners.com": 1,
  "encr.app": 1,
  "encoreapi.com": 1,
  "onred.one": 1,
  "staging.onred.one": 1,
  "eu.encoway.cloud": 1,
  "eu.org": 1,
  "al.eu.org": 1,
  "asso.eu.org": 1,
  "at.eu.org": 1,
  "au.eu.org": 1,
  "be.eu.org": 1,
  "bg.eu.org": 1,
  "ca.eu.org": 1,
  "cd.eu.org": 1,
  "ch.eu.org": 1,
  "cn.eu.org": 1,
  "cy.eu.org": 1,
  "cz.eu.org": 1,
  "de.eu.org": 1,
  "dk.eu.org": 1,
  "edu.eu.org": 1,
  "ee.eu.org": 1,
  "es.eu.org": 1,
  "fi.eu.org": 1,
  "fr.eu.org": 1,
  "gr.eu.org": 1,
  "hr.eu.org": 1,
  "hu.eu.org": 1,
  "ie.eu.org": 1,
  "il.eu.org": 1,
  "in.eu.org": 1,
  "int.eu.org": 1,
  "is.eu.org": 1,
  "it.eu.org": 1,
  "jp.eu.org": 1,
  "kr.eu.org": 1,
  "lt.eu.org": 1,
  "lu.eu.org": 1,
  "lv.eu.org": 1,
  "mc.eu.org": 1,
  "me.eu.org": 1,
  "mk.eu.org": 1,
  "mt.eu.org": 1,
  "my.eu.org": 1,
  "net.eu.org": 1,
  "ng.eu.org": 1,
  "nl.eu.org": 1,
  "no.eu.org": 1,
  "nz.eu.org": 1,
  "paris.eu.org": 1,
  "pl.eu.org": 1,
  "pt.eu.org": 1,
  "q-a.eu.org": 1,
  "ro.eu.org": 1,
  "ru.eu.org": 1,
  "se.eu.org": 1,
  "si.eu.org": 1,
  "sk.eu.org": 1,
  "tr.eu.org": 1,
  "uk.eu.org": 1,
  "us.eu.org": 1,
  "eurodir.ru": 1,
  "eu-1.evennode.com": 1,
  "eu-2.evennode.com": 1,
  "eu-3.evennode.com": 1,
  "eu-4.evennode.com": 1,
  "us-1.evennode.com": 1,
  "us-2.evennode.com": 1,
  "us-3.evennode.com": 1,
  "us-4.evennode.com": 1,
  "twmail.cc": 1,
  "twmail.net": 1,
  "twmail.org": 1,
  "mymailer.com.tw": 1,
  "url.tw": 1,
  "onfabrica.com": 1,
  "apps.fbsbx.com": 1,
  "ru.net": 1,
  "adygeya.ru": 1,
  "bashkiria.ru": 1,
  "bir.ru": 1,
  "cbg.ru": 1,
  "com.ru": 1,
  "dagestan.ru": 1,
  "grozny.ru": 1,
  "kalmykia.ru": 1,
  "kustanai.ru": 1,
  "marine.ru": 1,
  "mordovia.ru": 1,
  "msk.ru": 1,
  "mytis.ru": 1,
  "nalchik.ru": 1,
  "nov.ru": 1,
  "pyatigorsk.ru": 1,
  "spb.ru": 1,
  "vladikavkaz.ru": 1,
  "vladimir.ru": 1,
  "abkhazia.su": 1,
  "adygeya.su": 1,
  "aktyubinsk.su": 1,
  "arkhangelsk.su": 1,
  "armenia.su": 1,
  "ashgabad.su": 1,
  "azerbaijan.su": 1,
  "balashov.su": 1,
  "bashkiria.su": 1,
  "bryansk.su": 1,
  "bukhara.su": 1,
  "chimkent.su": 1,
  "dagestan.su": 1,
  "east-kazakhstan.su": 1,
  "exnet.su": 1,
  "georgia.su": 1,
  "grozny.su": 1,
  "ivanovo.su": 1,
  "jambyl.su": 1,
  "kalmykia.su": 1,
  "kaluga.su": 1,
  "karacol.su": 1,
  "karaganda.su": 1,
  "karelia.su": 1,
  "khakassia.su": 1,
  "krasnodar.su": 1,
  "kurgan.su": 1,
  "kustanai.su": 1,
  "lenug.su": 1,
  "mangyshlak.su": 1,
  "mordovia.su": 1,
  "msk.su": 1,
  "murmansk.su": 1,
  "nalchik.su": 1,
  "navoi.su": 1,
  "north-kazakhstan.su": 1,
  "nov.su": 1,
  "obninsk.su": 1,
  "penza.su": 1,
  "pokrovsk.su": 1,
  "sochi.su": 1,
  "spb.su": 1,
  "tashkent.su": 1,
  "termez.su": 1,
  "togliatti.su": 1,
  "troitsk.su": 1,
  "tselinograd.su": 1,
  "tula.su": 1,
  "tuva.su": 1,
  "vladikavkaz.su": 1,
  "vladimir.su": 1,
  "vologda.su": 1,
  "channelsdvr.net": 1,
  "u.channelsdvr.net": 1,
  "edgecompute.app": 1,
  "fastly-edge.com": 1,
  "fastly-terrarium.com": 1,
  "fastlylb.net": 1,
  "map.fastlylb.net": 1,
  "freetls.fastly.net": 1,
  "map.fastly.net": 1,
  "a.prod.fastly.net": 1,
  "global.prod.fastly.net": 1,
  "a.ssl.fastly.net": 1,
  "b.ssl.fastly.net": 1,
  "global.ssl.fastly.net": 1,
  "user.fm": 2,
  "fastvps-server.com": 1,
  "fastvps.host": 1,
  "myfast.host": 1,
  "fastvps.site": 1,
  "myfast.space": 1,
  "fedorainfracloud.org": 1,
  "fedorapeople.org": 1,
  "cloud.fedoraproject.org": 1,
  "app.os.fedoraproject.org": 1,
  "app.os.stg.fedoraproject.org": 1,
  "conn.uk": 1,
  "copro.uk": 1,
  "hosp.uk": 1,
  "mydobiss.com": 1,
  "fh-muenster.io": 1,
  "filegear.me": 1,
  "filegear-au.me": 1,
  "filegear-de.me": 1,
  "filegear-gb.me": 1,
  "filegear-ie.me": 1,
  "filegear-jp.me": 1,
  "filegear-sg.me": 1,
  "firebaseapp.com": 1,
  "fireweb.app": 1,
  "flap.id": 1,
  "onflashdrive.app": 1,
  "fldrv.com": 1,
  "fly.dev": 1,
  "edgeapp.net": 1,
  "shw.io": 1,
  "flynnhosting.net": 1,
  "forgeblocks.com": 1,
  "id.forgerock.io": 1,
  "framer.app": 1,
  "framercanvas.com": 1,
  "framer.media": 1,
  "framer.photos": 1,
  "framer.website": 1,
  "framer.wiki": 1,
  "frusky.de": 2,
  "ravpage.co.il": 1,
  "0e.vc": 1,
  "freebox-os.com": 1,
  "freeboxos.com": 1,
  "fbx-os.fr": 1,
  "fbxos.fr": 1,
  "freebox-os.fr": 1,
  "freeboxos.fr": 1,
  "freedesktop.org": 1,
  "freemyip.com": 1,
  "wien.funkfeuer.at": 1,
  "futurecms.at": 2,
  "ex.futurecms.at": 2,
  "in.futurecms.at": 2,
  "futurehosting.at": 1,
  "futuremailing.at": 1,
  "ex.ortsinfo.at": 2,
  "kunden.ortsinfo.at": 2,
  "statics.cloud": 2,
  "independent-commission.uk": 1,
  "independent-inquest.uk": 1,
  "independent-inquiry.uk": 1,
  "independent-panel.uk": 1,
  "independent-review.uk": 1,
  "public-inquiry.uk": 1,
  "royal-commission.uk": 1,
  "campaign.gov.uk": 1,
  "service.gov.uk": 1,
  "api.gov.uk": 1,
  "gehirn.ne.jp": 1,
  "usercontent.jp": 1,
  "gentapps.com": 1,
  "gentlentapis.com": 1,
  "lab.ms": 1,
  "cdn-edges.net": 1,
  "ghost.io": 1,
  "gsj.bz": 1,
  "githubusercontent.com": 1,
  "githubpreview.dev": 1,
  "github.io": 1,
  "gitlab.io": 1,
  "gitapp.si": 1,
  "gitpage.si": 1,
  "glitch.me": 1,
  "nog.community": 1,
  "co.ro": 1,
  "shop.ro": 1,
  "lolipop.io": 1,
  "angry.jp": 1,
  "babyblue.jp": 1,
  "babymilk.jp": 1,
  "backdrop.jp": 1,
  "bambina.jp": 1,
  "bitter.jp": 1,
  "blush.jp": 1,
  "boo.jp": 1,
  "boy.jp": 1,
  "boyfriend.jp": 1,
  "but.jp": 1,
  "candypop.jp": 1,
  "capoo.jp": 1,
  "catfood.jp": 1,
  "cheap.jp": 1,
  "chicappa.jp": 1,
  "chillout.jp": 1,
  "chips.jp": 1,
  "chowder.jp": 1,
  "chu.jp": 1,
  "ciao.jp": 1,
  "cocotte.jp": 1,
  "coolblog.jp": 1,
  "cranky.jp": 1,
  "cutegirl.jp": 1,
  "daa.jp": 1,
  "deca.jp": 1,
  "deci.jp": 1,
  "digick.jp": 1,
  "egoism.jp": 1,
  "fakefur.jp": 1,
  "fem.jp": 1,
  "flier.jp": 1,
  "floppy.jp": 1,
  "fool.jp": 1,
  "frenchkiss.jp": 1,
  "girlfriend.jp": 1,
  "girly.jp": 1,
  "gloomy.jp": 1,
  "gonna.jp": 1,
  "greater.jp": 1,
  "hacca.jp": 1,
  "heavy.jp": 1,
  "her.jp": 1,
  "hiho.jp": 1,
  "hippy.jp": 1,
  "holy.jp": 1,
  "hungry.jp": 1,
  "icurus.jp": 1,
  "itigo.jp": 1,
  "jellybean.jp": 1,
  "kikirara.jp": 1,
  "kill.jp": 1,
  "kilo.jp": 1,
  "kuron.jp": 1,
  "littlestar.jp": 1,
  "lolipopmc.jp": 1,
  "lolitapunk.jp": 1,
  "lomo.jp": 1,
  "lovepop.jp": 1,
  "lovesick.jp": 1,
  "main.jp": 1,
  "mods.jp": 1,
  "mond.jp": 1,
  "mongolian.jp": 1,
  "moo.jp": 1,
  "namaste.jp": 1,
  "nikita.jp": 1,
  "nobushi.jp": 1,
  "noor.jp": 1,
  "oops.jp": 1,
  "parallel.jp": 1,
  "parasite.jp": 1,
  "pecori.jp": 1,
  "peewee.jp": 1,
  "penne.jp": 1,
  "pepper.jp": 1,
  "perma.jp": 1,
  "pigboat.jp": 1,
  "pinoko.jp": 1,
  "punyu.jp": 1,
  "pupu.jp": 1,
  "pussycat.jp": 1,
  "pya.jp": 1,
  "raindrop.jp": 1,
  "readymade.jp": 1,
  "sadist.jp": 1,
  "schoolbus.jp": 1,
  "secret.jp": 1,
  "staba.jp": 1,
  "stripper.jp": 1,
  "sub.jp": 1,
  "sunnyday.jp": 1,
  "thick.jp": 1,
  "tonkotsu.jp": 1,
  "under.jp": 1,
  "upper.jp": 1,
  "velvet.jp": 1,
  "verse.jp": 1,
  "versus.jp": 1,
  "vivian.jp": 1,
  "watson.jp": 1,
  "weblike.jp": 1,
  "whitesnow.jp": 1,
  "zombie.jp": 1,
  "heteml.net": 1,
  "cloudapps.digital": 1,
  "london.cloudapps.digital": 1,
  "pymnt.uk": 1,
  "homeoffice.gov.uk": 1,
  "ro.im": 1,
  "goip.de": 1,
  "run.app": 1,
  "a.run.app": 1,
  "web.app": 1,
  "0emm.com": 2,
  "appspot.com": 1,
  "r.appspot.com": 2,
  "codespot.com": 1,
  "googleapis.com": 1,
  "googlecode.com": 1,
  "pagespeedmobilizer.com": 1,
  "publishproxy.com": 1,
  "withgoogle.com": 1,
  "withyoutube.com": 1,
  "gateway.dev": 2,
  "cloud.goog": 1,
  "translate.goog": 1,
  "usercontent.goog": 2,
  "cloudfunctions.net": 1,
  "blogspot.ae": 1,
  "blogspot.al": 1,
  "blogspot.am": 1,
  "blogspot.ba": 1,
  "blogspot.be": 1,
  "blogspot.bg": 1,
  "blogspot.bj": 1,
  "blogspot.ca": 1,
  "blogspot.cf": 1,
  "blogspot.ch": 1,
  "blogspot.cl": 1,
  "blogspot.co.at": 1,
  "blogspot.co.id": 1,
  "blogspot.co.il": 1,
  "blogspot.co.ke": 1,
  "blogspot.co.nz": 1,
  "blogspot.co.uk": 1,
  "blogspot.co.za": 1,
  "blogspot.com": 1,
  "blogspot.com.ar": 1,
  "blogspot.com.au": 1,
  "blogspot.com.br": 1,
  "blogspot.com.by": 1,
  "blogspot.com.co": 1,
  "blogspot.com.cy": 1,
  "blogspot.com.ee": 1,
  "blogspot.com.eg": 1,
  "blogspot.com.es": 1,
  "blogspot.com.mt": 1,
  "blogspot.com.ng": 1,
  "blogspot.com.tr": 1,
  "blogspot.com.uy": 1,
  "blogspot.cv": 1,
  "blogspot.cz": 1,
  "blogspot.de": 1,
  "blogspot.dk": 1,
  "blogspot.fi": 1,
  "blogspot.fr": 1,
  "blogspot.gr": 1,
  "blogspot.hk": 1,
  "blogspot.hr": 1,
  "blogspot.hu": 1,
  "blogspot.ie": 1,
  "blogspot.in": 1,
  "blogspot.is": 1,
  "blogspot.it": 1,
  "blogspot.jp": 1,
  "blogspot.kr": 1,
  "blogspot.li": 1,
  "blogspot.lt": 1,
  "blogspot.lu": 1,
  "blogspot.md": 1,
  "blogspot.mk": 1,
  "blogspot.mr": 1,
  "blogspot.mx": 1,
  "blogspot.my": 1,
  "blogspot.nl": 1,
  "blogspot.no": 1,
  "blogspot.pe": 1,
  "blogspot.pt": 1,
  "blogspot.qa": 1,
  "blogspot.re": 1,
  "blogspot.ro": 1,
  "blogspot.rs": 1,
  "blogspot.ru": 1,
  "blogspot.se": 1,
  "blogspot.sg": 1,
  "blogspot.si": 1,
  "blogspot.sk": 1,
  "blogspot.sn": 1,
  "blogspot.td": 1,
  "blogspot.tw": 1,
  "blogspot.ug": 1,
  "blogspot.vn": 1,
  "goupile.fr": 1,
  "gov.nl": 1,
  "awsmppl.com": 1,
  "xn--gnstigbestellen-zvb.de": 1,
  "xn--gnstigliefern-wob.de": 1,
  "fin.ci": 1,
  "free.hr": 1,
  "caa.li": 1,
  "ua.rs": 1,
  "conf.se": 1,
  "hs.zone": 1,
  "hs.run": 1,
  "hashbang.sh": 1,
  "hasura.app": 1,
  "hasura-app.io": 1,
  "pages.it.hs-heilbronn.de": 1,
  "hepforge.org": 1,
  "herokuapp.com": 1,
  "herokussl.com": 1,
  "ravendb.cloud": 1,
  "ravendb.community": 1,
  "ravendb.me": 1,
  "development.run": 1,
  "ravendb.run": 1,
  "homesklep.pl": 1,
  "secaas.hk": 1,
  "hoplix.shop": 1,
  "orx.biz": 1,
  "biz.gl": 1,
  "col.ng": 1,
  "firm.ng": 1,
  "gen.ng": 1,
  "ltd.ng": 1,
  "ngo.ng": 1,
  "edu.scot": 1,
  "sch.so": 1,
  "ie.ua": 1,
  "hostyhosting.io": 1,
  "xn--hkkinen-5wa.fi": 1,
  "moonscale.io": 2,
  "moonscale.net": 1,
  "iki.fi": 1,
  "ibxos.it": 1,
  "iliadboxos.it": 1,
  "impertrixcdn.com": 1,
  "impertrix.com": 1,
  "smushcdn.com": 1,
  "wphostedmail.com": 1,
  "wpmucdn.com": 1,
  "tempurl.host": 1,
  "wpmudev.host": 1,
  "dyn-berlin.de": 1,
  "in-berlin.de": 1,
  "in-brb.de": 1,
  "in-butter.de": 1,
  "in-dsl.de": 1,
  "in-dsl.net": 1,
  "in-dsl.org": 1,
  "in-vpn.de": 1,
  "in-vpn.net": 1,
  "in-vpn.org": 1,
  "biz.at": 1,
  "info.at": 1,
  "info.cx": 1,
  "ac.leg.br": 1,
  "al.leg.br": 1,
  "am.leg.br": 1,
  "ap.leg.br": 1,
  "ba.leg.br": 1,
  "ce.leg.br": 1,
  "df.leg.br": 1,
  "es.leg.br": 1,
  "go.leg.br": 1,
  "ma.leg.br": 1,
  "mg.leg.br": 1,
  "ms.leg.br": 1,
  "mt.leg.br": 1,
  "pa.leg.br": 1,
  "pb.leg.br": 1,
  "pe.leg.br": 1,
  "pi.leg.br": 1,
  "pr.leg.br": 1,
  "rj.leg.br": 1,
  "rn.leg.br": 1,
  "ro.leg.br": 1,
  "rr.leg.br": 1,
  "rs.leg.br": 1,
  "sc.leg.br": 1,
  "se.leg.br": 1,
  "sp.leg.br": 1,
  "to.leg.br": 1,
  "pixolino.com": 1,
  "na4u.ru": 1,
  "iopsys.se": 1,
  "ipifony.net": 1,
  "iservschule.de": 1,
  "mein-iserv.de": 1,
  "schulplattform.de": 1,
  "schulserver.de": 1,
  "test-iserv.de": 1,
  "iserv.dev": 1,
  "iobb.net": 1,
  "mel.cloudlets.com.au": 1,
  "cloud.interhostsolutions.be": 1,
  "mycloud.by": 1,
  "alp1.ae.flow.ch": 1,
  "appengine.flow.ch": 1,
  "es-1.axarnet.cloud": 1,
  "diadem.cloud": 1,
  "vip.jelastic.cloud": 1,
  "jele.cloud": 1,
  "it1.eur.aruba.jenv-aruba.cloud": 1,
  "it1.jenv-aruba.cloud": 1,
  "keliweb.cloud": 1,
  "cs.keliweb.cloud": 1,
  "oxa.cloud": 1,
  "tn.oxa.cloud": 1,
  "uk.oxa.cloud": 1,
  "primetel.cloud": 1,
  "uk.primetel.cloud": 1,
  "ca.reclaim.cloud": 1,
  "uk.reclaim.cloud": 1,
  "us.reclaim.cloud": 1,
  "ch.trendhosting.cloud": 1,
  "de.trendhosting.cloud": 1,
  "jele.club": 1,
  "amscompute.com": 1,
  "dopaas.com": 1,
  "paas.hosted-by-previder.com": 1,
  "rag-cloud.hosteur.com": 1,
  "rag-cloud-ch.hosteur.com": 1,
  "jcloud.ik-server.com": 1,
  "jcloud-ver-jpc.ik-server.com": 1,
  "demo.jelastic.com": 1,
  "kilatiron.com": 1,
  "paas.massivegrid.com": 1,
  "jed.wafaicloud.com": 1,
  "lon.wafaicloud.com": 1,
  "ryd.wafaicloud.com": 1,
  "j.scaleforce.com.cy": 1,
  "jelastic.dogado.eu": 1,
  "fi.cloudplatform.fi": 1,
  "demo.datacenter.fi": 1,
  "paas.datacenter.fi": 1,
  "jele.host": 1,
  "mircloud.host": 1,
  "paas.beebyte.io": 1,
  "sekd1.beebyteapp.io": 1,
  "jele.io": 1,
  "cloud-fr1.unispace.io": 1,
  "jc.neen.it": 1,
  "cloud.jelastic.open.tim.it": 1,
  "jcloud.kz": 1,
  "upaas.kazteleport.kz": 1,
  "cloudjiffy.net": 1,
  "fra1-de.cloudjiffy.net": 1,
  "west1-us.cloudjiffy.net": 1,
  "jls-sto1.elastx.net": 1,
  "jls-sto2.elastx.net": 1,
  "jls-sto3.elastx.net": 1,
  "faststacks.net": 1,
  "fr-1.paas.massivegrid.net": 1,
  "lon-1.paas.massivegrid.net": 1,
  "lon-2.paas.massivegrid.net": 1,
  "ny-1.paas.massivegrid.net": 1,
  "ny-2.paas.massivegrid.net": 1,
  "sg-1.paas.massivegrid.net": 1,
  "jelastic.saveincloud.net": 1,
  "nordeste-idc.saveincloud.net": 1,
  "j.scaleforce.net": 1,
  "jelastic.tsukaeru.net": 1,
  "sdscloud.pl": 1,
  "unicloud.pl": 1,
  "mircloud.ru": 1,
  "jelastic.regruhosting.ru": 1,
  "enscaled.sg": 1,
  "jele.site": 1,
  "jelastic.team": 1,
  "orangecloud.tn": 1,
  "j.layershift.co.uk": 1,
  "phx.enscaled.us": 1,
  "mircloud.us": 1,
  "myjino.ru": 1,
  "hosting.myjino.ru": 2,
  "landing.myjino.ru": 2,
  "spectrum.myjino.ru": 2,
  "vps.myjino.ru": 2,
  "jotelulu.cloud": 1,
  "triton.zone": 2,
  "cns.joyent.com": 2,
  "js.org": 1,
  "kaas.gg": 1,
  "khplay.nl": 1,
  "ktistory.com": 1,
  "kapsi.fi": 1,
  "keymachine.de": 1,
  "kinghost.net": 1,
  "uni5.net": 1,
  "knightpoint.systems": 1,
  "koobin.events": 1,
  "oya.to": 1,
  "kuleuven.cloud": 1,
  "ezproxy.kuleuven.be": 1,
  "co.krd": 1,
  "edu.krd": 1,
  "krellian.net": 1,
  "webthings.io": 1,
  "git-repos.de": 1,
  "lcube-server.de": 1,
  "svn-repos.de": 1,
  "leadpages.co": 1,
  "lpages.co": 1,
  "lpusercontent.com": 1,
  "lelux.site": 1,
  "co.business": 1,
  "co.education": 1,
  "co.events": 1,
  "co.financial": 1,
  "co.network": 1,
  "co.place": 1,
  "co.technology": 1,
  "app.lmpm.com": 1,
  "linkyard.cloud": 1,
  "linkyard-cloud.ch": 1,
  "members.linode.com": 1,
  "nodebalancer.linode.com": 2,
  "linodeobjects.com": 2,
  "ip.linodeusercontent.com": 1,
  "we.bs": 1,
  "user.localcert.dev": 2,
  "localzone.xyz": 1,
  "loginline.app": 1,
  "loginline.dev": 1,
  "loginline.io": 1,
  "loginline.services": 1,
  "loginline.site": 1,
  "servers.run": 1,
  "lohmus.me": 1,
  "krasnik.pl": 1,
  "leczna.pl": 1,
  "lubartow.pl": 1,
  "lublin.pl": 1,
  "poniatowa.pl": 1,
  "swidnik.pl": 1,
  "glug.org.uk": 1,
  "lug.org.uk": 1,
  "lugs.org.uk": 1,
  "barsy.bg": 1,
  "barsy.co.uk": 1,
  "barsyonline.co.uk": 1,
  "barsycenter.com": 1,
  "barsyonline.com": 1,
  "barsy.club": 1,
  "barsy.de": 1,
  "barsy.eu": 1,
  "barsy.in": 1,
  "barsy.info": 1,
  "barsy.io": 1,
  "barsy.me": 1,
  "barsy.menu": 1,
  "barsy.mobi": 1,
  "barsy.net": 1,
  "barsy.online": 1,
  "barsy.org": 1,
  "barsy.pro": 1,
  "barsy.pub": 1,
  "barsy.ro": 1,
  "barsy.shop": 1,
  "barsy.site": 1,
  "barsy.support": 1,
  "barsy.uk": 1,
  "magentosite.cloud": 2,
  "mayfirst.info": 1,
  "mayfirst.org": 1,
  "hb.cldmail.ru": 1,
  "cn.vu": 1,
  "mazeplay.com": 1,
  "mcpe.me": 1,
  "mcdir.me": 1,
  "mcdir.ru": 1,
  "mcpre.ru": 1,
  "vps.mcdir.ru": 1,
  "mediatech.by": 1,
  "mediatech.dev": 1,
  "hra.health": 1,
  "miniserver.com": 1,
  "memset.net": 1,
  "messerli.app": 1,
  "cloud.metacentrum.cz": 2,
  "custom.metacentrum.cz": 1,
  "flt.cloud.muni.cz": 1,
  "usr.cloud.muni.cz": 1,
  "meteorapp.com": 1,
  "eu.meteorapp.com": 1,
  "co.pl": 1,
  "azurecontainer.io": 2,
  "azurewebsites.net": 1,
  "azure-mobile.net": 1,
  "cloudapp.net": 1,
  "azurestaticapps.net": 1,
  "1.azurestaticapps.net": 1,
  "2.azurestaticapps.net": 1,
  "3.azurestaticapps.net": 1,
  "4.azurestaticapps.net": 1,
  "5.azurestaticapps.net": 1,
  "6.azurestaticapps.net": 1,
  "7.azurestaticapps.net": 1,
  "centralus.azurestaticapps.net": 1,
  "eastasia.azurestaticapps.net": 1,
  "eastus2.azurestaticapps.net": 1,
  "westeurope.azurestaticapps.net": 1,
  "westus2.azurestaticapps.net": 1,
  "csx.cc": 1,
  "mintere.site": 1,
  "forte.id": 1,
  "mozilla-iot.org": 1,
  "bmoattachments.org": 1,
  "net.ru": 1,
  "org.ru": 1,
  "pp.ru": 1,
  "hostedpi.com": 1,
  "customer.mythic-beasts.com": 1,
  "caracal.mythic-beasts.com": 1,
  "fentiger.mythic-beasts.com": 1,
  "lynx.mythic-beasts.com": 1,
  "ocelot.mythic-beasts.com": 1,
  "oncilla.mythic-beasts.com": 1,
  "onza.mythic-beasts.com": 1,
  "sphinx.mythic-beasts.com": 1,
  "vs.mythic-beasts.com": 1,
  "x.mythic-beasts.com": 1,
  "yali.mythic-beasts.com": 1,
  "cust.retrosnub.co.uk": 1,
  "ui.nabu.casa": 1,
  "cloud.nospamproxy.com": 1,
  "netlify.app": 1,
  "4u.com": 1,
  "ngrok.app": 1,
  "ngrok-free.app": 1,
  "ngrok.dev": 1,
  "ngrok-free.dev": 1,
  "ngrok.io": 1,
  "ap.ngrok.io": 1,
  "au.ngrok.io": 1,
  "eu.ngrok.io": 1,
  "in.ngrok.io": 1,
  "jp.ngrok.io": 1,
  "sa.ngrok.io": 1,
  "us.ngrok.io": 1,
  "ngrok.pizza": 1,
  "torun.pl": 1,
  "nh-serv.co.uk": 1,
  "nfshost.com": 1,
  "developer.app": 2,
  "noop.app": 1,
  "northflank.app": 2,
  "build.run": 2,
  "code.run": 2,
  "database.run": 2,
  "migration.run": 2,
  "noticeable.news": 1,
  "dnsking.ch": 1,
  "mypi.co": 1,
  "n4t.co": 1,
  "001www.com": 1,
  "ddnslive.com": 1,
  "myiphost.com": 1,
  "forumz.info": 1,
  "16-b.it": 1,
  "32-b.it": 1,
  "64-b.it": 1,
  "soundcast.me": 1,
  "tcp4.me": 1,
  "dnsup.net": 1,
  "hicam.net": 1,
  "now-dns.net": 1,
  "ownip.net": 1,
  "vpndns.net": 1,
  "dynserv.org": 1,
  "now-dns.org": 1,
  "x443.pw": 1,
  "now-dns.top": 1,
  "ntdll.top": 1,
  "freeddns.us": 1,
  "crafting.xyz": 1,
  "zapto.xyz": 1,
  "nsupdate.info": 1,
  "nerdpol.ovh": 1,
  "blogsyte.com": 1,
  "brasilia.me": 1,
  "cable-modem.org": 1,
  "ciscofreak.com": 1,
  "collegefan.org": 1,
  "couchpotatofries.org": 1,
  "damnserver.com": 1,
  "ddns.me": 1,
  "ditchyourip.com": 1,
  "dnsfor.me": 1,
  "dnsiskinky.com": 1,
  "dvrcam.info": 1,
  "dynns.com": 1,
  "eating-organic.net": 1,
  "fantasyleague.cc": 1,
  "geekgalaxy.com": 1,
  "golffan.us": 1,
  "health-carereform.com": 1,
  "homesecuritymac.com": 1,
  "homesecuritypc.com": 1,
  "hopto.me": 1,
  "ilovecollege.info": 1,
  "loginto.me": 1,
  "mlbfan.org": 1,
  "mmafan.biz": 1,
  "myactivedirectory.com": 1,
  "mydissent.net": 1,
  "myeffect.net": 1,
  "mymediapc.net": 1,
  "mypsx.net": 1,
  "mysecuritycamera.com": 1,
  "mysecuritycamera.net": 1,
  "mysecuritycamera.org": 1,
  "net-freaks.com": 1,
  "nflfan.org": 1,
  "nhlfan.net": 1,
  "no-ip.ca": 1,
  "no-ip.co.uk": 1,
  "no-ip.net": 1,
  "noip.us": 1,
  "onthewifi.com": 1,
  "pgafan.net": 1,
  "point2this.com": 1,
  "pointto.us": 1,
  "privatizehealthinsurance.net": 1,
  "quicksytes.com": 1,
  "read-books.org": 1,
  "securitytactics.com": 1,
  "serveexchange.com": 1,
  "servehumour.com": 1,
  "servep2p.com": 1,
  "servesarcasm.com": 1,
  "stufftoread.com": 1,
  "ufcfan.org": 1,
  "unusualperson.com": 1,
  "workisboring.com": 1,
  "3utilities.com": 1,
  "bounceme.net": 1,
  "ddns.net": 1,
  "ddnsking.com": 1,
  "gotdns.ch": 1,
  "hopto.org": 1,
  "myftp.biz": 1,
  "myftp.org": 1,
  "myvnc.com": 1,
  "no-ip.biz": 1,
  "no-ip.info": 1,
  "no-ip.org": 1,
  "noip.me": 1,
  "redirectme.net": 1,
  "servebeer.com": 1,
  "serveblog.net": 1,
  "servecounterstrike.com": 1,
  "serveftp.com": 1,
  "servegame.com": 1,
  "servehalflife.com": 1,
  "servehttp.com": 1,
  "serveirc.com": 1,
  "serveminecraft.net": 1,
  "servemp3.com": 1,
  "servepics.com": 1,
  "servequake.com": 1,
  "sytes.net": 1,
  "webhop.me": 1,
  "zapto.org": 1,
  "stage.nodeart.io": 1,
  "pcloud.host": 1,
  "nyc.mn": 1,
  "static.observableusercontent.com": 1,
  "cya.gg": 1,
  "omg.lol": 1,
  "cloudycluster.net": 1,
  "omniwe.site": 1,
  "123hjemmeside.dk": 1,
  "123hjemmeside.no": 1,
  "123homepage.it": 1,
  "123kotisivu.fi": 1,
  "123minsida.se": 1,
  "123miweb.es": 1,
  "123paginaweb.pt": 1,
  "123sait.ru": 1,
  "123siteweb.fr": 1,
  "123webseite.at": 1,
  "123webseite.de": 1,
  "123website.be": 1,
  "123website.ch": 1,
  "123website.lu": 1,
  "123website.nl": 1,
  "service.one": 1,
  "simplesite.com": 1,
  "simplesite.com.br": 1,
  "simplesite.gr": 1,
  "simplesite.pl": 1,
  "nid.io": 1,
  "opensocial.site": 1,
  "opencraft.hosting": 1,
  "orsites.com": 1,
  "operaunite.com": 1,
  "tech.orange": 1,
  "authgear-staging.com": 1,
  "authgearapps.com": 1,
  "skygearapp.com": 1,
  "outsystemscloud.com": 1,
  "webpaas.ovh.net": 2,
  "hosting.ovh.net": 2,
  "ownprovider.com": 1,
  "own.pm": 1,
  "owo.codes": 2,
  "ox.rs": 1,
  "oy.lc": 1,
  "pgfog.com": 1,
  "pagefrontapp.com": 1,
  "pagexl.com": 1,
  "paywhirl.com": 2,
  "bar0.net": 1,
  "bar1.net": 1,
  "bar2.net": 1,
  "rdv.to": 1,
  "art.pl": 1,
  "gliwice.pl": 1,
  "krakow.pl": 1,
  "poznan.pl": 1,
  "wroc.pl": 1,
  "zakopane.pl": 1,
  "pantheonsite.io": 1,
  "gotpantheon.com": 1,
  "mypep.link": 1,
  "perspecta.cloud": 1,
  "lk3.ru": 1,
  "on-web.fr": 1,
  "bc.platform.sh": 1,
  "ent.platform.sh": 1,
  "eu.platform.sh": 1,
  "us.platform.sh": 1,
  "platformsh.site": 2,
  "tst.site": 2,
  "platter-app.com": 1,
  "platter-app.dev": 1,
  "platterp.us": 1,
  "pdns.page": 1,
  "plesk.page": 1,
  "pleskns.com": 1,
  "dyn53.io": 1,
  "onporter.run": 1,
  "co.bn": 1,
  "postman-echo.com": 1,
  "pstmn.io": 1,
  "mock.pstmn.io": 1,
  "httpbin.org": 1,
  "prequalifyme.today": 1,
  "xen.prgmr.com": 1,
  "priv.at": 1,
  "prvcy.page": 1,
  "dweb.link": 2,
  "protonet.io": 1,
  "chirurgiens-dentistes-en-france.fr": 1,
  "byen.site": 1,
  "pubtls.org": 1,
  "pythonanywhere.com": 1,
  "eu.pythonanywhere.com": 1,
  "qoto.io": 1,
  "qualifioapp.com": 1,
  "ladesk.com": 1,
  "qbuser.com": 1,
  "cloudsite.builders": 1,
  "instances.spawn.cc": 1,
  "instantcloud.cn": 1,
  "ras.ru": 1,
  "qa2.com": 1,
  "qcx.io": 1,
  "sys.qcx.io": 2,
  "dev-myqnapcloud.com": 1,
  "alpha-myqnapcloud.com": 1,
  "myqnapcloud.com": 1,
  "quipelements.com": 2,
  "vapor.cloud": 1,
  "vaporcloud.io": 1,
  "rackmaze.com": 1,
  "rackmaze.net": 1,
  "g.vbrplsbx.io": 1,
  "on-k3s.io": 2,
  "on-rancher.cloud": 2,
  "on-rio.io": 2,
  "readthedocs.io": 1,
  "rhcloud.com": 1,
  "app.render.com": 1,
  "onrender.com": 1,
  "firewalledreplit.co": 1,
  "id.firewalledreplit.co": 1,
  "repl.co": 1,
  "id.repl.co": 1,
  "repl.run": 1,
  "resindevice.io": 1,
  "devices.resinstaging.io": 1,
  "hzc.io": 1,
  "wellbeingzone.eu": 1,
  "wellbeingzone.co.uk": 1,
  "adimo.co.uk": 1,
  "itcouldbewor.se": 1,
  "git-pages.rit.edu": 1,
  "rocky.page": 1,
  "xn--90amc.xn--p1acf": 1,
  "xn--j1aef.xn--p1acf": 1,
  "xn--j1ael8b.xn--p1acf": 1,
  "xn--h1ahn.xn--p1acf": 1,
  "xn--j1adp.xn--p1acf": 1,
  "xn--c1avg.xn--p1acf": 1,
  "xn--80aaa0cvac.xn--p1acf": 1,
  "xn--h1aliz.xn--p1acf": 1,
  "xn--90a1af.xn--p1acf": 1,
  "xn--41a.xn--p1acf": 1,
  "180r.com": 1,
  "dojin.com": 1,
  "sakuratan.com": 1,
  "sakuraweb.com": 1,
  "x0.com": 1,
  "2-d.jp": 1,
  "bona.jp": 1,
  "crap.jp": 1,
  "daynight.jp": 1,
  "eek.jp": 1,
  "flop.jp": 1,
  "halfmoon.jp": 1,
  "jeez.jp": 1,
  "matrix.jp": 1,
  "mimoza.jp": 1,
  "ivory.ne.jp": 1,
  "mail-box.ne.jp": 1,
  "mints.ne.jp": 1,
  "mokuren.ne.jp": 1,
  "opal.ne.jp": 1,
  "sakura.ne.jp": 1,
  "sumomo.ne.jp": 1,
  "topaz.ne.jp": 1,
  "netgamers.jp": 1,
  "nyanta.jp": 1,
  "o0o0.jp": 1,
  "rdy.jp": 1,
  "rgr.jp": 1,
  "rulez.jp": 1,
  "s3.isk01.sakurastorage.jp": 1,
  "s3.isk02.sakurastorage.jp": 1,
  "saloon.jp": 1,
  "sblo.jp": 1,
  "skr.jp": 1,
  "tank.jp": 1,
  "uh-oh.jp": 1,
  "undo.jp": 1,
  "rs.webaccel.jp": 1,
  "user.webaccel.jp": 1,
  "websozai.jp": 1,
  "xii.jp": 1,
  "squares.net": 1,
  "jpn.org": 1,
  "kirara.st": 1,
  "x0.to": 1,
  "from.tv": 1,
  "sakura.tv": 1,
  "builder.code.com": 2,
  "dev-builder.code.com": 2,
  "stg-builder.code.com": 2,
  "sandcats.io": 1,
  "logoip.de": 1,
  "logoip.com": 1,
  "fr-par-1.baremetal.scw.cloud": 1,
  "fr-par-2.baremetal.scw.cloud": 1,
  "nl-ams-1.baremetal.scw.cloud": 1,
  "fnc.fr-par.scw.cloud": 1,
  "functions.fnc.fr-par.scw.cloud": 1,
  "k8s.fr-par.scw.cloud": 1,
  "nodes.k8s.fr-par.scw.cloud": 1,
  "s3.fr-par.scw.cloud": 1,
  "s3-website.fr-par.scw.cloud": 1,
  "whm.fr-par.scw.cloud": 1,
  "priv.instances.scw.cloud": 1,
  "pub.instances.scw.cloud": 1,
  "k8s.scw.cloud": 1,
  "k8s.nl-ams.scw.cloud": 1,
  "nodes.k8s.nl-ams.scw.cloud": 1,
  "s3.nl-ams.scw.cloud": 1,
  "s3-website.nl-ams.scw.cloud": 1,
  "whm.nl-ams.scw.cloud": 1,
  "k8s.pl-waw.scw.cloud": 1,
  "nodes.k8s.pl-waw.scw.cloud": 1,
  "s3.pl-waw.scw.cloud": 1,
  "s3-website.pl-waw.scw.cloud": 1,
  "scalebook.scw.cloud": 1,
  "smartlabeling.scw.cloud": 1,
  "dedibox.fr": 1,
  "schokokeks.net": 1,
  "gov.scot": 1,
  "service.gov.scot": 1,
  "scrysec.com": 1,
  "firewall-gateway.com": 1,
  "firewall-gateway.de": 1,
  "my-gateway.de": 1,
  "my-router.de": 1,
  "spdns.de": 1,
  "spdns.eu": 1,
  "firewall-gateway.net": 1,
  "my-firewall.org": 1,
  "myfirewall.org": 1,
  "spdns.org": 1,
  "seidat.net": 1,
  "sellfy.store": 1,
  "senseering.net": 1,
  "minisite.ms": 1,
  "magnet.page": 1,
  "biz.ua": 1,
  "co.ua": 1,
  "pp.ua": 1,
  "shiftcrypto.dev": 1,
  "shiftcrypto.io": 1,
  "shiftedit.io": 1,
  "myshopblocks.com": 1,
  "myshopify.com": 1,
  "shopitsite.com": 1,
  "shopware.store": 1,
  "mo-siemens.io": 1,
  "1kapp.com": 1,
  "appchizi.com": 1,
  "applinzi.com": 1,
  "sinaapp.com": 1,
  "vipsinaapp.com": 1,
  "siteleaf.net": 1,
  "bounty-full.com": 1,
  "alpha.bounty-full.com": 1,
  "beta.bounty-full.com": 1,
  "aeroport.fr": 1,
  "avocat.fr": 1,
  "chambagri.fr": 1,
  "chirurgiens-dentistes.fr": 1,
  "experts-comptables.fr": 1,
  "medecin.fr": 1,
  "notaires.fr": 1,
  "pharmacien.fr": 1,
  "port.fr": 1,
  "veterinaire.fr": 1,
  "small-web.org": 1,
  "vp4.me": 1,
  "snowflake.app": 1,
  "privatelink.snowflake.app": 1,
  "streamlit.app": 1,
  "streamlitapp.com": 1,
  "try-snowplow.com": 1,
  "srht.site": 1,
  "stackhero-network.com": 1,
  "musician.io": 1,
  "novecore.site": 1,
  "static.land": 1,
  "dev.static.land": 1,
  "sites.static.land": 1,
  "storebase.store": 1,
  "vps-host.net": 1,
  "atl.jelastic.vps-host.net": 1,
  "njs.jelastic.vps-host.net": 1,
  "ric.jelastic.vps-host.net": 1,
  "playstation-cloud.com": 1,
  "apps.lair.io": 1,
  "stolos.io": 2,
  "spacekit.io": 1,
  "customer.speedpartner.de": 1,
  "myspreadshop.at": 1,
  "myspreadshop.com.au": 1,
  "myspreadshop.be": 1,
  "myspreadshop.ca": 1,
  "myspreadshop.ch": 1,
  "myspreadshop.com": 1,
  "myspreadshop.de": 1,
  "myspreadshop.dk": 1,
  "myspreadshop.es": 1,
  "myspreadshop.fi": 1,
  "myspreadshop.fr": 1,
  "myspreadshop.ie": 1,
  "myspreadshop.it": 1,
  "myspreadshop.net": 1,
  "myspreadshop.nl": 1,
  "myspreadshop.no": 1,
  "myspreadshop.pl": 1,
  "myspreadshop.se": 1,
  "myspreadshop.co.uk": 1,
  "api.stdlib.com": 1,
  "storipress.app": 1,
  "storj.farm": 1,
  "utwente.io": 1,
  "soc.srcf.net": 1,
  "user.srcf.net": 1,
  "temp-dns.com": 1,
  "supabase.co": 1,
  "supabase.in": 1,
  "supabase.net": 1,
  "su.paba.se": 1,
  "s5y.io": 2,
  "sensiosite.cloud": 2,
  "syncloud.it": 1,
  "dscloud.biz": 1,
  "direct.quickconnect.cn": 1,
  "dsmynas.com": 1,
  "familyds.com": 1,
  "diskstation.me": 1,
  "dscloud.me": 1,
  "i234.me": 1,
  "myds.me": 1,
  "synology.me": 1,
  "dscloud.mobi": 1,
  "dsmynas.net": 1,
  "familyds.net": 1,
  "dsmynas.org": 1,
  "familyds.org": 1,
  "vpnplus.to": 1,
  "direct.quickconnect.to": 1,
  "tabitorder.co.il": 1,
  "mytabit.co.il": 1,
  "mytabit.com": 1,
  "taifun-dns.de": 1,
  "beta.tailscale.net": 1,
  "ts.net": 1,
  "gda.pl": 1,
  "gdansk.pl": 1,
  "gdynia.pl": 1,
  "med.pl": 1,
  "sopot.pl": 1,
  "site.tb-hosting.com": 1,
  "edugit.io": 1,
  "s3.teckids.org": 1,
  "telebit.app": 1,
  "telebit.io": 1,
  "telebit.xyz": 2,
  "firenet.ch": 2,
  "svc.firenet.ch": 2,
  "reservd.com": 1,
  "thingdustdata.com": 1,
  "cust.dev.thingdust.io": 1,
  "cust.disrec.thingdust.io": 1,
  "cust.prod.thingdust.io": 1,
  "cust.testing.thingdust.io": 1,
  "reservd.dev.thingdust.io": 1,
  "reservd.disrec.thingdust.io": 1,
  "reservd.testing.thingdust.io": 1,
  "tickets.io": 1,
  "arvo.network": 1,
  "azimuth.network": 1,
  "tlon.network": 1,
  "torproject.net": 1,
  "pages.torproject.net": 1,
  "bloxcms.com": 1,
  "townnews-staging.com": 1,
  "12hp.at": 1,
  "2ix.at": 1,
  "4lima.at": 1,
  "lima-city.at": 1,
  "12hp.ch": 1,
  "2ix.ch": 1,
  "4lima.ch": 1,
  "lima-city.ch": 1,
  "trafficplex.cloud": 1,
  "de.cool": 1,
  "12hp.de": 1,
  "2ix.de": 1,
  "4lima.de": 1,
  "lima-city.de": 1,
  "1337.pictures": 1,
  "clan.rip": 1,
  "lima-city.rocks": 1,
  "webspace.rocks": 1,
  "lima.zone": 1,
  "transurl.be": 2,
  "transurl.eu": 2,
  "transurl.nl": 2,
  "site.transip.me": 1,
  "tuxfamily.org": 1,
  "dd-dns.de": 1,
  "diskstation.eu": 1,
  "diskstation.org": 1,
  "dray-dns.de": 1,
  "draydns.de": 1,
  "dyn-vpn.de": 1,
  "dynvpn.de": 1,
  "mein-vigor.de": 1,
  "my-vigor.de": 1,
  "my-wan.de": 1,
  "syno-ds.de": 1,
  "synology-diskstation.de": 1,
  "synology-ds.de": 1,
  "typedream.app": 1,
  "pro.typeform.com": 1,
  "uber.space": 1,
  "uberspace.de": 2,
  "hk.com": 1,
  "hk.org": 1,
  "ltd.hk": 1,
  "inc.hk": 1,
  "it.com": 1,
  "name.pm": 1,
  "sch.tf": 1,
  "biz.wf": 1,
  "sch.wf": 1,
  "org.yt": 1,
  "virtualuser.de": 1,
  "virtual-user.de": 1,
  "upli.io": 1,
  "urown.cloud": 1,
  "dnsupdate.info": 1,
  "lib.de.us": 1,
  "2038.io": 1,
  "vercel.app": 1,
  "vercel.dev": 1,
  "now.sh": 1,
  "router.management": 1,
  "v-info.info": 1,
  "voorloper.cloud": 1,
  "neko.am": 1,
  "nyaa.am": 1,
  "be.ax": 1,
  "cat.ax": 1,
  "es.ax": 1,
  "eu.ax": 1,
  "gg.ax": 1,
  "mc.ax": 1,
  "us.ax": 1,
  "xy.ax": 1,
  "nl.ci": 1,
  "xx.gl": 1,
  "app.gp": 1,
  "blog.gt": 1,
  "de.gt": 1,
  "to.gt": 1,
  "be.gy": 1,
  "cc.hn": 1,
  "blog.kg": 1,
  "io.kg": 1,
  "jp.kg": 1,
  "tv.kg": 1,
  "uk.kg": 1,
  "us.kg": 1,
  "de.ls": 1,
  "at.md": 1,
  "de.md": 1,
  "jp.md": 1,
  "to.md": 1,
  "indie.porn": 1,
  "vxl.sh": 1,
  "ch.tc": 1,
  "me.tc": 1,
  "we.tc": 1,
  "nyan.to": 1,
  "at.vg": 1,
  "blog.vu": 1,
  "dev.vu": 1,
  "me.vu": 1,
  "v.ua": 1,
  "vultrobjects.com": 2,
  "wafflecell.com": 1,
  "webhare.dev": 2,
  "reserve-online.net": 1,
  "reserve-online.com": 1,
  "bookonline.app": 1,
  "hotelwithflight.com": 1,
  "wedeploy.io": 1,
  "wedeploy.me": 1,
  "wedeploy.sh": 1,
  "remotewd.com": 1,
  "pages.wiardweb.com": 1,
  "wmflabs.org": 1,
  "toolforge.org": 1,
  "wmcloud.org": 1,
  "panel.gg": 1,
  "daemon.panel.gg": 1,
  "messwithdns.com": 1,
  "woltlab-demo.com": 1,
  "myforum.community": 1,
  "community-pro.de": 1,
  "diskussionsbereich.de": 1,
  "community-pro.net": 1,
  "meinforum.net": 1,
  "affinitylottery.org.uk": 1,
  "raffleentry.org.uk": 1,
  "weeklylottery.org.uk": 1,
  "wpenginepowered.com": 1,
  "js.wpenginepowered.com": 1,
  "wixsite.com": 1,
  "editorx.io": 1,
  "wixstudio.io": 1,
  "wix.run": 1,
  "half.host": 1,
  "xnbay.com": 1,
  "u2.xnbay.com": 1,
  "u2-local.xnbay.com": 1,
  "cistron.nl": 1,
  "demon.nl": 1,
  "xs4all.space": 1,
  "yandexcloud.net": 1,
  "storage.yandexcloud.net": 1,
  "website.yandexcloud.net": 1,
  "official.academy": 1,
  "yolasite.com": 1,
  "ybo.faith": 1,
  "yombo.me": 1,
  "homelink.one": 1,
  "ybo.party": 1,
  "ybo.review": 1,
  "ybo.science": 1,
  "ybo.trade": 1,
  "ynh.fr": 1,
  "nohost.me": 1,
  "noho.st": 1,
  "za.net": 1,
  "za.org": 1,
  "bss.design": 1,
  "basicserver.io": 1,
  "virtualserver.io": 1,
  "enterprisecloud.nu": 1
}

/***/ }),

/***/ 3764:
/***/ ((__unused_webpack_module, exports) => {

exports.resources = {
  "blank-text": "data:text/plain,",
  "blank-css": "data:text/css,",
  "blank-js": "data:application/javascript,",
  "blank-html": "data:text/html,<!DOCTYPE html><html><head></head><body></body></html>",
  "blank-mp3": "data:audio/mpeg;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjIwLjEwMAAAAAAAAAAAAAAA//tUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAGAAADAABgYGBgYGBgYGBgYGBgYGBggICAgICAgICAgICAgICAgICgoKCgoKCgoKCgoKCgoKCgwMDAwMDAwMDAwMDAwMDAwMDg4ODg4ODg4ODg4ODg4ODg4P////////////////////8AAAAATGF2YzU4LjM1AAAAAAAAAAAAAAAAJAYAAAAAAAAAAwDVxttG//sUZAAP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAETEFNRTMuMTAwVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sUZB4P8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sUZDwP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sUZFoP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sUZHgP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV//sUZJYP8AAAaQAAAAgAAA0gAAABAAABpAAAACAAADSAAAAEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",
  "blank-mp4": "data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAAuJtZGF0AAACrwYF//+r3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE2MCByMzAxMU0gY2RlOWE5MyAtIEguMjY0L01QRUctNCBBVkMgY29kZWMgLSBDb3B5bGVmdCAyMDAzLTIwMjAgLSBodHRwOi8vd3d3LnZpZGVvbGFuLm9yZy94MjY0Lmh0bWwgLSBvcHRpb25zOiBjYWJhYz0xIHJlZj0zIGRlYmxvY2s9MTowOjAgYW5hbHlzZT0weDM6MHgxMTMgbWU9aGV4IHN1Ym1lPTcgcHN5PTEgcHN5X3JkPTEuMDA6MC4wMCBtaXhlZF9yZWY9MSBtZV9yYW5nZT0xNiBjaHJvbWFfbWU9MCB0cmVsbGlzPTEgOHg4ZGN0PTEgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0xIGNocm9tYV9xcF9vZmZzZXQ9LTIgdGhyZWFkcz0yIGxvb2thaGVhZF90aHJlYWRzPTEgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MyBiX3B5cmFtaWQ9MiBiX2FkYXB0PTEgYl9iaWFzPTAgZGlyZWN0PTEgd2VpZ2h0Yj0xIG9wZW5fZ29wPTAgd2VpZ2h0cD0yIGtleWludD0yNTAga2V5aW50X21pbj0yNSBzY2VuZWN1dD00MCBpbnRyYV9yZWZyZXNoPTAgcmNfbG9va2FoZWFkPTQwIHJjPWNyZiBtYnRyZWU9MSBjcmY9MjMuMCBxY29tcD0wLjYwIHFwbWluPTAgcXBtYXg9NjkgcXBzdGVwPTQgaXBfcmF0aW89MS40MCBhcT0xOjEuMDAAgAAAACNliIQAK//+9dvzLK5umjbe9jc2CT9EPcfnoOYC2tjtP+go4QAAAwRtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAAKAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACLnRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAZAAAADgAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAACgAAAAAAAEAAAAAAaZtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAADIAAAACAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAFRbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABEXN0YmwAAACtc3RzZAAAAAAAAAABAAAAnWF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAZAA4AEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAA3YXZjQwFkAAr/4QAaZ2QACvNlHJ42JwEQAAADABAAAAMDIPEiWWABAAZo6+PLIsD8+PgAAAAAEHBhc3AAAAABAAAAAQAAABhzdHRzAAAAAAAAAAEAAAABAAACAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAALaAAAAAQAAABRzdGNvAAAAAAAAAAEAAAAwAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1OC40NS4xMDA=",
  "1x1-transparent-gif": "data:image/gif;base64,R0lGODlhAQABAIABAAAAAP///yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",
  "2x2-transparent-png": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAACCAYAAABytg0kAAAAC0lEQVQI12NgQAcAABIAAe+JVKQAAAAASUVORK5CYII=",
  "3x2-transparent-png": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAAC0lEQVQI12NgwAUAABoAASRETuUAAAAASUVORK5CYII=",
  "32x32-transparent-png": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGklEQVRYw+3BAQEAAACCIP+vbkhAAQAAAO8GECAAAZf3V9cAAAAASUVORK5CYII="
}

/***/ }),

/***/ 1052:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_210293__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



const {Prefs} = __nested_webpack_require_210293__(35);

const {MILLIS_IN_DAY} = __nested_webpack_require_210293__(103);

/**
 * Converts a version string into a `Date` object with minute-level precision.
 *
 * @param {string} version The version string in `YYYYMMDD[HH[MM]]` format or
 *   just the value `"0"`.
 *
 * @returns {Date} A `Date` object. If the value of `version` is `"0"`, the
 *   returned value represents the Unix epoch.
 */
function versionToDate(version) {
  if (version == "0") {
    return new Date(0);
  }

  let year = version.substring(0, 4);
  let month = version.substring(4, 6);
  let date = version.substring(6, 8);

  let hours = version.substring(8, 10) || "00";
  let minutes = version.substring(10, 12) || "00";

  // The input is nearly a valid ISO 8601 timestamp, except for the hyphens,
  // the colon, and the special characters T and Z. We can use the timestamp
  // string version of the Date constructor directly. Alternatively, we could
  // use Date.UTC(), but that would require some adjustment to the values
  // (e.g. the month must be 0-based).
  return new Date(`${year}-${month}-${date}T${hours}:${minutes}Z`);
}

/**
 * Strips the value of the `firstVersion` parameter down to either `YYYYMMDD`,
 * `YYYYMM`, or `YYYY` depending on its distance from the value of the
 * `currentVersion` parameter.
 *
 * @param {string} firstVersion A version string in `YYYYMMDD[HH[MM]]` format
 *   with an optional `"-E"` suffix or just `"0"` or `"0-E"`.
 * @param {string} currentVersion A version string in `YYYYMMDD[HH[MM]]` format
 *   or just `"0"`.
 *
 * @returns {?string}
 */
function stripFirstVersion(firstVersion, currentVersion) {
  let eFlag = firstVersion.endsWith("-E");
  if (eFlag) {
    firstVersion = firstVersion.slice(0, -2);
  }

  try {
    let firstDate = versionToDate(firstVersion);
    let currentDate = versionToDate(currentVersion);

    if (currentDate - firstDate > 365 * MILLIS_IN_DAY) {
      firstVersion = firstVersion.substring(0, 4);
    }
    else if (currentDate - firstDate > 30 * MILLIS_IN_DAY) {
      firstVersion = firstVersion.substring(0, 6);
    }
    else {
      firstVersion = firstVersion.substring(0, 8);
    }
  }
  catch (error) {
    return null;
  }

  if (eFlag) {
    firstVersion += "-E";
  }

  return firstVersion;
}

/**
 * Checks whether this is a fresh installation.
 * @returns {boolean}
 */
function isFreshInstall() {
  return !("data" in Prefs.notificationdata);
}

/**
 * `{@link module:analytics.analytics analytics}` implementation.
 */
class Analytics {
  /**
   * @hideconstructor
   */
  constructor() {
  }

  /**
   * Checks whether the given URL is trusted for analytics purposes based on
   * the value of the `analytics.trustedHosts` preference.
   *
   * @param {string} url The URL.
   *
   * @returns {boolean} Whether the URL is trusted.
   */
  isTrusted(url) {
    let {trustedHosts} = Prefs.analytics || {};
    if (Array.isArray(trustedHosts)) {
      try {
        return trustedHosts.includes(new URL(url).host);
      }
      catch (error) {
      }
    }

    return false;
  }

  /**
   * Returns a string indicating the version of the first ever downloaded
   * resource (as recorded by
   * `{@link module:analytics~Analytics#recordVersion recordVersion()}`), for
   * the purpose of cohort analysis.
   *
   * For privacy reasons, the original value is stripped down to either
   * `YYYYMMDD`, `YYYYMM`, or `YYYY` depending on its age. An `-E` suffix is
   * appended to the original value if it was recorded on an existing
   * installation.
   *
   * @returns {?string} A string indicating the version of the first ever
   *   downloaded resource, or `"0"` or `"0-E"` if there is no data, or `null`
   *   in case of a parsing error.
   */
  getFirstVersion() {
    let {analytics} = Prefs;
    if (analytics) {
      let {firstVersion = "0", currentVersion = "0"} = analytics.data || {};
      let strippedFirstVersion = stripFirstVersion(firstVersion,
                                                   currentVersion);
      if (strippedFirstVersion) {
        if (strippedFirstVersion == "0" && !isFreshInstall()) {
          strippedFirstVersion = "0-E";
        }

        return strippedFirstVersion;
      }
    }

    return null;
  }

  /**
   * Records the version of a downloaded resource for the purpose of cohort
   * analysis.
   *
   * The value of the `analytics` preference must be set at least to an
   * empty object, otherwise nothing is ever recorded and
   * `{@link module:analytics~Analytics#getFirstVersion getFirstVersion()}`
   * always returns `null`.
   *
   * @param {string} version The version, in `YYYYMMDD[HH[MM]]` format.
   */
  recordVersion(version) {
    if (!/^(\d{8}|\d{10}|\d{12})$/.test(version)) {
      return;
    }

    let {analytics} = Prefs;
    if (analytics) {
      if (!analytics.data) {
        analytics.data = {};
      }

      let {data} = analytics;

      data.currentVersion = version;

      if (typeof data.firstVersion == "undefined") {
        // If this is not a new installation, set the -E flag.
        if (!isFreshInstall()) {
          version += "-E";
        }

        data.firstVersion = version;
      }

      // JSON values aren't saved unless they are assigned a different object.
      Prefs.analytics = JSON.parse(JSON.stringify(analytics));
    }
  }
}

/**
 * Implements data analytics functions.
 * @type {module:analytics~Analytics}
 */
exports.analytics = new Analytics();


/***/ }),

/***/ 9797:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * A `Cache` object represents a cache of arbitrary data.
 * @package
 */
exports.Cache = class Cache extends Map {
  /**
   * Creates a cache.
   * @param {number} capacity The maximum number of entries that can exist in
   *   the cache.
   */
  constructor(capacity) {
    // Note: This check works for non-number values.
    if (!(capacity >= 1)) {
      throw new Error("capacity must be a positive number.");
    }

    super();
    this._capacity = capacity;
  }

  /**
   * Writes an entry to the cache.
   *
   * If the cache has reached the specified maximum number of entries, all the
   * old entries are cleared first.
   *
   * @param {?*} key The key for the entry.
   * @param {?*} value The value of the entry.
   */
  set(key, value) {
    // To prevent logical errors, neither key nor value is allowed to be
    // undefined.
    if (typeof key == "undefined") {
      throw new Error("key must not be undefined.");
    }

    if (typeof value == "undefined") {
      throw new Error("value must not be undefined.");
    }

    if (this.size == this._capacity && !this.has(key)) {
      this.clear();
    }

    super.set(key, value);
  }
};


/***/ }),

/***/ 436:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



let contentTypes =
/**
 * Content types for request blocking and allowing (allowlisting).
 *
 * There are two kinds of content types: resource types, and special
 * (non-resource) types.
 *
 * Resource types include web resources like scripts, images, and so on.
 *
 * Special types include filter options for popup blocking and CSP header
 * injection as well as flags for allowing documents.
 *
 * By default a filter matches any resource type, but if a filter has an
 * explicit resource type, special option, or allowing flag, like
 * `$script`, `$popup`, or `$elemhide`, then it matches only the given type,
 * option, or flag.
 *
 * @type {Object}
 *
 * @public
 */
exports.contentTypes = {
  // Types of web resources.
  OTHER: 1,
  SCRIPT: 2,
  IMAGE: 4,
  STYLESHEET: 8,
  OBJECT: 16,
  SUBDOCUMENT: 32,
  WEBSOCKET: 128,
  WEBRTC: 256,
  WEBBUNDLE: 512,
  PING: 1024,
  XMLHTTPREQUEST: 2048, // 1 << 11

  MEDIA: 16384,
  FONT: 32768, // 1 << 15

  // Special filter options.
  POPUP: 1 << 24,
  CSP: 1 << 25,
  HEADER: 1 << 26,

  // Allowing flags.
  DOCUMENT: 1 << 27,
  GENERICBLOCK: 1 << 28,
  ELEMHIDE: 1 << 29,
  GENERICHIDE: 1 << 30
};

// Backwards compatibility.
contentTypes.BACKGROUND = contentTypes.IMAGE;
contentTypes.XBL = contentTypes.OTHER;
contentTypes.DTD = contentTypes.OTHER;

const RESOURCE_TYPES =
/**
 * Bitmask for resource types like `$script`, `$image`, `$stylesheet`, and so
 * on.
 *
 * If a filter has no explicit content type, it applies to all resource types
 * (but not to any {@link module:contentTypes.SPECIAL_TYPES special types}).
 *
 * @const {number}
 *
 * @package
 */
// The first 24 bits are reserved for resource types like "script", "image",
// and so on.
// https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/ResourceType
exports.RESOURCE_TYPES = (1 << 24) - 1;

const SPECIAL_TYPES = ~RESOURCE_TYPES & (1 << 31) - 1;
/**
 * Bitmask for special "types" (options and flags) like `$csp`, `$elemhide`,
 * and so on.
 *
 * @const {number}
 *
 * @package
 */
exports.SPECIAL_TYPES = SPECIAL_TYPES;

/**
 * Bitmask for "types" that match against request context more than
 * actual content type. When matching against context types, you
 * should also include the request's resource type.
 *
 * @const {number}
 *
 * @package
 */
const CONTEXT_TYPES = contentTypes.HEADER | contentTypes.CSP;
exports.CONTEXT_TYPES = CONTEXT_TYPES;

/**
 * Bitmask for "types" (flags) that are for exception rules only, like
 * `$document`, `$elemhide`, and so on.
 *
 * @const {number}
 *
 * @package
 */
exports.ALLOWING_TYPES = contentTypes.DOCUMENT |
                         contentTypes.GENERICBLOCK |
                         contentTypes.ELEMHIDE |
                         contentTypes.GENERICHIDE;

/**
 * Yields individual types from a filter's type mask.
 *
 * @param {number} contentType A filter's type mask.
 * @param {number} [selection] Which types to yield.
 *
 * @generator
 * @yields {number}
 *
 * @package
 */
exports.enumerateTypes = function* enumerateTypes(contentType, selection = ~0) {
  for (let mask = contentType & selection, bitIndex = 0;
    mask != 0; mask >>>= 1, bitIndex++) {
    if ((mask & 1) != 0) {
      // Note: The zero-fill right shift by zero is necessary for dropping the
      // sign.
      yield 1 << bitIndex >>> 0;
    }
  }
};


/***/ }),

/***/ 2447:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_222693__) => {

"use strict";
var __webpack_unused_export__;
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



/** @module */

const {Pattern} = __nested_webpack_require_222693__(453);
const {parseDomains, hasWildcard} = __nested_webpack_require_222693__(1349);
const {contentTypes, RESOURCE_TYPES} = __nested_webpack_require_222693__(436);
const {
  generateCSPRules,
  generateAllowingRules,
  generateRedirectRules,
  generateBlockingRules,
  validateRule
} = __nested_webpack_require_222693__(5472);
const {parse, FilterParsingError} = __nested_webpack_require_222693__(408);

/**
 * @typedef {Object} ConverterOptions
 * @property {function} isRegexSupported a sync/async method to check if a
 *  generic regular expression is compatible with the engine.
 * @property {function} modifyRule a sync method to modify a DNR rule if needed.
 */

/**
 * Returns a callback bound to the given options.
 * @param {ConverterOptions} options in Mv3 Web extensions this would be
 *  `chrome.declarativeNetRequest.isRegexSupported`, so that it's possible to
 *  pass `chrome.declarativeNetRequest` directly as option.
 * @returns {function}
 */
exports.x = options => convert.bind({
  ...options,
  // ensure a callback to verify RegExp when needed
  // By default regex are not supported.
  isRegexSupported: options.isRegexSupported || (() => false),
  // ensure a callback to modify a DNR rule when needed
  modifyRule: options.modifyRule || ((rule, context) => rule)
});

/**
 * @typedef {Object} Rule see https://developer.chrome.com/docs/extensions/reference/declarativeNetRequest/#type-Rule
 * @property {object} action see https://developer.chrome.com/docs/extensions/reference/declarativeNetRequest/#type-RuleAction
 * @property {object} condition see https://developer.chrome.com/docs/extensions/reference/declarativeNetRequest/#type-RuleCondition
 * @property {number} id a unique identifier for this rule
 * @property {number?} priority optional priority of the filter
 */

/**
 * Returns an array with DNR Rules if the text is network related, or an Error
 * if no suitable rule can be created.
 * @param {string} text the filter text to convert or the generated error.
 * @returns {Promise<Rule[]|FilterParsingError>}
 */
async function convert(text) {
  const result = parse(text);

  if (result instanceof FilterParsingError) {
    return result;
  }

  return await asDNR.call(this, result);
}

/** Convert a parsed filter to a DeclarativeNetRequest
 *
 * To work properly this function must be bound to an object that
 * has a method `isRegexSupported` that will return whether the RegExp
 * passed as argument is valid or not for DNR. This is necessary as
 * they have to be RE2 expection and this syntax isn't supported by native
 * JavaScript. There is a (native) node module or the Chrome WebExtension
 * API. `createConverter` will provide a default function that always
 * return true.
 *
 * @param {module:filters/index~ParsedFilter} parsedFilter The parsed filter
 *   object.
 * @return {Promise<Rule[]|Error>}
 */
async function asDNR(parsedFilter) {
  let {
    blocking,
    text,
    regexpSource,
    contentType,
    matchCase,
    domains,
    thirdParty,
    sitekeys,
    header,
    rewrite,
    csp
  } = parsedFilter;

  // Sitekey aren't currently handled with DeclarativeNetRequest
  if (sitekeys || header) {
    return new FilterParsingError("filter_unknown_option",
                                  {
                                    option: sitekeys ? "sitekey" : "header",
                                    text
                                  });
  }

  try {
    const urlPattern = new Pattern(regexpSource, matchCase);
    let {pattern: urlFilter} = urlPattern;
    let checkValidRegExp = true;
    let hostname;

    matchCase = urlPattern.matchCase;

    if (urlFilter) {
      // We need to split out the hostname part (if any) of the filter, then
      // decide if it can be matched as lowercase or not.
      let match = /^(\|\||[a-zA-Z]*:\/\/)([^*^?/|]*)(.*)$/.exec(urlFilter);
      if (match) {
        hostname = match[2].toLowerCase();
        urlFilter = match[1] + hostname + match[3];
      }

      // The declarativeNetRequest API does not like the urlFilter to have a
      // redundant ||* prefix, so let's strip that now.
      if (urlFilter.startsWith("||*")) {
        // A pattern beginning with `||*` isn't allowed, and `*`
        // should be used instead. So let's remove the `||`
        // See https://developer.chrome.com/docs/extensions/reference/declarativeNetRequest/#type-RuleCondition
        urlFilter = urlFilter.substr(2);
      }
    }
    else if (urlPattern.regexp) {
      checkValidRegExp = await this.isRegexSupported({
        regex: urlPattern.regexp.source,
        isCaseSensitive: matchCase
      });
    }

    if (!checkValidRegExp) {
      return new FilterParsingError("filter_invalid_regexp",
                                    {
                                      regexp: urlPattern.regexp.source,
                                      text
                                    });
    }

    const filter = {
      blocking,
      regexp: urlPattern.regexp,
      contentType: contentType || RESOURCE_TYPES,
      thirdParty,
      rewrite,
      csp,
      domains: domains === null ? null : parseDomains(
        domains.toLowerCase(), "|")
    };


    // Filter TLD wildcards are not supported in DNR,
    // However ".*" in URL part of request filters are interpreted as
    // "dot followed by sequence of characters" and are supported by Chromium:
    // https://developer.chrome.com/docs/extensions/reference/api/declarativeNetRequest#property-RuleCondition-urlFilter
    // The TLD wildcards in domains list are not supported by Chromium
    // and thus are not converted into DNR rules.
    if (filter.domains) {
      for (let domain of filter.domains.keys()) {
        if (hasWildcard(domain)) {
          return [];
        }
      }
    }

    let result;
    if (contentType & contentTypes.CSP) {
      result = generateCSPRules(filter, urlFilter, matchCase);
    }
    else if (!blocking) {
      result = generateAllowingRules(filter, urlFilter, matchCase);
    }
    else if (rewrite) {
      result = generateRedirectRules(filter, urlFilter, matchCase);
    }
    else {
      result = generateBlockingRules(filter, urlFilter, matchCase);
    }

    let context = {
      text: parsedFilter.text
    };
    return result
      .map(rule => this.modifyRule(rule, context))
      .map(validateRule);
  }
  catch (error) {
    return new FilterParsingError("filter_invalid_regexp",
                                  {regexp: regexpSource, text});
  }
}

__webpack_unused_export__ = asDNR;


/***/ }),

/***/ 3490:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



/** @module */

/**
 * DNR Mapper. Will lazy load the data as needed.
 */
exports.u = class DnrMapper {
  /**
   * @param {Function} loader The loader for the mapping data. The
   *     loader function will return the JSON parse output of the map
   *     files. In a Web Extension it will likely use `fetch` to load
   *     it from the extension files. The loader will be called when
   *     the map needs to be used the first time. The function can be
   *     async.
   *
   * @constructor
   */
  constructor(loader) {
    this.loader = loader;
    // A null map is a map that needs to be loaded.
    this.map = null;
  }

  /**
   * Call the loader.
   * @private
   */
  async _loadMapper() {
    this.map = new Map(await this.loader());
  }

  /**
   * Load the map. Because it is async it can't be done on a get.
   * Ideally you'd delay calling it to when neeeded. It is safe to
   * call more than once.
   * @async
   */
  async load() {
    if (this.map === null) {
      await this._loadMapper();
    }
  }

  /**
   * Get the rule ids for the text. Make sure `load()` has been called
   * once previously.
   *
   * @param {string} text The filter text to get the mapping from.
   *
   * @returns {?Array.<number>} The array of rule IDs if found.
   */
  get(text) {
    if (this.map === null) {
      throw new Error("Mapper not loaded.");
    }

    return this.map.get(text);
  }
};


/***/ }),

/***/ 5472:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_232251__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



/** @module */

const {contentTypes} = __nested_webpack_require_232251__(436);
const {resources} = __nested_webpack_require_232251__(3764);

// We differentiate generic rules from specific ones in order to support the
// conversion of $genericblock exception filters. Since with the
// declarativeNetRequest API "allow" rules take priority over "allowAllRequest"
// rules, we also need to take care to give "allowAllRequest" rules a slighlty
// higher priority.
const GENERIC_PRIORITY = 1000;
exports.GENERIC_PRIORITY = GENERIC_PRIORITY;
const GENERIC_ALLOW_ALL_PRIORITY = 1001;
exports.GENERIC_ALLOW_ALL_PRIORITY = GENERIC_ALLOW_ALL_PRIORITY;
const SPECIFIC_PRIORITY = 2000;
exports.SPECIFIC_PRIORITY = SPECIFIC_PRIORITY;
const SPECIFIC_ALLOW_ALL_PRIORITY = 2001;
exports.SPECIFIC_ALLOW_ALL_PRIORITY = SPECIFIC_ALLOW_ALL_PRIORITY;


const requestTypes = new Map([
  [contentTypes.OTHER, ["other", "csp_report"]],
  [contentTypes.SCRIPT, ["script"]],
  [contentTypes.IMAGE, ["image"]],
  [contentTypes.STYLESHEET, ["stylesheet"]],
  [contentTypes.OBJECT, ["object"]],
  [contentTypes.SUBDOCUMENT, ["sub_frame"]],
  [contentTypes.WEBSOCKET, ["websocket"]],
  [contentTypes.WEBBUNDLE, ["webbundle"]],
  [contentTypes.PING, ["ping"]],
  [contentTypes.XMLHTTPREQUEST, ["xmlhttprequest"]],
  [contentTypes.MEDIA, ["media"]],
  [contentTypes.FONT, ["font"]]
]);
exports.requestTypes = requestTypes;

const supportedRequestTypes = Array.from(requestTypes.keys())
                                   .reduce(((srt, t) => srt | t));
exports.supportedRequestTypes = supportedRequestTypes;

function getResourceTypes(filterContentType) {
  // The default is to match everything except "main_frame", which is fine.
  if ((filterContentType & supportedRequestTypes) == supportedRequestTypes) {
    return;
  }

  let result = [];

  for (let [mask, types] of requestTypes) {
    if (filterContentType & mask) {
      result = result.concat(types);
    }
  }

  return result;
}

function getDomains(filterDomains) {
  let domains = [];
  let excludedDomains = [];
  let isGenericFilter = true;

  if (filterDomains) {
    for (let [domain, enabled] of filterDomains) {
      if (domain == "") {
        isGenericFilter = enabled;
      }
      else {
        (enabled ? domains : excludedDomains).push(domain);
      }
    }
  }

  return {domains, excludedDomains, isGenericFilter};
}

function getConditions(filter, urlFilter, resourceTypes, matchCase) {
  let baseCondition = {};

  if (urlFilter) {
    baseCondition.urlFilter = urlFilter;
  }
  else if (filter.regexp) {
    baseCondition.regexFilter = filter.regexp.source;
  }

  if (matchCase) {
    baseCondition.isUrlFilterCaseSensitive = matchCase;
  }

  if (filter.thirdParty != null) {
    baseCondition.domainType = filter.thirdParty ? "thirdParty" : "firstParty";
  }

  let {domains, excludedDomains, isGenericFilter} = getDomains(filter.domains);

  let conditions = [];

  if (resourceTypes && (domains.length || excludedDomains.length)) {
    let mainFrameResourceTypes = resourceTypes.filter(t => t == "main_frame");
    let otherResourceTypes = resourceTypes.filter(t => t != "main_frame");

    if (mainFrameResourceTypes.length) {
      let condition = {
        resourceTypes: mainFrameResourceTypes,
        ...baseCondition
      };

      if (domains.length) {
        condition.requestDomains = domains;
      }
      if (excludedDomains.length) {
        condition.excludedRequestDomains = excludedDomains;
      }

      conditions.push(condition);
    }

    if (otherResourceTypes.length) {
      let condition = {
        resourceTypes: otherResourceTypes,
        ...baseCondition
      };

      if (domains.length) {
        condition.initiatorDomains = domains;
      }
      if (excludedDomains.length) {
        condition.excludedInitiatorDomains = excludedDomains;
      }

      conditions.push(condition);
    }
  }
  else {
    let condition = {
      ...baseCondition
    };

    if (resourceTypes) {
      condition.resourceTypes = resourceTypes;
    }
    if (domains.length) {
      condition.initiatorDomains = domains;
    }
    if (excludedDomains.length) {
      condition.excludedInitiatorDomains = excludedDomains;
    }

    conditions.push(condition);
  }

  return {conditions, isGenericFilter};
}

exports.generateRedirectRules = function(filter, urlFilter, matchCase) {
  let url = resources[filter.rewrite];

  // We can't generate rules for unknown abp-resources...
  if (!url) {
    return [];
  }

  let resourceTypes = getResourceTypes(filter.contentType);

  // We can't generate rules for filters which don't include any supported
  // resource types.
  if (resourceTypes && resourceTypes.length == 0) {
    return [];
  }

  let {conditions, isGenericFilter} = getConditions(
    filter, urlFilter, resourceTypes, matchCase
  );

  return conditions.map(condition => {
    return {
      priority: isGenericFilter ? GENERIC_PRIORITY : SPECIFIC_PRIORITY,
      condition,
      action: {
        type: "redirect",
        redirect: {url}
      }
    };
  });
};

exports.generateCSPRules = function(filter, urlFilter, matchCase) {
  let {conditions, isGenericFilter} = getConditions(
    filter, urlFilter, ["main_frame", "sub_frame"], matchCase
  );

  let rules;

  if (!filter.blocking) {
    // The DNR makes no distinction between CSP rules and main_frame/sub_frame
    // rules. Ideally, we would give CSP rules a different priority therefore,
    // to ensure that a $csp exception filter would not accidentally allowlist
    // the whole website. Unfortunately, I don't think that's possible if we are
    // to also support the distinction between specific and generic rules.
    //   Luckily, we are adding an "allow" rule (not "allowAllRequest") here and
    // there is no such thing as a blocking filter which applies to the
    // $document (main_frame), so we don't have to worry about that. There is
    // such a thing as a $subdocument blocking filter though, which a $csp
    // exception filter should not usually affect.
    //   As a compromise in order to support both $csp and $genericblock, we
    // accept that $csp exception filters might wrongly prevent frame-blocking
    // filters from matching. If this compromise proves problematic, we might
    // need to reconsider this in the future.
    rules = conditions.map(condition => {
      return {
        action: {
          type: "allow"
        },
        condition,
        priority: filter.contentType & contentTypes.GENERICBLOCK ?
          GENERIC_PRIORITY : SPECIFIC_PRIORITY
      };
    });
  }
  else {
    rules = conditions.map(condition => {
      return {
        action: {
          type: "modifyHeaders",
          responseHeaders: [{
            header: "Content-Security-Policy",
            operation: "append",
            value: filter.csp
          }]
        },
        condition,
        priority: isGenericFilter ? GENERIC_PRIORITY : SPECIFIC_PRIORITY
      };
    });
  }

  return rules;
};

exports.generateBlockingRules = function(filter, urlFilter, matchCase) {
  let resourceTypes = getResourceTypes(filter.contentType);

  // We can't generate rules for filters which don't include any supported
  // resource types.
  if (resourceTypes && resourceTypes.length == 0) {
    return [];
  }

  let {conditions, isGenericFilter} = getConditions(
    filter, urlFilter, resourceTypes, matchCase
  );

  return conditions.map(condition => {
    return {
      priority: isGenericFilter ? GENERIC_PRIORITY : SPECIFIC_PRIORITY,
      condition,
      action: {
        type: "block"
      }
    };
  });
};

exports.generateAllowingRules = function(filter, urlFilter, matchCase) {
  let rules = [];
  let {contentType} = filter;

  let genericBlock = contentType & contentTypes.GENERICBLOCK;

  if (contentType & contentTypes.DOCUMENT || genericBlock) {
    contentType &= ~contentTypes.SUBDOCUMENT;

    let {conditions} = getConditions(filter,
                                     urlFilter,
                                     ["main_frame", "sub_frame"],
                                     matchCase);

    for (let condition of conditions) {
      rules.push({
        priority: genericBlock ?
          GENERIC_ALLOW_ALL_PRIORITY : SPECIFIC_ALLOW_ALL_PRIORITY,
        condition,
        action: {
          type: "allowAllRequests"
        }
      });
    }
  }

  let resourceTypes = getResourceTypes(contentType);
  if (!resourceTypes || resourceTypes.length) {
    let {conditions} =
        getConditions(filter, urlFilter, resourceTypes, matchCase);

    for (let condition of conditions) {
      rules.push({
        priority: genericBlock ? GENERIC_PRIORITY : SPECIFIC_PRIORITY,
        condition,
        action: {
          type: "allow"
        }
      });
    }
  }

  return rules;
};

function validateIsAsciiOnly(str) {
  // [0-127] range is considered to be allowed ASCII characters
  if (!/^[\x00-\x7F]*$/.test(str)) {
    throw new Error(`Invalid ASCII characters found in: "${str}"`);
  }
}
exports.validateIsAsciiOnly = validateIsAsciiOnly;

function validateDomains(domains) {
  if (domains) {
    for (let domain of domains) {
      validateIsAsciiOnly(domain);
    }
  }
}

function validateCondition(condition) {
  if (condition.urlFilter) {
    validateIsAsciiOnly(condition.urlFilter);
  }
  if (condition.regexFilter) {
    validateIsAsciiOnly(condition.regexFilter);
  }

  validateDomains(condition.initiatorDomains);
  validateDomains(condition.requestDomains);

  // deprecated starting Chrome 101
  validateDomains(condition.domains);
  validateDomains(condition.excludedDomains);

  // starting Chrome 101
  validateDomains(condition.excludedInitiatorDomains);
  validateDomains(condition.excludedRequestDomains);
}

exports.validateRule = function(rule) {
  try {
    validateCondition(rule.condition);
    return rule;
  }
  catch (e) {
    return e;
  }
};


/***/ }),

/***/ 145:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_242939__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file Downloads a set of URLs in regular time intervals.
 */

const {MILLIS_IN_DAY} = __nested_webpack_require_242939__(103);
const {isLocalhost} = __nested_webpack_require_242939__(1349);

/**
 * A type of function that yields `{@link module:downloader.Downloadable}`
 * objects to a `{@link module:downloader.Downloader}`.
 *
 * **Note**: The implementation must yield a new
 * `{@link module:downloader.Downloadable}` instance on each call with
 * up-to-date values for properties like
 * `{@link module:downloader.Downloadable#lastCheck}`,
 * `{@link module:downloader.Downloadable#lastVersion}`,
 * `{@link module:downloader.Downloadable#downloadCount}`, and others. If a
 * value is outdated, it may result in unexpected behavior.
 *
 * @callback DataSource
 *
 * @yields {module:downloader.Downloadable}
 * @generator
 *
 * @see module:downloader.Downloader
 * @see module:downloader.Downloader#dataSource
 */

/**
 * Use a `Downloader` object to download a set of URLs at regular time
 * intervals.
 *
 * This class is used by `{@link module:synchronizer.synchronizer}` and
 * `{@link module:notifications.notifications}`.
 *
 * @example
 *
 * function* dataSource()
 * {
 *   yield new Downloadable("https://example.com/filters.txt");
 * }
 *
 * let initialDelay = 1000;
 * let checkInterval = 60000;
 *
 * let downloader = new Downloader(dataSource);
 * downloader.scheduleChecks(checkInterval, initialDelay);
 *
 * downloader.onDownloadStarted = function(downloadable)
 * {
 *   console.log(`Downloading ${downloadable.url} ...`);
 * }
 *
 * @package
 */
exports.Downloader = class Downloader {
  /**
   * Creates a new downloader instance.
   * @param {module:downloader~DataSource} dataSource
   *   A function that yields `{@link module:downloader.Downloadable}` objects
   *   on each {@link module:downloader.Downloader#scheduleChecks check}.
   */
  constructor(dataSource) {
    /**
     * Maximal time interval that the checks can be left out until the soft
     * expiration interval increases.
     * @type {number}
     */
    this.maxAbsenceInterval = 1 * MILLIS_IN_DAY;

    /**
     * Minimal time interval before retrying a download after an error.
     * @type {number}
     */
    this.minRetryInterval = 1 * MILLIS_IN_DAY;

    /**
     * Maximal allowed expiration interval; larger expiration
     * intervals will be corrected.
     * @type {number}
     */
    this.maxExpirationInterval = 14 * MILLIS_IN_DAY;

    /**
     * Maximal number of redirects before the download is considered as failed.
     * @type {number}
     */
    this.maxRedirects = 5;

    /**
     * Called whenever expiration intervals for an object need to be adapted.
     * @type {function?}
     */
    this.onExpirationChange = null;

    /**
     * Callback to be triggered whenever a download starts.
     * @type {function?}
     */
    this.onDownloadStarted = null;

    /**
     * Callback to be triggered whenever a download finishes successfully.
     *
     * The callback can return an error code to indicate that the data is
     * wrong.
     *
     * @type {function?}
     */
    this.onDownloadSuccess = null;

    /**
     * Callback to be triggered whenever a download fails.
     * @type {function?}
     */
    this.onDownloadError = null;

    /**
     * A function that yields `{@link module:downloader.Downloadable}` objects
     * on each {@link module:downloader.Downloader#scheduleChecks check}.
     * @type {module:downloader~DataSource}
     */
    this.dataSource = dataSource;

    /**
     * Set containing the URLs of objects currently being downloaded.
     * (for DiffUpdatable subscriptions it's subscription URL, not diff URL)
     * @type {Set.<string>}
     */
    this._downloading = new Set();

    /**
     * Store the timeout ID for scheduled checks.
     * @type {number}
     */
    this._timeout = 0;
  }

  /**
   * Schedules checks at regular time intervals.
   *
   * @param {number} interval The interval between checks in milliseconds.
   * @param {number} delay The delay before the initial check in milliseconds.
   */
  scheduleChecks(interval, delay) {
    // clear previous timeouts if called too many times
    this.unscheduleChecks();

    let check = () => {
      try {
        this._doCheck();
      }
      finally {
        // Schedule the next check only after the callback has finished with
        // the current check.
        this._timeout =
          setTimeout(check, interval); // eslint-disable-line no-undef
      }
    };

    // Note: test/_common.js overrides setTimeout() for the tests; if this
    // global function is used anywhere else, it may give incorrect results.
    // This is why we disable ESLint's no-undef rule locally.
    // https://gitlab.com/eyeo/adblockplus/abc/adblockpluscore/issues/43
    this._timeout = setTimeout(check, delay); // eslint-disable-line no-undef
  }

  /**
   * Clear previously scheduled checks, if any.
   */
  unscheduleChecks() {
    if (this._timeout) {
      clearTimeout(this._timeout); // eslint-disable-line no-undef
      this._timeout = 0;
    }
  }

  /**
   * Checks whether anything needs downloading.
   */
  _doCheck() {
    let now = Date.now();
    for (let downloadable of this.dataSource()) {
      if (downloadable.lastCheck &&
          now - downloadable.lastCheck > this.maxAbsenceInterval) {
        // No checks for a long time interval - user must have been offline,
        // e.g.  during a weekend. Increase soft expiration to prevent load
        // peaks on the server.
        downloadable.softExpiration += now - downloadable.lastCheck;
      }
      downloadable.lastCheck = now;

      // Sanity check: do expiration times make sense? Make sure people changing
      // system clock don't get stuck with outdated subscriptions.
      if (downloadable.hardExpiration - now > this.maxExpirationInterval) {
        downloadable.hardExpiration = now + this.maxExpirationInterval;
      }
      if (downloadable.softExpiration - now > this.maxExpirationInterval) {
        downloadable.softExpiration = now + this.maxExpirationInterval;
      }

      // Notify the caller about changes to expiration parameters
      if (this.onExpirationChange) {
        this.onExpirationChange(downloadable);
      }

      // Does that object need downloading?
      if (downloadable.softExpiration > now &&
          downloadable.hardExpiration > now) {
        continue;
      }

      // Do not retry downloads too often
      if (downloadable.lastError &&
          now - downloadable.lastError < this.minRetryInterval) {
        continue;
      }

      this._download(downloadable, 0);
    }
  }

  /**
   * Checks whether an address is currently being downloaded.
   * @param {string} url
   * @returns {boolean}
   */
  isDownloading(url) {
    return this._downloading.has(url);
  }

  /**
   * Starts downloading for an object.
   * @param {Downloadable} downloadable
   */
  download(downloadable) {
    this._download(downloadable, 0);
  }

  /**
   * Generates the real download URL for an object by appending various
   * parameters.
   * @param {Downloadable} downloadable
   * @returns {string}
   */
  getDownloadUrl(downloadable) {
    const {addonName, addonVersion, application, applicationVersion,
           platform, platformVersion, manifestVersion} = __nested_webpack_require_242939__(4189);

    let url = downloadable.redirectURL || downloadable.url;
    if (url.includes("?")) {
      url += "&";
    }
    else {
      url += "?";
    }

    // We limit the download count to 4+ to keep the request anonymized.
    let {downloadCount, disabled} = downloadable;
    if (downloadCount > 4) {
      downloadCount = "4+";
    }
    if (typeof disabled == "undefined") {
      disabled = false;
    }

    url += "addonName=" + encodeURIComponent(addonName) +
           "&addonVersion=" + encodeURIComponent(addonVersion) +
           "&application=" + encodeURIComponent(application) +
           "&applicationVersion=" + encodeURIComponent(applicationVersion) +
           "&platform=" + encodeURIComponent(platform) +
           "&platformVersion=" + encodeURIComponent(platformVersion) +
           "&lastVersion=" + encodeURIComponent(downloadable.lastVersion) +
           "&downloadCount=" + encodeURIComponent(downloadCount) +
           "&disabled=" + String(disabled) +
           "&manifestVersion=" + encodeURIComponent(manifestVersion);

    if (downloadable.firstVersion && !downloadable.redirectURL) {
      url += "&firstVersion=" + encodeURIComponent(downloadable.firstVersion);
    }

    return url;
  }

  _download(downloadable, redirects) {
    if (this.isDownloading(downloadable.originalUrl || downloadable.url)) {
      return;
    }

    let downloadUrl = this.getDownloadUrl(downloadable);
    let responseStatus = 0;

    let errorCallback = error => {
      console.warn("Adblock Plus: Downloading URL " + downloadable.url +
                   " failed (" + error + ")\n" +
                   "Download address: " + downloadUrl + "\n" +
                   "Server response: " + responseStatus);

      if (this.onDownloadError) {
        // Allow one extra redirect if the error handler gives us a redirect URL
        let redirectCallback = null;
        if (redirects <= this.maxRedirects) {
          redirectCallback = url => {
            downloadable.redirectURL = url;
            this._download(downloadable, redirects + 1);
          };
        }

        this.onDownloadError(
          downloadable, downloadUrl, error, responseStatus, redirectCallback
        );
      }
    };

    if (!Downloader.isValidURL(downloadUrl)) {
      errorCallback("synchronize_invalid_url");
      return;
    }

    let requestURL = new URL(downloadUrl);

    let initObj = {
      cache: "no-store",
      credentials: "omit",
      referrer: "no-referrer",
      method: downloadable.method
    };

    let handleError = () => {
      this._downloading.delete(downloadable.originalUrl || downloadable.url);
      errorCallback("synchronize_connection_error");
    };

    let handleResponse = response => {
      this._downloading.delete(downloadable.originalUrl || downloadable.url);

      // If the Response.url property is available [1], disallow redirection
      // from HTTPS to any other protocol.
      // [1]: https://developer.mozilla.org/en-US/docs/Web/API/Response/url#Browser_compatibility
      if (typeof response.url == "string" && requestURL.protocol == "https:" &&
          new URL(response.url).protocol != requestURL.protocol) {
        errorCallback("synchronize_connection_error");
        return;
      }

      responseStatus = response.status;

      if (responseStatus != 200) {
        function isDiffTooOld(dateString) {
          let date = new Date(dateString);
          let currentDate = new Date();
          let difference = currentDate - date;

          // The maximum age for diff URLs is 6 weeks. This length was set
          // somewhat arbitrarily, so it might be adjusted in the future
          // by the FLOPS team
          // https://jira.eyeo.com/browse/EE-297
          const sixWeeksInMilliseconds = 6 * 7 * 24 * 60 * 60 * 1000;
          return difference > sixWeeksInMilliseconds;
        }

        if (isDiffTooOld(downloadable.lastModified)) {
          errorCallback("synchronize_diff_too_old");
        }
        else {
          errorCallback("synchronize_connection_error");
        }
        return;
      }

      // We need to keep updated the subscription version even via HEAD.
      if (downloadable.method === "HEAD" || downloadable.originalUrl) {
        // However, as we don't know if the server would respond with such
        // detail, we need to be sure there is such `Date` or `date` field.
        let date = response.headers.get("Date") || response.headers.get("date");
        if (date) {
          // if that's the case, we want it to be formatted as YYYYMMDDHHMM.
          downloadable.lastVersion =
            new Date(date).toISOString().replace(/\D/g, "").slice(0, 12);
        }
      }

      if (!downloadable.disabled) {
        downloadable.downloadCount++;
      }

      response.text().then(
        responseText => {
          this.onDownloadSuccess(
            downloadable, responseText, errorCallback, url => {
              if (redirects >= this.maxRedirects) {
                errorCallback("synchronize_connection_error");
                return;
              }

              downloadable.redirectURL = url;
              this._download(downloadable, redirects + 1);
            }
          );
        },
        () => {
          errorCallback("synchronize_connection_error");
        }
      );
    };

    fetch(requestURL.href, initObj).then(handleResponse, handleError);

    this._downloading.add(downloadable.originalUrl || downloadable.url);

    if (this.onDownloadStarted) {
      this.onDownloadStarted(downloadable);
    }
  }

  /**
   * Produces a soft and a hard expiration time for a given supplied
   * expiration interval.
   *
   * Downloadable things, like Subscription, have a certain time after
   * which they expire and you need to download a new, updated version.
   *
   * To spread the load on our download servers, we'd rather that all
   * users not download updates at exactly the same time, so on
   * download we calculate a soft expiration time, which is randomly
   * chosen between 80% and 120% of the original time. When we pass
   * the soft expiration, we start trying to download updates.
   *
   * However, there are other events that could cause downloads to all
   * happen at the same time. If many people leave their computer off
   * over the weekend and sign in at the beginning of business hours
   * on Monday, we could still see a spike in downloads at the same
   * time. To combat this, the soft expiration time may be delayed to
   * accomodate these periods of inactivity.
   *
   * There are limits to how far we want to delay our download due to
   * inactivity. This is why we also calculate a hard expiration time,
   * which is 200% of the original time. When we pass the hard
   * expiration, we should try to download an update whether there was
   * inactivity or not.
   *
   * This function must be called to calculate the new expiration
   * times as soon as a new version is downloaded.
   *
   * @param {number} interval how often in milliseconds the
   * downloadable should be updated
   * @returns {Array.<number>} soft and hard expiration times in
   * milliseconds since the Unix epoch
   */
  processExpirationInterval(interval) {
    interval = Math.min(Math.max(interval, 0), this.maxExpirationInterval);
    let soft = Math.round(interval * (Math.random() * 0.4 + 0.8));
    let hard = interval * 2;
    let now = Date.now();
    return [now + soft, now + hard];
  }
};

/**
 * Checks whether a URL is a valid download URL.
 *
 * For a URL to be a valid download URL, its scheme must be `https` or `data`.
 * If the host component of the URL is `localhost`, `127.0.0.1`, or `[::1]`,
 * however, but its scheme is not `https` or `data`, the URL is still
 * considered to be a valid download URL.
 *
 * `https://example.com/`, `data:,Hello%2C%20World!`, and
 * `http://127.0.0.1/example.txt` are all examples of valid download URLs.
 *
 * @param {string} url The URL.
 *
 * @returns {boolean} Whether the URL is a valid download URL.
 *
 * @package
 */
exports.Downloader.isValidURL = function isValidURL(url) {
  try {
    url = new URL(url);
  }
  catch (error) {
    return false;
  }

  if (!["https:", "data:"].includes(url.protocol) &&
      !isLocalhost(url.hostname)) {
    return false;
  }

  return true;
};

/**
 * A `Downloadable` object represents a downloadable resource.
 * @package
 */
exports.Downloadable = class Downloadable {
  /**
   * Creates an object that can be downloaded by the downloader.
   * @param {string} url  URL that has to be requested for the object
   */
  constructor(url) {
    /**
     * URL that the download was redirected to if any.
     * @type {string?}
     */
    this.redirectURL = null;

    /**
     * Time of last download error or 0 if the last download was successful.
     * @type {number}
     */
    this.lastError = 0;

    /**
     * Time of last check whether the object needs downloading.
     * @type {number}
     */
    this.lastCheck = 0;

    /**
     * Object version corresponding to the last successful download.
     * @type {number}
     */
    this.lastVersion = 0;

    /**
     * A string indicating the version of the first ever downloaded resource,
     * in `YYYY[MM[DD]][-E]` format or just `"0"` or `"0-E"`.
     *
     * Note that unlike `{@link module:downloader.Downloadable#lastVersion}`
     * this property is related to analytics and its value is common across all
     * downloadable resources.
     *
     * If `{@link module:downloader.Downloadable#url}` is not a trusted URL,
     * the value of this property should be set to `null`.
     *
     * @see module:analytics~Analytics#getFirstVersion
     * @see module:analytics~Analytics#isTrusted
     *
     * @type {?string}
     *
     * @package
     */
    this.firstVersion = null;

    /**
     * Soft expiration time in milliseconds since the Unix epoch. This
     * will increase if no checks are performed for a while.
     *
     * Updates should be downloaded if `softExpiration` or
     * `{@link module:downloader.Downloadable#hardExpiration}` are in the past.
     * @type {number}
     */
    this.softExpiration = 0;

    /**
     * Hard expiration time in milliseconds since the Unix epoch. This
     * is fixed.
     *
     * Updates should be downloaded if
     * `{@link module:downloader.Downloadable#softExpiration}` or
     * `hardExpiration` are in the past.
     * @type {number}
     */
    this.hardExpiration = 0;

    /**
     * Number indicating how often the object was downloaded.
     * @type {number}
     */
    this.downloadCount = 0;

    /**
     * Request method to use, which is either "GET" or "HEAD".
     * @type {string}
     */
    this.method = "GET";

    /**
     * URL that has to be requested for the object.
     * @type {string}
     */
    this.url = url;

    /**
     * URL that stores the subscription URL when downloading occurs for
     * the m3 diff mechanism.
     * @type {string}
     */
    this.originalUrl = null;
  }
};


/***/ }),

/***/ 4809:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_262125__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file Element hiding implementation.
 */

const {domainSuffixes, hasWildcard, matchesWildcards} =
  __nested_webpack_require_262125__(1349);
const {FiltersByDomain, FilterMap} = __nested_webpack_require_262125__(2866);
const {Cache} = __nested_webpack_require_262125__(9797);
const {ElemHideExceptions} = __nested_webpack_require_262125__(395);

class ElemHide {
  /**
   * @param {ElemHideExceptions} elemHideExceptions The associated element
   *   hiding exceptions.
   */
  constructor(elemHideExceptions) {
    if (!(elemHideExceptions instanceof ElemHideExceptions)) {
      throw new Error("elemHideExceptions must be an ElemHideExceptions");
    }

    /** @type {ElemHideExceptions} */
    this.elemHideExceptions = elemHideExceptions;

    /**
     * Lookup table, active flag, by filter by domain.
     *
     * (Only contains filters that aren't unconditionally matched for all
     * domains.)
     *
     * @type {FiltersByDomain}
     *
     * @private
     */
    this._filtersByDomain = new FiltersByDomain();

    /**
     * Lookup table, filter by selector.
     *
     * (Only used for selectors that are unconditionally matched for all
     * domains.)
     *
     * @type {Map.<string, Filter>}
     *
     * @private
     */
    this._filterBySelector = new Map();

    /**
     * This array caches the keys of
     * `{@link module:elemHide~ElemHide#_filterBySelector _filterBySelector}`
     * (selectors which unconditionally apply on all domains).
     *
     * It will be `null` if the cache needs to be rebuilt.
     *
     * @type {?Array.<string>}
     *
     * @private
     */
    this._unconditionalSelectors = null;

    /**
     * The default style sheet that applies on all domains.
     *
     * This is based on the value of
     * `{@link module:elemHide~ElemHide#_unconditionalSelectors
     *         _unconditionalSelectors}`.
     *
     * @type {?string}
     *
     * @private
     */
    this._defaultStyleSheet = null;

    /**
     * The common style sheet that applies on all unknown domains.
     *
     * This is a concatenation of the default style sheet and an additional
     * style sheet based on selectors from all generic filters that are not in
     * the `{@link module:elemHide~ElemHide#_unconditionalSelectors
     *             _unconditionalSelectors}` list.
     *
     * @type {?string}
     *
     * @private
     */
    this._commonStyleSheet = null;

    /**
     * Cache of generated domain-specific style sheets.
     *
     * This contains entries for only known domains. If a domain is unknown, it
     * gets `{@link module:elemHide~ElemHide#_commonStyleSheet
     *              _commonStyleSheet}`.
     *
     * @type {Cache.<string, string>}
     *
     * @private
     */
    this._styleSheetCache = new Cache(100);

    /**
     * Set containing known element hiding filters
     * @type {Set.<module:filterClasses.ElemHideFilter>}
     * @private
     */
    this._filters = new Set();

    /**
     * All domains known to occur in exceptions
     * @type {Set.<string>}
     * @private
     */
    this._exceptionDomains = new Set();

    /**
     * All domain with wildcards known to occur in exceptions
     * @type {Set<any>}
     * @private
     */
    this._exceptionDomainsWithWildcards = new Set();

    this.elemHideExceptions.on("added", this._onExceptionAdded.bind(this));
  }

  /**
   * Removes all known element hiding filters.
   */
  clear() {
    this._commonStyleSheet = null;

    for (let collection of [this._styleSheetCache, this._filtersByDomain,
                            this._filterBySelector, this._filters,
                            this._exceptionDomains,
                            this._exceptionDomainsWithWildcards]) {
      collection.clear();
    }

    this._unconditionalSelectors = null;
    this._defaultStyleSheet = null;
  }

  /**
   * Add a new element hiding filter.
   * @param {module:filterClasses.ElemHideFilter} filter
   */
  add(filter) {
    if (this._filters.has(filter)) {
      return;
    }

    this._styleSheetCache.clear();
    this._commonStyleSheet = null;

    let {domains, selector} = filter;

    if (!(domains || this.elemHideExceptions.hasExceptions(selector))) {
      // The new filter's selector is unconditionally applied to all domains
      this._filterBySelector.set(selector, filter);
      this._unconditionalSelectors = null;
      this._defaultStyleSheet = null;
    }
    else {
      // The new filter's selector only applies to some domains
      this._filtersByDomain.add(filter, domains);
    }

    this._filters.add(filter);
  }

  /**
   * Removes an existing element hiding filter.
   * @param {module:filterClasses.ElemHideFilter} filter
   */
  remove(filter) {
    if (!this._filters.has(filter)) {
      return;
    }

    this._styleSheetCache.clear();
    this._commonStyleSheet = null;

    let {selector} = filter;

    // Unconditially applied element hiding filters
    if (this._filterBySelector.get(selector) == filter) {
      this._filterBySelector.delete(selector);
      this._unconditionalSelectors = null;
      this._defaultStyleSheet = null;
    }
    // Conditionally applied element hiding filters
    else {
      this._filtersByDomain.remove(filter);
    }

    this._filters.delete(filter);
  }

  /**
   * Checks whether an element hiding filter exists.
   * @param {module:filterClasses.ElemHideFilter} filter
   * @returns {boolean}
   */
  has(filter) {
    return this._filters.has(filter);
  }

  /**
   * @typedef {Object} ElemHideStyleSheet
   * @property {string} code CSS code.
   * @property {?Array.<string>} selectors List of selectors.
   * @property {?Array.<string>} exceptions List of exceptions.
   */

  /**
   * Returns a style sheet for a given domain based on the current set of
   * filters.
   *
   * @param {string} domain The domain.
   * @param {boolean} [specificOnly=false] Whether selectors from generic
   *   filters should be included.
   * @param {boolean} [includeExceptions=false] Whether the return value should
   *   include a separate list of exceptions.
   *
   * @returns {module:elemHide~ElemHideStyleSheet} An object containing the CSS
   *   code and the list of selectors.
   */
  getStyleSheet(domain, specificOnly = false,
                includeExceptions = false) {
    let code = null;
    let selectors = null;
    let exceptions = null;

    if (specificOnly) {
      if (includeExceptions) {
        let selectorsAndExceptions =
          this._getConditionalSelectorsWithExceptions(domain, true);

        selectors = selectorsAndExceptions.selectors;
        exceptions = selectorsAndExceptions.exceptions;
      }
      else {
        selectors = this._getConditionalSelectors(domain, true);
      }

      code = createStyleSheet(selectors);
    }
    else {
      let knownSuffix = this._getKnownSuffix(domain);

      let selectorsAndExceptions =
        this._getConditionalSelectorsWithExceptions(knownSuffix, false);

      selectors = selectorsAndExceptions.selectors;
      exceptions = selectorsAndExceptions.exceptions;
      code = knownSuffix == "" ? this._getCommonStyleSheet() :
        this._getDefaultStyleSheet() + createStyleSheet(selectors);

      selectors = this._getUnconditionalSelectors().concat(selectors);
    }

    return {
      code,
      selectors,
      exceptions: includeExceptions ? exceptions : null
    };
  }

  /**
   * Returns the suffix of the given domain that is known.
   *
   * If no suffix is known, an empty string is returned.
   *
   * @param {?string} domain
   *
   * @returns {string}
   *
   * @private
   */
  _getKnownSuffix(domain) {
    for (let suffix of domainSuffixes(domain)) {
      if (this._filtersByDomain.has(suffix) ||
          this._exceptionDomains.has(suffix)) {
        return suffix;
      }

      for (let domainWithWildcards of this._exceptionDomainsWithWildcards) {
        if (matchesWildcards(suffix, domainWithWildcards)) {
          return suffix;
        }
      }
    }

    return "";
  }

  /**
   * Returns a list of selectors that apply on each website unconditionally.
   * @returns {string[]}
   * @private
   */
  _getUnconditionalSelectors() {
    if (!this._unconditionalSelectors) {
      this._unconditionalSelectors = [...this._filterBySelector.keys()];
    }

    return this._unconditionalSelectors;
  }

  /**
   * Returns the list of selectors that apply on a given domain from the subset
   * of filters that do not apply unconditionally on all domains.
   *
   * @param {string} domain The domain.
   * @param {boolean} specificOnly Whether selectors from generic filters should
   *   be included.
   *
   * @returns {Array.<string>} The list of selectors.
   *
   * @private
   */
  _getConditionalSelectors(domain, specificOnly) {
    let selectors = [];

    let excluded = new Set();

    for (let currentDomain of domainSuffixes(domain, !specificOnly)) {
      let map = this._filtersByDomain.get(currentDomain);
      if (map) {
        for (let [filter, include] of (map instanceof FilterMap ?
          map.entries() : [[map, true]])) {
          if (!include) {
            excluded.add(filter);
          }
          else {
            let {selector} = filter;
            if ((excluded.size == 0 || !excluded.has(filter)) &&
                !this.elemHideExceptions.getException(selector, domain)) {
              selectors.push(selector);
            }
          }
        }
      }
    }

    return selectors;
  }

  /**
   * Returns the list of selectors and the list of exceptions that apply on a
   * given domain from the subset of filters that do not apply unconditionally
   * on all domains.
   *
   * @param {string} domain The domain.
   * @param {boolean} specificOnly Whether selectors from generic filters should
   *   be included.
   *
   * @returns {{selectors: Array.<string>,
   *            exceptions: Array.<module:filterClasses.ElemHideException>}}
   *   An object containing the lists of selectors and exceptions.
   *
   * @private
   */
  _getConditionalSelectorsWithExceptions(domain, specificOnly) {
    let selectors = [];
    let exceptions = [];

    let excluded = new Set();

    for (let currentDomain of domainSuffixes(domain, !specificOnly)) {
      let map = this._filtersByDomain.get(currentDomain);
      if (map) {
        for (let [filter, include] of (map instanceof FilterMap ?
          map.entries() : [[map, true]])) {
          if (!include) {
            excluded.add(filter);
          }
          else if (excluded.size == 0 || !excluded.has(filter)) {
            let {selector} = filter;
            let exception =
                this.elemHideExceptions.getException(selector, domain);

            if (exception) {
              exceptions.push(exception);
            }
            else {
              selectors.push(selector);
            }
          }
        }
      }
    }

    return {selectors, exceptions};
  }

  /**
   * Returns the default style sheet that applies on all domains.
   * @returns {string}
   * @private
   */
  _getDefaultStyleSheet() {
    if (!this._defaultStyleSheet) {
      this._defaultStyleSheet =
        createStyleSheet(this._getUnconditionalSelectors());
    }

    return this._defaultStyleSheet;
  }

  /**
   * Returns the common style sheet that applies on all unknown domains.
   * @returns {string}
   * @private
   */
  _getCommonStyleSheet() {
    if (!this._commonStyleSheet) {
      this._commonStyleSheet =
        this._getDefaultStyleSheet() +
        createStyleSheet(this._getConditionalSelectors("", false));
    }

    return this._commonStyleSheet;
  }

  /**
   * Returns the domain-specific style sheet that applies on a given domain.
   * @param {string} domain
   * @returns {string}
   * @private
   */
  _getDomainSpecificStyleSheet(domain) {
    let styleSheet = this._styleSheetCache.get(domain);

    if (typeof styleSheet == "undefined") {
      styleSheet =
        createStyleSheet(this._getConditionalSelectors(domain, false));
      this._styleSheetCache.set(domain, styleSheet);
    }

    return styleSheet;
  }

  _onExceptionAdded(exception) {
    let {domains, selector} = exception;

    this._styleSheetCache.clear();
    this._commonStyleSheet = null;

    if (domains) {
      for (let domain of domains.keys()) {
        // Note: Once an exception domain is known it never becomes unknown,
        // even when all the exceptions containing that domain are removed.
        // This is a best-case optimization.
        if (domain != "") {
          if (hasWildcard(domain)) {
            this._exceptionDomainsWithWildcards.add(domain);
          }
          else {
            this._exceptionDomains.add(domain);
          }
        }
      }
    }

    // If this is the first exception for a previously unconditionally applied
    // element hiding selector we need to take care to update the lookups.
    let unconditionalFilterForSelector = this._filterBySelector.get(selector);
    if (unconditionalFilterForSelector) {
      this._filtersByDomain.add(unconditionalFilterForSelector);
      this._filterBySelector.delete(selector);
      this._unconditionalSelectors = null;
      this._defaultStyleSheet = null;
    }
  }
}

/**
 * Container for element hiding filters.
 */
exports.ElemHide = ElemHide;

/**
 * Yields rules from a style sheet returned by
 * `{@link module:elemHide.createStyleSheet createStyleSheet()}`.
 *
 * @param {string} styleSheet A style sheet returned by
 *   `{@link module:elemHide.createStyleSheet createStyleSheet()}`. If the
 *   given style sheet is *not* a value previously returned by a call to
 *   `{@link module:elemHide.createStyleSheet createStyleSheet()}`, the
 *   behavior is undefined.
 *
 * @generator
 * @yields {string} A rule from the given style sheet.
 */
exports.rulesFromStyleSheet = function* rulesFromStyleSheet(styleSheet) {
  let startIndex = 0;
  while (startIndex < styleSheet.length) {
    let ruleTerminatorIndex = styleSheet.indexOf("\n", startIndex);
    yield styleSheet.substring(startIndex, ruleTerminatorIndex);
    startIndex = ruleTerminatorIndex + 1;
  }
};

/**
 * Escapes curly braces to prevent CSS rule injection.
 *
 * @param {string} selector
 *
 * @returns {string}
 */
function escapeSelector(selector) {
  return selector.replace(/[{}]/g, c => `\\${c.charCodeAt().toString(16)} `);
}

/**
 * Creates an element hiding CSS rule for a given list of selectors.
 *
 * @param {string} selector The CSS selector for the rule.
 * @param {string} [declarationBlock] Optional CSS code to use as the
 *   declaration block. By default, the code `{display: none !important;}` is
 *   used. If specified, the value is injected as-is into the rule.
 *
 * @returns {string} A CSS rule.
 */
function createRule(
  selector,
  declarationBlock = "{display: none !important;}"
) {
  return `${escapeSelector(selector)} ${declarationBlock}\n`;
}

let createStyleSheet =
/**
 * Creates an element hiding CSS style sheet from a given list of selectors.
 *
 * @param {Array.<string>} selectors The list of selectors.
 * @param {string} [declarationBlock] Optional CSS code to use as the
 *   declaration block. By default, the code `{display: none !important;}` is
 *   used. If specified, the value is injected as-is into the style sheet.
 *
 * @returns {string} A CSS style sheet.
 */
exports.createStyleSheet = function createStyleSheet(selectors,
                                                     declarationBlock) {
  let styleSheet = "";

  for (let selector of selectors) {
    styleSheet += createRule(selector, declarationBlock);
  }

  return styleSheet;
};


/***/ }),

/***/ 7729:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_278541__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



const {ElemHideExceptions} = __nested_webpack_require_278541__(395);

/**
 * @file Element hiding emulation implementation.
 */

class ElemHideEmulation extends Set {
  /**
   * Construct an ElemHideEmulation object
   * @param {ElemHideExceptions} elemHideExceptions The associated element
   *  hiding exceptions.
   */
  constructor(elemHideExceptions) {
    super();
    if (!(elemHideExceptions instanceof ElemHideExceptions)) {
      throw new Error("elemHideExceptions must be an ElemHideExceptions");
    }

    /** @type {ElemHideExceptions} */
    this.elemHideExceptions = elemHideExceptions;
  }

  /**
   * Removes an existing element hiding emulation filter.
   * @param {module:filterClasses.ElemHideEmulationFilter} filter
   *
   * @deprecated Use
   *   <code>ElemHideEmulation#delete</code>
   *   instead.
   */
  remove(filter) {
    this.delete(filter);
  }

  /**
   * Returns a list of all element hiding emulation filters active on the given
   * domain.
   * @param {string} domain The domain.
   * @returns {Array.<module:filterClasses.ElemHideEmulationFilter>} A list of
   *   element hiding emulation filters.
   */
  getFilters(domain) {
    let result = [];

    for (let filter of this) {
      if (filter.isActiveOnDomain(domain) &&
          !this.elemHideExceptions.getException(filter.selector, domain)) {
        result.push(filter);
      }
    }

    return result;
  }

  /**
   * Returns a list of all element hiding emulation filters active on the given
   * domain.
   * @param {string} domain The domain.
   * @returns {Array.<module:filterClasses.ElemHideEmulationFilter>} A list of
   *   element hiding emulation filters.
   *
   * @deprecated Use
   *   <code>{@link
   *          module:elemHideEmulation~ElemHideEmulation#getFilters}</code>
   *   instead.
   * @see module:elemHideEmulation~ElemHideEmulation#getFilters
   */
  getRulesForDomain(domain) {
    return this.getFilters(domain);
  }
}

/**
 * Container for element hiding emulation filters.
 */
exports.ElemHideEmulation = ElemHideEmulation;


/***/ }),

/***/ 395:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_281406__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file Element hiding exceptions implementation.
 */

const {EventEmitter} = __nested_webpack_require_281406__(8583);

class ElemHideExceptions extends EventEmitter {
  /**
   * @hideconstructor
   */
  constructor() {
    super();

    /**
     * Lookup table, lists of element hiding exceptions by selector
     * @type {Map.<string, Set.<module:filterClasses.ElemHideException>>}
     * @private
     */
    this._exceptionsBySelector = new Map();

    /**
     * Set containing known element hiding exceptions
     * @type {Set.<module:filterClasses.ElemHideException>}
     * @private
     */
    this._exceptions = new Set();
  }

  /**
   * Removes all known element hiding exceptions.
   */
  clear() {
    this._exceptionsBySelector.clear();
    this._exceptions.clear();
  }

  /**
   * Adds a new element hiding exception.
   * @param {module:filterClasses.ElemHideException} exception
   */
  add(exception) {
    if (this._exceptions.has(exception)) {
      return;
    }

    let {selector} = exception;
    let set = this._exceptionsBySelector.get(selector);
    if (set) {
      set.add(exception);
    }
    else {
      this._exceptionsBySelector.set(selector, new Set([exception]));
    }

    this._exceptions.add(exception);

    this.emit("added", exception);
  }

  /**
   * Removes an existing element hiding exception.
   * @param {module:filterClasses.ElemHideException} exception
   */
  remove(exception) {
    if (!this._exceptions.has(exception)) {
      return;
    }

    let {selector} = exception;
    let set = this._exceptionsBySelector.get(selector);
    set.delete(exception);
    if (set.size == 0) {
      this._exceptionsBySelector.delete(selector);
    }

    this._exceptions.delete(exception);

    this.emit("removed", exception);
  }

  /**
   * Checks whether an element hiding exception exists.
   * @param {module:filterClasses.ElemHideException} exception
   * @returns {boolean}
   */
  has(exception) {
    return this._exceptions.has(exception);
  }

  /**
   * Checks whether any exception rules are registered for a selector.
   * @param {string} selector
   * @returns {boolean}
   */
  hasExceptions(selector) {
    return this._exceptionsBySelector.has(selector);
  }

  /**
   * Checks whether an exception rule is registered for a selector on a
   * particular domain.
   * @param {string} selector
   * @param {?string} [domain]
   * @returns {?module:filterClasses.ElemHideException}
   */
  getException(selector, domain) {
    let exceptions = this._exceptionsBySelector.get(selector);
    if (exceptions) {
      for (let exception of exceptions) {
        if (exception.isActiveOnDomain(domain)) {
          return exception;
        }
      }
    }

    return null;
  }
}

/**
 * Container for element hiding exceptions.
 */
exports.ElemHideExceptions = ElemHideExceptions;


/***/ }),

/***/ 8583:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * Registers and emits named events.
 */
exports.EventEmitter = class EventEmitter {
  constructor() {
    this._listeners = new Map();
  }

  /**
   * Adds a listener for the specified event name.
   *
   * @param {string}   name
   * @param {function} listener
   */
  on(name, listener) {
    let listeners = this._listeners.get(name);
    if (listeners) {
      listeners.push(listener);
    }
    else {
      this._listeners.set(name, [listener]);
    }
  }

  /**
   * Removes a listener for the specified event name.
   *
   * @param {string}   name
   * @param {function} listener
   */
  off(name, listener) {
    let listeners = this._listeners.get(name);
    if (listeners) {
      if (listeners.length > 1) {
        let idx = listeners.indexOf(listener);
        if (idx != -1) {
          listeners.splice(idx, 1);
        }
      }
      else if (listeners[0] === listener) {
        // We must use strict equality above for compatibility with
        // Array.prototype.indexOf
        this._listeners.delete(name);
      }
    }
  }

  /**
   * Returns a copy of the array of listeners for the specified event.
   *
   * @param {string} name
   *
   * @returns {Array.<function>}
   */
  listeners(name) {
    let listeners = this._listeners.size > 0 ? this._listeners.get(name) : null;
    return listeners ? listeners.slice() : [];
  }

  /**
   * Checks whether there are any listeners for the specified event.
   *
   * @param {string} [name] The name of the event. If omitted, checks whether
   *   there are any listeners for any event.
   *
   * @returns {boolean}
   */
  hasListeners(name) {
    return this._listeners.size > 0 &&
           (typeof name == "undefined" || this._listeners.has(name));
  }

  /**
   * Calls all previously added listeners for the given event name.
   *
   * @param {string} name
   * @param {...*}   [args]
   */
  emit(name, ...args) {
    let listeners = this._listeners.size > 0 ? this._listeners.get(name) : null;
    if (listeners) {
      for (let listener of listeners.slice()) {
        listener(...args);
      }
    }
  }
};


/***/ }),

/***/ 1433:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * Modes of operation for the filterEngine.
 *
 * @type {Object}
 *
 * @public
 */
exports.Features = {
  // Default features: Manifest v2.
  DEFAULT: 0,
  // We have DeclarativeNetRequest
  DNR: 1
};

let featureFlags = {};

/**
 * Resets all known feature flags back to their default values.
 */
let resetFeatureFlags =
exports.resetFeatureFlags = function() {
  // Add new feature flags here!

  featureFlags.example = false;  // example feature used by tests
  featureFlags.inlineCss = false;
  featureFlags.eyeometryUcid = false;
};

resetFeatureFlags();

/**
 * Sets the active set of feature flags.
 *
 * @param {Object} newFlags An object where each property is a feature to be
 * set.
 * @throws {Error} If any of the feature are not known, and so could not be
 * set. Any known features will still be set.
 */
exports.setFeatureFlags = function(newFlags) {
  let unknownFeatures = [];

  for (let feature in newFlags) {
    if (!Object.hasOwnProperty.call(featureFlags, feature)) {
      unknownFeatures.push(feature);
    }
    else {
      featureFlags[feature] = newFlags[feature];
    }
  }

  if (unknownFeatures.length > 0) {
    throw new Error(`Unknown feature flags: ${unknownFeatures.join(", ")}`);
  }
};

/**
 * Gets the current status of a feature flag. Used to determine which codepath
 * to take.
 *
 * @param {string} feature The name of the feature.
 * @returns {bool} The value of the feature flag, either from its default value
 * or as set by `setFeatureFlags`.
 * @throws {Error} If the feature is not one of the features set in
 * `resetFeatureFlags`.
 */
exports.isFeatureEnabled = function(feature) {
  if (typeof featureFlags[feature] == "undefined") {
    throw new Error(`Unknown feature flag: ${feature}`);
  }

  return featureFlags[feature];
};


/***/ }),

/***/ 1298:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_290554__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file Definition of Filter class and its subclasses.
 */

const {
  contentTypes, RESOURCE_TYPES, CONTEXT_TYPES
} = __nested_webpack_require_290554__(436);
const {CONTENT_FILTER, parse, FilterParsingError} = __nested_webpack_require_290554__(408);
const {Pattern} = __nested_webpack_require_290554__(453);
const {parseDomains, domainSuffixes, isValidDomainWildcard,
       hasWildcard, matchesWildcards} = __nested_webpack_require_290554__(1349);
const {isFeatureEnabled} = __nested_webpack_require_290554__(1433);
const {verifyCSSProperties} = __nested_webpack_require_290554__(7307);

const {resources} = __nested_webpack_require_290554__(3764);

const MIN_GENERIC_CONTENT_FILTER_BODY_LENGTH = 3;

/** The filter state
 * @type {module:filterState.FilterState}
 */
let filterState = null;

/**
 * @typedef {Object} HttpHeader
 * @property {string} name
 * @property {?string} value
 */

/**
 * Map of internal resources for URL rewriting.
 * @type {Map.<string,string>}
 */
let resourceMap = new Map(
  Object.keys(resources).map(key => [key, resources[key]])
);

let isActiveFilter =
/**
 * Checks whether the given filter is an active filter.
 *
 * Filters of type `blocking`, `allowing`, `elemhide`, `elemhideexception`,
 * `elemhideemulation`, and `snippet` are considered active; filters of type
 * `invalid` and `comment` are not considered active.
 *
 * @param {?Filter} filter The filter.
 *
 * @returns {boolean} Whether the filter is active.
 */
exports.isActiveFilter = function isActiveFilter(filter) {
  return filter instanceof ActiveFilter;
};

let Filter =
/**
 * Abstract base class for filters
 */
exports.Filter = class Filter {
  /**
   * @param {string} text   string representation of the filter
   */
  constructor(text) {
    this.text = text;
  }

  static useFilterState(reference) {
    filterState = reference;
  }

  /**
   * Filter type as a string, e.g. "blocking".
   *
   * Can be `blocking`, `allowing`, `elemhide`, `elemhideexception`,
   * `elemhideemulation`, `snippet`, `comment` or `invalid`.
   *
   * @type {string}
   */
  get type() {
    throw new Error("Please define filter type in the subclass");
  }

  /**
   * True if filter should only be loaded if it comes from a
   * privileged subscription (circumvention subscriptions or special
   * subscriptions).
   * @type {bool}
   */
  get requiresPrivilegedSubscription() {
    return false;
  }

  /**
   * Serializes the filter for writing out on disk.
   * @yields {string}
   */
  *serialize() {
    let {text} = this;

    yield "[Filter]";
    yield "text=" + text;
  }

  toString() {
    return this.text;
  }
};

/**
 * Cache for known filters, maps string representation to filter objects.
 * @type {Map.<string, module:filterClasses.Filter>}
 */
let knownFilters = new Map();

/**
 * Creates a filter of correct type from its text representation - does the
 * basic parsing and calls the right constructor then.
 *
 * @param {string} text   as in Filter()\
 * @return {module:filterClasses.Filter}
 */
exports.Filter.fromText = function(text) {
  let filter = knownFilters.get(text);
  if (filter) {
    return filter;
  }

  if (text.length === 0) {
    filter = new InvalidFilter(text, "filter_empty");
  }
  else if (text[0] == "!") {
    filter = new CommentFilter(text);
  }
  else {
    let match = text.includes("#") ? CONTENT_FILTER.exec(text) : null;
    if (match) {
      filter = ContentFilter.fromText(text, match[1], match[2], match[3]);
    }
    else {
      filter = URLFilter.fromText(text);
    }
  }

  if (filter.domains) {
    for (let domainWithWildcard of filter.domains.keys()) {
      if (domainWithWildcard == "") {
        continue;
      }

      if (!isValidDomainWildcard(domainWithWildcard)) {
        filter = new InvalidFilter(text, "filter_invalid_wildcard");
      }
    }
  }

  if (filter.type !== "invalid") {
    knownFilters.set(filter.text, filter);
  }

  return filter;
};

/**
 * Deserializes a filter
 *
 * @param {Object}  obj map of serialized properties and their values
 * @return {module:filterClasses.Filter} filter or null if the filter couldn't
 *   be created
 */
exports.Filter.fromObject = function(obj) {
  let filter = Filter.fromText(obj.text);
  if (isActiveFilter(filter) && filterState) {
    filterState.fromObject(filter.text, obj);
  }
  return filter;
};

let {normalize} = __nested_webpack_require_290554__(408);
exports.Filter.normalize = normalize;

let InvalidFilter =
/**
 * Class for invalid filters
 * @extends module:filterClasses.Filter
 */
exports.InvalidFilter = class InvalidFilter extends Filter {
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} reason Reason why this filter is invalid
   * @param {string?} option The optional option passed to the filter
   * @private
   */
  constructor(text, reason, option = null) {
    super(text);

    this.reason = reason;
    this.option = option;
  }

  get type() {
    return "invalid";
  }

  *serialize() {}
};

let CommentFilter =
/**
 * Class for comments
 * @extends module:filterClasses.Filter
 */
exports.CommentFilter = class CommentFilter extends Filter {
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @private
   */
  constructor(text) {
    super(text);
  }

  get type() {
    return "comment";
  }

  *serialize() {}
};

let ActiveFilter =
/**
 * Abstract base class for filters that can get hits
 * @extends module:filterClasses.Filter
 */
exports.ActiveFilter = class ActiveFilter extends Filter {
  /**
   * @param {string} text
   *   see {@link module:filterClasses.Filter Filter()}
   * @param {string} [domains]
   *   Domains that the filter is restricted to separated by domainSeparator
   *   e.g. "foo.com|bar.com|~baz.com"
   * @private
   */
  constructor(text, domains) {
    super(text);

    /**
     * String that the domains property should be generated from
     * @type {?string}
     */
    this.domainSource = domains || null;

    this._domains = domains ? void 0 : null;
  }

  /**
   * Number of filters contained, will always be 1 (required to
   * optimize {@link module:matcher.Matcher Matcher}).
   * @type {number}
   */
  get size() {
    return 1;
  }

  /**
   * See Filter.serialize()
   * @inheritdoc
   */
  *serialize() {
    if (filterState) {
      yield* filterState.serialize(this.text);
    }
  }

  /**
   * Defines whether the filter is disabled globally.
   * @type {boolean}
   * @deprecated use
   * {@link module:filterClasses.ActiveFilter#isDisabledForSubscription} and
   * {@link module:filterClasses.ActiveFilter#setDisabledForSubscription} for
   * disabling and enabling filters for specific subscriptions.
   */
  get disabled() {
    return filterState && !filterState.isEnabled(this.text);
  }
  set disabled(value) {
    if (filterState) {
      filterState.setEnabled(this.text, !value);
    }
  }

  /**
   * Defines which subscriptions the filter is disabled for.
   * See {@link module:filterClasses.ActiveFilter#isDisabledForSubscription} and
   * {@link module:filterClasses.ActiveFilter#setDisabledForSubscription} for
   * disabling and enabling filters.
   * @type {Set<string>}
   */
  get disabledSubscriptions() {
    if (!filterState) {
      return new Set();
    }
    return filterState.disabledSubscriptions(this.text);
  }

  /**
   * Checks whether this filter is disabled.
   * @param {string} subscriptionUrl The subscription to check for
   * enabled / disabled state.
   * @return {boolean} true if the filter is disabled
   */
  isDisabledForSubscription(subscriptionUrl) {
    return filterState &&
      filterState.isDisabledForSubscription(this.text, subscriptionUrl);
  }
  /**
   * Disables or enables the filter.
   * @param {string} [subscriptionUrl] The subscription on which to
   * disable / enable the filter.
   * @param {boolean} [value] new disabled value, true for disabled
   * and false for enabled
   */
  setDisabledForSubscription(subscriptionUrl, value) {
    if (filterState) {
      filterState.setDisabledForSubscription(this.text, subscriptionUrl, value);
    }
  }

  /**
   * Separator character used in domainSource property
   * @type {string}
   */
  get domainSeparator() {
    return ",";
  }

  /**
   * Number of hits on the filter since the last reset
   * @type {number}
   */
  get hitCount() {
    return filterState ? filterState.getHitCount(this.text) : 0;
  }
  set hitCount(value) {
    if (filterState) {
      filterState.setHitCount(this.text, value);
    }
  }

  /**
   * Last time the filter had a hit (in milliseconds since the beginning of the
   * epoch)
   * @type {number}
   */
  get lastHit() {
    return filterState ? filterState.getLastHit(this.text) : 0;
  }
  set lastHit(value) {
    if (filterState) {
      filterState.setLastHit(this.text, value);
    }
  }

  /**
   * Map containing domains that this filter should match on/not match
   * on or null if the filter should match on all domains
   * @type {?Map.<string,boolean>}
   */
  get domains() {
    if (typeof this._domains == "undefined") {
      let {domainSource: source, domainSeparator: sep} = this;
      this._domains = parseDomains(source.toLowerCase(), sep);
    }
    return this._domains;
  }

  /**
   * Array containing public keys of websites that this filter should apply to
   * @type {?Array.<string>}
   */
  get sitekeys() {
    return null;
  }

  /**
   * String that the sitekey property should be generated from
   * @type {?string}
   */
  get sitekeySource() {
    return null;
  }

  /**
   * Checks whether this filter is active on a domain.
   * @param {?string} [docDomain] domain name of the document that loads the URL
   * @param {string} [sitekey] public key provided by the document
   * @return {boolean} true in case of the filter being active
   */
  isActiveOnDomain(docDomain, sitekey) {
    // Sitekeys are case-sensitive so we shouldn't convert them to
    // upper-case to avoid false positives here. Instead we need to
    // change the way filter options are parsed.
    if (this.sitekeys &&
        (!sitekey || !this.sitekeys.includes(sitekey))) {
      return false;
    }

    let {domains} = this;

    // If no domains are set the rule matches everywhere
    if (!domains) {
      return true;
    }

    if (docDomain == null) {
      docDomain = "";
    }
    else if (docDomain[docDomain.length - 1] == ".") {
      docDomain = docDomain.substring(0, docDomain.length - 1);
    }

    // If the document has no host name, match only if the filter
    // isn't restricted to specific domains
    if (!docDomain) {
      return domains.get("");
    }

    for (docDomain of domainSuffixes(docDomain)) {
      // exact domain match
      let isDomainIncluded = domains.get(docDomain);
      if (typeof isDomainIncluded != "undefined") {
        return isDomainIncluded;
      }

      // domains with wildcards match
      for (let [domain, isActiveOnDomain] of domains.entries()) {
        if (hasWildcard(domain)) {
          if (matchesWildcards(docDomain, domain)) {
            return isActiveOnDomain;
          }
        }
      }
    }

    return domains.get("");
  }

  /**
   * Checks whether this filter is active only on a domain and its subdomains.
   * @param {?string} [docDomain]
   * @return {boolean}
   */
  isActiveOnlyOnDomain(docDomain) {
    let {domains} = this;

    if (!domains || domains.get("")) {
      return false;
    }

    if (docDomain == null) {
      docDomain = "";
    }
    else if (docDomain[docDomain.length - 1] == ".") {
      docDomain = docDomain.substring(0, docDomain.length - 1);
    }

    if (!docDomain) {
      return false;
    }

    for (let [domain, isIncluded] of domains) {
      if (isIncluded && domain != docDomain) {
        if (domain.length <= docDomain.length) {
          return false;
        }

        if (!domain.endsWith("." + docDomain)) {
          return false;
        }
      }
    }

    return true;
  }

  /**
   * Checks whether this filter is generic or specific
   * @return {boolean}
   */
  isGeneric() {
    let {sitekeys, domains} = this;

    return !(sitekeys && sitekeys.length) && (!domains || domains.get(""));
  }

  /**
   * Yields the filter itself (required to optimize
   *   {@link module:matcher.Matcher Matcher}).
   * @yields {module:filterClasses.ActiveFilter}
   * @package
   */
  *[Symbol.iterator]() {
    yield this;
  }
};

let URLFilter =
/**
 * Abstract base class for URL filters
 * @extends module:filterClasses.ActiveFilter
 */
exports.URLFilter = class URLFilter extends ActiveFilter {
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} regexpSource
   *   filter part that the regular expression should be build from
   * @param {number} [contentType]
   *   Content types the filter applies to, combination of values from
   *   `{@link module:contentTypes.contentTypes}`
   * @param {boolean} [matchCase]
   *   Defines whether the filter should distinguish between lower and upper
   *   case letters
   * @param {string} [domains]
   *   Domains that the filter is restricted to, e.g. "foo.com|bar.com|~baz.com"
   * @param {boolean} [thirdParty]
   *   Defines whether the filter should apply to third-party or first-party
   *   content only
   * @param {string} [sitekeys]
   *   Public keys of websites that this filter should apply to
   * @param {?HttpHeader} [header]
   *   Header-based filtering.
   * @param {?string} [rewrite]
   *   The name of the internal resource to which to rewrite the
   *   URL. e.g. if the value of the `$rewrite` option is
   *   `abp-resource:blank-html`, this should be `blank-html`.
   *
   * @private
   */
  constructor(text, regexpSource, contentType, matchCase, domains, thirdParty,
              sitekeys, header, rewrite) {
    super(text, domains);

    this._sitekeySource = sitekeys == null ? null : sitekeys;
    this._sitekeys = sitekeys == null ? null : void 0;

    /**
     * Content types the filter applies to, combination of values from
     * `{@link module:contentTypes.contentTypes}`
     * @type {number}
     */
    this.contentType = contentType != null ? contentType : RESOURCE_TYPES;

    /**
     * Defines whether the filter should apply to third-party or
     * first-party content only. Can be null (apply to all content).
     * @type {?boolean}
     */
    this.thirdParty = thirdParty != null ? thirdParty : null;

    /**
     * Header-based filtering expression. Refer to the filter
     * documentation reference for the syntax, or
     * `{@link BlockingFilter.filterHeaders}` for the reference
     * implementation.
     * @type {?HttpHeader}
     */
    this.header = header != null ? header : null;

    /**
     * The name of the internal resource to which to rewrite the
     * URL. e.g. if the value of the `$rewrite` option is
     * `abp-resource:blank-html`, this should be `blank-html`.
     * @type {?string}
     */
    this.rewrite = rewrite != null ? rewrite : null;

    /**
     * Pattern for matching request URLs
     * @type {Pattern}
     */
    this.urlPattern = new Pattern(regexpSource, matchCase);
  }

  /**
   * Expression from which a regular expression should be generated -
   * for delayed creation of the regexp property.
   *
   * Undefined if the filter uses a regex literal pattern.
   * @type {?string}
   * @deprecated Use <code>filter.urlPattern.pattern</code>, or other
   * functions available on <code>{@link module:patterns.Pattern}</code>.
   */
  get pattern() {
    return this.urlPattern.pattern;
  }

  /**
   * Regular expression to be used when testing against this pattern
   * @type {RegExp}
   * @deprecated Use <code>filter.urlPattern.regexp</code>, or other
   * functions available on <code>{@link module:patterns.Pattern}</code>.
   */
  get regexp() {
    return this.urlPattern.regexp;
  }

  /**
   * Defines whether the filter should distinguish between lower and
   * upper case letters
   * @type {boolean}
   */
  get matchCase() {
    return this.urlPattern.matchCase;
  }

  /**
   * @see ActiveFilter.domainSeparator
   */
  get domainSeparator() {
    return "|";
  }

  /**
   * @see ActiveFilter.sitekeys
   */
  get sitekeys() {
    if (typeof this._sitekeys == "undefined") {
      this._sitekeys = this._sitekeySource.split("|");
    }

    return this._sitekeys;
  }

  /**
   * @see ActiveFilter.sitekeySource
   */
  get sitekeySource() {
    return this._sitekeySource;
  }

  /**
   * Tests whether the URL request matches this filter
   * @param {module:url.URLRequest} request URL request to be tested
   * @param {number} typeMask bitmask of content / request types to match
   * @param {?string} [sitekey] public key provided by the document
   * @return {boolean} true in case of a match
   */
  matches(request, typeMask, sitekey) {
    let contextMask = typeMask & CONTEXT_TYPES;
    let resourceMask = typeMask & ~CONTEXT_TYPES;
    return (this.contentType & resourceMask) != 0 &&
      (contextMask == 0 ?
       (this.contentType & CONTEXT_TYPES) == 0 :
       (this.contentType & contextMask) != 0
      ) &&
      (this.thirdParty == null || this.thirdParty == request.thirdParty) &&
      (this.urlPattern.regexp ?
       this.isActiveOnDomain(request.documentHostname, sitekey) &&
       this.urlPattern.matchesLocation(request) :
       this.urlPattern.matchesLocation(request) &&
       this.isActiveOnDomain(request.documentHostname, sitekey));
  }
};

/**
 * Creates a URL filter from its text representation
 *
 * @param {string} filterText   same as in Filter()
 * @return {module:filterClasses.Filter}
 */
exports.URLFilter.fromText = function(filterText) {
  let result = parse(filterText);

  if (result instanceof FilterParsingError) {
    let option = null;
    if (result.message == "filter_unknown_option" && result.detail) {
      option = result.detail.option;
    }
    return new InvalidFilter(filterText, result.message, option);
  }

  let {
    blocking,
    text,
    regexpSource,
    contentType,
    matchCase,
    domains,
    thirdParty,
    sitekeys,
    header,
    rewrite,
    csp
  } = result;

  try {
    if (blocking) {
      return new BlockingFilter(
        text,
        regexpSource,
        contentType,
        matchCase,
        domains,
        thirdParty,
        sitekeys,
        header,
        rewrite,
        csp
      );
    }
    return new AllowingFilter(
      text,
      regexpSource,
      contentType,
      matchCase,
      domains,
      thirdParty,
      sitekeys,
      header
    );
  }
  catch (e) {
    return new InvalidFilter(filterText, "filter_invalid_regexp");
  }
};

/**
 * @deprecated Use <code>{@link contentTypes}</code> instead.
 * @see contentTypes
 */
// For backwards compatibility.
URLFilter.typeMap = contentTypes;

let BlockingFilter =
/**
 * Class for blocking filters
 * @extends module:filterClasses.URLFilter
 */
exports.BlockingFilter = class BlockingFilter extends URLFilter {
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} regexpSource see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {number} [contentType] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {boolean} [matchCase] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {string} [domains] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {boolean} [thirdParty] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {string} [sitekeys] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {?HttpHeader} [header] see
   *   {@link module:filterClasses.URLFilter URLFilter()}
   * @param {?string} [rewrite]
   *   The name of the internal resource to which to rewrite the
   *   URL. e.g. if the value of the `$rewrite` option is
   *   `abp-resource:blank-html`, this should be `blank-html`.
   * @param {?string} [csp]
   *   Content Security Policy to inject when the filter matches
   *
   * @private
   */
  constructor(text, regexpSource, contentType, matchCase, domains, thirdParty,
              sitekeys, header, rewrite, csp) {
    super(
      text,
      regexpSource,
      contentType,
      matchCase,
      domains,
      thirdParty,
      sitekeys,
      header,
      rewrite
    );

    /**
     * Content Security Policy to inject for matching requests.
     * @type {?string}
     */
    this.csp = csp != null ? csp : null;
  }

  get type() {
    return "blocking";
  }

  get requiresPrivilegedSubscription() {
    return (this.contentType & contentTypes.HEADER) != 0;
  }

  /**
   * Rewrites an URL.
   * @param {string} url the URL to rewrite
   * @return {string} the rewritten URL, or the original in case of failure
   */
  rewriteUrl(url) {
    return resourceMap.get(this.rewrite) || url;
  }

  /**
   * Filter headers.
   *
   * This function would be called by the request blocker code after
   * matching the request.
   *
   * @param {webRequest.HttpHeaders} headers the HTTP response headers
   *   to match, as they are returned by the request blocker. They
   *   follow the {@link webRequest API
   *   https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/HttpHeaders}.
   * @return {boolean} Whether the headers match. Will return true if
   *   there is nothing to match against, or if the header is present
   *   but no value.
   */
  filterHeaders(headers) {
    if (!this.header) {
      return true;
    }

    for (let header of headers) {
      if (header.name.toLowerCase() == this.header.name) {
        if (this.header.value) {
          if (header.value.includes(this.header.value)) {
            return true;
          }
        }
        else {
          return true;
        }
      }
    }

    return false;
  }
};

let AllowingFilter =
/**
 * Class for allowing (allowlisting) filters
 * @extends module:filterClasses.URLFilter
 */
exports.AllowingFilter = class AllowingFilter extends URLFilter {
  get type() {
    return "allowing";
  }
};

let ContentFilter =
/**
 * Base class for content filters
 * @extends module:filterClasses.ActiveFilter
 */
exports.ContentFilter = class ContentFilter extends ActiveFilter {
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} [domains] Host names or domains the filter should be
   *                           restricted to
   * @param {string} body      The body of the filter or the script that should
   *                           be executed or the CSS selector for the HTML
   *                           elements that should be hidden
   *
   * @private
   */
  constructor(text, domains, body) {
    super(text, domains || null);

    this.body = body;
  }
};

/**
 * Creates a content filter from a pre-parsed text representation
 *
 * @param {string} text         same as in Filter()
 * @param {string} [domains]
 *   domains part of the text representation
 * @param {string} [type]
 *   rule type, either:
 *     * "" for an element hiding filter
 *     * "@" for an element hiding exception filter
 *     * "?" for an element hiding emulation filter
 *     * "$" for a snippet filter
 * @param {string} body
 *   body part of the text representation, either a CSS selector or a snippet
 *   script
 * @return {module:filterClasses.ElemHideFilter|
 *          module:filterClasses.ElemHideException|
 *          module:filterClasses.ElemHideEmulationFilter|
 *          module:filterClasses.SnippetFilter|
 *          module:filterClasses.InvalidFilter}
 */
exports.ContentFilter.fromText = function(text, domains, type, body) {
  // We don't allow content filters which have any empty domains.
  // Note: The ContentFilter.prototype.domainSeparator is duplicated here, if
  // that changes this must be changed too.
  if (domains && /(^|,)~?(,|$)/.test(domains)) {
    return new InvalidFilter(text, "filter_invalid_domain");
  }

  let restrictedByDomain = /,[^~][^,.]*\.[^,]/.test("," + domains) ||
      ("," + domains + ",").includes(",localhost,");

  if (type == "$") {
    // Element hiding emulation and snippet filters are inefficient so we need
    // to make sure that they're only applied if they specify active domains.
    // The only exception is "hide-if-classifies" snippet (EE-138).

    let snippetFilter = new SnippetFilter(text, domains, body);
    if (!restrictedByDomain && !snippetFilter.script.startsWith("hide-if-classifies")) {
      return new InvalidFilter(text, "filter_snippet_nodomain");
    }
    return snippetFilter;
  }

  let selector = body;
  let propertiesList;
  let css = null;
  let remove = false;

  if (selector.startsWith("@") && isFeatureEnabled("inlineCss")) {
    return new InvalidFilter(text, "filter_elemhide_invalid_selector");
  }

  let propertiesListExtractingResult = /^(.*[^ ]) +{([^{]*)}$/.exec(body);
  if (propertiesListExtractingResult) {
    [, selector, propertiesList] = propertiesListExtractingResult;
    propertiesList = propertiesList.toLowerCase();
    remove = propertiesList.includes("remove:true;");

    if (!remove) {
      if (!isFeatureEnabled("inlineCss")) {
        return new InvalidFilter(text, "filter_unknown_option");
      }
      css = extractCSSProperties(propertiesList);
      if (!verifyCSSProperties(css)) {
        return new InvalidFilter(text, "filter_elemhide_invalid_inline_css");
      }
    }
  }



  if (type == "?") {
    if (!restrictedByDomain) {
      return new InvalidFilter(text, "filter_elemhideemulation_nodomain");
    }

    return new ElemHideEmulationFilter(text, domains, selector, remove, css);
  }

  if (!restrictedByDomain &&
      body.length < MIN_GENERIC_CONTENT_FILTER_BODY_LENGTH) {
    return new InvalidFilter(text, "filter_elemhide_not_specific_enough");
  }

  if (type == "@") {
    return new ElemHideException(text, domains, selector);
  }

  if (remove || css) {
    // Remove is only implemented for elemhide emulation filters, so if we want
    // it to work on an elemhide filter then it needs to instantiate an elemhide
    // emulation filter instead.
    //
    // Inline CSS is also currently only implemented for
    // ElemHideEmulationFilter, but should be implemented for normal
    // ElemHideFilter later.
    return new ElemHideEmulationFilter(text, domains, selector, remove, css);
  }

  return new ElemHideFilter(text, domains, selector);
};

function extractCSSProperties(propertiesList) {
  const importantFlag = "!important";

  const properties = propertiesList.split(";");
  let css = Object.create(null);

  for (const property of properties) {
    if (!property) {
      continue;
    }

    let colonIndex = property.indexOf(":");

    let name;
    let value;

    if (colonIndex < 0) {
      name = property;
      value = "";
    }
    else {
      name = property.substring(0, colonIndex);
      value = property.substring(colonIndex + 1);
    }

    name = name.trim();
    value = value.trim();

    if (value.endsWith(importantFlag)) {
      value = value.substring(0, value.length - importantFlag.length).trimEnd();
    }

    css[name] = value;
  }

  return css;
}

let ElemHideBase =
/**
 * Base class for element hiding filters
 * @extends module:filterClasses.ContentFilter
 */
exports.ElemHideBase = class ElemHideBase extends ContentFilter {
  /**
   * CSS selector for the HTML elements that should be hidden
   * @type {string}
   */
  get selector() {
    return this.body;
  }
};

let ElemHideFilter =
/**
 * Class for element hiding filters
 * @extends module:filterClasses.ElemHideBase
 */
exports.ElemHideFilter = class ElemHideFilter extends ElemHideBase {
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} [domains]  see
   *   {@link module:filterClasses.ElemHideBase ElemHideBase()}
   * @param {string} selector see
   *   {@link module:filterClasses.ElemHideBase ElemHideBase()}
   *
   * @private
   */
  constructor(text, domains, selector) {
    super(text, domains, selector);
  }

  get type() {
    return "elemhide";
  }
};

let ElemHideException =
/**
 * Class for element hiding exceptions
 * @extends module:filterClasses.ElemHideBase
 */
exports.ElemHideException = class ElemHideException extends ElemHideBase {
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} [domains]  see
   *   {@link module:filterClasses.ElemHideBase ElemHideBase()}
   * @param {string} selector see
   *   {@link module:filterClasses.ElemHideBase ElemHideBase()}
   *
   * @private
   */
  constructor(text, domains, selector) {
    super(text, domains, selector);
  }

  get type() {
    return "elemhideexception";
  }
};

let ElemHideEmulationFilter =
/**
 * Class for element hiding emulation filters
 */
exports.ElemHideEmulationFilter =
class ElemHideEmulationFilter extends ElemHideBase {
  /**
   * @param {string} text see {@link module:filterClasses.Filter Filter()}
   * @param {string} domains see
   *   {@link module:filterClasses.ElemHideBase ElemHideBase()}
   * @param {string} selector see
   *   {@link module:filterClasses.ElemHideBase ElemHideBase()}
   * @param {boolean} remove if the element should be removed from the DOM
   * @param {?Object} css Key-Value pairs of Inline CSS properties
   *   to be applied to the element
   * @constructor
   * @extends module:filterClasses.ElemHideBase
   *
   * @private
   */
  constructor(text, domains, selector, remove, css = null) {
    super(text, domains, selector);
    this._remove = remove;
    this._css = css;
  }

  get type() {
    return "elemhideemulation";
  }

  get remove() {
    return this._remove;
  }

  get css() {
    return this._css;
  }

  get requiresPrivilegedSubscription() {
    return this._css;
  }
};

let SnippetFilter =
/**
 * Class for snippet filters
 * @extends module:filterClasses.ContentFilter
 */
exports.SnippetFilter = class SnippetFilter extends ContentFilter {
  get type() {
    return "snippet";
  }
  get requiresPrivilegedSubscription() {
    return true;
  }

  /**
   * Script that should be executed
   * @type {string}
   */
  get script() {
    return this.body;
  }
};


/***/ }),

/***/ 1982:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_321523__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



__nested_webpack_require_321523__(805);
const {parseURL} = __nested_webpack_require_321523__(1349);
const {Filter} = __nested_webpack_require_321523__(1298);
const {newDefaultMatcher} = __nested_webpack_require_321523__(8070);
const {ElemHide} = __nested_webpack_require_321523__(4809);
const {ElemHideEmulation} = __nested_webpack_require_321523__(7729);
const {ElemHideExceptions} = __nested_webpack_require_321523__(395);
const {setRecommendations} = __nested_webpack_require_321523__(5056);
const {Snippets} = __nested_webpack_require_321523__(3808);
const {Features} = __nested_webpack_require_321523__(1433);

/**
 * Filter engine.
 */
class FilterEngine {
  /**
   * @typedef FilterEngineOptions
   * @type {object}
   * @property {?Array.<object>} recommendations The index of known downloadable
   *   subscriptions.
   * @property {?module:features.Features} features Enable specific features
   */
  /**
   * Creates a `{@link module:filterEngine.FilterEngine FilterEngine}`
   * object.
   *
   * @param {?FilterEngineOptions} options The options to create the engine.
   */
  constructor(options) {
    /** Activated features
     * @type {Features}
     */
    this.features = options ? options.features : Features.DEFAULT;

    if (options && options.recommendations) {
      setRecommendations(options.recommendations);
    }

    /** The `{@link module:elemHideExceptions.ElemHideExceptions}` for
     *    the engine.
     * @type {module:elemHideExceptions.ElemHideExceptions}
     */
    this.elemHideExceptions = new ElemHideExceptions();
    /** The `{@link module:elemHide.ElemHide}` for the engine.
     * @type {module:elemHide.ElemHide}
     */
    this.elemHide = new ElemHide(this.elemHideExceptions);
    /** The `{@link module:elemHideEmulation.ElemHideEmulation}` for
     *    the engine.
     * @type {module:elemHideEmulation.ElemHideEmulation}
     */
    this.elemHideEmulation = new ElemHideEmulation(this.elemHideExceptions);
    /** The `{@link module:snippets.Snippets}` for the engine.
     * @type {module:snippets.Snippets}
     */
    this.snippets = new Snippets();
    /** The `{@link module:matcher.CombinedMatcher}` to use with the engine.
     * @type {module:matcher.CombinedMatcher}
     */
    this.defaultMatcher = newDefaultMatcher();

    /** The `{@link module:filterListener.FilterListener}` to use.
     * @type {?module:filterListener.FilterListener}
     */
    this._filterListener = null;
    /** The `{@link module:filterStorage.FilterStorage}` to use.
     * @type {?module:filterStorage.FilterStorage}
     */
    this._filterStorage = null;

    /**
     * The promise returned by
     * `{@link module:filterEngine.FilterEngine#initialize}`.
     * @type {?Promise}
     * @private
     */
    this._initializationPromise = null;
  }

  /**
   * Initializes a `{@link module:filterEngine.FilterEngine FilterEngine}`
   * object with the given filters or filters loaded from disk.
   *
   * @param {Iterable.<string>} [filterSource] An iterable object that yields
   *   the text of the filters with which to initialize the
   *   `{@link module:filterEngine.FilterEngine FilterEngine}` object. If
   *   omitted, filters are loaded from disk.
   *
   * @returns {Promise} A promise that is fulfilled when the initialization is
   *   complete.
   *
   * @public
   */
  initialize(filterSource) {
    if (!this._initializationPromise) {
      if (typeof filterSource == "undefined") {
        // Note: filterListener.js and filterStorage.js must be loaded
        // conditionally here in local scope in order for the engine
        // to be able to work in standalone mode with no disk and
        // network I/O.
        const {FilterStorage} = __nested_webpack_require_321523__(7631);
        const {FilterListener} = __nested_webpack_require_321523__(2528);
        this._filterStorage = new FilterStorage({features: this.features});
        this._filterListener = new FilterListener();
        this._initializationPromise = this._filterListener.initialize(
          this, this._filterStorage
        );
      }
      else {
        this._initializationPromise = Promise.resolve().then(() => {
          for (let text of filterSource) {
            text = Filter.normalize(text, true);
            if (text) {
              let filter = Filter.fromText(text);
              if (filter.type !== "invalid") {
                this.add(filter);
              }
            }
          }
        });
      }
    }

    return this._initializationPromise;
  }

  get filterStorage() {
    return this._filterStorage;
  }

  /**
   * Selects the appropriate module for the given filter type.
   *
   * @param {string} type The type of a filter. This must be one of
   *   `"blocking"`, `"allowing"`, `"elemhide"`, `"elemhideemulation"`,
   *   `"elemhideexception"`, and `"snippet"`; otherwise the function returns
   *   `null`.
   *
   * @returns {?object} The appropriate module for the given filter type.
   */
  selectModule(type) {
    switch (type) {
      case "blocking":
      case "allowing":
        return this.defaultMatcher;
      case "elemhide":
        return this.elemHide;
      case "elemhideemulation":
        return this.elemHideEmulation;
      case "elemhideexception":
        return this.elemHideExceptions;
      case "snippet":
        return this.snippets;
    }

    return null;
  }

  /**
   * Adds a new filter.
   * @param {module:filterClasses.ActiveFilter} filter
   * @package
   */
  add(filter) {
    let module = this.selectModule(filter.type);
    if (module) {
      module.add(filter);
    }
  }

  /**
   * Removes an existing filter.
   * @param {module:filterClasses.ActiveFilter} filter
   * @package
   */
  remove(filter) {
    let module = this.selectModule(filter.type);
    if (module) {
      module.remove(filter);
    }
  }

  /**
   * Checks whether a filter exists.
   * @param {module:filterClasses.ActiveFilter} filter
   * @returns {boolean}
   * @package
   */
  has(filter) {
    let module = this.selectModule(filter.type);
    if (module) {
      return module.has(filter);
    }
    return false;
  }

  /**
   * Clears all filters.
   * @package
   */
  clear() {
    this.defaultMatcher.clear();
    this.elemHide.clear();
    this.elemHideEmulation.clear();
    this.elemHideExceptions.clear();
    this.snippets.clear();
  }

  /**
   * Matches existing URL filters against a web resource
   * (HTML document, CSS style sheet, PNG image, etc.) and returns the matching
   * filter if there's a match.
   *
   * @param {string|URL|module:url~URLInfo} url The URL of the resource.
   * @param {number} typeMask The
   *   {@link module:contentTypes.contentTypes content types} associated with
   *   the resource.
   * @param {string} documentHostname The hostname of the document of the
   *   resource.
   * @param {?string} [sitekey] An optional public key associated with the
   *   document of the resource.
   * @param {boolean} [specificOnly] Whether to ignore any generic filters.
   *
   * @returns {?string} A URL filter if there's a match; otherwise `null`.
   *
   * @public
   */
  match(url, typeMask, documentHostname, sitekey = null, specificOnly = false) {
    if (typeof url == "string") {
      url = parseURL(url);
    }

    let filter = this.defaultMatcher.match(
      url, typeMask, documentHostname, sitekey, specificOnly
    );
    return filter ? filter.text : null;
  }
}

/**
 * The `FilterEngine` class maintains filters for request blocking, element
 * hiding, and snippets.
 *
 * @public
 *
 * @example
 *
 * let {contentTypes, FilterEngine} = require("adblockpluscore");
 *
 * let filterEnginer = new FilterEngine();
 * await filterEngine.initialize(
 *   [
 *     "/annoying-ad^$image",
 *     "||example.com/social-widget.html^"
 *   ]
 * );
 *
 * let resource = {
 *   url: "https://ad-server.example.net/annoying-ad.png",
 *   documentURL: "https://news.example.com/world.html"
 * };
 *
 * let filter = filterEngine.match(resource.url, contentTypes.IMAGE,
 *                                 new URL(resource.documentURL).hostname);
 * console.log(filter); // prints "/annoying-ad^$image"
 */
exports.FilterEngine = FilterEngine;


/***/ }),

/***/ 2528:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_330378__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file Synchronization between filter storage and the filter engine.
 */

const {filterNotifier} = __nested_webpack_require_330378__(5666);
const {isActiveFilter, Filter} = __nested_webpack_require_330378__(1298);

/**
 * Checks whether filters from a given subscription should be deployed to the
 * filter engine.
 *
 * If the subscription is both valid and enabled, the function returns `true`;
 * otherwise, it returns `false`.
 *
 * @param {module:subscriptionClasses.Subscription} subscription
 *   The subscription.
 *
 * @returns {boolean} Whether filters from the subscription should be deployed
 *   to the filter engine.
 */
function shouldDeployFilters(subscription) {
  return subscription.valid && !subscription.disabled;
}

/**
 * Deploys a filter to the filter engine.
 *
 * The filter is deployed only if it belongs to at least one subscription that
 * is both valid and enabled.
 *
 * If the filter is a snippet filter, or a block filter with the `$header`
 * options, it is deployed only if it belongs to at
 * least one subscription that is valid, enabled, and of
 * {@link module:subscriptionClasses.Subscription#type type}
 * `circumvention` or a
 * {@link module:subscriptionClasses.SpecialSubscription special subscription}
 * that keeps user-defined filters.
 *
 * @param {module:filterEngine.FilterEngine} engine A reference to the
 *   filter engine.
 * @param {module:filterStorage.FilterStorage} storage A reference to
 *   the filter storage.
 * @param {Filter} filter The filter.
 * @param {?Array.<module:subscriptionClasses.Subscription>} [subscriptions]
 *   A list of subscriptions to which the filter belongs. If omitted or `null`,
 *   the information is looked up from
 *   {@link module:filterStorage.filterStorage filter storage}.
 */
function deployFilter(engine, storage, filter, subscriptions = null) {
  if (!isActiveFilter(filter)) {
    return;
  }

  let deploy = false;
  let allowPrivileged = false;
  let requiresPrivilegedSubscription = filter.requiresPrivilegedSubscription;

  for (let subscription of subscriptions ||
                           storage.subscriptions(filter.text)) {
    if (shouldDeployFilters(subscription) &&
        !filter.isDisabledForSubscription(subscription.url)) {
      deploy = true;
      if (!requiresPrivilegedSubscription) {
        break;
      }

      // Allow snippets to be executed only by the circumvention lists or the
      // user's own filters.
      if (subscription.privileged) {
        allowPrivileged = true;
        break;
      }
    }
  }

  if (!deploy) {
    return;
  }

  if (requiresPrivilegedSubscription && !allowPrivileged) {
    return;
  }

  engine.add(filter);
}

/**
 * Undeploys a filter from the filter engine.
 *
 * The filter is undeployed only if it does not belong to at least one
 * subscription that is both valid and enabled.
 *
 * @param {module:filterEngine.FilterEngine} engine A reference to the
 *   filter engine.
 * @param {module:filterStorage.FilterStorage} storage A reference to the
 *   filter storage.
 * @param {module:filterClasses.Filter} filter The filter.
 */
function undeployFilter(engine, storage, filter) {
  if (!isActiveFilter(filter)) {
    return;
  }

  let requiresPrivilegedSubscription = filter.requiresPrivilegedSubscription;

  for (let subscription of storage.subscriptions(filter.text)) {
    if (shouldDeployFilters(subscription) &&
        !filter.isDisabledForSubscription(subscription.url)) {
      if (!requiresPrivilegedSubscription ||
          (requiresPrivilegedSubscription && subscription.privileged)) {
        return;
      }
    }
  }

  engine.remove(filter);
}

/**
 * `{@link module:filterListener.filterListener filterListener}`
 * implementation.
 */
class FilterListener {
  /**
   * Initializes filter listener on startup, registers the necessary hooks.
   *
   * Initialization is asynchronous; once complete,
   * `{@link module:filterNotifier.filterNotifier filterNotifier}` emits the
   * `ready` event.
   *
   * @hideconstructor
   */
  constructor() {
    /**
     * A reference to the filter engine.
     * @type {?module:filterEngine.FilterEngine}
     * @private
     */
    this._engine = null;

    /**
     * A reference to the filter storage
     * @type {?module:filterStorage.FilterStorage}
     * @private
     */
    this._storage = null;

    /**
     * Increases on filter changes, filters will be saved if it exceeds 1.
     * @type {number}
     * @private
     */
    this._isDirty = 0;
  }

  /**
   * Initializes filter listener.
   * @param {module:filterEngine.FilterEngine} engine A reference to the
   *   filter engine.
   * @param {module:filterStorage.FilterStorage} storage A reference to the
   *   filter storage.
   * @returns {Promise} A promise that is fulfilled when the initialization is
   *   complete.
   * @package
   */
  async initialize(engine, storage) {
    if (engine == null || typeof engine != "object") {
      throw new Error("engine must be a non-null object.");
    }
    if (storage == null || typeof storage != "object") {
      throw new Error("filterStorage must be a non-null object.");
    }

    if (this._engine != null || this._storage != null) {
      throw new Error("Filter listener already initialized.");
    }

    this._engine = engine;
    this._storage = storage;

    await storage.loadFromDisk();

    let promise = Promise.resolve();

    // Initialize filters from each subscription asynchronously on startup by
    // setting up a chain of promises.
    for (let subscription of storage.subscriptions()) {
      if (shouldDeployFilters(subscription)) {
        await promise.then(() => {
          for (let text of subscription.filterText()) {
            deployFilter(
              this._engine, storage, Filter.fromText(text), [subscription]
            );
          }
        });
      }
    }

    filterNotifier.on("filter.added", this._onFilterAdded.bind(this));
    filterNotifier.on("filter.removed", this._onFilterRemoved.bind(this));
    filterNotifier.on("filter.moved", this._onGenericChange.bind(this));

    filterNotifier.on("filterState.enabled",
                      this._onFilterStateEnabled.bind(this));
    filterNotifier.on("filterState.disabledSubscriptions",
                      this._onFilterStateEnabled.bind(this));
    filterNotifier.on("filterState.hitCount",
                      this._onFilterStateHitCount.bind(this));
    filterNotifier.on("filterState.lastHit",
                      this._onFilterStateLastHit.bind(this));

    filterNotifier.on("subscription.added",
                      this._onSubscriptionAdded.bind(this));
    filterNotifier.on("subscription.removed",
                      this._onSubscriptionRemoved.bind(this));
    filterNotifier.on("subscription.disabled",
                      this._onSubscriptionDisabled.bind(this));
    filterNotifier.on("subscription.updated",
                      this._onSubscriptionUpdated.bind(this));
    filterNotifier.on("subscription.title", this._onGenericChange.bind(this));
    filterNotifier.on("subscription.fixedTitle",
                      this._onGenericChange.bind(this));
    filterNotifier.on("subscription.homepage",
                      this._onGenericChange.bind(this));
    filterNotifier.on("subscription.downloadStatus",
                      this._onGenericChange.bind(this));
    filterNotifier.on("subscription.lastCheck",
                      this._onGenericChange.bind(this));
    filterNotifier.on("subscription.errors",
                      this._onGenericChange.bind(this));
    filterNotifier.on("subscription.privileged",
                      this._onGenericChange.bind(this));

    filterNotifier.on("load", this._onLoad.bind(this));
    filterNotifier.on("save", this._onSave.bind(this));

    // Indicate that all filters are ready for use.
    filterNotifier.emit("ready");
  }

  /**
   * Increases "dirty factor" of the filters and calls
   * filterStorage.saveToDisk() if it becomes 1 or more.
   *
   * Save is executed delayed to prevent multiple subsequent calls. If the
   * parameter is 0 it forces saving filters if any changes were recorded after
   * the previous save.
   *
   * @param {number} factor
   *
   * @private
   */
  _setDirty(factor) {
    if (factor == 0 && this._isDirty > 0) {
      this._isDirty = 1;
    }
    else {
      this._isDirty += factor;
    }
    if (this._isDirty >= 1) {
      this._isDirty = 0;
      this._storage.saveToDisk();
    }
  }

  _onSubscriptionAdded(subscription) {
    this._setDirty(1);

    if (shouldDeployFilters(subscription)) {
      for (let text of subscription.filterText()) {
        deployFilter(
          this._engine, this._storage, Filter.fromText(text), [subscription]
        );
      }
    }
  }

  _onSubscriptionRemoved(subscription) {
    this._setDirty(1);

    if (shouldDeployFilters(subscription)) {
      for (let text of subscription.filterText()) {
        undeployFilter(this._engine, this._storage, Filter.fromText(text));
      }
    }
  }

  _onSubscriptionDisabled(subscription, newValue) {
    this._setDirty(1);

    if (this._storage.hasSubscription(subscription)) {
      if (newValue == false) {
        for (let text of subscription.filterText()) {
          deployFilter(
            this._engine, this._storage, Filter.fromText(text), [subscription]
          );
        }
      }
      else {
        for (let text of subscription.filterText()) {
          undeployFilter(this._engine, this._storage, Filter.fromText(text));
        }
      }
    }
  }

  _onSubscriptionUpdated(subscription, textDelta) {
    this._setDirty(1);

    if (textDelta && shouldDeployFilters(subscription) &&
        this._storage.hasSubscription(subscription)) {
      for (let text of textDelta.removed) {
        undeployFilter(
          this._engine, this._storage, Filter.fromText(text)
        );
      }

      for (let text of textDelta.added) {
        deployFilter(
          this._engine, this._storage, Filter.fromText(text), [subscription]
        );
      }
    }
  }

  _onFilterAdded(filter) {
    this._setDirty(1);
    deployFilter(this._engine, this._storage, filter);
  }

  _onFilterRemoved(filter) {
    this._setDirty(1);
    undeployFilter(this._engine, this._storage, filter);
  }

  _onFilterStateEnabled(text, newValue) {
    this._setDirty(1);

    // it's difficult to tell from newValue alone if we need to add or
    // remove the filter. Luckily, deployFilter and undeployFilter do
    // full checks that the filter should be added / removed.
    let filter = Filter.fromText(text);
    if (this._engine.has(filter)) {
      undeployFilter(this._engine, this._storage, filter);
    }
    else {
      deployFilter(this._engine, this._storage, filter);
    }
  }

  _onFilterStateHitCount(text, newValue) {
    if (newValue == 0) {
      this._setDirty(0);
    }
    else {
      this._setDirty(0.002);
    }
  }

  _onFilterStateLastHit() {
    this._setDirty(0.002);
  }

  _onGenericChange() {
    this._setDirty(1);
  }

  _onLoad() {
    this._isDirty = 0;

    this._engine.clear();

    for (let subscription of this._storage.subscriptions()) {
      if (shouldDeployFilters(subscription)) {
        for (let text of subscription.filterText()) {
          deployFilter(
            this._engine, this._storage, Filter.fromText(text), [subscription]
          );
        }
      }
    }
  }

  _onSave() {
    this._isDirty = 0;
  }
}

/**
 * Component synchronizing filter storage with the filter engine.
 * @package
 */
exports.FilterListener = FilterListener;


/***/ }),

/***/ 5666:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_342756__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file This component manages listeners and calls them to distribute
 * messages about filter changes.
 */

const {EventEmitter} = __nested_webpack_require_342756__(8583);

/**
 * This object allows registering and triggering listeners for filter events.
 * @type {module:events.EventEmitter}
 */
exports.filterNotifier = new EventEmitter();


/***/ }),

/***/ 2563:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_343913__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



const {filterNotifier} = __nested_webpack_require_343913__(5666);
const {Filter} = __nested_webpack_require_343913__(1298);

class FilterState {
  /**
   * Construct a new FilterState.
   * As a side effect this will set the global FilterState used
   * by Filter. Avoid constructing it more than once.
   */
  constructor() {
    /**
     * Internal map containing filter state.
     * @type {Map.<string, FilterStateEntry>}
     */
    this.map = new Map();

    // For now we'll assume that this is the filter state
    Filter.useFilterState(this);
  }

  /**
   * Gets which subscriptions this filters has been disabled for.
   * @param {string} filterText The text of the filter.
   * @returns {Set<string>} Set of subscription urls that this filter
   * has been disabled for.
   */
  disabledSubscriptions(filterText) {
    let state = this.map.get(filterText);
    if (!state || typeof state.disabledSubscriptions !== "object") {
      return new Set();
    }
    return state.disabledSubscriptions;
  }

  /**
   * Reset the disabled status of this filter to the default of
   * enabled for all subscriptions.
   * @param {string} filterText The text of the filter.
   */
  resetEnabled(filterText) {
    this._updateStateObject(filterText, state => {
      state.resetEnabled();
    });
  }

  /**
   * Checks whether a filter is disabled for a subscription.
   * @param {string} filterText The text of the filter.
   * @param {string} subscriptionUrl The subscription to check for
   * enabled / disabled state.
   * @returns {boolean} Whether the filter is disabled.
   */
  isDisabledForSubscription(filterText, subscriptionUrl) {
    let state = this.map.get(filterText);
    if (state) {
      return state.isDisabledForSubscription(subscriptionUrl);
    }
    return false;
  }

  /**
   * Sets the disabled state of a filter for a subscription.
   * @param {string} filterText The text of the filter.
   * @param {string} subscriptionUrl The subscription to enable /
   * disable the filter in.
   * @param {boolean} disabled The new disabled state of the filter.
   */
  setDisabledForSubscription(filterText, subscriptionUrl, disabled) {
    this._updateStateObject(filterText, state => {
      state.setDisabledForSubscription(subscriptionUrl, disabled);
    });
  }

  /**
   * Checks whether a filter is enabled.
   * @param {string} filterText The text of the filter.
   * @returns {boolean} Whether the filter is enabled.
   * @deprecated Use
   * {@link module:filterState.FilterState#isDisabledForSubscription} instead
   */
  isEnabled(filterText) {
    let state = this.map.get(filterText);
    if (state) {
      return state.enabled;
    }
    return true;
  }

  /**
   * Sets the enabled state of a filter.
   * @param {string} filterText The text of the filter.
   * @param {boolean} enabled The new enabled state of the filter.
   * @deprecated Use
   * {@link module:filterState.FilterState#setDisabledForSubscription} instead
   */
  setEnabled(filterText, enabled) {
    this._updateStateObject(filterText, state => {
      state.enabled = enabled;
    });
  }

  /**
   * Toggles the enabled state of a filter.
   * @param {string} filterText The text of the filter.
   * @deprecated Use
   * {@link module:filterState.FilterState#setDisabledForSubscription} instead
   */
  toggleEnabled(filterText) {
    let newValue = !this.isEnabled(filterText);
    this.setEnabled(filterText, newValue);
  }

  /**
   * Returns the hit count of a filter.
   * @param {string} filterText The text of the filter.
   * @returns {number} The hit count of the filter.
   */
  getHitCount(filterText) {
    let state = this.map.get(filterText);
    if (state) {
      return state.hitCount;
    }

    return 0;
  }

  /**
   * Sets the hit count of a filter.
   * @param {string} filterText The text of the filter.
   * @param {number} hitCount The new hit count of the filter.
   */
  setHitCount(filterText, hitCount) {
    this._updateStateObject(filterText, state => {
      state.hitCount = hitCount;
    });
  }

  /**
   * Resets the hit count of a filter.
   * @param {string} filterText The text of the filter.
   */
  resetHitCount(filterText) {
    this.setHitCount(filterText, 0);
  }

  /**
   * Returns the last hit time of a filter.
   * @param {string} filterText The text of the filter.
   * @returns {number} The last hit time of the filter in milliseconds since
   *   the Unix epoch.
   */
  getLastHit(filterText) {
    let state = this.map.get(filterText);
    if (state) {
      return state.lastHit;
    }

    return 0;
  }

  /**
   * Sets the last hit time of a filter.
   * @param {string} filterText The text of the filter.
   * @param {number} lastHit The new last hit time of the filter in
   *   milliseconds since the Unix epoch.
   */
  setLastHit(filterText, lastHit) {
    this._updateStateObject(filterText, state => {
      state.lastHit = lastHit;
    });
  }

  /**
   * Resets the last hit time of a filter.
   * @param {string} filterText The text of the filter.
   */
  resetLastHit(filterText) {
    this.setLastHit(filterText, 0);
  }

  /**
   * Registers a filter hit by incrementing the hit count of the filter and
   * setting the last hit time of the filter to the current time.
   * @param {string} filterText The text of the filter.
   */
  registerHit(filterText) {
    let now = Date.now();
    this._updateStateObject(filterText, state => {
      state.hitCount++;
      state.lastHit = now;
    });
  }

  /**
   * Resets the hit count and last hit time of a filter.
   * @param {string} filterText The text of the filter.
   */
  resetHits(filterText) {
    this._updateStateObject(filterText, state => {
      state.hitCount = 0;
      state.lastHit = 0;
    });
  }

  /**
   * Resets the enabled state, hit count, and last hit time of a filter.
   * @param {string} filterText The text of the filter.
   */
  reset(filterText) {
    let state = this.map.get(filterText);
    if (!state) {
      return;
    }

    this.map.delete(filterText);

    if (state.enabled !== true) {
      filterNotifier.emit("filterState.enabled",
                          filterText,
                          true,
                          state.enabled);
    }

    if (state.disabledSubscriptions && state.disabledSubscriptions.size > 0) {
      filterNotifier.emit("filterState.disabledSubscriptions",
                          filterText,
                          new Set(),
                          state.disabledSubscriptions);
    }

    if (state.hitCount != 0) {
      filterNotifier.emit("filterState.hitCount",
                          filterText,
                          0,
                          state.hitCount);
    }

    if (state.lastHit != 0) {
      filterNotifier.emit("filterState.lastHit", filterText, 0, state.lastHit);
    }
  }

  /**
   * Serializes the state of a filter.
   * @param {string} filterText The text of the filter.
   * @yields {string} The next line in the serialized representation of the
   *   state of the filter.
   * @see module:filterState.FilterState#fromObject
   * @package
   */
  *serialize(filterText) {
    let state = this.map.get(filterText);
    if (!state) {
      return;
    }

    yield "[Filter]";
    yield "text=" + filterText;

    if (state.disabled) {
      yield "disabled=true";
    }
    else if (typeof state.disabledSubscriptions === "object") {
      for (let disabledSubscription of state.disabledSubscriptions) {
        yield "disabledSubscriptions[]=" + disabledSubscription;
      }
    }

    if (state.hitCount != 0) {
      yield "hitCount=" + state.hitCount;
    }
    if (state.lastHit != 0) {
      yield "lastHit=" + state.lastHit;
    }
  }

  /**
   * Reads the state of a filter from an object representation.
   * @param {string} filterText The text of the filter.
   * @param {Object} object An object containing at least one of `disabled`,
   *   `hitCount`, and `lastHit` properties and their appropriate values.
   * @see module:filterState.FilterState#serialize
   * @package
   */
  fromObject(filterText, object) {
    if (!("disabled" in object ||
          "disabledSubscriptions" in object ||
          "hitCount" in object ||
          "lastHit" in object)) {
      return;
    }

    let state = new FilterStateEntry();
    if (String(object.disabled) == "true") {
      state.disabled = true;
    }
    else if (typeof object.disabledSubscriptions === "object") {
      state.disabledSubscriptions = new Set(object.disabledSubscriptions);
    }

    state.hitCount = parseInt(object.hitCount, 10) || 0;
    state.lastHit = parseInt(object.lastHit, 10) || 0;
    if (!state.isEmpty()) {
      this.map.set(filterText, state);
    }
  }

  _updateStateObject(filterText, doUpdate) {
    let state = this.map.get(filterText);
    if (!state) {
      state = new FilterStateEntry();
      this.map.set(filterText, state);
    }

    let oldHitCount = state.hitCount;
    let oldLastHit = state.lastHit;
    let oldEnabled = state.enabled;
    let oldDisabledSubscriptions = new Set(state.disabledSubscriptions);

    doUpdate(state);

    let newHitCount = state.hitCount;
    let newLastHit = state.lastHit;
    let newEnabled = state.enabled;
    let newDisabledSubscriptions = new Set(state.disabledSubscriptions);

    if (state.isEmpty()) {
      this.map.delete(filterText);
    }

    if (oldHitCount !== newHitCount) {
      filterNotifier.emit("filterState.hitCount",
                          filterText,
                          newHitCount,
                          oldHitCount);
    }

    if (oldLastHit !== newLastHit) {
      filterNotifier.emit("filterState.lastHit",
                          filterText,
                          newLastHit,
                          oldLastHit);
    }

    if (oldEnabled !== newEnabled) {
      filterNotifier.emit("filterState.enabled",
                          filterText,
                          newEnabled,
                          oldEnabled);
    }

    if (!disabledSubscriptionsEquals(oldDisabledSubscriptions,
                                     newDisabledSubscriptions)) {
      filterNotifier.emit("filterState.disabledSubscriptions",
                          filterText,
                          newDisabledSubscriptions,
                          oldDisabledSubscriptions);
    }
  }
}

/**
 * Represents the state for a single filter.
 * See {@link module:filterState.FilterState}
 */
class FilterStateEntry {
  constructor() {
    /**
     * The hit count of the filter.
     * @type {number}
     */
    this.hitCount = 0;

    /**
     * The last hit time of the filter in milliseconds since the Unix epoch.
     * @type {number}
     */
    this.lastHit = 0;
  }

  /**
   * Check if the state is empty, so we know if we can clean it up.
   * @returns {boolean}
   */
  isEmpty() {
    return this.hitCount === 0 &&
      this.lastHit === 0 &&
      !this.disabled &&
      !this.disabledSubscriptions;
  }

  /**
   * Check if a filter is disabled for a specified subscription.
   * @param {string} subscriptionUrl The subscription to check for
   * enabled / disabled state.
   * @returns {boolean}
   */
  isDisabledForSubscription(subscriptionUrl) {
    if (this.disabled === true) {
      return true;
    }
    return this.disabledSubscriptions &&
      this.disabledSubscriptions.has(subscriptionUrl);
  }

  /**
   * Sets the disabled state of a filter.
   * @param {string} subscriptionUrl The subscription to enable /
   * disable the filter in.
   * @param {boolean} disabled The new disabled state of the filter.
   */
  setDisabledForSubscription(subscriptionUrl, disabled) {
    delete this.disabled;

    if (!this.disabledSubscriptions && !disabled) {
      return;
    }

    if (!this.disabledSubscriptions) {
      this.disabledSubscriptions = new Set();
    }

    if (disabled) {
      this.disabledSubscriptions.add(subscriptionUrl);
    }
    else {
      this.disabledSubscriptions.delete(subscriptionUrl);
      if (this.disabledSubscriptions.size === 0) {
        delete this.disabledSubscriptions;
      }
    }
  }

  /**
   * Reset the disabled status of this filter to the default of
   * enabled for all subscriptions.
   */
  resetEnabled() {
    delete this.disabled;
    delete this.disabledSubscriptions;
  }

  /**
   * Representation of filter state for the deprecated global enabling
   * and disabling of filters, as well as the `filterState.enabled`
   * events.
   * @type {boolean}
   * @deprecated Prefer {@link isDisabledForSubscription}
   */
  get enabled() {
    return !this.disabled;
  }
  set enabled(value) {
    delete this.disabledSubscriptions;
    this.disabled = !value;
  }
}

/**
 * Checks if two sets of disabled subscription urls contain exactly
 * the same subscription urls.
 * @param {Set<string>} oldDisabledSubscriptions
 * @param {Set<string>} newDisabledSubscriptions
 * @returns {boolean}
 */
function disabledSubscriptionsEquals(oldDisabledSubscriptions,
                                     newDisabledSubscriptions) {
  if (oldDisabledSubscriptions.size !== newDisabledSubscriptions.size) {
    return false;
  }

  for (let old of oldDisabledSubscriptions) {
    if (!newDisabledSubscriptions.has(old)) {
      return false;
    }
  }
  return true;
}

/**
 * Maintains filter state.
 */
exports.FilterState = FilterState;


/***/ }),

/***/ 7631:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_358059__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file `filterStorage` object responsible for managing the user's
 * subscriptions and filters.
 */

const {IO} = __nested_webpack_require_358059__(1252);
const {Prefs} = __nested_webpack_require_358059__(35);
const {isActiveFilter} = __nested_webpack_require_358059__(1298);
const {Subscription, SpecialSubscription} = __nested_webpack_require_358059__(6659);
const {filterNotifier} = __nested_webpack_require_358059__(5666);
const {INIParser} = __nested_webpack_require_358059__(8441);
const {FilterState} = __nested_webpack_require_358059__(2563);
const {Synchronizer} = __nested_webpack_require_358059__(7962);
const {Features} = __nested_webpack_require_358059__(1433);

/**
 * The Error type returned by filter storage.
 *
 * @property {Object} detail Contains information about the error.
 * @property {string} [detail.text] The text of the filter for
     `filter_not_found`.
 * @property {Array.<string>} [detail.exist] The list of duplicate
 *   filters.
 */
class FilterStorageError extends Error {
  /** Construct a FilterParsingError
   * @constructor
   * @param {string} message The error message.
   * @param {Object} detail The `FilterStorageError` detail.
   */
  constructor(message, detail) {
    super(message);
    this.detail = detail;
  }
}

exports.FilterStorageError = FilterStorageError;

/**
 * @typedef {Object} Stats
 * @property {boolean} exists
 * @property {number} lastModified
 */

/**
 * A cache for all source files and backup stats.
 * @type {Map<string, Stats>}
 * @private
 */
let stats = new Map();

/**
 * An asynchronous guard for multiple backups renmaing operations. It gets
 * reassigned to a new Promise that rename all backups one more time.
 * @type {Promise<void>}
 * @private
 */
let backupQueue = Promise.resolve();

/**
 * Version number of the filter storage file format.
 * @type {number}
 */
const FORMAT_VERSION = 5;

/**
 * Reads the user's filters from disk, manages them in memory, and writes them
 * back to disk.
 */
class FilterStorage {
  /**
   * @typedef FilterStorageOptions
   * @type {object}
   * @property {?module:features.Features} features Enable specific features
   */
  /**
   * Construct a FilterStorage
   *
   * @param {?FilterStorageOptions} options The options to create the storage.
   */
  constructor(options) {
    /**
     * Will be set to `true` after the initial
     * `{@link module:filterStorage.FilterStorage#loadFromDisk loadFromDisk()}`
     * call completes.
     * @type {boolean}
     */
    this.initialized = false;

    /**
     * Will be set to `true` if no `patterns.ini` file exists.
     * @type {boolean}
     */
    this.firstRun = false;

    /** Activated features
     * @type {Features}
     */
    this.features = options ? options.features : Features.DEFAULT;
    Subscription.dnr = (this.features & Features.DNR) != 0;

    /**
     * Map of properties listed in the filter storage file before the sections
     * start. Right now this should be only the format version.
     * @type {Object}
     */
    this.fileProperties = Object.create(null);

    /**
     * Map of subscriptions already on the list, by their URL/identifier.
     * @type {Map.<string,module:subscriptionClasses.Subscription>}
     * @private
     */
    this._knownSubscriptions = new Map();

    /**
     * Map of subscriptions with metadata, by their URL/identifier.
     *
     * It can be used to answer "which subscriptions have metadata?".
     * @type {Map.<string,module:subscriptionClasses.Subscription>}
     * @private
     */
    this._metadataSubscriptions = new Map();

    /**
     * Will be set to `true` if
     * `{@link module:filterStorage.FilterStorage#saveToDisk saveToDisk()}`
     * is running (reentrance protection).
     * @type {boolean}
     * @private
     */
    this._saving = false;
    this._initSaving();

    /**
     * Will be set to `true` if a
     * `{@link module:filterStorage.FilterStorage#saveToDisk saveToDisk()}`
     * call arrives while
     * `{@link module:filterStorage.FilterStorage#saveToDisk saveToDisk()}`
     * is already running (delayed execution).
     * @type {boolean}
     * @private
     */
    this._needsSave = false;

    /**
     * This property is for testing purpose only and it should never be used
     * directly via code.
     * @type {Map<string, Stats>}
     * @private
     */
    this._stats = stats;

    this.synchronizer = new Synchronizer(this);
    this.filterState = new FilterState();
  }

  _initSaving() {
    if (this._saving) {
      const fs = this;
      this._savingPromise = new Promise((resolve, reject) => {
        fs._savingPromiseResolve = resolve;
        fs._savingPromiseReject = reject;
      });
    }
    else {
      if (this._savingPromiseResolve) {
        this._savingPromiseResolve();
      }

      this._savingPromise = null;
      this._savingPromiseResolve = null;
      this._savingPromiseReject = null;
    }
  }

  setSaving(newValue, skipInit = false) {
    if (newValue == this._saving) {
      return;
    }
    this._saving = newValue;
    if (!skipInit) {
      this._initSaving();
    }
  }

  /**
   * The version number of the `patterns.ini` format used.
   * @type {number}
   */
  get formatVersion() {
    return FORMAT_VERSION;
  }

  /**
   * The file containing the subscriptions.
   * @type {string}
   */
  static get sourceFile() {
    return "patterns.ini";
  }

  /**
   * Yields subscriptions in the storage.
   * @param {?string} [filterText] The filter text for which to look. If
   *   specified, the function yields only those subscriptions that contain the
   *   given filter text. By default the function yields all subscriptions.
   * @yields {module:subscriptionClasses.Subscription}
   */
  *subscriptions(filterText = null) {
    if (filterText == null) {
      yield* this._knownSubscriptions.values();
    }
    else {
      for (let subscription of this._knownSubscriptions.values()) {
        if (subscription.hasFilterText(filterText)) {
          yield subscription;
        }
      }
    }
  }

  /**
   * Returns the number of subscriptions in the storage.
   * @param {?string} [filterText] The filter text for which to look. If
   *   specified, the function counts only those subscriptions that contain the
   *   given filter text. By default the function counts all subscriptions.
   * @returns {number}
   */
  getSubscriptionCount(filterText = null) {
    if (filterText == null) {
      return this._knownSubscriptions.size;
    }

    let count = 0;
    for (let subscription of this._knownSubscriptions.values()) {
      if (subscription.hasFilterText(filterText)) {
        count++;
      }
    }
    return count;
  }

  /**
   * Finds the filter group that a filter should be added to by default. Will
   * return `null` if this group doesn't exist yet.
   * @param {Filter} filter
   * @returns {?module:subscriptionClasses.SpecialSubscription}
   */
  getGroupForFilter(filter) {
    let generalSubscription = null;
    for (let subscription of this._knownSubscriptions.values()) {
      // We ignore disabled subscriptions and subscriptions
      // without metadata
      if (
        subscription instanceof SpecialSubscription &&
        !subscription.disabled && !subscription.metadata
      ) {
        // Always prefer specialized subscriptions
        if (subscription.isDefaultFor(filter)) {
          return subscription;
        }

        // If this is a general subscription - store it as fallback
        if (!generalSubscription &&
            (!subscription.defaults || !subscription.defaults.length)) {
          generalSubscription = subscription;
        }
      }
    }
    return generalSubscription;
  }

  /**
   * Checks whether a given subscription is in the storage.
   * @param {module:subscriptionClasses.Subscription|string} subscription
   *   or the URL of the subscription.
   * @returns {boolean}
   */
  hasSubscription(subscription) {
    if (typeof subscription == "string") {
      return this._knownSubscriptions.has(subscription);
    }

    return this._knownSubscriptions.has(subscription.url);
  }

  /**
   * Get the the subscription from the storage.
   * @param {string} subscription The URL of the subscription.
   * @returns {module:subscriptionClasses.Subscription}
   */
  getSubscription(subscription) {
    return this._knownSubscriptions.get(subscription);
  }

  /**
   * Adds a subscription to the storage.
   * @param {module:subscriptionClasses.Subscription} subscription The
   *   subscription to be added.
   */
  addSubscription(subscription) {
    if (this._knownSubscriptions.has(subscription.url)) {
      return;
    }

    this._knownSubscriptions.set(subscription.url, subscription);

    filterNotifier.emit("subscription.added", subscription);
  }

  /**
   * Removes a subscription from the storage.
   * @param {module:subscriptionClasses.Subscription} subscription The
   *   subscription to be removed.
   */
  removeSubscription(subscription) {
    if (!this._knownSubscriptions.has(subscription.url)) {
      return;
    }

    this._knownSubscriptions.delete(subscription.url);
    this._metadataSubscriptions.delete(subscription.url);

    // This should be the last remaining reference to the Subscription
    // object.
    Subscription.knownSubscriptions.delete(subscription.url);

    filterNotifier.emit("subscription.removed", subscription);
  }

  /**
   * Removes all the subscriptions from the storage (fast, for testing).
   * @private
   */
  _clear() {
    this._knownSubscriptions.clear();
    this._metadataSubscriptions.clear();
    Subscription.knownSubscriptions.clear();
    this._stats.clear();

    // not using `setSaving(false)` as it might not resolve
    // possible saving promise if reSaving is in progress.
    this._saving = false;
    this._initSaving();

    this._needsSave = false;

    this.filterState = new FilterState();
  }

  /**
   * Replaces the list of filters in a subscription with a new list.
   * @param {module:subscriptionClasses.Subscription} subscription The
   *   subscription to be updated.
   * @param {Array.<string>} filterText The new filter text.
   */
  updateSubscriptionFilters(subscription, filterText) {
    let update = subscription.updateFilterText(filterText);
    filterNotifier.emit(
      "subscription.updated",
      subscription,
      update
    );
  }

  /**
   * Checks if a filter exists in any active special subscription.
   *
   * @param {Filter} filter The filter to check.
   * @return {bool} True if the filter appears in a special subscription.
   */
  filterExists(filter) {
    for (let currentSubscription of this._knownSubscriptions.values()) {
      if (currentSubscription instanceof SpecialSubscription &&
          !currentSubscription.disabled &&
          currentSubscription.hasFilterText(filter.text)) {
        return true;
      }
    }

    return false;
  }

  /**
   * Adds user-defined filters to the storage with metadata. Filters which
   * already exist in a special subscription are skipped.
   *
   * @async
   * @param {Filter|Array<Filter>} filters Filter(s) to add. If the list
   *   contains duplicate entries, they'll be skipped.
   * @param {Object} metadata The metadata block.
   *
   * @return {Promise<module:subscriptionClasses.SpecialSubscription|null>}
   *   Promise resolves to the subscription the new filters are in, or null if
   *   no filters were added.
   */
  async addFiltersWithMetadata(filters, metadata) {
    let list = Array.isArray(filters) ? filters : [filters];

    let newFilters = list.filter(filter => !this.filterExists(filter));

    if (newFilters.length == 0) {
      return null;
    }

    let subscription = null;

    for (let filter of newFilters) {
      if (!subscription) {
        subscription = SpecialSubscription.createForFilter(filter);
      }
      // We make sure we don't have a duplicate already from `filters`.
      else if (!subscription.hasFilterText(filter.text)) {
        subscription.addFilterText(filter.text);
      }
    }

    this._metadataSubscriptions.set(subscription.url, subscription);
    this.addSubscription(subscription);

    for (let filter of newFilters) {
      if (this.filterState.isDisabledForSubscription(
        filter.text, subscription.url)) {
        this.filterState.setDisabledForSubscription(
          filter.text, subscription.url, false);
      }
    }

    subscription.metadata = metadata;

    return subscription;
  }

  /**
   * Get the metadata for a filter.
   *
   * @async
   * @param {string} text The filter text.
   * @return {Promise<?Object>} The metadata if any found.
   *
   * This function will iterate through all the subscriptions with metadata
   * to find a `SpecialSubscription` that contains the filter text.
   */
  async getMetadataForFilter(text) {
    for (let currentSubscription of this._metadataSubscriptions.values()) {
      if (currentSubscription.hasFilterText(text)) {
        return currentSubscription.metadata;
      }
    }

    return null;
  }

  /**
   * Set the metadata for a filter that already has metadata.
   *
   * A filter can have metadata only if it was added using
   * `addFiltersWithMetadata()`. It is currently not possible to add metadata
   * to an existing custom filter that was added with `addFilter()`. In that
   * case, the function will return a `filter_not_found` error.
   *
   * @async
   * @param {string} text The filter text.
   * @param {Object} metadata The metadata.
   *
   * @return {Promise<module:subscriptionClasses.SpecialSubscription>} The
   *   subscription whose metadata was changed.
   */
  async setMetadataForFilter(text, metadata) {
    for (let currentSubscription of this._metadataSubscriptions.values()) {
      if (currentSubscription.hasFilterText(text)) {
        currentSubscription.metadata = metadata;
        return currentSubscription;
      }
    }

    throw new FilterStorageError("filter_not_found", {text});
  }

  /**
   * Checks and enables the filter for the subscription.
   * @param {string} filterText The filter text.
   * @param {string} subscriptionUrl The subscription URL to enable filter for.
   * @private
   */
  enableFilter(filterText, subscriptionUrl) {
    if (this.filterState.isDisabledForSubscription(
      filterText, subscriptionUrl)) {
      this.filterState.setDisabledForSubscription(
        filterText, subscriptionUrl, false);
    }
  }

  /**
   * Adds a user-defined filter to the storage.
   *
   * @async
   * @param {Filter} filter
   * @param {?module:subscriptionClasses.SpecialSubscription} [subscription]
   *   The subscription that the filter should be added to.
   * @param {number} [position] The position within the subscription at which
   *   the filter should be added. If not specified, the filter is added at the
   *   end of the subscription.
   *
   * @return {Promise<module:subscriptionClasses.SpecialSubscription>} The
   *   subscription the filter is in. Either existing or added.
   */
  async addFilter(filter, subscription, position) {
    if (!subscription) {
      for (let currentSubscription of this._knownSubscriptions.values()) {
        if (currentSubscription instanceof SpecialSubscription &&
            !currentSubscription.disabled &&
            currentSubscription.hasFilterText(filter.text)) {
          return currentSubscription;
        }
      }
      subscription = this.getGroupForFilter(filter);
    }
    if (!subscription) {
      // No group for this filter exists, create one
      subscription = SpecialSubscription.createForFilter(filter);
      this.addSubscription(subscription);
      this.enableFilter(filter.text, subscription.url);
      return subscription;
    }

    if (typeof position == "undefined") {
      position = subscription.filterCount;
    }

    subscription.insertFilterTextAt(filter.text, position);
    this.enableFilter(filter.text, subscription.url);
    filterNotifier.emit("filter.added", filter, subscription, position);
    return subscription;
  }

  /**
   * Removes a user-defined filter from the storage.
   * @param {module:filterClasses.Filter} filter
   * @param {?module:subscriptionClasses.SpecialSubscription} [subscription]
   *   The subscription that the filter should be removed from. If not
   *   specified, the filter will be removed from all subscriptions.
   * @param {number} [position] The position within the subscription at which
   *   the filter should be removed. If not specified, all instances of the
   *   filter will be removed.
   */
  removeFilter(filter, subscription, position) {
    let subscriptions = (
      subscription ? [subscription] : this._knownSubscriptions.values()
    );
    for (let currentSubscription of subscriptions) {
      if (currentSubscription instanceof SpecialSubscription &&
          (currentSubscription == subscription ||
           currentSubscription.hasFilterText(filter.text))) {
        let positions = [];
        if (typeof position == "undefined") {
          let index = -1;
          do {
            index = currentSubscription.findFilterTextIndex(
              filter.text, index + 1);
            if (index >= 0) {
              positions.push(index);
            }
          } while (index >= 0);
        }
        else {
          positions.push(position);
        }

        for (let j = positions.length - 1; j >= 0; j--) {
          let currentPosition = positions[j];
          let currentFilterText =
            currentSubscription.filterTextAt(currentPosition);
          if (currentFilterText && currentFilterText == filter.text) {
            currentSubscription.deleteFilterAt(currentPosition);
            filterNotifier.emit(
              "filter.removed", filter, currentSubscription, currentPosition
            );
          }
        }
      }
    }
  }

  /**
   * Moves a user-defined filter to a new position.
   * @param {module:filterClasses.Filter} filter
   * @param {module:subscriptionClasses.SpecialSubscription} subscription The
   *   subscription where the filter is located.
   * @param {number} oldPosition The current position of the filter.
   * @param {number} newPosition The new position of the filter.
   */
  moveFilter(filter, subscription, oldPosition, newPosition) {
    if (!(subscription instanceof SpecialSubscription)) {
      return;
    }

    let currentFilterText = subscription.filterTextAt(oldPosition);
    if (!currentFilterText || currentFilterText != filter.text) {
      return;
    }

    newPosition = Math.min(Math.max(newPosition, 0),
                           subscription.filterCount - 1);
    if (oldPosition == newPosition) {
      return;
    }

    subscription.deleteFilterAt(oldPosition);
    subscription.insertFilterTextAt(filter.text, newPosition);
    filterNotifier.emit(
      "filter.moved", filter, subscription, oldPosition, newPosition
    );
  }

  /**
   * Increases the hit count for a filter by one.
   * @param {Filter} filter
   */
  increaseHitCount(filter) {
    if (!Prefs.savestats || !isActiveFilter(filter)) {
      return;
    }

    this.filterState.registerHit(filter.text);
  }

  /**
   * Resets hit count for some filters.
   * @param {?Array.<Filter>} [filters] The filters to be reset. If not
   *   specified, all filters will be reset.
   */
  resetHitCounts(filters) {
    if (filters) {
      for (let filter of filters) {
        this.filterState.resetHits(filter.text);
      }
    }
    else {
      for (let text of this.filterState.map.keys()) {
        this.filterState.resetHits(text);
      }
    }
  }

  /**
   * @callback TextSink
   * @param {string?} line
   */

  /**
   * Allows importing previously serialized filter data.
   * @param {boolean} silent If `true`, no "load" notification will be sent
   *   out.
   * @returns {TextSink} The function to be called for each line of data.
   *   Calling it with `null` as the argument finalizes the import and replaces
   *   existing data. No changes will be applied before finalization, so import
   *   can be "aborted" by forgetting this callback.
   * @package
   */
  importData(silent) {
    let parser = new INIParser(this.filterState);
    return line => {
      parser.process(line);
      if (line === null) {
        let knownSubscriptions = new Map();
        let metadataSubscriptions = new Map();
        for (let subscription of parser.subscriptions) {
          // Convert to the new terminology when loading.
          if (Array.isArray(subscription.defaults)) {
            subscription.defaults.forEach((type, i, arr) => {
              if (type == "whitelist") {
                arr[i] = "allowing";
              }
            });
          }
          knownSubscriptions.set(subscription.url, subscription);
          if (subscription.metadata) {
            metadataSubscriptions.set(subscription.url, subscription);
          }
        }

        this.fileProperties = parser.fileProperties;
        this._knownSubscriptions = knownSubscriptions;
        this._metadataSubscriptions = metadataSubscriptions;

        if (!silent) {
          filterNotifier.emit("load");
        }
      }
    };
  }

  /**
   * Loads all subscriptions from disk.
   * @returns {Promise} A promise resolved or rejected when loading is complete.
   * @package
   */
  async loadFromDisk() {
    let tryBackup = async backupIndex => {
      try {
        await this.restoreBackup(backupIndex, true);
      }
      catch (error) {
        // Give up
      }
    };

    try {
      let statData = await statFile(FilterStorage.sourceFile);

      if (!statData.exists) {
        this.firstRun = true;
        return;
      }

      let parser = this.importData(true);
      await IO.readFromFile(FilterStorage.sourceFile, parser);
      parser(null);
    }
    catch (error) {
      console.warn(error);
      await tryBackup(1);
    }

    this.initialized = true;
    filterNotifier.emit("load");
  }

  /**
   * Constructs the file name for a `patterns.ini` backup.
   * @param {number} backupIndex Number of the backup file (1 being the most
   *   recent).
   * @returns {string} Backup file name.
   * @package
   */
  static getBackupName(backupIndex) {
    let [name, extension] = FilterStorage.sourceFile.split(".", 2);
    return (name + "-backup" + backupIndex + "." + extension);
  }

  /**
   * Restores an automatically created backup.
   * @param {number} backupIndex Number of the backup to restore (1 being the
   *   most recent).
   * @param {boolean} silent If `true`, no "load" notification will be sent
   *   out.
   * @returns {Promise} A promise resolved or rejected when restoration is
   *   complete.
   * @package
   */
  async restoreBackup(backupIndex, silent) {
    let backupFile = FilterStorage.getBackupName(backupIndex);
    let parser = this.importData(silent);
    await IO.readFromFile(backupFile, parser);
    parser(null);
    return this.saveToDisk();
  }

  /**
   * Generator serializing filter data and yielding it line by line.
   * @yields {string}
   */
  *exportData() {
    // Do not persist external subscriptions
    let subscriptions = [];
    for (let subscription of this._knownSubscriptions.values()) {
      if (!(subscription instanceof SpecialSubscription &&
            subscription.filterCount == 0)) {
        subscriptions.push(subscription);
      }
    }

    yield "# Adblock Plus preferences";
    yield "version=" + this.formatVersion;

    let saved = new Set();

    // Save subscriptions
    for (let subscription of subscriptions) {
      yield* subscription.serialize();
      yield* subscription.serializeFilters();
    }

    // Save filter data
    for (let subscription of subscriptions) {
      for (let text of subscription.filterText()) {
        if (!saved.has(text)) {
          yield* this.filterState.serialize(text);
          saved.add(text);
        }
      }
    }
  }

  /**
   * Saves all subscriptions back to disk.
   * @param {boolean} [skipInitSavePromise=false] Skip init new saving promise
   * @returns {Promise} A promise resolved or rejected when saving is complete.
   * @package
   */
  async saveToDisk(skipInitSavePromise = false) {
    if (this._saving) {
      this._needsSave = true;
      return;
    }

    this.setSaving(true, skipInitSavePromise);
    try {
      let {patternsbackups} = Prefs;
      let isBackupRequired = async() => {
        // First check whether we need to create a backup
        if (patternsbackups <= 0) {
          return false;
        }

        let statData = await statFile(FilterStorage.sourceFile);
        if (!statData.exists) {
          return false;
        }

        let backupStatData = await statFile(FilterStorage.getBackupName(1));
        if (backupStatData.exists &&
            (Date.now() - backupStatData.lastModified) / 3600000 <
              Prefs.patternsbackupinterval) {
          return false;
        }

        return true;
      };

      if (await isBackupRequired()) {
        try {
          // if patternsbackups is 1 just create it, otherwise create a
          // backup-0 that will be shifted among others later on
          let i = patternsbackups > 1 ? 0 : 1;
          await renameFile(
            FilterStorage.sourceFile, FilterStorage.getBackupName(i)
          );

          // if there is more than a backup, backup-0 up to backup-X need to be
          // renamed but without blocking this callback
          if (patternsbackups > 1) {
            // keep queueing backups as these come, considering backup1 and
            // backup 0 are always safe thanks to the this._saving flag
            backupQueue = backupQueue.then(() => new Promise(resolve => {
              let renameAll = async index => {
                if (index > 0) {
                  try {
                    let source = FilterStorage.getBackupName(index - 1);
                    let dest = FilterStorage.getBackupName(index);
                    await renameFile(source, dest);
                  }
                  catch (error) {
                    // Expected error, backup file doesn't exist.
                  }
                  renameAll(index - 1);
                }
                else {
                  resolve();
                }
              };
              renameAll(patternsbackups);
            }));
          }
        }
        catch (error) {
          // This is actually an unexpected error that could happen only if
          // the disk had issues in renaming the source file.
          console.warn(error);
        }
      }
    }
    catch (error) {
      // Errors during backup creation shouldn't prevent writing filters.
      console.warn(error);
    }

    try {
      await IO.writeToFile(FilterStorage.sourceFile, this.exportData());
      stats.set(
        FilterStorage.sourceFile, {exists: true, lastModified: Date.now()}
      );
      filterNotifier.emit("save");
    }
    catch (error) {
      // If saving failed, report error but continue -
      // we still have to process flags.
      console.warn(error);
      stats.delete(FilterStorage.sourceFile);
    }

    // if it still needs reSaving, don't resolve current promise here and
    // skip creating new promise in internal `saveToDisk()` below
    this.setSaving(false, this._needsSave);

    if (this._needsSave) {
      this._needsSave = false;
      this.saveToDisk(true);
    }
  }

  async awaitSavingComplete() {
    if (!this._saving) {
      return;
    }

    await this._savingPromise;
  }

  /**
   * @typedef {Object} FileInfo
   * @property {number} index
   * @property {number} lastModified
   */

  /**
   * Returns a promise resolving in a list of existing backup files.
   * @returns {Promise.<Array.<FileInfo>>}
   * @package
   */
  async getBackupFiles() {
    let backups = [];

    let checkBackupFile = async index => {
      try {
        let statData = await statFile(FilterStorage.getBackupName(index));
        if (!statData.exists) {
          return backups;
        }

        backups.push({
          index,
          lastModified: statData.lastModified
        });

        return checkBackupFile(index + 1);
      }
      catch (error) {
        // Something went wrong, return whatever data we got so far.
        console.warn(error);
        return backups;
      }
    };

    return checkBackupFile(1);
  }

  /**
   * Clears the cache
   * @ignore
   */
  clearStats() {
    this._stats.clear();
  }
}

exports.FilterStorage = FilterStorage;

/**
 * Given a path, return its stats, if known, or a Stats object with properties
 * exists = false and lastModified = 0.
 * @param {string} path
 * @returns {Stats}
 */
async function statFile(path) {
  let known = stats.get(path);
  if (known) {
    return known;
  }

  try {
    known = await IO.statFile(path);
  }
  catch (error) {
    known = {exists: false, lastModified: 0};
  }
  stats.set(path, known);
  return known;
}

/**
 * Given a source path and a destination path, tries to rename the source and,
 * if it succeed, remove the source from the stats and set stats for dest.
 * @param {string} source
 * @param {string} dest
 */
async function renameFile(source, dest) {
  await IO.renameFile(source, dest);
  stats.delete(source);
  stats.set(dest, {exists: true, lastModified: Date.now()});
}


/***/ }),

/***/ 408:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_388035__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



/** @module */

const {contentTypes, RESOURCE_TYPES} = __nested_webpack_require_388035__(436);

/**
 * Regular expression that content filters should match
 * @type {RegExp}
 */
const CONTENT_FILTER = /^([^/|@"!]*?)#([@?$])?#(.+)$/;
exports.CONTENT_FILTER = CONTENT_FILTER;

/**
 * Regular expression that options on a RegExp filter should match
 * @type {RegExp}
 */
const FILTER_OPTIONS = /\$(~?[\w-]+(?:=[^,]*)?(?:,~?[\w-]+(?:=[^,]*)?)*)$/;
exports.FILTER_OPTIONS = FILTER_OPTIONS;

// used to reduce possible short filters damage
const MIN_GENERIC_URL_FILTER_PATTERN_LENGTH = 4;

/**
 * Regular expression that matches an invalid Content Security Policy
 * @type {RegExp}
 */
const INVALID_CSP = /(;|^) ?(base-uri|referrer|report-to|report-uri|upgrade-insecure-requests)\b/i;
exports.INVALID_CSP = INVALID_CSP;

/**
 * The Error type returned by parse.
 *
 * For example `filter_unknown_option` will have `option`.
 * @property {Object} detail Contains information about the error.
 * @property {string} [detail.option] The option for `filter_unknown_option`.
 * @property {string} [detail.regexp] The regexp for `filter_invalid_regexp`.
 * @property {string} detail.text The text of the rejected filter.
 */
class FilterParsingError extends Error {
  /** Construct a FilterParsingError
   * @constructor
   * @param {string} message The error message.
   * @param {Object} detail The FilterParsingError detail. Contains at
   *   least `text`.
   */
  constructor(message, detail) {
    super(message);
    this.detail = detail;
  }
}

exports.FilterParsingError = FilterParsingError;

/**
 * @typedef {Object} ParsedFilter
 * @property {bool} blocking Whether it's a blocking filter or not.
 * @property {string} text The filter text.
 * @property {string} regexpSource The source of the matching RegExp.
 * @property {number} contentType The
 *   {@link module:contentTypes.contentTypes content types} for the filter.
 * @property {bool?} matchCase If the filter is case sensitive.
 * @property {Array<string>?} domains The domains to match
 *   (`$domains` option).
 * @property {Array<string>?} sitekeys The sitekeys to match.
 * @property {object?} headers The headers filtering.
 * @property {string?} rewrite The URL for to rewrite to.
 * @property {string?} csp The CSP directive.
 */

/**
 * Parse the filter text representation into a structure.
 *
 * This is meant to be called by
 * {module:filterClasses.URLFilter.fromText}
 *
 * @param {string} text the filter normalized text. Call normalize()
 *   on the text prior to this, unless it is already normalized.
 * @return {ParsedFilter|FilterParsingError}
 *   The parsed filter, or a FilterParsingError.
 */
exports.parse = function parse(text) {
  // exclude empty text, comments, and content filters
  if (text.length < 1) {
    return new FilterParsingError("filter_empty", {text});
  }

  if (text[0] === "!" || CONTENT_FILTER.test(text)) {
    return new FilterParsingError("invalid", {text});
  }

  // parse like an ABP URLFilter
  let blocking = true;
  let origText = text;
  if (text.startsWith("@@")) {
    blocking = false;
    text = text.substring(2);
  }

  let contentType = null;
  let matchCase = null;
  let domains = null;
  let sitekeys = null;
  let thirdParty = null;
  let csp = null;
  let rewrite = null;
  let header = null;
  let options;
  let match = text.includes("$") ? FILTER_OPTIONS.exec(text) : null;
  if (match) {
    text = match.input.substring(0, match.index);

    options = match[1].split(",");
    let cspSet = false;
    let headerSet = false;

    for (let option of options) {
      let value = null;
      let separatorIndex = option.indexOf("=");
      if (separatorIndex >= 0) {
        value = option.substring(separatorIndex + 1);
        option = option.substring(0, separatorIndex);
      }

      let inverse = option[0] == "~";
      if (inverse) {
        option = option.substring(1);
      }

      let optionUpperCase = option.toUpperCase();
      let type = contentTypes[optionUpperCase.replace(/-/, "_")];
      if (type) {
        if (inverse) {
          if (contentType == null) {
            contentType = RESOURCE_TYPES;
          }
          contentType &= ~type;
        }
        else if (type === contentTypes.CSP) {
          if (blocking && !value) {
            return new FilterParsingError("filter_invalid_csp",
                                          {text: origText});
          }
          cspSet = true;
          csp = value;
        }
        else if (type === contentTypes.HEADER) {
          if (blocking && !value) {
            return new FilterParsingError("filter_invalid_header",
                                          {text: origText});
          }
          headerSet = true;
          if (value) {
            let headerRaw = value.replace(/([^\\])\\x2c/g, "$1,")
                .replace(/\\\\x2c/g, "\\x2c");
            let equal = headerRaw.indexOf("=");
            if (equal == headerRaw.length - 1) {
              // This case is "key=" with no value
              header = {
                name: headerRaw.substring(0, equal).toLowerCase()
              };
            }
            else if (equal >= 0) {
              header = {
                name: headerRaw.substring(0, equal).toLowerCase(),
                value: headerRaw.substring(equal + 1)
              };
            }
            else {
              header = {
                name: headerRaw.toLowerCase()
              };
            }

            if (header.name.length == 0) {
              return new FilterParsingError("filter_invalid_header",
                                            {text: origText});
            }
            if (/^\/[\s\S]*\/$/.test(header.value)) {
              return new FilterParsingError("filter_invalid_header",
                                            {text: origText});
            }
          }
        }
        else {
          contentType |= type;
        }
      }
      else {
        switch (optionUpperCase) {
          case "MATCH-CASE":
            matchCase = !inverse;
            break;
          case "DOMAIN":
            if (!value) {
              return new FilterParsingError("filter_unknown_option",
                                            {option, text: origText});
            }
            domains = value;
            break;
          case "THIRD-PARTY":
            thirdParty = !inverse;
            break;
          case "SITEKEY":
            if (!value) {
              return new FilterParsingError("filter_unknown_option",
                                            {option, text: origText});
            }
            // Sitekeys are case-sensitive, they shouldn't be uppercased.
            sitekeys = value;
            break;
          case "REWRITE":
            if (value == null) {
              return new FilterParsingError("filter_unknown_option",
                                            {option, text: origText});
            }
            if (!value.startsWith("abp-resource:")) {
              return new FilterParsingError("filter_invalid_rewrite",
                                            {text: origText});
            }
            rewrite = value.substring("abp-resource:".length);
            break;
          default:
            return new FilterParsingError("filter_unknown_option",
                                          {option, text: origText});
        }
      }
    }
    if (cspSet || headerSet) {
      if (contentType == null) {
        contentType = RESOURCE_TYPES;
      }
      if (cspSet) {
        contentType |= contentTypes.CSP;
      }
      if (headerSet) {
        contentType |= contentTypes.HEADER;
      }
    }
  }

  let isGeneric = !sitekeys && !domains;
  if (isGeneric) {
    let minTextLength = MIN_GENERIC_URL_FILTER_PATTERN_LENGTH;
    let {length} = text;
    if (length > 0 && text[0] === "|") {
      minTextLength++;
      if (length > 1 && text[1] === "|") {
        minTextLength++;
      }
    }
    if (length < minTextLength && !text.includes("*")) {
      return new FilterParsingError("filter_url_not_specific_enough",
                                    {text: origText});
    }
  }
  // We expect filters to use Punycode for domains these days, so let's just
  // skip filters which don't. See #6647.
  else if (domains && /[^\x00-\x7F]/.test(domains)) {
    return new FilterParsingError("filter_invalid_domain", {text: origText});
  }

  if (blocking) {
    if (csp && INVALID_CSP.test(csp)) {
      return new FilterParsingError("filter_invalid_csp", {text: origText});
    }

    if (rewrite) {
      if (text.startsWith("||")) {
        if (!domains && thirdParty != false) {
          return new FilterParsingError("filter_invalid_rewrite",
                                        {text: origText});
        }
      }
      else if (text.startsWith("*")) {
        if (!domains) {
          return new FilterParsingError("filter_invalid_rewrite",
                                        {text: origText});
        }
      }
      else {
        return new FilterParsingError("filter_invalid_rewrite",
                                      {text: origText});
      }
    }
  }

  return {
    blocking,
    text: origText,
    regexpSource: text,
    contentType,
    matchCase,
    domains,
    thirdParty,
    sitekeys,
    header,
    rewrite,
    csp
  };
};

/**
 * Removes unnecessary whitespaces from filter text, will only return null if
 * the input parameter is null.
 *
 * @param {string} text
 * @param {boolean?} dontSanitize avoid expensive operations on text.
 * @return {string}
 */
exports.normalize = function(text, dontSanitize = false) {
  if (text === "") {
    return text;
  }

  // Remove line breaks, tabs etc
  text = text.replace(/[^\S ]+/g, "");

  const removeSpaces = s => s.replace(/ +/g, "");

  const trimSpaces = action => {
    if (!action.includes(":")) {
      return "";
    }

    let [key, value] = action.split(":");
    value = value.replace("!important", "");

    // Required to allow CSS properties with spaces
    // e.g. "border: 1px solid black"
    return key.trimStart().trimEnd() + ":" + value.trimStart().trimEnd() + ";";
  };

  const formatInnerCurlyBraceText = actionBody => {
    const actions = actionBody.split(";");
    let formatted = "";

    for (const action of actions) {
      if (!action) {
        continue;
      }

      formatted += trimSpaces(action);
    }

    return formatted;
  };

  if (dontSanitize) {
    return text.trim();
  }

  if (!text.includes(" ")) {
    return text;
  }

  // Don't remove spaces inside comments
  if (/^ *!/.test(text)) {
    return text.trim();
  }

  // Special treatment for content filters, right side is allowed to contain
  // spaces
  if (CONTENT_FILTER.test(text)) {
    // Matches filter with multiple elements inside trailing curly braces
    // with the form "{property}: {value};" with any whitespaces ignored
    // Note: The semi-colon for the final element is optional
    // i.e. "{property}: {value}" is also valid
    const elemhideWithTrailingBracesMatches = /^(.*?)(#[@?]?#)(.*) +\{( *.* *: *[^;]+ *(;)? *)\} *$/.exec(text);

    if (elemhideWithTrailingBracesMatches) {
      const [
        ,
        domains,
        separator,
        body,
        textInsideCurlyBraces
      ] = elemhideWithTrailingBracesMatches;

      return removeSpaces(domains) +
        separator +
        body.trim() +
        " {" +
        formatInnerCurlyBraceText(textInsideCurlyBraces) +
        "}";
    }

    const [, domains, separator, body] = /^(.*?)(#[@?$]?#?)(.*)$/.exec(text);
    return removeSpaces(domains) + separator + body.trim();
  }

  // For most regexp filters we strip all spaces, but $csp filter options
  // are allowed to contain single (non trailing) spaces.
  let strippedText = removeSpaces(text);
  if (!strippedText.includes("$") || !/\b(csp|header)=/i.test(strippedText)) {
    return strippedText;
  }

  let optionsMatch = FILTER_OPTIONS.exec(strippedText);
  if (!optionsMatch) {
    return strippedText;
  }

  // For $csp filters we must first separate out the options part of the
  // text, being careful to preserve its spaces.
  let beforeOptions = strippedText.substring(0, optionsMatch.index);
  let strippedDollarIndex = -1;
  let dollarIndex = -1;
  do {
    strippedDollarIndex = beforeOptions.indexOf("$", strippedDollarIndex + 1);
    dollarIndex = text.indexOf("$", dollarIndex + 1);
  }
  while (strippedDollarIndex != -1);
  let optionsText = text.substring(dollarIndex + 1);

  // Then we can normalize spaces in the options part safely
  let options = optionsText.split(",");
  for (let i = 0; i < options.length; i++) {
    let option = options[i];
    let optionMatch = /^ *(c *s *p|h *e *a *d *e *r) *=/i.exec(option);
    if (optionMatch) {
      options[i] = removeSpaces(optionMatch[0]) +
        option.substring(optionMatch[0].length).trim().replace(/ +/g, " ");
    }
    else {
      options[i] = removeSpaces(option);
    }
  }

  return beforeOptions + "$" + options.join();
};


/***/ }),

/***/ 7307:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



/** @module */

/**
 * Validates the CSS properties based on the rules in
 * https://gitlab.com/eyeo/adblockplus/ad-filtering-working-group/-/blob/main/filter-syntax.md#valid-css-property-names-and-values
 *
 * @param {Object} css The parsed properties to validate. Each property on the
 *   object should be a valid CSS property.
 * @returns {boolean} True if the CSS properties are all valid.x
 */
exports.verifyCSSProperties = function verifyCSSProperties(css) {
  if (Object.keys(css).length == 0) {
    return false;
  }

  for (let name in css) {
    if (!verifyCSSPropertyName(name) || !verifyCSSPropertyValue(css[name])) {
      return false;
    }
  }

  return true;
};

function verifyCSSPropertyName(name) {
  return /^(-?[a-z]+)+$/.test(name);
}

function verifyCSSPropertyValue(value) {
  // splitting is to allow lists of valid values, for example in shorthand
  // properties like `margin` or `border`.
  let subvalues = value.split(" ").filter(subvalue => subvalue.length > 0);
  if (subvalues.length == 0) {
    return false;
  }

  return subvalues.every(subvalue => {
    return CSS_VALIDATION_WHITELIST.some(validValue => {
      if (validValue instanceof RegExp) {
        return validValue.test(subvalue);
      }

      return validValue == subvalue;
    });
  });
}

// This should be kept in sync with https://gitlab.com/eyeo/adblockplus/ad-filtering-working-group/-/blob/main/filter-syntax.md#property-values
const CSS_VALIDATION_WHITELIST = [
  "inherit",
  "initial",
  "none",
  "revert",
  "revert-layer",
  "unset",
  /^#[0-9a-f]{3,8}$/,
  "currentcolor",
  /^[+-]?(\d+(\.\d+)?|\.\d+)(e[+-]?\d+)?(cm|mm|q|in|pc|pt|px|em|ex|ch|rem|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|%|fr)?$/,
  "absolute",
  "all",
  "auto",
  "block",
  "both",
  "clip",
  "collapse",
  "contain",
  "dashed",
  "default",
  "dotted",
  "double",
  "element",
  "fit-content",
  "fixed",
  "flex",
  "flow-root",
  "flow",
  "grid",
  "groove",
  "hidden",
  "inline-block",
  "inline-flex",
  "inline-grid",
  "inline-table",
  "inline",
  "inset",
  "left",
  "list-item",
  "max-content",
  "min-content",
  "outset",
  "pointer",
  "relative",
  "ridge",
  "right",
  "ruby",
  "scroll",
  "solid",
  "static",
  "sticky",
  "table-row",
  "table",
  "text",
  "thin",
  "transparent",
  "true",
  "visible"
];


/***/ }),

/***/ 3569:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



/** @module */

/**
 * Given some text containing a filter list, parse each line and return all
 * details.
 * @param {string} filters The filter list file/text to parse.
 * @returns {Object.<error?, lines?, params?, minVersion?>} All parsed details,
 *  if available. `lines` will contain the header in the first line.
 */
function parseFilterList(filters) {
  let lines = filters.split(/[\r\n]+/);
  // The filter list always start with a header, at minimum `[Adblock]`.
  let headerMatch = /\[Adblock(?:\s*Plus\s*([\d.]+)?)?\]/i.exec(lines[0]);

  if (!headerMatch) {
    return {error: "synchronize_invalid_data"};
  }

  let minVersion = headerMatch[1];

  let params = {
    redirect: null,
    homepage: null,
    title: null,
    version: null,
    expires: null,
    abtest: null,
    diffurl: null,
    lastmodified: null
  };

  for (let {hasOwnProperty} = Object.prototype, i = 1; i < lines.length; i++) {
    let match = /^\s*!\s*(.*?)\s*:\s*(.*)/.exec(lines[i]);
    if (!match) {
      break;
    }

    let keyword = match[1].toLowerCase().replace(/\s/g, "");
    if (hasOwnProperty.call(params, keyword)) {
      params[keyword] = match[2];
      lines.splice(i--, 1);
    }
  }

  params["lastModified"] = params.lastmodified;
  delete params.lastmodified;

  return {lines, params, minVersion};
}

exports.parseFilterList = parseFilterList;


/***/ }),

/***/ 2866:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_407144__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



const {hasWildcard, matchesWildcards} = __nested_webpack_require_407144__(1349);

/**
 * Map to be used instead when a filter has a blank `domains` property.
 * @type {Map.<string, boolean>}
 */
let defaultDomains = new Map([["", true]]);

let FilterMap =
/**
 * A `FilterMap` object contains a set of filters, each mapped to a boolean
 * value indicating whether the filter should be applied.
 *
 * It is used by
 * `{@link module:filtersByDomain.FiltersByDomain FiltersByDomain}`.
 *
 * @package
 */
exports.FilterMap = class FilterMap extends Map {};

/**
 * A `FiltersByDomain` object contains a set of domains, each mapped to a set
 * of filters along with a boolean value for each filter indicating whether the
 * filter should be applied to the domain.
 *
 * @package
 */
exports.FiltersByDomain = class FiltersByDomain extends Map {
  constructor(source) {
    super(source);

    // We keep concrete domains list (eg. "example.com") in `this` map
    // and the domain with wildcards in internal `domainsWithWildcards` map
    // because of different way of matching.
    // `Map` uses "equals" implementation for `get()` and for
    // wildcarded matching implementation we need to iterate existing entries
    // and call our own `matchesWildcards(..)` implementation.
    // So at filter adding to add it to the according map and override all the
    // relevant methods (has, get) to run the wildcards-related logic.
    this.domainsWithWildcards = new Map();
  }

  /**
   * Adds a filter and all of its domains to the object.
   *
   * @param {module:filterClasses.ActiveFilter} filter The filter.
   * @param {Map.<string, boolean>} [domains] The filter's domains. If not
   *   given, the `{@link module:filterClasses.ActiveFilter#domains domains}`
   *   property of `filter` is used.
   */
  add(filter, domains = filter.domains) {
    for (let [domain, include] of domains || defaultDomains) {
      if (!include && domain == "") {
        continue;
      }

      if (hasWildcard(domain)) {
        this._addToMap(filter, domain, include, this.domainsWithWildcards);
      }
      else {
        this._addToMap(filter, domain, include, this);
      }
    }
  }

  _addToMap(filter, domain, include, toMap) {
    let map = toMap.get(domain, true);
    if (!map) {
      toMap.set(domain, include ? filter : new FilterMap([[filter, false]]));
    }
    else if (map.size == 1 && !(map instanceof FilterMap)) {
      if (filter != map) {
        toMap.set(domain, new FilterMap([[map, true], [filter, include]]));
      }
    }
    else {
      map.set(filter, include);
    }
  }

  has(domain) {
    let result = super.has(domain);
    if (!result) {
      // no filters for the concrete domain
      for (let domainWithWildcards of this.domainsWithWildcards.keys()) {
        if (matchesWildcards(domain, domainWithWildcards)) {
          result = true;
          break;
        }
      }
    }
    return result;
  }

  get(domain, skipWildcardCheck) {
    let result = [];
    let map = super.get(domain);
    if (map) {
      result.push(map);
    }

    if (!skipWildcardCheck) {
      for (let [domainWithWildcards, filterOrMap] of
        this.domainsWithWildcards.entries()) {
        if (matchesWildcards(domain, domainWithWildcards)) {
          result.push(filterOrMap);
        }
      }
    }

    if (result.length == 0) {
      result = void 0;
    }
    else if (result.length == 1) {
      result = result[0];
    }
    else {
      // merge the results
      let mergedMap = new FilterMap();
      for (let filterOrMap of result) {
        let fromMap = (filterOrMap instanceof Map ?
          filterOrMap : new Map([[filterOrMap, true]]));

        for (let [filter, isIncluded] of fromMap.entries()) {
          mergedMap.set(filter, isIncluded);
        }
      }
      result = mergedMap;
    }

    return result;
  }

  clear() {
    super.clear();
    this.domainsWithWildcards.clear();
  }

  /**
   * Removes a filter and all of its domains from the object.
   *
   * @param {module:filterClasses.ActiveFilter} filter The filter.
   * @param {Map.<string, boolean>} [domains] The filter's domains. If not
   *   given, the `{@link module:filterClasses.ActiveFilter#domains domains}`
   *   property of `filter` is used.
   */
  remove(filter, domains = filter.domains) {
    for (let domain of (domains || defaultDomains).keys()) {
      if (hasWildcard(domain)) {
        this._removeFromMap(filter, domain, this.domainsWithWildcards);
      }
      else {
        this._removeFromMap(filter, domain, this);
      }
    }
  }

  _removeFromMap(filter, domain, fromMap) {
    let map = fromMap.get(domain);
    if (map) {
      if (map.size > 1 || map instanceof FilterMap) {
        map.delete(filter);

        if (map.size == 0) {
          fromMap.delete(domain);
        }
        else if (map.size == 1) {
          for (let [lastFilter, include] of map.entries()) {
            // Reduce Map { "example.com" => Map { filter => true } } to
            // Map { "example.com" => filter }
            if (include) {
              fromMap.set(domain, lastFilter);
            }

            break;
          }
        }
      }
      else if (filter == map) {
        fromMap.delete(domain);
      }
    }
  }
};


/***/ }),

/***/ 3676:
/***/ ((module, __unused_webpack_exports, __nested_webpack_require_413216__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/**
 * @module
 *
 * @borrows module:contentTypes.contentTypes as contentTypes
 * @borrows module:features.Features as Features
 * @borrows module:filterEngine.FilterEngine as FilterEngine
 * @borrows module:synchronizer.Synchronizer as Synchronizer
 * @borrows module:url.parseURL as parseURL
 */



const {contentTypes} = __nested_webpack_require_413216__(436);
const {Features} = __nested_webpack_require_413216__(1433);
const {FilterEngine} = __nested_webpack_require_413216__(1982);
const {Synchronizer} = __nested_webpack_require_413216__(7962);
const {parseURL} = __nested_webpack_require_413216__(1349);

module.exports = {
  contentTypes,
  Features,
  FilterEngine,
  Synchronizer,
  parseURL
};


/***/ }),

/***/ 8441:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_414657__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file INI parsing.
 */

const {isActiveFilter, Filter} = __nested_webpack_require_414657__(1298);
const {FilterState} = __nested_webpack_require_414657__(2563);
const {Subscription} = __nested_webpack_require_414657__(6659);

/**
 * Parses filter data.
 * @package
 */
exports.INIParser = class INIParser {
  /** @param {FilterState} filterState the filter state */
  constructor(filterState) {
    if (!(filterState instanceof FilterState)) {
      throw new Error("filterState must be a FilterState object");
    }

    /**
     * Properties of the filter data.
     * @type {Object}
     */
    this.fileProperties = {};

    /**
     * The list of subscriptions in the filter data.
     * @type {Array.<module:subscriptionClasses.Subscription>}
     */
    this.subscriptions = [];

    /** @type {module:filterState.FilterState} */
    this.filterState = filterState;

    this._wantObj = true;
    this._curObj = this.fileProperties;
    this._curSection = null;
  }

  /**
   * Processes a line of filter data.
   *
   * @param {string?} line The line of filter data to process. This may be
   *   `null`, which indicates the end of the filter data.
   */
  process(line) {
    let match = null;
    if (this._wantObj === true && (match = /^(\w+)=(.*)$/.exec(line))) {
      this._curObj[match[1]] = match[2];
    }
    else if (this._wantObj === true && (match = /^(\w+)\[]=(.*)$/.exec(line))) {
      if (!this._curObj[match[1]]) {
        this._curObj[match[1]] = [];
      }
      this._curObj[match[1]].push(match[2]);
    }
    else if (line === null || (match = /^\s*\[(.+)\]\s*$/.exec(line))) {
      if (this._curObj) {
        // Process current object before going to next section
        switch (this._curSection) {
          case "filter":
            if ("text" in this._curObj) {
              let {text} = this._curObj;
              if (isActiveFilter(Filter.fromText(text))) {
                this.filterState.fromObject(text, this._curObj);
              }
            }
            break;

          case "subscription":
            let subscription = Subscription.fromObject(this._curObj);
            if (subscription) {
              this.subscriptions.push(subscription);
            }
            break;

          case "subscription filters":
            if (this.subscriptions.length) {
              let currentSubscription = this.subscriptions[
              this.subscriptions.length - 1
              ];
              currentSubscription.updateFilterText(this._curObj);
            }
            break;
        }
      }

      if (line === null) {
        return;
      }

      this._curSection = match[1].toLowerCase();
      switch (this._curSection) {
        case "filter":
        case "subscription":
          this._wantObj = true;
          this._curObj = {};
          break;
        case "subscription filters":
          this._wantObj = false;
          this._curObj = [];
          break;
        default:
          this._wantObj = null;
          this._curObj = null;
      }
    }
    else if (this._wantObj === false && line) {
      this._curObj.push(line.replace(/\\\[/g, "["));
    }
  }
};


/***/ }),

/***/ 9681:
/***/ ((__unused_webpack_module, exports) => {

/*
 * Copyright (c) 2003-2005  Tom Wu
 * All Rights Reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS-IS" AND WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS, IMPLIED OR OTHERWISE, INCLUDING WITHOUT LIMITATION, ANY
 * WARRANTY OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
 *
 * IN NO EVENT SHALL TOM WU BE LIABLE FOR ANY SPECIAL, INCIDENTAL,
 * INDIRECT OR CONSEQUENTIAL DAMAGES OF ANY KIND, OR ANY DAMAGES WHATSOEVER
 * RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER OR NOT ADVISED OF
 * THE POSSIBILITY OF DAMAGE, AND ON ANY THEORY OF LIABILITY, ARISING OUT
 * OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * In addition, the following condition applies:
 *
 * All redistributions must retain an intact copy of this copyright notice
 * and disclaimer.
 */

// Basic JavaScript BN library - subset useful for RSA encryption.

// Modified by eyeo GmbH to better support going to and from JS binary
// strings (base 256) and our particular use case.

// Bits per digit
var dbits;

// JavaScript engine analysis
var canary = 0xdeadbeefcafe;
var j_lm = ((canary&0xffffff)==0xefcafe);

// (public) Constructor
let BigInteger = exports.BigInteger = function BigInteger(a,b,c) {
  if(a != null)
    if("number" == typeof a) this.fromNumber(a,b,c);
    else if(b == null && "string" != typeof a) this.fromString(a,256);
    else this.fromString(a,b);
};

// return new, unset BigInteger
function nbi() { return new BigInteger(null); }

// am: Compute w_j += (x*this_i), propagate carries,
// c is initial carry, returns final carry.
// c < 3*dvalue, x < 2*dvalue, this_i < dvalue
// We need to select the fastest one that works in this environment.

// am1: use a single mult and divide to get the high bits,
// max digit bits should be 26 because
// max internal value = 2*dvalue^2-2*dvalue (< 2^53)
function am1(i,x,w,j,c,n) {
  while(--n >= 0) {
    var v = x*this[i++]+w[j]+c;
    c = Math.floor(v/0x4000000);
    w[j++] = v&0x3ffffff;
  }
  return c;
}
// am2 avoids a big mult-and-extract completely.
// Max digit bits should be <= 30 because we do bitwise ops
// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)
function am2(i,x,w,j,c,n) {
  var xl = x&0x7fff, xh = x>>15;
  while(--n >= 0) {
    var l = this[i]&0x7fff;
    var h = this[i++]>>15;
    var m = xh*l+h*xl;
    l = xl*l+((m&0x7fff)<<15)+w[j]+(c&0x3fffffff);
    c = (l>>>30)+(m>>>15)+xh*h+(c>>>30);
    w[j++] = l&0x3fffffff;
  }
  return c;
}
// Alternately, set max digit bits to 28 since some
// browsers slow down when dealing with 32-bit numbers.
function am3(i,x,w,j,c,n) {
  var xl = x&0x3fff, xh = x>>14;
  while(--n >= 0) {
    var l = this[i]&0x3fff;
    var h = this[i++]>>14;
    var m = xh*l+h*xl;
    l = xl*l+((m&0x3fff)<<14)+w[j]+c;
    c = (l>>28)+(m>>14)+xh*h;
    w[j++] = l&0xfffffff;
  }
  return c;
}
if(j_lm && (typeof navigator != "undefined" && navigator.appName == "Microsoft Internet Explorer")) { /** MODIFIED **/
  BigInteger.prototype.am = am2;
  dbits = 30;
}
else if(j_lm && (typeof navigator != "undefined" && navigator.appName != "Netscape")) { /** MODIFIED **/
  BigInteger.prototype.am = am1;
  dbits = 26;
}
else { // Mozilla/Netscape seems to prefer am3
  BigInteger.prototype.am = am3;
  dbits = 28;
}

BigInteger.prototype.DB = dbits;
BigInteger.prototype.DM = ((1<<dbits)-1);
BigInteger.prototype.DV = (1<<dbits);

var BI_FP = 52;
BigInteger.prototype.FV = Math.pow(2,BI_FP);
BigInteger.prototype.F1 = BI_FP-dbits;
BigInteger.prototype.F2 = 2*dbits-BI_FP;

// Digit conversions
var BI_RM = "0123456789abcdefghijklmnopqrstuvwxyz";
var BI_RC = new Array();
var rr,vv;
rr = "0".charCodeAt(0);
for(vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;
rr = "a".charCodeAt(0);
for(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;
rr = "A".charCodeAt(0);
for(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;

function int2char(n) { return BI_RM.charAt(n); }
function intAt(s,i) {
  var c = BI_RC[s.charCodeAt(i)];
  return (c==null)?-1:c;
}

// (protected) copy this to r
function bnpCopyTo(r) {
  for(var i = this.t-1; i >= 0; --i) r[i] = this[i];
  r.t = this.t;
  r.s = this.s;
}

// (protected) set from integer value x, -DV <= x < DV
function bnpFromInt(x) {
  this.t = 1;
  this.s = (x<0)?-1:0;
  if(x > 0) this[0] = x;
  else if(x < -1) this[0] = x+DV;
  else this.t = 0;
}

// return bigint initialized to value
function nbv(i) { var r = nbi(); r.fromInt(i); return r; }

// (protected) set from string and radix
function bnpFromString(s,b) {
  var k;
  if(b == 16) k = 4;
  else if(b == 8) k = 3;
  else if(b == 256) k = 8; // byte array
  else if(b == 2) k = 1;
  else if(b == 32) k = 5;
  else if(b == 4) k = 2;
  else { this.fromRadix(s,b); return; }
  this.t = 0;
  this.s = 0;
  var i = s.length, mi = false, sh = 0;
  while(--i >= 0) {
    var x = (k==8)?s.charCodeAt(i)&0xff:intAt(s,i);   /** MODIFIED **/
    if(x < 0) {
      if(s.charAt(i) == "-") mi = true;
      continue;
    }
    mi = false;
    if(sh == 0)
      this[this.t++] = x;
    else if(sh+k > this.DB) {
      this[this.t-1] |= (x&((1<<(this.DB-sh))-1))<<sh;
      this[this.t++] = (x>>(this.DB-sh));
    }
    else
      this[this.t-1] |= x<<sh;
    sh += k;
    if(sh >= this.DB) sh -= this.DB;
  }
  if(k == 8 && (s[0]&0x80) != 0) {
    this.s = -1;
    if(sh > 0) this[this.t-1] |= ((1<<(this.DB-sh))-1)<<sh;
  }
  this.clamp();
  if(mi) BigInteger.ZERO.subTo(this,this);
}

// (protected) clamp off excess high words
function bnpClamp() {
  var c = this.s&this.DM;
  while(this.t > 0 && this[this.t-1] == c) --this.t;
}

// (public) return string representation in given radix
function bnToString(b) {
  if(this.s < 0) return "-"+this.negate().toString(b);
  var k;
  if(b == 16) k = 4;
  else if(b == 8) k = 3;
  else if(b == 256) k = 8; // byte array      /** MODIFIED **/
  else if(b == 2) k = 1;
  else if(b == 32) k = 5;
  else if(b == 4) k = 2;
  else return this.toRadix(b);
  var km = (1<<k)-1, d, m = false, r = "", i = this.t;
  var p = this.DB-(i*this.DB)%k;
  if(i-- > 0) {
    if(p < this.DB && (d = this[i]>>p) > 0) { m = true; r = (k==8)?String.fromCharCode(d):int2char(d); }   /** MODIFIED **/
    while(i >= 0) {
      if(p < k) {
        d = (this[i]&((1<<p)-1))<<(k-p);
        d |= this[--i]>>(p+=this.DB-k);
      }
      else {
        d = (this[i]>>(p-=k))&km;
        if(p <= 0) { p += this.DB; --i; }
      }
      if(d > 0) m = true;
      if(m) r += (k==8)?String.fromCharCode(d):int2char(d);    /** MODIFIED **/
    }
  }
  return m?r:"0";
}

// (public) -this
function bnNegate() { var r = nbi(); BigInteger.ZERO.subTo(this,r); return r; }

// (public) |this|
function bnAbs() { return (this.s<0)?this.negate():this; }

// (public) return + if this > a, - if this < a, 0 if equal
function bnCompareTo(a) {
  var r = this.s-a.s;
  if(r != 0) return r;
  var i = this.t;
  r = i-a.t;
  if(r != 0) return r;
  while(--i >= 0) if((r=this[i]-a[i]) != 0) return r;
  return 0;
}

// returns bit length of the integer x
function nbits(x) {
  var r = 1, t;
  if((t=x>>>16) != 0) { x = t; r += 16; }
  if((t=x>>8) != 0) { x = t; r += 8; }
  if((t=x>>4) != 0) { x = t; r += 4; }
  if((t=x>>2) != 0) { x = t; r += 2; }
  if((t=x>>1) != 0) { x = t; r += 1; }
  return r;
}

// (public) return the number of bits in "this"
function bnBitLength() {
  if(this.t <= 0) return 0;
  return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM));
}

// (protected) r = this << n*DB
function bnpDLShiftTo(n,r) {
  var i;
  for(i = this.t-1; i >= 0; --i) r[i+n] = this[i];
  for(i = n-1; i >= 0; --i) r[i] = 0;
  r.t = this.t+n;
  r.s = this.s;
}

// (protected) r = this >> n*DB
function bnpDRShiftTo(n,r) {
  for(var i = n; i < this.t; ++i) r[i-n] = this[i];
  r.t = Math.max(this.t-n,0);
  r.s = this.s;
}

// (protected) r = this << n
function bnpLShiftTo(n,r) {
  var bs = n%this.DB;
  var cbs = this.DB-bs;
  var bm = (1<<cbs)-1;
  var ds = Math.floor(n/this.DB), c = (this.s<<bs)&this.DM, i;
  for(i = this.t-1; i >= 0; --i) {
    r[i+ds+1] = (this[i]>>cbs)|c;
    c = (this[i]&bm)<<bs;
  }
  for(i = ds-1; i >= 0; --i) r[i] = 0;
  r[ds] = c;
  r.t = this.t+ds+1;
  r.s = this.s;
  r.clamp();
}

// (protected) r = this >> n
function bnpRShiftTo(n,r) {
  r.s = this.s;
  var ds = Math.floor(n/this.DB);
  if(ds >= this.t) { r.t = 0; return; }
  var bs = n%this.DB;
  var cbs = this.DB-bs;
  var bm = (1<<bs)-1;
  r[0] = this[ds]>>bs;
  for(var i = ds+1; i < this.t; ++i) {
    r[i-ds-1] |= (this[i]&bm)<<cbs;
    r[i-ds] = this[i]>>bs;
  }
  if(bs > 0) r[this.t-ds-1] |= (this.s&bm)<<cbs;
  r.t = this.t-ds;
  r.clamp();
}

// (protected) r = this - a
function bnpSubTo(a,r) {
  var i = 0, c = 0, m = Math.min(a.t,this.t);
  while(i < m) {
    c += this[i]-a[i];
    r[i++] = c&this.DM;
    c >>= this.DB;
  }
  if(a.t < this.t) {
    c -= a.s;
    while(i < this.t) {
      c += this[i];
      r[i++] = c&this.DM;
      c >>= this.DB;
    }
    c += this.s;
  }
  else {
    c += this.s;
    while(i < a.t) {
      c -= a[i];
      r[i++] = c&this.DM;
      c >>= this.DB;
    }
    c -= a.s;
  }
  r.s = (c<0)?-1:0;
  if(c < -1) r[i++] = this.DV+c;
  else if(c > 0) r[i++] = c;
  r.t = i;
  r.clamp();
}

// (protected) r = this * a, r != this,a (HAC 14.12)
// "this" should be the larger one if appropriate.
function bnpMultiplyTo(a,r) {
  var x = this.abs(), y = a.abs();
  var i = x.t;
  r.t = i+y.t;
  while(--i >= 0) r[i] = 0;
  for(i = 0; i < y.t; ++i) r[i+x.t] = x.am(0,y[i],r,i,0,x.t);
  r.s = 0;
  r.clamp();
  if(this.s != a.s) BigInteger.ZERO.subTo(r,r);
}

// (protected) r = this^2, r != this (HAC 14.16)
function bnpSquareTo(r) {
  var x = this.abs();
  var i = r.t = 2*x.t;
  while(--i >= 0) r[i] = 0;
  for(i = 0; i < x.t-1; ++i) {
    var c = x.am(i,x[i],r,2*i,0,1);
    if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1)) >= x.DV) {
      r[i+x.t] -= x.DV;
      r[i+x.t+1] = 1;
    }
  }
  if(r.t > 0) r[r.t-1] += x.am(i,x[i],r,2*i,0,1);
  r.s = 0;
  r.clamp();
}

// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)
// r != q, this != m.  q or r may be null.
function bnpDivRemTo(m,q,r) {
  var pm = m.abs();
  if(pm.t <= 0) return;
  var pt = this.abs();
  if(pt.t < pm.t) {
    if(q != null) q.fromInt(0);
    if(r != null) this.copyTo(r);
    return;
  }
  if(r == null) r = nbi();
  var y = nbi(), ts = this.s, ms = m.s;
  var nsh = this.DB-nbits(pm[pm.t-1]);	// normalize modulus
  if(nsh > 0) { pm.lShiftTo(nsh,y); pt.lShiftTo(nsh,r); }
  else { pm.copyTo(y); pt.copyTo(r); }
  var ys = y.t;
  var y0 = y[ys-1];
  if(y0 == 0) return;
  var yt = y0*(1<<this.F1)+((ys>1)?y[ys-2]>>this.F2:0);
  var d1 = this.FV/yt, d2 = (1<<this.F1)/yt, e = 1<<this.F2;
  var i = r.t, j = i-ys, t = (q==null)?nbi():q;
  y.dlShiftTo(j,t);
  if(r.compareTo(t) >= 0) {
    r[r.t++] = 1;
    r.subTo(t,r);
  }
  BigInteger.ONE.dlShiftTo(ys,t);
  t.subTo(y,y);	// "negative" y so we can replace sub with am later
  while(y.t < ys) y[y.t++] = 0;
  while(--j >= 0) {
    // Estimate quotient digit
    var qd = (r[--i]==y0)?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);
    if((r[i]+=y.am(0,qd,r,j,0,ys)) < qd) {	// Try it out
      y.dlShiftTo(j,t);
      r.subTo(t,r);
      while(r[i] < --qd) r.subTo(t,r);
    }
  }
  if(q != null) {
    r.drShiftTo(ys,q);
    if(ts != ms) BigInteger.ZERO.subTo(q,q);
  }
  r.t = ys;
  r.clamp();
  if(nsh > 0) r.rShiftTo(nsh,r);	// Denormalize remainder
  if(ts < 0) BigInteger.ZERO.subTo(r,r);
}

// (public) this mod a
function bnMod(a) {
  var r = nbi();
  this.abs().divRemTo(a,null,r);
  if(this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r,r);
  return r;
}

// Modular reduction using "classic" algorithm
function Classic(m) { this.m = m; }
function cConvert(x) {
  if(x.s < 0 || x.compareTo(this.m) >= 0) return x.mod(this.m);
  else return x;
}
function cRevert(x) { return x; }
function cReduce(x) { x.divRemTo(this.m,null,x); }
function cMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }
function cSqrTo(x,r) { x.squareTo(r); this.reduce(r); }

Classic.prototype.convert = cConvert;
Classic.prototype.revert = cRevert;
Classic.prototype.reduce = cReduce;
Classic.prototype.mulTo = cMulTo;
Classic.prototype.sqrTo = cSqrTo;

// (protected) return "-1/this % 2^DB"; useful for Mont. reduction
// justification:
//         xy == 1 (mod m)
//         xy =  1+km
//   xy(2-xy) = (1+km)(1-km)
// x[y(2-xy)] = 1-k^2m^2
// x[y(2-xy)] == 1 (mod m^2)
// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2
// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.
// JS multiply "overflows" differently from C/C++, so care is needed here.
function bnpInvDigit() {
  if(this.t < 1) return 0;
  var x = this[0];
  if((x&1) == 0) return 0;
  var y = x&3;		// y == 1/x mod 2^2
  y = (y*(2-(x&0xf)*y))&0xf;	// y == 1/x mod 2^4
  y = (y*(2-(x&0xff)*y))&0xff;	// y == 1/x mod 2^8
  y = (y*(2-(((x&0xffff)*y)&0xffff)))&0xffff;	// y == 1/x mod 2^16
  // last step - calculate inverse mod DV directly;
  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints
  y = (y*(2-x*y%this.DV))%this.DV;		// y == 1/x mod 2^dbits
  // we really want the negative inverse, and -DV < y < DV
  return (y>0)?this.DV-y:-y;
}

// Montgomery reduction
function Montgomery(m) {
  this.m = m;
  this.mp = m.invDigit();
  this.mpl = this.mp&0x7fff;
  this.mph = this.mp>>15;
  this.um = (1<<(m.DB-15))-1;
  this.mt2 = 2*m.t;
}

// xR mod m
function montConvert(x) {
  var r = nbi();
  x.abs().dlShiftTo(this.m.t,r);
  r.divRemTo(this.m,null,r);
  if(x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r,r);
  return r;
}

// x/R mod m
function montRevert(x) {
  var r = nbi();
  x.copyTo(r);
  this.reduce(r);
  return r;
}

// x = x/R mod m (HAC 14.32)
function montReduce(x) {
  while(x.t <= this.mt2)	// pad x so am has enough room later
    x[x.t++] = 0;
  for(var i = 0; i < this.m.t; ++i) {
    // faster way of calculating u0 = x[i]*mp mod DV
    var j = x[i]&0x7fff;
    var u0 = (j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM;
    // use am to combine the multiply-shift-add into one call
    j = i+this.m.t;
    x[j] += this.m.am(0,u0,x,i,0,this.m.t);
    // propagate carry
    while(x[j] >= x.DV) { x[j] -= x.DV; x[++j]++; }
  }
  x.clamp();
  x.drShiftTo(this.m.t,x);
  if(x.compareTo(this.m) >= 0) x.subTo(this.m,x);
}

// r = "x^2/R mod m"; x != r
function montSqrTo(x,r) { x.squareTo(r); this.reduce(r); }

// r = "xy/R mod m"; x,y != r
function montMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }

Montgomery.prototype.convert = montConvert;
Montgomery.prototype.revert = montRevert;
Montgomery.prototype.reduce = montReduce;
Montgomery.prototype.mulTo = montMulTo;
Montgomery.prototype.sqrTo = montSqrTo;

// (protected) true iff this is even
function bnpIsEven() { return ((this.t>0)?(this[0]&1):this.s) == 0; }

// (protected) this^e, e < 2^32, doing sqr and mul with "r" (HAC 14.79)
function bnpExp(e,z) {
  if(e > 0xffffffff || e < 1) return BigInteger.ONE;
  var r = nbi(), r2 = nbi(), g = z.convert(this), i = nbits(e)-1;
  g.copyTo(r);
  while(--i >= 0) {
    z.sqrTo(r,r2);
    if((e&(1<<i)) > 0) z.mulTo(r2,g,r);
    else { var t = r; r = r2; r2 = t; }
  }
  return z.revert(r);
}

// (public) this^e % m, 0 <= e < 2^32
function bnModPowInt(e,m) {
  var z;
  if(e < 256 || m.isEven()) z = new Classic(m); else z = new Montgomery(m);
  return this.exp(e,z);
}

// protected
BigInteger.prototype.copyTo = bnpCopyTo;
BigInteger.prototype.fromInt = bnpFromInt;
BigInteger.prototype.fromString = bnpFromString;
BigInteger.prototype.clamp = bnpClamp;
BigInteger.prototype.dlShiftTo = bnpDLShiftTo;
BigInteger.prototype.drShiftTo = bnpDRShiftTo;
BigInteger.prototype.lShiftTo = bnpLShiftTo;
BigInteger.prototype.rShiftTo = bnpRShiftTo;
BigInteger.prototype.subTo = bnpSubTo;
BigInteger.prototype.multiplyTo = bnpMultiplyTo;
BigInteger.prototype.squareTo = bnpSquareTo;
BigInteger.prototype.divRemTo = bnpDivRemTo;
BigInteger.prototype.invDigit = bnpInvDigit;
BigInteger.prototype.isEven = bnpIsEven;
BigInteger.prototype.exp = bnpExp;

// public
BigInteger.prototype.toString = bnToString;
BigInteger.prototype.negate = bnNegate;
BigInteger.prototype.abs = bnAbs;
BigInteger.prototype.compareTo = bnCompareTo;
BigInteger.prototype.bitLength = bnBitLength;
BigInteger.prototype.mod = bnMod;
BigInteger.prototype.modPowInt = bnModPowInt;

// "constants"
BigInteger.ZERO = nbv(0);
BigInteger.ONE = nbv(1);


/***/ }),

/***/ 8070:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_435582__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file Matcher class implementing matching addresses against
 *               a list of filters.
 */

const {RESOURCE_TYPES, SPECIAL_TYPES, ALLOWING_TYPES, contentTypes,
       enumerateTypes} = __nested_webpack_require_435582__(436);
const {compilePatterns} = __nested_webpack_require_435582__(453);
const {domainSuffixes, URLRequest} = __nested_webpack_require_435582__(1349);
const {Filter} = __nested_webpack_require_435582__(1298);
const {FiltersByDomain, FilterMap} = __nested_webpack_require_435582__(2866);
const {Cache} = __nested_webpack_require_435582__(9797);

/**
 * Returns the amount of filters per map.
 * @param {Map} map
 * @param {string} keyword
 * @returns {number}
 */
let countFilters = (map, keyword) => {
  let list = map.get(keyword);
  if (!list) {
    return 0;
  }
  if (list instanceof Filter) {
    return 1;
  }
  return list.length;
};

/**
 * Returns a list of filters, if any, or an empty list.
 * @param {Map} map
 * @param {string} keyword
 * @returns {Array.<module:filterClasses.URLFilter>}
 */
let getFilters = (map, keyword) => {
  let list = map.get(keyword);
  if (!list) {
    return Array.prototype;
  }
  if (list instanceof Filter) {
    return [list];
  }
  return list;
};

/**
 * Checks if the keyword is bad for use.
 * @param {string} keyword
 * @returns {boolean}
 */
function isBadKeyword(keyword) {
  return keyword == "https" || keyword == "http" || keyword == "com" ||
         keyword == "js";
}

/**
 * Adds a filter by a given keyword to a map.
 * @param {module:filterClasses.URLFilter} filter
 * @param {string} keyword
 * @param {Map.<string,(module:filterClasses.URLFilter|
 *                      Array.<module:filterClasses.URLFilter>)>} map
 */
function addFilterByKeyword(filter, keyword, map) {
  // this dance is to avoid storing arrays for single filters
  let list = map.get(keyword);
  // when the keyword is known, promote as array if needed
  if (list) {
    if (list instanceof Filter) {
      map.set(keyword, [list, filter]);
    }
    else {
      list.push(filter);
    }
  }
  else {
    // store just the filter without the Array
    map.set(keyword, filter);
  }
}

/**
 * Removes a filter by a given keyword from a map.
 * @param {module:filterClasses.URLFilter} filter
 * @param {string} keyword
 * @param {Map.<string,(module:filterClasses.URLFilter|
 *                      Array.<module:filterClasses.URLFilter>)>} map
 */
function removeFilterByKeyword(filter, keyword, map) {
  // this dance is to normalize back the keyword entry, if any
  let list = map.get(keyword);
  if (list) {
    // when the value is a filter, remove the keyword if filter matches
    if (list instanceof Filter) {
      if (list == filter) {
        map.delete(keyword);
      }
    }
    // otherwise find the index and drop the array if the list has 1 item
    else {
      let i = list.findIndex(item => item === filter);
      if (i >= 0) {
        list.splice(i, 1);
        if (list.length === 1) {
          map.set(keyword, list[0]);
        }
      }
    }
  }
}

/**
 * Checks whether a filter matches a given URL request.
 *
 * @param {module:filterClasses.URLFilter} filter The filter.
 * @param {module:url.URLRequest} request The URL request.
 * @param {number} typeMask A mask specifying the content type of the URL
 *   request.
 * @param {?string} [sitekey] An optional public key associated with the
 *   URL request.
 * @param {?Array} [collection] An optional list to which to append the filter
 *   if it matches. If omitted, the function directly returns the filter if it
 *   matches.
 *
 * @returns {?module:filterClasses.URLFilter} The filter if it matches and
 *   `collection` is omitted; otherwise `null`.
 */
function matchFilter(filter, request, typeMask, sitekey, collection) {
  if (filter.matches(request, typeMask, sitekey)) {
    if (!collection) {
      return filter;
    }

    collection.push(filter);
  }

  return null;
}

/**
 * Checks whether a particular filter is slow.
 * @param {module:filterClasses.URLFilter} filter
 * @returns {boolean}
 */
exports.isSlowFilter = function isSlowFilter(filter) {
  return !filter.urlPattern.hasKeywords();
};

let Matcher =
/**
 * Blocking/allowing filter matching
 */
exports.Matcher = class Matcher {
  constructor() {
    /**
     * Lookup table for keywords by their associated filter
     * @type {Map.<module:filterClasses.URLFilter,string>}
     * @private
     */
    this._keywordByFilter = new Map();

    /**
     * Lookup table for simple filters by their associated keyword
     * @type {Map.<string,(module:filterClasses.URLFilter|
     *                     Array.<module:filterClasses.URLFilter>)>}
     * @private
     */
    this._simpleFiltersByKeyword = new Map();

    /**
     * Lookup table for complex filters by their associated keyword
     * @type {Map.<string,(module:filterClasses.URLFilter|
     *                     Array.<module:filterClasses.URLFilter>)>}
     * @private
     */
    this._complexFiltersByKeyword = new Map();

    /**
     * Lookup table of compiled patterns for simple filters by their associated
     * keyword
     * @type {Map.<string,?module:patterns~CompiledPatterns>}
     * @private
     */
    this._compiledPatternsByKeyword = new Map();

    /**
     * Compiled patterns for generic complex filters with no associated
     * keyword.
     * @type {?module:patterns~CompiledPatterns|boolean}
     * @private
     */
    this._keywordlessCompiledPatterns = false;

    /**
     * Lookup table of domain maps for complex filters by their associated
     * keyword
     * @type {Map.<string,
     *             Map.<string,
     *                  (module:filterClasses.URLFilter|
     *                   Map.<module:filterClasses.URLFilter,boolean>)>>}
     * @private
     */
    this._filterDomainMapsByKeyword = new Map();

    /**
     * Lookup table of type-specific lookup tables for complex filters by their
     * associated keyword
     * @type {Map.<string,
     *             Map.<string,
     *                  (module:filterClasses.URLFilter|
     *                   Array.<module:filterClasses.URLFilter>)>>}
     * @private
     */
    this._filterMapsByType = new Map();
  }

  /**
   * Removes all known filters
   */
  clear() {
    this._keywordByFilter.clear();
    this._simpleFiltersByKeyword.clear();
    this._complexFiltersByKeyword.clear();
    this._compiledPatternsByKeyword.clear();
    this._keywordlessCompiledPatterns = false;
    this._filterDomainMapsByKeyword.clear();
    this._filterMapsByType.clear();
  }

  /**
   * Adds a filter to the matcher
   * @param {module:filterClasses.URLFilter} filter
   */
  add(filter) {
    if (this._keywordByFilter.has(filter)) {
      return;
    }

    // Look for a suitable keyword
    let keyword = this.findKeyword(filter);
    let simple = filter.contentType == RESOURCE_TYPES && filter.isGeneric();

    addFilterByKeyword(filter, keyword, simple ? this._simpleFiltersByKeyword :
        this._complexFiltersByKeyword);

    this._keywordByFilter.set(filter, keyword);

    if (simple) {
      if (this._compiledPatternsByKeyword.size > 0) {
        this._compiledPatternsByKeyword.delete(keyword);
      }

      return;
    }

    if (keyword == "") {
      this._keywordlessCompiledPatterns = false;
    }

    for (let type of enumerateTypes(filter.contentType, SPECIAL_TYPES)) {
      let map = this._filterMapsByType.get(type);
      if (!map) {
        this._filterMapsByType.set(type, map = new Map());
      }

      addFilterByKeyword(filter, keyword, map);
    }

    let {domains} = filter;

    let filtersByDomain = this._filterDomainMapsByKeyword.get(keyword);
    if (!filtersByDomain) {
      // In most cases, there is only one pure generic filter to a keyword.
      // Instead of Map { "foo" => Map { "" => Map { filter => true } } }, we
      // can just reduce it to Map { "foo" => filter } and save a lot of
      // memory.
      if (!domains) {
        this._filterDomainMapsByKeyword.set(keyword, filter);
        return;
      }

      filtersByDomain = new FiltersByDomain();
      this._filterDomainMapsByKeyword.set(keyword, filtersByDomain);
    }
    else if (!(filtersByDomain instanceof FiltersByDomain)) {
      filtersByDomain = new FiltersByDomain([["", filtersByDomain]]);
      this._filterDomainMapsByKeyword.set(keyword, filtersByDomain);
    }

    filtersByDomain.add(filter, domains);
  }

  /**
   * Removes a filter from the matcher
   * @param {module:filterClasses.URLFilter} filter
   */
  remove(filter) {
    let keyword = this._keywordByFilter.get(filter);
    if (typeof keyword == "undefined") {
      return;
    }

    let simple = filter.contentType == RESOURCE_TYPES && filter.isGeneric();

    removeFilterByKeyword(
      filter,
      keyword,
      simple ?
        this._simpleFiltersByKeyword :
        this._complexFiltersByKeyword
    );

    this._keywordByFilter.delete(filter);

    if (simple) {
      if (this._compiledPatternsByKeyword.size > 0) {
        this._compiledPatternsByKeyword.delete(keyword);
      }

      return;
    }

    if (keyword == "") {
      this._keywordlessCompiledPatterns = false;
    }

    for (let type of enumerateTypes(filter.contentType, SPECIAL_TYPES)) {
      let map = this._filterMapsByType.get(type);
      if (map) {
        removeFilterByKeyword(filter, keyword, map);
      }
    }

    let filtersByDomain = this._filterDomainMapsByKeyword.get(keyword);
    if (filtersByDomain) {
      // Because of the memory optimization in the add function, most of the
      // time this will be a filter rather than a map.
      if (!(filtersByDomain instanceof FiltersByDomain)) {
        this._filterDomainMapsByKeyword.delete(keyword);
        return;
      }

      filtersByDomain.remove(filter);

      if (filtersByDomain.size == 0) {
        this._filterDomainMapsByKeyword.delete(keyword);
      }
      else if (filtersByDomain.size == 1) {
        for (let [lastDomain, map] of filtersByDomain.entries()) {
          // Reduce Map { "foo" => Map { "" => filter } } to
          // Map { "foo" => filter }
          if (lastDomain == "" && !(map instanceof FilterMap)) {
            this._filterDomainMapsByKeyword.set(keyword, map);
          }

          break;
        }
      }
    }
  }

  /**
   * Checks whether a filter exists in the matcher
   * @param {module:filterClasses.URLFilter} filter
   * @returns {boolean}
   */
  has(filter) {
    return this._keywordByFilter.has(filter);
  }

  /**
   * Chooses a keyword to be associated with the filter.
   *
   * Because it will perform some internal optimizations, there is no
   * guarantee that this function will always return the same result when
   * called with the same filter.
   *
   * @param {module:filterClasses.Filter} filter
   * @returns {string} keyword or an empty string if no keyword could be found
   * @protected
   */
  findKeyword(filter) {
    let result = "";

    let candidates = filter.urlPattern.keywordCandidates();
    if (!candidates) {
      return result;
    }

    let resultCount = 0xFFFFFF;
    let resultLength = 0;

    for (let i = 0, l = candidates.length; i < l; i++) {
      let candidate = candidates[i].substring(1);

      if (isBadKeyword(candidate)) {
        continue;
      }

      let simpleCount = countFilters(this._simpleFiltersByKeyword, candidate);
      let complexCount = countFilters(this._complexFiltersByKeyword,
                                      candidate);

      let count = simpleCount + complexCount;

      if (count < resultCount ||
          (count == resultCount && candidate.length > resultLength)) {
        result = candidate;
        resultCount = count;
        resultLength = candidate.length;
      }
    }

    return result;
  }

  _matchFiltersByDomain(filtersByDomain, request, typeMask, sitekey,
                        specificOnly, collection) {
    let excluded = null;

    let domain = request.documentHostname || "";
    for (let suffix of domainSuffixes(domain, !specificOnly)) {
      let map = filtersByDomain.get(suffix);
      if (map) {
        if (map instanceof FilterMap) {
          for (let [filter, include] of map.entries()) {
            if (!include) {
              if (excluded) {
                excluded.add(filter);
              }
              else {
                excluded = new Set([filter]);
              }
            }
            else if (
              (!excluded || !excluded.has(filter)) &&
              matchFilter(filter, request, typeMask, sitekey, collection)
            ) {
              return filter;
            }
          }
        }
        else if ((!excluded || !excluded.has(map)) &&
                 matchFilter(map, request, typeMask, sitekey, collection)) {
          return map;
        }
      }
    }

    return null;
  }

  _checkEntryMatchSimpleQuickCheck(keyword, request, filters) {
    let compiled = this._compiledPatternsByKeyword.get(keyword);
    if (typeof compiled == "undefined") {
      compiled = compilePatterns(filters);
      this._compiledPatternsByKeyword.set(keyword, compiled);
    }

    // If compilation failed (e.g. too many filters), return true because this
    // is only a pre-check.
    return !compiled || compiled.test(request);
  }

  _checkEntryMatchSimple(keyword, request, collection) {
    let filters = getFilters(this._simpleFiltersByKeyword, keyword);
    let {length} = filters;
    if (length) {
      // For simple filters where there's more than one filter to the keyword,
      // we do a quick check using a single compiled pattern that combines all
      // the patterns. This is a lot faster for requests that are not going to
      // be blocked (i.e. most requests).
      if (length === 1 ||
          this._checkEntryMatchSimpleQuickCheck(keyword, request, filters)) {
        for (let filter of filters) {
          // Simple filters match any resource type.
          if (matchFilter(filter, request, RESOURCE_TYPES, null, collection)) {
            return filter;
          }
        }
      }
    }

    return null;
  }

  _checkEntryMatchForType(keyword, request, typeMask, sitekey, specificOnly,
                          collection) {
    let filtersForType = this._filterMapsByType.get(typeMask & SPECIAL_TYPES);
    if (filtersForType) {
      for (let filter of getFilters(filtersForType, keyword)) {
        if (specificOnly && filter.isGeneric()) {
          continue;
        }

        if (matchFilter(filter, request, typeMask, sitekey, collection)) {
          return filter;
        }
      }
    }

    return null;
  }

  _checkEntryMatchByDomain(keyword, request, typeMask, sitekey, specificOnly,
                           collection) {
    let filtersByDomain = this._filterDomainMapsByKeyword.get(keyword);
    if (filtersByDomain) {
      if (filtersByDomain instanceof FiltersByDomain) {
        if (keyword == "" && !specificOnly) {
          let compiled = this._keywordlessCompiledPatterns;

          // If the value is false, it indicates that we need to initialize it
          // to either a CompiledPatterns object or null.
          if (compiled == false) {
            // Compile all the patterns from the generic filters into a single
            // object. It is worth doing this for the keywordless generic
            // complex filters because they must be checked against every
            // single URL request that has not already been blocked by one of
            // the simple filters (i.e. most URL requests).
            let map = filtersByDomain.get("");
            if (map instanceof FilterMap) {
              compiled = compilePatterns([...map.keys()]);
            }

            this._keywordlessCompiledPatterns = compiled || null;
          }

          // We can skip the generic filters if none of them pass the test.
          if (compiled && !compiled.test(request)) {
            specificOnly = true;
          }
        }

        return this._matchFiltersByDomain(
          filtersByDomain, request, typeMask, sitekey, specificOnly, collection
        );
      }

      // Because of the memory optimization in the add function, most of the
      // time this will be a filter rather than a map.

      // Also see #7312: If it's a single filter, it's always the equivalent of
      // Map { "" => Map { filter => true } } (i.e. applies to any domain). If
      // the specific-only flag is set, we skip it.
      if (!specificOnly) {
        return matchFilter(
          filtersByDomain, request, typeMask, sitekey, collection
        );
      }
    }

    return null;
  }

  /**
   * Checks whether the entries for a particular keyword match a URL
   * @param {string} keyword
   * @param {module:url.URLRequest} request
   * @param {number} typeMask
   * @param {?string} [sitekey]
   * @param {boolean} [specificOnly]
   * @param {?Array.<module:filterClasses.Filter>} [collection] An optional
   *   list of filters to which to append any results. If specified, the
   *   function adds *all* matching filters to the list; if omitted,
   *   the function directly returns the first matching filter.
   * @returns {?module:filterClasses.Filter}
   * @protected
   */
  checkEntryMatch(keyword, request, typeMask, sitekey, specificOnly,
                  collection) {
    // We need to skip the simple (location-only) filters if the type mask does
    // not contain any resource types.
    if (!specificOnly && (typeMask & RESOURCE_TYPES) != 0) {
      let filter = this._checkEntryMatchSimple(keyword, request, collection);
      if (filter) {
        return filter;
      }
    }

    // If the type mask contains a special type (first condition) and it is
    // the only type in the mask (second condition with OTHER exception),
    // we can use the type-specific map, which typically contains a lot fewer
    // filters. This enables faster lookups for allowing types like $document,
    // $elemhide, and so on, as well as other special types like $csp.
    if ((typeMask & SPECIAL_TYPES) != 0 && (
      (typeMask & typeMask - 1) == 0 ||
      (typeMask & RESOURCE_TYPES) == contentTypes.OTHER)) {
      return this._checkEntryMatchForType(
        keyword, request, typeMask, sitekey, specificOnly, collection
      );
    }


    return this._checkEntryMatchByDomain(
      keyword, request, typeMask, sitekey, specificOnly, collection
    );
  }

  /**
   * @see #match
   * @deprecated
   * @inheritdoc
   */
  matchesAny(url, typeMask, docDomain, sitekey, specificOnly) {
    return this.match(url, typeMask, docDomain, sitekey, specificOnly);
  }

  /**
   * Tests whether the URL matches any of the known filters
   * @param {URL|module:url~URLInfo|string} url
   *   URL to be tested
   * @param {number} typeMask
   *   bitmask of content / request types to match
   * @param {?string} [docDomain]
   *   domain name of the document that loads the URL
   * @param {?string} [sitekey]
   *   public key provided by the document
   * @param {boolean} [specificOnly]
   *   should be `true` if generic matches should be ignored
   * @returns {?module:filterClasses.URLFilter}
   *   matching filter or `null`
   */
  match(url, typeMask, docDomain, sitekey, specificOnly) {
    let request = URLRequest.from(url, docDomain);
    let candidates = request.lowerCaseHref.match(/[a-z0-9%]{2,}|$/g);

    for (let i = 0, l = candidates.length; i < l; i++) {
      if (isBadKeyword(candidates[i])) {
        continue;
      }

      let result = this.checkEntryMatch(
        candidates[i], request, typeMask, sitekey, specificOnly
      );
      if (result) {
        return result;
      }
    }

    return null;
  }
};

class CombinedMatcher {
  constructor() {
    /**
     * Matcher for blocking rules.
     * @type {module:matcher.Matcher}
     * @private
     */
    this._blocking = new Matcher();

    /**
     * Matcher for exception rules.
     * @type {module:matcher.Matcher}
     * @private
     */
    this._allowing = new Matcher();

    /**
     * Lookup table of previous match results
     * @type {module:caching.Cache.<string, ?(module:filterClasses.URLFilter|
     *                                        MatcherSearchResults)>}
     * @private
     */
    this._resultCache = new Cache(10000);
  }

  /**
   * @see module:matcher.Matcher#clear
   */
  clear() {
    this._blocking.clear();
    this._allowing.clear();
    this._resultCache.clear();
  }

  /**
   * @see module:matcher.Matcher#add
   * @param {module:filterClasses.Filter} filter
   */
  add(filter) {
    if (filter.type == "allowing") {
      this._allowing.add(filter);
    }
    else {
      this._blocking.add(filter);
    }

    this._resultCache.clear();
  }

  /**
   * @see module:matcher.Matcher#remove
   * @param {module:filterClasses.Filter} filter
   */
  remove(filter) {
    if (filter.type == "allowing") {
      this._allowing.remove(filter);
    }
    else {
      this._blocking.remove(filter);
    }

    this._resultCache.clear();
  }

  /**
   * @see module:matcher.Matcher#has
   * @param {module:filterClasses.Filter} filter
   * @returns {boolean}
   */
  has(filter) {
    if (filter.type == "allowing") {
      return this._allowing.has(filter);
    }
    return this._blocking.has(filter);
  }

  /**
   * @see module:matcher.Matcher#findKeyword
   * @param {module:filterClasses.Filter} filter
   * @returns {string} keyword
   * @protected
   */
  findKeyword(filter) {
    if (filter.type == "allowing") {
      return this._allowing.findKeyword(filter);
    }
    return this._blocking.findKeyword(filter);
  }

  _matchInternal(url, typeMask, docDomain, sitekey, specificOnly,
                 exhaustiveSearch) {
    let request = URLRequest.from(url, docDomain);
    let candidates = request.lowerCaseHref.match(/[a-z0-9%]{2,}|$/g)
        .filter(candidate => !isBadKeyword(candidate));
    let typeIsOnlyAllowing = (typeMask & ~ALLOWING_TYPES) == 0;

    let allowingHit = null;
    let blockingHit = null;

    let findAllowing = () => {
      for (let i = 0, l = candidates.length; !allowingHit && i < l; i++) {
        allowingHit = this._allowing.checkEntryMatch(
          candidates[i], request, typeMask, sitekey
        );
      }
    };

    let findBlocking = () => {
      for (let i = 0, l = candidates.length; !blockingHit && i < l; i++) {
        blockingHit = this._blocking.checkEntryMatch(
          candidates[i], request, typeMask, sitekey, specificOnly
        );
      }
    };

    if (exhaustiveSearch) {
      findAllowing();
      if (!allowingHit && !typeIsOnlyAllowing) {
        findBlocking();
      }
    }
    else if (typeIsOnlyAllowing) {
      findAllowing();
    }
    else {
      findBlocking();
      if (blockingHit) {
        findAllowing();
      }
    }

    return allowingHit || blockingHit;
  }

  _searchInternal(url, typeMask, docDomain, sitekey, specificOnly, filterType) {
    let hits = {};

    let searchBlocking = filterType == "blocking" || filterType == "all";
    let searchAllowing = filterType == "allowing" || filterType == "all";

    if (searchBlocking) {
      hits.blocking = [];
    }

    if (searchAllowing) {
      hits.allowing = [];
    }

    // If the type mask includes no types other than allowing types, we
    // can skip the blocking filters.
    if ((typeMask & ~ALLOWING_TYPES) == 0) {
      searchBlocking = false;
    }

    let request = URLRequest.from(url, docDomain);
    let candidates = request.lowerCaseHref.match(/[a-z0-9%]{2,}|$/g);

    for (let i = 0, l = candidates.length; i < l; i++) {
      if (isBadKeyword(candidates[i])) {
        continue;
      }

      if (searchBlocking) {
        this._blocking.checkEntryMatch(
          candidates[i],
          request,
          typeMask,
          sitekey,
          specificOnly,
          hits.blocking
        );
      }


      if (searchAllowing) {
        this._allowing.checkEntryMatch(
          candidates[i], request, typeMask, sitekey, false, hits.allowing
        );
      }
    }

    return hits;
  }

  /**
   * @see #match
   * @deprecated
   * @inheritdoc
   */
  matchesAny(url, typeMask, docDomain, sitekey, specificOnly) {
    return this.match(url, typeMask, docDomain, sitekey, specificOnly);
  }

  /**
   * Tests whether the URL matches any of the known filters
   *
   * If both a blocking and an allowing filter matches, the allowing filter is
   * prioritized.
   *
   * If only an allowing filter matches, then the allowing filter will not be
   * returned unless it is one of the `{@link module:contentTypes.ALLOWING_TYPES
   * ALLOWING_TYPES}` used for exception rules only, or if `exhaustiveSearch` is
   * true. In other words, the allowing filter is only returned if it is
   * expected to change blocking behaviour.
   *
   * @param {URL|module:url~URLInfo|string} url
   *   URL to be tested
   * @param {number} typeMask
   *   bitmask of content / request types to match
   * @param {?string} [docDomain]
   *   domain name of the document that loads the URL
   * @param {?string} [sitekey]
   *   public key provided by the document
   * @param {boolean} [specificOnly]
   *   should be `true` if generic matches should be ignored
   * @param {boolean} [exhaustiveSearch=false]
   *   should return a matched allowing filter, even if the filter will have no
   *   effect on blocking behaviour
   * @returns {?module:filterClasses.URLFilter}
   *   matching filter or `null`
   */
  match(url, typeMask, docDomain, sitekey, specificOnly,
        exhaustiveSearch = false) {
    let key = `${url} ${typeMask} ${docDomain} ${sitekey} ${specificOnly} ${exhaustiveSearch}`;
    let result = this._resultCache.get(key);
    if (typeof result != "undefined") {
      return result;
    }

    result = this._matchInternal(
      url, typeMask, docDomain, sitekey, specificOnly, exhaustiveSearch
    );

    this._resultCache.set(key, result);

    return result;
  }

  /**
   * @typedef {Object} MatcherSearchResults
   * @property {Array.<module:filterClasses.BlockingFilter>} [blocking] List of
   *   blocking filters found.
   * @property {Array.<module:filterClasses.AllowingFilter>} [allowing] List
   *   of allowing filters found.
   */

  /**
   * Searches all blocking and allowing filters and returns results matching
   * the given parameters.
   *
   * @param {URL|module:url~URLInfo|string} url
   * @param {number} typeMask
   * @param {?string} [docDomain]
   * @param {?string} [sitekey]
   * @param {boolean} [specificOnly]
   * @param {string} [filterType] The types of filters to look for. This can be
   *   `"blocking"`, `"allowing"`, or `"all"` (default).
   *
   * @returns {MatcherSearchResults}
   */
  search(url, typeMask, docDomain, sitekey, specificOnly, filterType = "all") {
    let key = `* ${url} ${typeMask} ${docDomain} ${sitekey} ` +
              `${specificOnly} ${filterType}`;

    let result = this._resultCache.get(key);
    if (typeof result != "undefined") {
      return result;
    }

    result = this._searchInternal(
      url, typeMask, docDomain, sitekey, specificOnly, filterType
    );

    this._resultCache.set(key, result);

    return result;
  }

  /**
   * Tests whether the URL is allowlisted
   * @see module:matcher.Matcher#match
   * @inheritdoc
   * @returns {boolean}
   */
  isAllowlisted(url, typeMask, docDomain, sitekey) {
    return !!this._allowing.match(url, typeMask, docDomain, sitekey);
  }
}

/**
 * Combines a matcher for blocking and exception rules, automatically sorts
 * rules into two `{@link module:matcher.Matcher Matcher}` instances.
 */
exports.CombinedMatcher = CombinedMatcher;

/**
 * Create the `{@link module:matcher~CombinedMatcher CombinedMatcher}`
 * instance that should usually be used.
 * @returns {module:matcher.CombinedMatcher}
 */
exports.newDefaultMatcher = function() {
  return new CombinedMatcher();
};


/***/ }),

/***/ 7544:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_464193__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file Handles notifications.
 */

const {Prefs} = __nested_webpack_require_464193__(35);

const {MILLIS_IN_MINUTE, MILLIS_IN_HOUR, MILLIS_IN_DAY} = __nested_webpack_require_464193__(103);
const {Downloader, Downloadable} = __nested_webpack_require_464193__(145);
const {compareVersions} = __nested_webpack_require_464193__(2799);
const {analytics} = __nested_webpack_require_464193__(1052);
const {EventEmitter} = __nested_webpack_require_464193__(8583);

const INITIAL_DELAY = 1 * MILLIS_IN_MINUTE;
const CHECK_INTERVAL = 1 * MILLIS_IN_HOUR;
const EXPIRATION_INTERVAL = 1 * MILLIS_IN_DAY;

let getPreferredMillis = (field, fallback) =>
                          field in Prefs ? Prefs[field] : fallback;

/**
 * The default locale for the localization of notification texts.
 * @type {string}
 * @default
 */
const DEFAULT_LOCALE = "en-US";

/**
 * Returns the numerical severity of a notification.
 * @param {Object} notification The notification.
 * @returns {number} The numerical severity of the notification.
 */
function getNumericalSeverity(notification) {
  switch (notification.type) {
    case "information":
      return 0;
    case "newtab":
    case "relentless":
      return 1;
    case "critical":
      return 2;
  }

  return 0;
}

/**
 * Saves notification data to preferences.
 * @param {string} [key] The key to save.
 */
function saveNotificationData(key = "notificationdata") {
  // JSON values aren't saved unless they are assigned a different object.
  Prefs[key] = JSON.parse(JSON.stringify(Prefs[key]));
}

/**
 * Localizes a notification text.
 *
 * @param {Object} translations The set of translations from which to select
 *   the localization.
 * @param {string} locale The locale string to use for the selection. If no
 *   localized version is found in the `translations` object for the given
 *   locale, the
 *   {@link module:notifications~DEFAULT_LOCALE default locale} is used.
 *
 * @returns {*} The localized text; `undefined` if no localized version is
 *   found in the `translations` object.
 */
function localize(translations, locale) {
  if (locale in translations) {
    return translations[locale];
  }

  let languagePart = locale.substring(0, locale.indexOf("-"));
  if (languagePart && languagePart in translations) {
    return translations[languagePart];
  }

  return translations[DEFAULT_LOCALE];
}

function isValidNotification(notification) {
  // Only notifications that are meant to be opened in a new tab must
  // contain at least one URL to open.
  if (notification.type == "newtab" &&
      !(notification.links && notification.links.length > 0)) {
    return false;
  }

  return true;
}

/**
 * `{@link module:notifications.notifications}` implementation.
 *
 * It also emits the named events `downloaded`, `ignored-category-added` and
 * `ignored-category-removed` built with `{@link module:events.EventEmitter
 *                                               EventEmitter}`
 */
class Notifications extends EventEmitter {
  /**
   * @hideconstructor
   */
  constructor() {
    super();

    /**
     * Whether the fetching of notifications has been started.
     * @private
     */
    this._started = false;

    /**
     * Whether all ignorable notifications should be ignored.
     * @type {boolean}
     */
    this.ignored = false;

    /**
     * The locale for the localization of notification texts.
     * @type {string}
     * @default {@link module:notifications~DEFAULT_LOCALE}
     */
    this.locale = DEFAULT_LOCALE;

    /**
     * The number to consider when performing the blockedTotalMin and
     * blockedTotalMax target checks.
     *
     * This property needs to be initialized at startup and updated
     * whenever a blocking filter matches. If set to null (default),
     * notifications using these target checks are ignored.
     *
     * If the deprecated preferences Prefs.show_statsinpopup and
     * Prefs.blocked_total exist they take precedence over this property.
     * @type {?number}
     */
    this.numBlocked = null;

    /**
     * Listeners for notifications to be shown.
     * @type {Set.<function>}
     * @private
     */
    this._showListeners = new Set();

    /**
     * Local notifications added via
     * `{@link module:notifications~Notifications#addNotification
     *         addNotification()}`.
     * @type {Set.<Object>}
     * @private
     */
    this._localNotifications = new Set();

    /**
     * The object providing actual downloading functionality.
     * @type {module:downloader.Downloader}
     * @private
     */
    this._downloader = new Downloader(this._getDownloadables.bind(this));

    this._downloader.onExpirationChange = this._onExpirationChange.bind(this);
    this._downloader.onDownloadSuccess = this._onDownloadSuccess.bind(this);
    this._downloader.onDownloadError = this._onDownloadError.bind(this);
    this._onBlockedTotal = this._onBlockedTotal.bind(this);
  }

  /**
   * Starts fetching notifications.
   *
   * No notifications are fetched until this function has been called at least
   * once.
   */
  start() {
    if (this._started) {
      return;
    }

    Prefs.on("blocked_total", this._onBlockedTotal);

    this._downloader.scheduleChecks(
      getPreferredMillis("notifications_check_interval", CHECK_INTERVAL),
      getPreferredMillis("notifications_initial_delay", INITIAL_DELAY)
    );
    this._started = true;
  }

  /**
   * Stops fetching notifications.
   */
  stop() {
    this._started = false;
    this._downloader.unscheduleChecks();

    Prefs.off("blocked_total", this._onBlockedTotal);
  }

  /**
   * Sets an alternative storage backend for storing local
   * notifications. By default, local notifications are stored in
   * memory.
   *
   * The new storage backend is expected to provide similar
   * functionality to a Set. Notifications will be added to it,
   * deleted from it, and iterated over.
   *
   * @param {object} storageBackend
   * @param {function} storageBackend.add Add a new notification.
   * @param {function} storageBackend.delete Remove a notification.
   * @param {function} storageBackend.Symbol.iterator Returns an iterable of all
   *   local notifications.
   */
  setLocalNotificationStorage(storageBackend) {
    if (this._localNotifications == storageBackend) {
      return;
    }

    for (let notification of this._localNotifications) {
      storageBackend.add(notification);
    }

    this._localNotifications = storageBackend;
  }

  /**
   * Yields a `{@link module:downloader.Downloadable Downloadable}` instance
   * for the notifications download.
   * @yields {module:downloader.Downloadable}
   * @private
   */
  *_getDownloadables() {
    let {notificationurl: url, notificationdata} = Prefs;

    let downloadable = new Downloadable(url);

    if (analytics.isTrusted(url)) {
      downloadable.firstVersion = analytics.getFirstVersion();
    }

    if (typeof notificationdata.lastError == "number") {
      downloadable.lastError = notificationdata.lastError;
    }
    if (typeof notificationdata.lastCheck == "number") {
      downloadable.lastCheck = notificationdata.lastCheck;
    }

    if (typeof notificationdata.data == "object" &&
        "version" in notificationdata.data) {
      downloadable.lastVersion = notificationdata.data.version;
    }

    if (typeof notificationdata.softExpiration == "number") {
      downloadable.softExpiration = notificationdata.softExpiration;
    }
    if (typeof notificationdata.hardExpiration == "number") {
      downloadable.hardExpiration = notificationdata.hardExpiration;
    }
    if (typeof notificationdata.downloadCount == "number") {
      downloadable.downloadCount = notificationdata.downloadCount;
    }

    yield downloadable;
  }

  _onExpirationChange(downloadable) {
    Prefs.notificationdata.lastCheck = downloadable.lastCheck;
    Prefs.notificationdata.softExpiration = downloadable.softExpiration;
    Prefs.notificationdata.hardExpiration = downloadable.hardExpiration;

    saveNotificationData();
  }

  _onDownloadSuccess(downloadable, responseText, errorCallback,
                     redirectCallback) {
    try {
      let data = JSON.parse(responseText);

      if (typeof data.version == "string" &&
          analytics.isTrusted(downloadable.redirectURL || downloadable.url)) {
        analytics.recordVersion(data.version);
      }

      let notifications = [];
      for (let notification of data.notifications) {
        if (!isValidNotification(notification)) {
          console.warn(`Invalid notification with ID "${notification.id}"`);
          continue;
        }

        if ("severity" in notification) {
          if (!("type" in notification)) {
            notification.type = notification.severity;
          }
          delete notification.severity;
        }

        notifications.push(notification);
      }
      data.notifications = notifications;

      Prefs.notificationdata.data = data;
    }
    catch (error) {
      console.warn(error);
      errorCallback("synchronize_invalid_data");
      return;
    }

    let expirationInterval = getPreferredMillis(
      "notifications_expiration_interval",
      EXPIRATION_INTERVAL
    );

    Prefs.notificationdata.lastError = 0;
    Prefs.notificationdata.downloadStatus = "synchronize_ok";
    [
      Prefs.notificationdata.softExpiration,
      Prefs.notificationdata.hardExpiration
    ] = this._downloader.processExpirationInterval(expirationInterval);
    Prefs.notificationdata.downloadCount = downloadable.downloadCount;

    saveNotificationData();

    this.emit("downloaded");
    this.showNext();
  }

  _onDownloadError(downloadable, downloadURL, error, responseStatus,
                   redirectCallback) {
    Prefs.notificationdata.lastError = Date.now();
    Prefs.notificationdata.downloadStatus = error;

    saveNotificationData();
  }

  _onBlockedTotal() {
    this.showNext();
  }

  /**
   * Adds a listener for notifications to be shown.
   * @param {function} listener Listener to be invoked when a notification is
   *   to be shown.
   */
  addShowListener(listener) {
    this._showListeners.add(listener);
  }

  /**
   * Removes the supplied listener.
   * @param {function} listener Listener that was added via
   *   `{@link module:notifications~Notifications#addShowListener
   *           addShowListener()}`.
   */
  removeShowListener(listener) {
    this._showListeners.delete(listener);
  }

  /**
   * Returns whether user preferences indicate that notifications
   * should be ignored.
   * @return {boolean}
   */
  shouldIgnoreNotifications() {
    return this.ignored ||
      Prefs.notifications_ignoredcategories.includes("*");
  }

  /**
   * Returns all local and remote notifications.
   * @returns {Array.<Object>} All local and remote notifications.
   * @private
   */
  _getNotifications() {
    let remoteNotifications = [];
    if (typeof Prefs.notificationdata.data == "object" &&
        Prefs.notificationdata.data.notifications instanceof Array) {
      remoteNotifications = Prefs.notificationdata.data.notifications;
    }

    return [...this._localNotifications, ...remoteNotifications];
  }

  /**
   * Determines which notification is to be shown next.
   * @returns {?object} The notification to be shown, or `null` if there is
   *   none.
   * @private
   */
  _getNextToShow() {
    let notifications = this._getNotifications();
    if (notifications.length == 0) {
      return null;
    }

    const {addonName, addonVersion, application, applicationVersion,
           platform, platformVersion} = __nested_webpack_require_464193__(4189);

    let {numBlocked} = this;
    // Compatibility for legacy adblockpluschrome
    if ("blocked_total" in Prefs) {
      numBlocked = Prefs.blocked_total;
    }
    if (Prefs.show_statsinpopup === false) {
      numBlocked = null;
    }

    let targetChecks = {
      extension: v => v == addonName,
      extensionMinVersion:
        v => compareVersions(addonVersion, v) >= 0,
      extensionMaxVersion:
        v => compareVersions(addonVersion, v) <= 0,
      application: v => v == application,
      applicationMinVersion:
        v => compareVersions(applicationVersion, v) >= 0,
      applicationMaxVersion:
        v => compareVersions(applicationVersion, v) <= 0,
      platform: v => v == platform,
      platformMinVersion:
        v => compareVersions(platformVersion, v) >= 0,
      platformMaxVersion:
        v => compareVersions(platformVersion, v) <= 0,
      blockedTotalMin: v => numBlocked != null && numBlocked >= v,
      blockedTotalMax: v => numBlocked != null && numBlocked <= v,
      locales: v => v.includes(this.locale)
    };

    let notificationToShow = null;
    for (let notification of notifications) {
      if (notification.type != "critical") {
        let shown;
        if (typeof Prefs.notificationdata.shown == "object") {
          shown = Prefs.notificationdata.shown[notification.id];
        }

        if (typeof shown != "undefined") {
          if (typeof notification.interval == "number") {
            if (shown + notification.interval > Date.now()) {
              continue;
            }
          }
          else if (shown) {
            continue;
          }
        }

        if (notification.type != "relentless" &&
            this.shouldIgnoreNotifications()) {
          continue;
        }
      }

      if (notification.targets instanceof Array) {
        let match = false;

        for (let target of notification.targets) {
          let keys = Object.keys(target);
          if (keys.every(
            key => Object.prototype.hasOwnProperty.call(targetChecks, key) &&
                   targetChecks[key](target[key]))
          ) {
            match = true;
            break;
          }
        }

        if (!match) {
          continue;
        }
      }

      if (!notificationToShow || getNumericalSeverity(notification) >
                                 getNumericalSeverity(notificationToShow)) {
        notificationToShow = notification;
      }
    }

    return notificationToShow;
  }

  /**
   * Shows a notification once.
   * @param {Object} notification The notification to show.
   * @param {Object} [options]
   * @param {boolean} [options.ignorable=false] If true, user preference will
   *   be considered to determine whether notification should be shown.
   */
  showNotification(notification, options = {}) {
    if (options.ignorable && this.shouldIgnoreNotifications()) {
      return;
    }

    for (let showListener of this._showListeners) {
      showListener(notification);
    }
  }

  /**
   * Invokes the listeners added via
   * `{@link module:notifications~Notifications#addShowListener
   *         addShowListener()}` with the next notification to be shown.
   *
   * This method should be called whenever a page loads.
   */
  showNext() {
    let notification = this._getNextToShow();
    if (notification) {
      for (let showListener of this._showListeners) {
        showListener(notification);
      }
    }
  }

  /**
   * Marks a notification as shown.
   * @param {string} id The ID of the notification to be marked as shown.
   */
  markAsShown(id) {
    let notifications = this._getNotifications();

    // Ignore if there's no notification with the given ID.
    if (!notifications.some(notification => notification.id == id)) {
      return;
    }

    let now = Date.now();
    let data = Prefs.notificationdata;

    if (data.shown instanceof Array) {
      let newShown = {};
      for (let oldId of data.shown) {
        newShown[oldId] = now;
      }
      data.shown = newShown;
    }

    if (typeof data.shown != "object") {
      data.shown = {};
    }

    data.shown[id] = now;

    saveNotificationData();
  }

  /**
   * Localizes the texts of the given notification based on the
   * {@link module:notifications~Notifications#locale locale}.
   * @param {Object} notification The notification.
   * @returns {Object} The localized texts.
   */
  getLocalizedTexts(notification) {
    let textKeys = ["title", "message"];
    let localizedTexts = {};

    for (let key of textKeys) {
      if (key in notification) {
        if (typeof notification[key] == "string") {
          localizedTexts[key] = notification[key];
        }
        else {
          localizedTexts[key] = localize(notification[key], this.locale);
        }
      }
    }

    return localizedTexts;
  }

  /**
   * Adds a local notification.
   * @param {Object} notification The notification to add.
   */
  addNotification(notification) {
    if (!isValidNotification(notification)) {
      throw new Error(`Invalid notification with ID "${notification.id}"`);
    }

    this._localNotifications.add(notification);
  }

  /**
   * Removes an existing local notification.
   * @param {Object} notification The notification to remove.
   */
  removeNotification(notification) {
    this._localNotifications.delete(notification);
  }

  /**
   * Toggles whether notifications of a specific category should be ignored.
   * @param {string} category The notification category identifier.
   * @param {boolean} [forceValue] Whether to force the specified value.
   */
  toggleIgnoreCategory(category, forceValue) {
    let categories = Prefs.notifications_ignoredcategories;
    let index = categories.indexOf(category);
    if (index == -1 && forceValue != false) {
      categories.push(category);
      Prefs.notifications_ignoredcategories = categories;
      this.emit("ignored-category-added", category);
    }
    else if (index != -1 && forceValue != true) {
      categories.splice(index, 1);
      Prefs.notifications_ignoredcategories = categories;
      this.emit("ignored-category-removed", category);
    }

    saveNotificationData("notifications_ignoredcategories");
  }

  /**
   * Returns the number of times the notifications data have been downloaded.
   * @returns {number}
   */
  getDownloadCount() {
    return Prefs.notificationdata.downloadCount || 0;
  }

  /**
   * Returns the list of ignored categories.
   * @returns {Array.<string>}
   */
  getIgnoredCategories() {
    return Prefs.notifications_ignoredcategories;
  }
}

/**
 * Regularly fetches notifications and decides which notification to show.
 * @type {module:notifications~Notifications}
 */
exports.$ = new Notifications();


/***/ }),

/***/ 453:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * The maximum number of patterns that
 * `{@link module:patterns.compilePatterns compilePatterns()}` will compile
 * into regular expressions.
 * @type {number}
 */
const COMPILE_PATTERNS_MAX = 100;

/**
 * Regular expression used to match the `^` suffix in an otherwise literal
 * pattern.
 * @type {RegExp}
 */
let separatorRegExp = /[\x00-\x24\x26-\x2C\x2F\x3A-\x40\x5B-\x5E\x60\x7B-\x7F]/;

let filterToRegExp =
/**
 * Converts filter text into regular expression string
 * @param {string} text as in Filter()
 * @return {string} regular expression representation of filter text
 * @package
 */
exports.filterToRegExp = function filterToRegExp(text) {
  // remove multiple wildcards
  text = text.replace(/\*+/g, "*");

  // remove leading wildcard
  if (text[0] == "*") {
    text = text.substring(1);
  }

  // remove trailing wildcard
  if (text[text.length - 1] == "*") {
    text = text.substring(0, text.length - 1);
  }

  return text
    // remove anchors following separator placeholder
    .replace(/\^\|$/, "^")
    // escape special symbols
    .replace(/\W/g, "\\$&")
    // replace wildcards by .*
    .replace(/\\\*/g, ".*")
    // process separator placeholders (all ANSI characters but alphanumeric
    // characters and _%.-)
    .replace(/\\\^/g, `(?:${separatorRegExp.source}|$)`)
    // process extended anchor at expression start
    .replace(/^\\\|\\\|/, "^[\\w\\-]+:\\/+(?:[^\\/]+\\.)?")
    // process anchor at expression start
    .replace(/^\\\|/, "^")
    // process anchor at expression end
    .replace(/\\\|$/, "$");
};

/**
 * Regular expression used to match the `||` prefix in an otherwise literal
 * pattern.
 * @type {RegExp}
 */
let extendedAnchorRegExp = new RegExp(filterToRegExp("||") + "$");

/**
 * Regular expression for matching a keyword in a filter.
 * @type {RegExp}
 */
let keywordRegExp = /[^a-z0-9%*][a-z0-9%]{2,}(?=[^a-z0-9%*])/;

/**
 * Regular expression for matching all keywords in a filter.
 * @type {RegExp}
 */
let allKeywordsRegExp = new RegExp(keywordRegExp, "g");

/**
 * A `CompiledPatterns` object represents the compiled version of multiple URL
 * request patterns. It is returned by
 * `{@link module:patterns.compilePatterns compilePatterns()}`.
 */
class CompiledPatterns {
  /**
   * Creates an object with the given regular expressions for case-sensitive
   * and case-insensitive matching respectively.
   * @param {?RegExp} [caseSensitive]
   * @param {?RegExp} [caseInsensitive]
   * @private
   */
  constructor(caseSensitive, caseInsensitive) {
    this._caseSensitive = caseSensitive;
    this._caseInsensitive = caseInsensitive;
  }

  /**
   * Tests whether the given URL request matches the patterns used to create
   * this object.
   * @param {module:url.URLRequest} request
   * @returns {boolean}
   */
  test(request) {
    return ((this._caseSensitive &&
             this._caseSensitive.test(request.href)) ||
            (this._caseInsensitive &&
             this._caseInsensitive.test(request.lowerCaseHref)));
  }
}

/**
 * Compiles patterns from the given filters into a single
 * `{@link module:patterns~CompiledPatterns CompiledPatterns}` object.
 *
 * @param {module:filterClasses.URLFilter|
 *         Set.<module:filterClasses.URLFilter>} filters
 *   The filters. If the number of filters exceeds
 *   `{@link module:patterns~COMPILE_PATTERNS_MAX COMPILE_PATTERNS_MAX}`, the
 *   function returns `null`.
 *
 * @returns {?module:patterns~CompiledPatterns}
 *
 * @package
 */
exports.compilePatterns = function compilePatterns(filters) {
  let list = Array.isArray(filters) ? filters : [filters];

  // If the number of filters is too large, it may choke especially on low-end
  // platforms. As a precaution, we refuse to compile. Ideally we would check
  // the length of the regular expression source rather than the number of
  // filters, but this is far more straightforward and practical.
  if (list.length > COMPILE_PATTERNS_MAX) {
    return null;
  }

  let caseSensitive = "";
  let caseInsensitive = "";

  for (let filter of filters) {
    let source = filter.urlPattern.regexpSource;

    if (filter.matchCase) {
      caseSensitive += source + "|";
    }
    else {
      caseInsensitive += source + "|";
    }
  }

  let caseSensitiveRegExp = null;
  let caseInsensitiveRegExp = null;

  try {
    if (caseSensitive) {
      caseSensitiveRegExp = new RegExp(caseSensitive.slice(0, -1));
    }

    if (caseInsensitive) {
      caseInsensitiveRegExp = new RegExp(caseInsensitive.slice(0, -1));
    }
  }
  catch (error) {
    // It is possible in theory for the regular expression to be too large
    // despite COMPILE_PATTERNS_MAX
    return null;
  }

  return new CompiledPatterns(caseSensitiveRegExp, caseInsensitiveRegExp);
};

/**
 * Patterns for matching against URLs.
 *
 * Internally, this may be a RegExp or match directly against the
 * pattern for simple literal patterns.
 */
exports.Pattern = class Pattern {
  /**
   * @param {string} pattern pattern that requests URLs should be
   * matched against in filter text notation
   * @param {bool} matchCase `true` if comparisons must be case
   * sensitive
   */
  constructor(pattern, matchCase) {
    this.matchCase = matchCase || false;

    if (!this.matchCase) {
      pattern = pattern.toLowerCase();
    }

    if (pattern.length >= 2 &&
        pattern[0] == "/" &&
        pattern[pattern.length - 1] == "/") {
      // The filter is a regular expression - convert it immediately to
      // catch syntax errors
      pattern = pattern.substring(1, pattern.length - 1);
      this._regexp = new RegExp(pattern);
    }
    else {
      // Patterns like /foo/bar/* exist so that they are not treated as regular
      // expressions. We drop any superfluous wildcards here so our
      // optimizations can kick in.
      pattern = pattern.replace(/^\*+/, "").replace(/\*+$/, "");

      // No need to convert this filter to regular expression yet, do it on
      // demand
      this.pattern = pattern;
    }
  }

  /**
   * Checks whether the pattern is a string of literal characters with
   * no wildcards or any other special characters.
   *
   * If the pattern is prefixed with a `||` or suffixed with a `^` but otherwise
   * contains no special characters, it is still considered to be a literal
   * pattern.
   *
   * @returns {boolean}
   */
  isLiteralPattern() {
    return typeof this.pattern !== "undefined" &&
      !/[*^|]/.test(this.pattern.replace(/^\|{1,2}/, "").replace(/[|^]$/, ""));
  }

  /**
   * Regular expression to be used when testing against this pattern.
   *
   * null if the pattern is matched without using regular expressions.
   * @type {RegExp}
   */
  get regexp() {
    if (typeof this._regexp == "undefined") {
      this._regexp = this.isLiteralPattern() ?
        null : new RegExp(filterToRegExp(this.pattern));
    }
    return this._regexp;
  }

  /**
   * Pattern in regular expression notation. This will have a value
   * even if `regexp` returns null.
   * @type {string}
   */
  get regexpSource() {
    return this._regexp ? this._regexp.source : filterToRegExp(this.pattern);
  }

  /**
   * Checks whether the given URL request matches this filter's pattern.
   * @param {module:url.URLRequest} request The URL request to check.
   * @returns {boolean} `true` if the URL request matches.
   */
  matchesLocation(request) {
    let location = this.matchCase ? request.href : request.lowerCaseHref;
    let regexp = this.regexp;
    if (regexp) {
      return regexp.test(location);
    }

    let pattern = this.pattern;
    let startsWithAnchor = pattern[0] == "|";
    let startsWithExtendedAnchor = startsWithAnchor && pattern[1] == "|";
    let endsWithSeparator = pattern[pattern.length - 1] == "^";
    let endsWithAnchor = !endsWithSeparator &&
        pattern[pattern.length - 1] == "|";

    if (startsWithExtendedAnchor) {
      pattern = pattern.substr(2);
    }
    else if (startsWithAnchor) {
      pattern = pattern.substr(1);
    }

    if (endsWithSeparator || endsWithAnchor) {
      pattern = pattern.slice(0, -1);
    }

    let index = location.indexOf(pattern);

    while (index != -1) {
      // The "||" prefix requires that the text that follows does not start
      // with a forward slash.
      if ((startsWithExtendedAnchor ?
           location[index] != "/" &&
           extendedAnchorRegExp.test(location.substring(0, index)) :
           startsWithAnchor ?
           index == 0 :
           true) &&
          (endsWithSeparator ?
           !location[index + pattern.length] ||
           separatorRegExp.test(location[index + pattern.length]) :
           endsWithAnchor ?
           index == location.length - pattern.length :
           true)) {
        return true;
      }

      if (pattern == "") {
        return true;
      }

      index = location.indexOf(pattern, index + 1);
    }

    return false;
  }

  /**
   * Checks whether the pattern has keywords
   * @returns {boolean}
   */
  hasKeywords() {
    return this.pattern && keywordRegExp.test(this.pattern);
  }

  /**
   * Finds all keywords that could be associated with this pattern
   * @returns {string[]}
   */
  keywordCandidates() {
    if (!this.pattern) {
      return null;
    }
    return this.pattern.toLowerCase().match(allKeywordsRegExp);
  }
};


/***/ }),

/***/ 805:
/***/ (() => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */



// Promise.prototype.finally is not supported in Firefox < 58
if (!Promise.prototype.finally) {
  Promise.prototype.finally = function(fn) {
    return this.then(fn, fn);
  };
}


/***/ }),

/***/ 5056:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_494314__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * A `Recommendation` object represents a recommended filter subscription.
 */
class Recommendation {
  /**
   * Creates a `Recommendation` object from the given source object.
   * @param {object} source The source object.
   * @private
   */
  constructor(source) {
    this._source = source;
  }

  /**
   * The id (UUID) of the subscription.
   * If the id is not null, there is a 1:1 relationship with `id` : `url`.
   * @type {?string}
   */
  get id() {
    return this._source.id;
  }

  /**
   * The required subscription ids.
   * @type {?Array.<string>}
   */
  get requires() {
    return this._source.requires;
  }

  /**
   * The type of the recommended filter subscription.
   * @type {string}
   */
  get type() {
    return this._source.type;
  }

  /**
   * The languages of the recommended filter subscription.
   * @type {Array.<string>}
   */
  get languages() {
    return this._source.languages ? [...this._source.languages] : [];
  }

  /**
   * The title of the recommended filter subscription.
   * @type {string}
   */
  get title() {
    return this._source.title;
  }

  /**
   * The URL of the recommended filter subscription.
   * @type {string}
   */
  get url() {
    return this._source.url;
  }

  /**
   * The home page of the recommended filter subscription.
   * @type {string}
   */
  get homepage() {
    return this._source.homepage;
  }

  /**
   * The manifest v2 URL
   * @type {?string}
   */
  get mv2URL() {
    return this._source.mv2_url;
  }

  /**
   * Where this recommendation will get updates from.
   * @type {?string}
   */
  get diffURL() {
    return this._source.diff_url;
  }

  /**
   * Expiration interval from the subscription header.
   * Usually the number of days or hours between expirations.
   * @example "1 days"
   * @example "6 hours"
   * @type {?string}
   */
  get expires() {
    return this._source.expires;
  }

  /**
   * True if this subscription can load filters that require privileged access,
   * like snippets.
   * @type {?bool}
   */
  get privileged() {
    return this._source.privileged;
  }
}

let _recommendations = null;

/**
 * Set the recommendations. This is required. It should be done before
 * any other operation on subscriptions, and shouldn't be called more
 * than once.
 *
 * @param {object} recommendations The available recommended subscriptions.
 */
exports.setRecommendations = function(recommendations) {
  _recommendations = recommendations;
};

/**
 * Returns an array of
 * `{@link module:recommendations~Recommendation Recommendation}` objects
 * representing recommended filter subscriptions.
 *
 * @returns {Array.<module:recommendations~Recommendation>} An array of objects
 *  representing recommended filter subscriptions.
 */
exports.recommendations = function recommendations() {
  if (!_recommendations) {
    _recommendations = __nested_webpack_require_494314__(4693);
  }

  return _recommendations.map(source => new Recommendation(source));
};

exports.Recommendation = Recommendation;


/***/ }),

/***/ 9390:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_498137__) => {

"use strict";
var __webpack_unused_export__;
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/* global crypto, TextEncoder */

/** @module */



const Rusha = __nested_webpack_require_498137__(3581);
const {BigInteger} = __nested_webpack_require_498137__(9681);

/**
 * @file Provides ASN.1 sitekeys verifications.
 */

let base64ToArrayBuffer =
/**
 * Converts a base64 string to an array buffer byte array.
 * @param {string} base64 Base64 encoded string.
 * @return {Uint8Array} The same data, encoded as an array buffer.
 */
exports.Ms = function base64ToArrayBuffer(base64) {
  let binaryString = atob(base64);
  return Uint8Array.from(binaryString, c => c.charCodeAt(0));
};

/**
 * Converts an array buffer byte array into a base64 string.
 * @param {Uint8Array} buffer Byte array of any data.
 * @return {string} The same data, encoded as a base64 string.
 */
__webpack_unused_export__ = function arrayBufferToBase64(buffer) {
  let binary = "";
  let bytes = new Uint8Array(buffer);
  for (let i = 0; i < bytes.byteLength; i++) {
    binary += String.fromCharCode(bytes[i]);
  }

  return btoa(binary);
};

/**
 * Checks whether the signature is valid for the given public key and data.
 * The verification is based on ASN.1 over SHA-1. This procedure is known as
 * RSA_PKCS1_SHA1 and it is the default kind of procedure, in OpenSSL, when
 * SEC_OID_ISO_SHA_WITH_RSA_SIGNATURE is used to create the key/signature pair.
 * @param {string} key a base 64 public key used to verify.
 * @param {string} signature a base 64 signature used to verify.
 * @param {string} data a unique identifier of the resource to verify.
 * @returns {Promise<boolean>} resolves with true if the signature is valid
 */
__webpack_unused_export__ = async function verifySignature(key, signature, data) {
  let signAlgorithm = {
    name: "RSASSA-PKCS1-v1_5",
    hash: {name: "SHA-1"}
  };
  try {
    return await crypto.subtle.verify(
      signAlgorithm,
      await crypto.subtle.importKey(
        "spki",
        base64ToArrayBuffer(key),
        signAlgorithm,
        true,
        ["verify"]
      ),
      base64ToArrayBuffer(signature),
      new TextEncoder().encode(data)
    );
  }
  catch ({message}) {
    console.warn("Invalid encrypted signature: " + message);
    return false;
  }
};

// Define ASN.1 templates for the data structures used
function seq(...args) {
  return {type: 0x30, children: args};
}
function obj(id) {
  return {type: 0x06, content: id};
}
function bitStr(contents) {
  return {type: 0x03, encapsulates: contents};
}
function intResult(id) {
  return {type: 0x02, out: id};
}
function octetResult(id) {
  return {type: 0x04, out: id};
}

// See http://www.cryptopp.com/wiki/Keys_and_Formats#RSA_PublicKey
// 2A 86 48 86 F7 0D 01 01 01 means 1.2.840.113549.1.1.1
let publicKeyTemplate = seq(
  seq(obj("\x2A\x86\x48\x86\xF7\x0D\x01\x01\x01"), {}),
  bitStr(seq(intResult("n"), intResult("e")))
);

// See http://tools.ietf.org/html/rfc3447#section-9.2 step 2
// 2B 0E 03 02 1A means 1.3.14.3.2.26
let signatureTemplate = seq(
  seq(obj("\x2B\x0E\x03\x02\x1A"), {}),
  octetResult("sha1")
);

/**
 * Reads ASN.1 data matching the template passed in. This will throw an
 * exception if the data format doesn't match the template. On success an
 * object containing result properties is returned.
 * @see http://luca.ntop.org/Teaching/Appunti/asn1.html for info on the format.
 * @param {string} data
 * @param {Object} templ
 * @returns {Object}
 */
function readASN1(data, templ) {
  let pos = 0;
  function next() {
    return data.charCodeAt(pos++);
  }

  function readLength() {
    let len = next();
    if (len & 0x80) {
      let cnt = len & 0x7F;
      if (cnt > 2 || cnt == 0) {
        throw "Unsupported length";
      }

      len = 0;
      for (let i = 0; i < cnt; i++) {
        len += next() << (cnt - 1 - i) * 8;
      }
      return len;
    }
    return len;
  }

  function readNode(curTempl) {
    let type = next();
    let len = readLength();
    if ("type" in curTempl && curTempl.type != type) {
      throw "Unexpected type";
    }
    if ("content" in curTempl &&
        curTempl.content != data.substring(pos, pos + len)) {
      throw "Unexpected content";
    }
    if ("out" in curTempl) {
      out[curTempl.out] = new BigInteger(data.substring(pos, pos + len), 256);
    }
    if ("children" in curTempl) {
      let i;
      let end;
      for (i = 0, end = pos + len; pos < end; i++) {
        if (i >= curTempl.children.length) {
          throw "Too many children";
        }
        readNode(curTempl.children[i]);
      }
      if (i < curTempl.children.length) {
        throw "Too few children";
      }
      if (pos > end) {
        throw "Children too large";
      }
    }
    else if ("encapsulates" in curTempl) {
      if (next() != 0) {
        throw "Encapsulation expected";
      }
      readNode(curTempl.encapsulates);
    }
    else {
      pos += len;
    }
  }

  let out = {};
  readNode(templ);
  if (pos != data.length) {
    throw "Too much data";
  }
  return out;
}

/**
 * Reads a BER-encoded RSA public key. On success returns an object with the
 * properties n and e (the components of the key), otherwise null.
 * @param {string} key
 * @return {?Object}
 */
function readPublicKey(key) {
  try {
    return readASN1(atob(key), publicKeyTemplate);
  }
  catch (e) {
    console.warn("Invalid RSA public key: " + e);
    return null;
  }
}

let rusha;

/**
 * Checks whether the signature is valid for the given public key and data.
 * The verification is based on ASN.1 over SHA-1. This procedure is known as
 * RSA_PKCS1_SHA1 and it is the default kind of procedure, in OpenSSL, when
 * SEC_OID_ISO_SHA_WITH_RSA_SIGNATURE is used to create the key/signature pair.
 *
 * This function is synchronous, and so does not return a
 * promise. It's recommended to use the asynchronous version,
 * `{@link module:rsa.verifySignature verifySignature}`, if possible.
 * @param {string} key a base 64 public key used to verify.
 * @param {string} signature a base 64 signature used to verify.
 * @param {string} data a unique identifier of the resource to verify.
 * @returns {boolean} true if the signature is valid.
 */
exports.TF =
function verifySignatureSync(key, signature, data) {
  if (typeof rusha == "undefined") {
    rusha = new Rusha();
  }

  let keyData = readPublicKey(key);
  if (!keyData) {
    return false;
  }

  // We need the exponent as regular number
  keyData.e = parseInt(keyData.e.toString(16), 16);

  // Decrypt signature data using RSA algorithm
  let sigInt = new BigInteger(atob(signature), 256);
  let digest = sigInt.modPowInt(keyData.e, keyData.n).toString(256);

  try {
    let pos = 0;
    let next = () => digest.charCodeAt(pos++);

    // Skip padding, see http://tools.ietf.org/html/rfc3447#section-9.2 step 5
    if (next() != 1) {
      throw "Wrong padding in signature digest";
    }
    while (next() == 255) {}
    if (digest.charCodeAt(pos - 1) != 0) {
      throw "Wrong padding in signature digest";
    }

    // Rest is an ASN.1 structure, get the SHA1 hash from it and compare to
    // the real one
    let {sha1} = readASN1(digest.substring(pos), signatureTemplate);
    let expected = new BigInteger(rusha.digest(data), 16);
    return (sha1.compareTo(expected) == 0);
  }
  catch (e) {
    console.warn("Invalid encrypted signature: " + e);
    return false;
  }
};


/***/ }),

/***/ 3581:
/***/ ((module, exports, __nested_webpack_require_506241__) => {

(function () {
    var /*
 * Rusha, a JavaScript implementation of the Secure Hash Algorithm, SHA-1,
 * as defined in FIPS PUB 180-1, tuned for high performance with large inputs.
 * (http://github.com/srijs/rusha)
 *
 * Inspired by Paul Johnstons implementation (http://pajhome.org.uk/crypt/md5).
 *
 * Copyright (c) 2013 Sam Rijs (http://awesam.de).
 * Released under the terms of the MIT license as follows:
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 */
    util = {
        getDataType: function (data) {
            if (typeof data === 'string') {
                return 'string';
            }
            if (data instanceof Array) {
                return 'array';
            }
            if (typeof __nested_webpack_require_506241__.g !== 'undefined' && __nested_webpack_require_506241__.g.Buffer && __nested_webpack_require_506241__.g.Buffer.isBuffer(data)) {
                return 'buffer';
            }
            if (data instanceof ArrayBuffer) {
                return 'arraybuffer';
            }
            if (data.buffer instanceof ArrayBuffer) {
                return 'view';
            }
            if (data instanceof Blob) {
                return 'blob';
            }
            throw new Error('Unsupported data type.');
        }
    };
    function Rusha(chunkSize) {
        'use strict';
        var // Private object structure.
        self$2 = { fill: 0 };
        var // Calculate the length of buffer that the sha1 routine uses
        // including the padding.
        padlen = function (len) {
            for (len += 9; len % 64 > 0; len += 1);
            return len;
        };
        var padZeroes = function (bin, len) {
            for (var i$2 = len >> 2; i$2 < bin.length; i$2++)
                bin[i$2] = 0;
        };
        var padData = function (bin, chunkLen, msgLen) {
            bin[chunkLen >> 2] |= 128 << 24 - (chunkLen % 4 << 3);
            // To support msgLen >= 2 GiB, use a float division when computing the
            // high 32-bits of the big-endian message length in bits.
            bin[((chunkLen >> 2) + 2 & ~15) + 14] = msgLen / (1 << 29) | 0;
            bin[((chunkLen >> 2) + 2 & ~15) + 15] = msgLen << 3;
        };
        var // Convert a binary string and write it to the heap.
        // A binary string is expected to only contain char codes < 256.
        convStr = function (H8, H32, start, len, off) {
            var str = this, i$2, om = off % 4, lm = len % 4, j = len - lm;
            if (j > 0) {
                switch (om) {
                case 0:
                    H8[off + 3 | 0] = str.charCodeAt(start);
                case 1:
                    H8[off + 2 | 0] = str.charCodeAt(start + 1);
                case 2:
                    H8[off + 1 | 0] = str.charCodeAt(start + 2);
                case 3:
                    H8[off | 0] = str.charCodeAt(start + 3);
                }
            }
            for (i$2 = om; i$2 < j; i$2 = i$2 + 4 | 0) {
                H32[off + i$2 >> 2] = str.charCodeAt(start + i$2) << 24 | str.charCodeAt(start + i$2 + 1) << 16 | str.charCodeAt(start + i$2 + 2) << 8 | str.charCodeAt(start + i$2 + 3);
            }
            switch (lm) {
            case 3:
                H8[off + j + 1 | 0] = str.charCodeAt(start + j + 2);
            case 2:
                H8[off + j + 2 | 0] = str.charCodeAt(start + j + 1);
            case 1:
                H8[off + j + 3 | 0] = str.charCodeAt(start + j);
            }
        };
        var // Convert a buffer or array and write it to the heap.
        // The buffer or array is expected to only contain elements < 256.
        convBuf = function (H8, H32, start, len, off) {
            var buf = this, i$2, om = off % 4, lm = len % 4, j = len - lm;
            if (j > 0) {
                switch (om) {
                case 0:
                    H8[off + 3 | 0] = buf[start];
                case 1:
                    H8[off + 2 | 0] = buf[start + 1];
                case 2:
                    H8[off + 1 | 0] = buf[start + 2];
                case 3:
                    H8[off | 0] = buf[start + 3];
                }
            }
            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 += 4 | 0) {
                H32[off + i$2 >> 2] = buf[start + i$2] << 24 | buf[start + i$2 + 1] << 16 | buf[start + i$2 + 2] << 8 | buf[start + i$2 + 3];
            }
            switch (lm) {
            case 3:
                H8[off + j + 1 | 0] = buf[start + j + 2];
            case 2:
                H8[off + j + 2 | 0] = buf[start + j + 1];
            case 1:
                H8[off + j + 3 | 0] = buf[start + j];
            }
        };
        var convBlob = function (H8, H32, start, len, off) {
            var blob = this, i$2, om = off % 4, lm = len % 4, j = len - lm;
            var buf = new Uint8Array(reader.readAsArrayBuffer(blob.slice(start, start + len)));
            if (j > 0) {
                switch (om) {
                case 0:
                    H8[off + 3 | 0] = buf[0];
                case 1:
                    H8[off + 2 | 0] = buf[1];
                case 2:
                    H8[off + 1 | 0] = buf[2];
                case 3:
                    H8[off | 0] = buf[3];
                }
            }
            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 += 4 | 0) {
                H32[off + i$2 >> 2] = buf[i$2] << 24 | buf[i$2 + 1] << 16 | buf[i$2 + 2] << 8 | buf[i$2 + 3];
            }
            switch (lm) {
            case 3:
                H8[off + j + 1 | 0] = buf[j + 2];
            case 2:
                H8[off + j + 2 | 0] = buf[j + 1];
            case 1:
                H8[off + j + 3 | 0] = buf[j];
            }
        };
        var convFn = function (data) {
            switch (util.getDataType(data)) {
            case 'string':
                return convStr.bind(data);
            case 'array':
                return convBuf.bind(data);
            case 'buffer':
                return convBuf.bind(data);
            case 'arraybuffer':
                return convBuf.bind(new Uint8Array(data));
            case 'view':
                return convBuf.bind(new Uint8Array(data.buffer, data.byteOffset, data.byteLength));
            case 'blob':
                return convBlob.bind(data);
            }
        };
        var slice = function (data, offset) {
            switch (util.getDataType(data)) {
            case 'string':
                return data.slice(offset);
            case 'array':
                return data.slice(offset);
            case 'buffer':
                return data.slice(offset);
            case 'arraybuffer':
                return data.slice(offset);
            case 'view':
                return data.buffer.slice(offset);
            }
        };
        var // Precompute 00 - ff strings
        precomputedHex = new Array(256);
        for (var i = 0; i < 256; i++) {
            precomputedHex[i] = (i < 16 ? '0' : '') + i.toString(16);
        }
        var // Convert an ArrayBuffer into its hexadecimal string representation.
        hex = function (arrayBuffer) {
            var binarray = new Uint8Array(arrayBuffer);
            var res = new Array(arrayBuffer.byteLength);
            for (var i$2 = 0; i$2 < res.length; i$2++) {
                res[i$2] = precomputedHex[binarray[i$2]];
            }
            return res.join('');
        };
        var ceilHeapSize = function (v) {
            // The asm.js spec says:
            // The heap object's byteLength must be either
            // 2^n for n in [12, 24) or 2^24 * n for n  1.
            // Also, byteLengths smaller than 2^16 are deprecated.
            var p;
            if (// If v is smaller than 2^16, the smallest possible solution
                // is 2^16.
                v <= 65536)
                return 65536;
            if (// If v < 2^24, we round up to 2^n,
                // otherwise we round up to 2^24 * n.
                v < 16777216) {
                for (p = 1; p < v; p = p << 1);
            } else {
                for (p = 16777216; p < v; p += 16777216);
            }
            return p;
        };
        var // Initialize the internal data structures to a new capacity.
        init = function (size) {
            if (size % 64 > 0) {
                throw new Error('Chunk size must be a multiple of 128 bit');
            }
            self$2.maxChunkLen = size;
            self$2.padMaxChunkLen = padlen(size);
            // The size of the heap is the sum of:
            // 1. The padded input message size
            // 2. The extended space the algorithm needs (320 byte)
            // 3. The 160 bit state the algoritm uses
            self$2.heap = new ArrayBuffer(ceilHeapSize(self$2.padMaxChunkLen + 320 + 20));
            self$2.h32 = new Int32Array(self$2.heap);
            self$2.h8 = new Int8Array(self$2.heap);
            self$2.core = new Rusha._core({
                Int32Array: Int32Array,
                DataView: DataView
            }, {}, self$2.heap);
            self$2.buffer = null;
        };
        // Initialize the data structures according
        // to a chunk size.
        init(chunkSize || 64 * 1024);
        var initState = function (heap, padMsgLen) {
            var io = new Int32Array(heap, padMsgLen + 320, 5);
            io[0] = 1732584193;
            io[1] = -271733879;
            io[2] = -1732584194;
            io[3] = 271733878;
            io[4] = -1009589776;
        };
        var padChunk = function (chunkLen, msgLen) {
            var padChunkLen = padlen(chunkLen);
            var view = new Int32Array(self$2.heap, 0, padChunkLen >> 2);
            padZeroes(view, chunkLen);
            padData(view, chunkLen, msgLen);
            return padChunkLen;
        };
        var // Write data to the heap.
        write = function (data, chunkOffset, chunkLen) {
            convFn(data)(self$2.h8, self$2.h32, chunkOffset, chunkLen, 0);
        };
        var // Initialize and call the RushaCore,
        // assuming an input buffer of length len * 4.
        coreCall = function (data, chunkOffset, chunkLen, msgLen, finalize) {
            var padChunkLen = chunkLen;
            if (finalize) {
                padChunkLen = padChunk(chunkLen, msgLen);
            }
            write(data, chunkOffset, chunkLen);
            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);
        };
        var getRawDigest = function (heap, padMaxChunkLen) {
            var io = new Int32Array(heap, padMaxChunkLen + 320, 5);
            var out = new Int32Array(5);
            var arr = new DataView(out.buffer);
            arr.setInt32(0, io[0], false);
            arr.setInt32(4, io[1], false);
            arr.setInt32(8, io[2], false);
            arr.setInt32(12, io[3], false);
            arr.setInt32(16, io[4], false);
            return out;
        };
        var // Calculate the hash digest as an array of 5 32bit integers.
        rawDigest = this.rawDigest = function (str) {
            var msgLen = str.byteLength || str.length || str.size || 0;
            initState(self$2.heap, self$2.padMaxChunkLen);
            var chunkOffset = 0, chunkLen = self$2.maxChunkLen, last;
            for (chunkOffset = 0; msgLen > chunkOffset + chunkLen; chunkOffset += chunkLen) {
                coreCall(str, chunkOffset, chunkLen, msgLen, false);
            }
            coreCall(str, chunkOffset, msgLen - chunkOffset, msgLen, true);
            return getRawDigest(self$2.heap, self$2.padMaxChunkLen);
        };
        // The digest and digestFrom* interface returns the hash digest
        // as a hex string.
        this.digest = this.digestFromString = this.digestFromBuffer = this.digestFromArrayBuffer = function (str) {
            return hex(rawDigest(str).buffer);
        };
    }
    ;
    // The low-level RushCore module provides the heart of Rusha,
    // a high-speed sha1 implementation working on an Int32Array heap.
    // At first glance, the implementation seems complicated, however
    // with the SHA1 spec at hand, it is obvious this almost a textbook
    // implementation that has a few functions hand-inlined and a few loops
    // hand-unrolled.
    Rusha._core = function RushaCore(stdlib, foreign, heap) {
        'use asm';
        var H = new stdlib.Int32Array(heap);
        function hash(k, x) {
            // k in bytes
            k = k | 0;
            x = x | 0;
            var i = 0, j = 0, y0 = 0, z0 = 0, y1 = 0, z1 = 0, y2 = 0, z2 = 0, y3 = 0, z3 = 0, y4 = 0, z4 = 0, t0 = 0, t1 = 0;
            y0 = H[x + 320 >> 2] | 0;
            y1 = H[x + 324 >> 2] | 0;
            y2 = H[x + 328 >> 2] | 0;
            y3 = H[x + 332 >> 2] | 0;
            y4 = H[x + 336 >> 2] | 0;
            for (i = 0; (i | 0) < (k | 0); i = i + 64 | 0) {
                z0 = y0;
                z1 = y1;
                z2 = y2;
                z3 = y3;
                z4 = y4;
                for (j = 0; (j | 0) < 64; j = j + 4 | 0) {
                    t1 = H[i + j >> 2] | 0;
                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;
                    y4 = y3;
                    y3 = y2;
                    y2 = y1 << 30 | y1 >>> 2;
                    y1 = y0;
                    y0 = t0;
                    H[k + j >> 2] = t1;
                }
                for (j = k + 64 | 0; (j | 0) < (k + 80 | 0); j = j + 4 | 0) {
                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;
                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;
                    y4 = y3;
                    y3 = y2;
                    y2 = y1 << 30 | y1 >>> 2;
                    y1 = y0;
                    y0 = t0;
                    H[j >> 2] = t1;
                }
                for (j = k + 80 | 0; (j | 0) < (k + 160 | 0); j = j + 4 | 0) {
                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;
                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) + 1859775393 | 0) | 0;
                    y4 = y3;
                    y3 = y2;
                    y2 = y1 << 30 | y1 >>> 2;
                    y1 = y0;
                    y0 = t0;
                    H[j >> 2] = t1;
                }
                for (j = k + 160 | 0; (j | 0) < (k + 240 | 0); j = j + 4 | 0) {
                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;
                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | y1 & y3 | y2 & y3) | 0) + ((t1 + y4 | 0) - 1894007588 | 0) | 0;
                    y4 = y3;
                    y3 = y2;
                    y2 = y1 << 30 | y1 >>> 2;
                    y1 = y0;
                    y0 = t0;
                    H[j >> 2] = t1;
                }
                for (j = k + 240 | 0; (j | 0) < (k + 320 | 0); j = j + 4 | 0) {
                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;
                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) - 899497514 | 0) | 0;
                    y4 = y3;
                    y3 = y2;
                    y2 = y1 << 30 | y1 >>> 2;
                    y1 = y0;
                    y0 = t0;
                    H[j >> 2] = t1;
                }
                y0 = y0 + z0 | 0;
                y1 = y1 + z1 | 0;
                y2 = y2 + z2 | 0;
                y3 = y3 + z3 | 0;
                y4 = y4 + z4 | 0;
            }
            H[x + 320 >> 2] = y0;
            H[x + 324 >> 2] = y1;
            H[x + 328 >> 2] = y2;
            H[x + 332 >> 2] = y3;
            H[x + 336 >> 2] = y4;
        }
        return { hash: hash };
    };
    exports = Rusha;
    if (// If we'e running in Node.JS, export a module.
        true) {
        module.exports = Rusha;
    } else {}
    if (// If we're running in a webworker, accept
        // messages containing a jobid and a buffer
        // or blob object, and return the hash result.
        typeof FileReaderSync !== 'undefined') {
        var reader = new FileReaderSync(), hasher = new Rusha(4 * 1024 * 1024);
        self.onmessage = function onMessage(event) {
            var hash, data = event.data.data;
            try {
                hash = hasher.digest(data);
                self.postMessage({
                    id: event.data.id,
                    hash: hash
                });
            } catch (e) {
                self.postMessage({
                    id: event.data.id,
                    error: e.name
                });
            }
        };
    }
}());


/***/ }),

/***/ 3808:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_524343__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file Snippets implementation.
 */

const {EventEmitter} = __nested_webpack_require_524343__(8583);

let singleCharacterEscapes = new Map([
  ["n", "\n"], ["r", "\r"], ["t", "\t"]
]);

/**
 * `{@link module:snippets.snippets snippets}` implementation.
 */
class Snippets extends EventEmitter {
  /**
   * @hideconstructor
   */
  constructor() {
    super();

    /**
     * All known snippet filters.
     * @type {Set.<module:filterClasses.SnippetFilter>}
     * @private
     */
    this._filters = new Set();
  }

  /**
   * Removes all known snippet filters.
   */
  clear() {
    let {_filters} = this;

    if (_filters.size == 0) {
      return;
    }

    _filters.clear();

    this.emit("snippets.filtersCleared");
  }

  /**
   * Adds a new snippet filter.
   * @param {module:filterClasses.SnippetFilter} filter
   */
  add(filter) {
    let {_filters} = this;
    let {size} = _filters;

    _filters.add(filter);

    if (size != _filters.size) {
      this.emit("snippets.filterAdded", filter);
    }
  }

  /**
   * Removes an existing snippet filter.
   * @param {module:filterClasses.SnippetFilter} filter
   */
  remove(filter) {
    let {_filters} = this;
    let {size} = _filters;

    _filters.delete(filter);

    if (size != _filters.size) {
      this.emit("snippets.filterRemoved", filter);
    }
  }

  /**
   * Checks whether a snippet filter exists.
   * @param {module:filterClasses.SnippetFilter} filter
   * @returns {boolean}
   */
  has(filter) {
    return this._filters.has(filter);
  }

  /**
   * Returns a list of all snippet filters active on the given domain.
   * @param {string} domain The domain.
   * @returns {Array.<module:filterClasses.SnippetFilter>} A list of snippet
   *   filters.
   */
  getFilters(domain) {
    let result = [];

    for (let filter of this._filters) {
      if (filter.isActiveOnDomain(domain)) {
        result.push(filter);
      }
    }

    return result;
  }

  /**
   * Returns a list of all snippet filters active on the given domain.
   * @param {string} domain The domain.
   * @returns {Array.<module:filterClasses.SnippetFilter>} A list of snippet
   *   filters.
   *
   * @deprecated Use <code>{@link module:snippets~Snippets#getFilters}</code>
   *   instead.
   * @see module:snippets~Snippets#getFilters
   */
  getFiltersForDomain(domain) {
    return this.getFilters(domain);
  }
}

/**
 * Container for snippet filters.
 */
exports.Snippets = Snippets;

let parseScript =
/**
 * Parses a script and returns a list of all its commands and their arguments.
 * @param {string} script The script.
 * @returns {Array.<string[]>} A list of commands and their arguments.
 * @package
 */
exports.parseScript = function parseScript(script) {
  let tree = [];

  let escape = false;
  let withinQuotes = false;

  let unicodeEscape = null;

  let quotesClosed = false;

  let call = [];
  let argument = "";

  for (let character of script.trim() + ";") {
    let afterQuotesClosed = quotesClosed;
    quotesClosed = false;

    if (unicodeEscape != null) {
      unicodeEscape += character;

      if (unicodeEscape.length == 4) {
        let codePoint = parseInt(unicodeEscape, 16);
        if (!isNaN(codePoint)) {
          argument += String.fromCodePoint(codePoint);
        }

        unicodeEscape = null;
      }
    }
    else if (escape) {
      escape = false;

      if (character == "u") {
        unicodeEscape = "";
      }
      else {
        argument += singleCharacterEscapes.get(character) || character;
      }
    }
    else if (character == "\\") {
      escape = true;
    }
    else if (character == "'") {
      withinQuotes = !withinQuotes;

      if (!withinQuotes) {
        quotesClosed = true;
      }
    }
    else if (withinQuotes || character != ";" && !/\s/.test(character)) {
      argument += character;
    }
    else {
      if (argument || afterQuotesClosed) {
        call.push(argument);
        argument = "";
      }

      if (character == ";" && call.length > 0) {
        tree.push(call);
        call = [];
      }
    }
  }

  return tree;
};

/**
 * Compiles a script against a given list of libraries, passed as JSON
 * serialized string, or a an array of strings, into executable code.
 * @param {string|Array.<string>} scripts One or more scripts to convert into
 *  executable code.
 * @param {string} isolatedSnippetsLibrary The stringified bundle to be executed
 * in the isolated content script context.
 * @param {string} injectedSnippetsLibrary The stringified bundle to be injected
 * and executed in the main context.
 * @param {string|Array.<string>} injectedSnippetsList An array containing the
 * available injectable snippets.
 * @param {object} [environment] An object containing environment variables.
 * @returns {string} Executable code.
 */
exports.compileScript = function compileScript(scripts,
                                               isolatedSnippetsLibrary,
                                               injectedSnippetsLibrary,
                                               injectedSnippetsList,
                                               environment = {}) {
  let isolatedLib = JSON.stringify(isolatedSnippetsLibrary);
  let injectedLib = JSON.stringify(injectedSnippetsLibrary);
  let jsonEnv = JSON.stringify(environment);
  return `
    "use strict";
    (() => 
    {
      let scripts = ${JSON.stringify([].concat(scripts).map(parseScript))};

      let isolatedLib = ${isolatedLib};
      let imports = Object.create(null);
      let injectedSnippetsCount = 0;
      let loadLibrary = new Function("exports", "environment", isolatedLib);
      loadLibrary(imports, ${jsonEnv});
      const isolatedSnippets = imports.snippets;

      let injectedLib = ${injectedLib};
      let injectedSnippetsList = ${JSON.stringify(injectedSnippetsList)};
      let executable = "(() => {";
      executable += "let environment = ${jsonEnv.replace(/[\\"]/g, "\\$&")};";
      executable += injectedLib;

      let {hasOwnProperty} = Object.prototype;
      for (let script of scripts)
      {
        for (let [name, ...args] of script)
        {
          if (hasOwnProperty.call(isolatedSnippets, name))
          {
            let value = isolatedSnippets[name];
            if (typeof value == "function")
              value(...args);
          }
          if (injectedSnippetsList.includes(name))
          {
            executable += stringifyFunctionCall(name, ...args);
            injectedSnippetsCount++;
          }
        }
      }

      executable += "})();";

      if (injectedSnippetsCount > 0)
        injectSnippetsInMainContext(executable);

      function stringifyFunctionCall(func, ...params)
      {
        // Call JSON.stringify on the arguments to avoid any arbitrary code
        // execution.
        const f = "snippets['" + func + "']";
        const parameters = params.map(JSON.stringify).join(",");
        return f + "(" + parameters + ");";
      }

      function injectSnippetsInMainContext(exec)
      {
        // injecting phase
        let script = document.createElement("script");
        script.type = "application/javascript";
        script.async = false;

        // Firefox 58 only bypasses site CSPs when assigning to 'src',
        // while Chrome 67 and Microsoft Edge (tested on 44.17763.1.0)
        // only bypass site CSPs when using 'textContent'.
        if (typeof netscape != "undefined" && typeof browser != "undefined")
        {
          let url = URL.createObjectURL(new Blob([exec]));
          script.src = url;
          document.documentElement.appendChild(script);
          URL.revokeObjectURL(url);
        }
        else
        {
          script.textContent = exec;
          document.documentElement.appendChild(script);
        }

        document.documentElement.removeChild(script);
      }
    })();
  `;
};

/**
 * Prepares an inline script for injecting code into the main context.
 * This is necessary when `browser.scripting` is not available.
 * tabs.executeScript does not allow injecting scripts to main context.
 * So we resort to creating an inline script element.
 *
 * @param {any} codeToInject The code to be injected
 * @param {Array<any>} params Parameters to be passed to the injected code
 * @returns {string} The executable code to be injected
 */
exports.prepareInlineScriptForInjection =
  function prepareInlineScriptForInjection(codeToInject, ...params) {
    const args = JSON.stringify(params);
    // stringify injectedLib to escape backticks
    let code = JSON.stringify(codeToInject.toString());
    code = `"(${code.slice(1, -1)}).apply(null,${JSON.stringify(args).slice(1, -1)});"`;
    let executable =
      `function injectScriptInMainContext(executable)
        {
          // injecting phases
          let script = document.createElement("script");
          script.type = "application/javascript";
          script.async = false;

          // Firefox 58 only bypasses site CSPs when assigning to 'src',
          // while Chrome 67 and Microsoft Edge (tested on 44.17763.1.0)
          // only bypass site CSPs when using 'textContent'.
          if (typeof netscape != "undefined" && typeof browser != "undefined")
          {
            let url = URL.createObjectURL(new Blob([executable]));
            script.src = url;
            document.documentElement.appendChild(script);
            URL.revokeObjectURL(url);
          }
          else
          {
            script.textContent = executable;
            document.documentElement.appendChild(script);
          }

          document.documentElement.removeChild(script);
        };
        {
          const executable = ${code};
          injectScriptInMainContext(executable);
        }`;
    return executable;
  };


/***/ }),

/***/ 6659:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_534925__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file Definition of Subscription class and its subclasses.
 */

const {recommendations} = __nested_webpack_require_534925__(5056);
const {isActiveFilter, Filter} = __nested_webpack_require_534925__(1298);
const {filterNotifier} = __nested_webpack_require_534925__(5666);
const {Downloader} = __nested_webpack_require_534925__(145);
const {isHttpOrHttps} = __nested_webpack_require_534925__(1349);

let _recommendationsByURL = null;

/**
 * Clean the maps cache
 * @ignore
 */
exports._clean = function() {
  _recommendationsByURL = null;
  _urlByMv2URL = null;
};

/**
 * Subscription recommendation by URL.
 *
 * If `Subscription.dnr` is falsey then the mv2URL is the actual URL
 * as we would have with manifest v2.
 *
 * @returns {Map.<string, Recommendation>}
 */
function recommendationsByURL() {
  if (_recommendationsByURL) {
    return _recommendationsByURL;
  }

  _recommendationsByURL = new Map();

  for (let recommendation of recommendations()) {
    if (Subscription.dnr && recommendation.url) {
      _recommendationsByURL.set(recommendation.url, recommendation);
    }
    else if (recommendation.mv2URL) {
      _recommendationsByURL.set(recommendation.mv2URL, recommendation);
    }
  }
  return _recommendationsByURL;
}

let _urlByMv2URL = null;

/**
 * Subscription URL by mv2_url.
 *
 * @returns {Map.<string, string>}
 */
function urlByMv2URL() {
  if (_urlByMv2URL) {
    return _urlByMv2URL;
  }

  _urlByMv2URL = new Map();
  for (let recommendation of recommendations()) {
    if (recommendation.mv2URL) {
      _urlByMv2URL.set(recommendation.mv2URL, recommendation.url);
    }
  }
  return _urlByMv2URL;
}

let Subscription =
/**
 * The `Subscription` class represents a filter subscription.
 * @abstract
 */
exports.Subscription = class Subscription {
  /**
   * Creates a `Subscription` object.
   * @param {string} url The URL of the subscription.
   * @param {string} [title] The title of the subscription.
   * @private
   */
  constructor(url, title) {
    /**
     * The URL of the subscription.
     * @type {string}
     * @see module:subscriptionClasses.Subscription#url
     * @private
     */
    this._url = url;

    /**
     * Whether the URL of the subscription is a valid subscription URL.
     * @type {boolean}
     * @private
     * @see module:subscriptionClasses.Subscription#valid
     */
    this._urlValid = Subscription.isValidURL(url);

    let recommendation = recommendationsByURL().get(url);
    /**
     * The type of the subscription.
     * @type {?string}
     * @default <code>null</code>
     * @private
     * @see module:subscriptionClasses.Subscription#type
     */
    this._type = recommendation ? recommendation.type : null;

    /**
     * The id (UUID) of the subscription.
     * @type {?string}
     * @default <code>null</code>
     * @private
     */
    this._id = recommendation ? recommendation.id : null;

    /**
     * Filter text contained in the subscription.
     * @type {Array.<string>}
     * @private
     */
    this._filterText = [];

    /**
     * A searchable index of filter text in the subscription.
     * @type {Set.<string>}
     * @private
     */
    this._filterTextIndex = new Set();

    /**
     * The title of the subscription.
     * @type {?string}
     * @default <code>null</code>
     * @private
     * @see module:subscriptionClasses.Subscription#title
     */
    this._title = null;

    if (title) {
      this._title = title;
    }

    this._privileged = recommendation ? recommendation.privileged : false;

    /**
     * Whether the title of the subscription is non-editable.
     * @type {boolean}
     * @default <code>false</code>
     * @private
     * @see module:subscriptionClasses.Subscription#fixedTitle
     */
    this._fixedTitle = false;

    /**
     * Whether the subscription is disabled.
     * @type {boolean}
     * @default <code>false</code>
     * @private
     * @see module:subscriptionClasses.Subscription#disabled
     */
    this._disabled = false;

    Subscription.knownSubscriptions.set(url, this);
  }

  /**
   * The id (UUID) of the subscription.
   * @type {string}
   */
  get id() {
    return this._id;
  }

  /**
   * The URL of the subscription.
   * @type {string}
   */
  get url() {
    return this._url;
  }

  /**
   * Whether the subscription is valid.
   * @type {boolean}
   * @package
   */
  get valid() {
    // This should return a value based on Subscription#_urlValid after
    // https://gitlab.com/eyeo/adblockplus/abpui/adblockplusui/-/issues/753
    return true;
  }

  /**
   * The type of the subscription.
   * @type {?string}
   * @default <code>null</code>
   */
  get type() {
    return this._type;
  }

  /**
   * True if this subscription can load filters that require
   * privileged access, like snippets. Defaults to the result of the type being
   * "circumvention" if this value is null
   * @type {bool}
   */
  get privileged() {
    if (this._privileged == null) {
      return this._type === "circumvention";
    }

    return this._privileged;
  }

  set privileged(value) {
    if (value !== this._privileged) {
      let oldValue = this._privileged;
      this._privileged = value;
      filterNotifier.emit("subscription.privileged", this, value, oldValue);
    }
  }

  /**
   * The title of the subscription.
   * @type {string}
   */
  get title() {
    return this._title;
  }

  set title(value) {
    if (value != this._title) {
      let oldValue = this._title;
      this._title = value;
      filterNotifier.emit("subscription.title", this, value, oldValue);
    }
  }

  /**
   * Whether the title of the subscription is non-editable.
   * @type {boolean}
   * @default <code>false</code>
   */
  get fixedTitle() {
    return this._fixedTitle;
  }

  set fixedTitle(value) {
    if (value != this._fixedTitle) {
      let oldValue = this._fixedTitle;
      this._fixedTitle = value;
      filterNotifier.emit("subscription.fixedTitle", this, value, oldValue);
    }
  }

  /**
   * Whether the subscription is downloadable.
   * @type {boolean}
   * @default <code>false</code>
   */
  get downloadable() {
    return false;
  }

  /**
   * Has filters bundled along with the extension, which should be reloaded on
   * extension update.
   * @type {string}
   */
  get hasBundledFilters() {
    return false;
  }

  /**
   * Whether the subscription is disabled.
   * @type {boolean}
   * @default <code>false</code>
   */
  get disabled() {
    return this._disabled;
  }

  set disabled(value) {
    if (value != this._disabled) {
      let oldValue = this._disabled;
      this._disabled = value;
      filterNotifier.emit("subscription.disabled", this, value, oldValue);
    }
  }

  /**
   * The number of filters in the subscription.
   * @type {number}
   * @default <code>0</code>
   */
  get filterCount() {
    return this._filterText.length;
  }

  /**
   * Returns an iterator that yields the text for each filter in the
   * subscription.
   * @returns {Iterator.<string>}
   */
  filterText() {
    return this._filterText[Symbol.iterator]();
  }

  /**
   * Set parameters for CountableSubscriptions.
   *
   * @param {object} params The params from the filter list. `params` is
   *   the `params` field as returned by
   *   `{@link module:filters/lists.parseFilterList parseFilterList()}`.
   */
  setParams(params) {
    if (params.homepage) {
      let url;
      try {
        url = new URL(params.homepage);
      }
      catch (e) {
        url = null;
      }

      if (url && isHttpOrHttps(url)) {
        this.homepage = url.href;
      }
    }

    if (params.title) {
      this.title = params.title;
      this.fixedTitle = true;
    }
    else {
      this.fixedTitle = false;
    }

    if (params.version) {
      this.version = parseInt(params.version, 10);
    }

    if (this.type) {
      this.abtest = params.abtest;
    }

    if (params.diffURL) {
      this.diffURL = params.diffURL;
    }

    if (params.lastModified){
      this.lastModified = params.lastModified;
    }
  }

  /**
   * Set the filter text, and reset the index. Call this before adding
   * to the storage.
   *
   * The filter texts will be normalized with `{@link
   * module:filterClasses.Filter#normalize Filter.normalize()}` like
   * if they were loaded from a filter list.
   *
   * It is important to not call this beside the initialisation of the
   * subscription as it doesn't notify of changes
   *
   * @param {Array.<string>} text The text strings.
   * @param {object?} params The filter list params if any. `params` is
   *   the `params` field as returned by
   *   `{@link module:filters/lists.parseFilterList parseFilterList()}`.
   *
   * An error will be thrown if `text` isn't an array.
   */
  setFilterText(text, params = null) {
    if (!Array.isArray(text)) {
      throw new Error("setFilterText() must be called with an Array");
    }

    this._filterText = text.map(t => Filter.normalize(t));
    this._filterTextIndex = new Set(this._filterText);

    if (params) {
      this.setParams(params);
    }
  }

  /**
   * Checks whether the subscription has the given filter text.
   * @param {string} filterText The filter text.
   * @returns {boolean} Whether the subscription has the filter text.
   * @package
   */
  hasFilterText(filterText) {
    return this._filterTextIndex.has(filterText);
  }

  /**
   * Returns the filter text at the given `0`-based index.
   * @param {number} index The `0`-based index. If the index is out of bounds,
   *   the return value is `null`.
   * @returns {?module:filterClasses.Filter} The filter text.
   */
  filterTextAt(index) {
    return this._filterText[index] || null;
  }

  /**
   * Returns the `0`-based index of the given filter.
   *
   * @param {module:filterClasses.Filter} filter The filter.
   * @param {number} [fromIndex] The `0`-based index from which to start the
   *   search.
   *
   * @returns {number} The `0`-based index at which the filter is found. If the
   *   filter is not found in the subscription, the return value is `-1`.
   *
   * @see {@link findFilterTextIndex} if you only have a filter text.
   * @deprecated
   */
  findFilterIndex(filter, fromIndex = 0) {
    return this.findFilterTextIndex(filter.text, fromIndex);
  }

  /**
   * Returns the `0`-based index of the given filter.
   *
   * @param {string} filterText The filter text..
   * @param {number} [fromIndex] The `0`-based index from which to start the
   *   search.
   *
   * @returns {number} The `0`-based index at which the filter is
   *   found. If the filter is not found in the subscription, the
   *   return value is `-1`.
   */
  findFilterTextIndex(filterText, fromIndex = 0) {
    return this._filterText.indexOf(filterText, fromIndex);
  }

  /**
   * Removes all filters from the subscription.
   */
  clearFilters() {
    this._filterText = [];
    this._filterTextIndex.clear();
  }

  /**
   * Adds a filter to the subscription.
   * @param {module:filterClasses.Filter} filter The filter.
   *
   * @see {@link addFilterText} if you only have a filter text.
   * @deprecated
   */
  addFilter(filter) {
    this.addFilterText(filter.text);
  }

  /**
   * Adds a filter text to the subscription.
   * @param {string} text The filter text.
   */
  addFilterText(text) {
    this._filterText.push(text);
    this._filterTextIndex.add(text);
  }

  /**
   * Inserts a filter into the subscription at the given `0`-based index.
   *
   * @param {module:filterClasses.Filter} filter The filter.
   * @param {number} index The `0`-based index. If the index is out of bounds,
   *   the filter is inserted at the beginning or at the end accordingly.
   * @see {@link insertFilterTextAt} if you only have a filter text.
   * @deprecated
   */
  insertFilterAt(filter, index) {
    this.insertFilterTextAt(filter.text, index);
  }

  /**
   * Inserts a filter into the subscription at the given `0`-based index.
   *
   * @param {string} filterText The filter text.
   * @param {number} index The `0`-based index. If the index is out of bounds,
   *   the filter is inserted at the beginning or at the end accordingly.
   */
  insertFilterTextAt(filterText, index) {
    this._filterText.splice(index, 0, filterText);
    this._filterTextIndex.add(filterText);
  }

  /**
   * Deletes a filter from the subscription at the given `0`-based index.
   * @param {number} index The `0`-based index. If the index is out of bounds,
   *   no filter is deleted.
   */
  deleteFilterAt(index) {
    // Ignore index if out of bounds on the negative side, for consistency.
    if (index < 0) {
      return;
    }

    let [filterText] = this._filterText.splice(index, 1);
    if (!this._filterText.includes(filterText)) {
      this._filterTextIndex.delete(filterText);
    }
  }

  /**
   * Updates the filter text of the subscription.
   * @param {Array.<string>} filterText The new filter text.
   * @returns {{added: Array.<string>, removed: Array.<string>}} An object
   *   containing two lists of the text of added and removed filters
   *   respectively.
   * @package
   */
  updateFilterText(filterText) {
    let added = [];
    let removed = [];

    if (this._filterText.length == 0) {
      added = [...filterText];
    }
    else if (filterText.length > 0) {
      for (let text of filterText) {
        if (!this._filterTextIndex.has(text)) {
          added.push(text);
        }
      }
    }

    this._filterTextIndex = new Set(filterText);

    if (filterText.length == 0) {
      removed = [...this._filterText];
    }
    else if (this._filterText.length > 0) {
      for (let text of this._filterText) {
        if (!this._filterTextIndex.has(text)) {
          removed.push(text);
        }
      }
    }

    this._filterText = [...filterText];

    return {added, removed};
  }

  /**
   * Serializes the subscription for writing out on disk.
   * @yields {string}
   * @package
   */
  *serialize() {
    let {url, _title, _fixedTitle, _disabled, _id} = this;

    yield "[Subscription]";
    yield "url=" + url;

    if (_title) {
      yield "title=" + _title;
    }
    if (_fixedTitle) {
      yield "fixedTitle=true";
    }
    if (_disabled) {
      yield "disabled=true";
    }
    if (_id) {
      yield "id=" + _id;
    }
  }

  /**
   * Serializes the subscription's filter text for writing out on disk.
   * @yields {string}
   * @package
   */
  *serializeFilters() {
    let {_filterText} = this;

    yield "[Subscription filters]";

    for (let text of _filterText) {
      yield text.replace(/\[/g, "\\[");
    }
  }

  /**
   * Returns a string representing the subscription.
   * @returns {string}
   */
  toString() {
    return [...this.serialize()].join("\n");
  }
};

/**
 * Cache for known filter subscriptions that maps subscription URLs to
 * subscription objects.
 * @type {Map.<string, module:subscriptionClasses.Subscription>}
 * @package
 */
exports.Subscription.knownSubscriptions = new Map();
/**
 * We operate in DNR mode. Default is false.
 * @type {bool}
 * @package
 */
exports.Subscription.dnr = false;

/**
 * Returns the subscription object for a subscription URL.
 *
 * Every subscription URL maps to its own unique object. If no such object
 * exists, a new one is created internally; otherwise the existing object is
 * used.
 *
 * If `Subscription.dnr` is true, it will remap `mv2_url` to the canonical
 * `url` if necessary.
 *
 * @param {string} url The subscription URL.
 *
 * @returns {module:subscriptionClasses.Subscription} A subscription
 * object (can be any subclass thereof.
 */
exports.Subscription.fromURL = function(url) {
  let subscription = Subscription.knownSubscriptions.get(url);
  if (subscription) {
    return subscription;
  }

  if (url[0] != "~") {
    let downloadable = true;
    let title = null;
    let params = null;
    let updatableThroughDiffs = false;

    if (Subscription.dnr) {
      // In DNR we check if we got a mv2 URL and remap.
      let actualUrl = urlByMv2URL().get(url);
      if (actualUrl) {
        subscription = Subscription.knownSubscriptions.get(actualUrl);
        if (subscription) {
          return subscription;
        }

        url = actualUrl;
      }

      let recommendation = recommendationsByURL().get(url);
      if (recommendation) {
        // In DNR we use the recommendation title.
        title = recommendation.title;

        // All the known subscriptions are considered to be either
        // user countable or diff updatable
        downloadable = false;
        // We have to set the params like if the list was downloaded.
        params = {
          homepage: recommendation.homepage,
          // The effect of setting title here is that it will make the
          // fixedTitle property to be true.
          // This is the equivalent of the title being set by the
          // filter list.
          title
        };

        if (recommendation.diffURL) {
          params.diffURL = recommendation.diffURL;
          updatableThroughDiffs = true;
        }
      }
    }

    if (downloadable) {
      subscription = new FullUpdatableSubscription(url, title);
    }
    else if (updatableThroughDiffs) {
      subscription = new DiffUpdatableSubscription(url, title, params);
    }
    else {
      subscription = new CountableSubscription(url, title, params);
    }

    return subscription;
  }

  return new SpecialSubscription(url);
};

/**
 * Deserializes a subscription.
 * @param {Object} obj A map of serialized properties and their values.
 * @returns {module:subscriptionClasses.Subscription} A subscription object.
 * @package
 */
exports.Subscription.fromObject = function(obj) {
  let result;
  if (obj.url[0] != "~") {
    // URL is valid - this is a regular subscription
    // Unless indicated otherwise it is downloadable.
    if (("downloadable" in obj) && (obj.downloadable == "false")){
      if ("diffURL" in obj) {
        result = new DiffUpdatableSubscription(obj.url, obj.title);
      }
      else {
        result = new CountableSubscription(obj.url, obj.title);
      }
    }
    else {
      result = new FullUpdatableSubscription(obj.url, obj.title);
    }

    if (result.type) {
      result.abtest = obj.abtest;
    }

    if ("diffURL" in obj) {
      result.diffURL = obj.diffURL;
    }
    if ("downloadStatus" in obj) {
      result._downloadStatus = obj.downloadStatus;
    }
    if ("lastSuccess" in obj) {
      result.lastSuccess = parseInt(obj.lastSuccess, 10) || 0;
    }
    if ("lastCheck" in obj) {
      result._lastCheck = parseInt(obj.lastCheck, 10) || 0;
    }
    if ("expires" in obj) {
      result.expires = parseInt(obj.expires, 10) || 0;
    }
    if ("softExpiration" in obj) {
      result.softExpiration = parseInt(obj.softExpiration, 10) || 0;
    }
    if ("errors" in obj) {
      result._errors = parseInt(obj.errors, 10) || 0;
    }
    if ("version" in obj) {
      result.version = parseInt(obj.version, 10) || 0;
    }
    if ("requiredVersion" in obj) {
      result.requiredVersion = obj.requiredVersion;
    }
    if ("homepage" in obj) {
      result._homepage = obj.homepage;
    }
    if ("lastDownload" in obj) {
      result._lastDownload = parseInt(obj.lastDownload, 10) || 0;
    }
    if ("downloadCount" in obj) {
      result.downloadCount = parseInt(obj.downloadCount, 10) || 0;
    }
  }
  else {
    result = new SpecialSubscription(obj.url, obj.title);
    if ("defaults" in obj) {
      result.defaults = obj.defaults.split(" ");
    }
    if ("metadata" in obj) {
      result._metadata = JSON.parse(obj.metadata);
    }
  }
  if ("id" in obj) {
    result._id = obj.id;
  }
  if ("fixedTitle" in obj) {
    result._fixedTitle = (obj.fixedTitle == "true");
  }
  if ("disabled" in obj) {
    result._disabled = (obj.disabled == "true");
  }

  return result;
};

/**
 * Checks whether a URL is a valid subscription URL.
 * @param {string} url The URL.
 * @returns {boolean} Whether the URL is a valid subscription URL.
 */
exports.Subscription.isValidURL = function isValidURL(url) {
  return typeof url == "string" &&
    (url.startsWith("~user~") || Downloader.isValidURL(url));
};

let SpecialSubscription =
/**
 * The `SpecialSubscription` class represents a special filter subscription.
 *
 * This type of subscription is used for keeping user-defined filters.
 * @extends module:subscriptionClasses.Subscription
 */
exports.SpecialSubscription = class SpecialSubscription extends Subscription {
  /**
   * Creates a `SpecialSubscription` object.
   * @param {string} url The URL of the subscription.
   * @param {string} [title] The title of the subscription.
   * @private
   */
  constructor(url, title) {
    super(url, title);

    /**
     * Filter types that should be added to this subscription by default.
     *
     * Entries should correspond to keys in
     * `{@link module:subscriptionClasses.SpecialSubscription.defaultsMap}`.
     *
     * @type {?Array.<string>}
     *
     * @package
     */
    this.defaults = null;

    this._metadata = null;
  }

  get privileged() {
    return true;
  }

  /**
   * Checks whether the given filter should be added to this subscription by
   * default.
   * @param {Filter} filter The filter.
   * @returns {boolean} Whether the filter should be added to this subscription
   *   by default.
   * @package
   */
  isDefaultFor(filter) {
    if (this.defaults && this.defaults.length) {
      for (let type of this.defaults) {
        if (SpecialSubscription.defaultsMap.get(type).includes(filter.type)) {
          return true;
        }
        if (!isActiveFilter(filter) && type == "blocking") {
          return true;
        }
      }
    }

    return false;
  }

  /**
   * Set the metadata block for the special subscription
   *
   * @param {object} [value] The metadata
   */
  set metadata(value) {
    let oldValue = this._metadata;
    this._metadata = value;
    filterNotifier.emit("subscription.metadata", this, value, oldValue);
  }

  /**
   * Get the metadata block.
   * @return {?object} the metadata object or null
   */
  get metadata() {
    return this._metadata;
  }

  /**
   * Serializes the subscription for writing out on disk.
   * @yields {string}
   * @package
   */
  *serialize() {
    let {defaults, _lastDownload, _metadata} = this;

    yield* super.serialize();

    if (defaults) {
      yield "defaults=" +
            defaults.map(
              // remap for the stored format.
              type => type == "allowing" ? "whitelist" : type
            ).filter(
              type => SpecialSubscription.defaultsMap.has(type)
            ).join(" ");
    }
    // Metadata is encoded as a JSON on a single line.
    // This should be safe.
    if (_metadata) {
      yield "metadata=" + JSON.stringify(_metadata);
    }

    if (_lastDownload) {
      yield "lastDownload=" + _lastDownload;
    }
  }
};

/**
 * A map of filter types.
 * @type {Map.<string, Array.<string>>}
 * @package
 */
exports.SpecialSubscription.defaultsMap = new Map([
  ["allowing", ["allowing"]],
  // deprecated terminology
  ["whitelist", ["allowing"]],
  ["blocking", ["blocking"]],
  ["elemhide", ["elemhide", "elemhideexception", "elemhideemulation"]]
]);

/**
 * Creates a new special subscription.
 * @param {string} [title] The title of the subscription.
 * @returns {module:subscriptionClasses.SpecialSubscription} A new special
 *   subscription.
 * @package
 */
exports.SpecialSubscription.create = function(title) {
  let url;
  do {
    url = "~user~" + Math.round(Math.random() * 1000000);
  }
  while (Subscription.knownSubscriptions.has(url));
  return new SpecialSubscription(url, title);
};

/**
 * Creates a new special subscription and adds the given filter to it.
 *
 * Once created, the subscription acts as the default for all filters of the
 * {@link module:filterClasses.Filter#type type}.
 *
 * @param {module:filterClasses.Filter} filter The filter.
 *
 * @returns {module:subscriptionClasses.SpecialSubscription} A new special
 *   subscription.
 *
 * @package
 */
exports.SpecialSubscription.createForFilter = function(filter) {
  let subscription = SpecialSubscription.create();
  subscription.addFilter(filter);
  for (let [type, mappedTypes] of SpecialSubscription.defaultsMap) {
    if (mappedTypes.includes(filter.type)) {
      subscription.defaults = [type];
    }
  }
  if (!subscription.defaults) {
    subscription.defaults = ["blocking"];
  }
  return subscription;
};

let RegularSubscription =
/**
 * The `RegularSubscription` class represents a regular filter subscription
 * that is not by default downloaded off the internet.
 * `CountableSubscription` is a subclass of this.
 *
 * In a manifest v2 context it shouldn't be encountered. In manifest v3, it's
 * the default.
 *
 * @extends module:subscriptionClasses.Subscription
 */
exports.RegularSubscription = class RegularSubscription extends Subscription {
  /**
   * Creates a `RegularSubscription` object.
   * @param {string} url The URL of the subscription.
   * @param {string} [title] The title of the subscription.
   * @private
   */
  constructor(url, title) {
    super(url, title || url);

    /**
     * The homepage of the subscription.
     * @type {?string}
     * @default <code>null</code>
     * @private
     * @see module:subscriptionClasses.RegularSubscription#homepage
     */
    this._homepage = null;

    /**
     * The last time the subscription was downloaded, in seconds since the
     * beginning of the Unix epoch.
     * @type {number}
     * @default <code>0</code>
     * @private
     * @see module:subscriptionClasses.RegularSubscription#lastDownload
     */
    this._lastDownload = 0;

    let recommendation = recommendationsByURL().get(url);
    /**
     * The languages that apply for this subscription.
     * @type {?Array.<string>}
     */
    this._languages = recommendation ? recommendation.languages : null;
  }

  /**
   * The homepage of the subscription.
   * @type {?string}
   * @default <code>null</code>
   */
  get homepage() {
    return this._homepage;
  }

  set homepage(value) {
    if (value != this._homepage) {
      let oldValue = this._homepage;
      this._homepage = value;
      filterNotifier.emit("subscription.homepage", this, value, oldValue);
    }
  }

  /**
   * The languages that apply for this subscription.
   * @type {?Array.<string>}
   * @default <code>null</code>
   */
  get languages() {
    return this._languages;
  }

  /**
   * The last time the subscription was downloaded, in seconds since the
   * beginning of the Unix epoch.
   * @type {number}
   * @default <code>0</code>
   */
  get lastDownload() {
    return this._lastDownload;
  }

  set lastDownload(value) {
    if (value != this._lastDownload) {
      let oldValue = this._lastDownload;
      this._lastDownload = value;
      filterNotifier.emit("subscription.lastDownload", this, value, oldValue);
    }
  }

  /**
   * Serializes the subscription for writing out on disk.
   * @yields {string}
   * @package
   */
  *serialize() {
    let {_homepage, _lastDownload} = this;

    yield* super.serialize();

    // To keep compatibility downloadable is true if missing
    if (!this.downloadable) {
      yield "downloadable=false";
    }
    if (_homepage) {
      yield "homepage=" + _homepage;
    }
    if (_lastDownload) {
      yield "lastDownload=" + _lastDownload;
    }
  }
};

/**
 * Once initialized, the shared Synchronizer singleton will be stored in here.
 * @type {module:synchronizer.Synchronizer}
 */
let synchronizer = null;

let CountableSubscription =
/**
 * The `CountableSubscription` class represents a regular filter
 * subscription which will indicate it to the remote `url` it is in
 * use by issuing a `HEAD` http request instead of a `GET`.
 *
 * However it will have its property `downloadable` still set to
 * `false`.
 *
 * @extends module:subscriptionClasses.RegularSubscription
 */
exports.CountableSubscription =
class CountableSubscription extends RegularSubscription {
  /**
   * Allows downloadable subscriptions to update themselves once re-enabled,
   * via receiving the Synchronizer singleton.
   * @param {module:synchronizer~Synchronizer} reference the Synchronizer
   */
  static useSynchronizer(reference) {
    synchronizer = reference;
  }

  /**
   * Creates a `CountableSubscription` object.
   *
   * @param {string} url The URL of the subscription.
   * @param {string} [title] The title of the subscription.
   * @param {?object} [params] The params to pass to
   *    `{@link Subscription.setParams}`. Can be omitted or `null`.
   * @private
   */
  constructor(url, title, params) {
    super(url, title);

    if (params) {
      this.setParams(params);
    }

    /**
     * The status of the last download.
     * @type {?string}
     * @default <code>null</code>
     * @private
     * @see module:subscriptionClasses.CountableSubscription#downloadStatus
     */
    this._downloadStatus = null;

    /**
     * The last time the subscription was considered for an update, in seconds
     * since the beginning of the Unix epoch.
     * @type {number}
     * @default <code>0</code>
     * @private
     * @see module:subscriptionClasses.CountableSubscription#lastCheck
     */
    this._lastCheck = 0;

    /**
     * The number of download failures since the last successful download.
     * @type {number}
     * @default <code>0</code>
     * @private
     * @see module:subscriptionClasses.CountableSubscription#errors
     */
    this._errors = 0;

    /**
     * The last time the subscription was successfully downloaded, in seconds
     * since the beginning of the Unix epoch.
     * @type {number}
     * @default <code>0</code>
     */
    this.lastSuccess = 0;

    /**
     * The hard expiration time of the subscription, in seconds since the
     * beginning of the Unix epoch.
     *
     * Updates should be downloaded if `{@link
     * module:subscriptionClasses.CountableSubscription#softExpiration}`
     * or `expires` are in the past.
     * @type {number}
     * @default <code>0</code>
     */
    this.expires = 0;

    /**
     * The soft expiration time of the subscription, in seconds since the
     * beginning of the Unix epoch.
     *
     * Updates should be downloaded if `softExpiration` or
     * `{@link module:subscriptionClasses.CountableSubscription#expires}`
     * are in the past.
     * @type {number}
     * @default <code>0</code>
     */
    this.softExpiration = 0;

    /**
     * The version of the subscription data that was retrieved on last
     * successful download.
     * @type {number}
     * @default <code>0</code>
     */
    this.version = 0;

    /**
     * The minimal Adblock Plus version required for the subscription.
     * @type {?string}
     * @default <code>null</code>
     */
    this.requiredVersion = null;

    /**
     * The number of times the subscription has been downloaded.
     * @type {number}
     * @default <code>0</code>
     */
    this.downloadCount = 0;
  }

  /**
   * Whether this is a countable subscription, i.e. a subscription that
   * will connect to the URL. A downloadable subscription is countable,
   * but not the other way around.
   *
   * @type {boolean}
   * @default <code>true</code>
   */
  get countable() {
    return true;
  }

  get hasBundledFilters() {
    return true;
  }

  /**
   * Whether the subscription is disabled. Once re-enabled, it ensures the
   * synchronizer downloads latest version of this subscription.
   * @type {boolean}
   * @default <code>false</code>
   */
  get disabled() {
    return super.disabled;
  }

  set disabled(value) {
    let {_disabled} = this;
    super.disabled = value;
    if (synchronizer && _disabled && !value) {
      synchronizer.execute(this);
    }
  }

  /**
   * The status of the last download.
   *
   * A message ID which can have the following values:
   * - `synchronize_ok` - The subscription is perfectly fine.
   * - `synchronize_connection_error` - An error has occurred when trying to
   *    download the subscription.
   * - `synchronize_invalid_url` - The subscription URL is invalid.
   * - `synchronize_too_many_filters` - A custom user subscription cannot
   *    update because there aren't enough dynamic rules available.
   * - `synchronize_dnr_error` - Downloading succeeded but, an error occurred
   *    while updating the custom subscription.
   * - `synchronize_diff_too_many_filters` - A diff updatable subscription
   *    cannot update because there aren't enough dynamic rules available.
   * - `synchronize_diff_error` - Downloading succeeded but, an error occurred
   *    while updating the diff updatable subscription.
   *
   * If the initial download is not completed yet, then it is null.
   *
   * @type {?string}
   * @default <code>null</code>
   */
  get downloadStatus() {
    return this._downloadStatus;
  }

  set downloadStatus(value) {
    let oldValue = this._downloadStatus;
    this._downloadStatus = value;
    filterNotifier.emit("subscription.downloadStatus", this, value, oldValue);
  }

  /**
   * The last time the subscription was considered for an update, in seconds
   * since the beginning of the Unix epoch.
   *
   * This is used to increase the soft expiration time if the user doesn't use
   * Adblock Plus for some time.
   *
   * @type {number}
   * @default <code>0</code>
   */
  get lastCheck() {
    return this._lastCheck;
  }

  set lastCheck(value) {
    if (value != this._lastCheck) {
      let oldValue = this._lastCheck;
      this._lastCheck = value;
      filterNotifier.emit("subscription.lastCheck", this, value, oldValue);
    }
  }

  /**
   * The number of download failures since the last successful download.
   * @type {number}
   * @default <code>0</code>
   */
  get errors() {
    return this._errors;
  }

  set errors(value) {
    if (value != this._errors) {
      let oldValue = this._errors;
      this._errors = value;
      filterNotifier.emit("subscription.errors", this, value, oldValue);
    }
  }

  /**
   * Serializes the subscription for writing out on disk.
   * @yields {string}
   * @package
   */
  *serialize() {
    let {downloadStatus, lastSuccess, lastCheck, expires,
         softExpiration, errors, version, requiredVersion,
         downloadCount} = this;

    yield* super.serialize();

    if (downloadStatus) {
      yield "downloadStatus=" + downloadStatus;
    }
    if (lastSuccess) {
      yield "lastSuccess=" + lastSuccess;
    }
    if (lastCheck) {
      yield "lastCheck=" + lastCheck;
    }
    if (expires) {
      yield "expires=" + expires;
    }
    if (softExpiration) {
      yield "softExpiration=" + softExpiration;
    }
    if (errors) {
      yield "errors=" + errors;
    }
    if (version) {
      yield "version=" + version;
    }
    if (requiredVersion) {
      yield "requiredVersion=" + requiredVersion;
    }
    if (downloadCount) {
      yield "downloadCount=" + downloadCount;
    }
  }
};

let FullUpdatableSubscription =
/**
 * The `FullUpdatableSubscription` class represents a regular filter
 * subscription whose content (filter text) is downloaded from a filter list
 * off the internet from `url` with a full update.
 *
 * It will have its property `downloadable` set to `true`.
 *
 * @extends module:subscriptionClasses.CountableSubscription
 */
exports.FullUpdatableSubscription =
class FullUpdatableSubscription extends CountableSubscription {
  /** Construct a new FullUpdatableSubscription
   *
   * @param {string} url The URL of the subscription.
   * @param {string} [title] The title of the subscription.
   *
   * @private
   */
  constructor(url, title) {
    super(url, title);
  }

  /**
   * Whether the subscription is downloadable.
   * @type {boolean}
   * @default <code>true</code>
   */
  get downloadable() {
    return true;
  }

  get hasBundledFilters() {
    return false;
  }
};

let DiffUpdatableSubscription =
/**
 * The `DiffUpdatableSubscription` class represents a regular filter
 * subscription whose content (filter text) is downloaded from a filter list
 * off the internet from `url`. The key difference between this and a
 * `{@link CountableSubscription}` is that this class has a diffurl
 * from where updates will be handled
 *
 * It will have its `downloadable` property set to `false`.
 *
 * @extends module:subscriptionClasses.CountableSubscription
 */
exports.DiffUpdatableSubscription =
class DiffUpdatableSubscription extends CountableSubscription {
  /**
   * Construct a new DiffUpdatableSubscription
   * @param {string} url The URL of the subscription.
   * @param {string} [title] The title of the subscription.
   * @param {?object} [params] The params to pass to
   *    `{@link Subscription.setParams}`. Can be omitted or `null`.
   * @private
   */
  constructor(url, title, params) {
    super(url, title);

    if (params) {
      this.setParams(params);
    }
  }

  /**
   * Serializes the subscription for writing out on disk.
   * @yields {string}
   * @package
   */
  *serialize() {
    let {diffURL, lastModified} = this;

    yield* super.serialize();

    if (diffURL) {
      yield "diffURL=" + diffURL;
    }

    if (lastModified) {
      yield "lastModified=" + lastModified;
    }
  }

  /**
   * Updatable subscriptions should not be downloadable as they will rather
   * support getting diffs from a diffURL.
   *
   * @type {boolean}
   * @default <code>true</code>
   */
  get downloadable() {
    return false;
  }

  /**
   * The location where this subscription's content is downloaded from.
   *
   * @type {String}
   */
  get diffURL() {
    return this._diffURL;
  }

  set diffURL(value) {
    let oldValue = this._diffURL;
    this._diffURL = value;
    filterNotifier.emit("subscription.diffURL", this, value, oldValue);
  }

  /**
   * The release date of this subscription, used as base date to calculate the
   * diffs.
   *
   * @type {Date}
   */
  get lastModified() {
    return this._lastModified;
  }

  set lastModified(value) {
    let oldValue = this._lastModified;
    this._lastModified = value;
    filterNotifier.emit("subscription.lastModified", this, value, oldValue);
  }
};


/***/ }),

/***/ 7962:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_573822__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * @file Manages synchronization of filter subscriptions.
 */

const {Prefs} = __nested_webpack_require_573822__(35);

const {MILLIS_IN_SECOND, MILLIS_IN_MINUTE, MILLIS_IN_HOUR,
       MILLIS_IN_DAY} = __nested_webpack_require_573822__(103);
const {Downloader, Downloadable} = __nested_webpack_require_573822__(145);
const {Filter} = __nested_webpack_require_573822__(1298);
const {filterNotifier} = __nested_webpack_require_573822__(5666);
const {Subscription,
       CountableSubscription} = __nested_webpack_require_573822__(6659);
const {analytics} = __nested_webpack_require_573822__(1052);
const {parseFilterList} = __nested_webpack_require_573822__(3569);
const {recommendations} = __nested_webpack_require_573822__(5056);
const {isHttpOrHttps} = __nested_webpack_require_573822__(1349);

const INITIAL_DELAY = 1 * MILLIS_IN_MINUTE;
const CHECK_INTERVAL = 1 * MILLIS_IN_HOUR;
const DEFAULT_EXPIRATION_INTERVAL = 5 * MILLIS_IN_DAY;

let getPreferredMillis = (field, fallback) =>
                          field in Prefs ? Prefs[field] : fallback;

/**
 * Downloads filter subscriptions whenever necessary.
 */
class Synchronizer {
  /**
   * Construct a new synchronizer.
   * @param {FilterStorage} [filterStorage] The associated filter storage.
   */
  constructor(filterStorage) {
    if (filterStorage == null || typeof filterStorage != "object") {
      throw Error("filterStorage must be a valid object");
    }

    /**
     * Whether the downloading of subscriptions has been started.
     * @private
     */
    this._started = false;

    /**
     * The object providing actual downloading functionality.
     * @type {module:downloader.Downloader}
     */
    this._downloader = new Downloader(this._getDownloadables.bind(this));

    this._downloader.onExpirationChange = this._onExpirationChange.bind(this);
    this._downloader.onDownloadStarted = this._onDownloadStarted.bind(this);
    this._downloader.onDownloadSuccess = this._onDownloadSuccess.bind(this);
    this._downloader.onDownloadError = this._onDownloadError.bind(this);

    this._filterStorage = filterStorage;

    // allow subscription to update themselves once re-enabled if needed.
    CountableSubscription.useSynchronizer(this);
  }

  /**
   * Starts downloading subscriptions.
   *
   * No subscriptions are downloaded until this function has been called at
   * least once.
   */
  start() {
    if (this._started) {
      return;
    }

    this._downloader.scheduleChecks(
      getPreferredMillis("subscriptions_check_interval", CHECK_INTERVAL),
      getPreferredMillis("subscriptions_initial_delay", INITIAL_DELAY)
    );
    this._started = true;
  }

  /**
   * Clear any further downloader scheduled check and set its internal state
   * as not started.
   */
  stop() {
    this._started = false;
    this._downloader.unscheduleChecks();
  }

  /**
   * Checks whether a subscription is currently being downloaded.
   * @param {string} url  URL of the subscription
   * @returns {boolean}
   */
  isExecuting(url) {
    return this._downloader.isDownloading(url);
  }

  /**
   * Starts the download of a subscription if it is downloadable.
   *
   * @param {module:subscriptionClasses.CountableSubscription} subscription
   *   Subscription to be downloaded
   * @param {boolean} manual
   *   `true` for a manually started download (should not trigger fallback
   *   requests)
   */
  execute(subscription, manual) {
    this._downloader.download(this._getDownloadable(subscription, manual));
  }

  /**
   * Yields `{@link module:downloader.Downloadable Downloadable}` instances for
   * all subscriptions that can be downloaded.
   * @yields {module:downloader.Downloadable}
   */
  *_getDownloadables() {
    if (!Prefs.subscriptions_autoupdate) {
      return;
    }

    for (let subscription of this._filterStorage.subscriptions()) {
      if (subscription instanceof CountableSubscription) {
        yield this._getDownloadable(subscription, false);
      }
    }
  }

  /**
   * Creates a `{@link module:downloader.Downloadable Downloadable}` instance
   * for a subscription.
   * @param {module:subscriptionClasses.Subscription} subscription
   * @param {boolean} manual
   * @returns {module:downloader.Downloadable}
   */
  _getDownloadable(subscription, manual) {
    let {url, lastDownload, lastSuccess, lastCheck, version, softExpiration,
         expires, downloadCount, disabled, downloadable,
         countable, diffURL, lastModified} = subscription;

    let result;

    // If this is a DiffUpdatable subscription, use the diff URL and set the
    // original URL. We need to set this original URL or it will not be
    // available in the download success callback.
    if (diffURL) {
      result = new Downloadable(diffURL);
      result.originalUrl = url;
    }
    else {
      result = new Downloadable(url);
    }

    if (analytics.isTrusted(url)) {
      result.firstVersion = analytics.getFirstVersion();
    }

    if (lastDownload != lastSuccess) {
      result.lastError = lastDownload * MILLIS_IN_SECOND;
    }

    result.lastCheck = lastCheck * MILLIS_IN_SECOND;
    result.lastVersion = version;
    result.softExpiration = softExpiration * MILLIS_IN_SECOND;
    result.hardExpiration = expires * MILLIS_IN_SECOND;
    result.manual = manual;
    result.downloadCount = downloadCount;
    result.disabled = disabled;
    result.lastModified = lastModified;
    if (!diffURL && (disabled || (countable && !downloadable))) {
      result.method = "HEAD";
    }

    return result;
  }

  _onExpirationChange(downloadable) {
    let subscription = Subscription.fromURL(
      downloadable.originalUrl || downloadable.url);
    subscription.lastCheck = Math.round(
      downloadable.lastCheck / MILLIS_IN_SECOND
    );
    subscription.softExpiration = Math.round(
      downloadable.softExpiration / MILLIS_IN_SECOND
    );
    subscription.expires = Math.round(
      downloadable.hardExpiration / MILLIS_IN_SECOND
    );
  }

  _onDownloadStarted(downloadable) {
    let subscription = Subscription.fromURL(
      downloadable.originalUrl || downloadable.url);
    filterNotifier.emit("subscription.downloading", subscription);
  }

  _onDownloadSuccess(downloadable, responseText, errorCallback,
                     redirectCallback) {
    // if it has originalUrl, it means that it's a diffUpdatable subscription
    let isDiffUpdatable = (downloadable.originalUrl != null);

    let subscription = Subscription.fromURL(downloadable.redirectURL ||
      (isDiffUpdatable ? downloadable.originalUrl : downloadable.url));
    filterNotifier.emit("subscription.downloading", subscription);

    let isHEAD = downloadable.method === "HEAD";

    let {error, lines, params,
         minVersion} = isHEAD || isDiffUpdatable ?
           {params: {}} : parseFilterList(responseText);

    if (error) {
      return errorCallback(error);
    }

    if (params.redirect) {
      return redirectCallback(params.redirect);
    }

    // Handle redirects
    if (downloadable.redirectURL &&
        downloadable.redirectURL != downloadable.url) {
      let oldSubscription = Subscription.fromURL(
        downloadable.originalUrl || downloadable.url);
      subscription.title = oldSubscription.title;
      subscription.disabled = oldSubscription.disabled;
      subscription.lastCheck = oldSubscription.lastCheck;

      let listed = this._filterStorage.hasSubscription(oldSubscription);
      if (listed) {
        this._filterStorage.removeSubscription(oldSubscription);
      }

      Subscription.knownSubscriptions.delete(oldSubscription.url);

      if (listed) {
        this._filterStorage.addSubscription(subscription);
      }
    }

    // The download actually succeeded
    subscription.lastSuccess = subscription.lastDownload = Math.round(
      Date.now() / MILLIS_IN_SECOND
    );
    subscription.downloadStatus = "synchronize_ok";
    subscription.downloadCount = downloadable.downloadCount;
    subscription.errors = 0;

    // Process parameters
    if (params.homepage) {
      let url;
      try {
        url = new URL(params.homepage);
      }
      catch (e) {
        url = null;
      }

      if (url && isHttpOrHttps(url)) {
        subscription.homepage = url.href;
      }
    }

    if (params.title) {
      subscription.title = params.title;
      subscription.fixedTitle = true;
    }
    else {
      subscription.fixedTitle = false;
    }

    if (params.version) {
      subscription.version = parseInt(params.version, 10);
    }
    else {
      subscription.version = isHEAD || isDiffUpdatable ?
        downloadable.lastVersion : 0;
    }

    if ((params.version || isDiffUpdatable) &&
        analytics.isTrusted(downloadable.redirectURL || downloadable.url)) {
      analytics.recordVersion(subscription.version.toString());
    }

    if (subscription.type) {
      subscription.abtest = params.abtest;
    }

    let headExpInterval = getPreferredMillis(
      "subscriptions_head_expiration_interval",
      MILLIS_IN_DAY
    );

    let defaultExpInterval = getPreferredMillis(
      "subscriptions_default_expiration_interval",
      DEFAULT_EXPIRATION_INTERVAL
    );

    let expirationInterval = isHEAD ? headExpInterval : defaultExpInterval;

    if (isDiffUpdatable) {
      params.expires =
        [...recommendations()].find(
          recommendation => recommendation.url === downloadable.originalUrl
        ).expires;
    }
    if (params.expires) {
      let match = /^(\d+)\s*(h)?/.exec(params.expires);
      if (match) {
        let interval = parseInt(match[1], 10);
        if (match[2]) {
          expirationInterval = interval * MILLIS_IN_HOUR;
        }
        else {
          expirationInterval = interval * MILLIS_IN_DAY;
        }
      }
    }

    let [
      softExpiration,
      hardExpiration
    ] = this._downloader.processExpirationInterval(expirationInterval);
    subscription.softExpiration = Math.round(softExpiration / MILLIS_IN_SECOND);
    subscription.expires = Math.round(hardExpiration / MILLIS_IN_SECOND);

    if (minVersion) {
      subscription.requiredVersion = minVersion;
    }
    else {
      delete subscription.requiredVersion;
    }

    // In case of HEAD request (disabled subscription) notify an update so that
    // the last version of the subscription will be stored for the next time.
    if (isHEAD) {
      filterNotifier.emit("subscription.updated", subscription);
    }
    else if (isDiffUpdatable) {
      const responseObject = JSON.parse(responseText);
      const added = responseObject.filters.add;
      const removed = responseObject.filters.remove;

      filterNotifier.emit("subscription.diffReceived", subscription, {added, removed});
    }
    else if (Subscription.dnr) {
      filterNotifier.emit("subscription.fullUpdateReceived", subscription, lines);
    }
    else {
      this._processFilters(subscription, lines);
    }
  }

  _onDownloadError(downloadable, downloadURL, error, responseStatus,
                   redirectCallback) {
    let subscription = Subscription.fromURL(
      downloadable.originalUrl || downloadable.url);
    subscription.lastDownload = Math.round(Date.now() / MILLIS_IN_SECOND);
    subscription.downloadStatus = error;
    filterNotifier.emit("subscription.downloading", subscription);

    // Request fallback URL if necessary - for automatic updates only
    if (!downloadable.manual) {
      subscription.errors++;

      if (redirectCallback &&
          subscription.errors >= Prefs.subscriptions_fallbackerrors &&
          /^https?:\/\//i.test(subscription.url)) {
        subscription.errors = 0;

        let fallbackURL = Prefs.subscriptions_fallbackurl;
        const {addonVersion} = __nested_webpack_require_573822__(4189);
        fallbackURL = fallbackURL.replace(/%VERSION%/g,
                                          encodeURIComponent(addonVersion));
        fallbackURL = fallbackURL.replace(/%SUBSCRIPTION%/g,
                                          encodeURIComponent(subscription.url));
        fallbackURL = fallbackURL.replace(/%URL%/g,
                                          encodeURIComponent(downloadURL));
        fallbackURL = fallbackURL.replace(/%ERROR%/g,
                                          encodeURIComponent(error));
        fallbackURL = fallbackURL.replace(/%RESPONSESTATUS%/g,
                                          encodeURIComponent(responseStatus));

        let initObj = {
          cache: "no-store",
          credentials: "omit",
          referrer: "no-referrer",
          method: downloadable.method
        };

        fetch(fallbackURL, initObj).then(response => response.text())
          .then(responseText => {
            if (!this._filterStorage.hasSubscription(subscription)) {
              return;
            }

            let match = /^(\d+)(?:\s+(\S+))?$/.exec(responseText);
            if (match && match[1] == "301" &&    // Moved permanently
              match[2] && /^https?:\/\//i.test(match[2])) {
              redirectCallback(match[2]);
            }
            // Gone
            else if (match && match[1] == "410") {
              let data = "[Adblock]\n" +
              [...subscription.filterText()].join("\n");
              redirectCallback("data:text/plain," + encodeURIComponent(data));
            }
          });
      }
    }
  }

  /**
   * Given a valid subscription and some text, it parses all filters and add
   * these in bulk to the specified subscription.
   * @param {module:subscriptionClasses.Subscription} subscription The
   *  Subscription to use as reference for manually added filters.
   * @param {string} filters The filters file/text to add.
   * @param {function} errorCallback A callback invoked if errors occur.
   */
  addSubscriptionFilters(
    subscription, filters, errorCallback
  ) {
    let {error, lines} = parseFilterList(filters);
    if (error) {
      errorCallback(error);
    }
    else {
      this._processFilters(subscription, lines);
    }
  }

  /**
   * Given a list of parsed filters, normalize each line and update the
   * subscription.
   * @private
   * @param {module:subscriptionClasses.Subscription} subscription The
   *  Subscription to use as reference for manually added filters.
   * @param {string[]} lines The parsed filters lines. The first line
   will be skipped over as it is supposed to contain the header.
  */
  _processFilters(subscription, lines) {
    lines.shift();
    let filterText = [];
    for (let line of lines) {
      line = Filter.normalize(line);
      if (line) {
        filterText.push(line);
      }
    }

    this._filterStorage.updateSubscriptionFilters(subscription, filterText);
  }
}

exports.Synchronizer = Synchronizer;


/***/ }),

/***/ 103:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



/**
 * Number of milliseconds in a second.
 * @const {number}
 * @default 1000
 * @package
 */
exports.MILLIS_IN_SECOND = 1000;

/**
 * Number of milliseconds in a minute.
 * @const {number}
 * @default 60000
 * @package
 */
exports.MILLIS_IN_MINUTE = 60000;

/**
 * Number of milliseconds in an hour.
 * @const {number}
 * @default 3600000
 * @package
 */
exports.MILLIS_IN_HOUR = 3600000;

/**
 * Number of milliseconds in a day.
 * @const {number}
 * @default 86400000
 * @package
 */
exports.MILLIS_IN_DAY = 86400000;

/**
 * Number of minutes in an hour.
 * @const {number}
 * @default 60
 * @package
 */
exports.MINUTES_IN_HOUR = 60;

/**
 * Number of minutes in a day.
 * @const {number}
 * @default 1440
 * @package
 */
exports.MINUTES_IN_DAY = 1440;


/***/ }),

/***/ 1349:
/***/ ((__unused_webpack_module, exports, __nested_webpack_require_590774__) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



const {Cache} = __nested_webpack_require_590774__(9797);

const {icannPublicSuffixes} = __nested_webpack_require_590774__(7234);
const {nonIcannPublicSuffixes} = __nested_webpack_require_590774__(987);

// ensure no conflict ever happens with inherited properties
Object.setPrototypeOf(icannPublicSuffixes, null);
Object.setPrototypeOf(nonIcannPublicSuffixes, null);

/**
 * Cache of domain maps.
 *
 * The domains part of filter text (e.g. `example.com,~mail.example.com`) is
 * often repeated across filters. This cache enables deduplication of the
 * `Map` objects that specify on which domains the filter does and does not
 * apply, which reduces memory usage and improves performance.
 *
 * @type {Map.<string, Map.<string, boolean>>}
 */
let domainsCache = new Cache(1000);

/**
 * A `URLInfo` object represents information about a URL.
 *
 * It is returned by `{@link module:url.parseURL parseURL()}`.
 */
class URLInfo {
  /**
   * Creates a `URLInfo` object.
   *
   * @param {string} href The entire URL.
   * @param {string} protocol The protocol scheme of the URL, including the
   *   final `:`.
   * @param {string} [hostname] The hostname of the URL.
   *
   * @private
   */
  constructor(href, protocol, hostname = "") {
    this._href = href;
    this._protocol = protocol;
    this._hostname = hostname;
  }

  /**
   * The entire URL.
   * @type {string}
   */
  get href() {
    return this._href;
  }

  /**
   * The protocol scheme of the URL, including the final `:`.
   * @type {string}
   */
  get protocol() {
    return this._protocol;
  }

  /**
   * The hostname of the URL.
   * @type {string}
   */
  get hostname() {
    return this._hostname;
  }

  /**
   * Returns the entire URL.
   * @returns {string} The entire URL.
   */
  toString() {
    return this._href;
  }
}

let parseURL =
/**
 * Parses a URL to extract the protocol and the hostname.
 *
 * __This is a lightweight alternative to the native `URL` object intended for
 * use primarily within Adblock Plus. Unlike the `URL` object, the `parseURL()`
 * function is not robust and will give incorrect results for invalid URLs. Use
 * this function with valid,
 * [normalized](https://url.spec.whatwg.org/#concept-basic-url-parser),
 * properly encoded (IDNA, etc.) URLs only.__
 *
 * @param {string} url The URL.
 *
 * @returns {module:url~URLInfo} Information about the URL.
 *
 * @public
 */
exports.parseURL = function parseURL(url) {
  let match = /^([^:]+:)(?:\/\/(?:[^/]*@)?(\[[^\]]*\]|[^:/]+))?/.exec(url);

  if (!match) {
    throw new Error(`Failed to parse invalid URL "${url}"`);
  }

  return new URLInfo(url, match[1], match[2]);
};

let domainSuffixes =
/**
 * Yields all suffixes for a domain.
 *
 * For example, given the domain `www.example.com`, this function yields
 * `www.example.com`, `example.com`, and `com`, in that order.
 *
 * If the domain ends with a dot, the dot is ignored.
 *
 * @param {string} domain The domain.
 * @param {boolean} [includeBlank] Whether to include the blank suffix at the
 *   end.
 *
 * @generator
 * @yields {string} The next suffix for the domain.
 *
 * @package
 */
exports.domainSuffixes = function* domainSuffixes(
  domain, includeBlank = false
) {
  // Since any IP address is already expected to be normalized, there's no need
  // to validate it.
  if (isIPAddress(domain)) {
    yield domain;
  }
  else {
    if (domain[domain.length - 1] == ".") {
      domain = domain.substring(0, domain.length - 1);
    }

    while (domain != "") {
      yield domain;

      let dotIndex = domain.indexOf(".");
      domain = dotIndex == -1 ? "" : domain.substr(dotIndex + 1);
    }
  }

  if (includeBlank) {
    yield "";
  }
};

/**
 * Checks whether the given hostname refers to
 * {@link https://en.wikipedia.org/wiki/Localhost localhost}.
 *
 * If the hostname is `localhost`, `127.0.0.1`, or `[::1]`, the function
 * returns `true`; otherwise, it returns `false`.
 *
 * @param {string} hostname The hostname.
 *
 * @returns {boolean} Whether the hostname refers to localhost.
 *
 * @package
 */
exports.isLocalhost = function isLocalhost(hostname) {
  return hostname == "localhost" || hostname == "127.0.0.1" ||
         hostname == "[::1]";
};

/**
 * Checks whether URL is of HTTP or HTTPS protocol
 * @param {*} URL url to check
 * @returns {boolean} `true` if url is of HTTPS or HTTPS protocol
 */
exports.isHttpOrHttps = function(URL) {
  const protocol = URL.protocol;
  return protocol == "http:" || protocol == "https:";
};

/**
 * Checks whether the given hostname is an IP address.
 *
 * Unlike `{@link module:url~isValidIPv4Address isValidIPv4Address()}`, this
 * function only checks whether the hostname _looks like_ an IP address. Use
 * this function with valid, normalized, properly encoded (IDNA) hostnames
 * only.
 *
 * @param {string} hostname An IDNA-encoded hostname.
 *
 * @returns {boolean} Whether the hostname is an IP address.
 */
function isIPAddress(hostname) {
  // Does it look like an IPv6 address?
  if (hostname[0] == "[" && hostname[hostname.length - 1] == "]") {
    return true;
  }

  // Note: The first condition helps us avoid the more expensive regular
  // expression match for most hostnames.
  return hostname[hostname.length - 1] >= 0 &&
         /^\d+\.\d+\.\d+\.\d+$/.test(hostname);
}

/**
 * Checks whether a given address is a valid IPv4 address.
 *
 * Only a normalized IPv4 address is considered valid. e.g. `0x7f.0x0.0x0.0x1`
 * is invalid, whereas `127.0.0.1` is valid.
 *
 * @param {string} address The address to check.
 *
 * @returns {boolean} Whether the address is a valid IPv4 address.
 */
function isValidIPv4Address(address) {
  return /^(((2[0-4]|1[0-9]|[1-9])?[0-9]|25[0-5])\.){4}$/.test(address + ".");
}

/**
 * Checks whether a given hostname is valid.
 *
 * This function is used for filter validation.
 *
 * A hostname occurring in a filter must be normalized. For example,
 * <code>&#x1f642;</code> (slightly smiling face) should be normalized to
 * `xn--938h`; otherwise this function returns `false` for such a hostname.
 * Similarly, IP addresses should be normalized.
 *
 * @param {string} hostname The hostname to check.
 *
 * @returns {boolean} Whether the hostname is valid.
 */
exports.isValidHostname = function isValidHostname(hostname) {
  if (isValidIPv4Address(hostname)) {
    return true;
  }

  // This does not in fact validate the IPv6 address but it's alright for now.
  if (hostname[0] == "[" && hostname[hostname.length - 1] == "]") {
    return true;
  }

  // Based on
  // https://en.wikipedia.org/wiki/Hostname#Restrictions_on_valid_hostnames
  if (hostname[hostname.length - 1] == ".") {
    hostname = hostname.substring(0, hostname.length - 1);
  }

  if (hostname.length > 253) {
    return false;
  }

  let labels = hostname.split(".");
  for (let [index, label] of labels.entries()) {
    // Wildcards support
    if (label == "*" && index == (labels.length - 1)) {
      return true;
    }
    if (!/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(label)) {
      return false;
    }
  }

  // Based on https://tools.ietf.org/html/rfc3696#section-2
  if (!/\D/.test(labels[labels.length - 1])) {
    return false;
  }

  return true;
};

let getBaseDomain =
/**
 * Gets the base domain for the given hostname.
 *
 * @param {string} hostname
 *
 * @returns {string}
 *
 * @package
 */
exports.getBaseDomain = function getBaseDomain(hostname) {
  let slices = [];
  let cutoff = NaN;

  for (let suffix of domainSuffixes(hostname)) {
    slices.push(suffix);

    let offset = icannPublicSuffixes[suffix];
    if (!(typeof offset == "number")) {
      offset = nonIcannPublicSuffixes[suffix];
    }

    if (typeof offset == "number") {
      cutoff = slices.length - 1 - offset;
      break;
    }
  }

  if (isNaN(cutoff)) {
    return slices.length > 2 ? slices[slices.length - 2] : hostname;
  }

  if (cutoff <= 0) {
    return hostname;
  }

  return slices[cutoff];
};

/**
 * Checks whether a request's origin is different from its document's origin.
 *
 * @param {string} requestHostname The IDNA-encoded hostname of the request.
 * @param {string} documentHostname The IDNA-encoded hostname of the document.
 *
 * @returns {boolean}
 */
function isThirdParty(requestHostname, documentHostname) {
  if (requestHostname[requestHostname.length - 1] == ".") {
    requestHostname = requestHostname.substring(0, requestHostname.length - 1);
  }

  if (documentHostname[documentHostname.length - 1] == ".") {
    documentHostname =
      documentHostname.substring(0, documentHostname.length - 1);
  }

  if (requestHostname == documentHostname) {
    return false;
  }

  if (!requestHostname || !documentHostname) {
    return true;
  }

  if (isIPAddress(requestHostname) || isIPAddress(documentHostname)) {
    return true;
  }

  return getBaseDomain(requestHostname) != getBaseDomain(documentHostname);
}

let URLRequest =
/**
 * The `URLRequest` class represents a URL request.
 */
exports.URLRequest = class URLRequest {
  /**
   * @private
   */
  constructor() {}

  /**
   * The URL of the request.
   * @type {string}
   */
  get href() {
    return this._href;
  }

  /**
   * Information about the URL of the request.
   * @type {module:url~URLInfo}
   * @package
   */
  get urlInfo() {
    if (!this._urlInfo) {
      this._urlInfo = parseURL(this._href);
    }

    return this._urlInfo;
  }

  /**
   * The hostname of the document making the request.
   * @type {?string}
   */
  get documentHostname() {
    return this._documentHostname == null ? null : this._documentHostname;
  }

  /**
   * Whether this is a third-party request.
   * @type {boolean}
   */
  get thirdParty() {
    if (typeof this._thirdParty == "undefined") {
      this._thirdParty = this._documentHostname == null ? false :
        isThirdParty(this.urlInfo.hostname,
          this._documentHostname);
    }

    return this._thirdParty;
  }

  /**
   * Returns the URL of the request.
   * @returns {string}
   */
  toString() {
    return this._href;
  }

  /**
   * The lower-case version of the URL of the request.
   * @type {string}
   * @package
   */
  get lowerCaseHref() {
    if (this._lowerCaseHref == null) {
      this._lowerCaseHref = this._href.toLowerCase();
    }

    return this._lowerCaseHref;
  }
};

/**
 * Returns a `{@link module:url.URLRequest URLRequest}` object for the given
 * URL.
 *
 * @param {string|module:url~URLInfo|URL} url The URL. If this is a `string`,
 *   it must be a canonicalized URL (see
 *   `{@link module:url.parseURL parseURL()}`).
 * @param {?string} [documentHostname] The IDNA-encoded hostname of the
 *   document making the request.
 *
 * @returns {module:url.URLRequest}
 */
exports.URLRequest.from = function(url, documentHostname = null) {
  let request = new URLRequest();

  if (typeof url == "string") {
    request._href = url;
  }
  else {
    request._urlInfo = url instanceof URLInfo ? url :
      new URLInfo(url.href, url.protocol, url.hostname);
    request._href = url.href;
  }

  if (documentHostname != null) {
    request._documentHostname = documentHostname;
  }

  return request;
};

/**
 * Parses the domains part of a filter text
 * (e.g. `example.com,~mail.example.com`) into a `Map` object.
 *
 * @param {string} source The domains part of a filter text.
 * @param {string} separator The string used to separate two or more domains in
 *   the domains part of a filter text.
 *
 * @returns {?Map.<string, boolean>}
 *
 * @package
 */
exports.parseDomains = function parseDomains(source, separator) {
  let domains = domainsCache.get(source);
  if (typeof domains != "undefined") {
    return domains;
  }

  if (source[0] != "~" && !source.includes(separator)) {
    // Fast track for the common one-domain scenario.
    domains = new Map([["", false], [source, true]]);
  }
  else {
    domains = null;

    let hasIncludes = false;
    for (let domain of source.split(separator)) {
      if (domain == "") {
        continue;
      }

      let include;
      if (domain[0] == "~") {
        include = false;
        domain = domain.substring(1);
      }
      else {
        include = true;
        hasIncludes = true;
      }

      if (!domains) {
        domains = new Map();
      }

      domains.set(domain, include);
    }

    if (domains) {
      domains.set("", !hasIncludes);
    }
  }

  domainsCache.set(source, domains);

  return domains;
};

exports.hasWildcard = function hasWildcard(string) {
  return string.includes(".*");
};

/**
 * Checks whether domain URL matches wildcards mask.
 * Note: PSL is taken into account (base domain is checked actually).
 * @param {string} domain domain to check (assuming it's lower-cased)
 * @param {string} domainWithWildcards domain mask (assuming it's lower-cased)
 * @returns {boolean} `true` if domain matches the mask
 */
exports.matchesWildcards = function matchesWildcards(
  domain, domainWithWildcards) {
  // cut off the wildcard. Luckily we know exactly where it is already.
  let expectedPrefix = domainWithWildcards.slice(0, -1);

  // cut off the port if specified
  let portMatch = /^.+(:\d+)$/.exec(domain);
  if (portMatch && portMatch.length > 1) {
    domain = domain.slice(0, -portMatch[1].length);
  }

  for (let suffix of domainSuffixes(domain)) {
    if (!suffix.startsWith(expectedPrefix)) {
      continue;
    }
    let expectedTld = suffix.slice(expectedPrefix.length);
    if (typeof icannPublicSuffixes[expectedTld] == "number") {
      return true;
    }
  }

  return false;
};

exports.isValidDomainWildcard = function isValidDomainWildcard(domain) {
  // ? are not supported
  if (domain.includes("?")) {
    return false;
  }

  // multiple * are not supported
  let asteriskCount = (domain.match(/\*/g) || []).length;
  if (asteriskCount > 1) {
    return false;
  }

  if (asteriskCount == 1) {
    let pos = domain.indexOf("*");

    // * must be the last character in the string
    if (pos < (domain.length - 1)) {
      return false;
    }

    // but not the only character in the string
    if (domain.length == 1) {
      return false;
    }

    // * must be preceeded with .
    if (pos > 0 && domain[pos - 1] != ".") {
      return false;
    }
  }

  return true;
};

/**
 * Strip query string from the URL if included
 * @param {string} url URL with possible query string
 * @returns {string} URL without query string
 */
exports.stripQuery = function(url) {
  return url.split("?")[0];
};


/***/ }),

/***/ 2799:
/***/ ((__unused_webpack_module, exports) => {

"use strict";
/*
 * This file is part of Adblock Plus <https://adblockplus.org/>,
 * Copyright (C) 2006-present eyeo GmbH
 *
 * Adblock Plus is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * Adblock Plus is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with Adblock Plus.  If not, see <http://www.gnu.org/licenses/>.
 */

/** @module */



function parseVersionComponent(comp) {
  if (comp == "*") {
    return Infinity;
  }
  return parseInt(comp, 10) || 0;
}

/**
 * Compares two versions.
 *
 * @param {string} v1 The first version.
 * @param {string} v2 The second version.
 *
 * @returns {number} `-1` if `v1` is older than `v2`; `1` if `v1` is newer than
 *   `v2`; otherwise `0`.
 *
 * @package
 */
exports.compareVersions = function compareVersions(v1, v2) {
  let regexp = /^(.*?)([a-z].*)?$/i;
  let [, head1, tail1] = regexp.exec(v1);
  let [, head2, tail2] = regexp.exec(v2);
  let components1 = head1.split(".");
  let components2 = head2.split(".");

  for (let i = 0; i < components1.length ||
                  i < components2.length; i++) {
    let result = parseVersionComponent(components1[i]) -
                 parseVersionComponent(components2[i]) || 0;

    if (result < 0) {
      return -1;
    }
    else if (result > 0) {
      return 1;
    }
  }

  // Compare version suffix (e.g. 0.1alpha < 0.1b1 < 01.b2 < 0.1).
  // However, note that this is a simple string comparision, meaning: b10 < b2
  if (tail1 == tail2) {
    return 0;
  }
  if (!tail1 || tail2 && tail1 > tail2) {
    return 1;
  }
  return -1;
};


/***/ }),

/***/ 7795:
/***/ ((module, __unused_webpack_exports, __nested_webpack_require_607989__) => {

"use strict";
/* @@package_name - v@@version - @@timestamp */
/* -*- Mode: indent-tabs-mode: nil; js-indent-level: 2 -*- */
/* vim: set sts=2 sw=2 et tw=80: */
/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this
 * file, You can obtain one at http://mozilla.org/MPL/2.0/. */


if (!(globalThis.chrome && globalThis.chrome.runtime && globalThis.chrome.runtime.id)) {
  throw new Error("This script should only be loaded in a browser extension.");
}

if (!(globalThis.browser && globalThis.browser.runtime && globalThis.browser.runtime.id)) {
  const CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE = "The message port closed before a response was received.";

  // Wrapping the bulk of this polyfill in a one-time-use function is a minor
  // optimization for Firefox. Since Spidermonkey does not fully parse the
  // contents of a function until the first time it's called, and since it will
  // never actually need to be called, this allows the polyfill to be included
  // in Firefox nearly for free.
  const wrapAPIs = extensionAPIs => {
    // NOTE: apiMetadata is associated to the content of the api-metadata.json file
    // at build time by replacing the following "include" with the content of the
    // JSON file.
    const apiMetadata = __nested_webpack_require_607989__(9438);

    if (Object.keys(apiMetadata).length === 0) {
      throw new Error("api-metadata.json has not been included in browser-polyfill");
    }

    /**
     * A WeakMap subclass which creates and stores a value for any key which does
     * not exist when accessed, but behaves exactly as an ordinary WeakMap
     * otherwise.
     *
     * @param {function} createItem
     *        A function which will be called in order to create the value for any
     *        key which does not exist, the first time it is accessed. The
     *        function receives, as its only argument, the key being created.
     */
    class DefaultWeakMap extends WeakMap {
      constructor(createItem, items = undefined) {
        super(items);
        this.createItem = createItem;
      }

      get(key) {
        if (!this.has(key)) {
          this.set(key, this.createItem(key));
        }

        return super.get(key);
      }
    }

    /**
     * Returns true if the given object is an object with a `then` method, and can
     * therefore be assumed to behave as a Promise.
     *
     * @param {*} value The value to test.
     * @returns {boolean} True if the value is thenable.
     */
    const isThenable = value => {
      return value && typeof value === "object" && typeof value.then === "function";
    };

    /**
     * Creates and returns a function which, when called, will resolve or reject
     * the given promise based on how it is called:
     *
     * - If, when called, `chrome.runtime.lastError` contains a non-null object,
     *   the promise is rejected with that value.
     * - If the function is called with exactly one argument, the promise is
     *   resolved to that value.
     * - Otherwise, the promise is resolved to an array containing all of the
     *   function's arguments.
     *
     * @param {object} promise
     *        An object containing the resolution and rejection functions of a
     *        promise.
     * @param {function} promise.resolve
     *        The promise's resolution function.
     * @param {function} promise.reject
     *        The promise's rejection function.
     * @param {object} metadata
     *        Metadata about the wrapped method which has created the callback.
     * @param {boolean} metadata.singleCallbackArg
     *        Whether or not the promise is resolved with only the first
     *        argument of the callback, alternatively an array of all the
     *        callback arguments is resolved. By default, if the callback
     *        function is invoked with only a single argument, that will be
     *        resolved to the promise, while all arguments will be resolved as
     *        an array if multiple are given.
     *
     * @returns {function}
     *        The generated callback function.
     */
    const makeCallback = (promise, metadata) => {
      // In case we encounter a browser error in the callback function, we don't
      // want to lose the stack trace leading up to this point. For that reason,
      // we need to instantiate the error outside the callback function.
      let error = new Error();
      return (...callbackArgs) => {
        if (extensionAPIs.runtime.lastError) {
          error.message = extensionAPIs.runtime.lastError.message;
          promise.reject(error);
        } else if (metadata.singleCallbackArg ||
                   (callbackArgs.length <= 1 && metadata.singleCallbackArg !== false)) {
          promise.resolve(callbackArgs[0]);
        } else {
          promise.resolve(callbackArgs);
        }
      };
    };

    const pluralizeArguments = (numArgs) => numArgs == 1 ? "argument" : "arguments";

    /**
     * Creates a wrapper function for a method with the given name and metadata.
     *
     * @param {string} name
     *        The name of the method which is being wrapped.
     * @param {object} metadata
     *        Metadata about the method being wrapped.
     * @param {integer} metadata.minArgs
     *        The minimum number of arguments which must be passed to the
     *        function. If called with fewer than this number of arguments, the
     *        wrapper will raise an exception.
     * @param {integer} metadata.maxArgs
     *        The maximum number of arguments which may be passed to the
     *        function. If called with more than this number of arguments, the
     *        wrapper will raise an exception.
     * @param {boolean} metadata.singleCallbackArg
     *        Whether or not the promise is resolved with only the first
     *        argument of the callback, alternatively an array of all the
     *        callback arguments is resolved. By default, if the callback
     *        function is invoked with only a single argument, that will be
     *        resolved to the promise, while all arguments will be resolved as
     *        an array if multiple are given.
     *
     * @returns {function(object, ...*)}
     *       The generated wrapper function.
     */
    const wrapAsyncFunction = (name, metadata) => {
      return function asyncFunctionWrapper(target, ...args) {
        if (args.length < metadata.minArgs) {
          throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);
        }

        if (args.length > metadata.maxArgs) {
          throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);
        }

        return new Promise((resolve, reject) => {
          if (metadata.fallbackToNoCallback) {
            // This API method has currently no callback on Chrome, but it return a promise on Firefox,
            // and so the polyfill will try to call it with a callback first, and it will fallback
            // to not passing the callback if the first call fails.
            try {
              target[name](...args, makeCallback({resolve, reject}, metadata));
            } catch (cbError) {
              console.warn(`${name} API method doesn't seem to support the callback parameter, ` +
                           "falling back to call it without a callback: ", cbError);

              target[name](...args);

              // Update the API method metadata, so that the next API calls will not try to
              // use the unsupported callback anymore.
              metadata.fallbackToNoCallback = false;
              metadata.noCallback = true;

              resolve();
            }
          } else if (metadata.noCallback) {
            target[name](...args);
            resolve();
          } else {
            target[name](...args, makeCallback({resolve, reject}, metadata));
          }
        });
      };
    };

    /**
     * Wraps an existing method of the target object, so that calls to it are
     * intercepted by the given wrapper function. The wrapper function receives,
     * as its first argument, the original `target` object, followed by each of
     * the arguments passed to the original method.
     *
     * @param {object} target
     *        The original target object that the wrapped method belongs to.
     * @param {function} method
     *        The method being wrapped. This is used as the target of the Proxy
     *        object which is created to wrap the method.
     * @param {function} wrapper
     *        The wrapper function which is called in place of a direct invocation
     *        of the wrapped method.
     *
     * @returns {Proxy<function>}
     *        A Proxy object for the given method, which invokes the given wrapper
     *        method in its place.
     */
    const wrapMethod = (target, method, wrapper) => {
      return new Proxy(method, {
        apply(targetMethod, thisObj, args) {
          return wrapper.call(thisObj, target, ...args);
        },
      });
    };

    let hasOwnProperty = Function.call.bind(Object.prototype.hasOwnProperty);

    /**
     * Wraps an object in a Proxy which intercepts and wraps certain methods
     * based on the given `wrappers` and `metadata` objects.
     *
     * @param {object} target
     *        The target object to wrap.
     *
     * @param {object} [wrappers = {}]
     *        An object tree containing wrapper functions for special cases. Any
     *        function present in this object tree is called in place of the
     *        method in the same location in the `target` object tree. These
     *        wrapper methods are invoked as described in {@see wrapMethod}.
     *
     * @param {object} [metadata = {}]
     *        An object tree containing metadata used to automatically generate
     *        Promise-based wrapper functions for asynchronous. Any function in
     *        the `target` object tree which has a corresponding metadata object
     *        in the same location in the `metadata` tree is replaced with an
     *        automatically-generated wrapper function, as described in
     *        {@see wrapAsyncFunction}
     *
     * @returns {Proxy<object>}
     */
    const wrapObject = (target, wrappers = {}, metadata = {}) => {
      let cache = Object.create(null);
      let handlers = {
        has(proxyTarget, prop) {
          return prop in target || prop in cache;
        },

        get(proxyTarget, prop, receiver) {
          if (prop in cache) {
            return cache[prop];
          }

          if (!(prop in target)) {
            return undefined;
          }

          let value = target[prop];

          if (typeof value === "function") {
            // This is a method on the underlying object. Check if we need to do
            // any wrapping.

            if (typeof wrappers[prop] === "function") {
              // We have a special-case wrapper for this method.
              value = wrapMethod(target, target[prop], wrappers[prop]);
            } else if (hasOwnProperty(metadata, prop)) {
              // This is an async method that we have metadata for. Create a
              // Promise wrapper for it.
              let wrapper = wrapAsyncFunction(prop, metadata[prop]);
              value = wrapMethod(target, target[prop], wrapper);
            } else {
              // This is a method that we don't know or care about. Return the
              // original method, bound to the underlying object.
              value = value.bind(target);
            }
          } else if (typeof value === "object" && value !== null &&
                     (hasOwnProperty(wrappers, prop) ||
                      hasOwnProperty(metadata, prop))) {
            // This is an object that we need to do some wrapping for the children
            // of. Create a sub-object wrapper for it with the appropriate child
            // metadata.
            value = wrapObject(value, wrappers[prop], metadata[prop]);
          } else if (hasOwnProperty(metadata, "*")) {
            // Wrap all properties in * namespace.
            value = wrapObject(value, wrappers[prop], metadata["*"]);
          } else {
            // We don't need to do any wrapping for this property,
            // so just forward all access to the underlying object.
            Object.defineProperty(cache, prop, {
              configurable: true,
              enumerable: true,
              get() {
                return target[prop];
              },
              set(value) {
                target[prop] = value;
              },
            });

            return value;
          }

          cache[prop] = value;
          return value;
        },

        set(proxyTarget, prop, value, receiver) {
          if (prop in cache) {
            cache[prop] = value;
          } else {
            target[prop] = value;
          }
          return true;
        },

        defineProperty(proxyTarget, prop, desc) {
          return Reflect.defineProperty(cache, prop, desc);
        },

        deleteProperty(proxyTarget, prop) {
          return Reflect.deleteProperty(cache, prop);
        },
      };

      // Per contract of the Proxy API, the "get" proxy handler must return the
      // original value of the target if that value is declared read-only and
      // non-configurable. For this reason, we create an object with the
      // prototype set to `target` instead of using `target` directly.
      // Otherwise we cannot return a custom object for APIs that
      // are declared read-only and non-configurable, such as `chrome.devtools`.
      //
      // The proxy handlers themselves will still use the original `target`
      // instead of the `proxyTarget`, so that the methods and properties are
      // dereferenced via the original targets.
      let proxyTarget = Object.create(target);
      return new Proxy(proxyTarget, handlers);
    };

    /**
     * Creates a set of wrapper functions for an event object, which handles
     * wrapping of listener functions that those messages are passed.
     *
     * A single wrapper is created for each listener function, and stored in a
     * map. Subsequent calls to `addListener`, `hasListener`, or `removeListener`
     * retrieve the original wrapper, so that  attempts to remove a
     * previously-added listener work as expected.
     *
     * @param {DefaultWeakMap<function, function>} wrapperMap
     *        A DefaultWeakMap object which will create the appropriate wrapper
     *        for a given listener function when one does not exist, and retrieve
     *        an existing one when it does.
     *
     * @returns {object}
     */
    const wrapEvent = wrapperMap => ({
      addListener(target, listener, ...args) {
        target.addListener(wrapperMap.get(listener), ...args);
      },

      hasListener(target, listener) {
        return target.hasListener(wrapperMap.get(listener));
      },

      removeListener(target, listener) {
        target.removeListener(wrapperMap.get(listener));
      },
    });

    const onRequestFinishedWrappers = new DefaultWeakMap(listener => {
      if (typeof listener !== "function") {
        return listener;
      }

      /**
       * Wraps an onRequestFinished listener function so that it will return a
       * `getContent()` property which returns a `Promise` rather than using a
       * callback API.
       *
       * @param {object} req
       *        The HAR entry object representing the network request.
       */
      return function onRequestFinished(req) {
        const wrappedReq = wrapObject(req, {} /* wrappers */, {
          getContent: {
            minArgs: 0,
            maxArgs: 0,
          },
        });
        listener(wrappedReq);
      };
    });

    const onMessageWrappers = new DefaultWeakMap(listener => {
      if (typeof listener !== "function") {
        return listener;
      }

      /**
       * Wraps a message listener function so that it may send responses based on
       * its return value, rather than by returning a sentinel value and calling a
       * callback. If the listener function returns a Promise, the response is
       * sent when the promise either resolves or rejects.
       *
       * @param {*} message
       *        The message sent by the other end of the channel.
       * @param {object} sender
       *        Details about the sender of the message.
       * @param {function(*)} sendResponse
       *        A callback which, when called with an arbitrary argument, sends
       *        that value as a response.
       * @returns {boolean}
       *        True if the wrapped listener returned a Promise, which will later
       *        yield a response. False otherwise.
       */
      return function onMessage(message, sender, sendResponse) {
        let didCallSendResponse = false;

        let wrappedSendResponse;
        let sendResponsePromise = new Promise(resolve => {
          wrappedSendResponse = function(response) {
            didCallSendResponse = true;
            resolve(response);
          };
        });

        let result;
        try {
          result = listener(message, sender, wrappedSendResponse);
        } catch (err) {
          result = Promise.reject(err);
        }

        const isResultThenable = result !== true && isThenable(result);

        // If the listener didn't returned true or a Promise, or called
        // wrappedSendResponse synchronously, we can exit earlier
        // because there will be no response sent from this listener.
        if (result !== true && !isResultThenable && !didCallSendResponse) {
          return false;
        }

        // A small helper to send the message if the promise resolves
        // and an error if the promise rejects (a wrapped sendMessage has
        // to translate the message into a resolved promise or a rejected
        // promise).
        const sendPromisedResult = (promise) => {
          promise.then(msg => {
            // send the message value.
            sendResponse(msg);
          }, error => {
            // Send a JSON representation of the error if the rejected value
            // is an instance of error, or the object itself otherwise.
            let message;
            if (error && (error instanceof Error ||
                typeof error.message === "string")) {
              message = error.message;
            } else {
              message = "An unexpected error occurred";
            }

            sendResponse({
              __mozWebExtensionPolyfillReject__: true,
              message,
            });
          }).catch(err => {
            // Print an error on the console if unable to send the response.
            console.error("Failed to send onMessage rejected reply", err);
          });
        };

        // If the listener returned a Promise, send the resolved value as a
        // result, otherwise wait the promise related to the wrappedSendResponse
        // callback to resolve and send it as a response.
        if (isResultThenable) {
          sendPromisedResult(result);
        } else {
          sendPromisedResult(sendResponsePromise);
        }

        // Let Chrome know that the listener is replying.
        return true;
      };
    });

    const wrappedSendMessageCallback = ({reject, resolve}, reply) => {
      if (extensionAPIs.runtime.lastError) {
        // Detect when none of the listeners replied to the sendMessage call and resolve
        // the promise to undefined as in Firefox.
        // See https://github.com/mozilla/webextension-polyfill/issues/130
        if (extensionAPIs.runtime.lastError.message === CHROME_SEND_MESSAGE_CALLBACK_NO_RESPONSE_MESSAGE) {
          resolve();
        } else {
          reject(new Error(extensionAPIs.runtime.lastError.message));
        }
      } else if (reply && reply.__mozWebExtensionPolyfillReject__) {
        // Convert back the JSON representation of the error into
        // an Error instance.
        reject(new Error(reply.message));
      } else {
        resolve(reply);
      }
    };

    const wrappedSendMessage = (name, metadata, apiNamespaceObj, ...args) => {
      if (args.length < metadata.minArgs) {
        throw new Error(`Expected at least ${metadata.minArgs} ${pluralizeArguments(metadata.minArgs)} for ${name}(), got ${args.length}`);
      }

      if (args.length > metadata.maxArgs) {
        throw new Error(`Expected at most ${metadata.maxArgs} ${pluralizeArguments(metadata.maxArgs)} for ${name}(), got ${args.length}`);
      }

      return new Promise((resolve, reject) => {
        const wrappedCb = wrappedSendMessageCallback.bind(null, {resolve, reject});
        args.push(wrappedCb);
        apiNamespaceObj.sendMessage(...args);
      });
    };

    const staticWrappers = {
      devtools: {
        network: {
          onRequestFinished: wrapEvent(onRequestFinishedWrappers),
        },
      },
      runtime: {
        onMessage: wrapEvent(onMessageWrappers),
        onMessageExternal: wrapEvent(onMessageWrappers),
        sendMessage: wrappedSendMessage.bind(null, "sendMessage", {minArgs: 1, maxArgs: 3}),
      },
      tabs: {
        sendMessage: wrappedSendMessage.bind(null, "sendMessage", {minArgs: 2, maxArgs: 3}),
      },
    };
    const settingMetadata = {
      clear: {minArgs: 1, maxArgs: 1},
      get: {minArgs: 1, maxArgs: 1},
      set: {minArgs: 1, maxArgs: 1},
    };
    apiMetadata.privacy = {
      network: {"*": settingMetadata},
      services: {"*": settingMetadata},
      websites: {"*": settingMetadata},
    };

    return wrapObject(extensionAPIs, staticWrappers, apiMetadata);
  };

  // The build process adds a UMD wrapper around this file, which makes the
  // `module` variable available.
  module.exports = wrapAPIs(chrome);
} else {
  module.exports = globalThis.browser;
}


/***/ }),

/***/ 7065:
/***/ ((__unused_webpack___webpack_module__, __nested_webpack_exports__, __nested_webpack_require_630191__) => {

"use strict";
/* harmony export */ __nested_webpack_require_630191__.d(__nested_webpack_exports__, {
/* harmony export */   A: () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */

// `global.browser` is expected to be set in test environment.
// see "test/unit/environment.js"

// in webext-sdk build webpack replaces it with "webext-browser.js" content.
// so in the production code it's "webextension-polyfill" browser.
// see "./webext-browser.js"

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (globalThis.browser);


/***/ }),

/***/ 4189:
/***/ ((__unused_webpack___webpack_module__, __nested_webpack_exports__, __nested_webpack_require_631510__) => {

"use strict";
__nested_webpack_require_631510__.r(__nested_webpack_exports__);
/* harmony export */ __nested_webpack_require_631510__.d(__nested_webpack_exports__, {
/* harmony export */   addonBundledSubscriptions: () => (/* binding */ addonBundledSubscriptions),
/* harmony export */   addonBundledSubscriptionsPath: () => (/* binding */ addonBundledSubscriptionsPath),
/* harmony export */   addonName: () => (/* binding */ addonName),
/* harmony export */   addonVersion: () => (/* binding */ addonVersion),
/* harmony export */   application: () => (/* binding */ application),
/* harmony export */   applicationVersion: () => (/* binding */ applicationVersion),
/* harmony export */   getBrowserVersion: () => (/* binding */ getBrowserVersion),
/* harmony export */   initializeDefaultAddonInfo: () => (/* binding */ initializeDefaultAddonInfo),
/* harmony export */   isEdge: () => (/* binding */ isEdge),
/* harmony export */   isFirefox: () => (/* binding */ isFirefox),
/* harmony export */   manifestVersion: () => (/* binding */ manifestVersion),
/* harmony export */   platform: () => (/* binding */ platform),
/* harmony export */   platformVersion: () => (/* binding */ platformVersion),
/* harmony export */   sdkName: () => (/* binding */ sdkName),
/* harmony export */   sdkVersion: () => (/* binding */ sdkVersion),
/* harmony export */   setAddonInfo: () => (/* binding */ setAddonInfo)
/* harmony export */ });
/* harmony import */ var _browser_js__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_631510__(7065);
/* harmony import */ var adblockpluscore_lib_recommendations_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_631510__(5056);
/* harmony import */ var adblockpluscore_lib_features_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_631510__(1433);
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */






let addonName;
let addonVersion;
let addonBundledSubscriptions;
let addonBundledSubscriptionsPath;
let application;
let applicationVersion;
let platform;
let platformVersion;
let manifestVersion;

let sdkName = "eyeo-webext-ad-filtering-solution";
let sdkVersion = "1.23.1";

initializeDefaultAddonInfo();

function getBrowserVersion() {
  return applicationVersion.split(".").map(str => parseInt(str, 10));
}

function isFirefox() {
  return application.includes("firefox");
}

function isEdge() {
  return application.includes("edg");
}

function initializeDefaultAddonInfo() {
  let manifest = _browser_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.runtime.getManifest();

  addonName = manifest.short_name || manifest.name;
  addonVersion = manifest.version;
  application = "unknown";
  applicationVersion = "0";
  platformVersion = "0";
  manifestVersion = String(manifest.manifest_version);

  if (typeof netscape != "undefined") {
    platform = "gecko";

    let match = /\brv:([^;)]+)/.exec(navigator.userAgent);
    if (match) {
      platformVersion = match[1];
    }

    _browser_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.runtime.getBrowserInfo().then(browserInfo => {
      application = browserInfo.name.toLowerCase();
      applicationVersion = browserInfo.version;
    });
  }
  else {
    platform = "chromium";
    parseChromiumUserAgent();
  }
}

function parseChromiumUserAgent() {
  let regexp = /(\S+)\/(\S+)(?:\s*\(.*?\))?/g;
  let match;

  while (match = regexp.exec(navigator.userAgent)) {
    let [, app, version] = match;

    // For compatibility with legacy websites, Chrome's UA
    // also includes a Mozilla, AppleWebKit and Safari tokens.
    // Any further name/version pair indicates a fork.
    if (app == "Mozilla" || app == "AppleWebKit" || app == "Safari") {
      continue;
    }

    if (app == "Chrome") {
      platformVersion = version;
      if (application != "unknown") {
        continue;
      }
    }

    application = app == "OPR" ? "opera" : app.toLowerCase();
    applicationVersion = version;
  }
}

function setAddonInfo(addonInfo) {
  let warnings = [];

  if (_browser_js__WEBPACK_IMPORTED_MODULE_0__/* ["default"] */ .A.declarativeNetRequest) {
    if (!addonInfo) {
      throw new Error("No addonInfo provided to EWE.start");
    }

    if (!addonInfo.bundledSubscriptions) {
      throw new Error("No `bundledSubscriptions` provided");
    }

    if (!addonInfo.bundledSubscriptionsPath) {
      throw new Error("No `bundledSubscriptionsPath` provided");
    }
  }

  if (!addonInfo) {
    return {warnings};
  }

  if (addonInfo.name) {
    addonName = addonInfo.name;
  }
  if (addonInfo.version) {
    addonVersion = addonInfo.version;
  }
  if (addonInfo.manifestVersion) {
    manifestVersion = addonInfo.manifestVersion;
  }

  addonBundledSubscriptions = addonInfo.bundledSubscriptions;
  addonBundledSubscriptionsPath = addonInfo.bundledSubscriptionsPath;

  if (addonBundledSubscriptions &&
      addonBundledSubscriptions.length > 0) {
    (0,adblockpluscore_lib_recommendations_js__WEBPACK_IMPORTED_MODULE_1__.setRecommendations)(addonBundledSubscriptions);
  }

  if (addonInfo.featureFlags) {
    try {
      adblockpluscore_lib_features_js__WEBPACK_IMPORTED_MODULE_2__.setFeatureFlags(addonInfo.featureFlags);
    }
    catch (e) {
      warnings.push(e.message);
    }
  }

  return {warnings};
}


/***/ }),

/***/ 8630:
/***/ ((__unused_webpack___webpack_module__, __nested_webpack_exports__, __nested_webpack_require_637425__) => {

"use strict";

// EXPORTS
__nested_webpack_require_637425__.d(__nested_webpack_exports__, {
  IO: () => (/* binding */ IO),
  C: () => (/* binding */ getDatabase)
});

;// ./src/background/idb.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */

const DB_NAME = "EWE";
const DB_VERSION = 1;

function openDatabase() {
  return new Promise((resolve, reject) => {
    let request = indexedDB.open(DB_NAME, DB_VERSION);

    request.onupgradeneeded = event => {
      let db = event.target.result;
      db.createObjectStore("file-entries");
      db.createObjectStore("file-contents", {autoIncrement: true});
    };

    request.onsuccess = event => resolve(event.target.result);
    request.onerror = event => reject(event.target.error);
  });
}

;// ./src/background/io-idb.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */



let database;

function clearContent(filename, entryStore, contentStore) {
  entryStore.get(filename).onsuccess = event => {
    let entry = event.target.result;
    if (entry && entry.content) {
      contentStore.delete(entry.content);
    }
  };
}

function saveFile(db, filename, lines, lastModified) {
  return new Promise((resolve, reject) => {
    let data = new TextEncoder().encode(Array.from(lines).join("\n"));
    let tx = db.transaction(["file-entries", "file-contents"], "readwrite");
    let entryStore = tx.objectStore("file-entries");
    let contentStore = tx.objectStore("file-contents");

    clearContent(filename, entryStore, contentStore);
    contentStore.add(data).onsuccess = event => {
      let content = event.target.result;
      entryStore.put({lastModified, content}, filename);
    };

    tx.oncomplete = () => resolve();
    tx.onerror = tx.onabort = event => reject(event.target.error);
  });
}

async function initIO(db) {
  database = db;
}

function getDatabase() {
  if (!database) {
    throw new Error("Database hasn't been opened. Did you call start()?");
  }
  return database;
}

// IO implementation that is using `IndexedDB`
let IO = {
  /**
   * Reads text lines from a file.
   * @param {string} filename
   *    Name of the file to be read
   * @param {TextSink} listener
   *    Function that will be called for each line in the file
   * @return {Promise}
   *    Promise to be resolved or rejected once the operation is completed
   */
  async readFromFile(filename, listener) {
    let data = await new Promise((resolve, reject) => {
      let db = getDatabase();
      let tx = db.transaction(["file-entries", "file-contents"], "readonly");
      let entryStore = tx.objectStore("file-entries");
      let contentStore = tx.objectStore("file-contents");

      entryStore.get(filename).onsuccess = entryEvent => {
        let entry = entryEvent.target.result;
        if (!entry || !entry.content) {
          reject(new Error("File does not exist"));
          return;
        }

        contentStore.get(entry.content).onsuccess = contentEvent => {
          resolve(contentEvent.target.result);
        };
      };

      tx.onerror = tx.onabort = event => reject(event.target.error);
    });

    let decoder = new TextDecoder();
    let start = 0;

    while (true) {
      let index = data.indexOf(10 /* newline character */, start + 1000);
      let end = index != -1 ? index : data.length;
      let text = decoder.decode(data.subarray(start, end));

      for (let line of text.split("\n")) {
        listener(line);
      }

      if (index == -1) {
        break;
      }

      start = index + 1;
    }
  },

  /**
   * Writes text lines to a file.
   * @param {string} filename
   *    Name of the file to be written
   * @param {Iterable<string>} lines
   *    An array-like or iterable object containing the lines (without line
   *    endings)
   * @return {Promise}
   *    Promise to be resolved or rejected once the operation is completed
   */
  async writeToFile(filename, lines) {
    await saveFile(getDatabase(), filename, lines, Date.now());
  },

  /**
   * Renames a file.
   * @param {string} oldName
   *    Name of the file to be renamed
   * @param {string} newName
   *    New file name, will be overwritten if exists
   * @return {Promise}
   *    Promise to be resolved or rejected once the operation is completed
   */
  renameFile(oldName, newName) {
    return new Promise((resolve, reject) => {
      let db = getDatabase();
      let tx = db.transaction(["file-entries", "file-contents"], "readwrite");
      let entryStore = tx.objectStore("file-entries");
      let contentStore = tx.objectStore("file-contents");

      entryStore.get(oldName).onsuccess = event => {
        let entry = event.target.result;
        if (!entry) {
          reject(new Error("File does not exist"));
          return;
        }

        if (oldName == newName) {
          return;
        }

        clearContent(newName, entryStore, contentStore);
        entryStore.put(entry, newName);
        entryStore.delete(oldName);
      };

      tx.oncomplete = () => resolve();
      tx.onerror = tx.onabort = event => reject(event.target.error);
    });
  },

  /**
   * Retrieves file metadata.
   * @param {string} filename
   *    Name of the file to be looked up
   * @return {Promise<StatData>}
   *    Promise to be resolved with file metadata once the operation is
   *    completed
   */
  statFile(filename) {
    return new Promise((resolve, reject) => {
      let db = getDatabase();
      let tx = db.transaction(["file-entries"], "readonly");
      let store = tx.objectStore("file-entries");

      store.get(filename).onsuccess = event => {
        let entry = event.target.result;
        let exists = false;
        let lastModified;

        if (entry) {
          exists = true;
          lastModified = entry.lastModified;
        }

        resolve({exists, lastModified});
      };

      tx.onerror = tx.onabort = event => reject(event.target.error);
    });
  },

  /**
   * Initialize the storage
   * @return {Promise} initialization promise
   */
  async initialize() {
    let db = await openDatabase();
    await initIO(db);
  }
};


/***/ }),

/***/ 1252:
/***/ ((__unused_webpack___webpack_module__, __nested_webpack_exports__, __nested_webpack_require_644842__) => {

"use strict";
// ESM COMPAT FLAG
__nested_webpack_require_644842__.r(__nested_webpack_exports__);

// EXPORTS
__nested_webpack_require_644842__.d(__nested_webpack_exports__, {
  IO: () => (/* binding */ io_IO),
  readFileContent: () => (/* binding */ readFileContent)
});

// EXTERNAL MODULE: ./src/background/browser.js
var browser = __nested_webpack_require_644842__(7065);
// EXTERNAL MODULE: ./src/background/io-idb.js + 1 modules
var io_idb = __nested_webpack_require_644842__(8630);
;// ./src/background/io-bsl.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */



const KEY_PREFIX = "ewe:file:";

function fileToKey(fileName) {
  return KEY_PREFIX + fileName;
}

async function loadFile(fileName) {
  let key = fileToKey(fileName);
  let items = await browser/* default */.A.storage.local.get(key);
  let entry = items[key];
  if (entry) {
    return entry;
  }
  throw {type: "NoSuchFile"};
}

function saveFile(fileName, data) {
  return browser/* default */.A.storage.local.set({
    [fileToKey(fileName)]: {
      content: Array.from(data),
      lastModified: Date.now()
    }
  });
}

// IO implementation that is using `browser.storage.local` API
let IO = {
  /**
   * Reads text lines from a file.
   * @param {string} filename
   *    Name of the file to be read
   * @param {TextSink} listener
   *    Function that will be called for each line in the file
   * @return {Promise}
   *    Promise to be resolved or rejected once the operation is completed
   */
  async readFromFile(filename, listener) {
    let entry = await loadFile(filename);
    for (let line of entry.content) {
      listener(line);
    }
  },

  /**
   * Writes text lines to a file.
   * @param {string} filename
   *    Name of the file to be written
   * @param {Iterable.<string>} data
   *    An array-like or iterable object containing the lines (without line
   *    endings)
   * @return {Promise}
   *    Promise to be resolved or rejected once the operation is completed
   */
  writeToFile(filename, data) {
    return saveFile(filename, data);
  },

  /**
   * Renames a file.
   * @param {string} fromFile
   *    Name of the file to be renamed
   * @param {string} newName
   *    New file name, will be overwritten if exists
   * @return {Promise}
   *    Promise to be resolved or rejected once the operation is completed
   */
  async renameFile(fromFile, newName) {
    let entry = await loadFile(fromFile);
    await browser/* default */.A.storage.local.set({[fileToKey(newName)]: entry});
    await browser/* default */.A.storage.local.remove(fileToKey(fromFile));
  },

  /**
   * Retrieves file metadata.
   * @param {string} filename
   *    Name of the file to be looked up
   * @return {Promise.<StatData>}
   *    Promise to be resolved with file metadata once the operation is
   *    completed
   */
  async statFile(filename) {
    try {
      let entry = await loadFile(filename);
      return {
        exists: true,
        lastModified: entry.lastModified
      };
    }
    catch (error) {
      if (error.type == "NoSuchFile") {
        return Promise.resolve({exists: false});
      }
      throw error;
    }
  },

  async fixPrefixes() {
    let data = await browser/* default */.A.storage.local.get();
    for (let key in data) {
      let value = data[key];

      // The order of prefixes matters:
      // the most important should be the last
      // to override the existing values jic.
      for (let eachPrefix of ["abp:file:", "file:"]) {
        if (key.startsWith(eachPrefix)) {
          let obj = {};
          obj[KEY_PREFIX + key.substring(eachPrefix.length)] = value;
          await browser/* default */.A.storage.local.set(obj);
          await browser/* default */.A.storage.local.remove(key);
        }
      }
    }
  },

  /**
   * Initialize the storage
   * @return {Promise} initialization promise
   */
  async initialize() {
    // Migrating the files with 'file:' and `abp:file:` prefixes
    // to 'ewe:file:' stored in `browser.storage.local` in Firefox private mode.
    // See https://gitlab.com/eyeo/adblockplus/abc/webext-ad-filtering-solution/-/issues/369
    await this.fixPrefixes();
  }
};


;// ./src/background/io.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */






let io;
let initializationPromise;

function readFileContent(path) {
  const url = browser/* default */.A.runtime.getURL(path);
  return fetch(url).then(content => content.text());
}

// This is a facade implementation that forwards to the current concrete
// implementation of IO. By default IndexedDB is used but if it's unavailable
// a fallback to `browser.storage.local` is used.
let io_IO = {
  /**
   * Reads text lines from a file.
   * @param {string} filename
   *    Name of the file to be read
   * @param {TextSink} listener
   *    Function that will be called for each line in the file
   * @return {Promise}
   *    Promise to be resolved or rejected once the operation is completed
   */
  async readFromFile(filename, listener) {
    return io.readFromFile(filename, listener);
  },

  /**
   * Writes text lines to a file.
   * @param {string} filename
   *    Name of the file to be written
   * @param {Iterable<string>} lines
   *    An array-like or iterable object containing the lines (without line
   *    endings)
   * @return {Promise}
   *    Promise to be resolved or rejected once the operation is completed
   */
  async writeToFile(filename, lines) {
    return io.writeToFile(filename, lines);
  },

  /**
   * Renames a file.
   * @param {string} oldName
   *    Name of the file to be renamed
   * @param {string} newName
   *    New file name, will be overwritten if exists
   * @return {Promise}
   *    Promise to be resolved or rejected once the operation is completed
   */
  renameFile(oldName, newName) {
    return io.renameFile(oldName, newName);
  },

  /**
   * Retrieves file metadata.
   * @param {string} filename
   *    Name of the file to be looked up
   * @return {Promise<StatData>}
   *    Promise to be resolved with file metadata once the operation is
   *    completed
   */
  statFile(filename) {
    return io.statFile(filename);
  },

  /**
   * Initialize the storage
   * @return {Promise} initialization promise
   */
  initialize() {
    if (!initializationPromise) {
      initializationPromise = (async() => {
        io = io_idb.IO;
        try {
          await io.initialize();
        }
        catch (e) {
          if (e instanceof DOMException &&
              e.name == "InvalidStateError") {
            // fall back to `browser.storage.local` API if IndexedDb
            // is unavailable, eg. in Firefox in private mode. See
            // https://gitlab.com/eyeo/adblockplus/abc/webext-ad-filtering-solution/-/issues/231
            io = IO;
            try {
              await io.initialize();
            }
            catch {
              initializationPromise = null;
              throw e;
            }
          }
          else if (e.message.includes("Internal error opening backing store for indexedDB.open")) {
            initializationPromise = null;
            throw new Error("IndexedDB init error", {cause: e});
          }
          else {
            initializationPromise = null;
            throw e;
          }
        }
      })();
    }

    return initializationPromise;
  }
};


/***/ }),

/***/ 35:
/***/ ((__unused_webpack___webpack_module__, __nested_webpack_exports__, __nested_webpack_require_653471__) => {

"use strict";
__nested_webpack_require_653471__.r(__nested_webpack_exports__);
/* harmony export */ __nested_webpack_require_653471__.d(__nested_webpack_exports__, {
/* harmony export */   CDP_OPTED_IN: () => (/* binding */ CDP_OPTED_IN),
/* harmony export */   CDP_OPTED_IN_BY_USER: () => (/* binding */ CDP_OPTED_IN_BY_USER),
/* harmony export */   CDP_OPTED_OUT: () => (/* binding */ CDP_OPTED_OUT),
/* harmony export */   CDP_OPTED_OUT_BY_USER: () => (/* binding */ CDP_OPTED_OUT_BY_USER),
/* harmony export */   MIGRATED_TO_MV2: () => (/* binding */ MIGRATED_TO_MV2),
/* harmony export */   MIGRATED_TO_MV3: () => (/* binding */ MIGRATED_TO_MV3),
/* harmony export */   MIGRATED_TO_MV3_WITHOUT_DIFF: () => (/* binding */ MIGRATED_TO_MV3_WITHOUT_DIFF),
/* harmony export */   Prefs: () => (/* binding */ Prefs),
/* harmony export */   awaitSavingComplete: () => (/* binding */ awaitSavingComplete),
/* harmony export */   defaults: () => (/* binding */ defaults),
/* harmony export */   init: () => (/* binding */ init),
/* harmony export */   migratePrefs: () => (/* binding */ migratePrefs)
/* harmony export */ });
/* harmony import */ var webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_653471__(7795);
/* harmony import */ var adblockpluscore_lib_events_js__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_653471__(8583);
/* harmony import */ var adblockpluscore_lib_time_js__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_653471__(103);
/* harmony import */ var _io_idb_js__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_653471__(8630);
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */






// MV2
// (all the subscriptions are downloadable)
const MIGRATED_TO_MV2 = 0;

// MV3 without diff updates
// (anti-cv subscription is the only `FullUpdatableSubscription`)
const MIGRATED_TO_MV3_WITHOUT_DIFF = 1;

// MV3 with diff updates
// (all subscriptions are either
// `CountableSubscription` or `DiffUpdatableSubscriptions`)
const MIGRATED_TO_MV3 = 2;

const CDP_OPTED_IN = 0;
const CDP_OPTED_OUT = 1;
const CDP_OPTED_IN_BY_USER = 2;
const CDP_OPTED_OUT_BY_USER = 3;

const defaults = Object.create({
  analytics: {trustedHosts: ["adblockplus.org",
                             "notification.adblockplus.org",
                             "easylist-downloads.adblockplus.org"]},
  dynamic_filters: [],
  notificationdata: {},
  notifications_ignoredcategories: [],
  notificationurl: "https://notification.adblockplus.org/notification.json",
  notifications_initial_delay: 1000, // 1 s
  patternsbackupinterval: 24,
  patternsbackups: 0,
  ruleset_updates: [],
  savestats: false,
  show_statsinpopup: true,
  subscriptions_autoupdate: true,
  subscriptions_fallbackerrors: 5,
  subscriptions_fallbackurl: "https://adblockplus.org/getSubscription?version=%VERSION%&url=%SUBSCRIPTION%&downloadURL=%URL%&error=%ERROR%&responseStatus=%RESPONSESTATUS%",
  subscriptions_initial_delay: 1000, // 1 s
  subscriptions_check_interval: 1 * adblockpluscore_lib_time_js__WEBPACK_IMPORTED_MODULE_2__.MILLIS_IN_HOUR,
  migration_filter_errors: [],
  migration_subscription_errors: [],
  migration_state: MIGRATED_TO_MV2,
  edge_one_click_allowlisting_delay: 2 * adblockpluscore_lib_time_js__WEBPACK_IMPORTED_MODULE_2__.MILLIS_IN_SECOND,
  cdp_opt_in_out: CDP_OPTED_IN,
  cdp_session_expiration_interval: 30 * adblockpluscore_lib_time_js__WEBPACK_IMPORTED_MODULE_2__.MILLIS_IN_MINUTE,
  telemetry_opt_out: true
});

let Prefs = {
  on(preference, callback) {
    eventEmitter.on(preference, callback);
  },
  off(preference, callback) {
    eventEmitter.off(preference, callback);
  }
};

const KEY_PREFIX = "abp:pref:";

let eventEmitter = new adblockpluscore_lib_events_js__WEBPACK_IMPORTED_MODULE_1__.EventEmitter();
let overrides = new Map();
let initializationPromise;

function keyToPref(key) {
  return key.startsWith(KEY_PREFIX) ? key.substr(KEY_PREFIX.length) : null;
}

function prefToKey(pref) {
  return `${KEY_PREFIX}${pref}`;
}

let activeSaveActions = new Set();

function trackSaving(savePromise) {
  activeSaveActions.add(savePromise);
  savePromise.finally(() => activeSaveActions.delete(savePromise));
  return savePromise;
}

async function awaitSavingComplete() {
  if (Promise.allSettled) {
    await Promise.allSettled(activeSaveActions);
    return;
  }

  // Promise.allSettled isn't supported in oldest Firefox.
  // It was added in Firefox 71.
  for (let saveAction of activeSaveActions) {
    try {
      await saveAction;
    }
    catch (e) {
    }
  }
}

function addPreference(preference) {
  Object.defineProperty(Prefs, preference, {
    get() {
      if (overrides.has(preference)) {
        return overrides.get(preference);
      }

      let defaultValue = defaults[preference];
      // Arrays and Objects are deeply copied
      // to avoid modifications of `defaults`
      return Array.isArray(defaultValue) ||
        (typeof defaultValue === "object" && defaultValue !== null) ?
          JSON.parse(JSON.stringify(defaultValue)) :
          defaultValue;
    },
    set(value) {
      let key = prefToKey(preference);
      if (value === defaults[preference]) {
        overrides.delete(preference);
        trackSaving(webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.storage.local.remove(key));
        return;
      }

      overrides.set(preference, value);
      trackSaving(webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.storage.local.set({[key]: value}));
    },
    enumerable: true
  });
}

async function migratePrefs(db) {
  return new Promise((resolve, reject) => {
    let tx = db.transaction(["prefs"], "readwrite");
    tx.oncomplete = () => resolve();
    tx.onerror = tx.onabort = event => reject(event.target.error);

    let prefsStore;
    try {
      prefsStore = tx.objectStore("prefs");
    }
    catch (e) {
      // no "prefs" object store
      return;
    }
    prefsStore.getAll().onsuccess = event => {
      for (let {name, value} of event.target.result) {
        savePreference(name, value);
      }
      prefsStore.clear();
    };
  });
}

function savePreference(name, value) {
  let key = prefToKey(name);
  overrides.set(name, value);
  trackSaving(webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.storage.local.set({[key]: value}));
}

async function loadPreferences() {
  let prefs = Object.keys(Object.getPrototypeOf(defaults));
  prefs.forEach(addPreference);

  let items = await webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__.storage.local.get(prefs.map(prefToKey));
  for (let key in items) {
    overrides.set(keyToPref(key), items[key]);
  }
}

async function init() {
  if (!initializationPromise) {
    initializationPromise = (async() => {
      try {
        let db = (0,_io_idb_js__WEBPACK_IMPORTED_MODULE_3__/* .getDatabase */ .C)();
        await migratePrefs(db);
      }
      catch (e) {
        // db might be unavailable
      }

      await loadPreferences();
    })();
  }

  return initializationPromise;
}


/***/ }),

/***/ 4693:
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('[{"id":"B7D76369-DD19-4602-80E8-2E32DDB490AC","type":"ads","languages":["id","ms"],"title":"ABPindo+EasyList","homepage":"http://abpindo.blogspot.com/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","A4A32212-E6BD-45F6-AD0F-E0FD18E8537B"],"url":"https://easylist-downloads.adblockplus.org/v3/full/abpindo+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/abpindo+easylist.txt"},{"id":"1C571EC7-6E52-47CC-B04A-4B3008D0AEBE","type":"ads","languages":["vi"],"title":"ABPVN List+EasyList","homepage":"http://abpvn.com/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","03648752-31EE-4FD0-85C1-20B07C5551C3"],"url":"https://easylist-downloads.adblockplus.org/v3/full/abpvn+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/abpvn+easylist.txt"},{"id":"E22C3B40-DC90-49D7-8BF5-E60904AB159A","type":"ads","languages":["bg"],"title":"Bulgarian list+EasyList","homepage":"https://stanev.org/abp/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","1638B159-F64A-4307-84E7-16AB08ED409E"],"url":"https://easylist-downloads.adblockplus.org/v3/full/bulgarian_list+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/bulgarian_list+easylist.txt"},{"id":"96932CD9-6DDF-4D97-B92F-FDF747B6FAA2","type":"ads","languages":["no","nb","nn","da","is","fo","kl","sv","fi"],"title":"Dandelion Sprout\'s Nordic Filters+EasyList","homepage":"https://github.com/DandelionSprout/adfilt","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","6D489E8D-E61C-444C-BBC5-44741773ADC2"],"url":"https://easylist-downloads.adblockplus.org/v3/full/dandelion_sprouts_nordic_filters+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/dandelion_sprouts_nordic_filters+easylist.txt"},{"id":"8C13E995-8F06-4927-BEA7-6C845FB7EEBF","type":"ads","languages":["en"],"title":"EasyList","homepage":"https://easylist.to/","url":"https://easylist-downloads.adblockplus.org/v3/full/easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylist.txt"},{"id":"9BD3EA2F-889D-4CC3-B680-CF484F2BD1B9","type":"ads","languages":["zh"],"title":"EasyList China+EasyList","homepage":"https://github.com/easylist/easylistchina/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","1D7F590C-B752-4BA0-9473-6A26DE1326B1"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistchina+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistchina+easylist.txt"},{"id":"4B6CE485-30AB-4213-AD17-504B3F2D2825","type":"ads","languages":["cs","sk"],"title":"EasyList Czech and Slovak+EasyList","homepage":"https://adblock.sk/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","2D8C4D88-34A0-4259-9098-30D28BA674BC"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistczechslovak+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistczechslovak+easylist.txt"},{"id":"A4B88FB6-E5E5-417F-8A49-20B8244995FD","type":"ads","languages":["nl"],"title":"EasyList Dutch+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","CB94E27D-6CD1-4DB9-83D9-6B7F1A3555F6"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistdutch+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistdutch+easylist.txt"},{"id":"0CD3D105-D3B3-4652-8489-94163DE9A08F","type":"ads","languages":["de"],"title":"EasyList Germany+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","4337FB2B-A95C-44D5-B78D-11AD40F7711B"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistgermany+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistgermany+easylist.txt"},{"id":"07549D8B-F06F-4D9D-A567-929AA59E9D1D","type":"ads","languages":["he"],"title":"EasyList Hebrew+EasyList","homepage":"https://github.com/easylist/EasyListHebrew","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","AE0D9320-665E-407D-B692-1A85AE481F34"],"url":"https://easylist-downloads.adblockplus.org/v3/full/israellist+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/israellist+easylist.txt"},{"id":"BBC07C05-66F1-42EC-BD4D-7AD495FAC84B","type":"ads","languages":["it"],"title":"EasyList Italy+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","2F0A4F0D-DF16-40D0-B0E0-5EB6791EC119"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistitaly+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistitaly+easylist.txt"},{"id":"CBE50FA2-DE3F-480C-B1D7-04289391C033","type":"ads","languages":["lt"],"title":"EasyList Lithuania+EasyList","homepage":"https://github.com/EasyList-Lithuania/easylist_lithuania","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","E89B3C08-2DED-40EA-8EE1-339B90D7B451"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistlithuania+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistlithuania+easylist.txt"},{"id":"3D2C09D0-DF1C-4C8E-9947-A23DCEAF8F8B","type":"ads","languages":["pl"],"title":"EasyList Polish+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","9F743FCD-801B-41D0-830F-5A4EA995216E"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistpolish+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistpolish+easylist.txt"},{"id":"14DF7BE6-9675-4E07-987A-D8A1000F9FEF","type":"ads","languages":["pt"],"title":"EasyList Portuguese+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","A41441EE-BF7C-4A48-9A43-42CCEA2B2A1D"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistportuguese+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistportuguese+easylist.txt"},{"id":"C3D13A19-3E8D-41F5-AD64-0F3B36DDE128","type":"ads","languages":["es"],"title":"EasyList Spanish+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","C8C1AA76-15B4-4CA3-8A9C-AD38D6AFCAEC"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easylistspanish+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easylistspanish+easylist.txt"},{"id":"25A31255-AB36-48A4-9086-06192DE71119","type":"ads","languages":["bn","gu","hi","pa","as","mr","ml","te","kn","or","ne","si"],"title":"IndianList+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","9FAA2906-CD5C-4520-BDC4-4E098B7EA228"],"url":"https://easylist-downloads.adblockplus.org/v3/full/indianlist+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/indianlist+easylist.txt"},{"id":"2708BCB7-2E45-41BC-B517-1730CF532F89","type":"ads","languages":["ko"],"title":"KoreanList+EasyList","homepage":"https://easylist.to/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","BCE2062F-0D99-4861-A1F7-E3DFEA6DAB69"],"url":"https://easylist-downloads.adblockplus.org/v3/full/koreanlist+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/koreanlist+easylist.txt"},{"id":"950C88EA-2DD1-42E3-B2A2-2DF2ED15563A","type":"ads","languages":["lv"],"title":"Latvian List+EasyList","homepage":"https://forums.lanik.us/viewforum.php?f=99-latvian-list","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","51893C6C-F39E-43C5-A2EF-9545E388A2CE"],"url":"https://easylist-downloads.adblockplus.org/v3/full/latvianlist+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/latvianlist+easylist.txt"},{"id":"684A25C6-6B5D-458A-8A2B-BAC0A12B0B15","type":"ads","languages":["ar"],"title":"Liste AR+Liste FR+EasyList","homepage":"https://forums.lanik.us/viewforum.php?f=98","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","8D421590-1A68-4B68-BE50-04E17C09460E","3D60E303-1141-4775-B800-834177922876"],"url":"https://easylist-downloads.adblockplus.org/v3/full/liste_ar+liste_fr+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/liste_ar+liste_fr+easylist.txt"},{"id":"2CEA1481-C29C-44F1-A084-A2A019533797","type":"ads","languages":["fr"],"title":"Liste FR+EasyList","homepage":"https://forums.lanik.us/viewforum.php?f=98","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","8D421590-1A68-4B68-BE50-04E17C09460E"],"url":"https://easylist-downloads.adblockplus.org/v3/full/liste_fr+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/liste_fr+easylist.txt"},{"id":"EEEF75EC-B2B4-49F4-BC49-17B08266F334","type":"ads","languages":["ro"],"title":"ROList+EasyList","homepage":"https://zoso.ro/rolist/","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","99166908-5FDA-4F9E-8C4C-70BB4DEEFC08"],"url":"https://easylist-downloads.adblockplus.org/v3/full/rolist+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/rolist+easylist.txt"},{"id":"1B5F78CA-8B30-4BDF-B0A3-451CB2202984","type":"ads","languages":["ru","uk"],"title":"RuAdList+EasyList","homepage":"https://forums.lanik.us/viewforum.php?f=102","includes":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF","879ECB9D-8935-4506-939E-5BBB7DD09402"],"url":"https://easylist-downloads.adblockplus.org/v3/full/ruadlist+easylist.txt","mv2_url":"https://easylist-downloads.adblockplus.org/ruadlist+easylist.txt"},{"id":"0798B6A2-94A4-4ADF-89ED-BEC112FC4C7F","type":"allowing","title":"Allow nonintrusive advertising","homepage":"https://acceptableads.com/","url":"https://easylist-downloads.adblockplus.org/v3/full/exceptionrules.txt","mv2_url":"https://easylist-downloads.adblockplus.org/exceptionrules.txt"},{"id":"D4028CDD-3D39-4624-ACC7-8140F4EC3238","type":"circumvention","title":"ABP filters","homepage":"https://github.com/abp-filters/abp-filters-anti-cv","url":"https://easylist-downloads.adblockplus.org/v3/full/abp-filters-anti-cv.txt","mv2_url":"https://easylist-downloads.adblockplus.org/abp-filters-anti-cv.txt"},{"id":"5BD2BB73-459D-4A74-AF9D-A10157268350","type":"notifications","title":"Fanboy\'s Notifications Blocking List","homepage":"https://easylist.to/","url":"https://easylist-downloads.adblockplus.org/v3/full/fanboy-notifications.txt","mv2_url":"https://easylist-downloads.adblockplus.org/fanboy-notifications.txt"},{"id":"D72B6F06-52B2-4FED-96A2-1BF59CDD7AEC","type":"privacy","title":"EasyPrivacy","homepage":"https://easylist.to/","requires":["8C13E995-8F06-4927-BEA7-6C845FB7EEBF"],"url":"https://easylist-downloads.adblockplus.org/v3/full/easyprivacy.txt","mv2_url":"https://easylist-downloads.adblockplus.org/easyprivacy.txt"},{"id":"0A679439-445F-4DE7-84B9-88341F6DA520","type":"social","title":"Fanboy\'s Social Blocking List","homepage":"https://easylist.to/","url":"https://easylist-downloads.adblockplus.org/v3/full/fanboy-social.txt","mv2_url":"https://easylist-downloads.adblockplus.org/fanboy-social.txt"}]');

/***/ }),

/***/ 9438:
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"alarms":{"clear":{"minArgs":0,"maxArgs":1},"clearAll":{"minArgs":0,"maxArgs":0},"get":{"minArgs":0,"maxArgs":1},"getAll":{"minArgs":0,"maxArgs":0}},"bookmarks":{"create":{"minArgs":1,"maxArgs":1},"get":{"minArgs":1,"maxArgs":1},"getChildren":{"minArgs":1,"maxArgs":1},"getRecent":{"minArgs":1,"maxArgs":1},"getSubTree":{"minArgs":1,"maxArgs":1},"getTree":{"minArgs":0,"maxArgs":0},"move":{"minArgs":2,"maxArgs":2},"remove":{"minArgs":1,"maxArgs":1},"removeTree":{"minArgs":1,"maxArgs":1},"search":{"minArgs":1,"maxArgs":1},"update":{"minArgs":2,"maxArgs":2}},"browserAction":{"disable":{"minArgs":0,"maxArgs":1,"fallbackToNoCallback":true},"enable":{"minArgs":0,"maxArgs":1,"fallbackToNoCallback":true},"getBadgeBackgroundColor":{"minArgs":1,"maxArgs":1},"getBadgeText":{"minArgs":1,"maxArgs":1},"getPopup":{"minArgs":1,"maxArgs":1},"getTitle":{"minArgs":1,"maxArgs":1},"openPopup":{"minArgs":0,"maxArgs":0},"setBadgeBackgroundColor":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setBadgeText":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setIcon":{"minArgs":1,"maxArgs":1},"setPopup":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setTitle":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true}},"browsingData":{"remove":{"minArgs":2,"maxArgs":2},"removeCache":{"minArgs":1,"maxArgs":1},"removeCookies":{"minArgs":1,"maxArgs":1},"removeDownloads":{"minArgs":1,"maxArgs":1},"removeFormData":{"minArgs":1,"maxArgs":1},"removeHistory":{"minArgs":1,"maxArgs":1},"removeLocalStorage":{"minArgs":1,"maxArgs":1},"removePasswords":{"minArgs":1,"maxArgs":1},"removePluginData":{"minArgs":1,"maxArgs":1},"settings":{"minArgs":0,"maxArgs":0}},"commands":{"getAll":{"minArgs":0,"maxArgs":0}},"contextMenus":{"remove":{"minArgs":1,"maxArgs":1},"removeAll":{"minArgs":0,"maxArgs":0},"update":{"minArgs":2,"maxArgs":2}},"cookies":{"get":{"minArgs":1,"maxArgs":1},"getAll":{"minArgs":1,"maxArgs":1},"getAllCookieStores":{"minArgs":0,"maxArgs":0},"remove":{"minArgs":1,"maxArgs":1},"set":{"minArgs":1,"maxArgs":1}},"devtools":{"inspectedWindow":{"eval":{"minArgs":1,"maxArgs":2,"singleCallbackArg":false}},"panels":{"create":{"minArgs":3,"maxArgs":3,"singleCallbackArg":true},"elements":{"createSidebarPane":{"minArgs":1,"maxArgs":1}}}},"downloads":{"cancel":{"minArgs":1,"maxArgs":1},"download":{"minArgs":1,"maxArgs":1},"erase":{"minArgs":1,"maxArgs":1},"getFileIcon":{"minArgs":1,"maxArgs":2},"open":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"pause":{"minArgs":1,"maxArgs":1},"removeFile":{"minArgs":1,"maxArgs":1},"resume":{"minArgs":1,"maxArgs":1},"search":{"minArgs":1,"maxArgs":1},"show":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true}},"extension":{"isAllowedFileSchemeAccess":{"minArgs":0,"maxArgs":0},"isAllowedIncognitoAccess":{"minArgs":0,"maxArgs":0}},"history":{"addUrl":{"minArgs":1,"maxArgs":1},"deleteAll":{"minArgs":0,"maxArgs":0},"deleteRange":{"minArgs":1,"maxArgs":1},"deleteUrl":{"minArgs":1,"maxArgs":1},"getVisits":{"minArgs":1,"maxArgs":1},"search":{"minArgs":1,"maxArgs":1}},"i18n":{"detectLanguage":{"minArgs":1,"maxArgs":1},"getAcceptLanguages":{"minArgs":0,"maxArgs":0}},"identity":{"launchWebAuthFlow":{"minArgs":1,"maxArgs":1}},"idle":{"queryState":{"minArgs":1,"maxArgs":1}},"management":{"get":{"minArgs":1,"maxArgs":1},"getAll":{"minArgs":0,"maxArgs":0},"getSelf":{"minArgs":0,"maxArgs":0},"setEnabled":{"minArgs":2,"maxArgs":2},"uninstallSelf":{"minArgs":0,"maxArgs":1}},"notifications":{"clear":{"minArgs":1,"maxArgs":1},"create":{"minArgs":1,"maxArgs":2},"getAll":{"minArgs":0,"maxArgs":0},"getPermissionLevel":{"minArgs":0,"maxArgs":0},"update":{"minArgs":2,"maxArgs":2}},"pageAction":{"getPopup":{"minArgs":1,"maxArgs":1},"getTitle":{"minArgs":1,"maxArgs":1},"hide":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setIcon":{"minArgs":1,"maxArgs":1},"setPopup":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setTitle":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"show":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true}},"permissions":{"contains":{"minArgs":1,"maxArgs":1},"getAll":{"minArgs":0,"maxArgs":0},"remove":{"minArgs":1,"maxArgs":1},"request":{"minArgs":1,"maxArgs":1}},"runtime":{"getBackgroundPage":{"minArgs":0,"maxArgs":0},"getPlatformInfo":{"minArgs":0,"maxArgs":0},"openOptionsPage":{"minArgs":0,"maxArgs":0},"requestUpdateCheck":{"minArgs":0,"maxArgs":0},"sendMessage":{"minArgs":1,"maxArgs":3},"sendNativeMessage":{"minArgs":2,"maxArgs":2},"setUninstallURL":{"minArgs":1,"maxArgs":1}},"sessions":{"getDevices":{"minArgs":0,"maxArgs":1},"getRecentlyClosed":{"minArgs":0,"maxArgs":1},"restore":{"minArgs":0,"maxArgs":1}},"storage":{"local":{"clear":{"minArgs":0,"maxArgs":0},"get":{"minArgs":0,"maxArgs":1},"getBytesInUse":{"minArgs":0,"maxArgs":1},"remove":{"minArgs":1,"maxArgs":1},"set":{"minArgs":1,"maxArgs":1}},"managed":{"get":{"minArgs":0,"maxArgs":1},"getBytesInUse":{"minArgs":0,"maxArgs":1}},"sync":{"clear":{"minArgs":0,"maxArgs":0},"get":{"minArgs":0,"maxArgs":1},"getBytesInUse":{"minArgs":0,"maxArgs":1},"remove":{"minArgs":1,"maxArgs":1},"set":{"minArgs":1,"maxArgs":1}}},"tabs":{"captureVisibleTab":{"minArgs":0,"maxArgs":2},"create":{"minArgs":1,"maxArgs":1},"detectLanguage":{"minArgs":0,"maxArgs":1},"discard":{"minArgs":0,"maxArgs":1},"duplicate":{"minArgs":1,"maxArgs":1},"executeScript":{"minArgs":1,"maxArgs":2},"get":{"minArgs":1,"maxArgs":1},"getCurrent":{"minArgs":0,"maxArgs":0},"getZoom":{"minArgs":0,"maxArgs":1},"getZoomSettings":{"minArgs":0,"maxArgs":1},"goBack":{"minArgs":0,"maxArgs":1},"goForward":{"minArgs":0,"maxArgs":1},"highlight":{"minArgs":1,"maxArgs":1},"insertCSS":{"minArgs":1,"maxArgs":2},"move":{"minArgs":2,"maxArgs":2},"query":{"minArgs":1,"maxArgs":1},"reload":{"minArgs":0,"maxArgs":2},"remove":{"minArgs":1,"maxArgs":1},"removeCSS":{"minArgs":1,"maxArgs":2},"sendMessage":{"minArgs":2,"maxArgs":3},"setZoom":{"minArgs":1,"maxArgs":2},"setZoomSettings":{"minArgs":1,"maxArgs":2},"update":{"minArgs":1,"maxArgs":2}},"topSites":{"get":{"minArgs":0,"maxArgs":0}},"webNavigation":{"getAllFrames":{"minArgs":1,"maxArgs":1},"getFrame":{"minArgs":1,"maxArgs":1}},"webRequest":{"handlerBehaviorChanged":{"minArgs":0,"maxArgs":0}},"windows":{"create":{"minArgs":0,"maxArgs":1},"get":{"minArgs":1,"maxArgs":2},"getAll":{"minArgs":0,"maxArgs":1},"getCurrent":{"minArgs":0,"maxArgs":1},"getLastFocused":{"minArgs":0,"maxArgs":1},"remove":{"minArgs":1,"maxArgs":1},"update":{"minArgs":2,"maxArgs":2}}}');

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __nested_webpack_require_678579__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __nested_webpack_require_678579__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__nested_webpack_require_678579__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__nested_webpack_require_678579__.o(definition, key) && !__nested_webpack_require_678579__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__nested_webpack_require_678579__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__nested_webpack_require_678579__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__nested_webpack_require_678579__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __nested_webpack_exports__ = {};
// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
/* harmony import */ var webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_678579__(7795);
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */

// reexport polyfill browser


globalThis.browser = webextension_polyfill__WEBPACK_IMPORTED_MODULE_0__;

})();

// This entry needs to be wrapped in an IIFE because it needs to be in strict mode.
(() => {
"use strict";
// ESM COMPAT FLAG
__nested_webpack_require_678579__.r(__nested_webpack_exports__);

// EXPORTS
__nested_webpack_require_678579__.d(__nested_webpack_exports__, {
  allowlisting: () => (/* reexport */ allowlisting),
  cdp: () => (/* binding */ wrappedCdp),
  checkAndInitSubscriptions: () => (/* binding */ checkAndInitSubscriptions),
  clearSkipInitRulesets: () => (/* binding */ clearSkipInitRulesets),
  debugging: () => (/* binding */ wrappedDebugging),
  experiments: () => (/* binding */ wrappedExperiments),
  filters: () => (/* binding */ wrappedFilters),
  notifications: () => (/* reexport */ notifications_notifications),
  reporting: () => (/* binding */ wrappedReporting),
  sentry: () => (/* reexport */ sentry),
  snippets: () => (/* binding */ background_snippets),
  start: () => (/* binding */ background_start),
  subscriptions: () => (/* binding */ wrappedSubscriptions),
  telemetry: () => (/* binding */ wrappedTelemetry),
  testing: () => (/* binding */ wrappedTesting)
});

// EXTERNAL MODULE: ../../vendor/webextension-polyfill/src/browser-polyfill.js
var browser_polyfill = __nested_webpack_require_678579__(7795);
// EXTERNAL MODULE: ./adblockpluscore/lib/index.js
var lib = __nested_webpack_require_678579__(3676);
;// ./src/background/core.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */





let filterEngine = new lib.FilterEngine((function() {
  let features;

  if (browser_polyfill.declarativeNetRequest) {
    features = lib.Features.DNR;
  }

  return {features};
})());

// EXTERNAL MODULE: ./src/background/browser.js
var background_browser = __nested_webpack_require_678579__(7065);
// EXTERNAL MODULE: ./adblockpluscore/lib/url.js
var lib_url = __nested_webpack_require_678579__(1349);
// EXTERNAL MODULE: ./adblockpluscore/lib/contentTypes.js
var contentTypes = __nested_webpack_require_678579__(436);
// EXTERNAL MODULE: ./adblockpluscore/lib/filterClasses.js
var filterClasses = __nested_webpack_require_678579__(1298);
// EXTERNAL MODULE: ./adblockpluscore/lib/subscriptionClasses.js
var subscriptionClasses = __nested_webpack_require_678579__(6659);
// EXTERNAL MODULE: ./adblockpluscore/lib/matcher.js
var matcher = __nested_webpack_require_678579__(8070);
// EXTERNAL MODULE: ./adblockpluscore/lib/filterNotifier.js
var filterNotifier = __nested_webpack_require_678579__(5666);
// EXTERNAL MODULE: ./adblockpluscore/lib/time.js
var time = __nested_webpack_require_678579__(103);
;// ./src/background/types.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */



/**
 * The EventDispatcher class allows users to listen to
 * certain events that are emitted.
 * @hideconstructor
 * @param {function} initializer
 * @param {function} [finalizer]
 */
class EventDispatcher {
  constructor(initializer, finalizer) {
    this._listeners = new Set();
    this._initialized = false;

    let dispatch = (...args) => {
      for (let listener of this._listeners) {
        listener(...args);
      }
    };

    this._initialize = initializer.bind(null, dispatch);
    this._finalize = finalizer && finalizer.bind(null, dispatch);
  }

  /**
    * Attaches a listener function to an event. This listener will be called
    * when the event is emitted. Please note that in an MV3 context this has
    * to happen in the first turn of the event loop. This should happen when
    * your service worker starts.
    * @param {function} listener The user defined function that will be called
    *                            once the specified event is emitted.
    */
  addListener(listener) {
    if (!this._initialized) {
      this._initialize();
      this._initialized = true;
    }

    this._listeners.add(listener);
  }

  /**
    * Removes the added function. The listener will no longer be called
    * by the event.
    * @param {function} listener The user defined function to be removed.
    */
  removeListener(listener) {
    this._listeners.delete(listener);

    if (this._initialized && this._finalize && this._listeners.size == 0) {
      this._finalize();
      this._initialized = false;
    }
  }

  /**
   * Call listeners with the provided arguments.
   * @param {[Object]} args arguments
   */
  emit(...args) {
    for (let listener of this._listeners) {
      listener(...args);
    }
  }
}

/**
 * The result of parsing an invalid filter.
 * @property {string} type Either `invalid_filter` or `invalid_domain`.
 * @property {string} reason The reason why the filter is invalid.
 * @property {string?} option The filter option that made the filter invalid.
 * @param {string} type
 * @param {string} reason
 * @param {string?} option
 * @hideconstructor
 */
class FilterError extends Error {
  constructor(type, reason, option = null) {
    super(JSON.stringify({type, reason, option}));
    this.name = "FilterError";
    this.type = type;
    this.reason = reason;
    this.option = option;
  }
}

;// ./src/background/set-operations.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */

/**
 * A difference from arrays or filters.
 * @typedef {Object} FilterDiffs
 * @property {?string} type The type. Only the value "diff" is
 *   supported, and denote this is a difference from the static
 *   filtering rules.
 * @property {Array<string>} added Added filters.
 * @property {Array<string>} removed Removed filters.
 */

/**
 * Calculate the arrays difference
 *
 * @param {[string]} from The original array
 * @param {[string]} to The eventual array
 * @return {FilterDiffs}
 */
function arraysDiff(from, to) {
  const fromSet = new Set(from);
  const toSet = new Set(to);

  // No longer listed in eventual array
  const removed = from.filter(item => !toSet.has(item));

  // Not yet listed in original array
  const added = to.filter(item => !fromSet.has(item));

  return {added, removed};
}

/**
 * Calculate the filters update difference by removing the base
 * from the update.
 *
 * @param {FilterDiffs} base The base diff, ie the state of the already
 *   applied update. Must be of type `diff`.
 * @param {FilterDiffs} update The update. Must be of type `diff`.
 * @return {FilterDiffs}
 * @throws {Error} Will throw an error if the updates are not of type
 *   "diff".
 */
function filtersUpdateDiff(base, update) {
  let addedDiff = arraysDiff(base.added, update.added);
  let removedDiff = arraysDiff(base.removed, update.removed);

  // What is no longer removed must be added back.
  let added = addedDiff.added.concat(removedDiff.removed);

  // What is no longer added must be removed.
  let removed = removedDiff.added.concat(addedDiff.removed);

  return {added, removed};
}

/**
 * Merge objects. The merged object will have properties of both objects.
 * The arrays will also be merged.
 * @param {Object} obj1 Object 1 to merge
 * @param {Object} obj2 Object 2 to merge
 * @returns {Object} merged object
 */
function mergeObjects(obj1, obj2) {
  if (obj1 instanceof Array) {
    return [...obj1, ...obj2];
  }

  if (!(obj1 instanceof Object)) {
    return obj2;
  }

  let resultObj = {};

  for (let [key, obj1Values] of Object.entries(obj1)) {
    resultObj[key] = obj1Values;
  }

  for (let [key, obj2Values] of Object.entries(obj2)) {
    let map1Values = resultObj[key];
    resultObj[key] = map1Values ?
      mergeObjects(map1Values, obj2Values) :
      obj2Values;
  }

  return resultObj;
}

;// ./src/background/persistence.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */




class PersistentState {
  constructor(storageKey, storage = background_browser/* default */.A.storage.session) {
    this.storageKey = storageKey;
    this.storage = storage;
    this.activeSaveActions = new Set();
    this.loaded = false;
    this.debounce = false;
    this.debounceInterval = 0;
    this.untilLoaded = null;

    this.clearState();
  }

  doDebounce() {
    this.debounce = true;
  }

  setDebounceInterval(interval) {
    this.debounceInterval = interval;
  }

  clearState() {
    this.state = {};
  }

  async getStateLoaded() {
    if (this.untilLoaded) {
      await this.untilLoaded;
    }
    else {
      await this.load();
    }

    return this.state;
  }

  getState() {
    return this.state;
  }

  async load(savedStateCallback) {
    this.untilLoaded = this._load(savedStateCallback);
    await this.untilLoaded;
  }

  async save() {
    if (this.debounce) {
      if (!this.debounceTimer) {
        this.debounceTimer = setTimeout(() => {
          this.debounceTimer = null;
          this.saveImmediate();
        }, this.debounceInterval);
      }
    }
    else {
      await this.saveImmediate();
    }
  }

  async saveImmediate() {
    let obj = {};
    obj[this.storageKey] = this.state;
    return this._trackSaving(this.storage.set(obj));
  }

  async awaitSavingComplete() {
    if (Promise.allSettled) {
      await Promise.allSettled(this.activeSaveActions);
      return;
    }

    // Promise.allSettled isn't supported in oldest Firefox.
    // It was added in Firefox 71.
    for (let saveAction of this.activeSaveActions) {
      try {
        await saveAction;
      }
      catch (e) {
      }
    }
  }

  async _load(savedStateCallback = null) {
    let persistObj = await this.storage.get(this.storageKey);
    if (!persistObj || !persistObj[this.storageKey]) {
      this.loaded = true;
      return;
    }

    let savedState = persistObj[this.storageKey];

    if (savedStateCallback) {
      savedStateCallback(savedState);
    }

    // We might have populated state until loading is finished.
    // Thus we might need to merge the saved and new runtime state.
    this.state = mergeObjects(savedState, this.state);
    this.loaded = true;
  }

  _trackSaving(savePromise) {
    this.activeSaveActions.add(savePromise);
    savePromise.finally(() => this.activeSaveActions.delete(savePromise));
    return savePromise;
  }
}

// EXTERNAL MODULE: ./adblockpluscore/lib/filters/lists.js
var lists = __nested_webpack_require_678579__(3569);
// EXTERNAL MODULE: ./src/background/io.js + 1 modules
var io = __nested_webpack_require_678579__(1252);
// EXTERNAL MODULE: ./src/background/info.js
var info = __nested_webpack_require_678579__(4189);
;// ./src/background/subscriptions-utils.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */







function getRuleset(rulesetId) {
  let manifest = background_browser/* default */.A.runtime.getManifest();

  if (manifest.declarative_net_request &&
    manifest.declarative_net_request.rule_resources) {
    return manifest.declarative_net_request.rule_resources.find(
      ruleset => ruleset.id == rulesetId
    );
  }

  return null;
}

function rulesetExistsInManifest(rulesetId) {
  return !!getRuleset(rulesetId);
}

async function subscriptionFileExists(subscription, path) {
  let subscriptionPath = `${path}/${subscription.id}`;
  return memoizedFileExists(subscriptionPath);
}

let fileExistsCache = new PersistentState("ewe:fileExistsCache");

/**
 * Checks is a file is bundled in the extension. The results of calling this
 * function are memoized in session storage to decrease the number of `fetch`
 * requests made to the extension's resources.
 *
 * In our fuzz tests, we found that doing the full check of every subscription's
 * files on every service worker startup lead to flaky tests where other network
 * requests started failing.
 *
 * @param {string} filepath Path to the file, relative to the root of the
 * extension.
 * @returns {boolean} True if the filepath is bundled in the extension.
 */
async function memoizedFileExists(filepath) {
  if (!fileExistsCache.loaded) {
    await fileExistsCache.load();
  }

  let cache = fileExistsCache.getState();
  if (typeof cache[filepath] == "undefined") {
    const url = background_browser/* default */.A.runtime.getURL(filepath);

    let fileExists;
    try {
      const fetchResult = await fetch(url, {method: "HEAD"});
      fileExists = fetchResult.ok;
    }
    catch (error) {
      fileExists = false;
    }

    cache[filepath] = fileExists;
    await fileExistsCache.save();
  }

  return cache[filepath];
}

/**
 * Get the subscription static ruleset map
 * @param {string} id The subscription id to get the map for.
 *
 * @private
 * @returns {object} The subscription map. It can be used to
 *     initialize a `Map` with key being the filter text and values
 *     being an array of ids.
 */
async function getSubscriptionRulesetMap(id) {
  let dnrSub = getRuleset(id);

  if (!dnrSub) {
    throw Error(`Subscription ${id} not found.`);
  }

  const url = background_browser/* default */.A.runtime.getURL(dnrSub.path + ".map");
  let response = await fetch(url);
  return await response.json();
}

async function getFilterText(subscription) {
  let subscriptionPath = `${info.addonBundledSubscriptionsPath}/${subscription.id}`;
  let rawLines = await (0,io.readFileContent)(subscriptionPath);
  let {lines, params, error} = (0,lists.parseFilterList)(rawLines);
  if (error) {
    throw new Error(error);
  }
  if (!lines) {
    throw new Error("invalid filter list");
  }
  lines.shift();
  return {filterText: lines, params};
}

// EXTERNAL MODULE: ./adblockpluscore/lib/dnr/index.js
var dnr = __nested_webpack_require_678579__(2447);
// EXTERNAL MODULE: ./adblockpluscore/lib/dnr/mapper.js
var mapper = __nested_webpack_require_678579__(3490);
;// ./src/background/subscriptions-validator.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */



async function subscriptions_validator_validate(bundledSubscriptions,
                               bundledSubscriptionsPath) {
  let warnings = [];

  for (let subscription of bundledSubscriptions) {
    let fileExists = await subscriptionFileExists(
      subscription, bundledSubscriptionsPath);
    if (!fileExists) {
      warnings.push(`No subscription content file for ID=${subscription.id}`);
    }

    if (!rulesetExistsInManifest(subscription.id)) {
      warnings.push(`No ruleset with ID=${subscription.id} declared in the manifest`);
    }
  }

  return warnings;
}

// EXTERNAL MODULE: ./adblockpluscore/lib/recommendations.js
var recommendations = __nested_webpack_require_678579__(5056);
;// ../../node_modules/@sentry/core/build/esm/debug-build.js
/**
 * This serves as a build time flag that will be true by default, but false in non-debug builds or if users replace `__SENTRY_DEBUG__` in their generated code.
 *
 * ATTENTION: This constant must never cross package boundaries (i.e. be exported) to guarantee that it can be used for tree shaking.
 */
const debug_build_DEBUG_BUILD = (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__);



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/debug-build.js
/**
 * This serves as a build time flag that will be true by default, but false in non-debug builds or if users replace `__SENTRY_DEBUG__` in their generated code.
 *
 * ATTENTION: This constant must never cross package boundaries (i.e. be exported) to guarantee that it can be used for tree shaking.
 */
const utils_hoist_debug_build_DEBUG_BUILD = (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__);



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/version.js
// This is a magic string replaced by rollup

const SDK_VERSION = "8.54.0" ;



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/worldwide.js


/** Get's the global object for the current JavaScript runtime */
const worldwide_GLOBAL_OBJ = globalThis ;

/**
 * Returns a global singleton contained in the global `__SENTRY__[]` object.
 *
 * If the singleton doesn't already exist in `__SENTRY__`, it will be created using the given factory
 * function and added to the `__SENTRY__` object.
 *
 * @param name name of the global singleton on __SENTRY__
 * @param creator creator Factory function to create the singleton if it doesn't already exist on `__SENTRY__`
 * @param obj (Optional) The global object on which to look for `__SENTRY__`, if not `GLOBAL_OBJ`'s return value
 * @returns the singleton
 */
function getGlobalSingleton(name, creator, obj) {
  const gbl = (obj || worldwide_GLOBAL_OBJ) ;
  const __SENTRY__ = (gbl.__SENTRY__ = gbl.__SENTRY__ || {});
  const versionedCarrier = (__SENTRY__[SDK_VERSION] = __SENTRY__[SDK_VERSION] || {});
  return versionedCarrier[name] || (versionedCarrier[name] = creator());
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/logger.js



/** Prefix for logging strings */
const PREFIX = 'Sentry Logger ';

const CONSOLE_LEVELS = [
  'debug',
  'info',
  'warn',
  'error',
  'log',
  'assert',
  'trace',
] ;

/** This may be mutated by the console instrumentation. */
const originalConsoleMethods

 = {};

/** JSDoc */

/**
 * Temporarily disable sentry console instrumentations.
 *
 * @param callback The function to run against the original `console` messages
 * @returns The results of the callback
 */
function logger_consoleSandbox(callback) {
  if (!("console" in worldwide_GLOBAL_OBJ)) {
    return callback();
  }

  const console = worldwide_GLOBAL_OBJ.console ;
  const wrappedFuncs = {};

  const wrappedLevels = Object.keys(originalConsoleMethods) ;

  // Restore all wrapped console methods
  wrappedLevels.forEach(level => {
    const originalConsoleMethod = originalConsoleMethods[level] ;
    wrappedFuncs[level] = console[level] ;
    console[level] = originalConsoleMethod;
  });

  try {
    return callback();
  } finally {
    // Revert restoration to wrapped state
    wrappedLevels.forEach(level => {
      console[level] = wrappedFuncs[level] ;
    });
  }
}

function makeLogger() {
  let enabled = false;
  const logger = {
    enable: () => {
      enabled = true;
    },
    disable: () => {
      enabled = false;
    },
    isEnabled: () => enabled,
  };

  if (utils_hoist_debug_build_DEBUG_BUILD) {
    CONSOLE_LEVELS.forEach(name => {
      logger[name] = (...args) => {
        if (enabled) {
          logger_consoleSandbox(() => {
            worldwide_GLOBAL_OBJ.console[name](`${PREFIX}[${name}]:`, ...args);
          });
        }
      };
    });
  } else {
    CONSOLE_LEVELS.forEach(name => {
      logger[name] = () => undefined;
    });
  }

  return logger ;
}

/**
 * This is a logger singleton which either logs things or no-ops if logging is not enabled.
 * The logger is a singleton on the carrier, to ensure that a consistent logger is used throughout the SDK.
 */
const logger_logger = getGlobalSingleton('logger', makeLogger);



;// ../../node_modules/@sentry/core/build/esm/integration.js




const installedIntegrations = [];

/** Map of integrations assigned to a client */

/**
 * Remove duplicates from the given array, preferring the last instance of any duplicate. Not guaranteed to
 * preserve the order of integrations in the array.
 *
 * @private
 */
function filterDuplicates(integrations) {
  const integrationsByName = {};

  integrations.forEach((currentInstance) => {
    const { name } = currentInstance;

    const existingInstance = integrationsByName[name];

    // We want integrations later in the array to overwrite earlier ones of the same type, except that we never want a
    // default instance to overwrite an existing user instance
    if (existingInstance && !existingInstance.isDefaultInstance && currentInstance.isDefaultInstance) {
      return;
    }

    integrationsByName[name] = currentInstance;
  });

  return Object.values(integrationsByName);
}

/** Gets integrations to install */
function integration_getIntegrationsToSetup(options) {
  const defaultIntegrations = options.defaultIntegrations || [];
  const userIntegrations = options.integrations;

  // We flag default instances, so that later we can tell them apart from any user-created instances of the same class
  defaultIntegrations.forEach((integration) => {
    integration.isDefaultInstance = true;
  });

  let integrations;

  if (Array.isArray(userIntegrations)) {
    integrations = [...defaultIntegrations, ...userIntegrations];
  } else if (typeof userIntegrations === 'function') {
    const resolvedUserIntegrations = userIntegrations(defaultIntegrations);
    integrations = Array.isArray(resolvedUserIntegrations) ? resolvedUserIntegrations : [resolvedUserIntegrations];
  } else {
    integrations = defaultIntegrations;
  }

  const finalIntegrations = filterDuplicates(integrations);

  // The `Debug` integration prints copies of the `event` and `hint` which will be passed to `beforeSend` or
  // `beforeSendTransaction`. It therefore has to run after all other integrations, so that the changes of all event
  // processors will be reflected in the printed values. For lack of a more elegant way to guarantee that, we therefore
  // locate it and, assuming it exists, pop it out of its current spot and shove it onto the end of the array.
  const debugIndex = finalIntegrations.findIndex(integration => integration.name === 'Debug');
  if (debugIndex > -1) {
    const [debugInstance] = finalIntegrations.splice(debugIndex, 1) ;
    finalIntegrations.push(debugInstance);
  }

  return finalIntegrations;
}

/**
 * Given a list of integration instances this installs them all. When `withDefaults` is set to `true` then all default
 * integrations are added unless they were already provided before.
 * @param integrations array of integration instances
 * @param withDefault should enable default integrations
 */
function setupIntegrations(client, integrations) {
  const integrationIndex = {};

  integrations.forEach(integration => {
    // guard against empty provided integrations
    if (integration) {
      setupIntegration(client, integration, integrationIndex);
    }
  });

  return integrationIndex;
}

/**
 * Execute the `afterAllSetup` hooks of the given integrations.
 */
function afterSetupIntegrations(client, integrations) {
  for (const integration of integrations) {
    // guard against empty provided integrations
    if (integration && integration.afterAllSetup) {
      integration.afterAllSetup(client);
    }
  }
}

/** Setup a single integration.  */
function setupIntegration(client, integration, integrationIndex) {
  if (integrationIndex[integration.name]) {
    debug_build_DEBUG_BUILD && logger_logger.log(`Integration skipped because it was already installed: ${integration.name}`);
    return;
  }
  integrationIndex[integration.name] = integration;

  // `setupOnce` is only called the first time
  if (installedIntegrations.indexOf(integration.name) === -1 && typeof integration.setupOnce === 'function') {
    integration.setupOnce();
    installedIntegrations.push(integration.name);
  }

  // `setup` is run for each client
  if (integration.setup && typeof integration.setup === 'function') {
    integration.setup(client);
  }

  if (typeof integration.preprocessEvent === 'function') {
    const callback = integration.preprocessEvent.bind(integration) ;
    client.on('preprocessEvent', (event, hint) => callback(event, hint, client));
  }

  if (typeof integration.processEvent === 'function') {
    const callback = integration.processEvent.bind(integration) ;

    const processor = Object.assign((event, hint) => callback(event, hint, client), {
      id: integration.name,
    });

    client.addEventProcessor(processor);
  }

  debug_build_DEBUG_BUILD && logger_logger.log(`Integration installed: ${integration.name}`);
}

/** Add an integration to the current scope's client. */
function addIntegration(integration) {
  const client = getClient();

  if (!client) {
    DEBUG_BUILD && logger.warn(`Cannot add integration "${integration.name}" because no SDK Client is available.`);
    return;
  }

  client.addIntegration(integration);
}

/**
 * Define an integration function that can be used to create an integration instance.
 * Note that this by design hides the implementation details of the integration, as they are considered internal.
 */
function defineIntegration(fn) {
  return fn;
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/is.js
// eslint-disable-next-line @typescript-eslint/unbound-method
const objectToString = Object.prototype.toString;

/**
 * Checks whether given value's type is one of a few Error or Error-like
 * {@link isError}.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function isError(wat) {
  switch (objectToString.call(wat)) {
    case '[object Error]':
    case '[object Exception]':
    case '[object DOMException]':
    case '[object WebAssembly.Exception]':
      return true;
    default:
      return isInstanceOf(wat, Error);
  }
}
/**
 * Checks whether given value is an instance of the given built-in class.
 *
 * @param wat The value to be checked
 * @param className
 * @returns A boolean representing the result.
 */
function isBuiltin(wat, className) {
  return objectToString.call(wat) === `[object ${className}]`;
}

/**
 * Checks whether given value's type is ErrorEvent
 * {@link isErrorEvent}.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function isErrorEvent(wat) {
  return isBuiltin(wat, 'ErrorEvent');
}

/**
 * Checks whether given value's type is DOMError
 * {@link isDOMError}.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function isDOMError(wat) {
  return isBuiltin(wat, 'DOMError');
}

/**
 * Checks whether given value's type is DOMException
 * {@link isDOMException}.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function isDOMException(wat) {
  return isBuiltin(wat, 'DOMException');
}

/**
 * Checks whether given value's type is a string
 * {@link isString}.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function isString(wat) {
  return isBuiltin(wat, 'String');
}

/**
 * Checks whether given string is parameterized
 * {@link isParameterizedString}.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function isParameterizedString(wat) {
  return (
    typeof wat === 'object' &&
    wat !== null &&
    '__sentry_template_string__' in wat &&
    '__sentry_template_values__' in wat
  );
}

/**
 * Checks whether given value is a primitive (undefined, null, number, boolean, string, bigint, symbol)
 * {@link isPrimitive}.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function is_isPrimitive(wat) {
  return wat === null || isParameterizedString(wat) || (typeof wat !== 'object' && typeof wat !== 'function');
}

/**
 * Checks whether given value's type is an object literal, or a class instance.
 * {@link isPlainObject}.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function isPlainObject(wat) {
  return isBuiltin(wat, 'Object');
}

/**
 * Checks whether given value's type is an Event instance
 * {@link isEvent}.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function isEvent(wat) {
  return typeof Event !== 'undefined' && isInstanceOf(wat, Event);
}

/**
 * Checks whether given value's type is an Element instance
 * {@link isElement}.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function isElement(wat) {
  return typeof Element !== 'undefined' && isInstanceOf(wat, Element);
}

/**
 * Checks whether given value's type is an regexp
 * {@link isRegExp}.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function isRegExp(wat) {
  return isBuiltin(wat, 'RegExp');
}

/**
 * Checks whether given value has a then function.
 * @param wat A value to be checked.
 */
function is_isThenable(wat) {
  // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
  return Boolean(wat && wat.then && typeof wat.then === 'function');
}

/**
 * Checks whether given value's type is a SyntheticEvent
 * {@link isSyntheticEvent}.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function isSyntheticEvent(wat) {
  return isPlainObject(wat) && 'nativeEvent' in wat && 'preventDefault' in wat && 'stopPropagation' in wat;
}

/**
 * Checks whether given value's type is an instance of provided constructor.
 * {@link isInstanceOf}.
 *
 * @param wat A value to be checked.
 * @param base A constructor to be used in a check.
 * @returns A boolean representing the result.
 */
function isInstanceOf(wat, base) {
  try {
    return wat instanceof base;
  } catch (_e) {
    return false;
  }
}

/**
 * Checks whether given value's type is a Vue ViewModel.
 *
 * @param wat A value to be checked.
 * @returns A boolean representing the result.
 */
function isVueViewModel(wat) {
  // Not using Object.prototype.toString because in Vue 3 it would read the instance's Symbol(Symbol.toStringTag) property.
  return !!(typeof wat === 'object' && wat !== null && ((wat ).__isVue || (wat )._isVue));
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/browser.js



const browser_WINDOW = worldwide_GLOBAL_OBJ ;

const DEFAULT_MAX_STRING_LENGTH = 80;

/**
 * Given a child DOM element, returns a query-selector statement describing that
 * and its ancestors
 * e.g. [HTMLElement] => body > div > input#foo.btn[name=baz]
 * @returns generated DOM path
 */
function htmlTreeAsString(
  elem,
  options = {},
) {
  if (!elem) {
    return '<unknown>';
  }

  // try/catch both:
  // - accessing event.target (see getsentry/raven-js#838, #768)
  // - `htmlTreeAsString` because it's complex, and just accessing the DOM incorrectly
  // - can throw an exception in some circumstances.
  try {
    let currentElem = elem ;
    const MAX_TRAVERSE_HEIGHT = 5;
    const out = [];
    let height = 0;
    let len = 0;
    const separator = ' > ';
    const sepLength = separator.length;
    let nextStr;
    const keyAttrs = Array.isArray(options) ? options : options.keyAttrs;
    const maxStringLength = (!Array.isArray(options) && options.maxStringLength) || DEFAULT_MAX_STRING_LENGTH;

    while (currentElem && height++ < MAX_TRAVERSE_HEIGHT) {
      nextStr = _htmlElementAsString(currentElem, keyAttrs);
      // bail out if
      // - nextStr is the 'html' element
      // - the length of the string that would be created exceeds maxStringLength
      //   (ignore this limit if we are on the first iteration)
      if (nextStr === 'html' || (height > 1 && len + out.length * sepLength + nextStr.length >= maxStringLength)) {
        break;
      }

      out.push(nextStr);

      len += nextStr.length;
      currentElem = currentElem.parentNode;
    }

    return out.reverse().join(separator);
  } catch (_oO) {
    return '<unknown>';
  }
}

/**
 * Returns a simple, query-selector representation of a DOM element
 * e.g. [HTMLElement] => input#foo.btn[name=baz]
 * @returns generated DOM path
 */
function _htmlElementAsString(el, keyAttrs) {
  const elem = el

;

  const out = [];

  if (!elem || !elem.tagName) {
    return '';
  }

  // @ts-expect-error WINDOW has HTMLElement
  if (browser_WINDOW.HTMLElement) {
    // If using the component name annotation plugin, this value may be available on the DOM node
    if (elem instanceof HTMLElement && elem.dataset) {
      if (elem.dataset['sentryComponent']) {
        return elem.dataset['sentryComponent'];
      }
      if (elem.dataset['sentryElement']) {
        return elem.dataset['sentryElement'];
      }
    }
  }

  out.push(elem.tagName.toLowerCase());

  // Pairs of attribute keys defined in `serializeAttribute` and their values on element.
  const keyAttrPairs =
    keyAttrs && keyAttrs.length
      ? keyAttrs.filter(keyAttr => elem.getAttribute(keyAttr)).map(keyAttr => [keyAttr, elem.getAttribute(keyAttr)])
      : null;

  if (keyAttrPairs && keyAttrPairs.length) {
    keyAttrPairs.forEach(keyAttrPair => {
      out.push(`[${keyAttrPair[0]}="${keyAttrPair[1]}"]`);
    });
  } else {
    if (elem.id) {
      out.push(`#${elem.id}`);
    }

    const className = elem.className;
    if (className && isString(className)) {
      const classes = className.split(/\s+/);
      for (const c of classes) {
        out.push(`.${c}`);
      }
    }
  }
  const allowedAttrs = ['aria-label', 'type', 'name', 'title', 'alt'];
  for (const k of allowedAttrs) {
    const attr = elem.getAttribute(k);
    if (attr) {
      out.push(`[${k}="${attr}"]`);
    }
  }

  return out.join('');
}

/**
 * A safe form of location.href
 */
function getLocationHref() {
  try {
    return browser_WINDOW.document.location.href;
  } catch (oO) {
    return '';
  }
}

/**
 * Gets a DOM element by using document.querySelector.
 *
 * This wrapper will first check for the existence of the function before
 * actually calling it so that we don't have to take care of this check,
 * every time we want to access the DOM.
 *
 * Reason: DOM/querySelector is not available in all environments.
 *
 * We have to cast to any because utils can be consumed by a variety of environments,
 * and we don't want to break TS users. If you know what element will be selected by
 * `document.querySelector`, specify it as part of the generic call. For example,
 * `const element = getDomElement<Element>('selector');`
 *
 * @param selector the selector string passed on to document.querySelector
 *
 * @deprecated This method is deprecated and will be removed in the next major version.
 */
// eslint-disable-next-line @typescript-eslint/no-explicit-any
function getDomElement(selector) {
  if (browser_WINDOW.document && browser_WINDOW.document.querySelector) {
    return browser_WINDOW.document.querySelector(selector) ;
  }
  return null;
}

/**
 * Given a DOM element, traverses up the tree until it finds the first ancestor node
 * that has the `data-sentry-component` or `data-sentry-element` attribute with `data-sentry-component` taking
 * precedence. This attribute is added at build-time by projects that have the component name annotation plugin installed.
 *
 * @returns a string representation of the component for the provided DOM element, or `null` if not found
 */
function getComponentName(elem) {
  // @ts-expect-error WINDOW has HTMLElement
  if (!browser_WINDOW.HTMLElement) {
    return null;
  }

  let currentElem = elem ;
  const MAX_TRAVERSE_HEIGHT = 5;
  for (let i = 0; i < MAX_TRAVERSE_HEIGHT; i++) {
    if (!currentElem) {
      return null;
    }

    if (currentElem instanceof HTMLElement) {
      if (currentElem.dataset['sentryComponent']) {
        return currentElem.dataset['sentryComponent'];
      }
      if (currentElem.dataset['sentryElement']) {
        return currentElem.dataset['sentryElement'];
      }
    }

    currentElem = currentElem.parentNode;
  }

  return null;
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/string.js


/**
 * Truncates given string to the maximum characters count
 *
 * @param str An object that contains serializable values
 * @param max Maximum number of characters in truncated string (0 = unlimited)
 * @returns string Encoded
 */
function truncate(str, max = 0) {
  if (typeof str !== 'string' || max === 0) {
    return str;
  }
  return str.length <= max ? str : `${str.slice(0, max)}...`;
}

/**
 * This is basically just `trim_line` from
 * https://github.com/getsentry/sentry/blob/master/src/sentry/lang/javascript/processor.py#L67
 *
 * @param str An object that contains serializable values
 * @param max Maximum number of characters in truncated string
 * @returns string Encoded
 */
function string_snipLine(line, colno) {
  let newLine = line;
  const lineLength = newLine.length;
  if (lineLength <= 150) {
    return newLine;
  }
  if (colno > lineLength) {
    // eslint-disable-next-line no-param-reassign
    colno = lineLength;
  }

  let start = Math.max(colno - 60, 0);
  if (start < 5) {
    start = 0;
  }

  let end = Math.min(start + 140, lineLength);
  if (end > lineLength - 5) {
    end = lineLength;
  }
  if (end === lineLength) {
    start = Math.max(end - 140, 0);
  }

  newLine = newLine.slice(start, end);
  if (start > 0) {
    newLine = `'{snip} ${newLine}`;
  }
  if (end < lineLength) {
    newLine += ' {snip}';
  }

  return newLine;
}

/**
 * Join values in array
 * @param input array of values to be joined together
 * @param delimiter string to be placed in-between values
 * @returns Joined values
 */
function safeJoin(input, delimiter) {
  if (!Array.isArray(input)) {
    return '';
  }

  const output = [];
  // eslint-disable-next-line @typescript-eslint/prefer-for-of
  for (let i = 0; i < input.length; i++) {
    const value = input[i];
    try {
      // This is a hack to fix a Vue3-specific bug that causes an infinite loop of
      // console warnings. This happens when a Vue template is rendered with
      // an undeclared variable, which we try to stringify, ultimately causing
      // Vue to issue another warning which repeats indefinitely.
      // see: https://github.com/getsentry/sentry-javascript/pull/8981
      if (isVueViewModel(value)) {
        output.push('[VueViewModel]');
      } else {
        output.push(String(value));
      }
    } catch (e) {
      output.push('[value cannot be serialized]');
    }
  }

  return output.join(delimiter);
}

/**
 * Checks if the given value matches a regex or string
 *
 * @param value The string to test
 * @param pattern Either a regex or a string against which `value` will be matched
 * @param requireExactStringMatch If true, `value` must match `pattern` exactly. If false, `value` will match
 * `pattern` if it contains `pattern`. Only applies to string-type patterns.
 */
function isMatchingPattern(
  value,
  pattern,
  requireExactStringMatch = false,
) {
  if (!isString(value)) {
    return false;
  }

  if (isRegExp(pattern)) {
    return pattern.test(value);
  }
  if (isString(pattern)) {
    return requireExactStringMatch ? value === pattern : value.includes(pattern);
  }

  return false;
}

/**
 * Test the given string against an array of strings and regexes. By default, string matching is done on a
 * substring-inclusion basis rather than a strict equality basis
 *
 * @param testString The string to test
 * @param patterns The patterns against which to test the string
 * @param requireExactStringMatch If true, `testString` must match one of the given string patterns exactly in order to
 * count. If false, `testString` will match a string pattern if it contains that pattern.
 * @returns
 */
function stringMatchesSomePattern(
  testString,
  patterns = [],
  requireExactStringMatch = false,
) {
  return patterns.some(pattern => isMatchingPattern(testString, pattern, requireExactStringMatch));
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/object.js






/**
 * Replace a method in an object with a wrapped version of itself.
 *
 * @param source An object that contains a method to be wrapped.
 * @param name The name of the method to be wrapped.
 * @param replacementFactory A higher-order function that takes the original version of the given method and returns a
 * wrapped version. Note: The function returned by `replacementFactory` needs to be a non-arrow function, in order to
 * preserve the correct value of `this`, and the original method must be called using `origMethod.call(this, <other
 * args>)` or `origMethod.apply(this, [<other args>])` (rather than being called directly), again to preserve `this`.
 * @returns void
 */
function fill(source, name, replacementFactory) {
  if (!(name in source)) {
    return;
  }

  const original = source[name] ;
  const wrapped = replacementFactory(original) ;

  // Make sure it's a function first, as we need to attach an empty prototype for `defineProperties` to work
  // otherwise it'll throw "TypeError: Object.defineProperties called on non-object"
  if (typeof wrapped === 'function') {
    markFunctionWrapped(wrapped, original);
  }

  try {
    source[name] = wrapped;
  } catch (e) {
    utils_hoist_debug_build_DEBUG_BUILD && logger_logger.log(`Failed to replace method "${name}" in object`, source);
  }
}

/**
 * Defines a non-enumerable property on the given object.
 *
 * @param obj The object on which to set the property
 * @param name The name of the property to be set
 * @param value The value to which to set the property
 */
function object_addNonEnumerableProperty(obj, name, value) {
  try {
    Object.defineProperty(obj, name, {
      // enumerable: false, // the default, so we can save on bundle size by not explicitly setting it
      value: value,
      writable: true,
      configurable: true,
    });
  } catch (o_O) {
    utils_hoist_debug_build_DEBUG_BUILD && logger_logger.log(`Failed to add non-enumerable property "${name}" to object`, obj);
  }
}

/**
 * Remembers the original function on the wrapped function and
 * patches up the prototype.
 *
 * @param wrapped the wrapper function
 * @param original the original function that gets wrapped
 */
function markFunctionWrapped(wrapped, original) {
  try {
    const proto = original.prototype || {};
    wrapped.prototype = original.prototype = proto;
    object_addNonEnumerableProperty(wrapped, '__sentry_original__', original);
  } catch (o_O) {} // eslint-disable-line no-empty
}

/**
 * This extracts the original function if available.  See
 * `markFunctionWrapped` for more information.
 *
 * @param func the function to unwrap
 * @returns the unwrapped version of the function if available.
 */
// eslint-disable-next-line @typescript-eslint/ban-types
function getOriginalFunction(func) {
  return func.__sentry_original__;
}

/**
 * Encodes given object into url-friendly format
 *
 * @param object An object that contains serializable values
 * @returns string Encoded
 *
 * @deprecated This function is deprecated and will be removed in the next major version of the SDK.
 */
// eslint-disable-next-line @typescript-eslint/no-explicit-any
function urlEncode(object) {
  return Object.entries(object)
    .map(([key, value]) => `${encodeURIComponent(key)}=${encodeURIComponent(value)}`)
    .join('&');
}

/**
 * Transforms any `Error` or `Event` into a plain object with all of their enumerable properties, and some of their
 * non-enumerable properties attached.
 *
 * @param value Initial source that we have to transform in order for it to be usable by the serializer
 * @returns An Event or Error turned into an object - or the value argument itself, when value is neither an Event nor
 *  an Error.
 */
function convertToPlainObject(value)

 {
  if (isError(value)) {
    return {
      message: value.message,
      name: value.name,
      stack: value.stack,
      ...getOwnProperties(value),
    };
  } else if (isEvent(value)) {
    const newObj

 = {
      type: value.type,
      target: serializeEventTarget(value.target),
      currentTarget: serializeEventTarget(value.currentTarget),
      ...getOwnProperties(value),
    };

    if (typeof CustomEvent !== 'undefined' && isInstanceOf(value, CustomEvent)) {
      newObj.detail = value.detail;
    }

    return newObj;
  } else {
    return value;
  }
}

/** Creates a string representation of the target of an `Event` object */
function serializeEventTarget(target) {
  try {
    return isElement(target) ? htmlTreeAsString(target) : Object.prototype.toString.call(target);
  } catch (_oO) {
    return '<unknown>';
  }
}

/** Filters out all but an object's own properties */
function getOwnProperties(obj) {
  if (typeof obj === 'object' && obj !== null) {
    const extractedProps = {};
    for (const property in obj) {
      if (Object.prototype.hasOwnProperty.call(obj, property)) {
        extractedProps[property] = (obj )[property];
      }
    }
    return extractedProps;
  } else {
    return {};
  }
}

/**
 * Given any captured exception, extract its keys and create a sorted
 * and truncated list that will be used inside the event message.
 * eg. `Non-error exception captured with keys: foo, bar, baz`
 */
function extractExceptionKeysForMessage(exception, maxLength = 40) {
  const keys = Object.keys(convertToPlainObject(exception));
  keys.sort();

  const firstKey = keys[0];

  if (!firstKey) {
    return '[object has no keys]';
  }

  if (firstKey.length >= maxLength) {
    return truncate(firstKey, maxLength);
  }

  for (let includedKeys = keys.length; includedKeys > 0; includedKeys--) {
    const serialized = keys.slice(0, includedKeys).join(', ');
    if (serialized.length > maxLength) {
      continue;
    }
    if (includedKeys === keys.length) {
      return serialized;
    }
    return truncate(serialized, maxLength);
  }

  return '';
}

/**
 * Given any object, return a new object having removed all fields whose value was `undefined`.
 * Works recursively on objects and arrays.
 *
 * Attention: This function keeps circular references in the returned object.
 */
function object_dropUndefinedKeys(inputValue) {
  // This map keeps track of what already visited nodes map to.
  // Our Set - based memoBuilder doesn't work here because we want to the output object to have the same circular
  // references as the input object.
  const memoizationMap = new Map();

  // This function just proxies `_dropUndefinedKeys` to keep the `memoBuilder` out of this function's API
  return _dropUndefinedKeys(inputValue, memoizationMap);
}

function _dropUndefinedKeys(inputValue, memoizationMap) {
  if (isPojo(inputValue)) {
    // If this node has already been visited due to a circular reference, return the object it was mapped to in the new object
    const memoVal = memoizationMap.get(inputValue);
    if (memoVal !== undefined) {
      return memoVal ;
    }

    const returnValue = {};
    // Store the mapping of this value in case we visit it again, in case of circular data
    memoizationMap.set(inputValue, returnValue);

    for (const key of Object.getOwnPropertyNames(inputValue)) {
      if (typeof inputValue[key] !== 'undefined') {
        returnValue[key] = _dropUndefinedKeys(inputValue[key], memoizationMap);
      }
    }

    return returnValue ;
  }

  if (Array.isArray(inputValue)) {
    // If this node has already been visited due to a circular reference, return the array it was mapped to in the new object
    const memoVal = memoizationMap.get(inputValue);
    if (memoVal !== undefined) {
      return memoVal ;
    }

    const returnValue = [];
    // Store the mapping of this value in case we visit it again, in case of circular data
    memoizationMap.set(inputValue, returnValue);

    inputValue.forEach((item) => {
      returnValue.push(_dropUndefinedKeys(item, memoizationMap));
    });

    return returnValue ;
  }

  return inputValue;
}

function isPojo(input) {
  if (!isPlainObject(input)) {
    return false;
  }

  try {
    const name = (Object.getPrototypeOf(input) ).constructor.name;
    return !name || name === 'Object';
  } catch (e2) {
    return true;
  }
}

/**
 * Ensure that something is an object.
 *
 * Turns `undefined` and `null` into `String`s and all other primitives into instances of their respective wrapper
 * classes (String, Boolean, Number, etc.). Acts as the identity function on non-primitives.
 *
 * @param wat The subject of the objectification
 * @returns A version of `wat` which can safely be used with `Object` class methods
 */
function objectify(wat) {
  let objectified;
  switch (true) {
    // this will catch both undefined and null
    case wat == undefined:
      objectified = new String(wat);
      break;

    // Though symbols and bigints do have wrapper classes (`Symbol` and `BigInt`, respectively), for whatever reason
    // those classes don't have constructors which can be used with the `new` keyword. We therefore need to cast each as
    // an object in order to wrap it.
    case typeof wat === 'symbol' || typeof wat === 'bigint':
      objectified = Object(wat);
      break;

    // this will catch the remaining primitives: `String`, `Number`, and `Boolean`
    case isPrimitive(wat):
      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
      objectified = new (wat ).constructor(wat);
      break;

    // by process of elimination, at this point we know that `wat` must already be an object
    default:
      objectified = wat;
      break;
  }
  return objectified;
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/misc.js




/**
 * UUID4 generator
 *
 * @returns string Generated UUID4.
 */
function misc_uuid4() {
  const gbl = worldwide_GLOBAL_OBJ ;
  const crypto = gbl.crypto || gbl.msCrypto;

  let getRandomByte = () => Math.random() * 16;
  try {
    if (crypto && crypto.randomUUID) {
      return crypto.randomUUID().replace(/-/g, '');
    }
    if (crypto && crypto.getRandomValues) {
      getRandomByte = () => {
        // crypto.getRandomValues might return undefined instead of the typed array
        // in old Chromium versions (e.g. 23.0.1235.0 (151422))
        // However, `typedArray` is still filled in-place.
        // @see https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues#typedarray
        const typedArray = new Uint8Array(1);
        crypto.getRandomValues(typedArray);
        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
        return typedArray[0];
      };
    }
  } catch (_) {
    // some runtimes can crash invoking crypto
    // https://github.com/getsentry/sentry-javascript/issues/8935
  }

  // http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/2117523#2117523
  // Concatenating the following numbers as strings results in '10000000100040008000100000000000'
  return (([1e7] ) + 1e3 + 4e3 + 8e3 + 1e11).replace(/[018]/g, c =>
    // eslint-disable-next-line no-bitwise
    ((c ) ^ ((getRandomByte() & 15) >> ((c ) / 4))).toString(16),
  );
}

function getFirstException(event) {
  return event.exception && event.exception.values ? event.exception.values[0] : undefined;
}

/**
 * Extracts either message or type+value from an event that can be used for user-facing logs
 * @returns event's description
 */
function getEventDescription(event) {
  const { message, event_id: eventId } = event;
  if (message) {
    return message;
  }

  const firstException = getFirstException(event);
  if (firstException) {
    if (firstException.type && firstException.value) {
      return `${firstException.type}: ${firstException.value}`;
    }
    return firstException.type || firstException.value || eventId || '<unknown>';
  }
  return eventId || '<unknown>';
}

/**
 * Adds exception values, type and value to an synthetic Exception.
 * @param event The event to modify.
 * @param value Value of the exception.
 * @param type Type of the exception.
 * @hidden
 */
function addExceptionTypeValue(event, value, type) {
  const exception = (event.exception = event.exception || {});
  const values = (exception.values = exception.values || []);
  const firstException = (values[0] = values[0] || {});
  if (!firstException.value) {
    firstException.value = value || '';
  }
  if (!firstException.type) {
    firstException.type = type || 'Error';
  }
}

/**
 * Adds exception mechanism data to a given event. Uses defaults if the second parameter is not passed.
 *
 * @param event The event to modify.
 * @param newMechanism Mechanism data to add to the event.
 * @hidden
 */
function addExceptionMechanism(event, newMechanism) {
  const firstException = getFirstException(event);
  if (!firstException) {
    return;
  }

  const defaultMechanism = { type: 'generic', handled: true };
  const currentMechanism = firstException.mechanism;
  firstException.mechanism = { ...defaultMechanism, ...currentMechanism, ...newMechanism };

  if (newMechanism && 'data' in newMechanism) {
    const mergedData = { ...(currentMechanism && currentMechanism.data), ...newMechanism.data };
    firstException.mechanism.data = mergedData;
  }
}

// https://semver.org/#is-there-a-suggested-regular-expression-regex-to-check-a-semver-string
const SEMVER_REGEXP =
  /^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/;

/**
 * Represents Semantic Versioning object
 */

function _parseInt(input) {
  return parseInt(input || '', 10);
}

/**
 * Parses input into a SemVer interface
 * @param input string representation of a semver version
 */
function parseSemver(input) {
  const match = input.match(SEMVER_REGEXP) || [];
  const major = _parseInt(match[1]);
  const minor = _parseInt(match[2]);
  const patch = _parseInt(match[3]);
  return {
    buildmetadata: match[5],
    major: isNaN(major) ? undefined : major,
    minor: isNaN(minor) ? undefined : minor,
    patch: isNaN(patch) ? undefined : patch,
    prerelease: match[4],
  };
}

/**
 * This function adds context (pre/post/line) lines to the provided frame
 *
 * @param lines string[] containing all lines
 * @param frame StackFrame that will be mutated
 * @param linesOfContext number of context lines we want to add pre/post
 */
function addContextToFrame(lines, frame, linesOfContext = 5) {
  // When there is no line number in the frame, attaching context is nonsensical and will even break grouping
  if (frame.lineno === undefined) {
    return;
  }

  const maxLines = lines.length;
  const sourceLine = Math.max(Math.min(maxLines - 1, frame.lineno - 1), 0);

  frame.pre_context = lines
    .slice(Math.max(0, sourceLine - linesOfContext), sourceLine)
    .map((line) => snipLine(line, 0));

  // We guard here to ensure this is not larger than the existing number of lines
  const lineIndex = Math.min(maxLines - 1, sourceLine);

  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
  frame.context_line = snipLine(lines[lineIndex], frame.colno || 0);

  frame.post_context = lines
    .slice(Math.min(sourceLine + 1, maxLines), sourceLine + 1 + linesOfContext)
    .map((line) => snipLine(line, 0));
}

/**
 * Checks whether or not we've already captured the given exception (note: not an identical exception - the very object
 * in question), and marks it captured if not.
 *
 * This is useful because it's possible for an error to get captured by more than one mechanism. After we intercept and
 * record an error, we rethrow it (assuming we've intercepted it before it's reached the top-level global handlers), so
 * that we don't interfere with whatever effects the error might have had were the SDK not there. At that point, because
 * the error has been rethrown, it's possible for it to bubble up to some other code we've instrumented. If it's not
 * caught after that, it will bubble all the way up to the global handlers (which of course we also instrument). This
 * function helps us ensure that even if we encounter the same error more than once, we only record it the first time we
 * see it.
 *
 * Note: It will ignore primitives (always return `false` and not mark them as seen), as properties can't be set on
 * them. {@link: Object.objectify} can be used on exceptions to convert any that are primitives into their equivalent
 * object wrapper forms so that this check will always work. However, because we need to flag the exact object which
 * will get rethrown, and because that rethrowing happens outside of the event processing pipeline, the objectification
 * must be done before the exception captured.
 *
 * @param A thrown exception to check or flag as having been seen
 * @returns `true` if the exception has already been captured, `false` if not (with the side effect of marking it seen)
 */
function checkOrSetAlreadyCaught(exception) {
  if (isAlreadyCaptured(exception)) {
    return true;
  }

  try {
    // set it this way rather than by assignment so that it's not ennumerable and therefore isn't recorded by the
    // `ExtraErrorData` integration
    object_addNonEnumerableProperty(exception , '__sentry_captured__', true);
  } catch (err) {
    // `exception` is a primitive, so we can't mark it seen
  }

  return false;
}

function isAlreadyCaptured(exception) {
  try {
    return (exception ).__sentry_captured__;
  } catch (e) {} // eslint-disable-line no-empty
}

/**
 * Checks whether the given input is already an array, and if it isn't, wraps it in one.
 *
 * @param maybeArray Input to turn into an array, if necessary
 * @returns The input, if already an array, or an array with the input as the only element, if not
 *
 * @deprecated This function has been deprecated and will not be replaced.
 */
function arrayify(maybeArray) {
  return Array.isArray(maybeArray) ? maybeArray : [maybeArray];
}



;// ../../node_modules/@sentry/core/build/esm/integrations/inboundfilters.js






// "Script error." is hard coded into browsers for errors that it can't read.
// this is the result of a script being pulled in from an external domain and CORS.
const DEFAULT_IGNORE_ERRORS = [
  /^Script error\.?$/,
  /^Javascript error: Script error\.? on line 0$/,
  /^ResizeObserver loop completed with undelivered notifications.$/, // The browser logs this when a ResizeObserver handler takes a bit longer. Usually this is not an actual issue though. It indicates slowness.
  /^Cannot redefine property: googletag$/, // This is thrown when google tag manager is used in combination with an ad blocker
  "undefined is not an object (evaluating 'a.L')", // Random error that happens but not actionable or noticeable to end-users.
  'can\'t redefine non-configurable property "solana"', // Probably a browser extension or custom browser (Brave) throwing this error
  "vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)", // Error thrown by GTM, seemingly not affecting end-users
  "Can't find variable: _AutofillCallbackHandler", // Unactionable error in instagram webview https://developers.facebook.com/community/threads/320013549791141/
  /^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/, // unactionable error from CEFSharp, a .NET library that embeds chromium in .NET apps
];

/** Options for the InboundFilters integration */

const INTEGRATION_NAME = 'InboundFilters';
const _inboundFiltersIntegration = ((options = {}) => {
  return {
    name: INTEGRATION_NAME,
    processEvent(event, _hint, client) {
      const clientOptions = client.getOptions();
      const mergedOptions = _mergeOptions(options, clientOptions);
      return _shouldDropEvent(event, mergedOptions) ? null : event;
    },
  };
}) ;

const inboundFiltersIntegration = defineIntegration(_inboundFiltersIntegration);

function _mergeOptions(
  internalOptions = {},
  clientOptions = {},
) {
  return {
    allowUrls: [...(internalOptions.allowUrls || []), ...(clientOptions.allowUrls || [])],
    denyUrls: [...(internalOptions.denyUrls || []), ...(clientOptions.denyUrls || [])],
    ignoreErrors: [
      ...(internalOptions.ignoreErrors || []),
      ...(clientOptions.ignoreErrors || []),
      ...(internalOptions.disableErrorDefaults ? [] : DEFAULT_IGNORE_ERRORS),
    ],
    ignoreTransactions: [...(internalOptions.ignoreTransactions || []), ...(clientOptions.ignoreTransactions || [])],
    ignoreInternal: internalOptions.ignoreInternal !== undefined ? internalOptions.ignoreInternal : true,
  };
}

function _shouldDropEvent(event, options) {
  if (options.ignoreInternal && _isSentryError(event)) {
    debug_build_DEBUG_BUILD &&
      logger_logger.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${getEventDescription(event)}`);
    return true;
  }
  if (_isIgnoredError(event, options.ignoreErrors)) {
    debug_build_DEBUG_BUILD &&
      logger_logger.warn(
        `Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${getEventDescription(event)}`,
      );
    return true;
  }
  if (_isUselessError(event)) {
    debug_build_DEBUG_BUILD &&
      logger_logger.warn(
        `Event dropped due to not having an error message, error type or stacktrace.\nEvent: ${getEventDescription(
          event,
        )}`,
      );
    return true;
  }
  if (_isIgnoredTransaction(event, options.ignoreTransactions)) {
    debug_build_DEBUG_BUILD &&
      logger_logger.warn(
        `Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${getEventDescription(event)}`,
      );
    return true;
  }
  if (_isDeniedUrl(event, options.denyUrls)) {
    debug_build_DEBUG_BUILD &&
      logger_logger.warn(
        `Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${getEventDescription(
          event,
        )}.\nUrl: ${_getEventFilterUrl(event)}`,
      );
    return true;
  }
  if (!_isAllowedUrl(event, options.allowUrls)) {
    debug_build_DEBUG_BUILD &&
      logger_logger.warn(
        `Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${getEventDescription(
          event,
        )}.\nUrl: ${_getEventFilterUrl(event)}`,
      );
    return true;
  }
  return false;
}

function _isIgnoredError(event, ignoreErrors) {
  // If event.type, this is not an error
  if (event.type || !ignoreErrors || !ignoreErrors.length) {
    return false;
  }

  return _getPossibleEventMessages(event).some(message => stringMatchesSomePattern(message, ignoreErrors));
}

function _isIgnoredTransaction(event, ignoreTransactions) {
  if (event.type !== 'transaction' || !ignoreTransactions || !ignoreTransactions.length) {
    return false;
  }

  const name = event.transaction;
  return name ? stringMatchesSomePattern(name, ignoreTransactions) : false;
}

function _isDeniedUrl(event, denyUrls) {
  // TODO: Use Glob instead?
  if (!denyUrls || !denyUrls.length) {
    return false;
  }
  const url = _getEventFilterUrl(event);
  return !url ? false : stringMatchesSomePattern(url, denyUrls);
}

function _isAllowedUrl(event, allowUrls) {
  // TODO: Use Glob instead?
  if (!allowUrls || !allowUrls.length) {
    return true;
  }
  const url = _getEventFilterUrl(event);
  return !url ? true : stringMatchesSomePattern(url, allowUrls);
}

function _getPossibleEventMessages(event) {
  const possibleMessages = [];

  if (event.message) {
    possibleMessages.push(event.message);
  }

  let lastException;
  try {
    // @ts-expect-error Try catching to save bundle size
    lastException = event.exception.values[event.exception.values.length - 1];
  } catch (e) {
    // try catching to save bundle size checking existence of variables
  }

  if (lastException) {
    if (lastException.value) {
      possibleMessages.push(lastException.value);
      if (lastException.type) {
        possibleMessages.push(`${lastException.type}: ${lastException.value}`);
      }
    }
  }

  return possibleMessages;
}

function _isSentryError(event) {
  try {
    // @ts-expect-error can't be a sentry error if undefined
    return event.exception.values[0].type === 'SentryError';
  } catch (e) {
    // ignore
  }
  return false;
}

function _getLastValidUrl(frames = []) {
  for (let i = frames.length - 1; i >= 0; i--) {
    const frame = frames[i];

    if (frame && frame.filename !== '<anonymous>' && frame.filename !== '[native code]') {
      return frame.filename || null;
    }
  }

  return null;
}

function _getEventFilterUrl(event) {
  try {
    let frames;
    try {
      // @ts-expect-error we only care about frames if the whole thing here is defined
      frames = event.exception.values[0].stacktrace.frames;
    } catch (e) {
      // ignore
    }
    return frames ? _getLastValidUrl(frames) : null;
  } catch (oO) {
    debug_build_DEBUG_BUILD && logger_logger.error(`Cannot extract url for event ${getEventDescription(event)}`);
    return null;
  }
}

function _isUselessError(event) {
  if (event.type) {
    // event is not an error
    return false;
  }

  // We only want to consider events for dropping that actually have recorded exception values.
  if (!event.exception || !event.exception.values || event.exception.values.length === 0) {
    return false;
  }

  return (
    // No top-level message
    !event.message &&
    // There are no exception values that have a stacktrace, a non-generic-Error type or value
    !event.exception.values.some(value => value.stacktrace || (value.type && value.type !== 'Error') || value.value)
  );
}



;// ../../node_modules/@sentry/core/build/esm/carrier.js



/**
 * An object that contains globally accessible properties and maintains a scope stack.
 * @hidden
 */

/**
 * Returns the global shim registry.
 *
 * FIXME: This function is problematic, because despite always returning a valid Carrier,
 * it has an optional `__SENTRY__` property, which then in turn requires us to always perform an unnecessary check
 * at the call-site. We always access the carrier through this function, so we can guarantee that `__SENTRY__` is there.
 **/
function carrier_getMainCarrier() {
  // This ensures a Sentry carrier exists
  carrier_getSentryCarrier(worldwide_GLOBAL_OBJ);
  return worldwide_GLOBAL_OBJ;
}

/** Will either get the existing sentry carrier, or create a new one. */
function carrier_getSentryCarrier(carrier) {
  const __SENTRY__ = (carrier.__SENTRY__ = carrier.__SENTRY__ || {});

  // For now: First SDK that sets the .version property wins
  __SENTRY__.version = __SENTRY__.version || SDK_VERSION;

  // Intentionally populating and returning the version of "this" SDK instance
  // rather than what's set in .version so that "this" SDK always gets its carrier
  return (__SENTRY__[SDK_VERSION] = __SENTRY__[SDK_VERSION] || {});
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/time.js


const ONE_SECOND_IN_MS = 1000;

/**
 * A partial definition of the [Performance Web API]{@link https://developer.mozilla.org/en-US/docs/Web/API/Performance}
 * for accessing a high-resolution monotonic clock.
 */

/**
 * Returns a timestamp in seconds since the UNIX epoch using the Date API.
 *
 * TODO(v8): Return type should be rounded.
 */
function dateTimestampInSeconds() {
  return Date.now() / ONE_SECOND_IN_MS;
}

/**
 * Returns a wrapper around the native Performance API browser implementation, or undefined for browsers that do not
 * support the API.
 *
 * Wrapping the native API works around differences in behavior from different browsers.
 */
function createUnixTimestampInSecondsFunc() {
  const { performance } = worldwide_GLOBAL_OBJ ;
  if (!performance || !performance.now) {
    return dateTimestampInSeconds;
  }

  // Some browser and environments don't have a timeOrigin, so we fallback to
  // using Date.now() to compute the starting time.
  const approxStartingTimeOrigin = Date.now() - performance.now();
  const timeOrigin = performance.timeOrigin == undefined ? approxStartingTimeOrigin : performance.timeOrigin;

  // performance.now() is a monotonic clock, which means it starts at 0 when the process begins. To get the current
  // wall clock time (actual UNIX timestamp), we need to add the starting time origin and the current time elapsed.
  //
  // TODO: This does not account for the case where the monotonic clock that powers performance.now() drifts from the
  // wall clock time, which causes the returned timestamp to be inaccurate. We should investigate how to detect and
  // correct for this.
  // See: https://github.com/getsentry/sentry-javascript/issues/2590
  // See: https://github.com/mdn/content/issues/4713
  // See: https://dev.to/noamr/when-a-millisecond-is-not-a-millisecond-3h6
  return () => {
    return (timeOrigin + performance.now()) / ONE_SECOND_IN_MS;
  };
}

/**
 * Returns a timestamp in seconds since the UNIX epoch using either the Performance or Date APIs, depending on the
 * availability of the Performance API.
 *
 * BUG: Note that because of how browsers implement the Performance API, the clock might stop when the computer is
 * asleep. This creates a skew between `dateTimestampInSeconds` and `timestampInSeconds`. The
 * skew can grow to arbitrary amounts like days, weeks or months.
 * See https://github.com/getsentry/sentry-javascript/issues/2590.
 */
const time_timestampInSeconds = createUnixTimestampInSecondsFunc();

/**
 * Internal helper to store what is the source of browserPerformanceTimeOrigin below. For debugging only.
 *
 * @deprecated This variable will be removed in the next major version.
 */
let _browserPerformanceTimeOriginMode;

/**
 * The number of milliseconds since the UNIX epoch. This value is only usable in a browser, and only when the
 * performance API is available.
 */
const browserPerformanceTimeOrigin = (() => {
  // Unfortunately browsers may report an inaccurate time origin data, through either performance.timeOrigin or
  // performance.timing.navigationStart, which results in poor results in performance data. We only treat time origin
  // data as reliable if they are within a reasonable threshold of the current time.

  const { performance } = worldwide_GLOBAL_OBJ ;
  if (!performance || !performance.now) {
    // eslint-disable-next-line deprecation/deprecation
    _browserPerformanceTimeOriginMode = 'none';
    return undefined;
  }

  const threshold = 3600 * 1000;
  const performanceNow = performance.now();
  const dateNow = Date.now();

  // if timeOrigin isn't available set delta to threshold so it isn't used
  const timeOriginDelta = performance.timeOrigin
    ? Math.abs(performance.timeOrigin + performanceNow - dateNow)
    : threshold;
  const timeOriginIsReliable = timeOriginDelta < threshold;

  // While performance.timing.navigationStart is deprecated in favor of performance.timeOrigin, performance.timeOrigin
  // is not as widely supported. Namely, performance.timeOrigin is undefined in Safari as of writing.
  // Also as of writing, performance.timing is not available in Web Workers in mainstream browsers, so it is not always
  // a valid fallback. In the absence of an initial time provided by the browser, fallback to the current time from the
  // Date API.
  // eslint-disable-next-line deprecation/deprecation
  const navigationStart = performance.timing && performance.timing.navigationStart;
  const hasNavigationStart = typeof navigationStart === 'number';
  // if navigationStart isn't available set delta to threshold so it isn't used
  const navigationStartDelta = hasNavigationStart ? Math.abs(navigationStart + performanceNow - dateNow) : threshold;
  const navigationStartIsReliable = navigationStartDelta < threshold;

  if (timeOriginIsReliable || navigationStartIsReliable) {
    // Use the more reliable time origin
    if (timeOriginDelta <= navigationStartDelta) {
      // eslint-disable-next-line deprecation/deprecation
      _browserPerformanceTimeOriginMode = 'timeOrigin';
      return performance.timeOrigin;
    } else {
      // eslint-disable-next-line deprecation/deprecation
      _browserPerformanceTimeOriginMode = 'navigationStart';
      return navigationStart;
    }
  }

  // Either both timeOrigin and navigationStart are skewed or neither is available, fallback to Date.
  // eslint-disable-next-line deprecation/deprecation
  _browserPerformanceTimeOriginMode = 'dateNow';
  return dateNow;
})();



;// ../../node_modules/@sentry/core/build/esm/session.js







/**
 * Creates a new `Session` object by setting certain default parameters. If optional @param context
 * is passed, the passed properties are applied to the session object.
 *
 * @param context (optional) additional properties to be applied to the returned session object
 *
 * @returns a new `Session` object
 */
function makeSession(context) {
  // Both timestamp and started are in seconds since the UNIX epoch.
  const startingTime = time_timestampInSeconds();

  const session = {
    sid: misc_uuid4(),
    init: true,
    timestamp: startingTime,
    started: startingTime,
    duration: 0,
    status: 'ok',
    errors: 0,
    ignoreDuration: false,
    toJSON: () => sessionToJSON(session),
  };

  if (context) {
    updateSession(session, context);
  }

  return session;
}

/**
 * Updates a session object with the properties passed in the context.
 *
 * Note that this function mutates the passed object and returns void.
 * (Had to do this instead of returning a new and updated session because closing and sending a session
 * makes an update to the session after it was passed to the sending logic.
 * @see BaseClient.captureSession )
 *
 * @param session the `Session` to update
 * @param context the `SessionContext` holding the properties that should be updated in @param session
 */
// eslint-disable-next-line complexity
function updateSession(session, context = {}) {
  if (context.user) {
    if (!session.ipAddress && context.user.ip_address) {
      session.ipAddress = context.user.ip_address;
    }

    if (!session.did && !context.did) {
      session.did = context.user.id || context.user.email || context.user.username;
    }
  }

  session.timestamp = context.timestamp || time_timestampInSeconds();

  if (context.abnormal_mechanism) {
    session.abnormal_mechanism = context.abnormal_mechanism;
  }

  if (context.ignoreDuration) {
    session.ignoreDuration = context.ignoreDuration;
  }
  if (context.sid) {
    // Good enough uuid validation.  Kamil
    session.sid = context.sid.length === 32 ? context.sid : misc_uuid4();
  }
  if (context.init !== undefined) {
    session.init = context.init;
  }
  if (!session.did && context.did) {
    session.did = `${context.did}`;
  }
  if (typeof context.started === 'number') {
    session.started = context.started;
  }
  if (session.ignoreDuration) {
    session.duration = undefined;
  } else if (typeof context.duration === 'number') {
    session.duration = context.duration;
  } else {
    const duration = session.timestamp - session.started;
    session.duration = duration >= 0 ? duration : 0;
  }
  if (context.release) {
    session.release = context.release;
  }
  if (context.environment) {
    session.environment = context.environment;
  }
  if (!session.ipAddress && context.ipAddress) {
    session.ipAddress = context.ipAddress;
  }
  if (!session.userAgent && context.userAgent) {
    session.userAgent = context.userAgent;
  }
  if (typeof context.errors === 'number') {
    session.errors = context.errors;
  }
  if (context.status) {
    session.status = context.status;
  }
}

/**
 * Closes a session by setting its status and updating the session object with it.
 * Internally calls `updateSession` to update the passed session object.
 *
 * Note that this function mutates the passed session (@see updateSession for explanation).
 *
 * @param session the `Session` object to be closed
 * @param status the `SessionStatus` with which the session was closed. If you don't pass a status,
 *               this function will keep the previously set status, unless it was `'ok'` in which case
 *               it is changed to `'exited'`.
 */
function closeSession(session, status) {
  let context = {};
  if (status) {
    context = { status };
  } else if (session.status === 'ok') {
    context = { status: 'exited' };
  }

  updateSession(session, context);
}

/**
 * Serializes a passed session object to a JSON object with a slightly different structure.
 * This is necessary because the Sentry backend requires a slightly different schema of a session
 * than the one the JS SDKs use internally.
 *
 * @param session the session to be converted
 *
 * @returns a JSON object of the passed session
 */
function sessionToJSON(session) {
  return object_dropUndefinedKeys({
    sid: `${session.sid}`,
    init: session.init,
    // Make sure that sec is converted to ms for date constructor
    started: new Date(session.started * 1000).toISOString(),
    timestamp: new Date(session.timestamp * 1000).toISOString(),
    status: session.status,
    errors: session.errors,
    did: typeof session.did === 'number' || typeof session.did === 'string' ? `${session.did}` : undefined,
    duration: session.duration,
    abnormal_mechanism: session.abnormal_mechanism,
    attrs: {
      release: session.release,
      environment: session.environment,
      ip_address: session.ipAddress,
      user_agent: session.userAgent,
    },
  });
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/propagationContext.js


/**
 * Returns a new minimal propagation context.
 *
 * @deprecated Use `generateTraceId` and `generateSpanId` instead.
 */
function generatePropagationContext() {
  return {
    traceId: generateTraceId(),
    spanId: generateSpanId(),
  };
}

/**
 * Generate a random, valid trace ID.
 */
function generateTraceId() {
  return misc_uuid4();
}

/**
 * Generate a random, valid span ID.
 */
function generateSpanId() {
  return misc_uuid4().substring(16);
}



;// ../../node_modules/@sentry/core/build/esm/utils/merge.js
/**
 * Shallow merge two objects.
 * Does not mutate the passed in objects.
 * Undefined/empty values in the merge object will overwrite existing values.
 *
 * By default, this merges 2 levels deep.
 */
function merge(initialObj, mergeObj, levels = 2) {
  // If the merge value is not an object, or we have no merge levels left,
  // we just set the value to the merge value
  if (!mergeObj || typeof mergeObj !== 'object' || levels <= 0) {
    return mergeObj;
  }

  // If the merge object is an empty object, and the initial object is not undefined, we return the initial object
  if (initialObj && mergeObj && Object.keys(mergeObj).length === 0) {
    return initialObj;
  }

  // Clone object
  const output = { ...initialObj };

  // Merge values into output, resursively
  for (const key in mergeObj) {
    if (Object.prototype.hasOwnProperty.call(mergeObj, key)) {
      output[key] = merge(output[key], mergeObj[key], levels - 1);
    }
  }

  return output;
}



;// ../../node_modules/@sentry/core/build/esm/utils/spanOnScope.js


const SCOPE_SPAN_FIELD = '_sentrySpan';

/**
 * Set the active span for a given scope.
 * NOTE: This should NOT be used directly, but is only used internally by the trace methods.
 */
function _setSpanForScope(scope, span) {
  if (span) {
    object_addNonEnumerableProperty(scope , SCOPE_SPAN_FIELD, span);
  } else {
    // eslint-disable-next-line @typescript-eslint/no-dynamic-delete
    delete (scope )[SCOPE_SPAN_FIELD];
  }
}

/**
 * Get the active span for a given scope.
 * NOTE: This should NOT be used directly, but is only used internally by the trace methods.
 */
function spanOnScope_getSpanForScope(scope) {
  return scope[SCOPE_SPAN_FIELD];
}



;// ../../node_modules/@sentry/core/build/esm/scope.js









/**
 * Default value for maximum number of breadcrumbs added to an event.
 */
const DEFAULT_MAX_BREADCRUMBS = 100;

/**
 * Holds additional event information.
 */
class ScopeClass  {
  /** Flag if notifying is happening. */

  /** Callback for client to receive scope changes. */

  /** Callback list that will be called during event processing. */

  /** Array of breadcrumbs. */

  /** User */

  /** Tags */

  /** Extra */

  /** Contexts */

  /** Attachments */

  /** Propagation Context for distributed tracing */

  /**
   * A place to stash data which is needed at some point in the SDK's event processing pipeline but which shouldn't get
   * sent to Sentry
   */

  /** Fingerprint */

  /** Severity */

  /**
   * Transaction Name
   *
   * IMPORTANT: The transaction name on the scope has nothing to do with root spans/transaction objects.
   * It's purpose is to assign a transaction to the scope that's added to non-transaction events.
   */

  /** Session */

  /** Request Mode Session Status */
  // eslint-disable-next-line deprecation/deprecation

  /** The client on this scope */

  /** Contains the last event id of a captured event.  */

  // NOTE: Any field which gets added here should get added not only to the constructor but also to the `clone` method.

   constructor() {
    this._notifyingListeners = false;
    this._scopeListeners = [];
    this._eventProcessors = [];
    this._breadcrumbs = [];
    this._attachments = [];
    this._user = {};
    this._tags = {};
    this._extra = {};
    this._contexts = {};
    this._sdkProcessingMetadata = {};
    this._propagationContext = {
      traceId: generateTraceId(),
      spanId: generateSpanId(),
    };
  }

  /**
   * @inheritDoc
   */
   clone() {
    const newScope = new ScopeClass();
    newScope._breadcrumbs = [...this._breadcrumbs];
    newScope._tags = { ...this._tags };
    newScope._extra = { ...this._extra };
    newScope._contexts = { ...this._contexts };
    if (this._contexts.flags) {
      // We need to copy the `values` array so insertions on a cloned scope
      // won't affect the original array.
      newScope._contexts.flags = {
        values: [...this._contexts.flags.values],
      };
    }

    newScope._user = this._user;
    newScope._level = this._level;
    newScope._session = this._session;
    newScope._transactionName = this._transactionName;
    newScope._fingerprint = this._fingerprint;
    newScope._eventProcessors = [...this._eventProcessors];
    newScope._requestSession = this._requestSession;
    newScope._attachments = [...this._attachments];
    newScope._sdkProcessingMetadata = { ...this._sdkProcessingMetadata };
    newScope._propagationContext = { ...this._propagationContext };
    newScope._client = this._client;
    newScope._lastEventId = this._lastEventId;

    _setSpanForScope(newScope, spanOnScope_getSpanForScope(this));

    return newScope;
  }

  /**
   * @inheritDoc
   */
   setClient(client) {
    this._client = client;
  }

  /**
   * @inheritDoc
   */
   setLastEventId(lastEventId) {
    this._lastEventId = lastEventId;
  }

  /**
   * @inheritDoc
   */
   getClient() {
    return this._client ;
  }

  /**
   * @inheritDoc
   */
   lastEventId() {
    return this._lastEventId;
  }

  /**
   * @inheritDoc
   */
   addScopeListener(callback) {
    this._scopeListeners.push(callback);
  }

  /**
   * @inheritDoc
   */
   addEventProcessor(callback) {
    this._eventProcessors.push(callback);
    return this;
  }

  /**
   * @inheritDoc
   */
   setUser(user) {
    // If null is passed we want to unset everything, but still define keys,
    // so that later down in the pipeline any existing values are cleared.
    this._user = user || {
      email: undefined,
      id: undefined,
      ip_address: undefined,
      username: undefined,
    };

    if (this._session) {
      updateSession(this._session, { user });
    }

    this._notifyScopeListeners();
    return this;
  }

  /**
   * @inheritDoc
   */
   getUser() {
    return this._user;
  }

  /**
   * @inheritDoc
   */
  // eslint-disable-next-line deprecation/deprecation
   getRequestSession() {
    return this._requestSession;
  }

  /**
   * @inheritDoc
   */
  // eslint-disable-next-line deprecation/deprecation
   setRequestSession(requestSession) {
    this._requestSession = requestSession;
    return this;
  }

  /**
   * @inheritDoc
   */
   setTags(tags) {
    this._tags = {
      ...this._tags,
      ...tags,
    };
    this._notifyScopeListeners();
    return this;
  }

  /**
   * @inheritDoc
   */
   setTag(key, value) {
    this._tags = { ...this._tags, [key]: value };
    this._notifyScopeListeners();
    return this;
  }

  /**
   * @inheritDoc
   */
   setExtras(extras) {
    this._extra = {
      ...this._extra,
      ...extras,
    };
    this._notifyScopeListeners();
    return this;
  }

  /**
   * @inheritDoc
   */
   setExtra(key, extra) {
    this._extra = { ...this._extra, [key]: extra };
    this._notifyScopeListeners();
    return this;
  }

  /**
   * @inheritDoc
   */
   setFingerprint(fingerprint) {
    this._fingerprint = fingerprint;
    this._notifyScopeListeners();
    return this;
  }

  /**
   * @inheritDoc
   */
   setLevel(level) {
    this._level = level;
    this._notifyScopeListeners();
    return this;
  }

  /**
   * Sets the transaction name on the scope so that the name of e.g. taken server route or
   * the page location is attached to future events.
   *
   * IMPORTANT: Calling this function does NOT change the name of the currently active
   * root span. If you want to change the name of the active root span, use
   * `Sentry.updateSpanName(rootSpan, 'new name')` instead.
   *
   * By default, the SDK updates the scope's transaction name automatically on sensible
   * occasions, such as a page navigation or when handling a new request on the server.
   */
   setTransactionName(name) {
    this._transactionName = name;
    this._notifyScopeListeners();
    return this;
  }

  /**
   * @inheritDoc
   */
   setContext(key, context) {
    if (context === null) {
      // eslint-disable-next-line @typescript-eslint/no-dynamic-delete
      delete this._contexts[key];
    } else {
      this._contexts[key] = context;
    }

    this._notifyScopeListeners();
    return this;
  }

  /**
   * @inheritDoc
   */
   setSession(session) {
    if (!session) {
      delete this._session;
    } else {
      this._session = session;
    }
    this._notifyScopeListeners();
    return this;
  }

  /**
   * @inheritDoc
   */
   getSession() {
    return this._session;
  }

  /**
   * @inheritDoc
   */
   update(captureContext) {
    if (!captureContext) {
      return this;
    }

    const scopeToMerge = typeof captureContext === 'function' ? captureContext(this) : captureContext;

    const [scopeInstance, requestSession] =
      scopeToMerge instanceof Scope
        ? // eslint-disable-next-line deprecation/deprecation
          [scopeToMerge.getScopeData(), scopeToMerge.getRequestSession()]
        : isPlainObject(scopeToMerge)
          ? [captureContext , (captureContext ).requestSession]
          : [];

    const { tags, extra, user, contexts, level, fingerprint = [], propagationContext } = scopeInstance || {};

    this._tags = { ...this._tags, ...tags };
    this._extra = { ...this._extra, ...extra };
    this._contexts = { ...this._contexts, ...contexts };

    if (user && Object.keys(user).length) {
      this._user = user;
    }

    if (level) {
      this._level = level;
    }

    if (fingerprint.length) {
      this._fingerprint = fingerprint;
    }

    if (propagationContext) {
      this._propagationContext = propagationContext;
    }

    if (requestSession) {
      this._requestSession = requestSession;
    }

    return this;
  }

  /**
   * @inheritDoc
   */
   clear() {
    // client is not cleared here on purpose!
    this._breadcrumbs = [];
    this._tags = {};
    this._extra = {};
    this._user = {};
    this._contexts = {};
    this._level = undefined;
    this._transactionName = undefined;
    this._fingerprint = undefined;
    this._requestSession = undefined;
    this._session = undefined;
    _setSpanForScope(this, undefined);
    this._attachments = [];
    this.setPropagationContext({ traceId: generateTraceId() });

    this._notifyScopeListeners();
    return this;
  }

  /**
   * @inheritDoc
   */
   addBreadcrumb(breadcrumb, maxBreadcrumbs) {
    const maxCrumbs = typeof maxBreadcrumbs === 'number' ? maxBreadcrumbs : DEFAULT_MAX_BREADCRUMBS;

    // No data has been changed, so don't notify scope listeners
    if (maxCrumbs <= 0) {
      return this;
    }

    const mergedBreadcrumb = {
      timestamp: dateTimestampInSeconds(),
      ...breadcrumb,
    };

    this._breadcrumbs.push(mergedBreadcrumb);
    if (this._breadcrumbs.length > maxCrumbs) {
      this._breadcrumbs = this._breadcrumbs.slice(-maxCrumbs);
      if (this._client) {
        this._client.recordDroppedEvent('buffer_overflow', 'log_item');
      }
    }

    this._notifyScopeListeners();

    return this;
  }

  /**
   * @inheritDoc
   */
   getLastBreadcrumb() {
    return this._breadcrumbs[this._breadcrumbs.length - 1];
  }

  /**
   * @inheritDoc
   */
   clearBreadcrumbs() {
    this._breadcrumbs = [];
    this._notifyScopeListeners();
    return this;
  }

  /**
   * @inheritDoc
   */
   addAttachment(attachment) {
    this._attachments.push(attachment);
    return this;
  }

  /**
   * @inheritDoc
   */
   clearAttachments() {
    this._attachments = [];
    return this;
  }

  /** @inheritDoc */
   getScopeData() {
    return {
      breadcrumbs: this._breadcrumbs,
      attachments: this._attachments,
      contexts: this._contexts,
      tags: this._tags,
      extra: this._extra,
      user: this._user,
      level: this._level,
      fingerprint: this._fingerprint || [],
      eventProcessors: this._eventProcessors,
      propagationContext: this._propagationContext,
      sdkProcessingMetadata: this._sdkProcessingMetadata,
      transactionName: this._transactionName,
      span: spanOnScope_getSpanForScope(this),
    };
  }

  /**
   * @inheritDoc
   */
   setSDKProcessingMetadata(newData) {
    this._sdkProcessingMetadata = merge(this._sdkProcessingMetadata, newData, 2);
    return this;
  }

  /**
   * @inheritDoc
   */
   setPropagationContext(
    context,
  ) {
    this._propagationContext = {
      // eslint-disable-next-line deprecation/deprecation
      spanId: generateSpanId(),
      ...context,
    };
    return this;
  }

  /**
   * @inheritDoc
   */
   getPropagationContext() {
    return this._propagationContext;
  }

  /**
   * @inheritDoc
   */
   captureException(exception, hint) {
    const eventId = hint && hint.event_id ? hint.event_id : misc_uuid4();

    if (!this._client) {
      logger_logger.warn('No client configured on scope - will not capture exception!');
      return eventId;
    }

    const syntheticException = new Error('Sentry syntheticException');

    this._client.captureException(
      exception,
      {
        originalException: exception,
        syntheticException,
        ...hint,
        event_id: eventId,
      },
      this,
    );

    return eventId;
  }

  /**
   * @inheritDoc
   */
   captureMessage(message, level, hint) {
    const eventId = hint && hint.event_id ? hint.event_id : misc_uuid4();

    if (!this._client) {
      logger_logger.warn('No client configured on scope - will not capture message!');
      return eventId;
    }

    const syntheticException = new Error(message);

    this._client.captureMessage(
      message,
      level,
      {
        originalException: message,
        syntheticException,
        ...hint,
        event_id: eventId,
      },
      this,
    );

    return eventId;
  }

  /**
   * @inheritDoc
   */
   captureEvent(event, hint) {
    const eventId = hint && hint.event_id ? hint.event_id : misc_uuid4();

    if (!this._client) {
      logger_logger.warn('No client configured on scope - will not capture event!');
      return eventId;
    }

    this._client.captureEvent(event, { ...hint, event_id: eventId }, this);

    return eventId;
  }

  /**
   * This will be called on every set call.
   */
   _notifyScopeListeners() {
    // We need this check for this._notifyingListeners to be able to work on scope during updates
    // If this check is not here we'll produce endless recursion when something is done with the scope
    // during the callback.
    if (!this._notifyingListeners) {
      this._notifyingListeners = true;
      this._scopeListeners.forEach(callback => {
        callback(this);
      });
      this._notifyingListeners = false;
    }
  }
}

/**
 * Holds additional event information.
 */
const Scope = ScopeClass;

/**
 * Holds additional event information.
 */



;// ../../node_modules/@sentry/core/build/esm/defaultScopes.js



/** Get the default current scope. */
function getDefaultCurrentScope() {
  return getGlobalSingleton('defaultCurrentScope', () => new Scope());
}

/** Get the default isolation scope. */
function getDefaultIsolationScope() {
  return getGlobalSingleton('defaultIsolationScope', () => new Scope());
}



;// ../../node_modules/@sentry/core/build/esm/asyncContext/stackStrategy.js





/**
 * This is an object that holds a stack of scopes.
 */
class AsyncContextStack {

   constructor(scope, isolationScope) {
    let assignedScope;
    if (!scope) {
      assignedScope = new Scope();
    } else {
      assignedScope = scope;
    }

    let assignedIsolationScope;
    if (!isolationScope) {
      assignedIsolationScope = new Scope();
    } else {
      assignedIsolationScope = isolationScope;
    }

    // scope stack for domains or the process
    this._stack = [{ scope: assignedScope }];
    this._isolationScope = assignedIsolationScope;
  }

  /**
   * Fork a scope for the stack.
   */
   withScope(callback) {
    const scope = this._pushScope();

    let maybePromiseResult;
    try {
      maybePromiseResult = callback(scope);
    } catch (e) {
      this._popScope();
      throw e;
    }

    if (is_isThenable(maybePromiseResult)) {
      // @ts-expect-error - isThenable returns the wrong type
      return maybePromiseResult.then(
        res => {
          this._popScope();
          return res;
        },
        e => {
          this._popScope();
          throw e;
        },
      );
    }

    this._popScope();
    return maybePromiseResult;
  }

  /**
   * Get the client of the stack.
   */
   getClient() {
    return this.getStackTop().client ;
  }

  /**
   * Returns the scope of the top stack.
   */
   getScope() {
    return this.getStackTop().scope;
  }

  /**
   * Get the isolation scope for the stack.
   */
   getIsolationScope() {
    return this._isolationScope;
  }

  /**
   * Returns the topmost scope layer in the order domain > local > process.
   */
   getStackTop() {
    return this._stack[this._stack.length - 1] ;
  }

  /**
   * Push a scope to the stack.
   */
   _pushScope() {
    // We want to clone the content of prev scope
    const scope = this.getScope().clone();
    this._stack.push({
      client: this.getClient(),
      scope,
    });
    return scope;
  }

  /**
   * Pop a scope from the stack.
   */
   _popScope() {
    if (this._stack.length <= 1) return false;
    return !!this._stack.pop();
  }
}

/**
 * Get the global async context stack.
 * This will be removed during the v8 cycle and is only here to make migration easier.
 */
function getAsyncContextStack() {
  const registry = carrier_getMainCarrier();
  const sentry = carrier_getSentryCarrier(registry);

  return (sentry.stack = sentry.stack || new AsyncContextStack(getDefaultCurrentScope(), getDefaultIsolationScope()));
}

function withScope(callback) {
  return getAsyncContextStack().withScope(callback);
}

function withSetScope(scope, callback) {
  const stack = getAsyncContextStack() ;
  return stack.withScope(() => {
    stack.getStackTop().scope = scope;
    return callback(scope);
  });
}

function stackStrategy_withIsolationScope(callback) {
  return getAsyncContextStack().withScope(() => {
    return callback(getAsyncContextStack().getIsolationScope());
  });
}

/**
 * Get the stack-based async context strategy.
 */
function getStackAsyncContextStrategy() {
  return {
    withIsolationScope: stackStrategy_withIsolationScope,
    withScope,
    withSetScope,
    withSetIsolationScope: (_isolationScope, callback) => {
      return stackStrategy_withIsolationScope(callback);
    },
    getCurrentScope: () => getAsyncContextStack().getScope(),
    getIsolationScope: () => getAsyncContextStack().getIsolationScope(),
  };
}



;// ../../node_modules/@sentry/core/build/esm/asyncContext/index.js



/**
 * @private Private API with no semver guarantees!
 *
 * Sets the global async context strategy
 */
function setAsyncContextStrategy(strategy) {
  // Get main carrier (global for every environment)
  const registry = getMainCarrier();
  const sentry = getSentryCarrier(registry);
  sentry.acs = strategy;
}

/**
 * Get the current async context strategy.
 * If none has been setup, the default will be used.
 */
function asyncContext_getAsyncContextStrategy(carrier) {
  const sentry = carrier_getSentryCarrier(carrier);

  if (sentry.acs) {
    return sentry.acs;
  }

  // Otherwise, use the default one (stack)
  return getStackAsyncContextStrategy();
}



;// ../../node_modules/@sentry/core/build/esm/currentScopes.js






/**
 * Get the currently active scope.
 */
function currentScopes_getCurrentScope() {
  const carrier = carrier_getMainCarrier();
  const acs = asyncContext_getAsyncContextStrategy(carrier);
  return acs.getCurrentScope();
}

/**
 * Get the currently active isolation scope.
 * The isolation scope is active for the current execution context.
 */
function currentScopes_getIsolationScope() {
  const carrier = carrier_getMainCarrier();
  const acs = asyncContext_getAsyncContextStrategy(carrier);
  return acs.getIsolationScope();
}

/**
 * Get the global scope.
 * This scope is applied to _all_ events.
 */
function getGlobalScope() {
  return getGlobalSingleton('globalScope', () => new Scope());
}

/**
 * Creates a new scope with and executes the given operation within.
 * The scope is automatically removed once the operation
 * finishes or throws.
 */

/**
 * Either creates a new active scope, or sets the given scope as active scope in the given callback.
 */
function currentScopes_withScope(
  ...rest
) {
  const carrier = carrier_getMainCarrier();
  const acs = asyncContext_getAsyncContextStrategy(carrier);

  // If a scope is defined, we want to make this the active scope instead of the default one
  if (rest.length === 2) {
    const [scope, callback] = rest;

    if (!scope) {
      return acs.withScope(callback);
    }

    return acs.withSetScope(scope, callback);
  }

  return acs.withScope(rest[0]);
}

/**
 * Attempts to fork the current isolation scope and the current scope based on the current async context strategy. If no
 * async context strategy is set, the isolation scope and the current scope will not be forked (this is currently the
 * case, for example, in the browser).
 *
 * Usage of this function in environments without async context strategy is discouraged and may lead to unexpected behaviour.
 *
 * This function is intended for Sentry SDK and SDK integration development. It is not recommended to be used in "normal"
 * applications directly because it comes with pitfalls. Use at your own risk!
 */

/**
 * Either creates a new active isolation scope, or sets the given isolation scope as active scope in the given callback.
 */
function currentScopes_withIsolationScope(
  ...rest

) {
  const carrier = getMainCarrier();
  const acs = getAsyncContextStrategy(carrier);

  // If a scope is defined, we want to make this the active scope instead of the default one
  if (rest.length === 2) {
    const [isolationScope, callback] = rest;

    if (!isolationScope) {
      return acs.withIsolationScope(callback);
    }

    return acs.withSetIsolationScope(isolationScope, callback);
  }

  return acs.withIsolationScope(rest[0]);
}

/**
 * Get the currently active client.
 */
function currentScopes_getClient() {
  return currentScopes_getCurrentScope().getClient();
}

/**
 * Get a trace context for the given scope.
 */
function getTraceContextFromScope(scope) {
  const propagationContext = scope.getPropagationContext();

  // TODO(v9): Use generateSpanId() instead of spanId
  // eslint-disable-next-line deprecation/deprecation
  const { traceId, spanId, parentSpanId } = propagationContext;

  const traceContext = object_dropUndefinedKeys({
    trace_id: traceId,
    span_id: spanId,
    parent_span_id: parentSpanId,
  });

  return traceContext;
}



;// ../../node_modules/@sentry/core/build/esm/integrations/functiontostring.js




let originalFunctionToString;

const functiontostring_INTEGRATION_NAME = 'FunctionToString';

const SETUP_CLIENTS = new WeakMap();

const _functionToStringIntegration = (() => {
  return {
    name: functiontostring_INTEGRATION_NAME,
    setupOnce() {
      // eslint-disable-next-line @typescript-eslint/unbound-method
      originalFunctionToString = Function.prototype.toString;

      // intrinsics (like Function.prototype) might be immutable in some environments
      // e.g. Node with --frozen-intrinsics, XS (an embedded JavaScript engine) or SES (a JavaScript proposal)
      try {
        Function.prototype.toString = function ( ...args) {
          const originalFunction = getOriginalFunction(this);
          const context =
            SETUP_CLIENTS.has(currentScopes_getClient() ) && originalFunction !== undefined ? originalFunction : this;
          return originalFunctionToString.apply(context, args);
        };
      } catch (e) {
        // ignore errors here, just don't patch this
      }
    },
    setup(client) {
      SETUP_CLIENTS.set(client, true);
    },
  };
}) ;

/**
 * Patch toString calls to return proper name for wrapped functions.
 *
 * ```js
 * Sentry.init({
 *   integrations: [
 *     functionToStringIntegration(),
 *   ],
 * });
 * ```
 */
const functionToStringIntegration = defineIntegration(_functionToStringIntegration);



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/stacktrace.js
const STACKTRACE_FRAME_LIMIT = 50;
const UNKNOWN_FUNCTION = '?';
// Used to sanitize webpack (error: *) wrapped stack errors
const WEBPACK_ERROR_REGEXP = /\(error: (.*)\)/;
const STRIP_FRAME_REGEXP = /captureMessage|captureException/;

/**
 * Creates a stack parser with the supplied line parsers
 *
 * StackFrames are returned in the correct order for Sentry Exception
 * frames and with Sentry SDK internal frames removed from the top and bottom
 *
 */
function createStackParser(...parsers) {
  const sortedParsers = parsers.sort((a, b) => a[0] - b[0]).map(p => p[1]);

  return (stack, skipFirstLines = 0, framesToPop = 0) => {
    const frames = [];
    const lines = stack.split('\n');

    for (let i = skipFirstLines; i < lines.length; i++) {
      const line = lines[i] ;
      // Ignore lines over 1kb as they are unlikely to be stack frames.
      // Many of the regular expressions use backtracking which results in run time that increases exponentially with
      // input size. Huge strings can result in hangs/Denial of Service:
      // https://github.com/getsentry/sentry-javascript/issues/2286
      if (line.length > 1024) {
        continue;
      }

      // https://github.com/getsentry/sentry-javascript/issues/5459
      // Remove webpack (error: *) wrappers
      const cleanedLine = WEBPACK_ERROR_REGEXP.test(line) ? line.replace(WEBPACK_ERROR_REGEXP, '$1') : line;

      // https://github.com/getsentry/sentry-javascript/issues/7813
      // Skip Error: lines
      if (cleanedLine.match(/\S*Error: /)) {
        continue;
      }

      for (const parser of sortedParsers) {
        const frame = parser(cleanedLine);

        if (frame) {
          frames.push(frame);
          break;
        }
      }

      if (frames.length >= STACKTRACE_FRAME_LIMIT + framesToPop) {
        break;
      }
    }

    return stripSentryFramesAndReverse(frames.slice(framesToPop));
  };
}

/**
 * Gets a stack parser implementation from Options.stackParser
 * @see Options
 *
 * If options contains an array of line parsers, it is converted into a parser
 */
function stacktrace_stackParserFromStackParserOptions(stackParser) {
  if (Array.isArray(stackParser)) {
    return createStackParser(...stackParser);
  }
  return stackParser;
}

/**
 * Removes Sentry frames from the top and bottom of the stack if present and enforces a limit of max number of frames.
 * Assumes stack input is ordered from top to bottom and returns the reverse representation so call site of the
 * function that caused the crash is the last frame in the array.
 * @hidden
 */
function stripSentryFramesAndReverse(stack) {
  if (!stack.length) {
    return [];
  }

  const localStack = Array.from(stack);

  // If stack starts with one of our API calls, remove it (starts, meaning it's the top of the stack - aka last call)
  if (/sentryWrapped/.test(getLastStackFrame(localStack).function || '')) {
    localStack.pop();
  }

  // Reversing in the middle of the procedure allows us to just pop the values off the stack
  localStack.reverse();

  // If stack ends with one of our internal API calls, remove it (ends, meaning it's the bottom of the stack - aka top-most call)
  if (STRIP_FRAME_REGEXP.test(getLastStackFrame(localStack).function || '')) {
    localStack.pop();

    // When using synthetic events, we will have a 2 levels deep stack, as `new Error('Sentry syntheticException')`
    // is produced within the hub itself, making it:
    //
    //   Sentry.captureException()
    //   getCurrentHub().captureException()
    //
    // instead of just the top `Sentry` call itself.
    // This forces us to possibly strip an additional frame in the exact same was as above.
    if (STRIP_FRAME_REGEXP.test(getLastStackFrame(localStack).function || '')) {
      localStack.pop();
    }
  }

  return localStack.slice(0, STACKTRACE_FRAME_LIMIT).map(frame => ({
    ...frame,
    filename: frame.filename || getLastStackFrame(localStack).filename,
    function: frame.function || UNKNOWN_FUNCTION,
  }));
}

function getLastStackFrame(arr) {
  return arr[arr.length - 1] || {};
}

const defaultFunctionName = '<anonymous>';

/**
 * Safely extract function name from itself
 */
function getFunctionName(fn) {
  try {
    if (!fn || typeof fn !== 'function') {
      return defaultFunctionName;
    }
    return fn.name || defaultFunctionName;
  } catch (e) {
    // Just accessing custom props in some Selenium environments
    // can cause a "Permission denied" exception (see raven-js#495).
    return defaultFunctionName;
  }
}

/**
 * Get's stack frames from an event without needing to check for undefined properties.
 */
function getFramesFromEvent(event) {
  const exception = event.exception;

  if (exception) {
    const frames = [];
    try {
      // @ts-expect-error Object could be undefined
      exception.values.forEach(value => {
        // @ts-expect-error Value could be undefined
        if (value.stacktrace.frames) {
          // @ts-expect-error Value could be undefined
          frames.push(...value.stacktrace.frames);
        }
      });
      return frames;
    } catch (_oO) {
      return undefined;
    }
  }
  return undefined;
}



;// ../../node_modules/@sentry/core/build/esm/integrations/dedupe.js





const dedupe_INTEGRATION_NAME = 'Dedupe';

const _dedupeIntegration = (() => {
  let previousEvent;

  return {
    name: dedupe_INTEGRATION_NAME,
    processEvent(currentEvent) {
      // We want to ignore any non-error type events, e.g. transactions or replays
      // These should never be deduped, and also not be compared against as _previousEvent.
      if (currentEvent.type) {
        return currentEvent;
      }

      // Juuust in case something goes wrong
      try {
        if (dedupe_shouldDropEvent(currentEvent, previousEvent)) {
          debug_build_DEBUG_BUILD && logger_logger.warn('Event dropped due to being a duplicate of previously captured event.');
          return null;
        }
      } catch (_oO) {} // eslint-disable-line no-empty

      return (previousEvent = currentEvent);
    },
  };
}) ;

/**
 * Deduplication filter.
 */
const dedupeIntegration = defineIntegration(_dedupeIntegration);

/** only exported for tests. */
function dedupe_shouldDropEvent(currentEvent, previousEvent) {
  if (!previousEvent) {
    return false;
  }

  if (_isSameMessageEvent(currentEvent, previousEvent)) {
    return true;
  }

  if (_isSameExceptionEvent(currentEvent, previousEvent)) {
    return true;
  }

  return false;
}

function _isSameMessageEvent(currentEvent, previousEvent) {
  const currentMessage = currentEvent.message;
  const previousMessage = previousEvent.message;

  // If neither event has a message property, they were both exceptions, so bail out
  if (!currentMessage && !previousMessage) {
    return false;
  }

  // If only one event has a stacktrace, but not the other one, they are not the same
  if ((currentMessage && !previousMessage) || (!currentMessage && previousMessage)) {
    return false;
  }

  if (currentMessage !== previousMessage) {
    return false;
  }

  if (!_isSameFingerprint(currentEvent, previousEvent)) {
    return false;
  }

  if (!_isSameStacktrace(currentEvent, previousEvent)) {
    return false;
  }

  return true;
}

function _isSameExceptionEvent(currentEvent, previousEvent) {
  const previousException = _getExceptionFromEvent(previousEvent);
  const currentException = _getExceptionFromEvent(currentEvent);

  if (!previousException || !currentException) {
    return false;
  }

  if (previousException.type !== currentException.type || previousException.value !== currentException.value) {
    return false;
  }

  if (!_isSameFingerprint(currentEvent, previousEvent)) {
    return false;
  }

  if (!_isSameStacktrace(currentEvent, previousEvent)) {
    return false;
  }

  return true;
}

function _isSameStacktrace(currentEvent, previousEvent) {
  let currentFrames = getFramesFromEvent(currentEvent);
  let previousFrames = getFramesFromEvent(previousEvent);

  // If neither event has a stacktrace, they are assumed to be the same
  if (!currentFrames && !previousFrames) {
    return true;
  }

  // If only one event has a stacktrace, but not the other one, they are not the same
  if ((currentFrames && !previousFrames) || (!currentFrames && previousFrames)) {
    return false;
  }

  currentFrames = currentFrames ;
  previousFrames = previousFrames ;

  // If number of frames differ, they are not the same
  if (previousFrames.length !== currentFrames.length) {
    return false;
  }

  // Otherwise, compare the two
  for (let i = 0; i < previousFrames.length; i++) {
    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
    const frameA = previousFrames[i];
    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
    const frameB = currentFrames[i];

    if (
      frameA.filename !== frameB.filename ||
      frameA.lineno !== frameB.lineno ||
      frameA.colno !== frameB.colno ||
      frameA.function !== frameB.function
    ) {
      return false;
    }
  }

  return true;
}

function _isSameFingerprint(currentEvent, previousEvent) {
  let currentFingerprint = currentEvent.fingerprint;
  let previousFingerprint = previousEvent.fingerprint;

  // If neither event has a fingerprint, they are assumed to be the same
  if (!currentFingerprint && !previousFingerprint) {
    return true;
  }

  // If only one event has a fingerprint, but not the other one, they are not the same
  if ((currentFingerprint && !previousFingerprint) || (!currentFingerprint && previousFingerprint)) {
    return false;
  }

  currentFingerprint = currentFingerprint ;
  previousFingerprint = previousFingerprint ;

  // Otherwise, compare the two
  try {
    return !!(currentFingerprint.join('') === previousFingerprint.join(''));
  } catch (_oO) {
    return false;
  }
}

function _getExceptionFromEvent(event) {
  return event.exception && event.exception.values && event.exception.values[0];
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/instrument/handlers.js




// We keep the handlers globally
const handlers = {};
const instrumented = {};

/** Add a handler function. */
function handlers_addHandler(type, handler) {
  handlers[type] = handlers[type] || [];
  (handlers[type] ).push(handler);
}

/**
 * Reset all instrumentation handlers.
 * This can be used by tests to ensure we have a clean slate of instrumentation handlers.
 */
function resetInstrumentationHandlers() {
  Object.keys(handlers).forEach(key => {
    handlers[key ] = undefined;
  });
}

/** Maybe run an instrumentation function, unless it was already called. */
function handlers_maybeInstrument(type, instrumentFn) {
  if (!instrumented[type]) {
    instrumented[type] = true;
    try {
      instrumentFn();
    } catch (e) {
      utils_hoist_debug_build_DEBUG_BUILD && logger_logger.error(`Error while instrumenting ${type}`, e);
    }
  }
}

/** Trigger handlers for a given instrumentation type. */
function handlers_triggerHandlers(type, data) {
  const typeHandlers = type && handlers[type];
  if (!typeHandlers) {
    return;
  }

  for (const handler of typeHandlers) {
    try {
      handler(data);
    } catch (e) {
      utils_hoist_debug_build_DEBUG_BUILD &&
        logger_logger.error(
          `Error while triggering instrumentation handler.\nType: ${type}\nName: ${getFunctionName(handler)}\nError:`,
          e,
        );
    }
  }
}



;// ../../node_modules/@sentry-internal/browser-utils/build/esm/types.js


const types_WINDOW = worldwide_GLOBAL_OBJ

;



;// ../../node_modules/@sentry-internal/browser-utils/build/esm/instrument/dom.js



const DEBOUNCE_DURATION = 1000;

let debounceTimerID;
let lastCapturedEventType;
let lastCapturedEventTargetId;

/**
 * Add an instrumentation handler for when a click or a keypress happens.
 *
 * Use at your own risk, this might break without changelog notice, only used internally.
 * @hidden
 */
function addClickKeypressInstrumentationHandler(handler) {
  const type = 'dom';
  handlers_addHandler(type, handler);
  handlers_maybeInstrument(type, instrumentDOM);
}

/** Exported for tests only. */
function instrumentDOM() {
  if (!types_WINDOW.document) {
    return;
  }

  // Make it so that any click or keypress that is unhandled / bubbled up all the way to the document triggers our dom
  // handlers. (Normally we have only one, which captures a breadcrumb for each click or keypress.) Do this before
  // we instrument `addEventListener` so that we don't end up attaching this handler twice.
  const triggerDOMHandler = handlers_triggerHandlers.bind(null, 'dom');
  const globalDOMEventHandler = makeDOMEventHandler(triggerDOMHandler, true);
  types_WINDOW.document.addEventListener('click', globalDOMEventHandler, false);
  types_WINDOW.document.addEventListener('keypress', globalDOMEventHandler, false);

  // After hooking into click and keypress events bubbled up to `document`, we also hook into user-handled
  // clicks & keypresses, by adding an event listener of our own to any element to which they add a listener. That
  // way, whenever one of their handlers is triggered, ours will be, too. (This is needed because their handler
  // could potentially prevent the event from bubbling up to our global listeners. This way, our handler are still
  // guaranteed to fire at least once.)
  ['EventTarget', 'Node'].forEach((target) => {
    const globalObject = types_WINDOW ;
    const targetObj = globalObject[target];
    const proto = targetObj && targetObj.prototype;

    // eslint-disable-next-line no-prototype-builtins
    if (!proto || !proto.hasOwnProperty || !proto.hasOwnProperty('addEventListener')) {
      return;
    }

    fill(proto, 'addEventListener', function (originalAddEventListener) {
      return function ( type, listener, options) {
        if (type === 'click' || type == 'keypress') {
          try {
            const handlers = (this.__sentry_instrumentation_handlers__ =
              this.__sentry_instrumentation_handlers__ || {});
            const handlerForType = (handlers[type] = handlers[type] || { refCount: 0 });

            if (!handlerForType.handler) {
              const handler = makeDOMEventHandler(triggerDOMHandler);
              handlerForType.handler = handler;
              originalAddEventListener.call(this, type, handler, options);
            }

            handlerForType.refCount++;
          } catch (e) {
            // Accessing dom properties is always fragile.
            // Also allows us to skip `addEventListeners` calls with no proper `this` context.
          }
        }

        return originalAddEventListener.call(this, type, listener, options);
      };
    });

    fill(
      proto,
      'removeEventListener',
      function (originalRemoveEventListener) {
        return function ( type, listener, options) {
          if (type === 'click' || type == 'keypress') {
            try {
              const handlers = this.__sentry_instrumentation_handlers__ || {};
              const handlerForType = handlers[type];

              if (handlerForType) {
                handlerForType.refCount--;
                // If there are no longer any custom handlers of the current type on this element, we can remove ours, too.
                if (handlerForType.refCount <= 0) {
                  originalRemoveEventListener.call(this, type, handlerForType.handler, options);
                  handlerForType.handler = undefined;
                  delete handlers[type]; // eslint-disable-line @typescript-eslint/no-dynamic-delete
                }

                // If there are no longer any custom handlers of any type on this element, cleanup everything.
                if (Object.keys(handlers).length === 0) {
                  delete this.__sentry_instrumentation_handlers__;
                }
              }
            } catch (e) {
              // Accessing dom properties is always fragile.
              // Also allows us to skip `addEventListeners` calls with no proper `this` context.
            }
          }

          return originalRemoveEventListener.call(this, type, listener, options);
        };
      },
    );
  });
}

/**
 * Check whether the event is similar to the last captured one. For example, two click events on the same button.
 */
function isSimilarToLastCapturedEvent(event) {
  // If both events have different type, then user definitely performed two separate actions. e.g. click + keypress.
  if (event.type !== lastCapturedEventType) {
    return false;
  }

  try {
    // If both events have the same type, it's still possible that actions were performed on different targets.
    // e.g. 2 clicks on different buttons.
    if (!event.target || (event.target )._sentryId !== lastCapturedEventTargetId) {
      return false;
    }
  } catch (e) {
    // just accessing `target` property can throw an exception in some rare circumstances
    // see: https://github.com/getsentry/sentry-javascript/issues/838
  }

  // If both events have the same type _and_ same `target` (an element which triggered an event, _not necessarily_
  // to which an event listener was attached), we treat them as the same action, as we want to capture
  // only one breadcrumb. e.g. multiple clicks on the same button, or typing inside a user input box.
  return true;
}

/**
 * Decide whether an event should be captured.
 * @param event event to be captured
 */
function shouldSkipDOMEvent(eventType, target) {
  // We are only interested in filtering `keypress` events for now.
  if (eventType !== 'keypress') {
    return false;
  }

  if (!target || !target.tagName) {
    return true;
  }

  // Only consider keypress events on actual input elements. This will disregard keypresses targeting body
  // e.g.tabbing through elements, hotkeys, etc.
  if (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.isContentEditable) {
    return false;
  }

  return true;
}

/**
 * Wraps addEventListener to capture UI breadcrumbs
 */
function makeDOMEventHandler(
  handler,
  globalListener = false,
) {
  return (event) => {
    // It's possible this handler might trigger multiple times for the same
    // event (e.g. event propagation through node ancestors).
    // Ignore if we've already captured that event.
    if (!event || event['_sentryCaptured']) {
      return;
    }

    const target = getEventTarget(event);

    // We always want to skip _some_ events.
    if (shouldSkipDOMEvent(event.type, target)) {
      return;
    }

    // Mark event as "seen"
    object_addNonEnumerableProperty(event, '_sentryCaptured', true);

    if (target && !target._sentryId) {
      // Add UUID to event target so we can identify if
      object_addNonEnumerableProperty(target, '_sentryId', misc_uuid4());
    }

    const name = event.type === 'keypress' ? 'input' : event.type;

    // If there is no last captured event, it means that we can safely capture the new event and store it for future comparisons.
    // If there is a last captured event, see if the new event is different enough to treat it as a unique one.
    // If that's the case, emit the previous event and store locally the newly-captured DOM event.
    if (!isSimilarToLastCapturedEvent(event)) {
      const handlerData = { event, name, global: globalListener };
      handler(handlerData);
      lastCapturedEventType = event.type;
      lastCapturedEventTargetId = target ? target._sentryId : undefined;
    }

    // Start a new debounce timer that will prevent us from capturing multiple events that should be grouped together.
    clearTimeout(debounceTimerID);
    debounceTimerID = types_WINDOW.setTimeout(() => {
      lastCapturedEventTargetId = undefined;
      lastCapturedEventType = undefined;
    }, DEBOUNCE_DURATION);
  };
}

function getEventTarget(event) {
  try {
    return event.target ;
  } catch (e) {
    // just accessing `target` property can throw an exception in some rare circumstances
    // see: https://github.com/getsentry/sentry-javascript/issues/838
    return null;
  }
}



;// ../../node_modules/@sentry-internal/browser-utils/build/esm/instrument/xhr.js



const SENTRY_XHR_DATA_KEY = '__sentry_xhr_v3__';

/**
 * Add an instrumentation handler for when an XHR request happens.
 * The handler function is called once when the request starts and once when it ends,
 * which can be identified by checking if it has an `endTimestamp`.
 *
 * Use at your own risk, this might break without changelog notice, only used internally.
 * @hidden
 */
function addXhrInstrumentationHandler(handler) {
  const type = 'xhr';
  handlers_addHandler(type, handler);
  handlers_maybeInstrument(type, instrumentXHR);
}

/** Exported only for tests. */
function instrumentXHR() {
  if (!(types_WINDOW ).XMLHttpRequest) {
    return;
  }

  const xhrproto = XMLHttpRequest.prototype;

  // eslint-disable-next-line @typescript-eslint/unbound-method
  xhrproto.open = new Proxy(xhrproto.open, {
    apply(originalOpen, xhrOpenThisArg, xhrOpenArgArray) {
      // NOTE: If you are a Sentry user, and you are seeing this stack frame,
      //       it means the error, that was caused by your XHR call did not
      //       have a stack trace. If you are using HttpClient integration,
      //       this is the expected behavior, as we are using this virtual error to capture
      //       the location of your XHR call, and group your HttpClient events accordingly.
      const virtualError = new Error();

      const startTimestamp = time_timestampInSeconds() * 1000;

      // open() should always be called with two or more arguments
      // But to be on the safe side, we actually validate this and bail out if we don't have a method & url
      const method = isString(xhrOpenArgArray[0]) ? xhrOpenArgArray[0].toUpperCase() : undefined;
      const url = parseUrl(xhrOpenArgArray[1]);

      if (!method || !url) {
        return originalOpen.apply(xhrOpenThisArg, xhrOpenArgArray);
      }

      xhrOpenThisArg[SENTRY_XHR_DATA_KEY] = {
        method,
        url,
        request_headers: {},
      };

      // if Sentry key appears in URL, don't capture it as a request
      if (method === 'POST' && url.match(/sentry_key/)) {
        xhrOpenThisArg.__sentry_own_request__ = true;
      }

      const onreadystatechangeHandler = () => {
        // For whatever reason, this is not the same instance here as from the outer method
        const xhrInfo = xhrOpenThisArg[SENTRY_XHR_DATA_KEY];

        if (!xhrInfo) {
          return;
        }

        if (xhrOpenThisArg.readyState === 4) {
          try {
            // touching statusCode in some platforms throws
            // an exception
            xhrInfo.status_code = xhrOpenThisArg.status;
          } catch (e) {
            /* do nothing */
          }

          const handlerData = {
            endTimestamp: time_timestampInSeconds() * 1000,
            startTimestamp,
            xhr: xhrOpenThisArg,
            virtualError,
          };
          handlers_triggerHandlers('xhr', handlerData);
        }
      };

      if ('onreadystatechange' in xhrOpenThisArg && typeof xhrOpenThisArg.onreadystatechange === 'function') {
        xhrOpenThisArg.onreadystatechange = new Proxy(xhrOpenThisArg.onreadystatechange, {
          apply(originalOnreadystatechange, onreadystatechangeThisArg, onreadystatechangeArgArray) {
            onreadystatechangeHandler();
            return originalOnreadystatechange.apply(onreadystatechangeThisArg, onreadystatechangeArgArray);
          },
        });
      } else {
        xhrOpenThisArg.addEventListener('readystatechange', onreadystatechangeHandler);
      }

      // Intercepting `setRequestHeader` to access the request headers of XHR instance.
      // This will only work for user/library defined headers, not for the default/browser-assigned headers.
      // Request cookies are also unavailable for XHR, as `Cookie` header can't be defined by `setRequestHeader`.
      xhrOpenThisArg.setRequestHeader = new Proxy(xhrOpenThisArg.setRequestHeader, {
        apply(
          originalSetRequestHeader,
          setRequestHeaderThisArg,
          setRequestHeaderArgArray,
        ) {
          const [header, value] = setRequestHeaderArgArray;

          const xhrInfo = setRequestHeaderThisArg[SENTRY_XHR_DATA_KEY];

          if (xhrInfo && isString(header) && isString(value)) {
            xhrInfo.request_headers[header.toLowerCase()] = value;
          }

          return originalSetRequestHeader.apply(setRequestHeaderThisArg, setRequestHeaderArgArray);
        },
      });

      return originalOpen.apply(xhrOpenThisArg, xhrOpenArgArray);
    },
  });

  // eslint-disable-next-line @typescript-eslint/unbound-method
  xhrproto.send = new Proxy(xhrproto.send, {
    apply(originalSend, sendThisArg, sendArgArray) {
      const sentryXhrData = sendThisArg[SENTRY_XHR_DATA_KEY];

      if (!sentryXhrData) {
        return originalSend.apply(sendThisArg, sendArgArray);
      }

      if (sendArgArray[0] !== undefined) {
        sentryXhrData.body = sendArgArray[0];
      }

      const handlerData = {
        startTimestamp: time_timestampInSeconds() * 1000,
        xhr: sendThisArg,
      };
      handlers_triggerHandlers('xhr', handlerData);

      return originalSend.apply(sendThisArg, sendArgArray);
    },
  });
}

function parseUrl(url) {
  if (isString(url)) {
    return url;
  }

  try {
    // url can be a string or URL
    // but since URL is not available in IE11, we do not check for it,
    // but simply assume it is an URL and return `toString()` from it (which returns the full URL)
    // If that fails, we just return undefined
    return (url ).toString();
  } catch (e2) {} // eslint-disable-line no-empty

  return undefined;
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/vendor/supportsHistory.js


// Based on https://github.com/angular/angular.js/pull/13945/files
// The MIT License


const supportsHistory_WINDOW = worldwide_GLOBAL_OBJ ;

/**
 * Tells whether current environment supports History API
 * {@link supportsHistory}.
 *
 * @returns Answer to the given question.
 */
function supportsHistory() {
  // NOTE: in Chrome App environment, touching history.pushState, *even inside
  //       a try/catch block*, will cause Chrome to output an error to console.error
  // borrowed from: https://github.com/angular/angular.js/pull/13945/files
  // TODO(v9): Remove this custom check, it is pretty old and likely not needed anymore
  const chromeVar = (supportsHistory_WINDOW ).chrome;
  const isChromePackagedApp = chromeVar && chromeVar.app && chromeVar.app.runtime;
  const hasHistoryApi = 'history' in supportsHistory_WINDOW && !!supportsHistory_WINDOW.history.pushState && !!supportsHistory_WINDOW.history.replaceState;

  return !isChromePackagedApp && hasHistoryApi;
}



;// ../../node_modules/@sentry-internal/browser-utils/build/esm/instrument/history.js



let lastHref;

/**
 * Add an instrumentation handler for when a fetch request happens.
 * The handler function is called once when the request starts and once when it ends,
 * which can be identified by checking if it has an `endTimestamp`.
 *
 * Use at your own risk, this might break without changelog notice, only used internally.
 * @hidden
 */
function addHistoryInstrumentationHandler(handler) {
  const type = 'history';
  handlers_addHandler(type, handler);
  handlers_maybeInstrument(type, instrumentHistory);
}

function instrumentHistory() {
  if (!supportsHistory()) {
    return;
  }

  const oldOnPopState = types_WINDOW.onpopstate;
  types_WINDOW.onpopstate = function ( ...args) {
    const to = types_WINDOW.location.href;
    // keep track of the current URL state, as we always receive only the updated state
    const from = lastHref;
    lastHref = to;
    const handlerData = { from, to };
    handlers_triggerHandlers('history', handlerData);
    if (oldOnPopState) {
      // Apparently this can throw in Firefox when incorrectly implemented plugin is installed.
      // https://github.com/getsentry/sentry-javascript/issues/3344
      // https://github.com/bugsnag/bugsnag-js/issues/469
      try {
        return oldOnPopState.apply(this, args);
      } catch (_oO) {
        // no-empty
      }
    }
  };

  function historyReplacementFunction(originalHistoryFunction) {
    return function ( ...args) {
      const url = args.length > 2 ? args[2] : undefined;
      if (url) {
        // coerce to string (this is what pushState does)
        const from = lastHref;
        const to = String(url);
        // keep track of the current URL state, as we always receive only the updated state
        lastHref = to;
        const handlerData = { from, to };
        handlers_triggerHandlers('history', handlerData);
      }
      return originalHistoryFunction.apply(this, args);
    };
  }

  fill(types_WINDOW.history, 'pushState', historyReplacementFunction);
  fill(types_WINDOW.history, 'replaceState', historyReplacementFunction);
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/instrument/console.js





/**
 * Add an instrumentation handler for when a console.xxx method is called.
 *
 * Use at your own risk, this might break without changelog notice, only used internally.
 * @hidden
 */
function addConsoleInstrumentationHandler(handler) {
  const type = 'console';
  handlers_addHandler(type, handler);
  handlers_maybeInstrument(type, instrumentConsole);
}

function instrumentConsole() {
  if (!("console" in worldwide_GLOBAL_OBJ)) {
    return;
  }

  CONSOLE_LEVELS.forEach(function (level) {
    if (!(level in worldwide_GLOBAL_OBJ.console)) {
      return;
    }

    fill(worldwide_GLOBAL_OBJ.console, level, function (originalConsoleMethod) {
      originalConsoleMethods[level] = originalConsoleMethod;

      return function (...args) {
        const handlerData = { args, level };
        handlers_triggerHandlers('console', handlerData);

        const log = originalConsoleMethods[level];
        log && log.apply(worldwide_GLOBAL_OBJ.console, args);
      };
    });
  });
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/supports.js




const supports_WINDOW = worldwide_GLOBAL_OBJ ;

/**
 * Tells whether current environment supports ErrorEvent objects
 * {@link supportsErrorEvent}.
 *
 * @returns Answer to the given question.
 */
function supportsErrorEvent() {
  try {
    new ErrorEvent('');
    return true;
  } catch (e) {
    return false;
  }
}

/**
 * Tells whether current environment supports DOMError objects
 * {@link supportsDOMError}.
 *
 * @returns Answer to the given question.
 */
function supportsDOMError() {
  try {
    // Chrome: VM89:1 Uncaught TypeError: Failed to construct 'DOMError':
    // 1 argument required, but only 0 present.
    // @ts-expect-error It really needs 1 argument, not 0.
    new DOMError('');
    return true;
  } catch (e) {
    return false;
  }
}

/**
 * Tells whether current environment supports DOMException objects
 * {@link supportsDOMException}.
 *
 * @returns Answer to the given question.
 */
function supportsDOMException() {
  try {
    new DOMException('');
    return true;
  } catch (e) {
    return false;
  }
}

/**
 * Tells whether current environment supports Fetch API
 * {@link supportsFetch}.
 *
 * @returns Answer to the given question.
 */
function supports_supportsFetch() {
  if (!('fetch' in supports_WINDOW)) {
    return false;
  }

  try {
    new Headers();
    new Request('http://www.example.com');
    new Response();
    return true;
  } catch (e) {
    return false;
  }
}

/**
 * isNative checks if the given function is a native implementation
 */
// eslint-disable-next-line @typescript-eslint/ban-types
function isNativeFunction(func) {
  return func && /^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(func.toString());
}

/**
 * Tells whether current environment supports Fetch API natively
 * {@link supportsNativeFetch}.
 *
 * @returns true if `window.fetch` is natively implemented, false otherwise
 */
function supportsNativeFetch() {
  if (typeof EdgeRuntime === 'string') {
    return true;
  }

  if (!supports_supportsFetch()) {
    return false;
  }

  // Fast path to avoid DOM I/O
  // eslint-disable-next-line @typescript-eslint/unbound-method
  if (isNativeFunction(supports_WINDOW.fetch)) {
    return true;
  }

  // window.fetch is implemented, but is polyfilled or already wrapped (e.g: by a chrome extension)
  // so create a "pure" iframe to see if that has native fetch
  let result = false;
  const doc = supports_WINDOW.document;
  // eslint-disable-next-line deprecation/deprecation
  if (doc && typeof (doc.createElement ) === 'function') {
    try {
      const sandbox = doc.createElement('iframe');
      sandbox.hidden = true;
      doc.head.appendChild(sandbox);
      if (sandbox.contentWindow && sandbox.contentWindow.fetch) {
        // eslint-disable-next-line @typescript-eslint/unbound-method
        result = isNativeFunction(sandbox.contentWindow.fetch);
      }
      doc.head.removeChild(sandbox);
    } catch (err) {
      utils_hoist_debug_build_DEBUG_BUILD &&
        logger_logger.warn('Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ', err);
    }
  }

  return result;
}

/**
 * Tells whether current environment supports ReportingObserver API
 * {@link supportsReportingObserver}.
 *
 * @returns Answer to the given question.
 */
function supportsReportingObserver() {
  return 'ReportingObserver' in supports_WINDOW;
}

/**
 * Tells whether current environment supports Referrer Policy API
 * {@link supportsReferrerPolicy}.
 *
 * @returns Answer to the given question.
 */
function supportsReferrerPolicy() {
  // Despite all stars in the sky saying that Edge supports old draft syntax, aka 'never', 'always', 'origin' and 'default'
  // (see https://caniuse.com/#feat=referrer-policy),
  // it doesn't. And it throws an exception instead of ignoring this parameter...
  // REF: https://github.com/getsentry/raven-js/issues/1233

  if (!supports_supportsFetch()) {
    return false;
  }

  try {
    new Request('_', {
      referrerPolicy: 'origin' ,
    });
    return true;
  } catch (e) {
    return false;
  }
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/instrument/fetch.js







/**
 * Add an instrumentation handler for when a fetch request happens.
 * The handler function is called once when the request starts and once when it ends,
 * which can be identified by checking if it has an `endTimestamp`.
 *
 * Use at your own risk, this might break without changelog notice, only used internally.
 * @hidden
 */
function addFetchInstrumentationHandler(
  handler,
  skipNativeFetchCheck,
) {
  const type = 'fetch';
  handlers_addHandler(type, handler);
  handlers_maybeInstrument(type, () => instrumentFetch(undefined, skipNativeFetchCheck));
}

/**
 * Add an instrumentation handler for long-lived fetch requests, like consuming server-sent events (SSE) via fetch.
 * The handler will resolve the request body and emit the actual `endTimestamp`, so that the
 * span can be updated accordingly.
 *
 * Only used internally
 * @hidden
 */
function addFetchEndInstrumentationHandler(handler) {
  const type = 'fetch-body-resolved';
  addHandler(type, handler);
  maybeInstrument(type, () => instrumentFetch(streamHandler));
}

function instrumentFetch(onFetchResolved, skipNativeFetchCheck = false) {
  if (skipNativeFetchCheck && !supportsNativeFetch()) {
    return;
  }

  fill(worldwide_GLOBAL_OBJ, 'fetch', function (originalFetch) {
    return function (...args) {
      // We capture the error right here and not in the Promise error callback because Safari (and probably other
      // browsers too) will wipe the stack trace up to this point, only leaving us with this file which is useless.

      // NOTE: If you are a Sentry user, and you are seeing this stack frame,
      //       it means the error, that was caused by your fetch call did not
      //       have a stack trace, so the SDK backfilled the stack trace so
      //       you can see which fetch call failed.
      const virtualError = new Error();

      const { method, url } = parseFetchArgs(args);
      const handlerData = {
        args,
        fetchData: {
          method,
          url,
        },
        startTimestamp: time_timestampInSeconds() * 1000,
        // // Adding the error to be able to fingerprint the failed fetch event in HttpClient instrumentation
        virtualError,
      };

      // if there is no callback, fetch is instrumented directly
      if (!onFetchResolved) {
        handlers_triggerHandlers('fetch', {
          ...handlerData,
        });
      }

      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access
      return originalFetch.apply(worldwide_GLOBAL_OBJ, args).then(
        async (response) => {
          if (onFetchResolved) {
            onFetchResolved(response);
          } else {
            handlers_triggerHandlers('fetch', {
              ...handlerData,
              endTimestamp: time_timestampInSeconds() * 1000,
              response,
            });
          }

          return response;
        },
        (error) => {
          handlers_triggerHandlers('fetch', {
            ...handlerData,
            endTimestamp: time_timestampInSeconds() * 1000,
            error,
          });

          if (isError(error) && error.stack === undefined) {
            // NOTE: If you are a Sentry user, and you are seeing this stack frame,
            //       it means the error, that was caused by your fetch call did not
            //       have a stack trace, so the SDK backfilled the stack trace so
            //       you can see which fetch call failed.
            error.stack = virtualError.stack;
            object_addNonEnumerableProperty(error, 'framesToPop', 1);
          }

          // NOTE: If you are a Sentry user, and you are seeing this stack frame,
          //       it means the sentry.javascript SDK caught an error invoking your application code.
          //       This is expected behavior and NOT indicative of a bug with sentry.javascript.
          throw error;
        },
      );
    };
  });
}

async function resolveResponse(res, onFinishedResolving) {
  if (res && res.body) {
    const body = res.body;
    const responseReader = body.getReader();

    // Define a maximum duration after which we just cancel
    const maxFetchDurationTimeout = setTimeout(
      () => {
        body.cancel().then(null, () => {
          // noop
        });
      },
      90 * 1000, // 90s
    );

    let readingActive = true;
    while (readingActive) {
      let chunkTimeout;
      try {
        // abort reading if read op takes more than 5s
        chunkTimeout = setTimeout(() => {
          body.cancel().then(null, () => {
            // noop on error
          });
        }, 5000);

        // This .read() call will reject/throw when we abort due to timeouts through `body.cancel()`
        const { done } = await responseReader.read();

        clearTimeout(chunkTimeout);

        if (done) {
          onFinishedResolving();
          readingActive = false;
        }
      } catch (error) {
        readingActive = false;
      } finally {
        clearTimeout(chunkTimeout);
      }
    }

    clearTimeout(maxFetchDurationTimeout);

    responseReader.releaseLock();
    body.cancel().then(null, () => {
      // noop on error
    });
  }
}

function streamHandler(response) {
  // clone response for awaiting stream
  let clonedResponseForResolving;
  try {
    clonedResponseForResolving = response.clone();
  } catch (e) {
    return;
  }

  // eslint-disable-next-line @typescript-eslint/no-floating-promises
  resolveResponse(clonedResponseForResolving, () => {
    triggerHandlers('fetch-body-resolved', {
      endTimestamp: timestampInSeconds() * 1000,
      response,
    });
  });
}

function hasProp(obj, prop) {
  return !!obj && typeof obj === 'object' && !!(obj )[prop];
}

function getUrlFromResource(resource) {
  if (typeof resource === 'string') {
    return resource;
  }

  if (!resource) {
    return '';
  }

  if (hasProp(resource, 'url')) {
    return resource.url;
  }

  if (resource.toString) {
    return resource.toString();
  }

  return '';
}

/**
 * Parses the fetch arguments to find the used Http method and the url of the request.
 * Exported for tests only.
 */
function parseFetchArgs(fetchArgs) {
  if (fetchArgs.length === 0) {
    return { method: 'GET', url: '' };
  }

  if (fetchArgs.length === 2) {
    const [url, options] = fetchArgs ;

    return {
      url: getUrlFromResource(url),
      method: hasProp(options, 'method') ? String(options.method).toUpperCase() : 'GET',
    };
  }

  const arg = fetchArgs[0];
  return {
    url: getUrlFromResource(arg ),
    method: hasProp(arg, 'method') ? String(arg.method).toUpperCase() : 'GET',
  };
}



;// ../../node_modules/@sentry/core/build/esm/breadcrumbs.js




/**
 * Default maximum number of breadcrumbs added to an event. Can be overwritten
 * with {@link Options.maxBreadcrumbs}.
 */
const DEFAULT_BREADCRUMBS = 100;

/**
 * Records a new breadcrumb which will be attached to future events.
 *
 * Breadcrumbs will be added to subsequent events to provide more context on
 * user's actions prior to an error or crash.
 */
function addBreadcrumb(breadcrumb, hint) {
  const client = currentScopes_getClient();
  const isolationScope = currentScopes_getIsolationScope();

  if (!client) return;

  const { beforeBreadcrumb = null, maxBreadcrumbs = DEFAULT_BREADCRUMBS } = client.getOptions();

  if (maxBreadcrumbs <= 0) return;

  const timestamp = dateTimestampInSeconds();
  const mergedBreadcrumb = { timestamp, ...breadcrumb };
  const finalBreadcrumb = beforeBreadcrumb
    ? (logger_consoleSandbox(() => beforeBreadcrumb(mergedBreadcrumb, hint)) )
    : mergedBreadcrumb;

  if (finalBreadcrumb === null) return;

  if (client.emit) {
    client.emit('beforeAddBreadcrumb', finalBreadcrumb, hint);
  }

  isolationScope.addBreadcrumb(finalBreadcrumb, maxBreadcrumbs);
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/severity.js
/**
 * @deprecated This variable has been deprecated and will be removed in the next major version.
 */
const validSeverityLevels = (/* unused pure expression or super */ null && (0));

/**
 * Converts a string-based level into a `SeverityLevel`, normalizing it along the way.
 *
 * @param level String representation of desired `SeverityLevel`.
 * @returns The `SeverityLevel` corresponding to the given string, or 'log' if the string isn't a valid level.
 */
function severityLevelFromString(level) {
  return (
    level === 'warn' ? 'warning' : ['fatal', 'error', 'warning', 'log', 'info', 'debug'].includes(level) ? level : 'log'
  ) ;
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/breadcrumb-log-level.js
/**
 * Determine a breadcrumb's log level (only `warning` or `error`) based on an HTTP status code.
 */
function getBreadcrumbLogLevelFromHttpStatusCode(statusCode) {
  // NOTE: undefined defaults to 'info' in Sentry
  if (statusCode === undefined) {
    return undefined;
  } else if (statusCode >= 400 && statusCode < 500) {
    return 'warning';
  } else if (statusCode >= 500) {
    return 'error';
  } else {
    return undefined;
  }
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/url.js
/**
 * Parses string form of URL into an object
 * // borrowed from https://tools.ietf.org/html/rfc3986#appendix-B
 * // intentionally using regex and not <a/> href parsing trick because React Native and other
 * // environments where DOM might not be available
 * @returns parsed URL object
 */
function url_parseUrl(url) {
  if (!url) {
    return {};
  }

  const match = url.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);

  if (!match) {
    return {};
  }

  // coerce to undefined values to empty string so we don't get 'undefined'
  const query = match[6] || '';
  const fragment = match[8] || '';
  return {
    host: match[4],
    path: match[5],
    protocol: match[2],
    search: query,
    hash: fragment,
    relative: match[5] + query + fragment, // everything minus origin
  };
}

/**
 * Strip the query string and fragment off of a given URL or path (if present)
 *
 * @param urlPath Full URL or path, including possible query string and/or fragment
 * @returns URL or path without query string or fragment
 */
function stripUrlQueryAndFragment(urlPath) {
  return (urlPath.split(/[?#]/, 1) )[0];
}

/**
 * Returns number of URL segments of a passed string URL.
 *
 * @deprecated This function will be removed in the next major version.
 */
// TODO(v9): Hoist this function into the places where we use it. (as it stands only react router v6 instrumentation)
function getNumberOfUrlSegments(url) {
  // split at '/' or at '\/' to split regex urls correctly
  return url.split(/\\?\//).filter(s => s.length > 0 && s !== ',').length;
}

/**
 * Takes a URL object and returns a sanitized string which is safe to use as span name
 * see: https://develop.sentry.dev/sdk/data-handling/#structuring-data
 */
function getSanitizedUrlString(url) {
  const { protocol, host, path } = url;

  const filteredHost =
    (host &&
      host
        // Always filter out authority
        .replace(/^.*@/, '[filtered]:[filtered]@')
        // Don't show standard :80 (http) and :443 (https) ports to reduce the noise
        // TODO: Use new URL global if it exists
        .replace(/(:80)$/, '')
        .replace(/(:443)$/, '')) ||
    '';

  return `${protocol ? `${protocol}://` : ''}${filteredHost}${path}`;
}



;// ../../node_modules/@sentry/browser/build/npm/esm/debug-build.js
/**
 * This serves as a build time flag that will be true by default, but false in non-debug builds or if users replace `__SENTRY_DEBUG__` in their generated code.
 *
 * ATTENTION: This constant must never cross package boundaries (i.e. be exported) to guarantee that it can be used for tree shaking.
 */
const esm_debug_build_DEBUG_BUILD = (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__);



;// ../../node_modules/@sentry/core/build/esm/constants.js
const DEFAULT_ENVIRONMENT = 'production';



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/syncpromise.js


/* eslint-disable @typescript-eslint/explicit-function-return-type */
/* eslint-disable @typescript-eslint/no-explicit-any */

/** SyncPromise internal states */
var States; (function (States) {
  /** Pending */
  const PENDING = 0; States[States["PENDING"] = PENDING] = "PENDING";
  /** Resolved / OK */
  const RESOLVED = 1; States[States["RESOLVED"] = RESOLVED] = "RESOLVED";
  /** Rejected / Error */
  const REJECTED = 2; States[States["REJECTED"] = REJECTED] = "REJECTED";
})(States || (States = {}));

// Overloads so we can call resolvedSyncPromise without arguments and generic argument

/**
 * Creates a resolved sync promise.
 *
 * @param value the value to resolve the promise with
 * @returns the resolved sync promise
 */
function resolvedSyncPromise(value) {
  return new SyncPromise(resolve => {
    resolve(value);
  });
}

/**
 * Creates a rejected sync promise.
 *
 * @param value the value to reject the promise with
 * @returns the rejected sync promise
 */
function rejectedSyncPromise(reason) {
  return new SyncPromise((_, reject) => {
    reject(reason);
  });
}

/**
 * Thenable class that behaves like a Promise and follows it's interface
 * but is not async internally
 */
class SyncPromise {

   constructor(
    executor,
  ) {SyncPromise.prototype.__init.call(this);SyncPromise.prototype.__init2.call(this);SyncPromise.prototype.__init3.call(this);SyncPromise.prototype.__init4.call(this);
    this._state = States.PENDING;
    this._handlers = [];

    try {
      executor(this._resolve, this._reject);
    } catch (e) {
      this._reject(e);
    }
  }

  /** JSDoc */
   then(
    onfulfilled,
    onrejected,
  ) {
    return new SyncPromise((resolve, reject) => {
      this._handlers.push([
        false,
        result => {
          if (!onfulfilled) {
            // TODO: \_()_/
            // TODO: FIXME
            resolve(result );
          } else {
            try {
              resolve(onfulfilled(result));
            } catch (e) {
              reject(e);
            }
          }
        },
        reason => {
          if (!onrejected) {
            reject(reason);
          } else {
            try {
              resolve(onrejected(reason));
            } catch (e) {
              reject(e);
            }
          }
        },
      ]);
      this._executeHandlers();
    });
  }

  /** JSDoc */
   catch(
    onrejected,
  ) {
    return this.then(val => val, onrejected);
  }

  /** JSDoc */
   finally(onfinally) {
    return new SyncPromise((resolve, reject) => {
      let val;
      let isRejected;

      return this.then(
        value => {
          isRejected = false;
          val = value;
          if (onfinally) {
            onfinally();
          }
        },
        reason => {
          isRejected = true;
          val = reason;
          if (onfinally) {
            onfinally();
          }
        },
      ).then(() => {
        if (isRejected) {
          reject(val);
          return;
        }

        resolve(val );
      });
    });
  }

  /** JSDoc */
    __init() {this._resolve = (value) => {
    this._setResult(States.RESOLVED, value);
  };}

  /** JSDoc */
    __init2() {this._reject = (reason) => {
    this._setResult(States.REJECTED, reason);
  };}

  /** JSDoc */
    __init3() {this._setResult = (state, value) => {
    if (this._state !== States.PENDING) {
      return;
    }

    if (is_isThenable(value)) {
      void (value ).then(this._resolve, this._reject);
      return;
    }

    this._state = state;
    this._value = value;

    this._executeHandlers();
  };}

  /** JSDoc */
    __init4() {this._executeHandlers = () => {
    if (this._state === States.PENDING) {
      return;
    }

    const cachedHandlers = this._handlers.slice();
    this._handlers = [];

    cachedHandlers.forEach(handler => {
      if (handler[0]) {
        return;
      }

      if (this._state === States.RESOLVED) {
        handler[1](this._value );
      }

      if (this._state === States.REJECTED) {
        handler[2](this._value);
      }

      handler[0] = true;
    });
  };}
}



;// ../../node_modules/@sentry/core/build/esm/eventProcessors.js





/**
 * Process an array of event processors, returning the processed event (or `null` if the event was dropped).
 */
function notifyEventProcessors(
  processors,
  event,
  hint,
  index = 0,
) {
  return new SyncPromise((resolve, reject) => {
    const processor = processors[index];
    if (event === null || typeof processor !== 'function') {
      resolve(event);
    } else {
      const result = processor({ ...event }, hint) ;

      debug_build_DEBUG_BUILD && processor.id && result === null && logger_logger.log(`Event processor "${processor.id}" dropped event`);

      if (is_isThenable(result)) {
        void result
          .then(final => notifyEventProcessors(processors, final, hint, index + 1).then(resolve))
          .then(null, reject);
      } else {
        void notifyEventProcessors(processors, result, hint, index + 1)
          .then(resolve)
          .then(null, reject);
      }
    }
  });
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/debug-ids.js


let parsedStackResults;
let lastKeysCount;
let cachedFilenameDebugIds;

/**
 * Returns a map of filenames to debug identifiers.
 */
function getFilenameToDebugIdMap(stackParser) {
  const debugIdMap = worldwide_GLOBAL_OBJ._sentryDebugIds;
  if (!debugIdMap) {
    return {};
  }

  const debugIdKeys = Object.keys(debugIdMap);

  // If the count of registered globals hasn't changed since the last call, we
  // can just return the cached result.
  if (cachedFilenameDebugIds && debugIdKeys.length === lastKeysCount) {
    return cachedFilenameDebugIds;
  }

  lastKeysCount = debugIdKeys.length;

  // Build a map of filename -> debug_id.
  cachedFilenameDebugIds = debugIdKeys.reduce((acc, stackKey) => {
    if (!parsedStackResults) {
      parsedStackResults = {};
    }

    const result = parsedStackResults[stackKey];

    if (result) {
      acc[result[0]] = result[1];
    } else {
      const parsedStack = stackParser(stackKey);

      for (let i = parsedStack.length - 1; i >= 0; i--) {
        const stackFrame = parsedStack[i];
        const filename = stackFrame && stackFrame.filename;
        const debugId = debugIdMap[stackKey];

        if (filename && debugId) {
          acc[filename] = debugId;
          parsedStackResults[stackKey] = [filename, debugId];
          break;
        }
      }
    }

    return acc;
  }, {});

  return cachedFilenameDebugIds;
}

/**
 * Returns a list of debug images for the given resources.
 */
function getDebugImagesForResources(
  stackParser,
  resource_paths,
) {
  const filenameDebugIdMap = getFilenameToDebugIdMap(stackParser);

  if (!filenameDebugIdMap) {
    return [];
  }

  const images = [];
  for (const path of resource_paths) {
    if (path && filenameDebugIdMap[path]) {
      images.push({
        type: 'sourcemap',
        code_file: path,
        debug_id: filenameDebugIdMap[path] ,
      });
    }
  }

  return images;
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/memo.js
/* eslint-disable @typescript-eslint/no-unsafe-member-access */
/* eslint-disable @typescript-eslint/no-explicit-any */

/**
 * Helper to decycle json objects
 *
 * @deprecated This function is deprecated and will be removed in the next major version.
 */
// TODO(v9): Move this function into normalize() directly
function memoBuilder() {
  const hasWeakSet = typeof WeakSet === 'function';
  const inner = hasWeakSet ? new WeakSet() : [];
  function memoize(obj) {
    if (hasWeakSet) {
      if (inner.has(obj)) {
        return true;
      }
      inner.add(obj);
      return false;
    }
    // eslint-disable-next-line @typescript-eslint/prefer-for-of
    for (let i = 0; i < inner.length; i++) {
      const value = inner[i];
      if (value === obj) {
        return true;
      }
    }
    inner.push(obj);
    return false;
  }

  function unmemoize(obj) {
    if (hasWeakSet) {
      inner.delete(obj);
    } else {
      for (let i = 0; i < inner.length; i++) {
        if (inner[i] === obj) {
          inner.splice(i, 1);
          break;
        }
      }
    }
  }
  return [memoize, unmemoize];
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/normalize.js





/**
 * Recursively normalizes the given object.
 *
 * - Creates a copy to prevent original input mutation
 * - Skips non-enumerable properties
 * - When stringifying, calls `toJSON` if implemented
 * - Removes circular references
 * - Translates non-serializable values (`undefined`/`NaN`/functions) to serializable format
 * - Translates known global objects/classes to a string representations
 * - Takes care of `Error` object serialization
 * - Optionally limits depth of final output
 * - Optionally limits number of properties/elements included in any single object/array
 *
 * @param input The object to be normalized.
 * @param depth The max depth to which to normalize the object. (Anything deeper stringified whole.)
 * @param maxProperties The max number of elements or properties to be included in any single array or
 * object in the normalized output.
 * @returns A normalized version of the object, or `"**non-serializable**"` if any errors are thrown during normalization.
 */
// eslint-disable-next-line @typescript-eslint/no-explicit-any
function normalize(input, depth = 100, maxProperties = +Infinity) {
  try {
    // since we're at the outermost level, we don't provide a key
    return visit('', input, depth, maxProperties);
  } catch (err) {
    return { ERROR: `**non-serializable** (${err})` };
  }
}

/** JSDoc */
function normalizeToSize(
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  object,
  // Default Node.js REPL depth
  depth = 3,
  // 100kB, as 200kB is max payload size, so half sounds reasonable
  maxSize = 100 * 1024,
) {
  const normalized = normalize(object, depth);

  if (jsonSize(normalized) > maxSize) {
    return normalizeToSize(object, depth - 1, maxSize);
  }

  return normalized ;
}

/**
 * Visits a node to perform normalization on it
 *
 * @param key The key corresponding to the given node
 * @param value The node to be visited
 * @param depth Optional number indicating the maximum recursion depth
 * @param maxProperties Optional maximum number of properties/elements included in any single object/array
 * @param memo Optional Memo class handling decycling
 */
function visit(
  key,
  value,
  depth = +Infinity,
  maxProperties = +Infinity,
  // eslint-disable-next-line deprecation/deprecation
  memo = memoBuilder(),
) {
  const [memoize, unmemoize] = memo;

  // Get the simple cases out of the way first
  if (
    value == null || // this matches null and undefined -> eqeq not eqeqeq
    ['boolean', 'string'].includes(typeof value) ||
    (typeof value === 'number' && Number.isFinite(value))
  ) {
    return value ;
  }

  const stringified = stringifyValue(key, value);

  // Anything we could potentially dig into more (objects or arrays) will have come back as `"[object XXXX]"`.
  // Everything else will have already been serialized, so if we don't see that pattern, we're done.
  if (!stringified.startsWith('[object ')) {
    return stringified;
  }

  // From here on, we can assert that `value` is either an object or an array.

  // Do not normalize objects that we know have already been normalized. As a general rule, the
  // "__sentry_skip_normalization__" property should only be used sparingly and only should only be set on objects that
  // have already been normalized.
  if ((value )['__sentry_skip_normalization__']) {
    return value ;
  }

  // We can set `__sentry_override_normalization_depth__` on an object to ensure that from there
  // We keep a certain amount of depth.
  // This should be used sparingly, e.g. we use it for the redux integration to ensure we get a certain amount of state.
  const remainingDepth =
    typeof (value )['__sentry_override_normalization_depth__'] === 'number'
      ? ((value )['__sentry_override_normalization_depth__'] )
      : depth;

  // We're also done if we've reached the max depth
  if (remainingDepth === 0) {
    // At this point we know `serialized` is a string of the form `"[object XXXX]"`. Clean it up so it's just `"[XXXX]"`.
    return stringified.replace('object ', '');
  }

  // If we've already visited this branch, bail out, as it's circular reference. If not, note that we're seeing it now.
  if (memoize(value)) {
    return '[Circular ~]';
  }

  // If the value has a `toJSON` method, we call it to extract more information
  const valueWithToJSON = value ;
  if (valueWithToJSON && typeof valueWithToJSON.toJSON === 'function') {
    try {
      const jsonValue = valueWithToJSON.toJSON();
      // We need to normalize the return value of `.toJSON()` in case it has circular references
      return visit('', jsonValue, remainingDepth - 1, maxProperties, memo);
    } catch (err) {
      // pass (The built-in `toJSON` failed, but we can still try to do it ourselves)
    }
  }

  // At this point we know we either have an object or an array, we haven't seen it before, and we're going to recurse
  // because we haven't yet reached the max depth. Create an accumulator to hold the results of visiting each
  // property/entry, and keep track of the number of items we add to it.
  const normalized = (Array.isArray(value) ? [] : {}) ;
  let numAdded = 0;

  // Before we begin, convert`Error` and`Event` instances into plain objects, since some of each of their relevant
  // properties are non-enumerable and otherwise would get missed.
  const visitable = convertToPlainObject(value );

  for (const visitKey in visitable) {
    // Avoid iterating over fields in the prototype if they've somehow been exposed to enumeration.
    if (!Object.prototype.hasOwnProperty.call(visitable, visitKey)) {
      continue;
    }

    if (numAdded >= maxProperties) {
      normalized[visitKey] = '[MaxProperties ~]';
      break;
    }

    // Recursively visit all the child nodes
    const visitValue = visitable[visitKey];
    normalized[visitKey] = visit(visitKey, visitValue, remainingDepth - 1, maxProperties, memo);

    numAdded++;
  }

  // Once we've visited all the branches, remove the parent from memo storage
  unmemoize(value);

  // Return accumulated values
  return normalized;
}

/* eslint-disable complexity */
/**
 * Stringify the given value. Handles various known special values and types.
 *
 * Not meant to be used on simple primitives which already have a string representation, as it will, for example, turn
 * the number 1231 into "[Object Number]", nor on `null`, as it will throw.
 *
 * @param value The value to stringify
 * @returns A stringified representation of the given value
 */
function stringifyValue(
  key,
  // this type is a tiny bit of a cheat, since this function does handle NaN (which is technically a number), but for
  // our internal use, it'll do
  value,
) {
  try {
    if (key === 'domain' && value && typeof value === 'object' && (value )._events) {
      return '[Domain]';
    }

    if (key === 'domainEmitter') {
      return '[DomainEmitter]';
    }

    // It's safe to use `global`, `window`, and `document` here in this manner, as we are asserting using `typeof` first
    // which won't throw if they are not present.

    if (typeof global !== 'undefined' && value === global) {
      return '[Global]';
    }

    // eslint-disable-next-line no-restricted-globals
    if (typeof window !== 'undefined' && value === window) {
      return '[Window]';
    }

    // eslint-disable-next-line no-restricted-globals
    if (typeof document !== 'undefined' && value === document) {
      return '[Document]';
    }

    if (isVueViewModel(value)) {
      return '[VueViewModel]';
    }

    // React's SyntheticEvent thingy
    if (isSyntheticEvent(value)) {
      return '[SyntheticEvent]';
    }

    if (typeof value === 'number' && !Number.isFinite(value)) {
      return `[${value}]`;
    }

    if (typeof value === 'function') {
      return `[Function: ${getFunctionName(value)}]`;
    }

    if (typeof value === 'symbol') {
      return `[${String(value)}]`;
    }

    // stringified BigInts are indistinguishable from regular numbers, so we need to label them to avoid confusion
    if (typeof value === 'bigint') {
      return `[BigInt: ${String(value)}]`;
    }

    // Now that we've knocked out all the special cases and the primitives, all we have left are objects. Simply casting
    // them to strings means that instances of classes which haven't defined their `toStringTag` will just come out as
    // `"[object Object]"`. If we instead look at the constructor's name (which is the same as the name of the class),
    // we can make sure that only plain objects come out that way.
    const objName = getConstructorName(value);

    // Handle HTML Elements
    if (/^HTML(\w*)Element$/.test(objName)) {
      return `[HTMLElement: ${objName}]`;
    }

    return `[object ${objName}]`;
  } catch (err) {
    return `**non-serializable** (${err})`;
  }
}
/* eslint-enable complexity */

function getConstructorName(value) {
  const prototype = Object.getPrototypeOf(value);

  return prototype ? prototype.constructor.name : 'null prototype';
}

/** Calculates bytes size of input string */
function utf8Length(value) {
  // eslint-disable-next-line no-bitwise
  return ~-encodeURI(value).split(/%..|./).length;
}

/** Calculates bytes size of input object */
// eslint-disable-next-line @typescript-eslint/no-explicit-any
function jsonSize(value) {
  return utf8Length(JSON.stringify(value));
}

/**
 * Normalizes URLs in exceptions and stacktraces to a base path so Sentry can fingerprint
 * across platforms and working directory.
 *
 * @param url The URL to be normalized.
 * @param basePath The application base path.
 * @returns The normalized URL.
 */
function normalizeUrlToBase(url, basePath) {
  const escapedBase = basePath
    // Backslash to forward
    .replace(/\\/g, '/')
    // Escape RegExp special characters
    .replace(/[|\\{}()[\]^$+*?.]/g, '\\$&');

  let newUrl = url;
  try {
    newUrl = decodeURI(url);
  } catch (_Oo) {
    // Sometime this breaks
  }
  return (
    newUrl
      .replace(/\\/g, '/')
      .replace(/webpack:\/?/g, '') // Remove intermediate base path
      // eslint-disable-next-line @sentry-internal/sdk/no-regexp-constructor
      .replace(new RegExp(`(file://)?/*${escapedBase}/*`, 'ig'), 'app:///')
  );
}



;// ../../node_modules/@sentry/core/build/esm/semanticAttributes.js
/**
 * Use this attribute to represent the source of a span.
 * Should be one of: custom, url, route, view, component, task, unknown
 *
 */
const semanticAttributes_SEMANTIC_ATTRIBUTE_SENTRY_SOURCE = 'sentry.source';

/**
 * Use this attribute to represent the sample rate used for a span.
 */
const SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE = 'sentry.sample_rate';

/**
 * Use this attribute to represent the operation of a span.
 */
const SEMANTIC_ATTRIBUTE_SENTRY_OP = 'sentry.op';

/**
 * Use this attribute to represent the origin of a span.
 */
const SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN = 'sentry.origin';

/** The reason why an idle span finished. */
const SEMANTIC_ATTRIBUTE_SENTRY_IDLE_SPAN_FINISH_REASON = 'sentry.idle_span_finish_reason';

/** The unit of a measurement, which may be stored as a TimedEvent. */
const SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT = 'sentry.measurement_unit';

/** The value of a measurement, which may be stored as a TimedEvent. */
const SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE = 'sentry.measurement_value';

/**
 * A custom span name set by users guaranteed to be taken over any automatically
 * inferred name. This attribute is removed before the span is sent.
 *
 * @internal only meant for internal SDK usage
 * @hidden
 */
const semanticAttributes_SEMANTIC_ATTRIBUTE_SENTRY_CUSTOM_SPAN_NAME = 'sentry.custom_span_name';

/**
 * The id of the profile that this span occurred in.
 */
const SEMANTIC_ATTRIBUTE_PROFILE_ID = 'sentry.profile_id';

const SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME = 'sentry.exclusive_time';

const SEMANTIC_ATTRIBUTE_CACHE_HIT = 'cache.hit';

const SEMANTIC_ATTRIBUTE_CACHE_KEY = 'cache.key';

const SEMANTIC_ATTRIBUTE_CACHE_ITEM_SIZE = 'cache.item_size';

/** TODO: Remove these once we update to latest semantic conventions */
const SEMANTIC_ATTRIBUTE_HTTP_REQUEST_METHOD = 'http.request.method';
const SEMANTIC_ATTRIBUTE_URL_FULL = 'url.full';



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/baggage.js




/**
 * @deprecated Use a `"baggage"` string directly
 */
const BAGGAGE_HEADER_NAME = 'baggage';

const SENTRY_BAGGAGE_KEY_PREFIX = 'sentry-';

const SENTRY_BAGGAGE_KEY_PREFIX_REGEX = /^sentry-/;

/**
 * Max length of a serialized baggage string
 *
 * https://www.w3.org/TR/baggage/#limits
 */
const MAX_BAGGAGE_STRING_LENGTH = 8192;

/**
 * Takes a baggage header and turns it into Dynamic Sampling Context, by extracting all the "sentry-" prefixed values
 * from it.
 *
 * @param baggageHeader A very bread definition of a baggage header as it might appear in various frameworks.
 * @returns The Dynamic Sampling Context that was found on `baggageHeader`, if there was any, `undefined` otherwise.
 */
function baggageHeaderToDynamicSamplingContext(
  // Very liberal definition of what any incoming header might look like
  baggageHeader,
) {
  const baggageObject = parseBaggageHeader(baggageHeader);

  if (!baggageObject) {
    return undefined;
  }

  // Read all "sentry-" prefixed values out of the baggage object and put it onto a dynamic sampling context object.
  const dynamicSamplingContext = Object.entries(baggageObject).reduce((acc, [key, value]) => {
    if (key.match(SENTRY_BAGGAGE_KEY_PREFIX_REGEX)) {
      const nonPrefixedKey = key.slice(SENTRY_BAGGAGE_KEY_PREFIX.length);
      acc[nonPrefixedKey] = value;
    }
    return acc;
  }, {});

  // Only return a dynamic sampling context object if there are keys in it.
  // A keyless object means there were no sentry values on the header, which means that there is no DSC.
  if (Object.keys(dynamicSamplingContext).length > 0) {
    return dynamicSamplingContext ;
  } else {
    return undefined;
  }
}

/**
 * Turns a Dynamic Sampling Object into a baggage header by prefixing all the keys on the object with "sentry-".
 *
 * @param dynamicSamplingContext The Dynamic Sampling Context to turn into a header. For convenience and compatibility
 * with the `getDynamicSamplingContext` method on the Transaction class ,this argument can also be `undefined`. If it is
 * `undefined` the function will return `undefined`.
 * @returns a baggage header, created from `dynamicSamplingContext`, or `undefined` either if `dynamicSamplingContext`
 * was `undefined`, or if `dynamicSamplingContext` didn't contain any values.
 */
function baggage_dynamicSamplingContextToSentryBaggageHeader(
  // this also takes undefined for convenience and bundle size in other places
  dynamicSamplingContext,
) {
  if (!dynamicSamplingContext) {
    return undefined;
  }

  // Prefix all DSC keys with "sentry-" and put them into a new object
  const sentryPrefixedDSC = Object.entries(dynamicSamplingContext).reduce(
    (acc, [dscKey, dscValue]) => {
      if (dscValue) {
        acc[`${SENTRY_BAGGAGE_KEY_PREFIX}${dscKey}`] = dscValue;
      }
      return acc;
    },
    {},
  );

  return objectToBaggageHeader(sentryPrefixedDSC);
}

/**
 * Take a baggage header and parse it into an object.
 */
function parseBaggageHeader(
  baggageHeader,
) {
  if (!baggageHeader || (!isString(baggageHeader) && !Array.isArray(baggageHeader))) {
    return undefined;
  }

  if (Array.isArray(baggageHeader)) {
    // Combine all baggage headers into one object containing the baggage values so we can later read the Sentry-DSC-values from it
    return baggageHeader.reduce((acc, curr) => {
      const currBaggageObject = baggageHeaderToObject(curr);
      Object.entries(currBaggageObject).forEach(([key, value]) => {
        acc[key] = value;
      });
      return acc;
    }, {});
  }

  return baggageHeaderToObject(baggageHeader);
}

/**
 * Will parse a baggage header, which is a simple key-value map, into a flat object.
 *
 * @param baggageHeader The baggage header to parse.
 * @returns a flat object containing all the key-value pairs from `baggageHeader`.
 */
function baggageHeaderToObject(baggageHeader) {
  return baggageHeader
    .split(',')
    .map(baggageEntry => baggageEntry.split('=').map(keyOrValue => decodeURIComponent(keyOrValue.trim())))
    .reduce((acc, [key, value]) => {
      if (key && value) {
        acc[key] = value;
      }
      return acc;
    }, {});
}

/**
 * Turns a flat object (key-value pairs) into a baggage header, which is also just key-value pairs.
 *
 * @param object The object to turn into a baggage header.
 * @returns a baggage header string, or `undefined` if the object didn't have any values, since an empty baggage header
 * is not spec compliant.
 */
function objectToBaggageHeader(object) {
  if (Object.keys(object).length === 0) {
    // An empty baggage header is not spec compliant: We return undefined.
    return undefined;
  }

  return Object.entries(object).reduce((baggageHeader, [objectKey, objectValue], currentIndex) => {
    const baggageEntry = `${encodeURIComponent(objectKey)}=${encodeURIComponent(objectValue)}`;
    const newBaggageHeader = currentIndex === 0 ? baggageEntry : `${baggageHeader},${baggageEntry}`;
    if (newBaggageHeader.length > MAX_BAGGAGE_STRING_LENGTH) {
      DEBUG_BUILD &&
        logger.warn(
          `Not adding key: ${objectKey} with val: ${objectValue} to baggage header due to exceeding baggage size limits.`,
        );
      return baggageHeader;
    } else {
      return newBaggageHeader;
    }
  }, '');
}



;// ../../node_modules/@sentry/core/build/esm/utils/hasTracingEnabled.js


// Treeshakable guard to remove all code related to tracing

/**
 * Determines if tracing is currently enabled.
 *
 * Tracing is enabled when at least one of `tracesSampleRate` and `tracesSampler` is defined in the SDK config.
 */
function hasTracingEnabled(
  maybeOptions,
) {
  if (typeof __SENTRY_TRACING__ === 'boolean' && !__SENTRY_TRACING__) {
    return false;
  }

  const client = currentScopes_getClient();
  const options = maybeOptions || (client && client.getOptions());
  // eslint-disable-next-line deprecation/deprecation
  return !!options && (options.enableTracing || 'tracesSampleRate' in options || 'tracesSampler' in options);
}



;// ../../node_modules/@sentry/core/build/esm/metrics/metric-summary.js


/**
 * key: bucketKey
 * value: [exportKey, MetricSummary]
 */

const METRICS_SPAN_FIELD = '_sentryMetrics';

/**
 * Fetches the metric summary if it exists for the passed span
 */
function getMetricSummaryJsonForSpan(span) {
  const storage = (span )[METRICS_SPAN_FIELD];

  if (!storage) {
    return undefined;
  }
  const output = {};

  for (const [, [exportKey, summary]] of storage) {
    const arr = output[exportKey] || (output[exportKey] = []);
    arr.push(object_dropUndefinedKeys(summary));
  }

  return output;
}

/**
 * Updates the metric summary on a span.
 */
function metric_summary_updateMetricSummaryOnSpan(
  span,
  metricType,
  sanitizedName,
  value,
  unit,
  tags,
  bucketKey,
) {
  const existingStorage = (span )[METRICS_SPAN_FIELD];
  const storage =
    existingStorage ||
    ((span )[METRICS_SPAN_FIELD] = new Map());

  const exportKey = `${metricType}:${sanitizedName}@${unit}`;
  const bucketItem = storage.get(bucketKey);

  if (bucketItem) {
    const [, summary] = bucketItem;
    storage.set(bucketKey, [
      exportKey,
      {
        min: Math.min(summary.min, value),
        max: Math.max(summary.max, value),
        count: (summary.count += 1),
        sum: (summary.sum += value),
        tags: summary.tags,
      },
    ]);
  } else {
    storage.set(bucketKey, [
      exportKey,
      {
        min: value,
        max: value,
        count: 1,
        sum: value,
        tags,
      },
    ]);
  }
}



;// ../../node_modules/@sentry/core/build/esm/tracing/spanstatus.js
const SPAN_STATUS_UNSET = 0;
const SPAN_STATUS_OK = 1;
const SPAN_STATUS_ERROR = 2;

/**
 * Converts a HTTP status code into a sentry status with a message.
 *
 * @param httpStatus The HTTP response status code.
 * @returns The span status or unknown_error.
 */
// https://develop.sentry.dev/sdk/event-payloads/span/
function getSpanStatusFromHttpCode(httpStatus) {
  if (httpStatus < 400 && httpStatus >= 100) {
    return { code: SPAN_STATUS_OK };
  }

  if (httpStatus >= 400 && httpStatus < 500) {
    switch (httpStatus) {
      case 401:
        return { code: SPAN_STATUS_ERROR, message: 'unauthenticated' };
      case 403:
        return { code: SPAN_STATUS_ERROR, message: 'permission_denied' };
      case 404:
        return { code: SPAN_STATUS_ERROR, message: 'not_found' };
      case 409:
        return { code: SPAN_STATUS_ERROR, message: 'already_exists' };
      case 413:
        return { code: SPAN_STATUS_ERROR, message: 'failed_precondition' };
      case 429:
        return { code: SPAN_STATUS_ERROR, message: 'resource_exhausted' };
      case 499:
        return { code: SPAN_STATUS_ERROR, message: 'cancelled' };
      default:
        return { code: SPAN_STATUS_ERROR, message: 'invalid_argument' };
    }
  }

  if (httpStatus >= 500 && httpStatus < 600) {
    switch (httpStatus) {
      case 501:
        return { code: SPAN_STATUS_ERROR, message: 'unimplemented' };
      case 503:
        return { code: SPAN_STATUS_ERROR, message: 'unavailable' };
      case 504:
        return { code: SPAN_STATUS_ERROR, message: 'deadline_exceeded' };
      default:
        return { code: SPAN_STATUS_ERROR, message: 'internal_error' };
    }
  }

  return { code: SPAN_STATUS_ERROR, message: 'unknown_error' };
}

/**
 * Sets the Http status attributes on the current span based on the http code.
 * Additionally, the span's status is updated, depending on the http code.
 */
function setHttpStatus(span, httpStatus) {
  span.setAttribute('http.response.status_code', httpStatus);

  const spanStatus = getSpanStatusFromHttpCode(httpStatus);
  if (spanStatus.message !== 'unknown_error') {
    span.setStatus(spanStatus);
  }
}



;// ../../node_modules/@sentry/core/build/esm/utils/spanUtils.js













// These are aligned with OpenTelemetry trace flags
const TRACE_FLAG_NONE = 0x0;
const TRACE_FLAG_SAMPLED = 0x1;

// todo(v9): Remove this once we've stopped dropping spans via `beforeSendSpan`
let hasShownSpanDropWarning = false;

/**
 * Convert a span to a trace context, which can be sent as the `trace` context in an event.
 * By default, this will only include trace_id, span_id & parent_span_id.
 * If `includeAllData` is true, it will also include data, op, status & origin.
 */
function spanToTransactionTraceContext(span) {
  const { spanId: span_id, traceId: trace_id } = span.spanContext();
  const { data, op, parent_span_id, status, origin } = spanUtils_spanToJSON(span);

  return dropUndefinedKeys({
    parent_span_id,
    span_id,
    trace_id,
    data,
    op,
    status,
    origin,
  });
}

/**
 * Convert a span to a trace context, which can be sent as the `trace` context in a non-transaction event.
 */
function spanToTraceContext(span) {
  const { spanId, traceId: trace_id, isRemote } = span.spanContext();

  // If the span is remote, we use a random/virtual span as span_id to the trace context,
  // and the remote span as parent_span_id
  const parent_span_id = isRemote ? spanId : spanUtils_spanToJSON(span).parent_span_id;
  const span_id = isRemote ? generateSpanId() : spanId;

  return object_dropUndefinedKeys({
    parent_span_id,
    span_id,
    trace_id,
  });
}

/**
 * Convert a Span to a Sentry trace header.
 */
function spanToTraceHeader(span) {
  const { traceId, spanId } = span.spanContext();
  const sampled = spanIsSampled(span);
  return generateSentryTraceHeader(traceId, spanId, sampled);
}

/**
 * Convert a span time input into a timestamp in seconds.
 */
function spanTimeInputToSeconds(input) {
  if (typeof input === 'number') {
    return ensureTimestampInSeconds(input);
  }

  if (Array.isArray(input)) {
    // See {@link HrTime} for the array-based time format
    return input[0] + input[1] / 1e9;
  }

  if (input instanceof Date) {
    return ensureTimestampInSeconds(input.getTime());
  }

  return time_timestampInSeconds();
}

/**
 * Converts a timestamp to second, if it was in milliseconds, or keeps it as second.
 */
function ensureTimestampInSeconds(timestamp) {
  const isMs = timestamp > 9999999999;
  return isMs ? timestamp / 1000 : timestamp;
}

/**
 * Convert a span to a JSON representation.
 */
// Note: Because of this, we currently have a circular type dependency (which we opted out of in package.json).
// This is not avoidable as we need `spanToJSON` in `spanUtils.ts`, which in turn is needed by `span.ts` for backwards compatibility.
// And `spanToJSON` needs the Span class from `span.ts` to check here.
function spanUtils_spanToJSON(span) {
  if (spanIsSentrySpan(span)) {
    return span.getSpanJSON();
  }

  try {
    const { spanId: span_id, traceId: trace_id } = span.spanContext();

    // Handle a span from @opentelemetry/sdk-base-trace's `Span` class
    if (spanIsOpenTelemetrySdkTraceBaseSpan(span)) {
      const { attributes, startTime, name, endTime, parentSpanId, status } = span;

      return object_dropUndefinedKeys({
        span_id,
        trace_id,
        data: attributes,
        description: name,
        parent_span_id: parentSpanId,
        start_timestamp: spanTimeInputToSeconds(startTime),
        // This is [0,0] by default in OTEL, in which case we want to interpret this as no end time
        timestamp: spanTimeInputToSeconds(endTime) || undefined,
        status: getStatusMessage(status),
        op: attributes[SEMANTIC_ATTRIBUTE_SENTRY_OP],
        origin: attributes[SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN] ,
        _metrics_summary: getMetricSummaryJsonForSpan(span),
      });
    }

    // Finally, at least we have `spanContext()`....
    return {
      span_id,
      trace_id,
    };
  } catch (e) {
    return {};
  }
}

function spanIsOpenTelemetrySdkTraceBaseSpan(span) {
  const castSpan = span ;
  return !!castSpan.attributes && !!castSpan.startTime && !!castSpan.name && !!castSpan.endTime && !!castSpan.status;
}

/** Exported only for tests. */

/**
 * Sadly, due to circular dependency checks we cannot actually import the Span class here and check for instanceof.
 * :( So instead we approximate this by checking if it has the `getSpanJSON` method.
 */
function spanIsSentrySpan(span) {
  return typeof (span ).getSpanJSON === 'function';
}

/**
 * Returns true if a span is sampled.
 * In most cases, you should just use `span.isRecording()` instead.
 * However, this has a slightly different semantic, as it also returns false if the span is finished.
 * So in the case where this distinction is important, use this method.
 */
function spanIsSampled(span) {
  // We align our trace flags with the ones OpenTelemetry use
  // So we also check for sampled the same way they do.
  const { traceFlags } = span.spanContext();
  return traceFlags === TRACE_FLAG_SAMPLED;
}

/** Get the status message to use for a JSON representation of a span. */
function getStatusMessage(status) {
  if (!status || status.code === SPAN_STATUS_UNSET) {
    return undefined;
  }

  if (status.code === SPAN_STATUS_OK) {
    return 'ok';
  }

  return status.message || 'unknown_error';
}

const CHILD_SPANS_FIELD = '_sentryChildSpans';
const ROOT_SPAN_FIELD = '_sentryRootSpan';

/**
 * Adds an opaque child span reference to a span.
 */
function addChildSpanToSpan(span, childSpan) {
  // We store the root span reference on the child span
  // We need this for `getRootSpan()` to work
  const rootSpan = span[ROOT_SPAN_FIELD] || span;
  addNonEnumerableProperty(childSpan , ROOT_SPAN_FIELD, rootSpan);

  // We store a list of child spans on the parent span
  // We need this for `getSpanDescendants()` to work
  if (span[CHILD_SPANS_FIELD]) {
    span[CHILD_SPANS_FIELD].add(childSpan);
  } else {
    addNonEnumerableProperty(span, CHILD_SPANS_FIELD, new Set([childSpan]));
  }
}

/** This is only used internally by Idle Spans. */
function removeChildSpanFromSpan(span, childSpan) {
  if (span[CHILD_SPANS_FIELD]) {
    span[CHILD_SPANS_FIELD].delete(childSpan);
  }
}

/**
 * Returns an array of the given span and all of its descendants.
 */
function getSpanDescendants(span) {
  const resultSet = new Set();

  function addSpanChildren(span) {
    // This exit condition is required to not infinitely loop in case of a circular dependency.
    if (resultSet.has(span)) {
      return;
      // We want to ignore unsampled spans (e.g. non recording spans)
    } else if (spanIsSampled(span)) {
      resultSet.add(span);
      const childSpans = span[CHILD_SPANS_FIELD] ? Array.from(span[CHILD_SPANS_FIELD]) : [];
      for (const childSpan of childSpans) {
        addSpanChildren(childSpan);
      }
    }
  }

  addSpanChildren(span);

  return Array.from(resultSet);
}

/**
 * Returns the root span of a given span.
 */
function getRootSpan(span) {
  return span[ROOT_SPAN_FIELD] || span;
}

/**
 * Returns the currently active span.
 */
function getActiveSpan() {
  const carrier = getMainCarrier();
  const acs = getAsyncContextStrategy(carrier);
  if (acs.getActiveSpan) {
    return acs.getActiveSpan();
  }

  return _getSpanForScope(getCurrentScope());
}

/**
 * Updates the metric summary on the currently active span
 */
function updateMetricSummaryOnActiveSpan(
  metricType,
  sanitizedName,
  value,
  unit,
  tags,
  bucketKey,
) {
  const span = getActiveSpan();
  if (span) {
    updateMetricSummaryOnSpan(span, metricType, sanitizedName, value, unit, tags, bucketKey);
  }
}

/**
 * Logs a warning once if `beforeSendSpan` is used to drop spans.
 *
 * todo(v9): Remove this once we've stopped dropping spans via `beforeSendSpan`.
 */
function spanUtils_showSpanDropWarning() {
  if (!hasShownSpanDropWarning) {
    logger_consoleSandbox(() => {
      // eslint-disable-next-line no-console
      console.warn(
        '[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.',
      );
    });
    hasShownSpanDropWarning = true;
  }
}

/**
 * Updates the name of the given span and ensures that the span name is not
 * overwritten by the Sentry SDK.
 *
 * Use this function instead of `span.updateName()` if you want to make sure that
 * your name is kept. For some spans, for example root `http.server` spans the
 * Sentry SDK would otherwise overwrite the span name with a high-quality name
 * it infers when the span ends.
 *
 * Use this function in server code or when your span is started on the server
 * and on the client (browser). If you only update a span name on the client,
 * you can also use `span.updateName()` the SDK does not overwrite the name.
 *
 * @param span - The span to update the name of.
 * @param name - The name to set on the span.
 */
function updateSpanName(span, name) {
  span.updateName(name);
  span.setAttributes({
    [SEMANTIC_ATTRIBUTE_SENTRY_SOURCE]: 'custom',
    [SEMANTIC_ATTRIBUTE_SENTRY_CUSTOM_SPAN_NAME]: name,
  });
}



;// ../../node_modules/@sentry/core/build/esm/tracing/dynamicSamplingContext.js








/**
 * If you change this value, also update the terser plugin config to
 * avoid minification of the object property!
 */
const FROZEN_DSC_FIELD = '_frozenDsc';

/**
 * Freeze the given DSC on the given span.
 */
function freezeDscOnSpan(span, dsc) {
  const spanWithMaybeDsc = span ;
  addNonEnumerableProperty(spanWithMaybeDsc, FROZEN_DSC_FIELD, dsc);
}

/**
 * Creates a dynamic sampling context from a client.
 *
 * Dispatches the `createDsc` lifecycle hook as a side effect.
 */
function getDynamicSamplingContextFromClient(trace_id, client) {
  const options = client.getOptions();

  const { publicKey: public_key } = client.getDsn() || {};

  const dsc = object_dropUndefinedKeys({
    environment: options.environment || DEFAULT_ENVIRONMENT,
    release: options.release,
    public_key,
    trace_id,
  }) ;

  client.emit('createDsc', dsc);

  return dsc;
}

/**
 * Get the dynamic sampling context for the currently active scopes.
 */
function getDynamicSamplingContextFromScope(client, scope) {
  const propagationContext = scope.getPropagationContext();
  return propagationContext.dsc || getDynamicSamplingContextFromClient(propagationContext.traceId, client);
}

/**
 * Creates a dynamic sampling context from a span (and client and scope)
 *
 * @param span the span from which a few values like the root span name and sample rate are extracted.
 *
 * @returns a dynamic sampling context
 */
function dynamicSamplingContext_getDynamicSamplingContextFromSpan(span) {
  const client = currentScopes_getClient();
  if (!client) {
    return {};
  }

  const rootSpan = getRootSpan(span);

  // For core implementation, we freeze the DSC onto the span as a non-enumerable property
  const frozenDsc = (rootSpan )[FROZEN_DSC_FIELD];
  if (frozenDsc) {
    return frozenDsc;
  }

  // For OpenTelemetry, we freeze the DSC on the trace state
  const traceState = rootSpan.spanContext().traceState;
  const traceStateDsc = traceState && traceState.get('sentry.dsc');

  // If the span has a DSC, we want it to take precedence
  const dscOnTraceState = traceStateDsc && baggageHeaderToDynamicSamplingContext(traceStateDsc);

  if (dscOnTraceState) {
    return dscOnTraceState;
  }

  // Else, we generate it from the span
  const dsc = getDynamicSamplingContextFromClient(span.spanContext().traceId, client);
  const jsonSpan = spanUtils_spanToJSON(rootSpan);
  const attributes = jsonSpan.data || {};
  const maybeSampleRate = attributes[SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE];

  if (maybeSampleRate != null) {
    dsc.sample_rate = `${maybeSampleRate}`;
  }

  // We don't want to have a transaction name in the DSC if the source is "url" because URLs might contain PII
  const source = attributes[semanticAttributes_SEMANTIC_ATTRIBUTE_SENTRY_SOURCE];

  // after JSON conversion, txn.name becomes jsonSpan.description
  const name = jsonSpan.description;
  if (source !== 'url' && name) {
    dsc.transaction = name;
  }

  // How can we even land here with hasTracingEnabled() returning false?
  // Otel creates a Non-recording span in Tracing Without Performance mode when handling incoming requests
  // So we end up with an active span that is not sampled (neither positively nor negatively)
  if (hasTracingEnabled()) {
    dsc.sampled = String(spanIsSampled(rootSpan));
  }

  client.emit('createDsc', dsc, rootSpan);

  return dsc;
}

/**
 * Convert a Span to a baggage header.
 */
function spanToBaggageHeader(span) {
  const dsc = dynamicSamplingContext_getDynamicSamplingContextFromSpan(span);
  return dynamicSamplingContextToSentryBaggageHeader(dsc);
}



;// ../../node_modules/@sentry/core/build/esm/utils/applyScopeDataToEvent.js





/**
 * Applies data from the scope to the event and runs all event processors on it.
 */
function applyScopeDataToEvent(event, data) {
  const { fingerprint, span, breadcrumbs, sdkProcessingMetadata } = data;

  // Apply general data
  applyDataToEvent(event, data);

  // We want to set the trace context for normal events only if there isn't already
  // a trace context on the event. There is a product feature in place where we link
  // errors with transaction and it relies on that.
  if (span) {
    applySpanToEvent(event, span);
  }

  applyFingerprintToEvent(event, fingerprint);
  applyBreadcrumbsToEvent(event, breadcrumbs);
  applySdkMetadataToEvent(event, sdkProcessingMetadata);
}

/** Merge data of two scopes together. */
function mergeScopeData(data, mergeData) {
  const {
    extra,
    tags,
    user,
    contexts,
    level,
    sdkProcessingMetadata,
    breadcrumbs,
    fingerprint,
    eventProcessors,
    attachments,
    propagationContext,
    transactionName,
    span,
  } = mergeData;

  mergeAndOverwriteScopeData(data, 'extra', extra);
  mergeAndOverwriteScopeData(data, 'tags', tags);
  mergeAndOverwriteScopeData(data, 'user', user);
  mergeAndOverwriteScopeData(data, 'contexts', contexts);

  data.sdkProcessingMetadata = merge(data.sdkProcessingMetadata, sdkProcessingMetadata, 2);

  if (level) {
    data.level = level;
  }

  if (transactionName) {
    data.transactionName = transactionName;
  }

  if (span) {
    data.span = span;
  }

  if (breadcrumbs.length) {
    data.breadcrumbs = [...data.breadcrumbs, ...breadcrumbs];
  }

  if (fingerprint.length) {
    data.fingerprint = [...data.fingerprint, ...fingerprint];
  }

  if (eventProcessors.length) {
    data.eventProcessors = [...data.eventProcessors, ...eventProcessors];
  }

  if (attachments.length) {
    data.attachments = [...data.attachments, ...attachments];
  }

  data.propagationContext = { ...data.propagationContext, ...propagationContext };
}

/**
 * Merges certain scope data. Undefined values will overwrite any existing values.
 * Exported only for tests.
 */
function mergeAndOverwriteScopeData

(data, prop, mergeVal) {
  data[prop] = merge(data[prop], mergeVal, 1);
}

function applyDataToEvent(event, data) {
  const { extra, tags, user, contexts, level, transactionName } = data;

  const cleanedExtra = object_dropUndefinedKeys(extra);
  if (cleanedExtra && Object.keys(cleanedExtra).length) {
    event.extra = { ...cleanedExtra, ...event.extra };
  }

  const cleanedTags = object_dropUndefinedKeys(tags);
  if (cleanedTags && Object.keys(cleanedTags).length) {
    event.tags = { ...cleanedTags, ...event.tags };
  }

  const cleanedUser = object_dropUndefinedKeys(user);
  if (cleanedUser && Object.keys(cleanedUser).length) {
    event.user = { ...cleanedUser, ...event.user };
  }

  const cleanedContexts = object_dropUndefinedKeys(contexts);
  if (cleanedContexts && Object.keys(cleanedContexts).length) {
    event.contexts = { ...cleanedContexts, ...event.contexts };
  }

  if (level) {
    event.level = level;
  }

  // transaction events get their `transaction` from the root span name
  if (transactionName && event.type !== 'transaction') {
    event.transaction = transactionName;
  }
}

function applyBreadcrumbsToEvent(event, breadcrumbs) {
  const mergedBreadcrumbs = [...(event.breadcrumbs || []), ...breadcrumbs];
  event.breadcrumbs = mergedBreadcrumbs.length ? mergedBreadcrumbs : undefined;
}

function applySdkMetadataToEvent(event, sdkProcessingMetadata) {
  event.sdkProcessingMetadata = {
    ...event.sdkProcessingMetadata,
    ...sdkProcessingMetadata,
  };
}

function applySpanToEvent(event, span) {
  event.contexts = {
    trace: spanToTraceContext(span),
    ...event.contexts,
  };

  event.sdkProcessingMetadata = {
    dynamicSamplingContext: dynamicSamplingContext_getDynamicSamplingContextFromSpan(span),
    ...event.sdkProcessingMetadata,
  };

  const rootSpan = getRootSpan(span);
  const transactionName = spanUtils_spanToJSON(rootSpan).description;
  if (transactionName && !event.transaction && event.type === 'transaction') {
    event.transaction = transactionName;
  }
}

/**
 * Applies fingerprint from the scope to the event if there's one,
 * uses message if there's one instead or get rid of empty fingerprint
 */
function applyFingerprintToEvent(event, fingerprint) {
  // Make sure it's an array first and we actually have something in place
  event.fingerprint = event.fingerprint
    ? Array.isArray(event.fingerprint)
      ? event.fingerprint
      : [event.fingerprint]
    : [];

  // If we have something on the scope, then merge it with event
  if (fingerprint) {
    event.fingerprint = event.fingerprint.concat(fingerprint);
  }

  // If we have no data at all, remove empty array default
  if (event.fingerprint && !event.fingerprint.length) {
    delete event.fingerprint;
  }
}



;// ../../node_modules/@sentry/core/build/esm/utils/prepareEvent.js











/**
 * This type makes sure that we get either a CaptureContext, OR an EventHint.
 * It does not allow mixing them, which could lead to unexpected outcomes, e.g. this is disallowed:
 * { user: { id: '123' }, mechanism: { handled: false } }
 */

/**
 * Adds common information to events.
 *
 * The information includes release and environment from `options`,
 * breadcrumbs and context (extra, tags and user) from the scope.
 *
 * Information that is already present in the event is never overwritten. For
 * nested objects, such as the context, keys are merged.
 *
 * @param event The original event.
 * @param hint May contain additional information about the original exception.
 * @param scope A scope containing event metadata.
 * @returns A new event with more information.
 * @hidden
 */
function prepareEvent(
  options,
  event,
  hint,
  scope,
  client,
  isolationScope,
) {
  const { normalizeDepth = 3, normalizeMaxBreadth = 1000 } = options;
  const prepared = {
    ...event,
    event_id: event.event_id || hint.event_id || misc_uuid4(),
    timestamp: event.timestamp || dateTimestampInSeconds(),
  };
  const integrations = hint.integrations || options.integrations.map(i => i.name);

  applyClientOptions(prepared, options);
  applyIntegrationsMetadata(prepared, integrations);

  if (client) {
    client.emit('applyFrameMetadata', event);
  }

  // Only put debug IDs onto frames for error events.
  if (event.type === undefined) {
    applyDebugIds(prepared, options.stackParser);
  }

  // If we have scope given to us, use it as the base for further modifications.
  // This allows us to prevent unnecessary copying of data if `captureContext` is not provided.
  const finalScope = getFinalScope(scope, hint.captureContext);

  if (hint.mechanism) {
    addExceptionMechanism(prepared, hint.mechanism);
  }

  const clientEventProcessors = client ? client.getEventProcessors() : [];

  // This should be the last thing called, since we want that
  // {@link Scope.addEventProcessor} gets the finished prepared event.
  // Merge scope data together
  const data = getGlobalScope().getScopeData();

  if (isolationScope) {
    const isolationData = isolationScope.getScopeData();
    mergeScopeData(data, isolationData);
  }

  if (finalScope) {
    const finalScopeData = finalScope.getScopeData();
    mergeScopeData(data, finalScopeData);
  }

  const attachments = [...(hint.attachments || []), ...data.attachments];
  if (attachments.length) {
    hint.attachments = attachments;
  }

  applyScopeDataToEvent(prepared, data);

  const eventProcessors = [
    ...clientEventProcessors,
    // Run scope event processors _after_ all other processors
    ...data.eventProcessors,
  ];

  const result = notifyEventProcessors(eventProcessors, prepared, hint);

  return result.then(evt => {
    if (evt) {
      // We apply the debug_meta field only after all event processors have ran, so that if any event processors modified
      // file names (e.g.the RewriteFrames integration) the filename -> debug ID relationship isn't destroyed.
      // This should not cause any PII issues, since we're only moving data that is already on the event and not adding
      // any new data
      applyDebugMeta(evt);
    }

    if (typeof normalizeDepth === 'number' && normalizeDepth > 0) {
      return normalizeEvent(evt, normalizeDepth, normalizeMaxBreadth);
    }
    return evt;
  });
}

/**
 * Enhances event using the client configuration.
 * It takes care of all "static" values like environment, release and `dist`,
 * as well as truncating overly long values.
 *
 * Only exported for tests.
 *
 * @param event event instance to be enhanced
 */
function applyClientOptions(event, options) {
  const { environment, release, dist, maxValueLength = 250 } = options;

  // empty strings do not make sense for environment, release, and dist
  // so we handle them the same as if they were not provided
  event.environment = event.environment || environment || DEFAULT_ENVIRONMENT;

  if (!event.release && release) {
    event.release = release;
  }

  if (!event.dist && dist) {
    event.dist = dist;
  }

  if (event.message) {
    event.message = truncate(event.message, maxValueLength);
  }

  const exception = event.exception && event.exception.values && event.exception.values[0];
  if (exception && exception.value) {
    exception.value = truncate(exception.value, maxValueLength);
  }

  const request = event.request;
  if (request && request.url) {
    request.url = truncate(request.url, maxValueLength);
  }
}

/**
 * Puts debug IDs into the stack frames of an error event.
 */
function applyDebugIds(event, stackParser) {
  // Build a map of filename -> debug_id
  const filenameDebugIdMap = getFilenameToDebugIdMap(stackParser);

  try {
    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
    event.exception.values.forEach(exception => {
      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
      exception.stacktrace.frames.forEach(frame => {
        if (filenameDebugIdMap && frame.filename) {
          frame.debug_id = filenameDebugIdMap[frame.filename];
        }
      });
    });
  } catch (e) {
    // To save bundle size we're just try catching here instead of checking for the existence of all the different objects.
  }
}

/**
 * Moves debug IDs from the stack frames of an error event into the debug_meta field.
 */
function applyDebugMeta(event) {
  // Extract debug IDs and filenames from the stack frames on the event.
  const filenameDebugIdMap = {};
  try {
    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
    event.exception.values.forEach(exception => {
      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
      exception.stacktrace.frames.forEach(frame => {
        if (frame.debug_id) {
          if (frame.abs_path) {
            filenameDebugIdMap[frame.abs_path] = frame.debug_id;
          } else if (frame.filename) {
            filenameDebugIdMap[frame.filename] = frame.debug_id;
          }
          delete frame.debug_id;
        }
      });
    });
  } catch (e) {
    // To save bundle size we're just try catching here instead of checking for the existence of all the different objects.
  }

  if (Object.keys(filenameDebugIdMap).length === 0) {
    return;
  }

  // Fill debug_meta information
  event.debug_meta = event.debug_meta || {};
  event.debug_meta.images = event.debug_meta.images || [];
  const images = event.debug_meta.images;
  Object.entries(filenameDebugIdMap).forEach(([filename, debug_id]) => {
    images.push({
      type: 'sourcemap',
      code_file: filename,
      debug_id,
    });
  });
}

/**
 * This function adds all used integrations to the SDK info in the event.
 * @param event The event that will be filled with all integrations.
 */
function applyIntegrationsMetadata(event, integrationNames) {
  if (integrationNames.length > 0) {
    event.sdk = event.sdk || {};
    event.sdk.integrations = [...(event.sdk.integrations || []), ...integrationNames];
  }
}

/**
 * Applies `normalize` function on necessary `Event` attributes to make them safe for serialization.
 * Normalized keys:
 * - `breadcrumbs.data`
 * - `user`
 * - `contexts`
 * - `extra`
 * @param event Event
 * @returns Normalized event
 */
function normalizeEvent(event, depth, maxBreadth) {
  if (!event) {
    return null;
  }

  const normalized = {
    ...event,
    ...(event.breadcrumbs && {
      breadcrumbs: event.breadcrumbs.map(b => ({
        ...b,
        ...(b.data && {
          data: normalize(b.data, depth, maxBreadth),
        }),
      })),
    }),
    ...(event.user && {
      user: normalize(event.user, depth, maxBreadth),
    }),
    ...(event.contexts && {
      contexts: normalize(event.contexts, depth, maxBreadth),
    }),
    ...(event.extra && {
      extra: normalize(event.extra, depth, maxBreadth),
    }),
  };

  // event.contexts.trace stores information about a Transaction. Similarly,
  // event.spans[] stores information about child Spans. Given that a
  // Transaction is conceptually a Span, normalization should apply to both
  // Transactions and Spans consistently.
  // For now the decision is to skip normalization of Transactions and Spans,
  // so this block overwrites the normalized event to add back the original
  // Transaction information prior to normalization.
  if (event.contexts && event.contexts.trace && normalized.contexts) {
    normalized.contexts.trace = event.contexts.trace;

    // event.contexts.trace.data may contain circular/dangerous data so we need to normalize it
    if (event.contexts.trace.data) {
      normalized.contexts.trace.data = normalize(event.contexts.trace.data, depth, maxBreadth);
    }
  }

  // event.spans[].data may contain circular/dangerous data so we need to normalize it
  if (event.spans) {
    normalized.spans = event.spans.map(span => {
      return {
        ...span,
        ...(span.data && {
          data: normalize(span.data, depth, maxBreadth),
        }),
      };
    });
  }

  // event.contexts.flags (FeatureFlagContext) stores context for our feature
  // flag integrations. It has a greater nesting depth than our other typed
  // Contexts, so we re-normalize with a fixed depth of 3 here. We do not want
  // to skip this in case of conflicting, user-provided context.
  if (event.contexts && event.contexts.flags && normalized.contexts) {
    normalized.contexts.flags = normalize(event.contexts.flags, 3, maxBreadth);
  }

  return normalized;
}

function getFinalScope(
  scope,
  captureContext,
) {
  if (!captureContext) {
    return scope;
  }

  const finalScope = scope ? scope.clone() : new Scope();
  finalScope.update(captureContext);
  return finalScope;
}

/**
 * Parse either an `EventHint` directly, or convert a `CaptureContext` to an `EventHint`.
 * This is used to allow to update method signatures that used to accept a `CaptureContext` but should now accept an `EventHint`.
 */
function parseEventHintOrCaptureContext(
  hint,
) {
  if (!hint) {
    return undefined;
  }

  // If you pass a Scope or `() => Scope` as CaptureContext, we just return this as captureContext
  if (hintIsScopeOrFunction(hint)) {
    return { captureContext: hint };
  }

  if (hintIsScopeContext(hint)) {
    return {
      captureContext: hint,
    };
  }

  return hint;
}

function hintIsScopeOrFunction(
  hint,
) {
  return hint instanceof Scope || typeof hint === 'function';
}

const captureContextKeys = [
  'user',
  'level',
  'extra',
  'contexts',
  'tags',
  'fingerprint',
  'requestSession',
  'propagationContext',
] ;

function hintIsScopeContext(hint) {
  return Object.keys(hint).some(key => captureContextKeys.includes(key ));
}



;// ../../node_modules/@sentry/core/build/esm/exports.js











/**
 * Captures an exception event and sends it to Sentry.
 *
 * @param exception The exception to capture.
 * @param hint Optional additional data to attach to the Sentry event.
 * @returns the id of the captured Sentry event.
 */
function captureException(exception, hint) {
  return currentScopes_getCurrentScope().captureException(exception, parseEventHintOrCaptureContext(hint));
}

/**
 * Captures a message event and sends it to Sentry.
 *
 * @param message The message to send to Sentry.
 * @param captureContext Define the level of the message or pass in additional data to attach to the message.
 * @returns the id of the captured message.
 */
function captureMessage(message, captureContext) {
  // This is necessary to provide explicit scopes upgrade, without changing the original
  // arity of the `captureMessage(message, level)` method.
  const level = typeof captureContext === 'string' ? captureContext : undefined;
  const context = typeof captureContext !== 'string' ? { captureContext } : undefined;
  return getCurrentScope().captureMessage(message, level, context);
}

/**
 * Captures a manually created event and sends it to Sentry.
 *
 * @param event The event to send to Sentry.
 * @param hint Optional additional data to attach to the Sentry event.
 * @returns the id of the captured event.
 */
function captureEvent(event, hint) {
  return currentScopes_getCurrentScope().captureEvent(event, hint);
}

/**
 * Sets context data with the given name.
 * @param name of the context
 * @param context Any kind of data. This data will be normalized.
 */
function setContext(name, context) {
  getIsolationScope().setContext(name, context);
}

/**
 * Set an object that will be merged sent as extra data with the event.
 * @param extras Extras object to merge into current context.
 */
function setExtras(extras) {
  getIsolationScope().setExtras(extras);
}

/**
 * Set key:value that will be sent as extra data with the event.
 * @param key String of extra
 * @param extra Any kind of data. This data will be normalized.
 */
function setExtra(key, extra) {
  getIsolationScope().setExtra(key, extra);
}

/**
 * Set an object that will be merged sent as tags data with the event.
 * @param tags Tags context object to merge into current context.
 */
function setTags(tags) {
  getIsolationScope().setTags(tags);
}

/**
 * Set key:value that will be sent as tags data with the event.
 *
 * Can also be used to unset a tag, by passing `undefined`.
 *
 * @param key String key of tag
 * @param value Value of tag
 */
function setTag(key, value) {
  getIsolationScope().setTag(key, value);
}

/**
 * Updates user context information for future events.
 *
 * @param user User context object to be set in the current context. Pass `null` to unset the user.
 */
function setUser(user) {
  getIsolationScope().setUser(user);
}

/**
 * The last error event id of the isolation scope.
 *
 * Warning: This function really returns the last recorded error event id on the current
 * isolation scope. If you call this function after handling a certain error and another error
 * is captured in between, the last one is returned instead of the one you might expect.
 * Also, ids of events that were never sent to Sentry (for example because
 * they were dropped in `beforeSend`) could be returned.
 *
 * @returns The last event id of the isolation scope.
 */
function exports_lastEventId() {
  return getIsolationScope().lastEventId();
}

/**
 * Create a cron monitor check in and send it to Sentry.
 *
 * @param checkIn An object that describes a check in.
 * @param upsertMonitorConfig An optional object that describes a monitor config. Use this if you want
 * to create a monitor automatically when sending a check in.
 */
function captureCheckIn(checkIn, upsertMonitorConfig) {
  const scope = getCurrentScope();
  const client = getClient();
  if (!client) {
    DEBUG_BUILD && logger.warn('Cannot capture check-in. No client defined.');
  } else if (!client.captureCheckIn) {
    DEBUG_BUILD && logger.warn('Cannot capture check-in. Client does not support sending check-ins.');
  } else {
    return client.captureCheckIn(checkIn, upsertMonitorConfig, scope);
  }

  return uuid4();
}

/**
 * Wraps a callback with a cron monitor check in. The check in will be sent to Sentry when the callback finishes.
 *
 * @param monitorSlug The distinct slug of the monitor.
 * @param upsertMonitorConfig An optional object that describes a monitor config. Use this if you want
 * to create a monitor automatically when sending a check in.
 */
function withMonitor(
  monitorSlug,
  callback,
  upsertMonitorConfig,
) {
  const checkInId = captureCheckIn({ monitorSlug, status: 'in_progress' }, upsertMonitorConfig);
  const now = timestampInSeconds();

  function finishCheckIn(status) {
    captureCheckIn({ monitorSlug, status, checkInId, duration: timestampInSeconds() - now });
  }

  return withIsolationScope(() => {
    let maybePromiseResult;
    try {
      maybePromiseResult = callback();
    } catch (e) {
      finishCheckIn('error');
      throw e;
    }

    if (isThenable(maybePromiseResult)) {
      Promise.resolve(maybePromiseResult).then(
        () => {
          finishCheckIn('ok');
        },
        e => {
          finishCheckIn('error');
          throw e;
        },
      );
    } else {
      finishCheckIn('ok');
    }

    return maybePromiseResult;
  });
}

/**
 * Call `flush()` on the current client, if there is one. See {@link Client.flush}.
 *
 * @param timeout Maximum time in ms the client should wait to flush its event queue. Omitting this parameter will cause
 * the client to wait until all events are sent before resolving the promise.
 * @returns A promise which resolves to `true` if the queue successfully drains before the timeout, or `false` if it
 * doesn't (or if there's no client defined).
 */
async function flush(timeout) {
  const client = getClient();
  if (client) {
    return client.flush(timeout);
  }
  DEBUG_BUILD && logger.warn('Cannot flush events. No client defined.');
  return Promise.resolve(false);
}

/**
 * Call `close()` on the current client, if there is one. See {@link Client.close}.
 *
 * @param timeout Maximum time in ms the client should wait to flush its event queue before shutting down. Omitting this
 * parameter will cause the client to wait until all events are sent before disabling itself.
 * @returns A promise which resolves to `true` if the queue successfully drains before the timeout, or `false` if it
 * doesn't (or if there's no client defined).
 */
async function exports_close(timeout) {
  const client = getClient();
  if (client) {
    return client.close(timeout);
  }
  DEBUG_BUILD && logger.warn('Cannot flush events and disable SDK. No client defined.');
  return Promise.resolve(false);
}

/**
 * Returns true if Sentry has been properly initialized.
 */
function isInitialized() {
  return !!getClient();
}

/** If the SDK is initialized & enabled. */
function isEnabled() {
  const client = getClient();
  return !!client && client.getOptions().enabled !== false && !!client.getTransport();
}

/**
 * Add an event processor.
 * This will be added to the current isolation scope, ensuring any event that is processed in the current execution
 * context will have the processor applied.
 */
function addEventProcessor(callback) {
  getIsolationScope().addEventProcessor(callback);
}

/**
 * Start a session on the current isolation scope.
 *
 * @param context (optional) additional properties to be applied to the returned session object
 *
 * @returns the new active session
 */
function startSession(context) {
  const client = currentScopes_getClient();
  const isolationScope = currentScopes_getIsolationScope();
  const currentScope = currentScopes_getCurrentScope();

  const { release, environment = DEFAULT_ENVIRONMENT } = (client && client.getOptions()) || {};

  // Will fetch userAgent if called from browser sdk
  const { userAgent } = worldwide_GLOBAL_OBJ.navigator || {};

  const session = makeSession({
    release,
    environment,
    user: currentScope.getUser() || isolationScope.getUser(),
    ...(userAgent && { userAgent }),
    ...context,
  });

  // End existing session if there's one
  const currentSession = isolationScope.getSession();
  if (currentSession && currentSession.status === 'ok') {
    updateSession(currentSession, { status: 'exited' });
  }

  endSession();

  // Afterwards we set the new session on the scope
  isolationScope.setSession(session);

  // TODO (v8): Remove this and only use the isolation scope(?).
  // For v7 though, we can't "soft-break" people using getCurrentHub().getScope().setSession()
  currentScope.setSession(session);

  return session;
}

/**
 * End the session on the current isolation scope.
 */
function endSession() {
  const isolationScope = currentScopes_getIsolationScope();
  const currentScope = currentScopes_getCurrentScope();

  const session = currentScope.getSession() || isolationScope.getSession();
  if (session) {
    closeSession(session);
  }
  _sendSessionUpdate();

  // the session is over; take it off of the scope
  isolationScope.setSession();

  // TODO (v8): Remove this and only use the isolation scope(?).
  // For v7 though, we can't "soft-break" people using getCurrentHub().getScope().setSession()
  currentScope.setSession();
}

/**
 * Sends the current Session on the scope
 */
function _sendSessionUpdate() {
  const isolationScope = currentScopes_getIsolationScope();
  const currentScope = currentScopes_getCurrentScope();
  const client = currentScopes_getClient();
  // TODO (v8): Remove currentScope and only use the isolation scope(?).
  // For v7 though, we can't "soft-break" people using getCurrentHub().getScope().setSession()
  const session = currentScope.getSession() || isolationScope.getSession();
  if (session && client) {
    client.captureSession(session);
  }
}

/**
 * Sends the current session on the scope to Sentry
 *
 * @param end If set the session will be marked as exited and removed from the scope.
 *            Defaults to `false`.
 */
function captureSession(end = false) {
  // both send the update and pull the session from the scope
  if (end) {
    endSession();
    return;
  }

  // only send the update
  _sendSessionUpdate();
}



;// ../../node_modules/@sentry/browser/build/npm/esm/helpers.js


const helpers_WINDOW = worldwide_GLOBAL_OBJ ;

let ignoreOnError = 0;

/**
 * @hidden
 */
function shouldIgnoreOnError() {
  return ignoreOnError > 0;
}

/**
 * @hidden
 */
function ignoreNextOnError() {
  // onerror should trigger before setTimeout
  ignoreOnError++;
  setTimeout(() => {
    ignoreOnError--;
  });
}

// eslint-disable-next-line @typescript-eslint/ban-types

/**
 * Instruments the given function and sends an event to Sentry every time the
 * function throws an exception.
 *
 * @param fn A function to wrap. It is generally safe to pass an unbound function, because the returned wrapper always
 * has a correct `this` context.
 * @returns The wrapped function.
 * @hidden
 */
function wrap(
  fn,
  options

 = {},
) {
  // for future readers what this does is wrap a function and then create
  // a bi-directional wrapping between them.
  //
  // example: wrapped = wrap(original);
  //  original.__sentry_wrapped__ -> wrapped
  //  wrapped.__sentry_original__ -> original

  function isFunction(fn) {
    return typeof fn === 'function';
  }

  if (!isFunction(fn)) {
    return fn;
  }

  try {
    // if we're dealing with a function that was previously wrapped, return
    // the original wrapper.
    const wrapper = (fn ).__sentry_wrapped__;
    if (wrapper) {
      if (typeof wrapper === 'function') {
        return wrapper;
      } else {
        // If we find that the `__sentry_wrapped__` function is not a function at the time of accessing it, it means
        // that something messed with it. In that case we want to return the originally passed function.
        return fn;
      }
    }

    // We don't wanna wrap it twice
    if (getOriginalFunction(fn)) {
      return fn;
    }
  } catch (e) {
    // Just accessing custom props in some Selenium environments
    // can cause a "Permission denied" exception (see raven-js#495).
    // Bail on wrapping and return the function as-is (defers to window.onerror).
    return fn;
  }

  // Wrap the function itself
  // It is important that `sentryWrapped` is not an arrow function to preserve the context of `this`
  const sentryWrapped = function ( ...args) {
    try {
      // Also wrap arguments that are themselves functions
      const wrappedArguments = args.map(arg => wrap(arg, options));

      // Attempt to invoke user-land function
      // NOTE: If you are a Sentry user, and you are seeing this stack frame, it
      //       means the sentry.javascript SDK caught an error invoking your application code. This
      //       is expected behavior and NOT indicative of a bug with sentry.javascript.
      return fn.apply(this, wrappedArguments);
    } catch (ex) {
      ignoreNextOnError();

      currentScopes_withScope(scope => {
        scope.addEventProcessor(event => {
          if (options.mechanism) {
            addExceptionTypeValue(event, undefined, undefined);
            addExceptionMechanism(event, options.mechanism);
          }

          event.extra = {
            ...event.extra,
            arguments: args,
          };

          return event;
        });

        captureException(ex);
      });

      throw ex;
    }
  } ;

  // Wrap the wrapped function in a proxy, to ensure any other properties of the original function remain available
  try {
    for (const property in fn) {
      if (Object.prototype.hasOwnProperty.call(fn, property)) {
        sentryWrapped[property ] = fn[property ];
      }
    }
  } catch (e2) {
    // Accessing some objects may throw
    // ref: https://github.com/getsentry/sentry-javascript/issues/1168
  }

  // Signal that this function has been wrapped/filled already
  // for both debugging and to prevent it to being wrapped/filled twice
  markFunctionWrapped(sentryWrapped, fn);

  object_addNonEnumerableProperty(fn, '__sentry_wrapped__', sentryWrapped);

  // Restore original function name (not all browsers allow that)
  try {
    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
    const descriptor = Object.getOwnPropertyDescriptor(sentryWrapped, 'name');
    if (descriptor.configurable) {
      Object.defineProperty(sentryWrapped, 'name', {
        get() {
          return fn.name;
        },
      });
    }
  } catch (e3) {
    // This may throw if e.g. the descriptor does not exist, or a browser does not allow redefining `name`.
    // to save some bytes we simply try-catch this
  }

  return sentryWrapped;
}



;// ../../node_modules/@sentry/browser/build/npm/esm/integrations/breadcrumbs.js





/* eslint-disable max-lines */


/** maxStringLength gets capped to prevent 100 breadcrumbs exceeding 1MB event payload size */
const MAX_ALLOWED_STRING_LENGTH = 1024;

const breadcrumbs_INTEGRATION_NAME = 'Breadcrumbs';

const _breadcrumbsIntegration = ((options = {}) => {
  const _options = {
    console: true,
    dom: true,
    fetch: true,
    history: true,
    sentry: true,
    xhr: true,
    ...options,
  };

  return {
    name: breadcrumbs_INTEGRATION_NAME,
    setup(client) {
      if (_options.console) {
        addConsoleInstrumentationHandler(_getConsoleBreadcrumbHandler(client));
      }
      if (_options.dom) {
        addClickKeypressInstrumentationHandler(_getDomBreadcrumbHandler(client, _options.dom));
      }
      if (_options.xhr) {
        addXhrInstrumentationHandler(_getXhrBreadcrumbHandler(client));
      }
      if (_options.fetch) {
        addFetchInstrumentationHandler(_getFetchBreadcrumbHandler(client));
      }
      if (_options.history) {
        addHistoryInstrumentationHandler(_getHistoryBreadcrumbHandler(client));
      }
      if (_options.sentry) {
        client.on('beforeSendEvent', _getSentryBreadcrumbHandler(client));
      }
    },
  };
}) ;

const breadcrumbsIntegration = defineIntegration(_breadcrumbsIntegration);

/**
 * Adds a breadcrumb for Sentry events or transactions if this option is enabled.
 */
function _getSentryBreadcrumbHandler(client) {
  return function addSentryBreadcrumb(event) {
    if (currentScopes_getClient() !== client) {
      return;
    }

    addBreadcrumb(
      {
        category: `sentry.${event.type === 'transaction' ? 'transaction' : 'event'}`,
        event_id: event.event_id,
        level: event.level,
        message: getEventDescription(event),
      },
      {
        event,
      },
    );
  };
}

/**
 * A HOC that creates a function that creates breadcrumbs from DOM API calls.
 * This is a HOC so that we get access to dom options in the closure.
 */
function _getDomBreadcrumbHandler(
  client,
  dom,
) {
  return function _innerDomBreadcrumb(handlerData) {
    if (currentScopes_getClient() !== client) {
      return;
    }

    let target;
    let componentName;
    let keyAttrs = typeof dom === 'object' ? dom.serializeAttribute : undefined;

    let maxStringLength =
      typeof dom === 'object' && typeof dom.maxStringLength === 'number' ? dom.maxStringLength : undefined;
    if (maxStringLength && maxStringLength > MAX_ALLOWED_STRING_LENGTH) {
      esm_debug_build_DEBUG_BUILD &&
        logger_logger.warn(
          `\`dom.maxStringLength\` cannot exceed ${MAX_ALLOWED_STRING_LENGTH}, but a value of ${maxStringLength} was configured. Sentry will use ${MAX_ALLOWED_STRING_LENGTH} instead.`,
        );
      maxStringLength = MAX_ALLOWED_STRING_LENGTH;
    }

    if (typeof keyAttrs === 'string') {
      keyAttrs = [keyAttrs];
    }

    // Accessing event.target can throw (see getsentry/raven-js#838, #768)
    try {
      const event = handlerData.event ;
      const element = _isEvent(event) ? event.target : event;

      target = htmlTreeAsString(element, { keyAttrs, maxStringLength });
      componentName = getComponentName(element);
    } catch (e) {
      target = '<unknown>';
    }

    if (target.length === 0) {
      return;
    }

    const breadcrumb = {
      category: `ui.${handlerData.name}`,
      message: target,
    };

    if (componentName) {
      breadcrumb.data = { 'ui.component_name': componentName };
    }

    addBreadcrumb(breadcrumb, {
      event: handlerData.event,
      name: handlerData.name,
      global: handlerData.global,
    });
  };
}

/**
 * Creates breadcrumbs from console API calls
 */
function _getConsoleBreadcrumbHandler(client) {
  return function _consoleBreadcrumb(handlerData) {
    if (currentScopes_getClient() !== client) {
      return;
    }

    const breadcrumb = {
      category: 'console',
      data: {
        arguments: handlerData.args,
        logger: 'console',
      },
      level: severityLevelFromString(handlerData.level),
      message: safeJoin(handlerData.args, ' '),
    };

    if (handlerData.level === 'assert') {
      if (handlerData.args[0] === false) {
        breadcrumb.message = `Assertion failed: ${safeJoin(handlerData.args.slice(1), ' ') || 'console.assert'}`;
        breadcrumb.data.arguments = handlerData.args.slice(1);
      } else {
        // Don't capture a breadcrumb for passed assertions
        return;
      }
    }

    addBreadcrumb(breadcrumb, {
      input: handlerData.args,
      level: handlerData.level,
    });
  };
}

/**
 * Creates breadcrumbs from XHR API calls
 */
function _getXhrBreadcrumbHandler(client) {
  return function _xhrBreadcrumb(handlerData) {
    if (currentScopes_getClient() !== client) {
      return;
    }

    const { startTimestamp, endTimestamp } = handlerData;

    const sentryXhrData = handlerData.xhr[SENTRY_XHR_DATA_KEY];

    // We only capture complete, non-sentry requests
    if (!startTimestamp || !endTimestamp || !sentryXhrData) {
      return;
    }

    const { method, url, status_code, body } = sentryXhrData;

    const data = {
      method,
      url,
      status_code,
    };

    const hint = {
      xhr: handlerData.xhr,
      input: body,
      startTimestamp,
      endTimestamp,
    };

    const level = getBreadcrumbLogLevelFromHttpStatusCode(status_code);

    addBreadcrumb(
      {
        category: 'xhr',
        data,
        type: 'http',
        level,
      },
      hint,
    );
  };
}

/**
 * Creates breadcrumbs from fetch API calls
 */
function _getFetchBreadcrumbHandler(client) {
  return function _fetchBreadcrumb(handlerData) {
    if (currentScopes_getClient() !== client) {
      return;
    }

    const { startTimestamp, endTimestamp } = handlerData;

    // We only capture complete fetch requests
    if (!endTimestamp) {
      return;
    }

    if (handlerData.fetchData.url.match(/sentry_key/) && handlerData.fetchData.method === 'POST') {
      // We will not create breadcrumbs for fetch requests that contain `sentry_key` (internal sentry requests)
      return;
    }

    if (handlerData.error) {
      const data = handlerData.fetchData;
      const hint = {
        data: handlerData.error,
        input: handlerData.args,
        startTimestamp,
        endTimestamp,
      };

      addBreadcrumb(
        {
          category: 'fetch',
          data,
          level: 'error',
          type: 'http',
        },
        hint,
      );
    } else {
      const response = handlerData.response ;
      const data = {
        ...handlerData.fetchData,
        status_code: response && response.status,
      };
      const hint = {
        input: handlerData.args,
        response,
        startTimestamp,
        endTimestamp,
      };
      const level = getBreadcrumbLogLevelFromHttpStatusCode(data.status_code);

      addBreadcrumb(
        {
          category: 'fetch',
          data,
          type: 'http',
          level,
        },
        hint,
      );
    }
  };
}

/**
 * Creates breadcrumbs from history API calls
 */
function _getHistoryBreadcrumbHandler(client) {
  return function _historyBreadcrumb(handlerData) {
    if (currentScopes_getClient() !== client) {
      return;
    }

    let from = handlerData.from;
    let to = handlerData.to;
    const parsedLoc = url_parseUrl(helpers_WINDOW.location.href);
    let parsedFrom = from ? url_parseUrl(from) : undefined;
    const parsedTo = url_parseUrl(to);

    // Initial pushState doesn't provide `from` information
    if (!parsedFrom || !parsedFrom.path) {
      parsedFrom = parsedLoc;
    }

    // Use only the path component of the URL if the URL matches the current
    // document (almost all the time when using pushState)
    if (parsedLoc.protocol === parsedTo.protocol && parsedLoc.host === parsedTo.host) {
      to = parsedTo.relative;
    }
    if (parsedLoc.protocol === parsedFrom.protocol && parsedLoc.host === parsedFrom.host) {
      from = parsedFrom.relative;
    }

    addBreadcrumb({
      category: 'navigation',
      data: {
        from,
        to,
      },
    });
  };
}

function _isEvent(event) {
  return !!event && !!(event ).target;
}



;// ../../node_modules/@sentry/browser/build/npm/esm/integrations/browserapierrors.js



const DEFAULT_EVENT_TARGET = [
  'EventTarget',
  'Window',
  'Node',
  'ApplicationCache',
  'AudioTrackList',
  'BroadcastChannel',
  'ChannelMergerNode',
  'CryptoOperation',
  'EventSource',
  'FileReader',
  'HTMLUnknownElement',
  'IDBDatabase',
  'IDBRequest',
  'IDBTransaction',
  'KeyOperation',
  'MediaController',
  'MessagePort',
  'ModalWindow',
  'Notification',
  'SVGElementInstance',
  'Screen',
  'SharedWorker',
  'TextTrack',
  'TextTrackCue',
  'TextTrackList',
  'WebSocket',
  'WebSocketWorker',
  'Worker',
  'XMLHttpRequest',
  'XMLHttpRequestEventTarget',
  'XMLHttpRequestUpload',
];

const browserapierrors_INTEGRATION_NAME = 'BrowserApiErrors';

const _browserApiErrorsIntegration = ((options = {}) => {
  const _options = {
    XMLHttpRequest: true,
    eventTarget: true,
    requestAnimationFrame: true,
    setInterval: true,
    setTimeout: true,
    ...options,
  };

  return {
    name: browserapierrors_INTEGRATION_NAME,
    // TODO: This currently only works for the first client this is setup
    // We may want to adjust this to check for client etc.
    setupOnce() {
      if (_options.setTimeout) {
        fill(helpers_WINDOW, 'setTimeout', _wrapTimeFunction);
      }

      if (_options.setInterval) {
        fill(helpers_WINDOW, 'setInterval', _wrapTimeFunction);
      }

      if (_options.requestAnimationFrame) {
        fill(helpers_WINDOW, 'requestAnimationFrame', _wrapRAF);
      }

      if (_options.XMLHttpRequest && "XMLHttpRequest" in helpers_WINDOW) {
        fill(XMLHttpRequest.prototype, 'send', _wrapXHR);
      }

      const eventTargetOption = _options.eventTarget;
      if (eventTargetOption) {
        const eventTarget = Array.isArray(eventTargetOption) ? eventTargetOption : DEFAULT_EVENT_TARGET;
        eventTarget.forEach(_wrapEventTarget);
      }
    },
  };
}) ;

/**
 * Wrap timer functions and event targets to catch errors and provide better meta data.
 */
const browserApiErrorsIntegration = defineIntegration(_browserApiErrorsIntegration);

function _wrapTimeFunction(original) {
  return function ( ...args) {
    const originalCallback = args[0];
    args[0] = wrap(originalCallback, {
      mechanism: {
        data: { function: getFunctionName(original) },
        handled: false,
        type: 'instrument',
      },
    });
    return original.apply(this, args);
  };
}

function _wrapRAF(original) {
  return function ( callback) {
    return original.apply(this, [
      wrap(callback, {
        mechanism: {
          data: {
            function: 'requestAnimationFrame',
            handler: getFunctionName(original),
          },
          handled: false,
          type: 'instrument',
        },
      }),
    ]);
  };
}

function _wrapXHR(originalSend) {
  return function ( ...args) {
    // eslint-disable-next-line @typescript-eslint/no-this-alias
    const xhr = this;
    const xmlHttpRequestProps = ['onload', 'onerror', 'onprogress', 'onreadystatechange'];

    xmlHttpRequestProps.forEach(prop => {
      if (prop in xhr && typeof xhr[prop] === 'function') {
        fill(xhr, prop, function (original) {
          const wrapOptions = {
            mechanism: {
              data: {
                function: prop,
                handler: getFunctionName(original),
              },
              handled: false,
              type: 'instrument',
            },
          };

          // If Instrument integration has been called before BrowserApiErrors, get the name of original function
          const originalFunction = getOriginalFunction(original);
          if (originalFunction) {
            wrapOptions.mechanism.data.handler = getFunctionName(originalFunction);
          }

          // Otherwise wrap directly
          return wrap(original, wrapOptions);
        });
      }
    });

    return originalSend.apply(this, args);
  };
}

function _wrapEventTarget(target) {
  const globalObject = helpers_WINDOW ;
  const targetObj = globalObject[target];
  const proto = targetObj && targetObj.prototype;

  // eslint-disable-next-line no-prototype-builtins
  if (!proto || !proto.hasOwnProperty || !proto.hasOwnProperty('addEventListener')) {
    return;
  }

  fill(proto, 'addEventListener', function (original)

 {
    return function ( eventName, fn, options) {
      try {
        if (isEventListenerObject(fn)) {
          // ESlint disable explanation:
          //  First, it is generally safe to call `wrap` with an unbound function. Furthermore, using `.bind()` would
          //  introduce a bug here, because bind returns a new function that doesn't have our
          //  flags(like __sentry_original__) attached. `wrap` checks for those flags to avoid unnecessary wrapping.
          //  Without those flags, every call to addEventListener wraps the function again, causing a memory leak.
          // eslint-disable-next-line @typescript-eslint/unbound-method
          fn.handleEvent = wrap(fn.handleEvent, {
            mechanism: {
              data: {
                function: 'handleEvent',
                handler: getFunctionName(fn),
                target,
              },
              handled: false,
              type: 'instrument',
            },
          });
        }
      } catch (e2) {
        // can sometimes get 'Permission denied to access property "handle Event'
      }

      return original.apply(this, [
        eventName,
        wrap(fn, {
          mechanism: {
            data: {
              function: 'addEventListener',
              handler: getFunctionName(fn),
              target,
            },
            handled: false,
            type: 'instrument',
          },
        }),
        options,
      ]);
    };
  });

  fill(proto, 'removeEventListener', function (originalRemoveEventListener)

 {
    return function ( eventName, fn, options) {
      /**
       * There are 2 possible scenarios here:
       *
       * 1. Someone passes a callback, which was attached prior to Sentry initialization, or by using unmodified
       * method, eg. `document.addEventListener.call(el, name, handler). In this case, we treat this function
       * as a pass-through, and call original `removeEventListener` with it.
       *
       * 2. Someone passes a callback, which was attached after Sentry was initialized, which means that it was using
       * our wrapped version of `addEventListener`, which internally calls `wrap` helper.
       * This helper "wraps" whole callback inside a try/catch statement, and attached appropriate metadata to it,
       * in order for us to make a distinction between wrapped/non-wrapped functions possible.
       * If a function was wrapped, it has additional property of `__sentry_wrapped__`, holding the handler.
       *
       * When someone adds a handler prior to initialization, and then do it again, but after,
       * then we have to detach both of them. Otherwise, if we'd detach only wrapped one, it'd be impossible
       * to get rid of the initial handler and it'd stick there forever.
       */
      try {
        const originalEventHandler = (fn ).__sentry_wrapped__;
        if (originalEventHandler) {
          originalRemoveEventListener.call(this, eventName, originalEventHandler, options);
        }
      } catch (e) {
        // ignore, accessing __sentry_wrapped__ will throw in some Selenium environments
      }
      return originalRemoveEventListener.call(this, eventName, fn, options);
    };
  });
}

function isEventListenerObject(obj) {
  return typeof (obj ).handleEvent === 'function';
}



;// ../../node_modules/@sentry/browser/build/npm/esm/integrations/browsersession.js





/**
 * When added, automatically creates sessions which allow you to track adoption and crashes (crash free rate) in your Releases in Sentry.
 * More information: https://docs.sentry.io/product/releases/health/
 *
 * Note: In order for session tracking to work, you need to set up Releases: https://docs.sentry.io/product/releases/
 */
const browserSessionIntegration = defineIntegration(() => {
  return {
    name: 'BrowserSession',
    setupOnce() {
      if (typeof helpers_WINDOW.document === 'undefined') {
        esm_debug_build_DEBUG_BUILD &&
          logger_logger.warn('Using the `browserSessionIntegration` in non-browser environments is not supported.');
        return;
      }

      // The session duration for browser sessions does not track a meaningful
      // concept that can be used as a metric.
      // Automatically captured sessions are akin to page views, and thus we
      // discard their duration.
      startSession({ ignoreDuration: true });
      captureSession();

      // We want to create a session for every navigation as well
      addHistoryInstrumentationHandler(({ from, to }) => {
        // Don't create an additional session for the initial route or if the location did not change
        if (from !== undefined && from !== to) {
          startSession({ ignoreDuration: true });
          captureSession();
        }
      });
    },
  };
});



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/instrument/globalError.js



let _oldOnErrorHandler = null;

/**
 * Add an instrumentation handler for when an error is captured by the global error handler.
 *
 * Use at your own risk, this might break without changelog notice, only used internally.
 * @hidden
 */
function addGlobalErrorInstrumentationHandler(handler) {
  const type = 'error';
  handlers_addHandler(type, handler);
  handlers_maybeInstrument(type, instrumentError);
}

function instrumentError() {
  _oldOnErrorHandler = worldwide_GLOBAL_OBJ.onerror;

  // Note: The reason we are doing window.onerror instead of window.addEventListener('error')
  // is that we are using this handler in the Loader Script, to handle buffered errors consistently
  worldwide_GLOBAL_OBJ.onerror = function (
    msg,
    url,
    line,
    column,
    error,
  ) {
    const handlerData = {
      column,
      error,
      line,
      msg,
      url,
    };
    handlers_triggerHandlers('error', handlerData);

    if (_oldOnErrorHandler) {
      // eslint-disable-next-line prefer-rest-params
      return _oldOnErrorHandler.apply(this, arguments);
    }

    return false;
  };

  worldwide_GLOBAL_OBJ.onerror.__SENTRY_INSTRUMENTED__ = true;
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/instrument/globalUnhandledRejection.js



let _oldOnUnhandledRejectionHandler = null;

/**
 * Add an instrumentation handler for when an unhandled promise rejection is captured.
 *
 * Use at your own risk, this might break without changelog notice, only used internally.
 * @hidden
 */
function addGlobalUnhandledRejectionInstrumentationHandler(
  handler,
) {
  const type = 'unhandledrejection';
  handlers_addHandler(type, handler);
  handlers_maybeInstrument(type, instrumentUnhandledRejection);
}

function instrumentUnhandledRejection() {
  _oldOnUnhandledRejectionHandler = worldwide_GLOBAL_OBJ.onunhandledrejection;

  // Note: The reason we are doing window.onunhandledrejection instead of window.addEventListener('unhandledrejection')
  // is that we are using this handler in the Loader Script, to handle buffered rejections consistently
  worldwide_GLOBAL_OBJ.onunhandledrejection = function (e) {
    const handlerData = e;
    handlers_triggerHandlers('unhandledrejection', handlerData);

    if (_oldOnUnhandledRejectionHandler) {
      // eslint-disable-next-line prefer-rest-params
      return _oldOnUnhandledRejectionHandler.apply(this, arguments);
    }

    return true;
  };

  worldwide_GLOBAL_OBJ.onunhandledrejection.__SENTRY_INSTRUMENTED__ = true;
}



;// ../../node_modules/@sentry/browser/build/npm/esm/eventbuilder.js


/**
 * This function creates an exception from a JavaScript Error
 */
function exceptionFromError(stackParser, ex) {
  // Get the frames first since Opera can lose the stack if we touch anything else first
  const frames = parseStackFrames(stackParser, ex);

  const exception = {
    type: extractType(ex),
    value: extractMessage(ex),
  };

  if (frames.length) {
    exception.stacktrace = { frames };
  }

  if (exception.type === undefined && exception.value === '') {
    exception.value = 'Unrecoverable error caught';
  }

  return exception;
}

function eventFromPlainObject(
  stackParser,
  exception,
  syntheticException,
  isUnhandledRejection,
) {
  const client = currentScopes_getClient();
  const normalizeDepth = client && client.getOptions().normalizeDepth;

  // If we can, we extract an exception from the object properties
  const errorFromProp = getErrorPropertyFromObject(exception);

  const extra = {
    __serialized__: normalizeToSize(exception, normalizeDepth),
  };

  if (errorFromProp) {
    return {
      exception: {
        values: [exceptionFromError(stackParser, errorFromProp)],
      },
      extra,
    };
  }

  const event = {
    exception: {
      values: [
        {
          type: isEvent(exception) ? exception.constructor.name : isUnhandledRejection ? 'UnhandledRejection' : 'Error',
          value: getNonErrorObjectExceptionValue(exception, { isUnhandledRejection }),
        } ,
      ],
    },
    extra,
  } ;

  if (syntheticException) {
    const frames = parseStackFrames(stackParser, syntheticException);
    if (frames.length) {
      // event.exception.values[0] has been set above
      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion
      event.exception.values[0].stacktrace = { frames };
    }
  }

  return event;
}

function eventFromError(stackParser, ex) {
  return {
    exception: {
      values: [exceptionFromError(stackParser, ex)],
    },
  };
}

/** Parses stack frames from an error */
function parseStackFrames(
  stackParser,
  ex,
) {
  // Access and store the stacktrace property before doing ANYTHING
  // else to it because Opera is not very good at providing it
  // reliably in other circumstances.
  const stacktrace = ex.stacktrace || ex.stack || '';

  const skipLines = getSkipFirstStackStringLines(ex);
  const framesToPop = getPopFirstTopFrames(ex);

  try {
    return stackParser(stacktrace, skipLines, framesToPop);
  } catch (e) {
    // no-empty
  }

  return [];
}

// Based on our own mapping pattern - https://github.com/getsentry/sentry/blob/9f08305e09866c8bd6d0c24f5b0aabdd7dd6c59c/src/sentry/lang/javascript/errormapping.py#L83-L108
const reactMinifiedRegexp = /Minified React error #\d+;/i;

/**
 * Certain known React errors contain links that would be falsely
 * parsed as frames. This function check for these errors and
 * returns number of the stack string lines to skip.
 */
function getSkipFirstStackStringLines(ex) {
  if (ex && reactMinifiedRegexp.test(ex.message)) {
    return 1;
  }

  return 0;
}

/**
 * If error has `framesToPop` property, it means that the
 * creator tells us the first x frames will be useless
 * and should be discarded. Typically error from wrapper function
 * which don't point to the actual location in the developer's code.
 *
 * Example: https://github.com/zertosh/invariant/blob/master/invariant.js#L46
 */
function getPopFirstTopFrames(ex) {
  if (typeof ex.framesToPop === 'number') {
    return ex.framesToPop;
  }

  return 0;
}

// https://developer.mozilla.org/en-US/docs/WebAssembly/JavaScript_interface/Exception
// @ts-expect-error - WebAssembly.Exception is a valid class
function isWebAssemblyException(exception) {
  // Check for support
  // @ts-expect-error - WebAssembly.Exception is a valid class
  if (typeof WebAssembly !== 'undefined' && typeof WebAssembly.Exception !== 'undefined') {
    // @ts-expect-error - WebAssembly.Exception is a valid class
    return exception instanceof WebAssembly.Exception;
  } else {
    return false;
  }
}

/**
 * Extracts from errors what we use as the exception `type` in error events.
 *
 * Usually, this is the `name` property on Error objects but WASM errors need to be treated differently.
 */
function extractType(ex) {
  const name = ex && ex.name;

  // The name for WebAssembly.Exception Errors needs to be extracted differently.
  // Context: https://github.com/getsentry/sentry-javascript/issues/13787
  if (!name && isWebAssemblyException(ex)) {
    // Emscripten sets array[type, message] to the "message" property on the WebAssembly.Exception object
    const hasTypeInMessage = ex.message && Array.isArray(ex.message) && ex.message.length == 2;
    return hasTypeInMessage ? ex.message[0] : 'WebAssembly.Exception';
  }

  return name;
}

/**
 * There are cases where stacktrace.message is an Event object
 * https://github.com/getsentry/sentry-javascript/issues/1949
 * In this specific case we try to extract stacktrace.message.error.message
 */
function extractMessage(ex) {
  const message = ex && ex.message;

  if (!message) {
    return 'No error message';
  }

  if (message.error && typeof message.error.message === 'string') {
    return message.error.message;
  }

  // Emscripten sets array[type, message] to the "message" property on the WebAssembly.Exception object
  if (isWebAssemblyException(ex) && Array.isArray(ex.message) && ex.message.length == 2) {
    return ex.message[1];
  }

  return message;
}

/**
 * Creates an {@link Event} from all inputs to `captureException` and non-primitive inputs to `captureMessage`.
 * @hidden
 */
function eventFromException(
  stackParser,
  exception,
  hint,
  attachStacktrace,
) {
  const syntheticException = (hint && hint.syntheticException) || undefined;
  const event = eventFromUnknownInput(stackParser, exception, syntheticException, attachStacktrace);
  addExceptionMechanism(event); // defaults to { type: 'generic', handled: true }
  event.level = 'error';
  if (hint && hint.event_id) {
    event.event_id = hint.event_id;
  }
  return resolvedSyncPromise(event);
}

/**
 * Builds and Event from a Message
 * @hidden
 */
function eventFromMessage(
  stackParser,
  message,
  level = 'info',
  hint,
  attachStacktrace,
) {
  const syntheticException = (hint && hint.syntheticException) || undefined;
  const event = eventFromString(stackParser, message, syntheticException, attachStacktrace);
  event.level = level;
  if (hint && hint.event_id) {
    event.event_id = hint.event_id;
  }
  return resolvedSyncPromise(event);
}

/**
 * @hidden
 */
function eventFromUnknownInput(
  stackParser,
  exception,
  syntheticException,
  attachStacktrace,
  isUnhandledRejection,
) {
  let event;

  if (isErrorEvent(exception ) && (exception ).error) {
    // If it is an ErrorEvent with `error` property, extract it to get actual Error
    const errorEvent = exception ;
    return eventFromError(stackParser, errorEvent.error );
  }

  // If it is a `DOMError` (which is a legacy API, but still supported in some browsers) then we just extract the name
  // and message, as it doesn't provide anything else. According to the spec, all `DOMExceptions` should also be
  // `Error`s, but that's not the case in IE11, so in that case we treat it the same as we do a `DOMError`.
  //
  // https://developer.mozilla.org/en-US/docs/Web/API/DOMError
  // https://developer.mozilla.org/en-US/docs/Web/API/DOMException
  // https://webidl.spec.whatwg.org/#es-DOMException-specialness
  if (isDOMError(exception) || isDOMException(exception )) {
    const domException = exception ;

    if ('stack' in (exception )) {
      event = eventFromError(stackParser, exception );
    } else {
      const name = domException.name || (isDOMError(domException) ? 'DOMError' : 'DOMException');
      const message = domException.message ? `${name}: ${domException.message}` : name;
      event = eventFromString(stackParser, message, syntheticException, attachStacktrace);
      addExceptionTypeValue(event, message);
    }
    if ('code' in domException) {
      // eslint-disable-next-line deprecation/deprecation
      event.tags = { ...event.tags, 'DOMException.code': `${domException.code}` };
    }

    return event;
  }
  if (isError(exception)) {
    // we have a real Error object, do nothing
    return eventFromError(stackParser, exception);
  }
  if (isPlainObject(exception) || isEvent(exception)) {
    // If it's a plain object or an instance of `Event` (the built-in JS kind, not this SDK's `Event` type), serialize
    // it manually. This will allow us to group events based on top-level keys which is much better than creating a new
    // group on any key/value change.
    const objectException = exception ;
    event = eventFromPlainObject(stackParser, objectException, syntheticException, isUnhandledRejection);
    addExceptionMechanism(event, {
      synthetic: true,
    });
    return event;
  }

  // If none of previous checks were valid, then it means that it's not:
  // - an instance of DOMError
  // - an instance of DOMException
  // - an instance of Event
  // - an instance of Error
  // - a valid ErrorEvent (one with an error property)
  // - a plain Object
  //
  // So bail out and capture it as a simple message:
  event = eventFromString(stackParser, exception , syntheticException, attachStacktrace);
  addExceptionTypeValue(event, `${exception}`, undefined);
  addExceptionMechanism(event, {
    synthetic: true,
  });

  return event;
}

function eventFromString(
  stackParser,
  message,
  syntheticException,
  attachStacktrace,
) {
  const event = {};

  if (attachStacktrace && syntheticException) {
    const frames = parseStackFrames(stackParser, syntheticException);
    if (frames.length) {
      event.exception = {
        values: [{ value: message, stacktrace: { frames } }],
      };
    }
    addExceptionMechanism(event, { synthetic: true });
  }

  if (isParameterizedString(message)) {
    const { __sentry_template_string__, __sentry_template_values__ } = message;

    event.logentry = {
      message: __sentry_template_string__,
      params: __sentry_template_values__,
    };
    return event;
  }

  event.message = message;
  return event;
}

function getNonErrorObjectExceptionValue(
  exception,
  { isUnhandledRejection },
) {
  const keys = extractExceptionKeysForMessage(exception);
  const captureType = isUnhandledRejection ? 'promise rejection' : 'exception';

  // Some ErrorEvent instances do not have an `error` property, which is why they are not handled before
  // We still want to try to get a decent message for these cases
  if (isErrorEvent(exception)) {
    return `Event \`ErrorEvent\` captured as ${captureType} with message \`${exception.message}\``;
  }

  if (isEvent(exception)) {
    const className = getObjectClassName(exception);
    return `Event \`${className}\` (type=${exception.type}) captured as ${captureType}`;
  }

  return `Object captured as ${captureType} with keys: ${keys}`;
}

function getObjectClassName(obj) {
  try {
    const prototype = Object.getPrototypeOf(obj);
    return prototype ? prototype.constructor.name : undefined;
  } catch (e) {
    // ignore errors here
  }
}

/** If a plain object has a property that is an `Error`, return this error. */
function getErrorPropertyFromObject(obj) {
  for (const prop in obj) {
    if (Object.prototype.hasOwnProperty.call(obj, prop)) {
      const value = obj[prop];
      if (value instanceof Error) {
        return value;
      }
    }
  }

  return undefined;
}



;// ../../node_modules/@sentry/browser/build/npm/esm/integrations/globalhandlers.js





const globalhandlers_INTEGRATION_NAME = 'GlobalHandlers';

const _globalHandlersIntegration = ((options = {}) => {
  const _options = {
    onerror: true,
    onunhandledrejection: true,
    ...options,
  };

  return {
    name: globalhandlers_INTEGRATION_NAME,
    setupOnce() {
      Error.stackTraceLimit = 50;
    },
    setup(client) {
      if (_options.onerror) {
        _installGlobalOnErrorHandler(client);
        globalHandlerLog('onerror');
      }
      if (_options.onunhandledrejection) {
        _installGlobalOnUnhandledRejectionHandler(client);
        globalHandlerLog('onunhandledrejection');
      }
    },
  };
}) ;

const globalHandlersIntegration = defineIntegration(_globalHandlersIntegration);

function _installGlobalOnErrorHandler(client) {
  addGlobalErrorInstrumentationHandler(data => {
    const { stackParser, attachStacktrace } = getOptions();

    if (currentScopes_getClient() !== client || shouldIgnoreOnError()) {
      return;
    }

    const { msg, url, line, column, error } = data;

    const event = _enhanceEventWithInitialFrame(
      eventFromUnknownInput(stackParser, error || msg, undefined, attachStacktrace, false),
      url,
      line,
      column,
    );

    event.level = 'error';

    captureEvent(event, {
      originalException: error,
      mechanism: {
        handled: false,
        type: 'onerror',
      },
    });
  });
}

function _installGlobalOnUnhandledRejectionHandler(client) {
  addGlobalUnhandledRejectionInstrumentationHandler(e => {
    const { stackParser, attachStacktrace } = getOptions();

    if (currentScopes_getClient() !== client || shouldIgnoreOnError()) {
      return;
    }

    const error = _getUnhandledRejectionError(e );

    const event = is_isPrimitive(error)
      ? _eventFromRejectionWithPrimitive(error)
      : eventFromUnknownInput(stackParser, error, undefined, attachStacktrace, true);

    event.level = 'error';

    captureEvent(event, {
      originalException: error,
      mechanism: {
        handled: false,
        type: 'onunhandledrejection',
      },
    });
  });
}

function _getUnhandledRejectionError(error) {
  if (is_isPrimitive(error)) {
    return error;
  }

  // dig the object of the rejection out of known event types
  try {

    // PromiseRejectionEvents store the object of the rejection under 'reason'
    // see https://developer.mozilla.org/en-US/docs/Web/API/PromiseRejectionEvent
    if ('reason' in (error )) {
      return (error ).reason;
    }

    // something, somewhere, (likely a browser extension) effectively casts PromiseRejectionEvents
    // to CustomEvents, moving the `promise` and `reason` attributes of the PRE into
    // the CustomEvent's `detail` attribute, since they're not part of CustomEvent's spec
    // see https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent and
    // https://github.com/getsentry/sentry-javascript/issues/2380
    if ('detail' in (error ) && 'reason' in (error ).detail) {
      return (error ).detail.reason;
    }
  } catch (e2) {} // eslint-disable-line no-empty

  return error;
}

/**
 * Create an event from a promise rejection where the `reason` is a primitive.
 *
 * @param reason: The `reason` property of the promise rejection
 * @returns An Event object with an appropriate `exception` value
 */
function _eventFromRejectionWithPrimitive(reason) {
  return {
    exception: {
      values: [
        {
          type: 'UnhandledRejection',
          // String() is needed because the Primitive type includes symbols (which can't be automatically stringified)
          value: `Non-Error promise rejection captured with value: ${String(reason)}`,
        },
      ],
    },
  };
}

function _enhanceEventWithInitialFrame(
  event,
  url,
  line,
  column,
) {
  // event.exception
  const e = (event.exception = event.exception || {});
  // event.exception.values
  const ev = (e.values = e.values || []);
  // event.exception.values[0]
  const ev0 = (ev[0] = ev[0] || {});
  // event.exception.values[0].stacktrace
  const ev0s = (ev0.stacktrace = ev0.stacktrace || {});
  // event.exception.values[0].stacktrace.frames
  const ev0sf = (ev0s.frames = ev0s.frames || []);

  const colno = column;
  const lineno = line;
  const filename = isString(url) && url.length > 0 ? url : getLocationHref();

  // event.exception.values[0].stacktrace.frames
  if (ev0sf.length === 0) {
    ev0sf.push({
      colno,
      filename,
      function: UNKNOWN_FUNCTION,
      in_app: true,
      lineno,
    });
  }

  return event;
}

function globalHandlerLog(type) {
  esm_debug_build_DEBUG_BUILD && logger_logger.log(`Global Handler attached: ${type}`);
}

function getOptions() {
  const client = currentScopes_getClient();
  const options = (client && client.getOptions()) || {
    stackParser: () => [],
    attachStacktrace: false,
  };
  return options;
}



;// ../../node_modules/@sentry/browser/build/npm/esm/integrations/httpcontext.js



/**
 * Collects information about HTTP request headers and
 * attaches them to the event.
 */
const httpContextIntegration = defineIntegration(() => {
  return {
    name: 'HttpContext',
    preprocessEvent(event) {
      // if none of the information we want exists, don't bother
      if (!helpers_WINDOW.navigator && !helpers_WINDOW.location && !helpers_WINDOW.document) {
        return;
      }

      // grab as much info as exists and add it to the event
      const url = (event.request && event.request.url) || (helpers_WINDOW.location && helpers_WINDOW.location.href);
      const { referrer } = helpers_WINDOW.document || {};
      const { userAgent } = helpers_WINDOW.navigator || {};

      const headers = {
        ...(event.request && event.request.headers),
        ...(referrer && { Referer: referrer }),
        ...(userAgent && { 'User-Agent': userAgent }),
      };
      const request = { ...event.request, ...(url && { url }), headers };

      event.request = request;
    },
  };
});



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/aggregate-errors.js



/**
 * Creates exceptions inside `event.exception.values` for errors that are nested on properties based on the `key` parameter.
 */
function applyAggregateErrorsToEvent(
  exceptionFromErrorImplementation,
  parser,
  maxValueLimit = 250,
  key,
  limit,
  event,
  hint,
) {
  if (!event.exception || !event.exception.values || !hint || !isInstanceOf(hint.originalException, Error)) {
    return;
  }

  // Generally speaking the last item in `event.exception.values` is the exception originating from the original Error
  const originalException =
    event.exception.values.length > 0 ? event.exception.values[event.exception.values.length - 1] : undefined;

  // We only create exception grouping if there is an exception in the event.
  if (originalException) {
    event.exception.values = truncateAggregateExceptions(
      aggregateExceptionsFromError(
        exceptionFromErrorImplementation,
        parser,
        limit,
        hint.originalException ,
        key,
        event.exception.values,
        originalException,
        0,
      ),
      maxValueLimit,
    );
  }
}

function aggregateExceptionsFromError(
  exceptionFromErrorImplementation,
  parser,
  limit,
  error,
  key,
  prevExceptions,
  exception,
  exceptionId,
) {
  if (prevExceptions.length >= limit + 1) {
    return prevExceptions;
  }

  let newExceptions = [...prevExceptions];

  // Recursively call this function in order to walk down a chain of errors
  if (isInstanceOf(error[key], Error)) {
    applyExceptionGroupFieldsForParentException(exception, exceptionId);
    const newException = exceptionFromErrorImplementation(parser, error[key]);
    const newExceptionId = newExceptions.length;
    applyExceptionGroupFieldsForChildException(newException, key, newExceptionId, exceptionId);
    newExceptions = aggregateExceptionsFromError(
      exceptionFromErrorImplementation,
      parser,
      limit,
      error[key],
      key,
      [newException, ...newExceptions],
      newException,
      newExceptionId,
    );
  }

  // This will create exception grouping for AggregateErrors
  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError
  if (Array.isArray(error.errors)) {
    error.errors.forEach((childError, i) => {
      if (isInstanceOf(childError, Error)) {
        applyExceptionGroupFieldsForParentException(exception, exceptionId);
        const newException = exceptionFromErrorImplementation(parser, childError);
        const newExceptionId = newExceptions.length;
        applyExceptionGroupFieldsForChildException(newException, `errors[${i}]`, newExceptionId, exceptionId);
        newExceptions = aggregateExceptionsFromError(
          exceptionFromErrorImplementation,
          parser,
          limit,
          childError,
          key,
          [newException, ...newExceptions],
          newException,
          newExceptionId,
        );
      }
    });
  }

  return newExceptions;
}

function applyExceptionGroupFieldsForParentException(exception, exceptionId) {
  // Don't know if this default makes sense. The protocol requires us to set these values so we pick *some* default.
  exception.mechanism = exception.mechanism || { type: 'generic', handled: true };

  exception.mechanism = {
    ...exception.mechanism,
    ...(exception.type === 'AggregateError' && { is_exception_group: true }),
    exception_id: exceptionId,
  };
}

function applyExceptionGroupFieldsForChildException(
  exception,
  source,
  exceptionId,
  parentId,
) {
  // Don't know if this default makes sense. The protocol requires us to set these values so we pick *some* default.
  exception.mechanism = exception.mechanism || { type: 'generic', handled: true };

  exception.mechanism = {
    ...exception.mechanism,
    type: 'chained',
    source,
    exception_id: exceptionId,
    parent_id: parentId,
  };
}

/**
 * Truncate the message (exception.value) of all exceptions in the event.
 * Because this event processor is ran after `applyClientOptions`,
 * we need to truncate the message of the added exceptions here.
 */
function truncateAggregateExceptions(exceptions, maxValueLength) {
  return exceptions.map(exception => {
    if (exception.value) {
      exception.value = truncate(exception.value, maxValueLength);
    }
    return exception;
  });
}



;// ../../node_modules/@sentry/browser/build/npm/esm/integrations/linkederrors.js



const DEFAULT_KEY = 'cause';
const DEFAULT_LIMIT = 5;

const linkederrors_INTEGRATION_NAME = 'LinkedErrors';

const _linkedErrorsIntegration = ((options = {}) => {
  const limit = options.limit || DEFAULT_LIMIT;
  const key = options.key || DEFAULT_KEY;

  return {
    name: linkederrors_INTEGRATION_NAME,
    preprocessEvent(event, hint, client) {
      const options = client.getOptions();

      applyAggregateErrorsToEvent(
        // This differs from the LinkedErrors integration in core by using a different exceptionFromError function
        exceptionFromError,
        options.stackParser,
        options.maxValueLength,
        key,
        limit,
        event,
        hint,
      );
    },
  };
}) ;

/**
 * Aggregrate linked errors in an event.
 */
const linkedErrorsIntegration = defineIntegration(_linkedErrorsIntegration);



;// ../../node_modules/@sentry/browser/build/npm/esm/sdk.js













/** Get the default integrations for the browser SDK. */
function getDefaultIntegrations(options) {
  /**
   * Note: Please make sure this stays in sync with Angular SDK, which re-exports
   * `getDefaultIntegrations` but with an adjusted set of integrations.
   */
  const integrations = [
    inboundFiltersIntegration(),
    functionToStringIntegration(),
    browserApiErrorsIntegration(),
    breadcrumbsIntegration(),
    globalHandlersIntegration(),
    linkedErrorsIntegration(),
    dedupeIntegration(),
    httpContextIntegration(),
  ];

  // eslint-disable-next-line deprecation/deprecation
  if (options.autoSessionTracking !== false) {
    integrations.push(browserSessionIntegration());
  }

  return integrations;
}

function applyDefaultOptions(optionsArg = {}) {
  const defaultOptions = {
    defaultIntegrations: getDefaultIntegrations(optionsArg),
    release:
      typeof __SENTRY_RELEASE__ === 'string' // This allows build tooling to find-and-replace __SENTRY_RELEASE__ to inject a release value
        ? __SENTRY_RELEASE__
        : WINDOW.SENTRY_RELEASE && WINDOW.SENTRY_RELEASE.id // This supports the variable that sentry-webpack-plugin injects
          ? WINDOW.SENTRY_RELEASE.id
          : undefined,
    autoSessionTracking: true,
    sendClientReports: true,
  };

  // TODO: Instead of dropping just `defaultIntegrations`, we should simply
  // call `dropUndefinedKeys` on the entire `optionsArg`.
  // However, for this to work we need to adjust the `hasTracingEnabled()` logic
  // first as it differentiates between `undefined` and the key not being in the object.
  if (optionsArg.defaultIntegrations == null) {
    delete optionsArg.defaultIntegrations;
  }

  return { ...defaultOptions, ...optionsArg };
}

function shouldShowBrowserExtensionError() {
  const windowWithMaybeExtension =
    typeof WINDOW.window !== 'undefined' && (WINDOW );
  if (!windowWithMaybeExtension) {
    // No need to show the error if we're not in a browser window environment (e.g. service workers)
    return false;
  }

  const extensionKey = windowWithMaybeExtension.chrome ? 'chrome' : 'browser';
  const extensionObject = windowWithMaybeExtension[extensionKey];

  const runtimeId = extensionObject && extensionObject.runtime && extensionObject.runtime.id;
  const href = (WINDOW.location && WINDOW.location.href) || '';

  const extensionProtocols = ['chrome-extension:', 'moz-extension:', 'ms-browser-extension:', 'safari-web-extension:'];

  // Running the SDK in a dedicated extension page and calling Sentry.init is fine; no risk of data leakage
  const isDedicatedExtensionPage =
    !!runtimeId && WINDOW === WINDOW.top && extensionProtocols.some(protocol => href.startsWith(`${protocol}//`));

  // Running the SDK in NW.js, which appears like a browser extension but isn't, is also fine
  // see: https://github.com/getsentry/sentry-javascript/issues/12668
  const isNWjs = typeof windowWithMaybeExtension.nw !== 'undefined';

  return !!runtimeId && !isDedicatedExtensionPage && !isNWjs;
}

/**
 * A magic string that build tooling can leverage in order to inject a release value into the SDK.
 */

/**
 * The Sentry Browser SDK Client.
 *
 * To use this SDK, call the {@link init} function as early as possible when
 * loading the web page. To set context information or send manual events, use
 * the provided methods.
 *
 * @example
 *
 * ```
 *
 * import { init } from '@sentry/browser';
 *
 * init({
 *   dsn: '__DSN__',
 *   // ...
 * });
 * ```
 *
 * @example
 * ```
 *
 * import { addBreadcrumb } from '@sentry/browser';
 * addBreadcrumb({
 *   message: 'My Breadcrumb',
 *   // ...
 * });
 * ```
 *
 * @example
 *
 * ```
 *
 * import * as Sentry from '@sentry/browser';
 * Sentry.captureMessage('Hello, world!');
 * Sentry.captureException(new Error('Good bye'));
 * Sentry.captureEvent({
 *   message: 'Manual',
 *   stacktrace: [
 *     // ...
 *   ],
 * });
 * ```
 *
 * @see {@link BrowserOptions} for documentation on configuration options.
 */
function init(browserOptions = {}) {
  const options = applyDefaultOptions(browserOptions);

  if (!options.skipBrowserExtensionCheck && shouldShowBrowserExtensionError()) {
    consoleSandbox(() => {
      // eslint-disable-next-line no-console
      console.error(
        '[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/',
      );
    });
    return;
  }

  if (DEBUG_BUILD) {
    if (!supportsFetch()) {
      logger.warn(
        'No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill.',
      );
    }
  }
  const clientOptions = {
    ...options,
    stackParser: stackParserFromStackParserOptions(options.stackParser || defaultStackParser),
    integrations: getIntegrationsToSetup(options),
    transport: options.transport || makeFetchTransport,
  };

  return initAndBind(BrowserClient, clientOptions);
}

/**
 * All properties the report dialog supports
 */

/**
 * Present the user with a report dialog.
 *
 * @param options Everything is optional, we try to fetch all info need from the global scope.
 */
function showReportDialog(options = {}) {
  // doesn't work without a document (React Native)
  if (!WINDOW.document) {
    DEBUG_BUILD && logger.error('Global document not defined in showReportDialog call');
    return;
  }

  const scope = getCurrentScope();
  const client = scope.getClient();
  const dsn = client && client.getDsn();

  if (!dsn) {
    DEBUG_BUILD && logger.error('DSN not configured for showReportDialog call');
    return;
  }

  if (scope) {
    options.user = {
      ...scope.getUser(),
      ...options.user,
    };
  }

  if (!options.eventId) {
    const eventId = lastEventId();
    if (eventId) {
      options.eventId = eventId;
    }
  }

  const script = WINDOW.document.createElement('script');
  script.async = true;
  script.crossOrigin = 'anonymous';
  script.src = getReportDialogEndpoint(dsn, options);

  if (options.onLoad) {
    script.onload = options.onLoad;
  }

  const { onClose } = options;
  if (onClose) {
    const reportDialogClosedMessageHandler = (event) => {
      if (event.data === '__sentry_reportdialog_closed__') {
        try {
          onClose();
        } finally {
          WINDOW.removeEventListener('message', reportDialogClosedMessageHandler);
        }
      }
    };
    WINDOW.addEventListener('message', reportDialogClosedMessageHandler);
  }

  const injectionPoint = WINDOW.document.head || WINDOW.document.body;
  if (injectionPoint) {
    injectionPoint.appendChild(script);
  } else {
    DEBUG_BUILD && logger.error('Not injecting report dialog. No injection point found in HTML');
  }
}

/**
 * This function is here to be API compatible with the loader.
 * @hidden
 */
function forceLoad() {
  // Noop
}

/**
 * This function is here to be API compatible with the loader.
 * @hidden
 */
function onLoad(callback) {
  callback();
}

/**
 * Captures user feedback and sends it to Sentry.
 *
 * @deprecated Use `captureFeedback` instead.
 */
function captureUserFeedback(feedback) {
  const client = getClient();
  if (client) {
    // eslint-disable-next-line deprecation/deprecation
    client.captureUserFeedback(feedback);
  }
}



;// ../../node_modules/@sentry/core/build/esm/api.js


const SENTRY_API_VERSION = '7';

/** Returns the prefix to construct Sentry ingestion API endpoints. */
function getBaseApiEndpoint(dsn) {
  const protocol = dsn.protocol ? `${dsn.protocol}:` : '';
  const port = dsn.port ? `:${dsn.port}` : '';
  return `${protocol}//${dsn.host}${port}${dsn.path ? `/${dsn.path}` : ''}/api/`;
}

/** Returns the ingest API endpoint for target. */
function _getIngestEndpoint(dsn) {
  return `${getBaseApiEndpoint(dsn)}${dsn.projectId}/envelope/`;
}

/** Returns a URL-encoded string with auth config suitable for a query string. */
function _encodedAuth(dsn, sdkInfo) {
  const params = {
    sentry_version: SENTRY_API_VERSION,
  };

  if (dsn.publicKey) {
    // We send only the minimum set of required information. See
    // https://github.com/getsentry/sentry-javascript/issues/2572.
    params.sentry_key = dsn.publicKey;
  }

  if (sdkInfo) {
    params.sentry_client = `${sdkInfo.name}/${sdkInfo.version}`;
  }

  return new URLSearchParams(params).toString();
}

/**
 * Returns the envelope endpoint URL with auth in the query string.
 *
 * Sending auth as part of the query string and not as custom HTTP headers avoids CORS preflight requests.
 */
function getEnvelopeEndpointWithUrlEncodedAuth(dsn, tunnel, sdkInfo) {
  return tunnel ? tunnel : `${_getIngestEndpoint(dsn)}?${_encodedAuth(dsn, sdkInfo)}`;
}

/** Returns the url to the report dialog endpoint. */
function api_getReportDialogEndpoint(
  dsnLike,
  dialogOptions

,
) {
  const dsn = makeDsn(dsnLike);
  if (!dsn) {
    return '';
  }

  const endpoint = `${getBaseApiEndpoint(dsn)}embed/error-page/`;

  let encodedOptions = `dsn=${dsnToString(dsn)}`;
  for (const key in dialogOptions) {
    if (key === 'dsn') {
      continue;
    }

    if (key === 'onClose') {
      continue;
    }

    if (key === 'user') {
      const user = dialogOptions.user;
      if (!user) {
        continue;
      }
      if (user.name) {
        encodedOptions += `&name=${encodeURIComponent(user.name)}`;
      }
      if (user.email) {
        encodedOptions += `&email=${encodeURIComponent(user.email)}`;
      }
    } else {
      encodedOptions += `&${encodeURIComponent(key)}=${encodeURIComponent(dialogOptions[key] )}`;
    }
  }

  return `${endpoint}?${encodedOptions}`;
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/dsn.js



/** Regular expression used to parse a Dsn. */
const DSN_REGEX = /^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;

function isValidProtocol(protocol) {
  return protocol === 'http' || protocol === 'https';
}

/**
 * Renders the string representation of this Dsn.
 *
 * By default, this will render the public representation without the password
 * component. To get the deprecated private representation, set `withPassword`
 * to true.
 *
 * @param withPassword When set to true, the password will be included.
 */
function dsn_dsnToString(dsn, withPassword = false) {
  const { host, path, pass, port, projectId, protocol, publicKey } = dsn;
  return (
    `${protocol}://${publicKey}${withPassword && pass ? `:${pass}` : ''}` +
    `@${host}${port ? `:${port}` : ''}/${path ? `${path}/` : path}${projectId}`
  );
}

/**
 * Parses a Dsn from a given string.
 *
 * @param str A Dsn as string
 * @returns Dsn as DsnComponents or undefined if @param str is not a valid DSN string
 */
function dsnFromString(str) {
  const match = DSN_REGEX.exec(str);

  if (!match) {
    // This should be logged to the console
    logger_consoleSandbox(() => {
      // eslint-disable-next-line no-console
      console.error(`Invalid Sentry Dsn: ${str}`);
    });
    return undefined;
  }

  const [protocol, publicKey, pass = '', host = '', port = '', lastPath = ''] = match.slice(1);
  let path = '';
  let projectId = lastPath;

  const split = projectId.split('/');
  if (split.length > 1) {
    path = split.slice(0, -1).join('/');
    projectId = split.pop() ;
  }

  if (projectId) {
    const projectMatch = projectId.match(/^\d+/);
    if (projectMatch) {
      projectId = projectMatch[0];
    }
  }

  return dsnFromComponents({ host, pass, path, projectId, port, protocol: protocol , publicKey });
}

function dsnFromComponents(components) {
  return {
    protocol: components.protocol,
    publicKey: components.publicKey || '',
    pass: components.pass || '',
    host: components.host,
    port: components.port || '',
    path: components.path || '',
    projectId: components.projectId,
  };
}

function validateDsn(dsn) {
  if (!utils_hoist_debug_build_DEBUG_BUILD) {
    return true;
  }

  const { port, projectId, protocol } = dsn;

  const requiredComponents = ['protocol', 'publicKey', 'host', 'projectId'];
  const hasMissingRequiredComponent = requiredComponents.find(component => {
    if (!dsn[component]) {
      logger_logger.error(`Invalid Sentry Dsn: ${component} missing`);
      return true;
    }
    return false;
  });

  if (hasMissingRequiredComponent) {
    return false;
  }

  if (!projectId.match(/^\d+$/)) {
    logger_logger.error(`Invalid Sentry Dsn: Invalid projectId ${projectId}`);
    return false;
  }

  if (!isValidProtocol(protocol)) {
    logger_logger.error(`Invalid Sentry Dsn: Invalid protocol ${protocol}`);
    return false;
  }

  if (port && isNaN(parseInt(port, 10))) {
    logger_logger.error(`Invalid Sentry Dsn: Invalid port ${port}`);
    return false;
  }

  return true;
}

/**
 * Creates a valid Sentry Dsn object, identifying a Sentry instance and project.
 * @returns a valid DsnComponents object or `undefined` if @param from is an invalid DSN source
 */
function dsn_makeDsn(from) {
  const components = typeof from === 'string' ? dsnFromString(from) : dsnFromComponents(from);
  if (!components || !validateDsn(components)) {
    return undefined;
  }
  return components;
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/envelope.js





/**
 * Creates an envelope.
 * Make sure to always explicitly provide the generic to this function
 * so that the envelope types resolve correctly.
 */
function envelope_createEnvelope(headers, items = []) {
  return [headers, items] ;
}

/**
 * Add an item to an envelope.
 * Make sure to always explicitly provide the generic to this function
 * so that the envelope types resolve correctly.
 */
function addItemToEnvelope(envelope, newItem) {
  const [headers, items] = envelope;
  return [headers, [...items, newItem]] ;
}

/**
 * Convenience function to loop through the items and item types of an envelope.
 * (This function was mostly created because working with envelope types is painful at the moment)
 *
 * If the callback returns true, the rest of the items will be skipped.
 */
function forEachEnvelopeItem(
  envelope,
  callback,
) {
  const envelopeItems = envelope[1];

  for (const envelopeItem of envelopeItems) {
    const envelopeItemType = envelopeItem[0].type;
    const result = callback(envelopeItem, envelopeItemType);

    if (result) {
      return true;
    }
  }

  return false;
}

/**
 * Returns true if the envelope contains any of the given envelope item types
 */
function envelopeContainsItemType(envelope, types) {
  return forEachEnvelopeItem(envelope, (_, type) => types.includes(type));
}

/**
 * Encode a string to UTF8 array.
 */
function encodeUTF8(input) {
  return worldwide_GLOBAL_OBJ.__SENTRY__ && worldwide_GLOBAL_OBJ.__SENTRY__.encodePolyfill
    ? worldwide_GLOBAL_OBJ.__SENTRY__.encodePolyfill(input)
    : new TextEncoder().encode(input);
}

/**
 * Decode a UTF8 array to string.
 */
function decodeUTF8(input) {
  return GLOBAL_OBJ.__SENTRY__ && GLOBAL_OBJ.__SENTRY__.decodePolyfill
    ? GLOBAL_OBJ.__SENTRY__.decodePolyfill(input)
    : new TextDecoder().decode(input);
}

/**
 * Serializes an envelope.
 */
function serializeEnvelope(envelope) {
  const [envHeaders, items] = envelope;

  // Initially we construct our envelope as a string and only convert to binary chunks if we encounter binary data
  let parts = JSON.stringify(envHeaders);

  function append(next) {
    if (typeof parts === 'string') {
      parts = typeof next === 'string' ? parts + next : [encodeUTF8(parts), next];
    } else {
      parts.push(typeof next === 'string' ? encodeUTF8(next) : next);
    }
  }

  for (const item of items) {
    const [itemHeaders, payload] = item;

    append(`\n${JSON.stringify(itemHeaders)}\n`);

    if (typeof payload === 'string' || payload instanceof Uint8Array) {
      append(payload);
    } else {
      let stringifiedPayload;
      try {
        stringifiedPayload = JSON.stringify(payload);
      } catch (e) {
        // In case, despite all our efforts to keep `payload` circular-dependency-free, `JSON.stringify()` still
        // fails, we try again after normalizing it again with infinite normalization depth. This of course has a
        // performance impact but in this case a performance hit is better than throwing.
        stringifiedPayload = JSON.stringify(normalize(payload));
      }
      append(stringifiedPayload);
    }
  }

  return typeof parts === 'string' ? parts : concatBuffers(parts);
}

function concatBuffers(buffers) {
  const totalLength = buffers.reduce((acc, buf) => acc + buf.length, 0);

  const merged = new Uint8Array(totalLength);
  let offset = 0;
  for (const buffer of buffers) {
    merged.set(buffer, offset);
    offset += buffer.length;
  }

  return merged;
}

/**
 * Parses an envelope
 */
function parseEnvelope(env) {
  let buffer = typeof env === 'string' ? encodeUTF8(env) : env;

  function readBinary(length) {
    const bin = buffer.subarray(0, length);
    // Replace the buffer with the remaining data excluding trailing newline
    buffer = buffer.subarray(length + 1);
    return bin;
  }

  function readJson() {
    let i = buffer.indexOf(0xa);
    // If we couldn't find a newline, we must have found the end of the buffer
    if (i < 0) {
      i = buffer.length;
    }

    return JSON.parse(decodeUTF8(readBinary(i))) ;
  }

  const envelopeHeader = readJson();
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  const items = [];

  while (buffer.length) {
    const itemHeader = readJson();
    const binaryLength = typeof itemHeader.length === 'number' ? itemHeader.length : undefined;

    items.push([itemHeader, binaryLength ? readBinary(binaryLength) : readJson()]);
  }

  return [envelopeHeader, items];
}

/**
 * Creates envelope item for a single span
 */
function envelope_createSpanEnvelopeItem(spanJson) {
  const spanHeaders = {
    type: 'span',
  };

  return [spanHeaders, spanJson];
}

/**
 * Creates attachment envelope items
 */
function createAttachmentEnvelopeItem(attachment) {
  const buffer = typeof attachment.data === 'string' ? encodeUTF8(attachment.data) : attachment.data;

  return [
    object_dropUndefinedKeys({
      type: 'attachment',
      length: buffer.length,
      filename: attachment.filename,
      content_type: attachment.contentType,
      attachment_type: attachment.attachmentType,
    }),
    buffer,
  ];
}

const ITEM_TYPE_TO_DATA_CATEGORY_MAP = {
  session: 'session',
  sessions: 'session',
  attachment: 'attachment',
  transaction: 'transaction',
  event: 'error',
  client_report: 'internal',
  user_report: 'default',
  profile: 'profile',
  profile_chunk: 'profile',
  replay_event: 'replay',
  replay_recording: 'replay',
  check_in: 'monitor',
  feedback: 'feedback',
  span: 'span',
  statsd: 'metric_bucket',
  raw_security: 'security',
};

/**
 * Maps the type of an envelope item to a data category.
 */
function envelopeItemTypeToDataCategory(type) {
  return ITEM_TYPE_TO_DATA_CATEGORY_MAP[type];
}

/** Extracts the minimal SDK info from the metadata or an events */
function getSdkMetadataForEnvelopeHeader(metadataOrEvent) {
  if (!metadataOrEvent || !metadataOrEvent.sdk) {
    return;
  }
  const { name, version } = metadataOrEvent.sdk;
  return { name, version };
}

/**
 * Creates event envelope headers, based on event, sdk info and tunnel
 * Note: This function was extracted from the core package to make it available in Replay
 */
function createEventEnvelopeHeaders(
  event,
  sdkInfo,
  tunnel,
  dsn,
) {
  const dynamicSamplingContext = event.sdkProcessingMetadata && event.sdkProcessingMetadata.dynamicSamplingContext;
  return {
    event_id: event.event_id ,
    sent_at: new Date().toISOString(),
    ...(sdkInfo && { sdk: sdkInfo }),
    ...(!!tunnel && dsn && { dsn: dsn_dsnToString(dsn) }),
    ...(dynamicSamplingContext && {
      trace: object_dropUndefinedKeys({ ...dynamicSamplingContext }),
    }),
  };
}



;// ../../node_modules/@sentry/core/build/esm/envelope.js







/**
 * Apply SdkInfo (name, version, packages, integrations) to the corresponding event key.
 * Merge with existing data if any.
 **/
function enhanceEventWithSdkInfo(event, sdkInfo) {
  if (!sdkInfo) {
    return event;
  }
  event.sdk = event.sdk || {};
  event.sdk.name = event.sdk.name || sdkInfo.name;
  event.sdk.version = event.sdk.version || sdkInfo.version;
  event.sdk.integrations = [...(event.sdk.integrations || []), ...(sdkInfo.integrations || [])];
  event.sdk.packages = [...(event.sdk.packages || []), ...(sdkInfo.packages || [])];
  return event;
}

/** Creates an envelope from a Session */
function createSessionEnvelope(
  session,
  dsn,
  metadata,
  tunnel,
) {
  const sdkInfo = getSdkMetadataForEnvelopeHeader(metadata);
  const envelopeHeaders = {
    sent_at: new Date().toISOString(),
    ...(sdkInfo && { sdk: sdkInfo }),
    ...(!!tunnel && dsn && { dsn: dsn_dsnToString(dsn) }),
  };

  const envelopeItem =
    'aggregates' in session ? [{ type: 'sessions' }, session] : [{ type: 'session' }, session.toJSON()];

  return envelope_createEnvelope(envelopeHeaders, [envelopeItem]);
}

/**
 * Create an Envelope from an event.
 */
function createEventEnvelope(
  event,
  dsn,
  metadata,
  tunnel,
) {
  const sdkInfo = getSdkMetadataForEnvelopeHeader(metadata);

  /*
    Note: Due to TS, event.type may be `replay_event`, theoretically.
    In practice, we never call `createEventEnvelope` with `replay_event` type,
    and we'd have to adjust a looot of types to make this work properly.
    We want to avoid casting this around, as that could lead to bugs (e.g. when we add another type)
    So the safe choice is to really guard against the replay_event type here.
  */
  const eventType = event.type && event.type !== 'replay_event' ? event.type : 'event';

  enhanceEventWithSdkInfo(event, metadata && metadata.sdk);

  const envelopeHeaders = createEventEnvelopeHeaders(event, sdkInfo, tunnel, dsn);

  // Prevent this data (which, if it exists, was used in earlier steps in the processing pipeline) from being sent to
  // sentry. (Note: Our use of this property comes and goes with whatever we might be debugging, whatever hacks we may
  // have temporarily added, etc. Even if we don't happen to be using it at some point in the future, let's not get rid
  // of this `delete`, lest we miss putting it back in the next time the property is in use.)
  delete event.sdkProcessingMetadata;

  const eventItem = [{ type: eventType }, event];
  return envelope_createEnvelope(envelopeHeaders, [eventItem]);
}

/**
 * Create envelope from Span item.
 *
 * Takes an optional client and runs spans through `beforeSendSpan` if available.
 */
function createSpanEnvelope(spans, client) {
  function dscHasRequiredProps(dsc) {
    return !!dsc.trace_id && !!dsc.public_key;
  }

  // For the moment we'll obtain the DSC from the first span in the array
  // This might need to be changed if we permit sending multiple spans from
  // different segments in one envelope
  const dsc = getDynamicSamplingContextFromSpan(spans[0]);

  const dsn = client && client.getDsn();
  const tunnel = client && client.getOptions().tunnel;

  const headers = {
    sent_at: new Date().toISOString(),
    ...(dscHasRequiredProps(dsc) && { trace: dsc }),
    ...(!!tunnel && dsn && { dsn: dsnToString(dsn) }),
  };

  const beforeSendSpan = client && client.getOptions().beforeSendSpan;
  const convertToSpanJSON = beforeSendSpan
    ? (span) => {
        const spanJson = beforeSendSpan(spanToJSON(span) );
        if (!spanJson) {
          showSpanDropWarning();
        }
        return spanJson;
      }
    : (span) => spanToJSON(span);

  const items = [];
  for (const span of spans) {
    const spanJson = convertToSpanJSON(span);
    if (spanJson) {
      items.push(createSpanEnvelopeItem(spanJson));
    }
  }

  return createEnvelope(headers, items);
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/clientreport.js



/**
 * Creates client report envelope
 * @param discarded_events An array of discard events
 * @param dsn A DSN that can be set on the header. Optional.
 */
function createClientReportEnvelope(
  discarded_events,
  dsn,
  timestamp,
) {
  const clientReportItem = [
    { type: 'client_report' },
    {
      timestamp: timestamp || dateTimestampInSeconds(),
      discarded_events,
    },
  ];
  return envelope_createEnvelope(dsn ? { dsn } : {}, [clientReportItem]);
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/error.js
/** An error emitted by Sentry SDKs and related utilities. */
class SentryError extends Error {

   constructor(
     message,
    logLevel = 'warn',
  ) {
    super(message);this.message = message;
    this.logLevel = logLevel;
  }
}



;// ../../node_modules/@sentry/core/build/esm/utils/parseSampleRate.js



/**
 * Parse a sample rate from a given value.
 * This will either return a boolean or number sample rate, if the sample rate is valid (between 0 and 1).
 * If a string is passed, we try to convert it to a number.
 *
 * Any invalid sample rate will return `undefined`.
 */
function parseSampleRate(sampleRate) {
  if (typeof sampleRate === 'boolean') {
    return Number(sampleRate);
  }

  const rate = typeof sampleRate === 'string' ? parseFloat(sampleRate) : sampleRate;
  if (typeof rate !== 'number' || isNaN(rate) || rate < 0 || rate > 1) {
    debug_build_DEBUG_BUILD &&
      logger_logger.warn(
        `[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(
          sampleRate,
        )} of type ${JSON.stringify(typeof sampleRate)}.`,
      );
    return undefined;
  }

  return rate;
}



;// ../../node_modules/@sentry/core/build/esm/baseclient.js



















const ALREADY_SEEN_ERROR = "Not capturing exception because it's already been captured.";

/**
 * Base implementation for all JavaScript SDK clients.
 *
 * Call the constructor with the corresponding options
 * specific to the client subclass. To access these options later, use
 * {@link Client.getOptions}.
 *
 * If a Dsn is specified in the options, it will be parsed and stored. Use
 * {@link Client.getDsn} to retrieve the Dsn at any moment. In case the Dsn is
 * invalid, the constructor will throw a {@link SentryException}. Note that
 * without a valid Dsn, the SDK will not send any events to Sentry.
 *
 * Before sending an event, it is passed through
 * {@link BaseClient._prepareEvent} to add SDK information and scope data
 * (breadcrumbs and context). To add more custom information, override this
 * method and extend the resulting prepared event.
 *
 * To issue automatically created events (e.g. via instrumentation), use
 * {@link Client.captureEvent}. It will prepare the event and pass it through
 * the callback lifecycle. To issue auto-breadcrumbs, use
 * {@link Client.addBreadcrumb}.
 *
 * @example
 * class NodeClient extends BaseClient<NodeOptions> {
 *   public constructor(options: NodeOptions) {
 *     super(options);
 *   }
 *
 *   // ...
 * }
 */
class BaseClient {
  /** Options passed to the SDK. */

  /** The client Dsn, if specified in options. Without this Dsn, the SDK will be disabled. */

  /** Array of set up integrations. */

  /** Number of calls being processed */

  /** Holds flushable  */

  // eslint-disable-next-line @typescript-eslint/ban-types

  /**
   * Initializes this client instance.
   *
   * @param options Options for the client.
   */
   constructor(options) {
    this._options = options;
    this._integrations = {};
    this._numProcessing = 0;
    this._outcomes = {};
    this._hooks = {};
    this._eventProcessors = [];

    if (options.dsn) {
      this._dsn = dsn_makeDsn(options.dsn);
    } else {
      debug_build_DEBUG_BUILD && logger_logger.warn('No DSN provided, client will not send events.');
    }

    if (this._dsn) {
      const url = getEnvelopeEndpointWithUrlEncodedAuth(
        this._dsn,
        options.tunnel,
        options._metadata ? options._metadata.sdk : undefined,
      );
      this._transport = options.transport({
        tunnel: this._options.tunnel,
        recordDroppedEvent: this.recordDroppedEvent.bind(this),
        ...options.transportOptions,
        url,
      });
    }

    // TODO(v9): Remove this deprecation warning
    const tracingOptions = ['enableTracing', 'tracesSampleRate', 'tracesSampler'] ;
    const undefinedOption = tracingOptions.find(option => option in options && options[option] == undefined);
    if (undefinedOption) {
      logger_consoleSandbox(() => {
        // eslint-disable-next-line no-console
        console.warn(
          `[Sentry] Deprecation warning: \`${undefinedOption}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`,
        );
      });
    }
  }

  /**
   * @inheritDoc
   */
   captureException(exception, hint, scope) {
    const eventId = misc_uuid4();

    // ensure we haven't captured this very object before
    if (checkOrSetAlreadyCaught(exception)) {
      debug_build_DEBUG_BUILD && logger_logger.log(ALREADY_SEEN_ERROR);
      return eventId;
    }

    const hintWithEventId = {
      event_id: eventId,
      ...hint,
    };

    this._process(
      this.eventFromException(exception, hintWithEventId).then(event =>
        this._captureEvent(event, hintWithEventId, scope),
      ),
    );

    return hintWithEventId.event_id;
  }

  /**
   * @inheritDoc
   */
   captureMessage(
    message,
    level,
    hint,
    currentScope,
  ) {
    const hintWithEventId = {
      event_id: misc_uuid4(),
      ...hint,
    };

    const eventMessage = isParameterizedString(message) ? message : String(message);

    const promisedEvent = is_isPrimitive(message)
      ? this.eventFromMessage(eventMessage, level, hintWithEventId)
      : this.eventFromException(message, hintWithEventId);

    this._process(promisedEvent.then(event => this._captureEvent(event, hintWithEventId, currentScope)));

    return hintWithEventId.event_id;
  }

  /**
   * @inheritDoc
   */
   captureEvent(event, hint, currentScope) {
    const eventId = misc_uuid4();

    // ensure we haven't captured this very object before
    if (hint && hint.originalException && checkOrSetAlreadyCaught(hint.originalException)) {
      debug_build_DEBUG_BUILD && logger_logger.log(ALREADY_SEEN_ERROR);
      return eventId;
    }

    const hintWithEventId = {
      event_id: eventId,
      ...hint,
    };

    const sdkProcessingMetadata = event.sdkProcessingMetadata || {};
    const capturedSpanScope = sdkProcessingMetadata.capturedSpanScope;

    this._process(this._captureEvent(event, hintWithEventId, capturedSpanScope || currentScope));

    return hintWithEventId.event_id;
  }

  /**
   * @inheritDoc
   */
   captureSession(session) {
    if (!(typeof session.release === 'string')) {
      debug_build_DEBUG_BUILD && logger_logger.warn('Discarded session because of missing or non-string release');
    } else {
      this.sendSession(session);
      // After sending, we set init false to indicate it's not the first occurrence
      updateSession(session, { init: false });
    }
  }

  /**
   * @inheritDoc
   */
   getDsn() {
    return this._dsn;
  }

  /**
   * @inheritDoc
   */
   getOptions() {
    return this._options;
  }

  /**
   * @see SdkMetadata
   *
   * @return The metadata of the SDK
   */
   getSdkMetadata() {
    return this._options._metadata;
  }

  /**
   * @inheritDoc
   */
   getTransport() {
    return this._transport;
  }

  /**
   * @inheritDoc
   */
   flush(timeout) {
    const transport = this._transport;
    if (transport) {
      this.emit('flush');
      return this._isClientDoneProcessing(timeout).then(clientFinished => {
        return transport.flush(timeout).then(transportFlushed => clientFinished && transportFlushed);
      });
    } else {
      return resolvedSyncPromise(true);
    }
  }

  /**
   * @inheritDoc
   */
   close(timeout) {
    return this.flush(timeout).then(result => {
      this.getOptions().enabled = false;
      this.emit('close');
      return result;
    });
  }

  /** Get all installed event processors. */
   getEventProcessors() {
    return this._eventProcessors;
  }

  /** @inheritDoc */
   addEventProcessor(eventProcessor) {
    this._eventProcessors.push(eventProcessor);
  }

  /** @inheritdoc */
   init() {
    if (
      this._isEnabled() ||
      // Force integrations to be setup even if no DSN was set when we have
      // Spotlight enabled. This is particularly important for browser as we
      // don't support the `spotlight` option there and rely on the users
      // adding the `spotlightBrowserIntegration()` to their integrations which
      // wouldn't get initialized with the check below when there's no DSN set.
      this._options.integrations.some(({ name }) => name.startsWith('Spotlight'))
    ) {
      this._setupIntegrations();
    }
  }

  /**
   * Gets an installed integration by its name.
   *
   * @returns The installed integration or `undefined` if no integration with that `name` was installed.
   */
   getIntegrationByName(integrationName) {
    return this._integrations[integrationName] ;
  }

  /**
   * @inheritDoc
   */
   addIntegration(integration) {
    const isAlreadyInstalled = this._integrations[integration.name];

    // This hook takes care of only installing if not already installed
    setupIntegration(this, integration, this._integrations);
    // Here we need to check manually to make sure to not run this multiple times
    if (!isAlreadyInstalled) {
      afterSetupIntegrations(this, [integration]);
    }
  }

  /**
   * @inheritDoc
   */
   sendEvent(event, hint = {}) {
    this.emit('beforeSendEvent', event, hint);

    let env = createEventEnvelope(event, this._dsn, this._options._metadata, this._options.tunnel);

    for (const attachment of hint.attachments || []) {
      env = addItemToEnvelope(env, createAttachmentEnvelopeItem(attachment));
    }

    const promise = this.sendEnvelope(env);
    if (promise) {
      promise.then(sendResponse => this.emit('afterSendEvent', event, sendResponse), null);
    }
  }

  /**
   * @inheritDoc
   */
   sendSession(session) {
    const env = createSessionEnvelope(session, this._dsn, this._options._metadata, this._options.tunnel);

    // sendEnvelope should not throw
    // eslint-disable-next-line @typescript-eslint/no-floating-promises
    this.sendEnvelope(env);
  }

  /**
   * @inheritDoc
   */
   recordDroppedEvent(reason, category, eventOrCount) {
    if (this._options.sendClientReports) {
      // TODO v9: We do not need the `event` passed as third argument anymore, and can possibly remove this overload
      // If event is passed as third argument, we assume this is a count of 1
      const count = typeof eventOrCount === 'number' ? eventOrCount : 1;

      // We want to track each category (error, transaction, session, replay_event) separately
      // but still keep the distinction between different type of outcomes.
      // We could use nested maps, but it's much easier to read and type this way.
      // A correct type for map-based implementation if we want to go that route
      // would be `Partial<Record<SentryRequestType, Partial<Record<Outcome, number>>>>`
      // With typescript 4.1 we could even use template literal types
      const key = `${reason}:${category}`;
      debug_build_DEBUG_BUILD && logger_logger.log(`Recording outcome: "${key}"${count > 1 ? ` (${count} times)` : ''}`);
      this._outcomes[key] = (this._outcomes[key] || 0) + count;
    }
  }

  // Keep on() & emit() signatures in sync with types' client.ts interface
  /* eslint-disable @typescript-eslint/unified-signatures */

  /** @inheritdoc */

  /** @inheritdoc */
   on(hook, callback) {
    const hooks = (this._hooks[hook] = this._hooks[hook] || []);

    // @ts-expect-error We assume the types are correct
    hooks.push(callback);

    // This function returns a callback execution handler that, when invoked,
    // deregisters a callback. This is crucial for managing instances where callbacks
    // need to be unregistered to prevent self-referencing in callback closures,
    // ensuring proper garbage collection.
    return () => {
      // @ts-expect-error We assume the types are correct
      const cbIndex = hooks.indexOf(callback);
      if (cbIndex > -1) {
        hooks.splice(cbIndex, 1);
      }
    };
  }

  /** @inheritdoc */

  /** @inheritdoc */
   emit(hook, ...rest) {
    const callbacks = this._hooks[hook];
    if (callbacks) {
      callbacks.forEach(callback => callback(...rest));
    }
  }

  /**
   * @inheritdoc
   */
   sendEnvelope(envelope) {
    this.emit('beforeEnvelope', envelope);

    if (this._isEnabled() && this._transport) {
      return this._transport.send(envelope).then(null, reason => {
        debug_build_DEBUG_BUILD && logger_logger.error('Error while sending envelope:', reason);
        return reason;
      });
    }

    debug_build_DEBUG_BUILD && logger_logger.error('Transport disabled');

    return resolvedSyncPromise({});
  }

  /* eslint-enable @typescript-eslint/unified-signatures */

  /** Setup integrations for this client. */
   _setupIntegrations() {
    const { integrations } = this._options;
    this._integrations = setupIntegrations(this, integrations);
    afterSetupIntegrations(this, integrations);
  }

  /** Updates existing session based on the provided event */
   _updateSessionFromEvent(session, event) {
    let crashed = event.level === 'fatal';
    let errored = false;
    const exceptions = event.exception && event.exception.values;

    if (exceptions) {
      errored = true;

      for (const ex of exceptions) {
        const mechanism = ex.mechanism;
        if (mechanism && mechanism.handled === false) {
          crashed = true;
          break;
        }
      }
    }

    // A session is updated and that session update is sent in only one of the two following scenarios:
    // 1. Session with non terminal status and 0 errors + an error occurred -> Will set error count to 1 and send update
    // 2. Session with non terminal status and 1 error + a crash occurred -> Will set status crashed and send update
    const sessionNonTerminal = session.status === 'ok';
    const shouldUpdateAndSend = (sessionNonTerminal && session.errors === 0) || (sessionNonTerminal && crashed);

    if (shouldUpdateAndSend) {
      updateSession(session, {
        ...(crashed && { status: 'crashed' }),
        errors: session.errors || Number(errored || crashed),
      });
      this.captureSession(session);
    }
  }

  /**
   * Determine if the client is finished processing. Returns a promise because it will wait `timeout` ms before saying
   * "no" (resolving to `false`) in order to give the client a chance to potentially finish first.
   *
   * @param timeout The time, in ms, after which to resolve to `false` if the client is still busy. Passing `0` (or not
   * passing anything) will make the promise wait as long as it takes for processing to finish before resolving to
   * `true`.
   * @returns A promise which will resolve to `true` if processing is already done or finishes before the timeout, and
   * `false` otherwise
   */
   _isClientDoneProcessing(timeout) {
    return new SyncPromise(resolve => {
      let ticked = 0;
      const tick = 1;

      const interval = setInterval(() => {
        if (this._numProcessing == 0) {
          clearInterval(interval);
          resolve(true);
        } else {
          ticked += tick;
          if (timeout && ticked >= timeout) {
            clearInterval(interval);
            resolve(false);
          }
        }
      }, tick);
    });
  }

  /** Determines whether this SDK is enabled and a transport is present. */
   _isEnabled() {
    return this.getOptions().enabled !== false && this._transport !== undefined;
  }

  /**
   * Adds common information to events.
   *
   * The information includes release and environment from `options`,
   * breadcrumbs and context (extra, tags and user) from the scope.
   *
   * Information that is already present in the event is never overwritten. For
   * nested objects, such as the context, keys are merged.
   *
   * @param event The original event.
   * @param hint May contain additional information about the original exception.
   * @param currentScope A scope containing event metadata.
   * @returns A new event with more information.
   */
   _prepareEvent(
    event,
    hint,
    currentScope = currentScopes_getCurrentScope(),
    isolationScope = currentScopes_getIsolationScope(),
  ) {
    const options = this.getOptions();
    const integrations = Object.keys(this._integrations);
    if (!hint.integrations && integrations.length > 0) {
      hint.integrations = integrations;
    }

    this.emit('preprocessEvent', event, hint);

    if (!event.type) {
      isolationScope.setLastEventId(event.event_id || hint.event_id);
    }

    return prepareEvent(options, event, hint, currentScope, this, isolationScope).then(evt => {
      if (evt === null) {
        return evt;
      }

      evt.contexts = {
        trace: getTraceContextFromScope(currentScope),
        ...evt.contexts,
      };

      const dynamicSamplingContext = getDynamicSamplingContextFromScope(this, currentScope);

      evt.sdkProcessingMetadata = {
        dynamicSamplingContext,
        ...evt.sdkProcessingMetadata,
      };

      return evt;
    });
  }

  /**
   * Processes the event and logs an error in case of rejection
   * @param event
   * @param hint
   * @param scope
   */
   _captureEvent(event, hint = {}, scope) {
    return this._processEvent(event, hint, scope).then(
      finalEvent => {
        return finalEvent.event_id;
      },
      reason => {
        if (debug_build_DEBUG_BUILD) {
          // If something's gone wrong, log the error as a warning. If it's just us having used a `SentryError` for
          // control flow, log just the message (no stack) as a log-level log.
          if (reason instanceof SentryError && reason.logLevel === 'log') {
            logger_logger.log(reason.message);
          } else {
            logger_logger.warn(reason);
          }
        }
        return undefined;
      },
    );
  }

  /**
   * Processes an event (either error or message) and sends it to Sentry.
   *
   * This also adds breadcrumbs and context information to the event. However,
   * platform specific meta data (such as the User's IP address) must be added
   * by the SDK implementor.
   *
   *
   * @param event The event to send to Sentry.
   * @param hint May contain additional information about the original exception.
   * @param currentScope A scope containing event metadata.
   * @returns A SyncPromise that resolves with the event or rejects in case event was/will not be send.
   */
   _processEvent(event, hint, currentScope) {
    const options = this.getOptions();
    const { sampleRate } = options;

    const isTransaction = isTransactionEvent(event);
    const isError = baseclient_isErrorEvent(event);
    const eventType = event.type || 'error';
    const beforeSendLabel = `before send for type \`${eventType}\``;

    // 1.0 === 100% events are sent
    // 0.0 === 0% events are sent
    // Sampling for transaction happens somewhere else
    const parsedSampleRate = typeof sampleRate === 'undefined' ? undefined : parseSampleRate(sampleRate);
    if (isError && typeof parsedSampleRate === 'number' && Math.random() > parsedSampleRate) {
      this.recordDroppedEvent('sample_rate', 'error', event);
      return rejectedSyncPromise(
        new SentryError(
          `Discarding event because it's not included in the random sample (sampling rate = ${sampleRate})`,
          'log',
        ),
      );
    }

    const dataCategory = eventType === 'replay_event' ? 'replay' : eventType;

    const sdkProcessingMetadata = event.sdkProcessingMetadata || {};
    const capturedSpanIsolationScope = sdkProcessingMetadata.capturedSpanIsolationScope;

    return this._prepareEvent(event, hint, currentScope, capturedSpanIsolationScope)
      .then(prepared => {
        if (prepared === null) {
          this.recordDroppedEvent('event_processor', dataCategory, event);
          throw new SentryError('An event processor returned `null`, will not send event.', 'log');
        }

        const isInternalException = hint.data && (hint.data ).__sentry__ === true;
        if (isInternalException) {
          return prepared;
        }

        const result = processBeforeSend(this, options, prepared, hint);
        return _validateBeforeSendResult(result, beforeSendLabel);
      })
      .then(processedEvent => {
        if (processedEvent === null) {
          this.recordDroppedEvent('before_send', dataCategory, event);
          if (isTransaction) {
            const spans = event.spans || [];
            // the transaction itself counts as one span, plus all the child spans that are added
            const spanCount = 1 + spans.length;
            this.recordDroppedEvent('before_send', 'span', spanCount);
          }
          throw new SentryError(`${beforeSendLabel} returned \`null\`, will not send event.`, 'log');
        }

        const session = currentScope && currentScope.getSession();
        if (!isTransaction && session) {
          this._updateSessionFromEvent(session, processedEvent);
        }

        if (isTransaction) {
          const spanCountBefore =
            (processedEvent.sdkProcessingMetadata && processedEvent.sdkProcessingMetadata.spanCountBeforeProcessing) ||
            0;
          const spanCountAfter = processedEvent.spans ? processedEvent.spans.length : 0;

          const droppedSpanCount = spanCountBefore - spanCountAfter;
          if (droppedSpanCount > 0) {
            this.recordDroppedEvent('before_send', 'span', droppedSpanCount);
          }
        }

        // None of the Sentry built event processor will update transaction name,
        // so if the transaction name has been changed by an event processor, we know
        // it has to come from custom event processor added by a user
        const transactionInfo = processedEvent.transaction_info;
        if (isTransaction && transactionInfo && processedEvent.transaction !== event.transaction) {
          const source = 'custom';
          processedEvent.transaction_info = {
            ...transactionInfo,
            source,
          };
        }

        this.sendEvent(processedEvent, hint);
        return processedEvent;
      })
      .then(null, reason => {
        if (reason instanceof SentryError) {
          throw reason;
        }

        this.captureException(reason, {
          data: {
            __sentry__: true,
          },
          originalException: reason,
        });
        throw new SentryError(
          `Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${reason}`,
        );
      });
  }

  /**
   * Occupies the client with processing and event
   */
   _process(promise) {
    this._numProcessing++;
    void promise.then(
      value => {
        this._numProcessing--;
        return value;
      },
      reason => {
        this._numProcessing--;
        return reason;
      },
    );
  }

  /**
   * Clears outcomes on this client and returns them.
   */
   _clearOutcomes() {
    const outcomes = this._outcomes;
    this._outcomes = {};
    return Object.entries(outcomes).map(([key, quantity]) => {
      const [reason, category] = key.split(':') ;
      return {
        reason,
        category,
        quantity,
      };
    });
  }

  /**
   * Sends client reports as an envelope.
   */
   _flushOutcomes() {
    debug_build_DEBUG_BUILD && logger_logger.log('Flushing outcomes...');

    const outcomes = this._clearOutcomes();

    if (outcomes.length === 0) {
      debug_build_DEBUG_BUILD && logger_logger.log('No outcomes to send');
      return;
    }

    // This is really the only place where we want to check for a DSN and only send outcomes then
    if (!this._dsn) {
      debug_build_DEBUG_BUILD && logger_logger.log('No dsn provided, will not send outcomes');
      return;
    }

    debug_build_DEBUG_BUILD && logger_logger.log('Sending outcomes:', outcomes);

    const envelope = createClientReportEnvelope(outcomes, this._options.tunnel && dsn_dsnToString(this._dsn));

    // sendEnvelope should not throw
    // eslint-disable-next-line @typescript-eslint/no-floating-promises
    this.sendEnvelope(envelope);
  }

  /**
   * @inheritDoc
   */

}

/**
 * Verifies that return value of configured `beforeSend` or `beforeSendTransaction` is of expected type, and returns the value if so.
 */
function _validateBeforeSendResult(
  beforeSendResult,
  beforeSendLabel,
) {
  const invalidValueError = `${beforeSendLabel} must return \`null\` or a valid event.`;
  if (is_isThenable(beforeSendResult)) {
    return beforeSendResult.then(
      event => {
        if (!isPlainObject(event) && event !== null) {
          throw new SentryError(invalidValueError);
        }
        return event;
      },
      e => {
        throw new SentryError(`${beforeSendLabel} rejected with ${e}`);
      },
    );
  } else if (!isPlainObject(beforeSendResult) && beforeSendResult !== null) {
    throw new SentryError(invalidValueError);
  }
  return beforeSendResult;
}

/**
 * Process the matching `beforeSendXXX` callback.
 */
function processBeforeSend(
  client,
  options,
  event,
  hint,
) {
  const { beforeSend, beforeSendTransaction, beforeSendSpan } = options;

  if (baseclient_isErrorEvent(event) && beforeSend) {
    return beforeSend(event, hint);
  }

  if (isTransactionEvent(event)) {
    if (event.spans && beforeSendSpan) {
      const processedSpans = [];
      for (const span of event.spans) {
        const processedSpan = beforeSendSpan(span);
        if (processedSpan) {
          processedSpans.push(processedSpan);
        } else {
          spanUtils_showSpanDropWarning();
          client.recordDroppedEvent('before_send', 'span');
        }
      }
      event.spans = processedSpans;
    }

    if (beforeSendTransaction) {
      if (event.spans) {
        // We store the # of spans before processing in SDK metadata,
        // so we can compare it afterwards to determine how many spans were dropped
        const spanCountBefore = event.spans.length;
        event.sdkProcessingMetadata = {
          ...event.sdkProcessingMetadata,
          spanCountBeforeProcessing: spanCountBefore,
        };
      }
      return beforeSendTransaction(event, hint);
    }
  }

  return event;
}

function baseclient_isErrorEvent(event) {
  return event.type === undefined;
}

function isTransactionEvent(event) {
  return event.type === 'transaction';
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/env.js
/*
 * This module exists for optimizations in the build process through rollup and terser.  We define some global
 * constants, which can be overridden during build. By guarding certain pieces of code with functions that return these
 * constants, we can control whether or not they appear in the final bundle. (Any code guarded by a false condition will
 * never run, and will hence be dropped during treeshaking.) The two primary uses for this are stripping out calls to
 * `logger` and preventing node-related code from appearing in browser bundles.
 *
 * Attention:
 * This file should not be used to define constants/flags that are intended to be used for tree-shaking conducted by
 * users. These flags should live in their respective packages, as we identified user tooling (specifically webpack)
 * having issues tree-shaking these constants across package boundaries.
 * An example for this is the __SENTRY_DEBUG__ constant. It is declared in each package individually because we want
 * users to be able to shake away expressions that it guards.
 */

/**
 * Figures out if we're building a browser bundle.
 *
 * @returns true if this is a browser bundle build.
 */
function isBrowserBundle() {
  return typeof __SENTRY_BROWSER_BUNDLE__ !== 'undefined' && !!__SENTRY_BROWSER_BUNDLE__;
}

/**
 * Get source of SDK.
 */
function getSDKSource() {
  // This comment is used to identify this line in the CDN bundle build step and replace this with "return 'cdn';"
  /* __SENTRY_SDK_SOURCE__ */ return 'npm';
}



;// ../../node_modules/@sentry/core/build/esm/utils/sdkMetadata.js


/**
 * A builder for the SDK metadata in the options for the SDK initialization.
 *
 * Note: This function is identical to `buildMetadata` in Remix and NextJS and SvelteKit.
 * We don't extract it for bundle size reasons.
 * @see https://github.com/getsentry/sentry-javascript/pull/7404
 * @see https://github.com/getsentry/sentry-javascript/pull/4196
 *
 * If you make changes to this function consider updating the others as well.
 *
 * @param options SDK options object that gets mutated
 * @param names list of package names
 */
function applySdkMetadata(options, name, names = [name], source = 'npm') {
  const metadata = options._metadata || {};

  if (!metadata.sdk) {
    metadata.sdk = {
      name: `sentry.javascript.${name}`,
      packages: names.map(name => ({
        name: `${source}:@sentry/${name}`,
        version: SDK_VERSION,
      })),
      version: SDK_VERSION,
    };
  }

  options._metadata = metadata;
}



;// ../../node_modules/@sentry/browser/build/npm/esm/userfeedback.js


/**
 * Creates an envelope from a user feedback.
 */
function createUserFeedbackEnvelope(
  feedback,
  {
    metadata,
    tunnel,
    dsn,
  }

,
) {
  const headers = {
    event_id: feedback.event_id,
    sent_at: new Date().toISOString(),
    ...(metadata &&
      metadata.sdk && {
        sdk: {
          name: metadata.sdk.name,
          version: metadata.sdk.version,
        },
      }),
    ...(!!tunnel && !!dsn && { dsn: dsn_dsnToString(dsn) }),
  };
  const item = createUserFeedbackEnvelopeItem(feedback);

  return envelope_createEnvelope(headers, [item]);
}

function createUserFeedbackEnvelopeItem(feedback) {
  const feedbackHeaders = {
    type: 'user_report',
  };
  return [feedbackHeaders, feedback];
}



;// ../../node_modules/@sentry/browser/build/npm/esm/client.js






/**
 * Configuration options for the Sentry Browser SDK.
 * @see @sentry/core Options for more information.
 */

/**
 * The Sentry Browser SDK Client.
 *
 * @see BrowserOptions for documentation on configuration options.
 * @see SentryClient for usage documentation.
 */
class client_BrowserClient extends BaseClient {
  /**
   * Creates a new Browser SDK instance.
   *
   * @param options Configuration options for this SDK.
   */
   constructor(options) {
    const opts = {
      // We default this to true, as it is the safer scenario
      parentSpanIsAlwaysRootSpan: true,
      ...options,
    };
    const sdkSource = helpers_WINDOW.SENTRY_SDK_SOURCE || getSDKSource();
    applySdkMetadata(opts, 'browser', ['browser'], sdkSource);

    super(opts);

    if (opts.sendClientReports && helpers_WINDOW.document) {
      helpers_WINDOW.document.addEventListener('visibilitychange', () => {
        if (helpers_WINDOW.document.visibilityState === 'hidden') {
          this._flushOutcomes();
        }
      });
    }
  }

  /**
   * @inheritDoc
   */
   eventFromException(exception, hint) {
    return eventFromException(this._options.stackParser, exception, hint, this._options.attachStacktrace);
  }

  /**
   * @inheritDoc
   */
   eventFromMessage(
    message,
    level = 'info',
    hint,
  ) {
    return eventFromMessage(this._options.stackParser, message, level, hint, this._options.attachStacktrace);
  }

  /**
   * Sends user feedback to Sentry.
   *
   * @deprecated Use `captureFeedback` instead.
   */
   captureUserFeedback(feedback) {
    if (!this._isEnabled()) {
      esm_debug_build_DEBUG_BUILD && logger_logger.warn('SDK not enabled, will not capture user feedback.');
      return;
    }

    const envelope = createUserFeedbackEnvelope(feedback, {
      metadata: this.getSdkMetadata(),
      dsn: this.getDsn(),
      tunnel: this.getOptions().tunnel,
    });

    // sendEnvelope should not throw
    // eslint-disable-next-line @typescript-eslint/no-floating-promises
    this.sendEnvelope(envelope);
  }

  /**
   * @inheritDoc
   */
   _prepareEvent(event, hint, scope) {
    event.platform = event.platform || 'javascript';
    return super._prepareEvent(event, hint, scope);
  }
}



;// ../../node_modules/@sentry-internal/browser-utils/build/esm/debug-build.js
/**
 * This serves as a build time flag that will be true by default, but false in non-debug builds or if users replace `__SENTRY_DEBUG__` in their generated code.
 *
 * ATTENTION: This constant must never cross package boundaries (i.e. be exported) to guarantee that it can be used for tree shaking.
 */
const build_esm_debug_build_DEBUG_BUILD = (typeof __SENTRY_DEBUG__ === 'undefined' || __SENTRY_DEBUG__);



;// ../../node_modules/@sentry-internal/browser-utils/build/esm/getNativeImplementation.js




/**
 * We generally want to use window.fetch / window.setTimeout.
 * However, in some cases this may be wrapped (e.g. by Zone.js for Angular),
 * so we try to get an unpatched version of this from a sandboxed iframe.
 */

const cachedImplementations = {};

/**
 * Get the native implementation of a browser function.
 *
 * This can be used to ensure we get an unwrapped version of a function, in cases where a wrapped function can lead to problems.
 *
 * The following methods can be retrieved:
 * - `setTimeout`: This can be wrapped by e.g. Angular, causing change detection to be triggered.
 * - `fetch`: This can be wrapped by e.g. ad-blockers, causing an infinite loop when a request is blocked.
 */
function getNativeImplementation(
  name,
) {
  const cached = cachedImplementations[name];
  if (cached) {
    return cached;
  }

  let impl = types_WINDOW[name] ;

  // Fast path to avoid DOM I/O
  if (isNativeFunction(impl)) {
    return (cachedImplementations[name] = impl.bind(types_WINDOW) );
  }

  const document = types_WINDOW.document;
  // eslint-disable-next-line deprecation/deprecation
  if (document && typeof document.createElement === 'function') {
    try {
      const sandbox = document.createElement('iframe');
      sandbox.hidden = true;
      document.head.appendChild(sandbox);
      const contentWindow = sandbox.contentWindow;
      if (contentWindow && contentWindow[name]) {
        impl = contentWindow[name] ;
      }
      document.head.removeChild(sandbox);
    } catch (e) {
      // Could not create sandbox iframe, just use window.xxx
      build_esm_debug_build_DEBUG_BUILD && logger_logger.warn(`Could not create sandbox iframe for ${name} check, bailing to window.${name}: `, e);
    }
  }

  // Sanity check: This _should_ not happen, but if it does, we just skip caching...
  // This can happen e.g. in tests where fetch may not be available in the env, or similar.
  if (!impl) {
    return impl;
  }

  return (cachedImplementations[name] = impl.bind(types_WINDOW) );
}

/** Clear a cached implementation. */
function clearCachedImplementation(name) {
  cachedImplementations[name] = undefined;
}

/**
 * A special usecase for incorrectly wrapped Fetch APIs in conjunction with ad-blockers.
 * Whenever someone wraps the Fetch API and returns the wrong promise chain,
 * this chain becomes orphaned and there is no possible way to capture it's rejections
 * other than allowing it bubble up to this very handler. eg.
 *
 * const f = window.fetch;
 * window.fetch = function () {
 *   const p = f.apply(this, arguments);
 *
 *   p.then(function() {
 *     console.log('hi.');
 *   });
 *
 *   return p;
 * }
 *
 * `p.then(function () { ... })` is producing a completely separate promise chain,
 * however, what's returned is `p` - the result of original `fetch` call.
 *
 * This mean, that whenever we use the Fetch API to send our own requests, _and_
 * some ad-blocker blocks it, this orphaned chain will _always_ reject,
 * effectively causing another event to be captured.
 * This makes a whole process become an infinite loop, which we need to somehow
 * deal with, and break it in one way or another.
 *
 * To deal with this issue, we are making sure that we _always_ use the real
 * browser Fetch API, instead of relying on what `window.fetch` exposes.
 * The only downside to this would be missing our own requests as breadcrumbs,
 * but because we are already not doing this, it should be just fine.
 *
 * Possible failed fetch error messages per-browser:
 *
 * Chrome:  Failed to fetch
 * Edge:    Failed to Fetch
 * Firefox: NetworkError when attempting to fetch resource
 * Safari:  resource blocked by content blocker
 */
function getNativeImplementation_fetch(...rest) {
  return getNativeImplementation('fetch')(...rest);
}

/**
 * Get an unwrapped `setTimeout` method.
 * This ensures that even if e.g. Angular wraps `setTimeout`, we get the native implementation,
 * avoiding triggering change detection.
 */
function getNativeImplementation_setTimeout(...rest) {
  return getNativeImplementation('setTimeout')(...rest);
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/promisebuffer.js



/**
 * Creates an new PromiseBuffer object with the specified limit
 * @param limit max number of promises that can be stored in the buffer
 */
function makePromiseBuffer(limit) {
  const buffer = [];

  function isReady() {
    return limit === undefined || buffer.length < limit;
  }

  /**
   * Remove a promise from the queue.
   *
   * @param task Can be any PromiseLike<T>
   * @returns Removed promise.
   */
  function remove(task) {
    return buffer.splice(buffer.indexOf(task), 1)[0] || Promise.resolve(undefined);
  }

  /**
   * Add a promise (representing an in-flight action) to the queue, and set it to remove itself on fulfillment.
   *
   * @param taskProducer A function producing any PromiseLike<T>; In previous versions this used to be `task:
   *        PromiseLike<T>`, but under that model, Promises were instantly created on the call-site and their executor
   *        functions therefore ran immediately. Thus, even if the buffer was full, the action still happened. By
   *        requiring the promise to be wrapped in a function, we can defer promise creation until after the buffer
   *        limit check.
   * @returns The original promise.
   */
  function add(taskProducer) {
    if (!isReady()) {
      return rejectedSyncPromise(new SentryError('Not adding Promise because buffer limit was reached.'));
    }

    // start the task and add its promise to the queue
    const task = taskProducer();
    if (buffer.indexOf(task) === -1) {
      buffer.push(task);
    }
    void task
      .then(() => remove(task))
      // Use `then(null, rejectionHandler)` rather than `catch(rejectionHandler)` so that we can use `PromiseLike`
      // rather than `Promise`. `PromiseLike` doesn't have a `.catch` method, making its polyfill smaller. (ES5 didn't
      // have promises, so TS has to polyfill when down-compiling.)
      .then(null, () =>
        remove(task).then(null, () => {
          // We have to add another catch here because `remove()` starts a new promise chain.
        }),
      );
    return task;
  }

  /**
   * Wait for all promises in the queue to resolve or for timeout to expire, whichever comes first.
   *
   * @param timeout The time, in ms, after which to resolve to `false` if the queue is still non-empty. Passing `0` (or
   * not passing anything) will make the promise wait as long as it takes for the queue to drain before resolving to
   * `true`.
   * @returns A promise which will resolve to `true` if the queue is already empty or drains before the timeout, and
   * `false` otherwise
   */
  function drain(timeout) {
    return new SyncPromise((resolve, reject) => {
      let counter = buffer.length;

      if (!counter) {
        return resolve(true);
      }

      // wait for `timeout` ms and then resolve to `false` (if not cancelled first)
      const capturedSetTimeout = setTimeout(() => {
        if (timeout && timeout > 0) {
          resolve(false);
        }
      }, timeout);

      // if all promises resolve in time, cancel the timer and resolve to `true`
      buffer.forEach(item => {
        void resolvedSyncPromise(item).then(() => {
          if (!--counter) {
            clearTimeout(capturedSetTimeout);
            resolve(true);
          }
        }, reject);
      });
    });
  }

  return {
    $: buffer,
    add,
    drain,
  };
}



;// ../../node_modules/@sentry/core/build/esm/utils-hoist/ratelimit.js
// Intentionally keeping the key broad, as we don't know for sure what rate limit headers get returned from backend

const DEFAULT_RETRY_AFTER = 60 * 1000; // 60 seconds

/**
 * Extracts Retry-After value from the request header or returns default value
 * @param header string representation of 'Retry-After' header
 * @param now current unix timestamp
 *
 */
function parseRetryAfterHeader(header, now = Date.now()) {
  const headerDelay = parseInt(`${header}`, 10);
  if (!isNaN(headerDelay)) {
    return headerDelay * 1000;
  }

  const headerDate = Date.parse(`${header}`);
  if (!isNaN(headerDate)) {
    return headerDate - now;
  }

  return DEFAULT_RETRY_AFTER;
}

/**
 * Gets the time that the given category is disabled until for rate limiting.
 * In case no category-specific limit is set but a general rate limit across all categories is active,
 * that time is returned.
 *
 * @return the time in ms that the category is disabled until or 0 if there's no active rate limit.
 */
function disabledUntil(limits, dataCategory) {
  return limits[dataCategory] || limits.all || 0;
}

/**
 * Checks if a category is rate limited
 */
function isRateLimited(limits, dataCategory, now = Date.now()) {
  return disabledUntil(limits, dataCategory) > now;
}

/**
 * Update ratelimits from incoming headers.
 *
 * @return the updated RateLimits object.
 */
function updateRateLimits(
  limits,
  { statusCode, headers },
  now = Date.now(),
) {
  const updatedRateLimits = {
    ...limits,
  };

  // "The name is case-insensitive."
  // https://developer.mozilla.org/en-US/docs/Web/API/Headers/get
  const rateLimitHeader = headers && headers['x-sentry-rate-limits'];
  const retryAfterHeader = headers && headers['retry-after'];

  if (rateLimitHeader) {
    /**
     * rate limit headers are of the form
     *     <header>,<header>,..
     * where each <header> is of the form
     *     <retry_after>: <categories>: <scope>: <reason_code>: <namespaces>
     * where
     *     <retry_after> is a delay in seconds
     *     <categories> is the event type(s) (error, transaction, etc) being rate limited and is of the form
     *         <category>;<category>;...
     *     <scope> is what's being limited (org, project, or key) - ignored by SDK
     *     <reason_code> is an arbitrary string like "org_quota" - ignored by SDK
     *     <namespaces> Semicolon-separated list of metric namespace identifiers. Defines which namespace(s) will be affected.
     *         Only present if rate limit applies to the metric_bucket data category.
     */
    for (const limit of rateLimitHeader.trim().split(',')) {
      const [retryAfter, categories, , , namespaces] = limit.split(':', 5) ;
      const headerDelay = parseInt(retryAfter, 10);
      const delay = (!isNaN(headerDelay) ? headerDelay : 60) * 1000; // 60sec default
      if (!categories) {
        updatedRateLimits.all = now + delay;
      } else {
        for (const category of categories.split(';')) {
          if (category === 'metric_bucket') {
            // namespaces will be present when category === 'metric_bucket'
            if (!namespaces || namespaces.split(';').includes('custom')) {
              updatedRateLimits[category] = now + delay;
            }
          } else {
            updatedRateLimits[category] = now + delay;
          }
        }
      }
    }
  } else if (retryAfterHeader) {
    updatedRateLimits.all = now + parseRetryAfterHeader(retryAfterHeader, now);
  } else if (statusCode === 429) {
    updatedRateLimits.all = now + 60 * 1000;
  }

  return updatedRateLimits;
}



;// ../../node_modules/@sentry/core/build/esm/transports/base.js








const DEFAULT_TRANSPORT_BUFFER_SIZE = 64;

/**
 * Creates an instance of a Sentry `Transport`
 *
 * @param options
 * @param makeRequest
 */
function createTransport(
  options,
  makeRequest,
  buffer = makePromiseBuffer(
    options.bufferSize || DEFAULT_TRANSPORT_BUFFER_SIZE,
  ),
) {
  let rateLimits = {};
  const flush = (timeout) => buffer.drain(timeout);

  function send(envelope) {
    const filteredEnvelopeItems = [];

    // Drop rate limited items from envelope
    forEachEnvelopeItem(envelope, (item, type) => {
      const dataCategory = envelopeItemTypeToDataCategory(type);
      if (isRateLimited(rateLimits, dataCategory)) {
        const event = getEventForEnvelopeItem(item, type);
        options.recordDroppedEvent('ratelimit_backoff', dataCategory, event);
      } else {
        filteredEnvelopeItems.push(item);
      }
    });

    // Skip sending if envelope is empty after filtering out rate limited events
    if (filteredEnvelopeItems.length === 0) {
      return resolvedSyncPromise({});
    }

    const filteredEnvelope = envelope_createEnvelope(envelope[0], filteredEnvelopeItems );

    // Creates client report for each item in an envelope
    const recordEnvelopeLoss = (reason) => {
      forEachEnvelopeItem(filteredEnvelope, (item, type) => {
        const event = getEventForEnvelopeItem(item, type);
        options.recordDroppedEvent(reason, envelopeItemTypeToDataCategory(type), event);
      });
    };

    const requestTask = () =>
      makeRequest({ body: serializeEnvelope(filteredEnvelope) }).then(
        response => {
          // We don't want to throw on NOK responses, but we want to at least log them
          if (response.statusCode !== undefined && (response.statusCode < 200 || response.statusCode >= 300)) {
            debug_build_DEBUG_BUILD && logger_logger.warn(`Sentry responded with status code ${response.statusCode} to sent event.`);
          }

          rateLimits = updateRateLimits(rateLimits, response);
          return response;
        },
        error => {
          recordEnvelopeLoss('network_error');
          throw error;
        },
      );

    return buffer.add(requestTask).then(
      result => result,
      error => {
        if (error instanceof SentryError) {
          debug_build_DEBUG_BUILD && logger_logger.error('Skipped sending event because buffer is full.');
          recordEnvelopeLoss('queue_overflow');
          return resolvedSyncPromise({});
        } else {
          throw error;
        }
      },
    );
  }

  return {
    send,
    flush,
  };
}

function getEventForEnvelopeItem(item, type) {
  if (type !== 'event' && type !== 'transaction') {
    return undefined;
  }

  return Array.isArray(item) ? (item )[1] : undefined;
}



;// ../../node_modules/@sentry/browser/build/npm/esm/transports/fetch.js



/**
 * Creates a Transport that uses the Fetch API to send events to Sentry.
 */
function fetch_makeFetchTransport(
  options,
  nativeFetch = getNativeImplementation('fetch'),
) {
  let pendingBodySize = 0;
  let pendingCount = 0;

  function makeRequest(request) {
    const requestSize = request.body.length;
    pendingBodySize += requestSize;
    pendingCount++;

    const requestOptions = {
      body: request.body,
      method: 'POST',
      referrerPolicy: 'origin',
      headers: options.headers,
      // Outgoing requests are usually cancelled when navigating to a different page, causing a "TypeError: Failed to
      // fetch" error and sending a "network_error" client-outcome - in Chrome, the request status shows "(cancelled)".
      // The `keepalive` flag keeps outgoing requests alive, even when switching pages. We want this since we're
      // frequently sending events right before the user is switching pages (eg. when finishing navigation transactions).
      // Gotchas:
      // - `keepalive` isn't supported by Firefox
      // - As per spec (https://fetch.spec.whatwg.org/#http-network-or-cache-fetch):
      //   If the sum of contentLength and inflightKeepaliveBytes is greater than 64 kibibytes, then return a network error.
      //   We will therefore only activate the flag when we're below that limit.
      // There is also a limit of requests that can be open at the same time, so we also limit this to 15
      // See https://github.com/getsentry/sentry-javascript/pull/7553 for details
      keepalive: pendingBodySize <= 60000 && pendingCount < 15,
      ...options.fetchOptions,
    };

    if (!nativeFetch) {
      clearCachedImplementation('fetch');
      return rejectedSyncPromise('No fetch implementation available');
    }

    try {
      // TODO: This may need a `suppressTracing` call in the future when we switch the browser SDK to OTEL
      return nativeFetch(options.url, requestOptions).then(response => {
        pendingBodySize -= requestSize;
        pendingCount--;
        return {
          statusCode: response.status,
          headers: {
            'x-sentry-rate-limits': response.headers.get('X-Sentry-Rate-Limits'),
            'retry-after': response.headers.get('Retry-After'),
          },
        };
      });
    } catch (e) {
      clearCachedImplementation('fetch');
      pendingBodySize -= requestSize;
      pendingCount--;
      return rejectedSyncPromise(e);
    }
  }

  return createTransport(options, makeRequest);
}



;// ../../node_modules/@sentry/browser/build/npm/esm/stack-parsers.js


// This was originally forked from https://github.com/csnover/TraceKit, and was largely
// re - written as part of raven - js.
//
// This code was later copied to the JavaScript mono - repo and further modified and
// refactored over the years.


const OPERA10_PRIORITY = 10;
const OPERA11_PRIORITY = 20;
const CHROME_PRIORITY = 30;
const WINJS_PRIORITY = 40;
const GECKO_PRIORITY = 50;

function createFrame(filename, func, lineno, colno) {
  const frame = {
    filename,
    function: func === '<anonymous>' ? UNKNOWN_FUNCTION : func,
    in_app: true, // All browser frames are considered in_app
  };

  if (lineno !== undefined) {
    frame.lineno = lineno;
  }

  if (colno !== undefined) {
    frame.colno = colno;
  }

  return frame;
}

// This regex matches frames that have no function name (ie. are at the top level of a module).
// For example "at http://localhost:5000//script.js:1:126"
// Frames _with_ function names usually look as follows: "at commitLayoutEffects (react-dom.development.js:23426:1)"
const chromeRegexNoFnName = /^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i;

// This regex matches all the frames that have a function name.
const chromeRegex =
  /^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i;

const chromeEvalRegex = /\((\S*)(?::(\d+))(?::(\d+))\)/;

// Chromium based browsers: Chrome, Brave, new Opera, new Edge
// We cannot call this variable `chrome` because it can conflict with global `chrome` variable in certain environments
// See: https://github.com/getsentry/sentry-javascript/issues/6880
const chromeStackParserFn = line => {
  // If the stack line has no function name, we need to parse it differently
  const noFnParts = chromeRegexNoFnName.exec(line) ;

  if (noFnParts) {
    const [, filename, line, col] = noFnParts;
    return createFrame(filename, UNKNOWN_FUNCTION, +line, +col);
  }

  const parts = chromeRegex.exec(line) ;

  if (parts) {
    const isEval = parts[2] && parts[2].indexOf('eval') === 0; // start of line

    if (isEval) {
      const subMatch = chromeEvalRegex.exec(parts[2]) ;

      if (subMatch) {
        // throw out eval line/column and use top-most line/column number
        parts[2] = subMatch[1]; // url
        parts[3] = subMatch[2]; // line
        parts[4] = subMatch[3]; // column
      }
    }

    // Kamil: One more hack won't hurt us right? Understanding and adding more rules on top of these regexps right now
    // would be way too time consuming. (TODO: Rewrite whole RegExp to be more readable)
    const [func, filename] = extractSafariExtensionDetails(parts[1] || UNKNOWN_FUNCTION, parts[2]);

    return createFrame(filename, func, parts[3] ? +parts[3] : undefined, parts[4] ? +parts[4] : undefined);
  }

  return;
};

const chromeStackLineParser = [CHROME_PRIORITY, chromeStackParserFn];

// gecko regex: `(?:bundle|\d+\.js)`: `bundle` is for react native, `\d+\.js` also but specifically for ram bundles because it
// generates filenames without a prefix like `file://` the filenames in the stacktrace are just 42.js
// We need this specific case for now because we want no other regex to match.
const geckoREgex =
  /^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i;
const geckoEvalRegex = /(\S+) line (\d+)(?: > eval line \d+)* > eval/i;

const gecko = line => {
  const parts = geckoREgex.exec(line) ;

  if (parts) {
    const isEval = parts[3] && parts[3].indexOf(' > eval') > -1;
    if (isEval) {
      const subMatch = geckoEvalRegex.exec(parts[3]) ;

      if (subMatch) {
        // throw out eval line/column and use top-most line number
        parts[1] = parts[1] || 'eval';
        parts[3] = subMatch[1];
        parts[4] = subMatch[2];
        parts[5] = ''; // no column when eval
      }
    }

    let filename = parts[3];
    let func = parts[1] || UNKNOWN_FUNCTION;
    [func, filename] = extractSafariExtensionDetails(func, filename);

    return createFrame(filename, func, parts[4] ? +parts[4] : undefined, parts[5] ? +parts[5] : undefined);
  }

  return;
};

const geckoStackLineParser = [GECKO_PRIORITY, gecko];

const winjsRegex = /^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i;

const winjs = line => {
  const parts = winjsRegex.exec(line) ;

  return parts
    ? createFrame(parts[2], parts[1] || UNKNOWN_FUNCTION, +parts[3], parts[4] ? +parts[4] : undefined)
    : undefined;
};

const winjsStackLineParser = [WINJS_PRIORITY, winjs];

const opera10Regex = / line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i;

const opera10 = line => {
  const parts = opera10Regex.exec(line) ;
  return parts ? createFrame(parts[2], parts[3] || UNKNOWN_FUNCTION, +parts[1]) : undefined;
};

const opera10StackLineParser = [OPERA10_PRIORITY, opera10];

const opera11Regex =
  / line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i;

const opera11 = line => {
  const parts = opera11Regex.exec(line) ;
  return parts ? createFrame(parts[5], parts[3] || parts[4] || UNKNOWN_FUNCTION, +parts[1], +parts[2]) : undefined;
};

const opera11StackLineParser = [OPERA11_PRIORITY, opera11];

const defaultStackLineParsers = [chromeStackLineParser, geckoStackLineParser];

const stack_parsers_defaultStackParser = createStackParser(...defaultStackLineParsers);

/**
 * Safari web extensions, starting version unknown, can produce "frames-only" stacktraces.
 * What it means, is that instead of format like:
 *
 * Error: wat
 *   at function@url:row:col
 *   at function@url:row:col
 *   at function@url:row:col
 *
 * it produces something like:
 *
 *   function@url:row:col
 *   function@url:row:col
 *   function@url:row:col
 *
 * Because of that, it won't be captured by `chrome` RegExp and will fall into `Gecko` branch.
 * This function is extracted so that we can use it in both places without duplicating the logic.
 * Unfortunately "just" changing RegExp is too complicated now and making it pass all tests
 * and fix this case seems like an impossible, or at least way too time-consuming task.
 */
const extractSafariExtensionDetails = (func, filename) => {
  const isSafariExtension = func.indexOf('safari-extension') !== -1;
  const isSafariWebExtension = func.indexOf('safari-web-extension') !== -1;

  return isSafariExtension || isSafariWebExtension
    ? [
        func.indexOf('@') !== -1 ? (func.split('@')[0] ) : UNKNOWN_FUNCTION,
        isSafariExtension ? `safari-extension:${filename}` : `safari-web-extension:${filename}`,
      ]
    : [func, filename];
};



;// ../../node_modules/uuid/dist/esm-browser/native.js
const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);
/* harmony default export */ const esm_browser_native = ({
  randomUUID
});
;// ../../node_modules/uuid/dist/esm-browser/rng.js
// Unique ID creation requires a high quality random # generator. In the browser we therefore
// require the crypto API and do not support built-in fallback to lower quality random number
// generators (like Math.random()).
let getRandomValues;
const rnds8 = new Uint8Array(16);
function rng() {
  // lazy load so that environments that need to polyfill have a chance to do so
  if (!getRandomValues) {
    // getRandomValues needs to be invoked in a context where "this" is a Crypto implementation.
    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);

    if (!getRandomValues) {
      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');
    }
  }

  return getRandomValues(rnds8);
}
;// ../../node_modules/uuid/dist/esm-browser/stringify.js

/**
 * Convert array of 16 byte values to UUID string format of the form:
 * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX
 */

const byteToHex = [];

for (let i = 0; i < 256; ++i) {
  byteToHex.push((i + 0x100).toString(16).slice(1));
}

function unsafeStringify(arr, offset = 0) {
  // Note: Be careful editing this code!  It's been tuned for performance
  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434
  return byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]];
}

function stringify(arr, offset = 0) {
  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one
  // of the following:
  // - One or more input array values don't map to a hex octet (leading to
  // "undefined" in the uuid)
  // - Invalid input values for the RFC `version` or `variant` fields

  if (!validate(uuid)) {
    throw TypeError('Stringified UUID is invalid');
  }

  return uuid;
}

/* harmony default export */ const esm_browser_stringify = ((/* unused pure expression or super */ null && (0)));
;// ../../node_modules/uuid/dist/esm-browser/v4.js




function v4(options, buf, offset) {
  if (esm_browser_native.randomUUID && !buf && !options) {
    return esm_browser_native.randomUUID();
  }

  options = options || {};
  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`

  rnds[6] = rnds[6] & 0x0f | 0x40;
  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided

  if (buf) {
    offset = offset || 0;

    for (let i = 0; i < 16; ++i) {
      buf[offset + i] = rnds[i];
    }

    return buf;
  }

  return unsafeStringify(rnds);
}

/* harmony default export */ const esm_browser_v4 = (v4);
;// ./src/background/sentry.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */







const defaultSampleRate = 0.002;

let lastEvent;
let sampleRate = defaultSampleRate;
let scope;
let userId;
let reporterData = new PersistentState(
  "ewe:sentry",
  background_browser/* default */.A.storage.local
);

/**
 * Returns the last occurred event that got sent to Sentry.
 *
 * @returns {object?} A sentry generated event
 * @ignore
 */
function getLastEvent() {
  return lastEvent;
}

/**
 * Returns the Sentry user ID.
 *
 * @returns {string?} Sentry user ID
 * @ignore
 */
function getUserId() {
  return userId;
}

function reportErrorInternal(error) {
  if (scope) {
    scope.captureException(error);
  }
  else {
    // This is useful in local dev where Sentry auth hasn't been set up, but you
    // want to see the errors that would have been sent to Sentry if it were.
    console.warn(
      "Would have gone to Sentry:",
      {error}
    );
  }
}

/**
 * Sets the sample rate to limit how many events are being sent to Sentry.
 *
 * @param {number?} inputSampleRate - Sample rate (between 0 and 1)
 *    Set to `null` to reset to default sample rate.
 * @ignore
 */
function setSampleRate(inputSampleRate) {
  if (typeof inputSampleRate === "number") {
    sampleRate = inputSampleRate;
  }
  else {
    sampleRate = defaultSampleRate;
  }
}

/**
 * API to interact with the sentry module
 * @namespace sentry
 */
/* harmony default export */ const sentry = ({
  /**
   * Report error to Sentry
   *
   * @param {Error} error - Error to send to Sentry.
   */
  reportError(error) {
    reportErrorInternal(error);
  },

  /**
   * Initialize and start Sentry
   *
   * @param {string?} dsn - Sentry DSN URL
   * @param {string?} environment - Sentry environment. Normally "development"
   *                               or "production"
   * @param {string} hostVersion - Host extension version
   */
  async start(dsn, environment, hostVersion) {
    if (!dsn || !environment) {
      console.warn("Sentry is not initialized.");
      return;
    }

    const manifest = background_browser/* default */.A.runtime.getManifest();

    // filter integrations that use the global variable
    const integrations = getDefaultIntegrations({}).filter(
      defaultIntegration => {
        return ![
          "BrowserApiErrors",
          "TryCatch",
          "Breadcrumbs",
          "GlobalHandlers"
        ].includes(defaultIntegration.name);
      }
    );

    const client = new client_BrowserClient({
      dsn,
      environment: environment || "development",
      release: hostVersion,
      transport: fetch_makeFetchTransport,
      stackParser: stack_parsers_defaultStackParser,
      initialScope: {
        tags: {
          manifestVersion: manifest.manifest_version
        }
      },
      integrations,
      sampleRate,
      beforeSend(event) {
        lastEvent = event;
        return event;
      }
    });

    scope = new Scope();
    scope.setClient(client);
    client.init();

    self.addEventListener("error", event => {
      const {error} = event;
      if (!(error instanceof Error)) {
        return;
      }

      reportErrorInternal(error);
    });

    self.addEventListener("unhandledrejection", event => {
      const {reason} = event;
      if (!(reason instanceof Error)) {
        return;
      }

      reportErrorInternal(reason);
    });

    const state = await reporterData.getStateLoaded();
    userId = state.userId;
    if (!userId) {
      userId = esm_browser_v4();
      state.userId = userId;
      await reporterData.save();
    }
    scope.setUser({
      id: userId
    });
  }
});

// EXTERNAL MODULE: ./src/background/prefs.js
var prefs = __nested_webpack_require_678579__(35);
;// ./src/background/subscriptions.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */




















const ACCEPTABLE_ADS_ID = "0798B6A2-94A4-4ADF-89ED-BEC112FC4C7F";
const ACCEPTABLE_ADS_MV2_URL = "https://easylist-downloads.adblockplus.org/exceptionrules.txt";
const ACCEPTABLE_ADS_MV3_URL = "https://easylist-downloads.adblockplus.org/v3/full/exceptionrules.txt";

const ACCEPTABLE_ADS_PRIVACY_ID = "F12E0801-A00B-49DE-B1E3-52C9C4F90C8C";
const ACCEPTABLE_ADS_PRIVACY_MV2_URL = "https://easylist-downloads.adblockplus.org/exceptionrules-privacy-friendly.txt";
const ACCEPTABLE_ADS_PRIVACY_MV3_URL = "https://easylist-downloads.adblockplus.org/v3/full/exceptionrules-privacy-friendly.txt";

function convertSubscription(subscription) {
  const {
    id, disabled, downloadStatus, homepage, version, lastDownload, lastSuccess,
    softExpiration, expires, title, url, downloadable, downloadCount, diffURL,
    privileged, lastModified} = subscription;

  let updatable = (subscription instanceof subscriptionClasses.FullUpdatableSubscription ||
                   subscription instanceof subscriptionClasses.DiffUpdatableSubscription);

  return {
    id,
    enabled: !disabled,
    privileged,
    homepage,
    downloadable,
    updatable,
    diffURL,
    title,
    url,
    downloadCount,
    version,
    downloading: isSynchronizing(url),
    downloadStatus,
    lastSuccess,
    lastDownload,
    softExpiration,
    expires,
    lastModified
  };
}

function convertRecommendation({id, languages, title, requires, type, url,
                                mv2URL}) {
  if (!background_browser/* default */.A.declarativeNetRequest) {
    // In MV2 we have to switch the URL to be the mv2URL
    return {id, languages, title, requires, type, url: mv2URL};
  }

  return {id, languages, title, requires, type, url, mv2URL};
}

function getSubscription(url) {
  let subscription = subscriptionClasses.Subscription.fromURL(url);

  if (filterEngine.filterStorage.hasSubscription(subscription) &&
      subscription instanceof subscriptionClasses.RegularSubscription) {
    return subscription;
  }

  return null;
}

function makeListener(dispatch) {
  return subscription => {
    if (subscription instanceof subscriptionClasses.RegularSubscription) {
      dispatch(convertSubscription(subscription));
    }
  };
}

/**
 * @ignore
 */
async function hasAcceptableAdsEnabled() {
  const matches = [ACCEPTABLE_ADS_MV2_URL,
                   ACCEPTABLE_ADS_MV3_URL,
                   ACCEPTABLE_ADS_PRIVACY_MV2_URL,
                   ACCEPTABLE_ADS_PRIVACY_MV3_URL];

  for (let subscription of await getSubscriptions()) {
    if (subscription.enabled && matches.includes(subscription.url)) {
      return true;
    }
  }

  return false;
}

/**
 * @ignore
 * @param {string} uiLanguage UI language
 * @returns {{
*   chosenSubscriptions: Subscription[],
*   hasAA: boolean,
*   hasAntiCV: boolean,
*   hasCurrentLang: boolean,
*   hasDefaultLang: boolean
* }}
 */
function getDefaultSubscriptions(uiLanguage) {
  let hasCurrentLang = false;
  let hasDefaultLang = false;
  let hasAA = false;
  let hasAntiCV = false;

  if (!uiLanguage) {
    // https://bugs.chromium.org/p/chromium/issues/detail?id=1159438
    if (background_browser/* default */.A.i18n.getUILanguage) {
      uiLanguage = background_browser/* default */.A.i18n.getUILanguage();
    }
    else {
      uiLanguage = navigator.language;
    }
  }

  let currentLang = uiLanguage.split("-")[0];
  let defaultLang = (background_browser/* default */.A.runtime.getManifest()
                                    .default_locale || "en").split("_")[0];

  let adSubscriptions = [];
  let adSubscriptionsDefaultLang = [];
  let aaSubscriptions = [];
  let chosenSubscriptions = [];

  for (let subscription of (0,recommendations.recommendations)()) {
    switch (subscription.type) {
      case "ads":
        if (subscription.languages.includes(currentLang)){
          hasCurrentLang = true;
          adSubscriptions.push(subscription);
        }

        if (subscription.languages.includes(defaultLang)) {
          hasDefaultLang = true;
          adSubscriptionsDefaultLang.push(subscription);
        }
        break;

      case "circumvention":
        chosenSubscriptions.push(subscription);
        hasAntiCV = true;
        break;

      case "allowing":
        aaSubscriptions.push(subscription);
        hasAA = true;
        break;
    }
  }

  if (adSubscriptions.length == 0) {
    adSubscriptions = adSubscriptionsDefaultLang;
  }

  // if we have the preferred AA in the list - use it only,
  // otherwise use all listed AA subscriptions
  let preferredAASubscription = aaSubscriptions.find(
    it => it.id == ACCEPTABLE_ADS_ID);
  if (preferredAASubscription) {
    aaSubscriptions = [preferredAASubscription];
  }
  chosenSubscriptions.unshift(...aaSubscriptions);

  chosenSubscriptions.unshift(...adSubscriptions);

  return {chosenSubscriptions, hasAA, hasAntiCV,
          hasCurrentLang, hasDefaultLang};
}

function shouldAddDefaultSubscriptions() {
  let {filterStorage} = filterEngine;
  for (let subscription of filterStorage.subscriptions()) {
    if (background_browser/* default */.A.declarativeNetRequest) {
      // `DiffUpdatableSubscription` is a subclass of `CountableSubscription`
      if (subscription instanceof subscriptionClasses.CountableSubscription) {
        return false;
      }
    }

    if (subscription instanceof subscriptionClasses.FullUpdatableSubscription &&
      subscription.url != ACCEPTABLE_ADS_MV2_URL) {
      return false;
    }

    if (subscription instanceof subscriptionClasses.SpecialSubscription &&
        subscription.filterCount > 0) {
      return false;
    }
  }

  return true;
}

async function enableRuleset(rulesetId) {
  if (background_browser/* default */.A.declarativeNetRequest) {
    if (rulesetExistsInManifest(rulesetId)) {
      try {
        await background_browser/* default */.A.declarativeNetRequest.updateEnabledRulesets({
          enableRulesetIds: [rulesetId]
        });
      }
      catch (e) {
        // Update the error message with the rulesetId. Helpful for tracking
        // the Internal Error: https://issues.chromium.org/issues/367440970
        e.message = `${e.message} (enableRuleset: ${rulesetId})`;
        throw e;
      }
    }
  }
}

async function disableRuleset(rulesetId) {
  if (background_browser/* default */.A.declarativeNetRequest && rulesetExistsInManifest(rulesetId)) {
    await background_browser/* default */.A.declarativeNetRequest.updateEnabledRulesets({
      disableRulesetIds: [rulesetId]
    });

    await disableDynamicRules(rulesetId);

    let enableRuleIds =
      await background_browser/* default */.A.declarativeNetRequest.getDisabledRuleIds({
        rulesetId
      });
    await background_browser/* default */.A.declarativeNetRequest.updateStaticRules({
      rulesetId,
      enableRuleIds
    });
  }
}

/**
 * @ignore
 * @param {Array<*>} bundledSubscriptions Bundled subscriptions
 * @param {String} bundledSubscriptionsPath Bundled subscriptions path
 */
async function subscriptions_validate(bundledSubscriptions,
                               bundledSubscriptionsPath) {
  return subscriptions_validator_validate(
    bundledSubscriptions, bundledSubscriptionsPath);
}

async function remove(url) {
  let subscription = getSubscription(url);

  if (!subscription) {
    throw new Error(`Subscription does not exist: ${url}`);
  }

  if (background_browser/* default */.A.declarativeNetRequest) {
    if (subscription instanceof subscriptionClasses.FullUpdatableSubscription) {
      await disableDynamicRules(subscription.url);
    }
    else {
      await disableRuleset(subscription.id);
    }
  }

  filterEngine.filterStorage.removeSubscription(subscription);
}

async function migrateSubscriptionToMv3(subscription) {
  let subscriptionInfo = info.addonBundledSubscriptions.find(
    it => it.mv2_url == subscription.url);
  let url = subscriptionInfo ? subscriptionInfo.url : subscription.url;
  await add(url, {
    downloadCount: subscription.downloadCount,
    version: subscription.version
  });
  if (!subscription.enabled) {
    await disable(url);
  }
}

/**
 * @ignore
 */
async function recoverMigrationErrorSubscriptions() {
  let sucessfullyRecoveredIndices = [];

  let errors = prefs.Prefs.migration_subscription_errors;

  if (!Array.isArray(errors)) {
    errors = [];
  }

  for (let i = 0; i < errors.length; i++) {
    let migrationError = errors[i];

    try {
      await migrateSubscriptionToMv3(migrationError.subscription);
      sucessfullyRecoveredIndices.push(i);
    }
    catch (e) {
      // Nothing extra to do here. We just weren't able to recover this one.
    }
  }

  if (sucessfullyRecoveredIndices.length > 0) {
    errors = errors.filter((_e, index) =>
      !sucessfullyRecoveredIndices.includes(index));
    prefs.Prefs.migration_subscription_errors = errors;
  }
}

/**
 * @ignore
 */
async function updateSubscriptionInformation() {
  let removeUrls = [];

  for (let subscription of filterEngine.filterStorage.subscriptions()) {
    if (subscription instanceof subscriptionClasses.RegularSubscription) {
      let subscriptionInfo = info.addonBundledSubscriptions.find(
        x => x.url == subscription.url);

      if (subscription.hasBundledFilters) {
        if (subscriptionInfo) {
          // Existing bundled subscription, after the update it's still a
          // bundled subscription.

          try {
            let {filterText} = await getFilterText(subscriptionInfo);
            subscription.setFilterText(filterText);
          }
          catch (e) {
            // We already warn if the file doesn't exist on startup, so
            // we can ignore an error loading the bundled file here.
          }

          subscription.diffURL = subscriptionInfo.diff_url;
          subscription.title = subscriptionInfo.title;
          subscription.homepage = subscriptionInfo.homepage;
        }
        else {
          // Existing bundled subscription, but after the update it's been
          // removed from the extension's bundled subscriptions.

          removeUrls.push(subscription.url);
        }
      }
      else if (subscriptionInfo) {
        // Existing custom user subscription, after the update it's now bundled
        // so we should migrate to the bundled one.

        await remove(subscription.url);
        await add(subscriptionInfo.url, {
          downloadCount: subscription.downloadCount,
          version: subscription.version
        });
        if (!subscription.enabled) {
          await disable(subscriptionInfo.url);
        }
      }
    }
  }

  for (let url of removeUrls) {
    await remove(url);
  }
}

function getSubscriptions() {
  let result = [];

  for (let subscription of filterEngine.filterStorage.subscriptions()) {
    if (subscription instanceof subscriptionClasses.RegularSubscription) {
      result.push(convertSubscription(subscription));
    }
  }

  return result;
}

/**
 * @ignore
 * @param {boolean} url Is synchronizing for passed URL?
 * @returns {boolean}
 */
function isSynchronizing(url) {
  return filterEngine.filterStorage.synchronizer.isExecuting(url);
}

async function add(url, properties = {}) {
  if (!subscriptionClasses.Subscription.isValidURL(url)) {
    throw new Error(`Invalid subscription URL provided: ${url}`);
  }

  let {filterStorage} = filterEngine;

  let subscription = subscriptionClasses.Subscription.fromURL(url);

  if (background_browser/* default */.A.declarativeNetRequest && !subscription.downloadable) {
    let subscriptionInfo = info.addonBundledSubscriptions.find(x => x.url == url);
    let filterText;
    let params;
    try {
      ({filterText, params} = await getFilterText(subscriptionInfo));
    }
    catch (e) {
      // We already warn if the file doesn't exist on startup, so
      // we can ignore an error loading the bundled file here.
    }

    if (filterText) {
      subscription.setFilterText(filterText);
    }

    if (params) {
      subscription.setParams(params);
    }
  }

  if ("title" in properties) {
    subscription.title = properties.title;
  }
  if ("homepage" in properties) {
    subscription.homepage = properties.homepage;
  }
  if ("downloadCount" in properties) {
    subscription.downloadCount = properties.downloadCount;
  }
  if ("version" in properties) {
    subscription.version = properties.version;
  }
  if ("lastDownload" in properties) {
    subscription.lastDownload = properties.lastDownload;
  }
  if ("privileged" in properties) {
    subscription.privileged = properties.privileged;
  }
  if ("diffURL" in properties) {
    subscription.diffURL = properties.diffURL;
  }
  if ("lastModified" in properties) {
    subscription.lastModified = properties.lastModified;
  }

  filterStorage.addSubscription(subscription);

  if (background_browser/* default */.A.declarativeNetRequest && !subscription.downloadable) {
    await enableRuleset(subscription.id);
  }

  if (!subscription.lastDownload &&
      !isSynchronizing(subscription.url)) {
    filterStorage.synchronizer.execute(subscription);
  }
}

async function disable(url) {
  let subscription = getSubscription(url);

  if (!subscription) {
    throw new Error(`Subscription does not exist: ${url}`);
  }

  subscription.disabled = true;

  if (background_browser/* default */.A.declarativeNetRequest) {
    if (subscription instanceof subscriptionClasses.FullUpdatableSubscription) {
      await disableDynamicRules(subscription.url);
    }
    else {
      await disableRuleset(subscription.id);
    }
  }
}

function migrationNeeded() {
  if (background_browser/* default */.A.runtime.getManifest().manifest_version == 2) {
    return false;
  }

  for (let subscription of filterEngine.filterStorage.subscriptions()) {
    if (subscription.downloadable) {
      return true;
    }
  }

  return false;
}

/**
 * @ignore
 * @param {Subscription} subscription
 * @param {string} error
 */
function saveMigrationError(subscription, error) {
  let errors = prefs.Prefs.migration_subscription_errors;
  errors.push({subscription, error});
  prefs.Prefs.migration_subscription_errors = errors;
}

/**
 * @ignore
 */
async function migrate() {
  await initializer.start();

  if (!migrationNeeded()) {
    return;
  }

  let downloadables = await getSubscriptions();
  for (let downloadable of downloadables) {
    // some subscriptions are already `CountableSubscription`,
    // that were migrated from MV2 to MV3 without diff updated.
    if (!downloadable.downloadable) {
      continue;
    }

    await remove(downloadable.url); // MV2 URL
    try {
      migrateSubscriptionToMv3(downloadable);
    }
    catch (e) {
      sentry.reportError(e);
      saveMigrationError(downloadable, e.message);
    }
  }
}

/**
 * @ignore
 */
async function ensureDNRRulesetsEnabled() {
  if (background_browser/* default */.A.declarativeNetRequest) {
    let enabledItems = await background_browser/* default */.A.declarativeNetRequest.getEnabledRulesets();

    for (let subscription of filterEngine.filterStorage.subscriptions()) {
      if (!enabledItems.includes(subscription.id) && !subscription.disabled) {
        enableRuleset(subscription.id);
      }
    }
  }
}

/* harmony default export */ const subscriptions = ({
  /**
   * The URL of the Acceptable Ads subscription.
   * @type {string}
   */
  get ACCEPTABLE_ADS_URL() {
    return background_browser/* default */.A.declarativeNetRequest ?
      ACCEPTABLE_ADS_MV3_URL :
      ACCEPTABLE_ADS_MV2_URL;
  },

  /**
   * The UUID of the Acceptable Ads subscription.
   * @type {string}
   */
  ACCEPTABLE_ADS_ID,

  /**
   * The URL of the Acceptable Ads
   * without third-party tracking subscription.
   * @type {string}
   */
  get ACCEPTABLE_ADS_PRIVACY_URL() {
    return background_browser/* default */.A.declarativeNetRequest ?
      ACCEPTABLE_ADS_PRIVACY_MV3_URL :
      ACCEPTABLE_ADS_PRIVACY_MV2_URL;
  },

  /**
   * The UUID of the Acceptable Ads without third-party tracking subscription.
   * @type {string}
   */
  ACCEPTABLE_ADS_PRIVACY_ID,

  /**
   * A resource that provides a list of filters that decide what to block.
   * @typedef {Object} Subscription
   * @property {boolean} downloadable Indicates whether this subscription is
   *                                  downloaded and updated with full update
   *                                  over the network.
   * @property {boolean} updatable Indicates whether this subscription can be
   *                               updated with either full or diff update
   *                               over the network.
   * @property {?string} diffURL The URL of diff updates endpoint for
   *                             DiffUpdatableSubscriptions in MV3.
   * @property {?boolean} downloading Indicates whether the subscription is
   *                                  currently downloading (updatable
   *                                  subscriptions only).
   * @property {?string} downloadStatus The status of the most recent download
   *   attempt (updatable subscriptions only). It can have the following values:
   * - `synchronize_ok` - The subscription is perfectly fine.
   * - `synchronize_connection_error` - An error has occurred when trying to
   *   download the subscription.
   * - `synchronize_invalid_url` - The subscription URL is invalid.
   * - `synchronize_invalid_data` - The downloaded data does not have the
   *   expected format.
   * - `synchronize_too_many_filters` - A custom user subscription cannot
   *   update because there aren't enough dynamic rules available.
   * - `synchronize_dnr_error` - Downloading succeeded but, an error occurred
   *   while updating the custom subscription.
   * - `synchronize_diff_too_many_filters` - A diff updatable subscription
   *   cannot update because there aren't enough dynamic rules available.
   * - `synchronize_diff_too_old` - An error occurred when trying to download
   *   the diffs. The bundled subscription is too old.
   * - `synchronize_diff_error` - Downloading succeeded but, an error occurred
   *   while updating the diff updatable subscription.
   * - null - The initial download is not completed yet, or the subscription is
   *   not updatable.
   * @property {boolean} enabled Indicates whether this subscription will
   *                             be applied.
   * @property {?number} expires Epoch time when the subscription must be
   *                             downloaded (downloadable subscriptions
   *                             only).
   * @property {?string} homepage Website of the project that manages
   *                              this filter list.
   * @property {?number} lastDownload Epoch time when the subscription
   *                                  was last downloaded to your machine
   *                                  (downloadable subscriptions only).
   * @property {?string} lastModified String representation of the date when the
   *                                  filter list was last modified. In case of
   *                                  a DiffUpdatableSubscription, it is the
   *                                  base date used to calculate the diffs.
   * @property {?number} lastSuccess Epoch time when this subscription was last
   *                                 successfully downloaded (downloadable
   *                                 subscriptions only).
   * @property {?boolean} privileged True if this subscription can load filters
   *                                 that require privileged access, like
   *                                 snippets.
   * @property {?number} softExpiration Epoch time for the next attempt to
   *                                    download the subscription. Can be
   *                                    updated even if the subscription was
   *                                    not downloaded. If `expires` is closer,
   *                                    then `expires` prevail. (downloadable
   *                                    subscriptions only).
   * @property {string} title The display name of the subscription.
   *                          If not provided, falls back to the URL.
   * @property {string} url Where the subscription can be found in plain text.
   *                        Used a the identifier.
   * @property {string} version The version provided by the subscription's
   *                            metadata. Defaults to '0' if not provided. It
   *                            might be set if the subscription is not
   *                            downloadable.
   */

  /**
   * Creates a new subscription from a given URL. The subscription also gets
   * synchronised if it had not been previously downloaded.
   * @param {string} url The URL of the subscription to be added.
   * @param {object} [properties] An object containing properties to be
   *                              set on the new subscription.
   * @param {string} [properties.title] The display name of the subscription.
   *                                    If not provided, falls back to the URL.
   * @param {string} [properties.homepage] Website of the project that
   *                                       manages this filter list.
   * @param {boolean} [properties.privileged] Whether or not this subscription
   *                                          is allowed to run snippets.
   * @return {Promise}
   * @throws {Error} Invalid subscription URL provided.
   */
  add,

  /**
   * Adds a list of default subscriptions based on the provided bundled
   * subscriptions from the EWE.start() call.
   * Subscriptions are selected based on relevant language, type of
   * circumvention, and type of allowing.
   * @param {string} [uiLanguage] The relevant language used for determining
   * which subscriptions to add. If omitted or null, browser.i18n.getUILanguage
   * will be used. If browser.i18n.getUILanguage is unavailable,
   * navigator.language is used.
   * @param {bool} [force = false]
   * @throws {Error} No default language subscription
   * @throws {Error} No anti-circumvention subscription
   * @throws {Error} No allowing subscription
   * @see {@link #start|start()}
   * @return {Promise}
   */
  async addDefaults(uiLanguage, force = false) {
    let subscriptions = [];

    if (force || shouldAddDefaultSubscriptions()) {
      let defaultSubscriptions = getDefaultSubscriptions(uiLanguage);
      if (!defaultSubscriptions.hasDefaultLang) {
        throw Error("No default language subscription");
      }

      if (!defaultSubscriptions.hasAntiCV) {
        throw Error("No anti-circumvention subscription");
      }

      if (!defaultSubscriptions.hasAA) {
        throw Error("No allowing subscription");
      }

      subscriptions.push(...defaultSubscriptions.chosenSubscriptions);
    }

    for (let subscription of subscriptions) {
      await this.add(background_browser/* default */.A.declarativeNetRequest ?
        subscription.url : subscription.mv2URL);
    }
  },

  /**
   * Returns an array of subscription objects for all subscriptions that are
   * downloaded and updated over the network.
   * @return {Promise<Array<Subscription>>}
   * @deprecated Use {@link #getSubscriptions|getSubscriptions()} instead
   */
  async getDownloadable() {
    const subscriptions = getSubscriptions();
    return subscriptions.map(each => {
      delete each.updatable; // newly introduced
      return each;
    });
  },

  /**
   * Returns an array of subscription objects for all subscriptions that are
   * downloaded and updated over the network.
   * @return {Promise<Array<Subscription>>}
   */
  async getSubscriptions() {
    const subscriptions = getSubscriptions();
    return subscriptions.map(each => {
      delete each.downloadable; // deprecated
      return each;
    });
  },

  /**
   * Returns an array of subscription objects for a given filter.
   * @param {string} text The filter rule for which to look.
   * @return {Promise<Array<Subscription>>}
   */
  async getForFilter(text) {
    return text ? Array.from(filterEngine.filterStorage.subscriptions(text),
                             convertSubscription) : [];
  },

  /**
   * Returns the filter list of a given subscription URL.
   * @param {string} url The URL of the subscription.
   * @return {Promise<Array<Filter>>} Filters from the subscription.
   */
  async getFilters(url) {
    let subscription = getSubscription(url);
    if (subscription) {
      return Array.from(subscription.filterText(),
                        text => convertFilter(filterClasses.Filter.fromText(text)));
    }

    return [];
  },

  /**
   * Checks if a subscription has been added.
   * @param {string} url The URL of the subscription to be checked.
   * @return {Promise<boolean>} True if a subscription has been added.
   * @throws {TypeError} Invalid URL provided.
   */
  async has(url) {
    return getSubscription(new URL(url).href) != null;
  },

  /**
   * Enables a previously disabled subscription. Has no effect otherwise.
   * @param {string} url The URL of the subscription to be enabled.
   * @return {Promise}
   * @throws {Error} Subscription does not exist.
   */
  async enable(url) {
    let subscription = getSubscription(url);

    if (!subscription) {
      throw new Error(`Subscription does not exist: ${url}`);
    }

    if (background_browser/* default */.A.declarativeNetRequest) {
      await enableRuleset(subscription.id);
    }

    // Note: we must mark the subscription as enabled after
    // we actually finish with the restoring of dynamic rules
    // as marking subscription as enabled triggers the subscription update,
    // and the diff update processing which includes dynamic rules operations
    // can happen in parallel with restoring of dynamic rules here.
    subscription.disabled = false;
  },

  /**
   * Disables a subscription so that it doesn't have any
   * effect until it gets enabled again.
   * @param {string} url The URL of the subscription to be disabled.
   * @return {Promise}
   * @throws {Error} Subscription does not exist.
   */
  disable,

  /**
   * Removes the subscription for the given URL.
   * It will no longer have any effect.
   * @param {string} url The URL of the subscription to be removed.
   * @return {Promise}
   * @throws {Error} Subscription does not exist.
   */
  remove,

  /**
   * Forces a new version of a subscription with the
   * given URL to be downloaded immediately.
   * @param {?string} [url] The URL of the subscription to be synchronized.
   *   If omitted, all subscriptions will be synchronized.
   * @return {Promise} Resolves when syncing has been successfully
   *   triggered. Syncing may not be completed when this promise
   *   resolves.
   * @throws {Error} Subscription does not exist.
   */
  async sync(url) {
    let subscriptions = [];
    let {filterStorage} = filterEngine;

    if (url) {
      let subscription = getSubscription(url);

      if (!subscription) {
        throw new Error(`Subscription does not exist: ${url}`);
      }

      subscriptions.push(subscription);
    }
    else {
      for (let subscription of filterStorage.subscriptions()) {
        if (subscription instanceof subscriptionClasses.RegularSubscription) {
          subscriptions.push(subscription);
        }
      }
    }
    for (let subscription of subscriptions) {
      if (!isSynchronizing(subscription.url)) {
        filterStorage.synchronizer.execute(subscription, true);
      }
    }
  },

  /**
   * Defines the recommended filter subscriptions per language.
   * @typedef {Object} Recommendation
   * @property {string} id The identifier for this subscription.
   * @property {Array<string>} languages The languages that this recommendation
   *                                      would match to.
   * @property {string} title The display name of the recommended subscription.
   * @property {Array<string>} requires A list of subscriptions that this
   *                                    one depends on.
   * @property {Array<string>} includes A list of subscriptions that this
   *                                    one also contains.
   * @property {?boolean} privileged True if this subscription can load filters
   *                                 that require privileged access, like
   *                                 snippets.
   * @property {string} type The kind of content targeted by this
   *                         recommended subscription.
   * @property {string} url Where the recommended subscription can be found
   *                        in plain text.
   * @property {?string} mv2URL Where the recommended subscription can be found
   *                            for MV2 in plain text (Manifest V3 only).
   */

  /**
   * Returns an array of all recommended subscriptions.
   * @return {Array<Recommendation>}
   */
  getRecommendations() {
    return Array.from((0,recommendations.recommendations)(), convertRecommendation);
  },

  /**
   * Returns whether Acceptable Ads or Acceptable Ads Privacy subscription
   * is added and enabled.
   * @return {Boolean}
   */
  hasAcceptableAdsEnabled,

  /**
   * Returns an array of MV2 to MV3 migration errors and the related
   * subscription.
   * @return {Promise<Array<Subscription, string>>} The migration errors.
   */
  async getMigrationErrors() {
    let errors = prefs.Prefs.migration_subscription_errors;

    if (!Array.isArray(errors)) {
      errors = [];
    }

    return errors;
  },

  /**
   * Clears the migration errors.
   * @return {Promise}
   */
  async clearMigrationErrors() {
    prefs.Prefs.migration_subscription_errors = [];
  },

  /**
   * Emitted when a new subscription is added.
   * @event
   * @type {EventDispatcher<Subscription>}
   */
  onAdded: new EventDispatcher(dispatch => {
    filterNotifier.filterNotifier.on("subscription.added", makeListener(dispatch));
  }),

  /**
   * Emitted when any property of the subscription has changed.
   * The name of the specific property is provided as a string, except
   * when the subscription has been updated, where it will be null.
   *
   * @event
   * @type {EventDispatcher<Subscription, string>}
   */
  onChanged: new EventDispatcher(dispatch => {
    function makeChangeListener(property) {
      // This name differs between EWE and adblockpluscore.
      if (property == "disabled") {
        property = "enabled";
      }

      return subscription => {
        // the subscription might be already removed,
        // so we might need to skip emitting events
        if ((subscription instanceof subscriptionClasses.RegularSubscription) &&
             getSubscription(subscription.url)) {
          dispatch(convertSubscription(subscription), property);
        }
      };
    }

    let properties = ["disabled", "title", "homepage", "lastDownload",
                      "downloadStatus", "downloading", "privileged",
                      "lastModified"];
    for (let property of properties) {
      filterNotifier.filterNotifier.on(`subscription.${property}`,
                        makeChangeListener(property));
    }

    filterNotifier.filterNotifier.on("subscription.updated", makeChangeListener(null));
  }),

  /**
   * Emitted when a subscription is removed.
   * @event
   * @type {EventDispatcher<Subscription>}
   */
  onRemoved: new EventDispatcher(dispatch => {
    filterNotifier.filterNotifier.on("subscription.removed", makeListener(dispatch));
  })
});

// EXTERNAL MODULE: ./adblockpluscore/lib/filterStorage.js
var filterStorage = __nested_webpack_require_678579__(7631);
// EXTERNAL MODULE: ./adblockpluscore/lib/rsa.js
var rsa = __nested_webpack_require_678579__(9390);
;// ./src/background/browser-features.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */



let manifest = background_browser/* default */.A.runtime.getManifest();

function isRunningInServiceWorker() {
  return !!(manifest.background && manifest.background.service_worker);
}

;// ./src/background/sitekey.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */







const TOP_LEVEL_FRAME_ID = 0;

/**
 * All known sitekeys, that can be looked up by
 * `tabId`, and then by `frameId`, and then by `url`
 *  (`[tabId, [frameId, [url, {sitekey, signature}]]]]`).
 *
 * @type {Object}
 */
let sitekeys = new PersistentState("ewe:sitekeys", background_browser/* default */.A.storage.local);
let startupPromise;
let listeners = [];

// for testing purposes
function _getSitekeys() {
  return sitekeys;
}

function notifySitekey(tabId, frameId, url, sitekey) {
  for (let listener of listeners) {
    listener(tabId, frameId, url, sitekey);
  }
}

function notifyAllSitekeys() {
  for (let [tabId, framesMap] of Object.entries(sitekeys.getState())) {
    for (let [frameId, sitekeysMap] of Object.entries(framesMap)) {
      for (let [url, sitekeyInfo] of Object.entries(sitekeysMap)) {
        notifySitekey(tabId, frameId, url, sitekeyInfo.sitekey);
      }
    }
  }
}

function onHeadersReceived({tabId, frameId, url, responseHeaders, frameType}) {
  debugging_trace({tabId, frameId, url, responseHeaders, frameType});

  if (frameId == TOP_LEVEL_FRAME_ID &&
     (frameType == null || frameType == "outermost_frame")) {
    // "frameType" is supported starting Chromium 106+.
    // If it's a new navigation and top level frame headers received,
    // we don't need sitekeys for all the previous frames of the tab.
    clearTabSitekeys(tabId);
  }

  let sitekey = setSitekeyFromHeaders(tabId, frameId, url, responseHeaders);
  if (sitekey) {
    notifySitekey(tabId, frameId, url, sitekey);
  }
}

function addListener(listener) {
  listeners.push(listener);
}

/**
 * Gets the stored sitekey for a given frame. Sitekeys are retrieved
 * from the headers of main_frame and sub_frame requests (the html
 * documents in tabs and iframes).
 * @param {number} tabId Id of the tab the frame is on.
 * @param {number} frameId Id of the frame on the tab.
 * @param {string} url Url for the frame.
 * @return {string|null|undefined} The sitekey if we have it, null if
 *   we've processed headers for this frame but it didn't have a
 *   sitekey, undefined if we haven't seen any headers for this frame.
 */
function getSitekey(tabId, frameId, url) {
  let sitekeysForTab = sitekeys.getState()[tabId];
  if (!sitekeysForTab) {
    return null;
  }
  let sitekeysForFrame = sitekeysForTab[frameId];
  if (!sitekeysForFrame) {
    return null;
  }
  let sitekeyInfo = sitekeysForFrame[url];
  return sitekeyInfo ? sitekeyInfo.sitekey : null;
}

function _getSitekeySignature(tabId, frameId, url) {
  return sitekeys.getState()[tabId][frameId][url].signature;
}

function _setSitekey(tabId, frameId, url, sitekey, signature) {
  let sitekeysForTab = sitekeys.getState()[tabId];
  if (!sitekeysForTab) {
    sitekeysForTab = {};
    sitekeys.getState()[tabId] = sitekeysForTab;
  }

  let sitekeysForFrame = sitekeysForTab[frameId];
  if (!sitekeysForFrame) {
    sitekeysForFrame = {};
    sitekeysForTab[frameId] = sitekeysForFrame;
  }

  sitekeysForFrame[url] = {sitekey, signature};
}

function clearAllSitekeys(save = true) {
  sitekeys.clearState();
  if (save) {
    _saveSitekeys();
  }
}

function clearTabSitekeys(tabId) {
  delete sitekeys.getState()[tabId];
  _saveSitekeys();
}

/**
 * Use the headers from an onHeadersReceived event for an main_frame
 * and sub_frame request to update our sitekey map. This also
 * validates the sitekey before storing.
 *
 * If there is no sitekey, this inserts a null entry in the sitekey
 * map so you can differentiate between not having a sitekey because
 * there wasn't one in the headers and because the headers haven't
 * been received yet.
 * @param {number} tabId Id of the tab the frame is on.
 * @param {number} frameId Id of the frame on the tab.
 * @param {string} url Url for the frame.
 * @param {webRequest.HttpHeaders} headers the HTTP response headers
 *   to check for a sitekey. See {@link webRequest API
 *   https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/HttpHeaders}.
 * @return {string|null} The sitekey if it was found and is
 *   valid. Null if there was no valid sitekey.
 */
function setSitekeyFromHeaders(tabId, frameId, url, headers) {
  let sitekeyHeader = getSitekeyHeader(headers);
  let newSitekey = sitekeyHeader ? sitekeyHeader.sitekey : null;

  // If this sitekey is the same as the one we already have, we can
  // just leave the existing one. No need to do signature verification
  // since we've already checked this sitekey on this site.
  let existingSitekeyInfo = getSitekey(tabId, frameId, url);
  if (existingSitekeyInfo &&
      existingSitekeyInfo.sitekey &&
      newSitekey == existingSitekeyInfo.sitekey) {
    return existingSitekeyInfo.sitekey;
  }

  if (newSitekey && verifySitekey(newSitekey, sitekeyHeader.signature, url)) {
    _setSitekey(tabId, frameId, url, newSitekey, sitekeyHeader.signature);
    _saveSitekeys();
    return newSitekey;
  }

  // Inserting null here indicates that we've received headers for a
  // URL and it didn't have sitekeys (as opposed to not receiving
  // filters yet).
  _setSitekey(tabId, frameId, url, null, null);
  _saveSitekeys();
  return null;
}

function getSitekeyHeader(headers) {
  for (let header of headers) {
    if (header.name.toLowerCase() == "x-adblock-key" && header.value) {
      let parts = header.value.split("_");
      if (parts.length < 2) {
        return null;
      }

      return {
        sitekey: parts[0].replace(/=/g, ""),
        signature: parts[1]
      };
    }
  }
  return null;
}

function verifySitekey(sitekey, signature, url) {
  let urlObj = new URL(url);
  let data = [
    urlObj.pathname + urlObj.search,
    urlObj.host,
    navigator.userAgent
  ].join("\0");
  return (0,rsa/* verifySignatureSync */.TF)(sitekey, signature, data);
}

function verifySitekeys(_sitekeys) {
  for (let [tabId, framesMap] of Object.entries(_sitekeys)) {
    for (let [frameId, sitekeysMap] of Object.entries(framesMap)) {
      for (let [url, sitekeyInfo] of Object.entries(sitekeysMap)) {
        try {
          let verified = sitekeyInfo.sitekey === null ||
              verifySitekey(sitekeyInfo.sitekey, sitekeyInfo.signature, url);

          if (!verified) {
            delete sitekeysMap[url];
          }
        }
        catch (e) {
          delete sitekeysMap[url];
        }
      }
      if (Object.keys(sitekeysMap).length == 0) {
        delete framesMap[frameId];
      }
    }
    if (Object.keys(framesMap).length == 0) {
      delete _sitekeys[tabId];
    }
  }
}

async function _loadSitekeys(verify = true) {
  await sitekeys.load(verify ? verifySitekeys : null);
  notifyAllSitekeys();
}

function _doSaveSitekeys() {
  sitekeys.save();
}

function _saveSitekeys() {
  if (!isRunningInServiceWorker()) {
    return;
  }

  _doSaveSitekeys();
}

async function _awaitSavingComplete() {
  await sitekeys.awaitSavingComplete();
}

async function start() {
  if (!startupPromise) {
    background_browser/* default */.A.webRequest.onHeadersReceived.addListener(
      onHeadersReceived,
      {
        urls: ["http://*/*", "https://*/*"],
        types: ["main_frame", "sub_frame"]
      },
      ["responseHeaders"]
    );

    startupPromise = (isRunningInServiceWorker() ?
      _loadSitekeys() : Promise.resolve(null));
  }

  await startupPromise;
}

;// ./src/all/errors.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */

const ERROR_NO_CONNECTION = "Could not establish connection. " +
      "Receiving end does not exist.";
const ERROR_CLOSED_CONNECTION = "A listener indicated an asynchronous " +
      "response by returning true, but the message channel closed before a " +
      "response was received";
// https://bugzilla.mozilla.org/show_bug.cgi?id=1578697
const ERROR_MANAGER_DISCONNECTED = "Message manager disconnected";

/**
 * Reconstructs an error from a serializable error object
 *
 * @param {string} errorData - Error object
 *
 * @returns {Error} error
 */
function fromSerializableError(errorData) {
  const error = new Error(errorData.message);
  error.cause = errorData.cause;
  error.name = errorData.name;
  error.stack = errorData.stack;

  return error;
}

/**
 * Filters out `browser.runtime.sendMessage` errors to do with the receiving end
 * no longer existing.
 *
 * @param {Promise} promise The promise that should have "no connection" errors
 *   ignored. Generally this would be the promise returned by
 *   `browser.runtime.sendMessage`.
 * @return {Promise} The same promise, but will resolve with `undefined` instead
 *   of rejecting if the receiving end no longer exists.
 */
function ignoreNoConnectionError(promise) {
  return promise.catch(error => {
    if (typeof error == "object" &&
        (error.message == ERROR_NO_CONNECTION ||
         error.message == ERROR_CLOSED_CONNECTION ||
         error.message == ERROR_MANAGER_DISCONNECTED)) {
      return;
    }

    throw error;
  });
}

/**
 * Creates serializable error object from given error
 *
 * @param {Error} error - Error
 *
 * @returns {string} serializable error object
 */
function toSerializableError(error) {
  return {
    cause: error.cause instanceof Error ?
      toSerializableError(error.cause) :
      error.cause,
    message: error.message,
    name: error.name,
    stack: error.stack
  };
}

;// ./src/background/content-message-deferrer.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */







// It keeps lists of deferred messages after frame loading is started
// until "ewe:content-hello" message from the injected content script is
// received. Then the messages are sent and the according maps are removed.
// Object<tabId, Object<frameId,[message]>>
let deferredMessages = new PersistentState("ewe:deferred-content-messages");
let content_message_deferrer_startupPromise;

// for testing purposes
function _getDeferredMessages() {
  return deferredMessages;
}

function getDeferredMessages(tabId, frameId) {
  const frameIdToMessages = deferredMessages.getState()[tabId];
  if (!frameIdToMessages) {
    return null;
  }

  return frameIdToMessages[frameId];
}

async function sendMessage(tabId, frameId, message) {
  // We cannot send messages to tab, if we don't have a tab ID,
  // so there's nothing for us to do here
  if (tabId === background_browser/* default */.A.tabs.TAB_ID_NONE) {
    return;
  }

  const doSendMessage = () => {
    debugging_trace({tabId, frameId, message});
    return background_browser/* default */.A.tabs.sendMessage(tabId, message, {frameId});
  };

  // Retrying to fix a connection error on Chromium 90 and on Firefox
  await doSendMessage().catch(async e => {
    warn(`Failed to send the message: ${e.message}, retrying`);
    await ignoreNoConnectionError(doSendMessage());
  });
}

async function sendContentMessage(tabId, frameId, message) {
  debugging_trace({tabId, frameId, message});

  let messages = getDeferredMessages(tabId, frameId);
  if (messages) {
    // content script is not ready yet, deferring
    messages.push(message);
    debugging_debug(() => "Deferred the message: " + JSON.stringify(message));
    _saveDeferredMessages();
  }
  else {
    await sendMessage(tabId, frameId, message);
  }
}

function cleanDeferredMessages(tabId, frameId) {
  debugging_trace({tabId, frameId});

  let frameIdToMessages = deferredMessages.getState()[tabId];
  if (!frameIdToMessages) {
    return;
  }

  delete frameIdToMessages[frameId];
  if (Object.keys(frameIdToMessages).length == 0) {
    delete deferredMessages.getState()[tabId];
  }

  _saveDeferredMessages();
}

async function onContentHelloReceived(tabId, frameId) {
  debugging_trace({tabId, frameId});

  const messages = getDeferredMessages(tabId, frameId);
  if (!messages) {
    return;
  }

  cleanDeferredMessages(tabId, frameId);
  for (const message of messages) {
    await sendMessage(tabId, frameId, message);
  }

  _saveDeferredMessages();
}

function initialize(tabId, frameId) {
  let frameIdToMessages = deferredMessages.getState()[tabId];
  if (!frameIdToMessages) {
    frameIdToMessages = {};
    deferredMessages.getState()[tabId] = frameIdToMessages;
  }

  let messages = frameIdToMessages[frameId];
  if (!messages) {
    messages = [];
    frameIdToMessages[frameId] = messages;
  }
}

function onBeforeNavigate(details) {
  debugging_trace({details});
  initialize(details.tabId, details.frameId);
}

function onRemoved(tabId) {
  debugging_trace({tabId});

  delete deferredMessages.getState()[tabId];
  _saveDeferredMessages();
}

async function _loadDeferredMessages() {
  await deferredMessages.load();
}

function _doSaveDeferredMessages() {
  deferredMessages.save();
}

function _saveDeferredMessages() {
  if (!isRunningInServiceWorker()) {
    return;
  }

  _doSaveDeferredMessages();
}

async function content_message_deferrer_awaitSavingComplete() {
  await deferredMessages.awaitSavingComplete();
}

/**
 * Start the message deferrer module. In MV3, this must be called in
 * the first turn of the event loop.
 */
async function content_message_deferrer_start() {
  if (!content_message_deferrer_startupPromise) {
    background_browser/* default */.A.webNavigation.onBeforeNavigate.addListener(onBeforeNavigate);
    background_browser/* default */.A.tabs.onRemoved.addListener(onRemoved);

    content_message_deferrer_startupPromise = (isRunningInServiceWorker() ?
      _loadDeferredMessages() : Promise.resolve(null));
  }

  await content_message_deferrer_startupPromise;
}

;// ./src/background/domains-trimming.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */

const _UNKNOWN = "UNKNOWN";
const _MAX_DOMAIN_LENGTH = 25;

/**
 * Maintain a running size of a metrics dictionary
 * and only add a new domain if there is space,
 * otherwise increment metrics against an UNKNOWN domain.
 * @ignore
 */
class MaxLengthMetricsDict {
  /**
   * Initiate a MaxLengthMetricsDict
   *
   * @param {Number} maxLength The maximum length of the serialized string
   *                           in bytes. For example 90000 for 90Kb.
   * @param {Array<String>} metrics A list of names of metrics to collect
   *                                e.g. ["impression", "session"].
   * @param {?String|Number} space JSON formatting options (space).
   *                        (2 by default)
   * @throws {Error} "No metrics"
   */
  constructor(maxLength, metrics, space = 2) {
    if (!metrics || metrics.length == 0) {
      throw new Error("No metrics");
    }

    this.metrics = metrics;
    this.maxLength = maxLength;
    this.metricsDict = new Map();
    this.space = space;

    // line indentation length
    this.indentationLength = this.space ? (typeof this.space === "number" ?
      this.space :
      this.space.length) : 0;

    // line separator length
    this.newLineLength = this.indentationLength > 0 ? 1 : 0;

    // serialized object (result) length
    this.length = 9 +
      this.indentationLength * 2 + (this.indentationLength > 0 ? 1 : 0);
    // "{ds:[]}" with indentation

    this._calcMetricsLength();
  }

  _calcLineLength(property, value) {
    // __"property": value
    // _"i" : "UNKNOWN"
    return this.indentationLength * 3 +
      // * 2 as it's 3rd level of indentation: (array/object)
      2 + // quotes
      property.length +
      1 + // colon
      (this.indentationLength > 0 ? 1 : 0) + // space
      value.length;
  }

  _calcMetricsLength() {
    this.metricsLength = 0; // length of empty metric section
    for (const metric of this.metrics) {
      this.metricsLength += this._calcLineLength(metric, "0");
    }
    if (this.metrics.length > 1) {
      this.metricsLength += this.metrics.length - 1; // commas
      if (this.newLineLength > 0) {
        this.metricsLength += this.metrics.length - 1; // new lines
      }
    }
  }

  /**
   * Calculate how much larger in bytes the serialised object is going to be
   * with the addition of a new domain. This will vary based on the
   * serialisation. The estimate does not need to be perfect. We can have some
   * leeway by reducing the max length in bytes.
   *
   * @param {String} domain Domain
   * @returns {Number} Bytes
   */
  _calcAdditionalLength(domain) {
    /* The new domain will add a metrics object in this format, with <domain>
     * being per the domain passed into this function and <metrics> being the
     * serialized list of metrics as passed to the contructor:
     *
     * ,
     * {
     *   "i": "<domain>",
     *   <metrics>
     * }
     */
    return (this.metricsDict.size > 0 ?
        1 /* comma */ :
      this.newLineLength /* new line between [] */) +
      this.newLineLength +
      this.indentationLength * 2 + 1 + // opening curly bracket
      this.newLineLength + // \n
      this._calcLineLength("i", `"${domain}"`) +
      1 + // commas between `i` line and metrics lines
      this.newLineLength + // \n
      this.metricsLength + // metrics section length assuming all values are "0"
      this.indentationLength * 2 + this.newLineLength + // \n
      1; // closing curly bracket
  }

  /**
   * Adds or increments a metric for a given domain.
   * If there isn't enough space, it updates the metrics for the UNKNOWN domain.
   *
   * @param {String} domain Domain
   * @param {String} metric Metric. It must be known metrics
   * @param {Number} increment Increment
   * @throws {Error} "Unknown metric"
   */
  addMetric(domain, metric, increment) {
    if (!this.metrics.includes(metric)) {
      throw new Error("Unknown metric");
    }

    if (!this.metricsDict.has(domain)) {
      if (this.metricsDict.size == 0) {
        this.length += (this.indentationLength > 0 ? 1 : 0) * 2;
      }
      const additionalLength = this._calcAdditionalLength(domain);
      if ((domain.length > _MAX_DOMAIN_LENGTH) ||
          (this.length + additionalLength) > this.maxLength) {
        domain = _UNKNOWN;
        if (!this.metricsDict.has(domain)) {
          this.length += this._calcAdditionalLength(domain);
        }
      }
      else {
        this.length += additionalLength;
      }

      // init stats
      if (!this.metricsDict.has(domain)) {
        let stats = {};
        for (const eachMetric of this.metrics) {
          stats[eachMetric] = 0;
        }
        this.metricsDict.set(domain, stats);
      }
    }
    let stats = this.metricsDict.get(domain);
    stats[metric] += increment;
  }

  /**
   * Return formatted JSON length (precalculated)
   * @returns {Number} Formatted JSON length
   */
  getLength() {
    return this.length;
  }

  /**
   * Serialise the dictionary for transport.
   *
   * A proto format would likely be more storage efficient.
   * @returns {String} String representation of the dictionary
   */
  serialize() {
    let results = [];
    for (const [domain, stats] of this.metricsDict) {
      results.push({
        i: domain,
        ...stats
      });
    }

    const result = {ds: results};
    return JSON.stringify(result, null, this.space);
  }
}



;// ./src/background/cdp-processor.js



/**
 * CDP processor, that keeps a list of special domains,
 * that have higher priority, but processes all the domains.
 * It results into subdomain being treated as an independent domain group,
 * not a parent domain group.
 */
class SpecialDomainsProcessor {
  constructor() {
    this.restoreConfig();
  }

  restoreConfig() {
    this.setConfig([
      "search.yahoo.com"
    ]);
  }

  setConfig(config) {
    this.specialDomains = config;
  }

  shouldProcess(URL) {
    // ignore chrome://, about:// etc
    return (0,lib_url.isHttpOrHttps)(URL);
  }

  getSiteId(domain) {
    // special domains has higher priority
    for (const suffix of (0,lib_url.domainSuffixes)(domain)) {
      if (this.specialDomains.includes(suffix)) {
        return suffix;
      }
    }

    return (0,lib_url.getBaseDomain)(domain);
  }
}


;// ./src/background/callbacks.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */

let premiumStatusCallback;

/**
 * Set a callback
 * @param {function():Promise<boolean>} callback Callback
 * that returns premium status from web extension
 * @ignore
 */
function setPremiumStatusCallback(callback) {
  premiumStatusCallback = callback;
}

;// ./src/background/cdp.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */















/**
 * "Page view" event type. These are triggered whenever a new page is viewed,
 * both using a full page refresh or a single page app navigation.
 * @ignore
 */
const EVENT_PAGE_VIEW = "page_view";

/**
 * "Session started" event type. These are triggered when the user starts a new
 * session on a site. A session is considered over if there has been no activity
 * on that site for 30 minutes (configurable in Prefs).
 * @ignore
 */
const EVENT_SESSION_START = "session_start";

/**
 * "Blockthrough AAPV" event type. This is a page view, on which the
 * Blockthrough tag is loaded, detects the presence of an adblocker, and
 * indicates that Acceptable Ads is active.
 * @ignore
 */
const EVENT_BLOCKTHROUGH_ACCEPTABLE_ADS_PAGE_VIEW =
  "blockthrough_acceptable_ads_page_view";

// CDP events and pages user activity loading delay (for testing)
let _loadDelay = 0;

let deferredBrowserEvents = [];
let deferredBlockthroughEvents = [];

// incapsulates domain to site grouping logics
let processor = new SpecialDomainsProcessor();

/**
 * Put a message into CDP log
 * @param {string} message Message to log
 * @ignore
 */
function log(message) {
  debugging_debug(message);
}

/**
 * @param {Number} millis Number of milliseconds to delay data loading
 * @ignore
 */
function setLoadDelay(millis) {
  _loadDelay = millis;
}

/**
 * @param {Object} config Custom CDP config used for testing
 * @ignore
 */
function _setConfig(config) {
  processor.setConfig(config);
}

/**
 * Restore the default CDP configuration
 * @ignore
 */
function _restoreConfig() {
  if (processor) {
    processor.restoreConfig();
  }
}

// Map<String(event type), Map<String(siteId), Array<Number>(event timestamp)>>
let events;

async function removeUnusedLegacyEvents() {
  // ewe:cdp-blocking was previously used for counting onBlockableItem
  // events.
  await background_browser/* default */.A.storage.local.remove("ewe:cdp-blocking");
}

function initializeEvents() {
  events = new Map([
    [EVENT_PAGE_VIEW, new PersistentState("ewe:cdp-page-view", background_browser/* default */.A.storage.local)],
    [EVENT_SESSION_START, new PersistentState("ewe:cdp-session", background_browser/* default */.A.storage.local)],
    [
      EVENT_BLOCKTHROUGH_ACCEPTABLE_ADS_PAGE_VIEW,
      new PersistentState(
        "ewe:cdp-blockthrough-acceptable-ads-page-view", background_browser/* default */.A.storage.local
      )
    ]
  ]);
  for (const state of events.values()) {
    state.doDebounce();
  }
}

initializeEvents();

// Map<String(domain), Number(last user activity timestamp)>
let activity;

function initializeActivity() {
  activity = new PersistentState("ewe:cdp-activity", background_browser/* default */.A.storage.local);
  activity.doDebounce();
}

initializeActivity();

// Map<Listener, Object (filter options)>
let cdp_listeners = new Map();

/**
 * The CdpEventDispatcher class allows users to listen to CDP events.
 * @hideconstructor
 */
class CdpEventDispatcher {
  /**
  * @typedef {Object} CdpEventOptions
  * @param {string} [eventType]
  *   The optional filter for event types. Skip for all the event types.
  *   The supported event types are "page_view", "session_start" and "blocking".
  * @param {string?} [siteId]
  *   The optional filter for siteIds.
  *   Skip for all the siteIds.
  */

  /**
   * Attaches a listener function to a event. This listener will be called
   * when the CDP event is emitted if the feature is ON and user did not
   * opt out (`Prefs.cdp_opt_in_out`).
   * @param {function} listener The user defined function that will be called
   *                            once the specified event is emitted.
   * @param {CdpEventOptions} filterOptions The filtering conditions to apply
   *                                        when the event is emitted.
   * @example
   * // Logs all event types on all the tracked domains
   * EWE.reporting.onCdpItem.addListener(console.log);
   * @example
   * // Log all "session_start" items on "webext.com"
   * EWE.reporting.onCdpItem.addListener(
   *   console.log,
   *   {eventType: "session_start", siteId: "webext.com"}
   * );
   */
  addListener(listener, filterOptions = {}) {
    cdp_listeners.set(listener, filterOptions);
  }

  removeListener(listener) {
    cdp_listeners.delete(listener);
  }
}

async function emitEvent(eventType, siteId, timeStamp) {
  for (const [listener, filterOptions] of cdp_listeners) {
    if (filterOptions.eventType && filterOptions.eventType != eventType) {
      continue;
    }

    if (filterOptions.siteId && filterOptions.siteId != siteId) {
      continue;
    }

    await listener({eventType, siteId, timeStamp});
  }
}

async function count(eventType, siteId, timeStamp) {
  debugging_trace({eventType, siteId, timeStamp});
  log(`count(${eventType}, ${siteId}, ${timeStamp})`);

  const state = events.get(eventType);
  let counter = toCounter(state.getState()[siteId]);
  state.getState()[siteId] = counter + 1;

  if (isStateLoaded()) {
    await state.save();
  }

  await emitEvent(eventType, siteId, timeStamp);
}

/**
 * Wait for all the savings to be finished
 * @ignore
 */
async function cdp_awaitSavingComplete() {
  for (const state of events.values()) {
    await state.awaitSavingComplete();
  }
  await activity.awaitSavingComplete();
}

/**
 * Set the events. This is for use in testing, in real use the data is set by
 * listening to events.
 * @param {string} eventType The type of event (see EVENT_...)
 * @param {string} domain The domain to get events for
 * @param {Number|Array<Number>} counterOrTimestamps Events counter (Number)
 * on Phase 3 or event timestamps (Array<Number>) on Phase 2
 * @ignore
 */
async function setData(eventType, domain, counterOrTimestamps) {
  trace({eventType, domain});

  const state = events.get(eventType);
  state.getState()[domain] = counterOrTimestamps;
  await state.save();
}

/**
 * Set the events array. This is for use in testing, in real use the data is
 * set by listening to events.
 * @param {string} eventType The type of event (see EVENT_...)
 * @param {Array<string>} domains The domain to get events for
 * @param {Array<Number>} counters Events counter.
 *                                 The size must be equal to domains size.
 * @ignore
 */
async function setDataArray(eventType, domains, counters) {
  const state = events.get(eventType);
  for (let i = 0; i < domains.length; i++) {
    const domain = domains[i];
    const counter = counters[i];
    state.getState()[domain] = counter;
  }
  await state.save();
}

/**
 * Return the events
 * @param {string} eventType The type of event (see EVENT_...)
 * @param {string} siteId The domain to get events for
 * @returns {Number|Array<Number>} Events counter (Number) on Phase 3 or
 *                                 event timestamps on Phase 2
 * @ignore
 */
function getData(eventType, siteId) {
  trace({eventType, siteId});
  log(`getData(${eventType}, ${siteId})`);

  let counter = toCounter(events.get(eventType).getState()[siteId]);
  debug("counter=" + counter);
  return counter;
}

/**
 * @ignore
 */
async function clearActivity() {
  trace({});
  log("clearActivity");

  activity.clearState();
  await activity.save();
}

/**
 * @ignore
 */
async function clearExpiredActivity() {
  debugging_trace({});

  let state = activity.getState();
  let saveNeeded = false;

  for (const domain of Object.keys(state)) {
    const lastActivity = state[domain];
    const actuallyPassed = Date.now() - lastActivity;
    if (actuallyPassed > prefs.Prefs.cdp_session_expiration_interval) {
      // session expired
      debugging_debug(() => `Remove expired session for ${domain}`);
      delete state[domain];
      saveNeeded = true;
    }
  }

  if (saveNeeded) {
    await activity.save();
  }
}

/**
 * Delete all the events (of type)
 * @param {string?} eventType The optional type of event (see EVENT_...)
 * @param {string?} siteId The optional siteId to clear the events
 * @param {Number?} timeStamp The optional timestamp to remove the event,
 *                            that happened earlier than timestamp on Phase 2.

 * @returns {Promise}
 * @ignore
 */
async function clearData() {
  debugging_trace({});
  log("clearData()");

  for (const state of events.values()) {
    state.clearState();
    await state.save();
  }
}

let cdp_startupPromise;

function handleBrowserEvent(details, doMarkActive) {
  debugging_trace(details);

  if (isOptedOut()) {
    return;
  }

  if (!isStateLoaded()) {
    warn(() => `Deferring browser event: ${JSON.stringify(details)}`);
    deferredBrowserEvents.push({details, doMarkActive});
    return;
  }

  if (details.frameId != frame_state_TOP_LEVEL_FRAME_ID) {
    // Counting only outer-most frames
    return;
  }

  let url;
  try {
    url = new URL(details.url);
  }
  catch (e) {
    error(e.message);
    return;
  }
  if (!(0,lib_url.isHttpOrHttps)(url)) {
    warn(`Ignore ${(0,lib_url.stripQuery)(details.url)}`);
    return;
  }

  const siteId = processor.getSiteId(url.hostname);
  if (!siteId) {
    return;
  }

  log(`handleBrowserEvent() url*=${(0,lib_url.stripQuery)(details.url)}, hostname=${url.hostname}, siteId=${siteId}`);

  const newSession = isNewSession(siteId);
  const timeStamp = Date.now();
  count(EVENT_PAGE_VIEW, siteId, timeStamp);
  if (doMarkActive) {
    markActiveForSiteId(siteId);
  }
  if (newSession) {
    count(EVENT_SESSION_START, siteId, timeStamp);
  }
}

function onCommitted(details) {
  handleBrowserEvent(details, true);
}

function isNewSession(siteId) {
  debugging_trace({siteId});

  const lastActivity = activity.getState()[siteId];
  if (!lastActivity) {
    // new navigation to site, new session
    log(`New session for ${siteId}`);
    return true;
  }

  const actuallyPassed = Date.now() - lastActivity;
  if (actuallyPassed > prefs.Prefs.cdp_session_expiration_interval) {
    // session expired
    log(`Session expired for ${siteId} (lastActive=${lastActivity}, actuallyPassed=${actuallyPassed})`);
    return true;
  }

  // pending session
  log(`Pending session for ${siteId} (lastActive=${lastActivity}, actuallyPassed=${actuallyPassed})`);
  return false;
}

function isOptedOut() {
  return prefs.Prefs.cdp_opt_in_out == prefs.CDP_OPTED_OUT ||
         prefs.Prefs.cdp_opt_in_out == prefs.CDP_OPTED_OUT_BY_USER;
}

function onHistoryStateUpdated(details) {
  handleBrowserEvent(details, false);
}

async function markActiveForSiteId(siteId) {
  const now = Date.now();
  activity.getState()[siteId] = now;
  log(`markActiveForSiteId siteId=${siteId}, now=${now}`);
  await activity.save();
}

/**
 * Remember the last user activity time stamp
 * @param {Number} tabId Tab id
 * @param {Number} frameId Frame id
 * @ignore
 */
async function markActive(tabId, frameId) {
  debugging_trace({tabId, frameId});

  const frameInfo = getFrameInfo(tabId, frameId);
  if (!frameInfo) {
    return;
  }

  const siteId = processor.getSiteId(frameInfo.hostname);
  log(`markActive() hostname=${frameInfo.hostname}, siteId=${siteId}`);
  if (!siteId) {
    return;
  }

  const timeStamp = Date.now();
  const newSession = isNewSession(siteId);
  await markActiveForSiteId(siteId);
  if (newSession) {
    count(EVENT_PAGE_VIEW, siteId, timeStamp);
    count(EVENT_SESSION_START, siteId, timeStamp);
  }
}

/**
 * Checks whether tab domain is tracked for CDP events
 * @param {Number} tabId Tab id
 * @param {Number} frameId Frame id
 * @returns {boolean} Whether the tab domain is tracked for CDP events
 * @ignore
 */
function shouldNotifyActive(tabId, frameId) {
  debugging_trace({tabId, frameId});

  if (isOptedOut()) {
    return false;
  }

  let frameInfo = getFrameInfo(tabId, frameId);
  if (!frameInfo) {
    return false;
  }

  return processor.shouldProcess(new URL(frameInfo.url));
}

let dispatchBTAADetectionEvent = () => {};

/**
 * Count a Blockthrough Acceptable Ads detection event if it counts as an
 * Acceptable Ads Page View (BT AAPV).
 * @param {string} url The URL of the page where the BTAADetectionEvent was
 * emitted.
 * @param {Object} details Detail object from the BTAADetectionEvent, including
 * the `ab` and `acceptable` properties.
 * @ignore
 */
function countBTAADetectionEvent(url, details) {
  debugging_trace({url, details});

  if (isOptedOut()) {
    return;
  }

  if (!isStateLoaded()) {
    warn(() => `Deferring blockthrough acceptable ads page view event: ${JSON.stringify({url})}`);
    deferredBlockthroughEvents.push({url, details});
    return;
  }

  let parsedUrl;
  try {
    parsedUrl = new URL(url);
  }
  catch (e) {
    error(e.message);
    return;
  }
  if (!(0,lib_url.isHttpOrHttps)(parsedUrl)) {
    warn(`Ignore ${(0,lib_url.stripQuery)(parsedUrl)}`);
    return;
  }

  const siteId = processor.getSiteId(parsedUrl.hostname);
  if (!siteId) {
    return;
  }

  let isAAPV = details.ab && details.acceptable;

  dispatchBTAADetectionEvent({
    siteId,
    isAAPV,
    ab: details.ab,
    acceptable: details.acceptable,
    sessionId: details.sessionId
  });

  if (!isAAPV) {
    return;
  }

  log(`onBlockthroughAcceptableAdsPageView() url*=${(0,lib_url.stripQuery)(url)}, hostname=${parsedUrl.hostname}, siteId=${siteId}`);

  const timeStamp = Date.now();
  count(EVENT_BLOCKTHROUGH_ACCEPTABLE_ADS_PAGE_VIEW, siteId, timeStamp);
}

async function loadEvents() {
  for (const state of events.values()) {
    await state.load();
  }
}

function isStateLoaded() {
  for (const state of events.values()) {
    if (!state.loaded) {
      return false;
    }
  }
  return true;
}

function handleDeferredEvents() {
  if (deferredBrowserEvents.length > 0) {
    for (const eachEvent of deferredBrowserEvents) {
      handleBrowserEvent(eachEvent.details, eachEvent.doMarkActive);
    }
    warn(`Processed ${deferredBrowserEvents.length} deferred browser events`);
    deferredBrowserEvents = [];
  }

  if (deferredBlockthroughEvents.length > 0) {
    for (const eachEvent of deferredBlockthroughEvents) {
      countBTAADetectionEvent(eachEvent.url, eachEvent.details);
    }
    warn(`Processed ${deferredBlockthroughEvents.length} deferred blockthrough events`);
    deferredBlockthroughEvents = [];
  }
}

/**
 * @ignore
 */
function stop() {
  if (!cdp_startupPromise) {
    return;
  }

  cdp_startupPromise = null;

  browser.webNavigation.onCommitted.removeListener(onCommitted);
  browser.webNavigation.onHistoryStateUpdated.removeListener(
    onHistoryStateUpdated);

  initializeEvents();
  initializeActivity();
}

// event type to backend metric token mapping
const EVENT_TYPE_TO_METRIC = new Map([
  [EVENT_SESSION_START, "s"],
  [EVENT_PAGE_VIEW, "p"],
  [EVENT_BLOCKTHROUGH_ACCEPTABLE_ADS_PAGE_VIEW, "b"]
]);

/**
 * Format the "domain_stats" property with domains trimming
 *
 * @param {Array<String>} metrics Event types (the default value is sessions)
 * @param {Number} limit Payload length limit (the default value is 90Kb)
 * @returns {string} Formatted and trimmed "domain_stats" object
 * @ignore
 */
function getDomainStats(
  metrics = [
    EVENT_TYPE_TO_METRIC.get(EVENT_SESSION_START),
    EVENT_TYPE_TO_METRIC.get(EVENT_PAGE_VIEW),
    EVENT_TYPE_TO_METRIC.get(EVENT_BLOCKTHROUGH_ACCEPTABLE_ADS_PAGE_VIEW)
  ],
  limit = 90 * 1024) {
  const domains = new Set();

  // collect all the domains from required metrics events
  for (const [eventType, state] of events) {
    const metric = EVENT_TYPE_TO_METRIC.get(eventType);

    // report exactly the metrics needed from backend
    if (!metrics.includes(metric)) {
      continue;
    }

    for (const domain of Object.keys(state.getState())) {
      domains.add(domain);
    }
  }

  function getSessions(domain) {
    return toCounter(events.get(EVENT_SESSION_START).getState()[domain]);
  }

  // EVENT_SESSION_START is the most important metric
  const sortedDomains = Array.from(domains).sort((domain1, domain2) =>
    getSessions(domain2) - getSessions(domain1));

  // No JSON indentation to prefer more data instead of readability
  const dict = new MaxLengthMetricsDict(limit, metrics, null);

  for (const domain of sortedDomains) {
    for (const [eventType, state] of events) {
      const metric = EVENT_TYPE_TO_METRIC.get(eventType);

      // report exactly the metrics needed from backend
      if (!metrics.includes(metric)) {
        continue;
      }

      const arrayOrCounter = state.getState()[domain];
      dict.addMetric(domain, metric, toCounter(arrayOrCounter));
    }
  }

  return dict.serialize();
}

function toCounter(numberOrArray) {
  if (numberOrArray) {
    // In Phase 2 we saved an array of events (timestamps).
    // In Phase 3 we start tracking all the domains, so now
    // we save just a counter to reduce data amount to save.
    return Array.isArray(numberOrArray) ? numberOrArray.length : numberOrArray;
  }
  return 0;
}

/**
 * @ignore
 */
async function cdp_start() {
  if (!cdp_startupPromise) {
    cdp_startupPromise = (async() => {
      // assuming `Prefs` are initialized and loaded as
      // we use "user opted out" and "domains" settings

      // CDP must be disabled for Firefox by default
      // and enabled on other browsers. Also we can't override
      // the value if it was set by user intentionally.
      if ((0,info.isFirefox)() && prefs.Prefs.cdp_opt_in_out == prefs.CDP_OPTED_IN) {
        prefs.Prefs.cdp_opt_in_out = prefs.CDP_OPTED_OUT;
      }

      background_browser/* default */.A.webNavigation.onCommitted.addListener(onCommitted);
      background_browser/* default */.A.webNavigation.onHistoryStateUpdated.addListener(
        onHistoryStateUpdated);

      async function loadData() {
        await loadEvents();
        await activity.load();
        await clearExpiredActivity();
        handleDeferredEvents();
        await removeUnusedLegacyEvents();
      }

      if (_loadDelay == 0) {
        await loadData();
      }
      else {
        // for testing purpose
        setTimeout(loadData, _loadDelay);
      }
    })();
  }

  return cdp_startupPromise;
}

/* harmony default export */ const cdp = ({
  /**
   * Blockthrough Acceptable Ads detection details
   * @typedef {Object} BtaaDetectionDetails
   * @property {boolean} ab Indicates whether an ad blocker has been detected
   *   on the page
   * @property {boolean} acceptable Indicates whether Acceptable Ads has been
   *   detected on the page
   * @property {boolean} isAAPV Indicates whether it's an Acceptable Ads
   *   pageview
   * @property {string} sessionId Page session ID
   * @property {string} siteId Site ID
   */

  /**
   * Emitted when we process a BTAADetectionEvent.
   *
   * @event
   * @type {EventDispatcher<BtaaDetectionDetails>}
   */
  onBTAADetectionEvent: new EventDispatcher(
    dispatch => {
      dispatchBTAADetectionEvent = dispatch;
    },
    () => {
      dispatchBTAADetectionEvent = () => {};
    }),

  /**
   * Emitted when any CDP event happened.
   * @event
   * @param {string} eventType Event type
   *                           ("page_view", "session_start", "blocking")
   * @param {string} siteId SiteId
   * @param {Number} timestamp Event timestamp
   * @type {CdpEventDispatcher<{eventType: string,
   *                           siteId: string,
   *                           timeStamp: Number}>}
   */
  onCdpItem: new CdpEventDispatcher(),

  /**
   * Opt-out from CDP. Default is `true` (used opted out)
   * @param {boolean} value Pass `true` to opt-out
   * @returns {Promise} Promise that resolves when the setting is set.
   */
  async setOptOut(value) {
    prefs.Prefs.cdp_opt_in_out = (value ?
      prefs.CDP_OPTED_OUT_BY_USER : prefs.CDP_OPTED_IN_BY_USER);
  },

  /**
   * Check whether user is opted out from CDP
   * @returns {Promise<boolean>} Returns `true` is user opted out from CDP
   */
  async isOptOut() {
    return prefs.Prefs.cdp_opt_in_out == prefs.CDP_OPTED_OUT ||
           prefs.Prefs.cdp_opt_in_out == prefs.CDP_OPTED_OUT_BY_USER;
  },

  /**
  * Set the premium status callback to be called when CDP data
  * is to be uploaded.
  *
  * @param {function():Promise<boolean>} callback The user defined function
  *   that will be called to fill the premium status. This function should
  *   be called as soon as possible after EWE start. The callback must
  *   return a status of the license as a string.
  *   Options supported: true, false.
  */
  setPremiumStatusCallback: setPremiumStatusCallback
});

;// ./src/background/debugging.js
/* eslint-disable no-console */
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */














let defaultDebugOptions = {
  elemHide: false,
  cssProperties: [["background", "#e67370"], ["outline", "solid red"]],
  snippetsCssProperties: [
    ["background", "repeating-linear-gradient(to bottom, #e67370 0," +
     "#e67370 9px, white 9px, white 10px)"],
    ["outline", "solid red"]]
};

let debugging_listeners = [];

class DebugEventDispatcher {
  addListener(listener) {
    debugging_listeners.push(listener);
  }

  removeListener(listener) {
    let index = debugging_listeners.findIndex(existingListener =>
      existingListener == listener
    );

    if (index != -1) {
      debugging_listeners.splice(index, 1);
    }
  }
}

/**
 * @ignore
 */
const LOG_LEVEL_INFO = 0;

/**
 * @ignore
 */
const LOG_LEVEL_DEBUG = 1;

/**
 * @ignore
 */
const LOG_LEVEL_WARNING = 2;

/**
 * @ignore
 */
const LOG_LEVEL_ERROR = 3;

/**
 * @ignore
 */
const LOG_LEVEL_TRACE = 4;

/**
 * @ignore
 */
const LOG_COLOR_RED = "\x1b[31m";

/**
 * @ignore
 */
const LOG_COLOR_GREEN = "\x1b[32m";

/**
 * @ignore
 */
const LOG_COLOR_YELLOW = "\x1b[33m";

/**
 * @ignore
 */
const LOG_COLOR_BLUE = "\x1b[34m";

/**
 * @ignore
 */
const LOG_COLOR_MAGENTA = "\x1b[35m";

/**
 * @ignore
 */
const LOG_COLOR_CYAN = "\x1b[36m";

/**
 * @ignore
 */
const LOG_COLOR_BLUE_BRIGHT = "\x1b[94m";

const LEVEL_TO_COLOR = new Map([
  // no color for "LOG_LEVEL_INFO" level (using default)
  [LOG_LEVEL_DEBUG, LOG_COLOR_BLUE],
  [LOG_LEVEL_WARNING, LOG_COLOR_YELLOW],
  [LOG_LEVEL_ERROR, LOG_COLOR_RED],
  [LOG_LEVEL_TRACE, LOG_COLOR_BLUE]
]);

/**
 * Collects the debugging events until print() is called.
 */
class OnRequestLogger {
  constructor(listener) {
    this._wrappedListener = listener;
    this._events = [];
    let self = this;
    this._listener = event => {
      self._events.push(event);
    };
  }

  print() {
    for (let event of this._events) {
      this._wrappedListener(event);
    }
  }

  clear() {
    this._events = [];
  }

  getListener() {
    return this._listener;
  }
}

class ConsoleLogger {
  constructor(
    printTimeStamp = true,
    colorize = true,
    levelToColor = LEVEL_TO_COLOR
  ) {
    this._printTimeStamp = printTimeStamp;
    this._colorize = colorize;
    this._levelToColor = levelToColor;
    this._listener = ({message, level, timeStamp, color}) => {
      // Using default level color if no specific color is passed
      let _color = color || this._levelToColor.get(level);
      let colorizedMessage = this._colorize ?
        this.colorizeMessage(message, _color) :
        message;
      let output = this._printTimeStamp ?
        `${this.formatTime(timeStamp)}: ${colorizedMessage}` :
        colorizedMessage;

      switch (level) {
        case LOG_LEVEL_INFO:
          console.info(output);
          break;

        case LOG_LEVEL_WARNING:
          console.warn(output);
          break;

        case LOG_LEVEL_ERROR:
          console.error(output);
          break;

        case LOG_LEVEL_DEBUG:
        case LOG_LEVEL_TRACE:
          console.debug(output);
          break;
      }
    };
  }

  colorizeMessage(message, color) {
    return color ? `${color}${message}\x1b[0m` : message;
  }

  padStartZero(value, length = 2) {
    return String(value).padStart(length, "0");
  }

  formatTime(ts) {
    return this.padStartZero(ts.getHours()) + ":" +
      this.padStartZero(ts.getMinutes()) + ":" +
      this.padStartZero(ts.getSeconds()) + "." +
      this.padStartZero(ts.getMilliseconds(), 3);
  }

  getListener() {
    return this._listener;
  }
}

const CONSOLE_LOGGER = new ConsoleLogger();
const ON_REQUEST_CONSOLE_LOGGER =
  new OnRequestLogger(CONSOLE_LOGGER.getListener());

function getStackTrace() {
  const stack = new Error().stack.split("\n")
    .slice(3) // skip "Error" line, getStackTrace() and trace()
    .map(it => it
      .trim()
      .replace("at ", ""));
  return stack;
}

function getMessage(messageOrCallback) {
  return typeof messageOrCallback === "string" ?
    messageOrCallback :
    messageOrCallback();
}

function _trace(messageOrCallback, level, color) {
  if (debugging_listeners.length) {
    const message = getMessage(messageOrCallback);
    emitLogEvent({message, level, color});
  }
}

/**
 * @ignore
 */
function emitLogEvent({message, level, color, timeStamp = new Date()}) {
  for (let listener of debugging_listeners) {
    listener({message, level, timeStamp, color});
  }
}

/**
 * Outputs 'information' message
 * @ignore
 * @param {string|function} messageOrCallback Log message or a callback
 *                                            that returns log message
 * @param {*} color Log output color
 */
function debugging_info(messageOrCallback, color) {
  _trace(messageOrCallback, LOG_LEVEL_INFO, color);
}

/**
 * Outputs 'debug' message
 * @ignore
 * @param {string|function} messageOrCallback Log message or a callback
 *                                            that returns log message
 * @param {*} color Log output color
 */
function debugging_debug(messageOrCallback, color) {
  _trace(messageOrCallback, LOG_LEVEL_DEBUG, color);
}

/**
 * Outputs 'log' message
 * @ignore
 * @param {string|function} messageOrCallback Log message or a callback
 *                                            that returns log message
 * @param {*} color Log output color
 */
function debugging_log(messageOrCallback, color) {
  _trace(messageOrCallback, LOG_LEVEL_INFO, color);
}

/**
 * Outputs 'warning' message
 * @ignore
 * @param {string|function} messageOrCallback Log message or a callback
 *                                            that returns log message
 * @param {*} color Log output color
 */
function warn(messageOrCallback, color) {
  _trace(messageOrCallback, LOG_LEVEL_WARNING, color);
}

/**
 * Outputs 'error' message
 * @ignore
 * @param {string|function} messageOrCallback Log message or a callback
 *                                            that returns log message
 * @param {*} color Log output color
 */
function error(messageOrCallback, color) {
  _trace(messageOrCallback, LOG_LEVEL_ERROR, color);
}

/**
 * Outputs call track and the arguments
 * @ignore
 * @param {Object} args Call arguments
 * @param {*?} color Log output color
 */
function debugging_trace(args, color) {
  if (debugging_listeners.length) {
    let stackTrace = getStackTrace();
    stackTrace.push(JSON.stringify(args));
    const message = stackTrace.join("\n\t");
    _trace(message, LOG_LEVEL_TRACE, color);
  }
}

/**
 * @ignore
 */
let debugOptions;

const STORAGE_KEY = "ewe:debugOptions";
let savingPromise = Promise.resolve(null);
let storage = background_browser/* default */.A.storage.local;

/**
 * @ignore
 */
async function saveDebugOptions() {
  await savingPromise;

  let obj = {};
  obj[STORAGE_KEY] = JSON.stringify(debugOptions);
  savingPromise = storage.set(obj);
  await savingPromise;
}

/**
 * @ignore
 */
async function loadDebugOptions() {
  let obj = await storage.get(STORAGE_KEY);
  if (!obj || !obj[STORAGE_KEY]) {
    debugOptions = JSON.parse(JSON.stringify(defaultDebugOptions));
    return;
  }

  debugOptions = JSON.parse(obj[STORAGE_KEY]);
}

let initializationPromise;

/* harmony default export */ const debugging = ({
  /**
   * @ignore
   * Represents a debug log output entry.
   * @typedef {Object} LogEntry
   * @property {string} message Output message.
   * @property {number} level Log level.
   *                          Can be one of `LOG_LEVEL_...` values.
   * @property {Date} timeStamp Timestamp.
   * @property {string|null} color Specific color (ANSI terminal color).
   *                         Can be one of `LOG_COLOR_...` values or `null`.
   */

  /**
   * AddonInfo assigned during start.
   * @type {Object}
   * @property {string} name
   * @property {string} version
   */
  get addonInfo() {
    return {
      name: info.addonName,
      version: info.addonVersion,
      bundledSubscriptions: info.addonBundledSubscriptions,
      bundledSubscriptionsPath: info.addonBundledSubscriptionsPath,
      manifestVersion: info.manifestVersion
    };
  },

  /**
   * Causes elements targeted by element hiding, element hiding emulation,
   * or snippets to be highlighted instead of hidden.
   * @param {boolean} enabled Enables or disables debug mode.
   * @returns {Promise} A promise that will resolve once the settings
   *    are saved.
   */
  async setElementHidingDebugMode(enabled) {
    await this.start();
    debugOptions.elemHide = enabled;
    await saveDebugOptions();
  },

  /**
   * Updates the element hiding debug style.
   * @param {Array} cssProperties The css properties for
   *                              the debug element.
   * @param {Array} snippetsCssProperties The css properties for
   *                                      the debug snippet element.
   * @returns {Promise} A promise that will resolve once the settings
   *    are saved.
   */
  async setElementHidingDebugStyle(cssProperties, snippetsCssProperties) {
    await this.start();

    if (cssProperties) {
      debugOptions.cssProperties = cssProperties;
    }

    if (snippetsCssProperties) {
      debugOptions.snippetsCssProperties = snippetsCssProperties;
    }

    await saveDebugOptions();
  },

  /**
   * Resets all of the debug options to their default state.
   * @returns {Promise}
   */
  async clearDebugOptions() {
    await this.start();
    debugOptions = JSON.parse(JSON.stringify(defaultDebugOptions));
    await saveDebugOptions();
  },

  /**
   * @ignore
   * @param {string} text
   */
  async isInFilterStorage(text) {
    let contents = [];
    await io.IO.readFromFile(filterStorage.FilterStorage.sourceFile,
                          line => contents.push(line));
    return contents.some(line => line.includes(text));
  },

  /**
   * @ignore
   * Used internally. Returns a list of warnings in the context of validating
   * that a user has provided the appropriate files to the extension.
   * @param {Array<Recommendation>} [addonInfo.bundledSubscriptions]
   *   A list of subscriptions provided by the integrator.
   * @param {string} [addonInfo.bundledSubscriptionsPath]
   *   A path to subscription files provided by the integrator.
   * @return {Array<String>}
   */
  validateSubscriptions: subscriptions_validate,

  /**
   * @ignore
   * Used internally. Waits for any pending save actions to complete.
   * @return {Promise} The promise that is resolved once the filter storage
   *   module has saved all items.
   */
  async ensureEverythingHasSaved() {
    await prefs.awaitSavingComplete();
    await filterEngine.filterStorage.awaitSavingComplete();
    await _awaitSavingComplete();
    await content_message_deferrer_awaitSavingComplete();
    await cdp_awaitSavingComplete();
  },

  /**
   * @ignore
   * Initialize debugging.
   */
  async start() {
    if (!initializationPromise) {
      initializationPromise = loadDebugOptions();
    }
    return initializationPromise;
  },

  /**
   * @ignore
   * Return the promise for saving the debugging options.
   * @return {Promise}
   */
  async ensureSaved() {
    await savingPromise;
  },

  /**
   * Emitted when having debug output.
   * @event
   * @type {EventDispatcher<LogEntry>}
   */
  onLogEvent: new DebugEventDispatcher(),

  /**
   * Configurable logger (class) that outputs to console
   */
  ConsoleLogger,

  /**
   * Default logger instance that outputs to console
   */
  CONSOLE_LOGGER,

  /**
   * On request logger, that outputs to wrapped logger on `print()`
   */
  OnRequestLogger,

  /**
   * Default logger instance, that outputs to console on `print()`
   */
  ON_REQUEST_CONSOLE_LOGGER
});


;// ./src/background/dnr-filters.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */






















const ERROR_DISABLED_RULE_LIMIT_REACHED = "The number of disabled static " +
      "rules exceeds the disabled rule count limit.";

let highestRuleId = 1;

// Filter text to related details (enabled, rule ids, subscription ids, etc) map
let dynamicFilters = new Map();

let dnr_filters_initializationPromise;

let getRulesFromFilter = () => Promise.resolve({});
if (browser_polyfill.declarativeNetRequest) {
  getRulesFromFilter = (0,dnr/* createConverter */.x)({
    async isRegexSupported(regex) {
      let result = await browser_polyfill.declarativeNetRequest.isRegexSupported(regex);
      return result.isSupported;
    }
  });
}

async function disableDynamicRules(subscriptionId) {
  let subscriptionDynRules = findDynamicFilters(subscriptionId);
  let {removedDynamicFilters, removeRuleIds} = removeDynamicFilters(
    subscriptionId, [...subscriptionDynRules.keys()]);
  removedDynamicFilters.forEach(text => dynamicFilters.delete(text));
  storeDynamicFilters();
  await browser_polyfill.declarativeNetRequest.updateDynamicRules({removeRuleIds});
}

// returns a set of filters (texts) that relate to requested subscription
function findDynamicFilters(subscriptionId) {
  let result = new Set();

  for (let [text, detail] of dynamicFilters.entries()) {
    if (detail && detail.subscriptionIds) {
      let index = detail.subscriptionIds.indexOf(subscriptionId);
      if (index !== -1) {
        result.add(text);
      }
    }
  }

  return result;
}

function countRulesToRemove(subscriptionId, filtersToRemove) {
  let rulesCount = 0;
  for (let text of filtersToRemove) {
    let detail = dynamicFilters.get(text);
    if (detail && detail.ruleIds && detail.subscriptionIds &&
        detail.subscriptionIds.length == 1 &&
        detail.subscriptionIds[0] == subscriptionId) {
      rulesCount += detail.ruleIds.length;
    }
  }
  return rulesCount;
}

/**
 * Remove the dynamic filters for a subscription.
 *
 * @param {String} subscriptionId The subscription id.
 * @param {Array<String>} filters The filter text array to remove.
 *
 * @return {Object} The rules that were removed.
 *
 * @private
 */
function removeDynamicFilters(subscriptionId, filters) {
  let removedDynamicFilters = filters.filter(text => {
    let detail = dynamicFilters.get(text);
    if (detail && detail.subscriptionIds) {
      let index = detail.subscriptionIds.indexOf(subscriptionId);
      if (index !== -1) {
        detail.subscriptionIds.splice(index, 1);
      }
      return detail.subscriptionIds.length == 0;
    }
    return false;
  });

  let removeRuleIds = removedDynamicFilters.flatMap(text => {
    let detail = dynamicFilters.get(text);
    return detail ? detail.ruleIds : [];
  });

  return {removedDynamicFilters, removeRuleIds};
}

// URLs of the subscriptions that are currently updating
let dnrSubscriptionUpdating = new Set();

function isDnrSubscriptionUpdating(url) {
  return dnrSubscriptionUpdating.has(url);
}

function clearIsDnrSubscriptionUpdating() {
  dnrSubscriptionUpdating.clear();
}

/**
 * Update a DNR subscription using full update mechanism (similar to MV2).
 *
 * @param {Subscription} subscription The subscription updated.
 * @param {?object} lines The most recent filter text.
 *
 * @private
 */
async function dnrFullSubscriptionUpdate(subscription, lines) {
  debugging_debug("Full update started");

  lines.shift();

  let filterText = [];
  for (let line of lines) {
    line = filterClasses.Filter.normalize(line);
    if (line) {
      filterText.push(line);
    }
  }

  try {
    await _dnrFullSubscriptionUpdate(subscription, filterText);
  }
  catch (e) {
    error(`Failed to full update: ${e.message}`);
    if (e.type === ERROR_TOO_MANY_FILTERS) {
      subscription.downloadStatus = "synchronize_too_many_filters";
      e.rulesAvailable = await dynamicRulesAvailable();
    }
    else {
      sentry.reportError(e);
      subscription.downloadStatus = "synchronize_dnr_error";
    }
  }
  finally {
    debugging_debug("Full update finished");
  }
}

/**
 * Update a DNR subscription using diff mechanism.
 *
 * @param {Subscription} subscription The subscription updated.
 * @param {?object} updates The list of added and removed filter text. If
 *   falsey then nothing happens.
 *
 * @private
 */
async function dnrDiffSubscriptionUpdate(subscription, updates) {
  debugging_debug("Diff update started");
  if (isDnrSubscriptionUpdating(subscription.url)) {
    debugging_debug(`Already updating ${subscription.url}, skipping`);
    return;
  }
  dnrSubscriptionUpdating.add(subscription.url);

  try {
    await _dnrDiffSubscriptionUpdate(subscription, updates);
  }
  catch (e) {
    error(`Failed to diff update: ${e.message}`);
    if (e.type === ERROR_TOO_MANY_FILTERS){
      subscription.downloadStatus = "synchronize_diff_too_many_filters";
      e.rulesAvailable = await dynamicRulesAvailable();
    }
    else {
      sentry.reportError(e);
      subscription.downloadStatus = "synchronize_diff_error";
    }
  }
  finally {
    dnrSubscriptionUpdating.delete(subscription.url);
    debugging_debug("Diff update finished");
  }
}

async function removeSubscriptionsDynamicFilters() {
  for (let subscription of filterEngine.filterStorage.subscriptions()) {
    if (subscription instanceof subscriptionClasses.DiffUpdatableSubscription) {
      await disableDynamicRules(subscription.id);
    }
  }
}

async function enableAllDisabledStaticRules() {
  let disableRuleIds = [];
  for (let subscription of filterEngine.filterStorage.subscriptions()) {
    if (!subscription.hasBundledFilters || !subscription.id) {
      continue;
    }

    let enableRuleIds =
      await browser_polyfill.declarativeNetRequest.getDisabledRuleIds({
        rulesetId: subscription.id
      });

    await browser_polyfill.declarativeNetRequest.updateStaticRules({
      rulesetId: subscription.id,
      disableRuleIds,
      enableRuleIds
    });
  }
}

async function _dnrFullSubscriptionUpdate(subscription, filterText) {
  // With some path of code the filter engine might not be initialized
  // if the service worker got awaken.
  await initializer.start();

  let plannedChanges = await processFilterTexts(filterText, subscription.url);

  // All the dynamic filters for this subscription must be removed.
  // User subscriptions don't have an ID, using URL instead
  let knownDynamicFilters = findDynamicFilters(subscription.url);

  if (knownDynamicFilters.size != 0) {
    plannedChanges.relateToThisSubscription.forEach(
      text => knownDynamicFilters.delete(text));

    plannedChanges.relateToOtherSubscriptions.forEach(
      text => knownDynamicFilters.delete(text));
  }

  let dynamicFiltersToRemove = [...knownDynamicFilters.keys()];

  let removeRulesCount = countRulesToRemove(subscription.url,
                                            dynamicFiltersToRemove);
  if (plannedChanges.add.length - removeRulesCount >
      await dynamicRulesAvailable()) {
    throw new FilterError(ERROR_TOO_MANY_FILTERS);
  }

  // Adding subscription.id into existing filter
  for (let text of plannedChanges.relateToOtherSubscriptions) {
    let filter = dynamicFilters.get(text);
    filter.subscriptionIds.push(subscription.url);
  }

  // Removing subscription.id from existing filters that are removed.
  let {removeRuleIds} = removeDynamicFilters(
    subscription.url, dynamicFiltersToRemove);

  let subscriptionActive = (await subscriptions.has(subscription.url)) &&
      !subscription.disabled;
  let addRules = subscriptionActive ? plannedChanges.add : void 0;
  await browser_polyfill.declarativeNetRequest.updateDynamicRules(
    {addRules, removeRuleIds}
  );

  if (subscriptionActive) {
    plannedChanges.details.forEach(details => {
      let {useFilterEngine, filter, ruleIds, enabled} = details;

      setHighestRuleId(ruleIds);
      dynamicFilters.set(filter.text,
                         {ruleIds, useFilterEngine, enabled, metadata: {},
                          subscriptionIds: [subscription.url]});
    });
  }

  storeDynamicFilters();
  let update = subscription.updateFilterText(filterText);
  filterNotifier.filterNotifier.emit(
    "subscription.updated",
    subscription,
    update
  );
}

async function _dnrDiffSubscriptionUpdate(subscription, updates) {
  if (!browser_polyfill.declarativeNetRequest || !updates) {
    return;
  }

  // For now we only want to handle subscriptions that are in the
  // recommendations.
  if (!subscription.type) {
    return;
  }

  // Determine if we need to update static rules.
  let needUpdateStaticRules = !subscription.downloadable;

  let {added, removed} = updates;

  // With some path of code the filter engine might not be initialized
  // if the service worker got awaken.
  await initializer.start();

  let filterTextToRuleIdsMapper = null; // to static rules ids

  // The already disabled static rules ids.
  let disabledStaticRulesIds = null;

  // This will contain the text of all the dynamic filters for the subscription
  // and it will be updated to remove those that are still here.
  let knownDynamicFilters = new Set();

  if (needUpdateStaticRules) {
    filterTextToRuleIdsMapper = new mapper/* DnrMapper */.u(
      async() => await getSubscriptionRulesetMap(subscription.id)
    );
    disabledStaticRulesIds =
      await browser_polyfill.declarativeNetRequest.getDisabledRuleIds({
        rulesetId: subscription.id
      });

    // All the dynamic filters for this subscription must be removed.
    knownDynamicFilters = findDynamicFilters(subscription.id);
  }

  let plannedChanges = await processFilterTexts(
    added, subscription.id, filterTextToRuleIdsMapper);

  if (knownDynamicFilters.size != 0) {
    plannedChanges.relateToThisSubscription.forEach(
      text => knownDynamicFilters.delete(text));

    plannedChanges.relateToOtherSubscriptions.forEach(
      text => knownDynamicFilters.delete(text));
  }

  // A union of what is explicitly listed in `removed`
  // and dynamic filters that we had for this subscription previously
  // and not listed in `added` anymore
  let dynamicFiltersToRemove = removed.concat(...knownDynamicFilters.keys());
  let removeRulesCount = countRulesToRemove(subscription.url,
                                            dynamicFiltersToRemove);

  if (plannedChanges.add.length - removeRulesCount >
      await dynamicRulesAvailable()) {
    throw new FilterError(ERROR_TOO_MANY_FILTERS);
  }

  if (needUpdateStaticRules) {
    if (removed.length > 0) {
      await filterTextToRuleIdsMapper.load();
    }

    let disableRuleIds = removed.flatMap(text => {
      let ids = filterTextToRuleIdsMapper.get(text);
      return ids ? ids : [];
    });
    // Empty array cause exceptions. Make it `undefined`.
    if (disableRuleIds.length == 0) {
      disableRuleIds = void 0;
    }

    let enableRuleIds = [...plannedChanges.staticRulesToEnable];
    // Reenable the disabled rules to reset the state:
    // `browser.declarativeNetRequest.updateStaticRules` will handle this
    // properly.
    enableRuleIds.push(...disabledStaticRulesIds);

    try {
      await browser_polyfill.declarativeNetRequest.updateStaticRules({
        rulesetId: subscription.id,
        disableRuleIds,
        enableRuleIds
      });
    }
    catch (e) {
      if (e.message == ERROR_DISABLED_RULE_LIMIT_REACHED) {
        // This check is based on the error message because there doesn't
        // currently seem to be another appropriate field it identify this case.
        throw new FilterError(ERROR_TOO_MANY_FILTERS);
      }
      throw e;
    }
  }

  // Adding subscription.id into existing filter
  for (let text of plannedChanges.relateToOtherSubscriptions) {
    let filter = dynamicFilters.get(text);
    filter.subscriptionIds.push(subscription.id);
  }

  // Removing subscription.id from existing filters that are removed.
  let {removedDynamicFilters, removeRuleIds} =
      removeDynamicFilters(subscription.id, dynamicFiltersToRemove);

  // Empty array cause exceptions. Make it `undefined`.
  if (removeRuleIds.length == 0) {
    removeRuleIds = void 0;
  }

  let subscriptionActive = (await subscriptions.has(subscription.url)) &&
      !subscription.disabled;
  await browser_polyfill.declarativeNetRequest.updateDynamicRules(
    {addRules: subscriptionActive ? plannedChanges.add : void 0, removeRuleIds}
  );

  removedDynamicFilters.forEach(text => dynamicFilters.delete(text));

  if (subscriptionActive) {
    plannedChanges.details.forEach(details => {
      let {useFilterEngine, filter, ruleIds, enabled} = details;

      setHighestRuleId(ruleIds);
      dynamicFilters.set(filter.text,
                         {ruleIds, useFilterEngine, enabled, metadata: {},
                          subscriptionIds: [subscription.id]});
    });
  }

  await applyFilterTextUpdate(subscription, updates);
  storeDynamicFilters();
}

/**
 * Apply the filter text update to the subscription.
 *
 * @param {object} subscription The subscription to apply the update to
 * @param {FilterDiffs} updates The update to apply.
 */
async function applyFilterTextUpdate(subscription, updates) {
  let {filterText} = await getFilterText(subscription);

  for (let removeText of updates.removed) {
    let index = filterText.indexOf(removeText);
    if (index >= 0) {
      filterText.splice(index, 1);
    }
  }

  for (let addText of updates.added) {
    filterText.push(addText);
  }

  let storageUpdate = subscription.updateFilterText(filterText);
  filterNotifier.filterNotifier.emit("subscription.updated", subscription, storageUpdate);
}

function validateFilter(filter) {
  if (filter instanceof filterClasses.InvalidFilter) {
    return new FilterError("invalid_filter", filter.reason, filter.option);
  }

  if ((0,filterClasses.isActiveFilter)(filter) && filter.domains) {
    for (let domain of filter.domains.keys()) {
      if (domain && !(0,lib_url.isValidHostname)(domain)) {
        return new FilterError("invalid_domain", domain);
      }
    }
  }

  return null;
}

async function removeAllDynamicFilters() {
  if (!browser_polyfill.declarativeNetRequest) {
    return;
  }

  dynamicFilters = new Map();
  prefs.Prefs.dynamic_filters = [];

  let rules = await browser_polyfill.declarativeNetRequest.getDynamicRules();
  if (rules.length == 0) {
    return;
  }

  await browser_polyfill.declarativeNetRequest.updateDynamicRules({
    removeRuleIds: rules.map(r => r.id)
  });

  return rules;
}

function setHighestRuleId(ruleIds) {
  if (!ruleIds) {
    return;
  }

  for (let id of ruleIds) {
    if (highestRuleId < id) {
      highestRuleId = id;
    }
  }
}

function storeDynamicFilters() {
  prefs.Prefs.dynamic_filters = Array.from(dynamicFilters);
}

function clearRulesetUpdates() {
  // This isn't used anymore. It can be cleared out to save storage.
  prefs.Prefs.ruleset_updates = [];
}

function dnr_filters_init() {
  if (!dnr_filters_initializationPromise) {
    dnr_filters_initializationPromise = (async() => {
      if (!browser_polyfill.declarativeNetRequest) {
        return;
      }

      let dynamicFilterArray = prefs.Prefs.dynamic_filters;
      if (Array.isArray(dynamicFilterArray) &&
          dynamicFilterArray.length > 0) {
        dynamicFilters = new Map(dynamicFilterArray);
      }
      else {
        // DNR rules persist after the extension is uninstalled. The same cannot
        // be said for storage. To be safe, if we have no record of dynamic
        // filters let's clear any DNR rules too.
        await removeAllDynamicFilters();
      }

      for (let {ruleIds} of dynamicFilters.values()) {
        setHighestRuleId(ruleIds);
      }

      filterNotifier.filterNotifier.on("subscription.diffReceived", dnrDiffSubscriptionUpdate);
      filterNotifier.filterNotifier.on("subscription.fullUpdateReceived", dnrFullSubscriptionUpdate);
    })();
  }

  return dnr_filters_initializationPromise;
}

async function getRules(filter) {
  let ruleIds = [];
  let filterRules = [];

  // "sitekey" option is not supported in DNR
  if (filter instanceof filterClasses.URLFilter && !filter.sitekeys) {
    let result = await getRulesFromFilter(filter.text);
    if (result.name == "Error") {
      let {option} = result.detail;
      throw new FilterError(result.message, result.detail.text, option);
    }

    for (let rule of result) {
      let id = ++highestRuleId;
      rule.id = id;
      ruleIds.push(id);
      filterRules.push(rule);
    }
  }

  return {filterRules, ruleIds};
}

/**
 * @typedef {Object} FilterDetails
 * @property {Filter} filter The filter object
 * @property {Array.<number>} ruleIds The rule ids for the filter in
 *   the dynamic ruleset.
 * @property {boolean} enabled Whether the filter is enabled or
 *   disabled.
 *
 * @typedef {Object} ProcessedFilters
 * @property {Array.<Object>} add Rules to add to the dynamic ruleset
 * @property {Array.<Error>} invalid Invalid filters
 * @property {Array.<string>} relateToThisSubscription Filters that exists.
 * @property {Array.<string>} relateToOtherSubscriptions Filters that
 *   exist on other subscriptions.
 * @property {Array.<number>} staticRulesToEnable Static rules to enable.
 * @property {Array.<FilterDetails>} details Details of the filters.
 */
/**
 * Process the filter texts.
 *
 * @param {Array.<string>} texts The array of filter texts.
 * @param {?string} subscriptionId The optional subscription ID.
 * @param {?mapper} mapper The DNR mapper for the subscription. If null then
 *   this doesn't check for static rules to enable or disable.
 * @param {?boolean} filtersWillBeEnabled Some filters are prepared differently
 * if they are disabled according to the filterState, for example not generating
 * DNR rules. If this is true, then the filters are going to be enabled as part
 * of adding them, and so checking the filterState should be skipped.
 *
 * @ignore
 * @returns {Promise<ProcessedFilters>} The processed filters.
 */
async function processFilterTexts(texts, subscriptionId = null, mapper = null,
                                  filtersWillBeEnabled = false) {
  let details = [];
  let add = [];
  let invalid = [];

  // known filter texts that relate to this subscription
  let relateToThisSubscription = [];

  // known filter texts that relate to other subscriptions
  let relateToOtherSubscriptions = [];

  let staticRulesToEnable = [];
  let processedFilterTexts = new Set();

  texts = texts.map(text => filterClasses.Filter.normalize(text));
  for (let text of texts) {
    // skip processing possible filter text duplicates
    if (processedFilterTexts.has(text)) {
      continue;
    }

    let filterDetails = dynamicFilters.get(text);
    let filterIsKnown = (filterDetails != null);
    if (filterDetails) {
      let subscriptionIds = filterDetails.subscriptionIds || [null];
      if (subscriptionIds.includes(subscriptionId)) {
        relateToThisSubscription.push(text);
      }
      else {
        relateToOtherSubscriptions.push(text);
      }
    }

    if (mapper) {
      await mapper.load();
      let staticRuleIds = mapper.get(text);
      if (staticRuleIds) {
        staticRulesToEnable.push(...staticRuleIds);
        filterIsKnown = true;
      }
    }

    if (filterIsKnown) {
      continue;
    }

    let filter = filterClasses.Filter.fromText(text);
    let filterError = validateFilter(filter);
    if (filterError) {
      invalid.push(filterError);
      continue;
    }

    if (!filtersWillBeEnabled &&
        !filterEngine.filterStorage.filterState.isEnabled(text)) {
      details.push({filter, ruleIds: [], enabled: false});
    }
    else {
      try {
        let {filterRules, ruleIds} = await getRules(filter);
        if (filterRules) {
          add.push(...filterRules);
        }
        details.push({filter, ruleIds, enabled: true});
      }
      catch (e) {
        invalid.push(e);
      }
    }

    processedFilterTexts.add(text);
  }

  return {
    add,
    invalid,
    relateToThisSubscription,
    relateToOtherSubscriptions,
    staticRulesToEnable,
    details
  };
}

const RULES_LIMIT_KEY = "EWE:Dynamic_Rules_Limit";

/**
 * For testing purpose, set the a maximum number of dynamic
 * rules. This value is used by `dynamicRulesAvailable()`.
 * @param {number} num The maximum number of dynamic rules. A value of
 *   `0` just unset it and uses the "system" default which is
 *   `browser.declarativeNetRequest.MAX_NUMBER_OF_DYNAMIC_AND_SESSION_RULES`
 *   on Chromium < 121/Firefox or
 *   `browser.declarativeNetRequest.MAX_NUMBER_OF_DYNAMIC_RULES`
 *   on more recent versions.
 *
 * @private
 */
async function testSetDynamicRulesAvailable(num) {
  await browser.storage.session.set({[RULES_LIMIT_KEY]: num});
}

async function dynamicRulesAvailable() {
  let {declarativeNetRequest} = browser_polyfill;
  if (!declarativeNetRequest) {
    return Infinity;
  }

  let overriddenMaxRules = await browser_polyfill.storage.session.get(RULES_LIMIT_KEY);
  let maxRules = overriddenMaxRules[RULES_LIMIT_KEY] > 0 ?
      overriddenMaxRules[RULES_LIMIT_KEY] :
      (0,info.isFirefox)() ?
        declarativeNetRequest.MAX_NUMBER_OF_DYNAMIC_AND_SESSION_RULES :
        (0,info.getBrowserVersion)()[0] < 121 ? // Chromium or edge: EE-315
          declarativeNetRequest.MAX_NUMBER_OF_DYNAMIC_AND_SESSION_RULES :
          declarativeNetRequest.MAX_NUMBER_OF_DYNAMIC_RULES;

  let used = (await declarativeNetRequest.getDynamicRules()).length +
      (await declarativeNetRequest.getSessionRules()).length;
  return maxRules - used;
}

async function addFilters(texts, metadata) {
  await dnr_filters_init();
  let plannedChanges = await processFilterTexts(texts, null, null, true);
  if (plannedChanges.invalid.length > 0) {
    throw plannedChanges.invalid[0];
  }

  if (plannedChanges.add.length > 0) {
    // always false when !browser.declarativeNetRequest
    if (plannedChanges.add.length > await dynamicRulesAvailable()) {
      throw new FilterError(ERROR_TOO_MANY_FILTERS);
    }

    // so that this would throw the right error in case
    // browser.declarativeNetRequest doesn't exist or if
    // the API returned a different error instead
    await browser_polyfill.declarativeNetRequest.updateDynamicRules({
      addRules: plannedChanges.add
    });
  }

  let subscription;
  for (let text of plannedChanges.relateToOtherSubscriptions) {
    subscription = await filterEngine.filterStorage.addFilter(
      filterClasses.Filter.fromText(text),
      subscription
    );

    let detail = dynamicFilters.get(text);
    if (!detail.subscriptionIds) {
      detail.subscriptionIds = [];
    }
    detail.subscriptionIds.push(null);
  }

  for (let filterDetails of plannedChanges.details) {
    let {filter, ruleIds, enabled} = filterDetails;
    subscription = await filterEngine.filterStorage
      .addFilter(filter, subscription);


    setHighestRuleId(ruleIds);
    dynamicFilters.set(filter.text, {ruleIds, enabled, metadata,
                                     subscriptionIds: [null]});
  }

  storeDynamicFilters();

  return {
    added: plannedChanges.details.map(detail => detail.filter.text)
      .concat(plannedChanges.relateToOtherSubscriptions),
    exists: plannedChanges.relateToThisSubscription
  };
}

function setMetadataForFilter(text, metadata) {
  let details = dynamicFilters.get(text);
  if (!details) {
    throw new FilterError(ERROR_FILTER_NOT_FOUND);
  }

  let oldMetadata = details.metadata;
  details.metadata = metadata;
  onChangedFilter.emit({...filterClasses.Filter.fromText(text), metadata, oldMetadata},
                       "metadata");

  storeDynamicFilters();
}

function getMetadataForFilter(text) {
  let details = dynamicFilters.get(text);
  if (!details) {
    return null;
  }

  let metadata = details.metadata;
  return (typeof metadata != "undefined") ? metadata : null;
}

async function removeOrDisableFilters(filterTexts, remove = true) {
  await dnr_filters_init();

  let {dynamicFilterTexts} = splitFilterTexts(filterTexts);

  await removeOrDisableDynamicFilters(dynamicFilterTexts, remove);
  // It can happen that user filter duplicates existing filter from
  // static ruleset.
  // If we need to disable the filter, then we should
  // also disable the static rule.
  // If we need to remove the dynamic filter, then we should
  // enable the according static rule just like user filter never
  // existed.
  await enableStaticRules(filterTexts, remove);
}

async function enableStaticRules(filterTexts, enable) {
  let dnrMappers = new Map();
  let rulesetIdToRuleIds = new Map();

  // map filter text to (rulesetId => list(ruleIds)) map
  for (let filterText of filterTexts) {
    for (let subscription of
      filterEngine.filterStorage.subscriptions(filterText)) {
      if (subscription instanceof subscriptionClasses.SpecialSubscription ||
        !subscription.id) {
        continue;
      }

      let dnrMapperForThisSubscription = dnrMappers.get(subscription.id);
      if (!dnrMapperForThisSubscription) {
        dnrMapperForThisSubscription = new mapper/* DnrMapper */.u(
          async() => await getSubscriptionRulesetMap(subscription.id));
        await dnrMapperForThisSubscription.load();
        dnrMappers.set(subscription.id, dnrMapperForThisSubscription);
      }

      try {
        let ruleIds = dnrMapperForThisSubscription.get(filterText);
        if (ruleIds && ruleIds.length) {
          rulesetIdToRuleIds.set(subscription.id, ruleIds);
        }
      }
      catch (e) {
        // mapping file might be missing
      }
    }
  }

  // disable the rules in static rulesets
  for (const [rulesetId, ruleIds] of rulesetIdToRuleIds.entries()) {
    let disableRuleIds = (enable ? void 0 : ruleIds);
    let enableRuleIds = (enable ? ruleIds : void 0);

    await browser_polyfill.declarativeNetRequest.updateStaticRules({
      rulesetId, disableRuleIds, enableRuleIds
    });
  }
}

async function removeOrDisableDynamicFilters(filterTexts, remove = true) {
  let ruleIdsToRemove = [];

  for (let text of filterTexts) {
    let details = dynamicFilters.get(text);

    if (remove) {
      // Removing existing filter
      filterEngine.filterStorage.removeFilter(filterClasses.Filter.fromText(text));

      if (details) {
        if (!details.subscriptionIds) {
          details.subscriptionIds = [];
        }

        let index = details.subscriptionIds.indexOf(null);
        if (index !== -1) {
          details.subscriptionIds.splice(index, 1);
        }

        // Removing filter only if subscriptionIds array is empty
        if (details.subscriptionIds && details.subscriptionIds.length == 0) {
          for (let ruleId of details.ruleIds) {
            ruleIdsToRemove.push(ruleId);
          }

          dynamicFilters.delete(text);
        }
        else if (!details.enabled) {
          // Disabling filters is something we do to user filters, not filters
          // in subscriptions. If the disabled user filter is removed, but it
          // still exists in a subscription, then the subscription one needs to
          // be reenabled.
          await enableFilters([text]);
        }
      }
    }
    else {
      for (let ruleId of details.ruleIds) {
        ruleIdsToRemove.push(ruleId);
      }

      // Disabling filter
      filterEngine.filterStorage.filterState.setEnabled(text, false);

      details.enabled = false;
      details.ruleIds = [];
      dynamicFilters.set(text, details);
    }
  }

  if (ruleIdsToRemove.length > 0) {
    await browser_polyfill.declarativeNetRequest.updateDynamicRules({
      removeRuleIds: ruleIdsToRemove
    });
  }

  storeDynamicFilters();
}

async function enableDynamicFilters(filterTexts) {
  let rules = [];

  for (let text of filterTexts) {
    let normalized = filterClasses.Filter.normalize(text);
    let details = dynamicFilters.get(normalized);

    if (!details || details.enabled) {
      continue;
    }

    let filter = filterClasses.Filter.fromText(normalized);
    filterEngine.filterStorage.filterState.setEnabled(filter.text, true);

    let {filterRules, ruleIds} = await getRules(filter);
    rules.push(...filterRules);

    setHighestRuleId(ruleIds);
    dynamicFilters.set(filter.text, {ruleIds, enabled: true});
  }

  if (rules.length == 0) {
    return;
  }

  await browser_polyfill.declarativeNetRequest.updateDynamicRules({
    addRules: rules
  });

  storeDynamicFilters();
}

function splitFilterTexts(filterTexts) {
  let dynamicFilterTexts = [];
  let staticFilterTexts = [];

  let normalizedFilterTexts = filterTexts.map(text => filterClasses.Filter.normalize(text));
  for (let filterText of normalizedFilterTexts) {
    if (dynamicFilters.has(filterText)) {
      dynamicFilterTexts.push(filterText);
    }
    else {
      staticFilterTexts.push(filterText);
    }
  }

  return {dynamicFilterTexts, staticFilterTexts};
}

async function enableFilters(filterTexts) {
  await dnr_filters_init();

  let {dynamicFilterTexts, staticFilterTexts} = splitFilterTexts(filterTexts);

  await enableDynamicFilters(dynamicFilterTexts);
  await enableStaticRules(staticFilterTexts, true);
}

async function getDynamicFilters() {
  await dnr_filters_init();
  return dynamicFilters;
}

async function getDynamicUserFilters() {
  await dnr_filters_init();
  let dynamicUserFilters = new Map();

  for (let [filterText, details] of dynamicFilters.entries()) {
    if (!details.subscriptionIds || details.subscriptionIds.includes(null)) {
      dynamicUserFilters.set(filterText, details);
    }
  }
  return dynamicUserFilters;
}

async function migrateCustomFilters() {
  let filters = [];

  for (let subscription of filterEngine.filterStorage.subscriptions()) {
    if (!(subscription instanceof subscriptionClasses.SpecialSubscription)) {
      continue;
    }

    for (let text of subscription.filterText()) {
      filters.push({
        text,
        metadata: subscription.metadata,
        disabled: filterEngine.filterStorage.filterState
          .isDisabledForSubscription(text, subscription.url)
      });
    }
  }

  for (let filter of filters) {
    try {
      filterEngine.filterStorage.removeFilter(filterClasses.Filter.fromText(filter.text));
      await addFilters([filter.text], filter.metadata);
      if (filter.disabled) {
        await disableFilter(filter.text);
      }
    }
    catch (e) {
      sentry.reportError(e);
      let errors = prefs.Prefs.migration_filter_errors;

      if (!Array.isArray(errors)) {
        errors = [];
      }

      errors.push({error: e.message, filter});
      prefs.Prefs.migration_filter_errors = errors;
    }
  }
}

;// ./src/all/scheduler.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */



const MAX_POLL_TIMEOUT = time.MILLIS_IN_HOUR;

/**
 * Scheduler for managing calling a given function with a large interval, for
 * example daily.
 */
class Scheduler {
  /**
   * Starts the scheduler with the given configuration.
   *
   * @param {Object} config
   * @param {function} config.listener The function which needs to be called on
   *   a schedule.
   * @param {function} config.getNextTimestamp A function which returns the
   *   timestamp that the listener should next be called.
   * @param {number} config.interval After a successful listener call, wait this
   *   long before the next poll.
   * @param {number} config.errorRetryDelay After a failed listener call, wait
   *   this long before the next poll.
   */
  constructor(config) {
    this.config = config;
    this.checkInProgress = false;
    this.stopped = false;

    this._check = async() => {
      this.checkInProgress = true;
      let nextPollTimeout;
      try {
        nextPollTimeout = await this._callListenerIfItsTime();
      }
      finally {
        if (typeof nextPollTimeout == "undefined") {
          nextPollTimeout = this.config.errorRetryDelay;
        }

        if (nextPollTimeout > MAX_POLL_TIMEOUT) {
          nextPollTimeout = MAX_POLL_TIMEOUT;
        }

        // If stop was called while currently triggering something, don't
        // schedule the next timeout.
        if (!this.stopped) {
          this.timeout = setTimeout(this._check, nextPollTimeout);
        }
        this.checkInProgress = false;
      }
    };
    this._check();
  }

  /**
   * @ignore
   */
  async _callListenerIfItsTime() {
    let nextTimestamp = await this.config.getNextTimestamp();
    let nowTimestamp = Date.now();
    if (nextTimestamp && nowTimestamp < nextTimestamp) {
      return nextTimestamp - nowTimestamp;
    }

    let success = await this.config.listener();
    if (!success) {
      return this.config.errorRetryDelay;
    }

    return this.config.interval;
  }

  /**
   * Stops the scheduler.
   */
  stop() {
    if (this.stopped) {
      return;
    }

    this.stopped = true;
    if (this.timeout) {
      clearTimeout(this.timeout);
      this.timeout = null;
    }
  }

  /**
   * Calls `getNextTimestamp` immediately to reschedule the next call. Call this
   * function if anything has changed that could affect when the listener should
   * next be called.
   */
  checkNow() {
    if (!this.stopped && !this.checkInProgress) {
      clearTimeout(this.timeout);
      // The promise returned by _check() is deliberately not awaited
      // here. We're kicking off a check now, not propagating the results of
      // this schedule check up to the caller.
      this._check();
    }
  }
}

;// ./src/background/filters.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */



















/**
 * @ignore
 */
const ERROR_FILTER_NOT_FOUND = "filter_not_found";

/**
 * @ignore
 */
const ERROR_TOO_MANY_FILTERS = "too_many_filters";

/**
 * @ignore
 * @param {*} filter Filter object
 * @returns {*} Plain filter object
 */
function convertFilter(filter) {
  return {
    text: filter.text,
    enabled: typeof filter.disabled == "undefined" ? null : !filter.disabled,
    slow: filter instanceof filterClasses.URLFilter && (0,matcher.isSlowFilter)(filter),
    type: filter.type,
    thirdParty: filter.thirdParty != null ? filter.thirdParty : null,
    selector: filter.selector || null,
    csp: filter.csp || null,
    remove: filter.remove || void 0,
    css: filter.css || void 0
  };
}

function makeFilterListener(dispatch) {
  return filter => dispatch(convertFilter(filter));
}

function makeSubListener(dispatch) {
  return subscription => {
    if (subscription instanceof subscriptionClasses.SpecialSubscription) {
      for (let text of subscription.filterText()) {
        dispatch(convertFilter(filterClasses.Filter.fromText(text)));
      }
    }
  };
}

async function filters_disable(texts) {
  if (!Array.isArray(texts)) {
    texts = [texts];
  }

  if (browser_polyfill.declarativeNetRequest) {
    await removeOrDisableFilters(texts, false);
  }

  for (let text of texts) {
    let normalized = filterClasses.Filter.normalize(text);
    filterEngine.filterStorage.filterState.setEnabled(normalized, false);
  }
}

/**
 * @ignore
 */
const disableFilter = filters_disable;

let onChanged = new EventDispatcher(dispatch => {
  filterNotifier.filterNotifier.on("filterState.enabled", (text, enabled) => {
    dispatch({...convertFilter(filterClasses.Filter.fromText(text)), enabled}, "enabled");
  });

  filterNotifier.filterNotifier.on("subscription.metadata", (subscription, value, oldValue) => {
    for (let filter of subscription.filterText()) {
      dispatch({
        ...convertFilter(filterClasses.Filter.fromText(filter)),
        metadata: value, oldMetadata: oldValue
      }, "metadata");
    }
  });
});

/**
 * @ignore
 */
let onChangedFilter = onChanged;

/**
 * Returns an array of objects containing allowlist
 * filters (filter text only) and related metadata.
 */
let getAllowingFiltersWithMetadata = async function() {
  const allowlistingFilters = (
    await namespace.getUserFilters()
  ).filter(filter => filter.type === "allowing");
  return await Promise.all(
    allowlistingFilters.flatMap(async filter => {
      const metadata = await namespace.getMetadata(filter.text);
      return {filterText: filter.text, metadata};
    }));
};

/**
 * Returns an array of objects containing all allowlist filters
 * and related metadata - IF the metadata contains a
 * 'expiresByTabId' property.
 */
let getAllTabExpirationFiltersWithMetadata = async function() {
  const containerArray = await getAllowingFiltersWithMetadata();
  return containerArray.filter(container =>
    container.metadata &&
    typeof container.metadata.expiresByTabId !== "undefined"
  );
};

/**
 * Returns an array of filter texts containing allowlist filters
 * IF the metadata: contains a 'expiresByTabId' property that
 * matches the provided tabId.
 * @param {number} tabId The identifier a tab.
 */
let getTabExpirationFilters = async function(tabId) {
  const containerArray = await getAllowingFiltersWithMetadata();
  const allowlistingFiltersForTab = containerArray.filter(container =>
    container.metadata &&
    container.metadata.expiresByTabId === tabId
  );
  return allowlistingFiltersForTab.
    map(container => container.filterText);
};

/**
 * When a tab's URL is updated, check to see if the
 * any pause rules need to be removed.
 * This function will remove the temporary allowlist filter when
 *  - a user navigates to non-allowlisted page.
 * This function will not remove the temporary allowlist filter when:
 *  - a user navigates within same domain
 *  - a user navigates to other allowlisted domain
 *
 * @param {number} tabId The identifier for the affected tab.
 * @param {object} changeInfo The information which changed on the tab.
 */
let tabNavigationHandler = async function(tabId, changeInfo) {
  if (tabId === browser_polyfill.tabs.TAB_ID_NONE ||
     !changeInfo.url ||
     !changeInfo.status) {
    return;
  }

  if ((await namespace.getAllowingFilters(tabId)).length) {
    return;
  }

  const filterTexts = await getTabExpirationFilters(tabId);
  await namespace.remove(filterTexts);
};

/**
 * When a tab is removed, remove any existing pause rules
 * tab/domain pause rules
 * @param {number} tabId The identifier for the affected tab.
 */
let tabClosedTabHandler = async function(tabId) {
  if (tabId === browser_polyfill.tabs.TAB_ID_NONE) {
    return;
  }

  const filterTexts = await getTabExpirationFilters(tabId);
  await namespace.remove(filterTexts);
};

/**
 * Add tab event handlers to clean up any temporary allowlist rules
 */
let addTabEventListeners = async function() {
  browser_polyfill.tabs.onUpdated.removeListener(tabNavigationHandler);
  browser_polyfill.tabs.onRemoved.removeListener(tabClosedTabHandler);
  browser_polyfill.tabs.onUpdated.addListener(tabNavigationHandler);
  browser_polyfill.tabs.onRemoved.addListener(tabClosedTabHandler);
};

/**
 * @namespace filters
 */
const namespace = {
  /**
   * Represents a single filter rule and its state.
   * @typedef {Object} Filter
   * @property {string} text A {@link https://help.adblockplus.org/hc/en-us/articles/360062733293|filter}
   *   rule that specifies what content to block or to allow. Used to identify
   *   a filter.
   * @property {boolean|null} enabled Indicates whether this filter would be
   *   applied. Filters are enabled by default. For comment filters returned
   *   value is null.
   * @property {boolean} slow Indicates that this filter is not subject to an
   *   internal optimization. Filters that are considered slow should be
   *   avoided. Only URLFilters can be slow.
   * @property {string} type The filter {@link https://gitlab.com/eyeo/adblockplus/abc/adblockpluscore/-/jobs/artifacts/0.6.0/file/build/docs/module-filterClasses.Filter.html?job=docs#type|type}
   * @property {boolean|null} thirdParty True when the filter applies to
   *   third-party, false to first-party, null otherwise.
   * @property {string|null} selector CSS selector for the HTML elements that
   *   will be hidden.
   * @property {string|null} csp Content Security Policy to be injected.
   * @property {boolean?} remove For element hiding emulation filters, true if
   *   the filter will remove elements from the DOM rather hiding them.
   * @property {Object?} css For element hiding emulation filters. These are
   *   the key-value pairs for the css properties to apply to the matched
   *   element.
   */

  /**
   * Represents the results of calling the `add` function.
   * @typedef {Object} FilterAddResult
   * @property {Array<string>} added The filter texts that were added.
   * @property {Array<string>} exists The filter texts that already exist. They
   *   have not been added, and their metadata has not been updated.
   */

  /**
   * Adds one or multiple filters from texts. Filters which have been previously
   * added are skipped without updating their metadata.
   *
   * If the metadata should be updated for a filter which already exists, this
   * can be achieved by calling `setMetadata`. To see which filters have not had
   * their metadata updated, see the `exists` property on the result of this
   * function call.
   *
   * @param {string|[string]} texts The filter rules to be added.
   * @param {?Object} metadata Extra data to associate with a filter.
   * @param {Number} [metadata.expiresAt] The timestamp when the filter should
   *   expire.
   * @param {Number} [metadata.autoExtendMs] The number of milliseconds to
   *   extend the filter's expiry when the user navigated to a URL that matches
   *   the filter. This parameter is used together with `expiresAt` and when the
   *   user navigates to a URL that matches this filter and is not expired,
   *   the `expiresAt` value will be updated to `Date.now() + autoExtendMs`.
   *
   *   _**Note:** This only applies to document allowlisting filters._
   * @param {?Number} [metadata.expiresByTabId] The tabId of a tab which will
   *    be allowlisted by the rule being added.  If this optional property is
   *    provided, then the allowlist rule will be removed when the tab is
   *    closed, or the host (URL) of that tab is updated.
   *
   *   _**Note:** This only applies to document allowlisting filters._
   *
   * @return {Promise<FilterAddResult>} A report of which filters were added,
   *   and which were not added because they already exist.
   * @throws {FilterError|Error} The first filter to add that either failed
   *   validation (FilterError) or that is not supported by the DNR (Error).
   *   If the reason is "filter_invalid_wildcard" that means filter either has
   *   more than 1 `*` or `*` is placed in an unsupported place.
   * @memberof filters
   */
  async add(texts, metadata) {
    if (!Array.isArray(texts)) {
      texts = [texts];
    }

    if (browser_polyfill.declarativeNetRequest) {
      const result = await addFilters(texts, metadata);
      updateSchedulerIfNeeded(metadata);
      return result;
    }

    let {filterStorage} = filterEngine;

    let added = [];
    let exists = [];

    let filters = [];
    for (let text of texts) {
      if (added.includes(text) || exists.includes(text)) {
        // Duplicates within the texts passed into this function don't get
        // duplicated in the returned value.
        continue;
      }

      let normalized = filterClasses.Filter.normalize(text);
      let filter = filterClasses.Filter.fromText(normalized);
      let error = validateFilter(filter);

      if (error) {
        throw error;
      }

      if (filterStorage.filterExists(filter)) {
        exists.push(text);
      }
      else {
        filters.push(filter);
        added.push(text);
      }
    }

    if (!metadata) {
      for (let filter of filters) {
        await filterStorage.addFilter(filter);
      }
    }
    else {
      try {
        await filterStorage.addFiltersWithMetadata(filters, metadata);
        updateSchedulerIfNeeded(metadata);
      }
      catch (e) {
        throw new FilterError(e.message);
      }
    }

    return {
      added,
      exists
    };
  },

  /**
   * Set an extra data associated with an added filter.
   * @param {string} text filter text to set metadata for.
   * @param {Object} metadata Extra data to associate with a filter.
   * @returns {Promise<void>} Nothing is done for not added filter.
   * @throws {FilterError} An error will be thrown for not added filter.
   * @memberof filters
   */
  async setMetadata(text, metadata) {
    if (browser_polyfill.declarativeNetRequest) {
      setMetadataForFilter(text, metadata);
      updateSchedulerIfNeeded(metadata);
      return;
    }

    let {filterStorage} = filterEngine;

    try {
      await filterStorage.setMetadataForFilter(text, metadata);
      updateSchedulerIfNeeded(metadata);
    }
    catch (e) {
      if (e.message == ERROR_FILTER_NOT_FOUND) {
        // filter might be added without a metadata first,
        // so we're trying to make it working in a non-surprising way:
        // by removing the existing filter and readding it with a metadata.
        let filter = filterClasses.Filter.fromText(filterClasses.Filter.normalize(text));
        if (filterStorage.filterExists(filter)) {
          await filterStorage.removeFilter(filter);
          await this.add([text], metadata);
          return;
        }
      }
      throw new FilterError(e.message);
    }
  },

  /**
   * Returns an extra data associated with a filter.
   * @param {string} text The filter text to get metadata for.
   * @return {Promise<?Object>}
   * @memberof filters
   */
  async getMetadata(text) {
    if (browser_polyfill.declarativeNetRequest) {
      return getMetadataForFilter(text);
    }

    return await filterEngine.filterStorage.getMetadataForFilter(text);
  },

  /**
   * Returns an array of user filter objects.
   * @return {Promise<Array<Filter>>}
   * @memberof filters
   */
  async getUserFilters() {
    let result = [];

    if (browser_polyfill.declarativeNetRequest) {
      for (let [text, details] of (await getDynamicUserFilters()).entries()) {
        let filter = convertFilter(filterClasses.Filter.fromText(text));
        filter.enabled = filter.type == "comment" ? null : details.enabled;

        result.push(filter);
      }

      return result;
    }

    for (let subscription of filterEngine.filterStorage.subscriptions()) {
      if (subscription instanceof subscriptionClasses.SpecialSubscription) {
        for (let text of subscription.filterText()) {
          result.push(convertFilter(filterClasses.Filter.fromText(text)));
        }
      }
    }

    return result;
  },

  /**
   * Returns the allowing filters that will be effective
   * when the given document will be reloaded.
   * @param {number} tabId The id of the tab to lookup.
   * @param {Object} [options]
   * @param {number} [options.frameId=0] The id of the frame to lookup.
   * @param {Array<string>} [options.types=["document"]] The types of filters
   *   to consider. These can be any of "document", "elemhide", "genericblock",
   *   and "generichide".
   * @return {Promise<Array<string>>}
   * @memberof filters
   */
  async getAllowingFilters(tabId, options = {}) {
    let {frameId, types} = {frameId: 0, types: ["document"], ...options};
    let filters = new Set();
    let mask = types.reduce((a, b) => a | contentTypes.contentTypes[b.toUpperCase()], 0);

    for (let frame = getFrameInfo(tabId, frameId); frame;
         frame = frame.parent) {
      let parentHostname = frame.parent && frame.parent.hostname;
      let docDomain = parentHostname || frame.hostname;
      let matches = filterEngine.defaultMatcher.search(
        frame.url, mask, docDomain, frame.sitekey, false, "allowing");

      for (let filter of matches.allowing) {
        filters.add(filter.text);
      }
    }

    return Array.from(filters);
  },

  /**
   * Returns whether a particular resource is allowlisted.
   * @param {string} url The resource's url.
   * @param {string} type The resource's content type. Can be one of
   *   "background", "csp", "document", "dtd", "elemhide", "font",
   *   "genericblock", "generichide", "header", "image", "media", "object",
   *   "other", "ping", "popup", "script", "stylesheet", "subdocument",
   *   "webbundle", "webrtc", "websocket", "xbl", "xmlhttprequest".
   * @param {number} tabId The id of resource's tab.
   * @param {number} frameId=0 The id of the resource's frame.
   * @return {Promise<bool>}
   * @memberof filters
   */
  async isResourceAllowlisted(url, type, tabId, frameId = 0) {
    let mask = contentTypes.contentTypes[type.toUpperCase()];
    let frame = getFrameInfo(tabId, frameId) || {};
    let matcher = filterEngine.defaultMatcher;

    // The docDomain for a frame is the hostname of the parent frame
    // (the loader). For top-level frames we use the current URL's hostname.
    let docDomain = frame.hostname || (0,lib_url.parseURL)(url).hostname;
    if (matcher.isAllowlisted(url, mask, docDomain, frame.sitekey)) {
      return true;
    }

    for (; frame; frame = frame.parent) {
      if (!frame.url) {
        break;
      }

      let parentHostname = frame.parent && frame.parent.hostname;
      docDomain = parentHostname || frame.hostname;
      if (matcher.isAllowlisted(frame.url, contentTypes.contentTypes.DOCUMENT,
                                docDomain, frame.sitekey)) {
        return true;
      }
    }

    return false;
  },

  /**
   * Enables one or multiple filters. The filters effects
   * will again be applied.
   * @param {string|[string]} texts The filter rules to be enabled.
   * @return {Promise}
   * @memberof filters
   */
  async enable(texts) {
    if (!Array.isArray(texts)) {
      texts = [texts];
    }

    if (browser_polyfill.declarativeNetRequest) {
      await enableFilters(texts);
    }

    for (let text of texts) {
      let normalized = filterClasses.Filter.normalize(text);
      filterEngine.filterStorage.filterState.setEnabled(normalized, true);
    }
  },

  /**
   * Disables one or multiple filters. The filters will no longer have
   * any effect but will be returned by `filters.getUserFilters()`.
   * @param {string|[string]} texts The filter rules to be disabled.
   * @return {Promise}
   * @memberof filters
   */
  disable: filters_disable,

  /**
   * Removes one or multiple filters. The filters will no longer have
   * any effect and won't be returned by `filters.getUserFilters()`.
   * @param {string|[string]} texts The filter rules to be removed.
   * @return {Promise}
   * @memberof filters
   */
  async remove(texts) {
    if (!Array.isArray(texts)) {
      texts = [texts];
    }

    if (browser_polyfill.declarativeNetRequest) {
      await removeOrDisableFilters(texts, true);
      return;
    }

    for (let text of texts) {
      let normalized = filterClasses.Filter.normalize(text);
      filterEngine.filterStorage.removeFilter(filterClasses.Filter.fromText(normalized));
    }
  },

  /**
   * Validates a filter.
   * @param {string} text Filter to be validated
   * @return {null|FilterError}
   * @memberof filters
   */
  validate(text) {
    let normalized = filterClasses.Filter.normalize(text);
    let filter = filterClasses.Filter.fromText(normalized);
    return validateFilter(filter);
  },

  /**
   * Removes unnecessary whitespaces from filter text, will only return null if
   * the input parameter is null.
   * @param {string} text Filter text to be normalized
   * @return {string} Normalized filter text
   * @memberof filters
   */
  normalize(text) {
    return filterClasses.Filter.normalize(text);
  },

  /**
   * Emitted when a new filter is added.
   * @event
   * @type {EventDispatcher<Filter>}
   * @memberof filters
   */
  onAdded: new EventDispatcher(dispatch => {
    filterNotifier.filterNotifier.on("filter.added", makeFilterListener(dispatch));
    filterNotifier.filterNotifier.on("subscription.added", makeSubListener(dispatch));
  }),

  /**
   * Emitted when a filter is either enabled or disabled.
   * The property name "enabled" or
   * "metadata" and optionally "oldMetadata" is provided.
   * @event
   * @type {EventDispatcher<Filter, string>}
   * @memberof filters
   */
  onChanged,

  /**
   * Emitted when a filter is removed.
   * @event
   * @type {EventDispatcher<Filter>}
   * @memberof filters
   */
  onRemoved: new EventDispatcher(dispatch => {
    filterNotifier.filterNotifier.on("filter.removed", makeFilterListener(dispatch));
    filterNotifier.filterNotifier.on("subscription.removed", makeSubListener(dispatch));
  }),

  /**
   * Emitted when a filter expiration date is extended.
   * This event also contains the metadata for the filter.
   * @event
   * @type {EventDispatcher<Filter>}
   * @memberof filters
   */
  onRenewed: new EventDispatcher(dispatch => {
    filterNotifier.filterNotifier.on("filter.renewed", (filter, metadata) => dispatch({
      ...convertFilter(filter),
      metadata
    }));
  }),

  /**
   * Emitted when a filter expires.
   * This event also contains the metadata for the filter.
   * @event
   * @type {EventDispatcher<Filter>}
   * @memberof filters
   */
  onExpired: new EventDispatcher(dispatch => {
    filterNotifier.filterNotifier.on("filter.expired", (filter, metadata) => dispatch({
      ...convertFilter(filter),
      metadata
    }));
  }),

  /**
   * Returns an array of MV2 to MV3 migration errors and the related filters.
   * @return {Promise<array<Filter, string>>} The migration errors.
   * @memberof filters
   */
  async getMigrationErrors() {
    let errors = prefs.Prefs.migration_filter_errors;

    if (!Array.isArray(errors)) {
      errors = [];
    }

    return errors;
  },

  /**
   * Clears the migration errors.
   * @return {Promise}
   * @memberof filters
   */
  async clearMigrationErrors() {
    prefs.Prefs.migration_filter_errors = [];
  }
};

/* harmony default export */ const filters = (namespace);


async function removeExpiredFilters() {
  // Retrieve the list of user filters
  const filters = await namespace.getUserFilters();
  const now = Date.now();

  const filtersToRemove = [];
  // Iterate over each filter to check for expiration
  for (const filter of filters) {
    const metadata = await namespace.getMetadata(filter.text) || {};
    const {expiresAt} = metadata;

    // If the filter is expired, add it to the list of filters to remove
    if (expiresAt && now > expiresAt) {
      filtersToRemove.push(filter.text);
      filterNotifier.filterNotifier.emit("filter.expired", filter, metadata);
    }
  }

  // Remove all expired filters
  await namespace.remove(filtersToRemove);

  return true;
}


async function onCompleted(details) {
  await initializer.start();

  const {frameId, tabId} = details;

  // Only proceed if the navigation is in the main frame
  if (!isTopLevelFrameId(frameId)) {
    return;
  }

  // Retrieve the list of user filters
  const filters = await namespace.getAllowingFilters(tabId);
  const now = Date.now();

  // Iterate over each filter to check if its expiry should be extended
  for (const filterText of filters) {
    const metadata = await namespace.getMetadata(filterText) || {};
    const {expiresAt, autoExtendMs} = metadata;

    // If the filter is set to auto-extend, and it is not expired,
    // extend its expiration date
    const isExtendableFilter = autoExtendMs && expiresAt;
    if (isExtendableFilter && now < expiresAt) {
      const newMetadata = {
        ...metadata,
        expiresAt: now + autoExtendMs
      };
      await namespace.setMetadata(filterText, newMetadata);
      filterNotifier.filterNotifier.emit("filter.renewed", filterClasses.Filter.fromText(filterClasses.Filter.normalize(filterText)), newMetadata);
    }
  }
}

let scheduler;

/**
 * Checks if the scheduler is running and updates the next timestamp if needed.
 *
 * @param {?Object} metadata Extra data to associate with a filter.
 * @param {Number} [metadata.expiresAt] The timestamp when the filter should
 *   expire.
 */
function updateSchedulerIfNeeded(metadata) {
  if (scheduler && metadata && metadata.expiresAt) {
    scheduler.checkNow();
  }
}

/**
 * If host extension was paused on shutdown, remove
 * all session only based allowlisting filters at startup.
 * @ignore
 */
const removeTabExpirationFilters = async function() {
  // get all allowlist rules that have meta data
  const allowlistingFiltersWithMetadata =
    await getAllTabExpirationFiltersWithMetadata();

  // find any rules that have the 'expiresByTabId' property on the metadata
  // and remove them
  for (const container of allowlistingFiltersWithMetadata) {
    const tabId = container.metadata.expiresByTabId;
    const aTab = await browser_polyfill.tabs.get(tabId).catch(() => {
      // return nothing
    });
    // if the tab doesn't exist, remove the filter
    if (!aTab) {
      await namespace.remove(container.filterText);
    }
  }
};

/**
 * The following initialization functions are delayed to allow
 * the extension engine to be initialized and avoid race conditions
 * at start up
 * - Remove any existing expire by tab, if the tab is no longer found
 * - Add tab events listeners
 * @ignore
 */
function deferredStart() {
  removeTabExpirationFilters();
  addTabEventListeners();
}

/**
 * Starts listening for navigation events to remove expired filters
 * or renew the expiry of filters that are set to auto-extend.
 * @ignore
 */
function filters_start() {
  if (scheduler) {
    return;
  }
  // Listen for navigation events to extend the expiry of filters
  browser_polyfill.webNavigation.onCompleted.addListener(onCompleted);

  // initialize the scheduler to remove expired filters
  scheduler = new Scheduler({
    interval: 0,
    errorRetryDelay: time.MILLIS_IN_HOUR,
    listener: () => removeExpiredFilters(),
    async getNextTimestamp() {
      await initializer.start();

      const filters = await namespace.getUserFilters();
      let nextTimestamp = Date.now() + time.MILLIS_IN_HOUR; // 1h from now

      for (const filter of filters) {
        const metadata = await namespace.getMetadata(filter.text) || {};
        const {expiresAt} = metadata;

        if (expiresAt && expiresAt < nextTimestamp) {
          nextTimestamp = expiresAt;
        }
      }

      return nextTimestamp;
    }
  });
}

;// ./src/background/diagnostics.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */







let diagnostics_listeners = [];
let defaultOptions = {includeElementHiding: false,
                      includeUnmatched: false,
                      filterType: "blocking",
                      tabId: null};

/**
 * The BlockableEventDispatcher class allows users to listen to
 * filters and requests.
 * @hideconstructor
 */
class BlockableEventDispatcher {
  /**
  * @typedef {Object} BlockableEventOptions
  * @param {boolean} [includeElementHiding=false]
  *   Whether or not element hiding filters accounting for dynamic DOM changes
  *   should also be emitted. This event is emitted after the page has been
  *   fully loaded, and the element hiding filters have been applied. The
  *   expected delay between the filter being applied and the event being
  *   emitted is around two seconds.
  *   Note that this will enable element hiding tracing, which degrades
  *   performance and should only be used to enable ad-hoc diagnostics.
  * @param {boolean} [includeUnmatched=false] Whether or not unmatched requests
  *   should also be emitted. This event is generally emitted after a request is
  *   fully completed. Note that blockable item events may refer to either
  *   requests or documents. Unmatched events only refer to requests. This has
  *   the potentially confusing implication that there may be allowing document
  *   events (eg a $genericblock allowing filter being activated for a document)
  *   as well as an unmatched event for the request that actually loaded the
  *   HTML of the document.
  * @param {string} [filterType="blocking"]
  *   The type of filters to emit. Can be "blocking", "allowing", or "all".
  * @param {Number} [tabId=null]
  *   The tab to filter events for. Element hiding tracing will be limited to
  *   this tab (if `includeElementHiding` is set). If set to `null` events for
  *   all tabs will be considered, and are subject to element hiding tracing
  *   (if `includeElementHiding` is set) which will degrade performance. Note
  *   that in Manifest V3 extensions we expect event listeners to be attached in
  *   the first turn of the event loop. However, it's difficult to have a tabId
  *   in the first turn of the event loop since the tabs APIs are async. This
  *   may make this option unsuitable for MV3.
  */

  /**
   * Attaches a listener function to an event. This listener will be called
   * when the Blockable event is emitted.
   * @param {function} listener The user defined function that will be called
   *                            once the specified event is emitted.
   * @param {BlockableEventOptions} options The filtering conditions to apply
   *                                        when the event is emitted.
   * @example
   * // Logs all blocked requests
   * EWE.reporting.onBlockableItem.addListener(console.log);
   * @example
   * // Log all blockable items of a specific tab for debugging purposes
   * EWE.reporting.onBlockableItem.addListener(
   *   console.log,
   *   {includeElementHiding: true,
   *    includeUnmatched: true,
   *    filterType: "all", tabId}
   * );
   */
  addListener(listener, options) {
    diagnostics_listeners.push({listener, options: {...defaultOptions, ...options}});
  }

  /**
   * Removes the added function. This means the listener will no
   * longer be called by the emitted event.
   * @param {function} listener The user defined function to be removed.
   * @param {Object} options The filtering conditions to apply when
   *                         the event is emitted.
   */
  removeListener(listener, options) {
    let {includeElementHiding, includeUnmatched,
         filterType, tabId} = {...defaultOptions, ...options};

    let index = diagnostics_listeners.findIndex(obj =>
      obj.listener == listener &&
      obj.options.includeElementHiding == includeElementHiding &&
      obj.options.includeUnmatched == includeUnmatched &&
      obj.options.filterType == filterType &&
      obj.options.tabId == tabId
    );

    if (index != -1) {
      diagnostics_listeners.splice(index, 1);
    }
  }
}

function logItem(request, filter, matchInfo = {}) {
  for (let {listener, options} of diagnostics_listeners) {
    let {includeElementHiding, includeUnmatched, filterType, tabId} = options;

    if (tabId != null && tabId != request.tabId) {
      continue;
    }

    if (filter) {
      if (!includeElementHiding && (filter.type == "elemhide" ||
                                    filter.type == "elemhideexception" ||
                                    filter.type == "elemhideemulation")) {
        continue;
      }

      if (filterType != "all" &&
          filterType == "allowing" != (filter.type == "allowing" ||
                                       filter.type == "elemhideexception")) {
        continue;
      }
    }

    if (!includeUnmatched && !filter) {
      continue;
    }

    listener({request, filter: filter && convertFilter(filter), matchInfo});
  }
}

function logHiddenElements(selectors, filters, sender) {
  let request = {
    tabId: sender.tab.id,
    frameId: sender.frameId,
    url: sender.url || BLANK_PAGE_URL
  };
  let {hostname} = (0,lib_url.parseURL)(request.url);
  let matchInfo = {
    docDomain: hostname,
    method: "elemhide"
  };

  if (selectors.length > 0) {
    // The same filter can be listed in multiple subscriptions
    // or can be added by user, so we need to exclude the duplicates.
    let loggedElemHideFilters = [];
    for (let subscription of filterEngine.filterStorage.subscriptions()) {
      if (subscription.disabled) {
        continue;
      }

      for (let text of subscription.filterText()) {
        let filter = filterClasses.Filter.fromText(text);

        if (filter instanceof filterClasses.ElemHideFilter &&
            selectors.includes(filter.selector) &&
            filter.isActiveOnDomain(hostname) &&
            !loggedElemHideFilters.includes(filter.text)) {
          loggedElemHideFilters.push(filter.text);
          logItem(request, filter, matchInfo);
        }
      }
    }
  }

  for (let text of filters) {
    logItem(request, filterClasses.Filter.fromText(text), matchInfo);
  }
}

function loggingEnabled(tabId) {
  return diagnostics_listeners.some(({options}) =>
    (options.tabId == null || options.tabId == tabId)
  );
}

function tracingEnabled(tabId) {
  return diagnostics_listeners.some(({options}) =>
    options.includeElementHiding &&
    (options.tabId == null || options.tabId == tabId)
  );
}

// EXTERNAL MODULE: ./adblockpluscore/lib/elemHide.js
var elemHide = __nested_webpack_require_678579__(4809);
// EXTERNAL MODULE: ./adblockpluscore/lib/snippets.js
var snippets = __nested_webpack_require_678579__(3808);
;// ./src/background/content-filter.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */














let isolatedLib;
let injectedLib;

function setSnippetLibrary({isolatedCode, injectedCode}) {
  isolatedLib = isolatedCode;
  injectedLib = injectedCode;
}

function calculateSelectorsDiff(previousStylesheet, styleSheet) {
  let diff = arraysDiff(previousStylesheet.selectors, styleSheet.selectors);
  styleSheet.removedSelectors = diff.removed;
  styleSheet.addedSelectors = diff.added;

  styleSheet.removedCode = (0,elemHide.createStyleSheet)(styleSheet.removedSelectors);
  styleSheet.addedCode = (0,elemHide.createStyleSheet)(styleSheet.addedSelectors);
}

function generateStylesheet(tabId, previousFrame, frame) {
  let specificOnly = (frame.allowlisted & contentTypes.contentTypes.GENERICHIDE) != 0;
  let tracing = tracingEnabled(tabId);

  let previousStylesheet;
  if (previousFrame &&
      !(previousFrame.allowlisted & contentTypes.contentTypes.DOCUMENT) &&
      !(previousFrame.allowlisted & contentTypes.contentTypes.ELEMHIDE)) {
    previousStylesheet = filterEngine.elemHide.getStyleSheet(
      previousFrame.hostname,
      specificOnly,
      tracing);
  }
  else {
    previousStylesheet = {
      selectors: []
    };
  }

  let styleSheet;
  if (!(frame.allowlisted & contentTypes.contentTypes.DOCUMENT) &&
      !(frame.allowlisted & contentTypes.contentTypes.ELEMHIDE)) {
    styleSheet = filterEngine.elemHide.getStyleSheet(
      frame.hostname,
      specificOnly,
      debugging_trace);
  }
  else {
    styleSheet = {
      selectors: []
    };
  }

  calculateSelectorsDiff(previousStylesheet, styleSheet);

  if (debugOptions.elemHide) {
    let declarationBlock = "{";
    for (let [property, value] of debugOptions.cssProperties) {
      declarationBlock += `${property}: ${value} !important;`;
    }
    declarationBlock += "}";

    styleSheet.code = (0,elemHide.createStyleSheet)(
      styleSheet.selectors, declarationBlock);
    styleSheet.removedCode = (0,elemHide.createStyleSheet)(
      styleSheet.removedSelectors, declarationBlock);
    styleSheet.addedCode = (0,elemHide.createStyleSheet)(
      styleSheet.addedSelectors, declarationBlock);
  }

  return styleSheet;
}

async function executeSnippets(tabId, frameId, previousFrame, frame) {
  if (!isolatedLib || !injectedLib) {
    console.warn("Snippets are not initialized. Use `setSnippetLibrary()` to initialize snippets.");
    return;
  }

  let details = {tabId, frameIds: [frameId]};
  let filters = filterEngine.snippets.getFilters(frame.hostname);
  let scripts = filters.map(({script}) => script);
  let environment = {};
  if (debugOptions.elemHide) {
    environment.debugCSSProperties = debugOptions.snippetsCssProperties;
  }

  let isolatedDependencies = [];
  let isolated = [];
  let main = [];

  for (let script of scripts) {
    for (let [snippet, ...args] of (0,snippets.parseScript)(script)) {
      if (isolatedLib.has(snippet)) {
        let dependency = isolatedLib.get(snippet);
        if (dependency) {
          isolatedDependencies.push(dependency);
        }
        isolated.push([snippet, ...args]);
      }
      if (injectedLib.has(snippet)) {
        main.push([snippet, ...args]);
      }
    }
  }

  let execute = [];
  if (background_browser/* default */.A.scripting && background_browser/* default */.A.scripting.executeScript) {
    if (isolated.length > 0) {
      if (isolatedDependencies.length) {
        let isolatedDepsPromises = [];
        for (let dependency of isolatedDependencies) {
          debugging_debug(() => `Execute dependency script ${dependency}`);
          isolatedDepsPromises.push(background_browser/* default */.A.scripting.executeScript({
            target: details,
            world: "ISOLATED",
            func: dependency
          }));
        }
        await Promise.all(isolatedDepsPromises);
      }

      debugging_debug(() => `Execute isolated script ${isolatedLib}`);
      execute.push(
        background_browser/* default */.A.scripting.executeScript({
          target: details,
          world: "ISOLATED",
          func: isolatedLib,
          args: [environment, ...isolated]
        })
      );
    }

    if (main.length > 0) {
      // Firefox 108 - 128 does not support injection into main world.
      // We fallback to injecting snippets with inline script in those cases.
      // https://bugzilla.mozilla.org/show_bug.cgi?id=1736575
      if (Object.values(background_browser/* default */.A.scripting.ExecutionWorld).includes("MAIN")) {
        debugging_debug(() => `Execute main script ${injectedLib}`);
        execute.push(
          background_browser/* default */.A.scripting.executeScript({
            target: details,
            world: "MAIN",
            injectImmediately: true,
            func: injectedLib,
            args: [environment, ...main]
          })
        );
      }
      else {
        const executable = (0,snippets.prepareInlineScriptForInjection)(
          injectedLib,
          environment,
          ...main
        );
        debugging_debug(() => `Execute main script ${executable}`);
        execute.push(
          background_browser/* default */.A.tabs.executeScript(
            tabId,
            {
              frameId,
              code: executable,
              matchAboutBlank: true,
              runAt: "document_start"
            })
        );
      }
    }
  }
  else {
    if (isolated.length > 0) {
      const args = JSON.stringify([environment, ...isolated]);
      let code = "";
      // prepend all dependencies before the snippets
      if (isolatedDependencies.length) {
        for (const cb of isolatedDependencies) {
          code += `(${cb})();`;
        }
      }
      code += `(${isolatedLib}).apply(null,${args})`;
      debugging_debug(() => `Execute isolated script ${code}`);
      execute.push(
        background_browser/* default */.A.tabs.executeScript(
          tabId,
          {
            frameId,
            code,
            matchAboutBlank: true,
            runAt: "document_start"
          }));
    }

    if (main.length > 0) {
      const executable = (0,snippets.prepareInlineScriptForInjection)(
        injectedLib,
        environment,
        ...main
      );
      debugging_debug(() => `Execute main script ${executable}`);
      execute.push(
        background_browser/* default */.A.tabs.executeScript(
          tabId,
          {
            frameId,
            code: executable,
            matchAboutBlank: true,
            runAt: "document_start"
          })
      );
    }
  }

  let request = {tabId, frameId, url: frame.url};
  Promise.all(execute).then(() => filters.forEach(filter => {
    logItem(request, filter, {
      docDomain: frame.hostname,
      method: "snippet"
    });
  }), () => {});
}

async function applyContentFilters(
  tabId, frameId, previousFrame, skipSnippets) {
  const frame = getFrameInfo(tabId, frameId);
  debugging_trace({tabId, frameId, previousFrame, frame});
  const emulatedPatterns = [];
  let tracedSelectors;

  if (frame) {
    let styleSheet = generateStylesheet(tabId, previousFrame, frame);
    debugging_debug(() => JSON.stringify(styleSheet));

    if (previousFrame && !(previousFrame.allowlisted & contentTypes.contentTypes.DOCUMENT)) {
      await removeCSS(tabId, frameId, styleSheet.removedCode);
    }

    if (!skipSnippets && !(frame.allowlisted & contentTypes.contentTypes.DOCUMENT)) {
      executeSnippets(tabId, frameId, previousFrame, frame);
    }

    if (!(frame.allowlisted & contentTypes.contentTypes.DOCUMENT) &&
      !(frame.allowlisted & contentTypes.contentTypes.ELEMHIDE)) {
      injectCSS(tabId, frameId, styleSheet.addedCode);

      let filters = filterEngine.elemHideEmulation.getFilters(frame.hostname);
      for (const {selector, text, remove, css} of filters) {
        emulatedPatterns.push({selector, text, remove, css});
      }

      if (tracingEnabled(tabId)) {
        tracedSelectors = [];
        for (let selector of styleSheet.addedSelectors) {
          tracedSelectors.push([selector, null]);
        }
        for (let exception of styleSheet.exceptions) {
          tracedSelectors.push([exception.selector, exception.text]);
        }
      }
    }
  }
  else {
    warn("No frame info");
  }

  let cssProperties;
  if (debugOptions.elemHide) {
    cssProperties = debugOptions.cssProperties;
  }

  const notifyActive = shouldNotifyActive(tabId, frameId);

  return {emulatedPatterns, cssProperties, tracedSelectors, notifyActive};
}

function injectCSS(tabId, frameId, code) {
  let result;

  if (background_browser/* default */.A.scripting && background_browser/* default */.A.scripting.insertCSS) {
    result = background_browser/* default */.A.scripting.insertCSS({
      target: {tabId, frameIds: [frameId]},
      css: code,
      origin: "USER"
    });
  }
  else {
    result = background_browser/* default */.A.tabs.insertCSS(
      tabId,
      {
        code,
        cssOrigin: "user",
        frameId,
        matchAboutBlank: true,
        runAt: "document_start"
      }
    );
  }

  result.catch(() => {}); // Fails if tab or frame no longer exists
}

async function removeCSS(tabId, frameId, code) {
  let result;

  if (background_browser/* default */.A.scripting && background_browser/* default */.A.scripting.removeCSS) {
    result = background_browser/* default */.A.scripting.removeCSS({
      target: {tabId, frameIds: [frameId]},
      css: code,
      origin: "USER"
    });
  }
  else if (background_browser/* default */.A.tabs.removeCSS) {
    result = background_browser/* default */.A.tabs.removeCSS(
      tabId,
      {
        code,
        cssOrigin: "user",
        frameId,
        matchAboutBlank: true
      }
    );
  }
  else {
    result = Promise.resolve();
  }

  try {
    await result;
  }
  catch (e) {
    // Fails if tab or frame no longer exists
  }
}

;// ./src/background/frame-state.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */













/**
 * The URL that browsers use to represent an empty page, about:blank.
 */
const BLANK_PAGE_URL = "about:blank";

/**
 * The frameId of the top level frame on each tab.
 */
const frame_state_TOP_LEVEL_FRAME_ID = 0;

/**
 * Checks if a frameId corresponds to the top level frame on a tab.
 * @param {number} frameId
 * @return {boolean}
 */
function isTopLevelFrameId(frameId) {
  return frameId == frame_state_TOP_LEVEL_FRAME_ID;
}

/**
 * Checks if a frameId corresponds to a frame on a tab.
 * @param {number} frameId
 * @return {boolean}
 */
function isValidFrameId(frameId) {
  return frameId >= frame_state_TOP_LEVEL_FRAME_ID;
}

/**
 * Checks if a frameId corresponds to an iframe.
 * @param {number} frameId
 * @return {boolean}
 */
function isValidChildFrameId(frameId) {
  return frameId > frame_state_TOP_LEVEL_FRAME_ID;
}

/**
 * All known currently active frames, that can be looked up by
 * `tabId`, and then by `frameId` (`[tabId, [frameId, FrameInfo]]`).
 *
 * Maintaining this state is the central reason for the code in this
 * file. When we start up EWE, we scan all existing tabs for their
 * frames. After that, we hook into various browser events to try to
 * keep it up to date as things change.
 *
 * @type {Map<number, Map<number, FrameInfo>>}
 */
let state = new Map();
let frame_state_startupPromise;

/**
 * Manages tracking state that is tied to a single specific frame.
 *
 * A simple webpage will have a single frame in a tab. However, when
 * we look at sites with advertising and embedded trackers, they often
 * have many <iframe> elements. Each iframe may have slightly
 * different state, but generally a frame will inherit settings from
 * the frame that it's on (its parent frame).
 *
 * This state is mostly used in applying frame-level allowing filters
 * (eg `$document` filters), but is also used to hold parameters like
 * what hostname to use when checking if filters match a request, and
 * whether or not a sitekey is involved. This needs to be done
 * statefully because we inherit some state from parent frames.
 *
 * We sometimes need access to this data synchronously (for example to
 * do request filtering), but the functions to fetch this data from
 * the browser on demand are asynchronous. The events where we need to
 * make decisions based on the frame usually have some of the frame's
 * state, like the URL of the frame, but don't have the sitekey and
 * don't have all of the information about the parents of the frame.
 *
 * @property {number} tabId The id of the tab.
 * @property {string} url The url of the frame.
 * @property {string} hostname The hostname part of the frame's
 *   URL. If the URL isn't a normal HTTP URL (for example if it's
 *   about:blank) then this will be the parent frame's hostname. If
 *   that also doesn't have a normal HTTP hostname, then this will
 *   default to an empty string.
 * @property {?string} sitekey The sitekey associated with a frame, if
 *   there is one. These sitekeys are read from the
 *   `onHeadersReceived` event. This is inherited from the parent
 *   frame if this frame doesn't have a sitekey of its own.
 * @property {boolean} headersReceived True if we've received an
 *   `onHeadersReceived` event for this frame and have checked it for
 *   sitekeys. If this is false, it could mean that we don't have
 *   enough information yet to make blocking decisions, because a
 *   sitekey might still arrive with the headers.
 * @property {?FrameInfo} parent The frame that this from is on. Null
 *   if this is the top-level frame on a tab.
 * @property {number} allowlisted Bitfield where each set bit is the
 *   content type of an allowlisting filter applied to the frame. This
 *   includes filters that turn of ad filtering entirely, like
 *   `$document` filters, but also includes filters that modify how we
 *   look up request filters like `$genericblock`.
 * @property {?Filter} allowingDocumentFilter The `$document` filter
 *   that is being applied to this frame, if any. This is useful for
 *   logging, for example if a request is allowed because of this
 *   filter. If you just need to check if there is a `$document` filter
 *   applied to the frame or not, you can also check
 *   `frame.allowlisted`.
 *
 * @param {number} tabId The tabId of the tab that the this frame is on.
 * @param {number} frameId The frameId of this frame.
 * @param {?FrameInfo} parent The frame that this from is on. Null
 *   if this is the top-level frame on a tab.
 * @param {string} url The url of the frame.
 * @hideconstructor
 */
class FrameInfo {
  constructor(tabId, frameId, parent, url) {
    this.tabId = tabId;
    this.frameId = frameId;
    this.parent = parent;

    initializeFrameWithUrl(this, url);
    findAllowlistingFilters(this);
  }
}

/**
 * Get a text description of the allowing filter added.
 * @param {number} typeMask Bitset to filter types you want to name.
 * @param {Filter} filter The filter with the allowing reason you want
 *   to name.
 * @return {string} Content type name of the allowing filter just
 *   added.
 */
function getAllowingReason(typeMask, filter) {
  for (let type in contentTypes.contentTypes) {
    if (typeMask & filter.contentType & contentTypes.contentTypes[type]) {
      return type.toLowerCase();
    }
  }
}

function initializeFrameWithUrl(frame, url) {
  let {
    allowlisted: parentAllowlisted,
    sitekey: parentSitekey,
    allowingDocumentFilter: parentAllowingDocumentFilter,
    hostname: parentHostname
  } = frame.parent || {};

  let urlInfo = (0,lib_url.parseURL)(url);
  frame.url = url;
  frame.hostname = urlInfo.hostname || parentHostname || "";

  let sitekey = getSitekey(frame.tabId, frame.frameId, url);
  frame.sitekey = sitekey || parentSitekey;
  frame.headersReceived = (!!sitekey) || sitekey === null;

  // allowlisted and allowingDocumentFilter start with their parent
  // value, but may have extra allowing filters added when we call
  // findAllowlistingFilters
  frame.allowlisted = parentAllowlisted || 0;
  frame.allowingDocumentFilter = parentAllowingDocumentFilter;
}

/**
 * Checks if the matcher has any allowing filters that should be
 * applied to this frame, and updates `frame.allowlisted` and
 * `frame.allowingDocumentFilter` accordingly.
 *
 * This can only ever add extra allowing filters. It's also safe to
 * call multiple times on the same frame. This would normally be
 * called on a new frame to find its allowing filters, but should also
 * be called whenever a frame is updated in such a way that there
 * could be new allowing filters, for example when a sitekey is added
 * to an existing frame.
 *
 * @param {FrameInfo} frame The frame that will be checked for new
 *   filters, and will be updated.
 * @param {number} tabId The tabId of the tab the frame is on. Used for
 *   logging.
 * @param {number} frameId The frameId of the frame. Used for logging.
 */
function findAllowlistingFilters(frame) {
  let {tabId, frameId, url} = frame;
  let details = {tabId, frameId, url};
  // The docDomain for a frame is the hostname of the parent frame
  // (the loader). For top-level frames we use the current URL's hostname.
  let parentHostname = frame.parent && frame.parent.hostname;
  let matchInfo = {docDomain: parentHostname || frame.hostname,
                   method: "allowing"};

  // This loop will keep trying to find new types of allowing filters
  // for the frame until the matcher doesn't return any more.
  while (true) {
    let typeMask = ~frame.allowlisted & contentTypes.ALLOWING_TYPES;
    debugging_debug(`Check match tabId=${tabId}, url=${frame.url}, typeMask=${typeMask}, ` +
      `docDomain=${matchInfo.docDomain}, sitekey=${frame.sitekey}`);
    let filter = filterEngine.defaultMatcher.match(
      frame.url, typeMask, matchInfo.docDomain, frame.sitekey
    );

    if (!filter) {
      debugging_debug(`No filter for tabId=${tabId},frameId=${frameId}`);
      break;
    }

    frame.allowlisted |= filter.contentType & contentTypes.ALLOWING_TYPES;
    // We need to hold onto document allowing filters because we might
    // need it for logging blockable requests later.
    if (filter.contentType & contentTypes.contentTypes.DOCUMENT) {
      frame.allowingDocumentFilter = filter;
    }

    let allowingReason = getAllowingReason(typeMask, filter);
    debugging_debug(`Allowing tabId=${tabId}, frameId=${frameId} due to ${filter.text}`);
    logItem(details, filter, {...matchInfo, allowingReason});
  }
}

/**
 * Builds the frame state from scratch using the tabs API.
 *
 * This is called on startup, and in MV3 whenever the service worker
 * starts up. The only shortcoming is that this can't find sitekeys
 * for existing frames, since those are read from headers.
 * @async
 * @return {Promise} Resolves when all frames have been scanned.
 */
async function discoverExistingFrames() {
  let tabs = await background_browser/* default */.A.tabs.query({});
  await Promise.all(tabs.map(({id: tabId}) =>
    background_browser/* default */.A.webNavigation.getAllFrames({tabId}).then(rawFrames => {
      if (!rawFrames) {
        return;
      }

      // Sort the frames so that we'll add parent frames before the
      // child frames.
      rawFrames.sort((a, b) => a.frameId - b.frameId);

      let frames = new Map();
      state.set(tabId, frames);

      for (let {frameId, parentFrameId, url} of rawFrames) {
        let parent = isValidFrameId(parentFrameId) ?
            frames.get(parentFrameId) :
            null;

        // Chrome unfortunately has a bug where getAllFrames doesn't
        // always return all parent frames
        // (https://bugs.chromium.org/p/chromium/issues/detail?id=725917).
        // Not much we can do about it, but if we can't see the
        // required parent frame we can fall back to the root frame.
        if (isValidChildFrameId(parentFrameId) && !parent) {
          parent = frames.get(frame_state_TOP_LEVEL_FRAME_ID);
        }

        // Yandex gives undefined or an empty string here sometimes,
        // for example when browsing to pages that Yandex treats
        // specially like their own website.
        if (!url) {
          url = BLANK_PAGE_URL;
        }

        frames.set(frameId, new FrameInfo(tabId, frameId, parent, url));
      }
    })
  ));
}

function onSitekeyReceived(tabId, frameId, url, sitekey) {
  debugging_trace({tabId, frameId, url, sitekey});

  let frame = getFrameInfo(tabId, frameId);

  // It can happen that sub-frame "onCommitted" event is triggered after it's
  // resource loading event, meaning we don't have a frame information
  // in frame state, thus skip finding allowlisting filters, resulting in
  // frame resources are not allowlisted as expected.
  if (!frame) {
    frame = recordFrameFromNavigationEvent({tabId, frameId, url});
  }
  let isSameFrame = frame.url == url;
  if (isSameFrame) {
    frame.headersReceived = true;
  }

  if (sitekey) {
    // Sometimes the onHeadersReceived event comes after the
    // onCommitted event. This seems to be common when loading
    // iframes: the browser will show the iframe and then start
    // loading its contents. When this happens, we may get a sitekey
    // for a frame that's already being shown, and that may mean we
    // need to add some new allowlisting filters based on that
    // sitekey.
    if (isSameFrame && frame.sitekey != sitekey) {
      frame.sitekey = sitekey;
      findAllowlistingFilters(frame);
    }
  }
}


/**
 * Updates the frame state to reflect that a new frame is being shown.
 *
 * This can broadly be thought of in two categories:
 *
 * 1. The browser has navigated to the new page. Specifically, this is
 *    on the `webNavigation.onCommitted` event, which fires when the
 *    browser has decided to switch to the new document. We will
 *    usually have received headers for the document already by this
 *    point, but not always.
 * 2. The site is a single page application, and has updated its
 *    contents using Javascript and updated its URL with the history
 *    API.
 *
 * @param {Object} details Details object as provided by the
 *   webNavigation API events.
 * @param {number} details.tabId The tabId of the tab that the updated
 *   frame is on.
 * @param {number} details.frameId The frameId of the updated frame.
 * @param {number} [details.parentFrameId=-1] The frameId of the frame
 *   that the updated frame is on. -1 if the updated frame is the
 *   top-level frame.
 * @param {string} details.url The new url of the frame.
 * @param {Object} [options={}]
 * @param {boolean} [options.historyStateUpdated=false] True if this
 *   was triggered by a history state update, rather than by a full
 *   page navigation.
 * @param {boolean} [options.errorOccurred=false] True if this was
 *   triggered by a `webNavigation.onErrorOccurred` event rather than
 *   a `webNavigation.onCommitted` event.
 * @return {FrameInfo} The newly created frame state.
 */
function recordFrameFromNavigationEvent(
  {tabId, frameId, parentFrameId = -1, url},
  {historyStateUpdated = false, errorOccurred = false} = {}) {
  // Yandex gives undefined or an empty string here sometimes,
  // for example when browsing to pages that Yandex treats
  // specially like their own website.
  if (!url) {
    url = BLANK_PAGE_URL;
  }

  let frames = state.get(tabId);

  // We generally need to throw away any existing frame state for the
  // whole tab when a new top-level frame is committed to the
  // tab. This is because all previous frame state was on the old
  // top-level frame. However, if this was a history API update, those
  // frames could still be there on the page so we can't clear them out.
  if (!frames || (isTopLevelFrameId(frameId) && !historyStateUpdated)) {
    frames = new Map();
    state.set(tabId, frames);
  }
  let frame = frames.get(frameId);
  let parent = isValidFrameId(parentFrameId) ? frames.get(parentFrameId) : null;

  // Same as discoverExistingFrames, if we expect a parent but our
  // frame state doesn't seem to have that parent, falling back to the
  // root frame is better than nothing. This might happen due to this
  // bug: https://bugs.chromium.org/p/chromium/issues/detail?id=725917.
  if (isValidChildFrameId(parentFrameId) && !parent) {
    parent = frames.get(frame_state_TOP_LEVEL_FRAME_ID);
  }

  // If the frame had an error instead of loading, we don't want to
  // use the URL from the error. Otherwise unscrupulous websites could
  // embed their advert in an iframe that has an allowlisted URL, but
  // doesn't actually contain the contents of that URL.
  if (errorOccurred) {
    if (frame) {
      url = frame.url;
    }
    else if (parent) {
      url = parent.url;
    }
  }

  // We might get multiple calls to `recordFrameFromNavigationEvent`
  // for iframes. This is because we need to listen to several
  // different events to hear about all frames, including onCommitted
  // and onBeforeNavigate and onErrorOccurred. To avoid duplicate
  // onBlockableItem events, we check if the frame we already have is
  // the same.
  if (!frame || isTopLevelFrameId(frameId) ||
      frame.url != url || frame.parent != parent) {
    frame = new FrameInfo(tabId, frameId, parent, url);
    frames.set(frameId, frame);
  }
  return frame;
}

function frame_state_onBeforeNavigate(details) {
  debugging_trace({details});

  // We know the current frame information is about to become
  // outdated, so we just delete the existing data.
  let frames = state.get(details.tabId);
  if (frames) {
    // Firefox can trigger "onBeforeNavigate" multiple times,
    // so we need to filter out only the actually changed navigations.
    let frame = frames.get(details.frameId);
    if (frame && frame.url != details.url) {
      // We need to skip processing the frame state events for now
      // (such as allowlisted for document) as it will be done later during
      // the `onCommitted`, but we also want to avoid allowlisting for some
      // resources that refer to this tabId/frameId as the URL is changed,
      // and the allowlisting state is currently undetermined.
      frame.isChangingURL = true;
      initializeFrameWithUrl(frame, details.url);
    }
  }

  // If an iframe's URL is "about:srcdoc", that means its contents is
  // actually specified using the srcdoc attribute. Some browsers
  // don't actually emit the webNavigation.onCommitted event for these
  // frames, so we need to use a different event to get them into our
  // frame state.
  if (details.url == "about:srcdoc") {
    recordFrameFromNavigationEvent(details);
  }
}

function frame_state_onCommitted(details) {
  debugging_trace({details});

  let frame = recordFrameFromNavigationEvent(details);
  findAllowlistingFilters(frame);
  frame.isChangingURL = false;
}

function onErrorOccurred(details) {
  debugging_trace({details});

  // On Chrome, errored iframes are never committed, but they are
  // still on the page and their contents can still be manipulated
  // with Javascript so we need them in our frame state.
  // See https://bugs.chromium.org/p/chromium/issues/detail?id=725917
  //
  // Firefox's docs don't mention parentFrameId on this event, but
  // Chrome's do, and it does appear to be there in practice. Check
  // for it before proceeding in case some browsers don't, since it's
  // very important to have the parent frame to record frame state
  // changes.
  if (isValidChildFrameId(details.frameId) &&
      typeof details.parentFrameId == "number") {
    recordFrameFromNavigationEvent(details, {errorOccurred: true});
  }
}

async function frame_state_onHistoryStateUpdated(details) {
  debugging_trace({details});

  let previousFrame = getFrameInfo(details.tabId, details.frameId);
  recordFrameFromNavigationEvent(details, {historyStateUpdated: true});

  // Don't rerun the snippets due to possible performance penalty (EE-507)
  let filterData = await applyContentFilters(
    details.tabId, details.frameId, previousFrame, true);

  await ignoreNoConnectionError(
    background_browser/* default */.A.tabs.sendMessage(
      details.tabId,
      {type: "ewe:apply-content-features", ...filterData},
      {frameId: details.frameId})
  );
}

/**
 * @ignore
 */
function _clear() {
  state.clear();
}

function handleOnRemoved(tabId) {
  state.delete(tabId);
  clearTabSitekeys(tabId);
}

function frame_state_onRemoved(tabId) {
  debugging_trace({tabId});
  handleOnRemoved(tabId);
}

function onReplaced(addedTabId, removedTabId) {
  debugging_trace({addedTabId, removedTabId});
  handleOnRemoved(removedTabId);
}

/**
 * Gets the state for a frame if we have it. If parentFrameId and
 * initiator are also provided, this function may also construct the
 * frame and add it to the frame state.
 *
 * @param {number} tabId The tabId of the tab the frame is on.
 * @param {number} frameId The frameId of the frame.
 * @param {?Object} [metadata] Additional metadata about the web
 *   request context that lead to asking for frame info, which might
 *   be used to create a FrameInfo if one doesn't exist already.
 * @param {?number} metadata.parentFrameId The frameId of the parent of the
 *   frame being requested. If this is set, it could be used to
 *   create the frame if it isn't already in the frame state.
 * @param {?string} metadata.initiator If getting the frame info is
 *   triggered by a web request, this should be the URL that initiated
 *   the request. If this is set, it can be used to provide a
 *   temporary frame state for use with service workers. In Firefox
 *   APIs, there is not an initiator but there is a documentUrl which
 *   can fulfil the same purpose.
 * @param {?string} metadata.documentUrl If getting the frame info is
 *   triggered by a web request, this should be the URL of the frame
 *   that initiated the request. If this is set, it could be used to
 *   create the frame if it isn't already in the frame state. This may
 *   not be available in Chrome. In Chrome, if initiator is provided,
 *   it can also be used to construct a FrameInfo, but this is not
 *   ideal since the initiator only contains the domain part of the
 *   URL.
 * @returns {?FrameInfo}
 */
function getFrameInfo(tabId, frameId,
                             {parentFrameId, initiator, documentUrl} = {}) {
  // tabId is -1 if the request came from a service worker, so we
  // construct a temporary frame state for it to use. We don't store
  // a tabId of -1 in our frame state, so we don't even need to check
  // it before returning.
  if (initiator && tabId == -1) {
    return new FrameInfo(tabId, frameId, null, initiator);
  }

  let frames = state.get(tabId);
  if (frames) {
    let frame = frames.get(frameId);
    if (frame) {
      return frame;
    }
  }

  // Sometimes the webRequest API can trigger for resources in a frame
  // before the onCommitted event for the frame. In this case, it
  // should be safe to construct the frame state early.
  if (documentUrl && typeof parentFrameId == "number") {
    return recordFrameFromNavigationEvent({
      tabId,
      frameId,
      parentFrameId,
      url: documentUrl
    });
  }
}

async function frame_state_start() {
  if (!frame_state_startupPromise) {
    addListener(onSitekeyReceived);

    background_browser/* default */.A.webNavigation.onBeforeNavigate.addListener(frame_state_onBeforeNavigate);
    background_browser/* default */.A.webNavigation.onCommitted.addListener(frame_state_onCommitted);
    background_browser/* default */.A.webNavigation.onErrorOccurred.addListener(onErrorOccurred);
    background_browser/* default */.A.webNavigation.onHistoryStateUpdated.addListener(
      frame_state_onHistoryStateUpdated);
    background_browser/* default */.A.tabs.onRemoved.addListener(frame_state_onRemoved);
    background_browser/* default */.A.tabs.onReplaced.addListener(onReplaced);

    frame_state_startupPromise = discoverExistingFrames();
  }

  await frame_state_startupPromise;
}

;// ./src/background/initializer.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */









let initializer_startupPromise;

/* harmony default export */ const initializer = ({
  /**
   * Initializes stateful modules that may be used in filtering requests.
   *
   * This function is idempotent. If you call it after initialization
   * has already been launched elsewhere, then it will return the same
   * promise as the original initialization. This allows this function
   * to be called anywhere that you need to ensure that initialization
   * has completed before continuing.
   *
   * Calling this function is required for the other API calls to
   * work, except for API event listener calls, which could also be
   * done before `start()`.
   * @return {Promise} Resolves when initialization is complete
   */
  start() {
    if (!initializer_startupPromise) {
      initializer_startupPromise = (async() => {
        await io.IO.initialize();
        await debugging.start();
        await (0,prefs.init)();
        await filterEngine.initialize();
        await frame_state_start();
        await dnr_filters_init();
        await cdp_start();
      })();
    }
    return initializer_startupPromise;
  }
});

;// ./src/background/subscribe-links.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */



let dispatchFunction;

function subscribeLinkClicked(url, title) {
  if (dispatchFunction) {
    dispatchFunction({url, title});
  }
}

let onSubscribeLinkClicked = new EventDispatcher(
  dispatch => {
    dispatchFunction = dispatch;
  },
  () => {
    dispatchFunction = null;
  }
);

;// ./src/background/allowlisting.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */














// Allowlisting depends on comparing timestamps which may be generated on
// different clocks on different servers across the internet. One day everyone
// will have perfectly synchronized clocks. Today however, we need some
// tolerance for if the two clocks are out of sync. Based on
// https://learn.microsoft.com/en-us/windows/security/threat-protection/security-policy-settings/maximum-tolerance-for-computer-clock-synchronization,
// Microsoft seems to expect 5 min to be a reasonable tolerance for clock
// skewing in Windows systems. This is also in the same order of magnitude the
// hour window we have for the timstamp to be valid.
const CLOCK_SKEW_TOLERANCE = 5 * time.MILLIS_IN_MINUTE;

// Note that this is a default implementation, but it might be
// replaced using `setAllowlistingCallback`. Don't rely on this
// behaviour.
let allowlistingCallback = function(domain, options) {
  let metadata = null;
  if (options && options.expiresAt) {
    metadata = {expiresAt: options.expiresAt};
  }
  return filters.add([`@@||${domain}^$document`], metadata);
};
let dispatchUnauthorized = () => {};

let authorizedPublicKeys = [];
let publicKeysUpdated = Promise.resolve();

let algorithm = {
  name: "RSASSA-PKCS1-v1_5",
  modulusLength: 4096,
  publicExponent: new Uint8Array([0x01, 0x00, 0x01]),
  hash: {name: "SHA-512"}
};

function getAllowData(domain, timestamp) {
  let str = `${domain},${timestamp}`;
  return (new TextEncoder()).encode(str);
}

async function verifySignature(data, signature, pubKey) {
  return crypto.subtle.verify(
    algorithm,
    pubKey,
    signature,
    data
  );
}

function verifyTimestamp(timestamp) {
  if (typeof timestamp != "number" || isNaN(timestamp)) {
    return false;
  }

  let now = Date.now();

  let inTheFuture = timestamp > now + CLOCK_SKEW_TOLERANCE;
  let tooOld = timestamp < now - time.MILLIS_IN_HOUR - CLOCK_SKEW_TOLERANCE;
  return !inTheFuture && !tooOld;
}

async function verifyAnySignatures(domain, timestamp, signature) {
  if (typeof signature != "string") {
    return false;
  }

  await publicKeysUpdated;

  let data = getAllowData(domain, timestamp);
  let abSignature = (0,rsa/* base64ToArrayBuffer */.Ms)(signature);
  for (let key of authorizedPublicKeys) {
    if (await verifySignature(data, abSignature, key)) {
      return true;
    }
  }
  return false;
}

function verifyOptions(options) {
  if (!options) {
    return true;
  }

  const keys = Object.keys(options);
  if (keys.length !== 1 || keys[0] !== "expiresAt") {
    return false;
  }

  if (!Number.isInteger(options.expiresAt)) {
    return false;
  }

  const now = Date.now();
  const minExpiresAt = now + time.MILLIS_IN_DAY - CLOCK_SKEW_TOLERANCE;
  const maxExpiresAt = now + 365 * time.MILLIS_IN_DAY + CLOCK_SKEW_TOLERANCE;
  if (options.expiresAt < minExpiresAt || options.expiresAt > maxExpiresAt) {
    return false;
  }

  return true;
}

async function succeedAllowlisting(domain, options) {
  await allowlistingCallback(domain, options);
  // EE-258: Edge adding dynamic DNR rules return promise earlier,
  // than it actually processes the rules. So we workaround it by
  // waiting for some time longer to let it actually finish the adding.
  if (background_browser/* default */.A.declarativeNetRequest && (0,info.isEdge)()) {
    const sleepIntervalMillis = prefs.Prefs.edge_one_click_allowlisting_delay;
    await new Promise(r => setTimeout(r, sleepIntervalMillis));
  }
  return true;
}

function failAllowlisting(error) {
  dispatchUnauthorized(error);
  return false;
}

async function allowlistPage(
  tabId, frameId, timestamp, signature, options
) {
  let frame = getFrameInfo(tabId, frameId);
  if (!frame) {
    return failAllowlisting({
      reason: "invalid_frame",
      request: {domain: null, timestamp, signature}
    });
  }

  let domain = frame.hostname;
  let request = {domain, timestamp, signature};

  if (frameId != 0) {
    return failAllowlisting({
      reason: "invalid_frame",
      request
    });
  }

  let urlInfo = (0,lib_url.parseURL)(frame.url);
  let alreadyAllowlistedDomain = filterEngine.defaultMatcher.isAllowlisted(
    `${urlInfo.protocol}//${domain}`,
    contentTypes.contentTypes.DOCUMENT,
    domain,
    frame.sitekey
  );
  if (alreadyAllowlistedDomain) {
    return failAllowlisting({
      reason: "already_allowlisted",
      request
    });
  }

  let validOptions = verifyOptions(options);
  if (!validOptions) {
    return failAllowlisting({
      reason: "invalid_options",
      request
    });
  }

  let validTimestamp = verifyTimestamp(timestamp);
  if (!validTimestamp) {
    return failAllowlisting({
      reason: "invalid_timestamp",
      request
    });
  }

  let validSignature = await verifyAnySignatures(domain, timestamp, signature);
  if (!validSignature) {
    return failAllowlisting({
      reason: "invalid_signature",
      request
    });
  }

  return await succeedAllowlisting(domain, options);
}

async function setAuthorizedKeys(keys) {
  let newAuthorizedPublicKeys = [];
  for (let key of keys) {
    let abKey = (0,rsa/* base64ToArrayBuffer */.Ms)(key);
    let importedKey = await crypto.subtle.importKey(
      "spki",
      abKey,
      algorithm,
      false,
      ["verify"]
    );
    newAuthorizedPublicKeys.push(importedKey);
  }
  authorizedPublicKeys = newAuthorizedPublicKeys;
}

/* harmony default export */ const allowlisting = ({
  /**
   * Updates the list of public keys used to verify allowlisting
   * requests. If there are any invalid keys, the list of authorized
   * keys keeps its previous value.
   *
   * Any allowlisting requests that come in while this function is in
   * progress will wait for it to finish before verifying any
   * signatures.
   *
   * @param {[string]} keys The new set of public keys. The keys
   *   should be base64 encoded strings, in SPKI format. The keys must
   *   additionally use the RSASSA-PKCS1-v1_5 algorithm, SHA512 hash
   *   and 4096 bit long modulus.
   * @return {Promise} Promise that resolves when the keys have been
   *   updated, or rejects if any of the keys are invalid.
   */
  async setAuthorizedKeys(keys) {
    let resultPromise = setAuthorizedKeys(keys);
    publicKeysUpdated = resultPromise.catch(() => {});
    return await resultPromise;
  },

  /**
   * @callback allowlistingCallback
   * @param {string} domain The domain to allowlist.
   * @param {?Object} options Additional options for the allowlisting.
   * @param {Number} [options.expiresAt] The timestamp when the filter should
   *  expire (allowed 1 day - 365 days in the future).
   */

  /**
   * Set the function called when allowlisting succeeds.
   *
   * If the callback is not set, it has a default implementation that
   * adds an allowlisting filter for the allowlisted domain.
   *
   * @param {allowlistingCallback} callback The user defined function
   *   that will be called. This function should return a promise that
   *   resolves after adding the appropriate allowlisting filters.
   */
  setAllowlistingCallback(callback) {
    allowlistingCallback = callback;
  },

  /**
   * @typedef {Object} AllowlistingAuthorizationError
   * @property {string} reason The reason a request to allowlist was
   *   rejected. Can be "invalid_frame", "already_allowlisted",
   *   "invalid_timestamp", "invalid_signature" or "invalid_options".
   * @property {Object} request The rejected request.
   * @property {string} [request.domain] The domain of the page that
   *   the request came from. This is also the domain that the request
   *   would have allowlisted if it was valid. If this is null, it
   *   means that the frame's domain could not be determined.
   * @property {*} request.timestamp The timestamp in the
   *   request. For a valid request this is a number, but the request
   *   may have been invalid so it might not be a number.
   * @property {*} request.signature The signature in the
   *   request. For a valid request, this is string, but the request
   *   may have been invalid so it might not be a string.
   */

  /**
   * Emitted when an allowlisting request is rejected.
   * @event
   * @type {EventDispatcher<AllowlistingAuthorizationError>}
   */
  onUnauthorized: new EventDispatcher(
    dispatch => {
      dispatchUnauthorized = dispatch;
    },
    () => {
      dispatchUnauthorized = () => {};
    }
  )
});

// EXTERNAL MODULE: ./adblockpluscore/lib/events.js
var lib_events = __nested_webpack_require_678579__(8583);
;// ./src/all/experiment-validation.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */

const SCHEMA_ID = "1";

function getErrors(data) {
  let errors = [];

  const requiredString = (field, obj, objRef) => {
    const valid = typeof obj[field] === "string";
    if (!valid) {
      errors.push(`\`${objRef}.${field}\` is not a string`);
    }
    return valid;
  };

  const optionalString = (field, obj, objRef) => {
    if (typeof obj[field] !== "undefined" && typeof obj[field] !== "string") {
      errors.push(`\`${objRef}.${field}\` is not a string`);
    }
  };

  const optionalBoolean = (field, obj, objRef) => {
    if (typeof obj[field] !== "undefined" && typeof obj[field] !== "boolean") {
      errors.push(`\`${objRef}.${field}\` is not a boolean`);
    }
  };

  const requiredObject = (field, obj, objRef) => {
    const valid = typeof obj[field] === "object";
    if (!valid) {
      errors.push(`\`${objRef}.${field}\` is not an object`);
    }
    return valid;
  };

  function isValidModValue(value) {
    return typeof value === "number" && value >= 0 && value <= 1000;
  }

  if (typeof data !== "object") {
    errors.push("root data is not an object");
    return errors;
  }

  if (data.schemaId !== SCHEMA_ID) {
    errors.push(`This system only supports a schemaId of '${SCHEMA_ID}'`);
    return errors;
  }

  if (!Array.isArray(data.experiments)) {
    errors.push("`experiments` is not an array");
    return errors;
  }

  let encounteredExperimentIds = new Set();
  let flagExperiments = new Map();

  data.experiments.forEach((experiment, experimentIndex) => {
    const experimentRef = `experiments[${experimentIndex}]`;

    if (requiredString("experimentId", experiment, experimentRef)) {
      if (encounteredExperimentIds.has(experiment.experimentId)) {
        errors.push(`\`${experimentRef}.experimentId\` ${experiment.experimentId} appears as the experiment ID on a previous experiment`);
      }

      encounteredExperimentIds.add(experiment.experimentId);
    }

    optionalString("name", experiment, experimentRef);
    optionalString("description", experiment, experimentRef);
    optionalBoolean("enabled", experiment, experimentRef);

    if (!Array.isArray(experiment.variants)) {
      errors.push(`\`${experimentRef}.variants\` is not an array`);
      return;
    }

    let encounteredVariantIds = new Set();
    let variantRanges = [];

    experiment.variants.forEach((variant, variantIndex) => {
      const variantRef = `${experimentRef}.variants[${variantIndex}]`;

      if (requiredString("variantId", variant, variantRef)) {
        if (encounteredVariantIds.has(variant.variantId)) {
          errors.push(`\`${variantRef}.variantId\` ${variant.variantId} appears as the variantId on a previous variant in this experiment`);
        }

        encounteredVariantIds.add(variant.variantId);
      }

      optionalString("name", variant, variantRef);

      if (requiredObject("flags", variant, variantRef)) {
        Object.keys(variant.flags).forEach(flag => {
          if (!flagExperiments.has(flag)) {
            flagExperiments.set(flag, experiment.experimentId);
          }
          else if (flagExperiments.get(flag) !== experiment.experimentId) {
            errors.push(`\`${variantRef}.flag[${flag}] appears in multiple experiments`);
          }
        });
      }

      if (!Array.isArray(variant.mods) || variant.mods.length !== 2) {
        errors.push(`\`${variantRef}.mods\` is not a two element array`);
        return;
      }

      const [start, end] = variant.mods;
      const validStart = isValidModValue(start);
      const validEnd = isValidModValue(end);

      if (!validStart) {
        errors.push(`\`${variantRef}.mods[0]\` is not a number between 0 and 1000`);
      }
      if (!validEnd) {
        errors.push(`\`${variantRef}.mods[1]\` is not a number between 0 and 1000`);
      }

      if (validStart && validEnd) {
        if (start >= end) {
          errors.push(`\`${variantRef}.mods[0]\` is not smaller than \`${variantRef}.mods[1]\``);
        }
        else {
          for (const [prevStart, prevEnd] of variantRanges) {
            if (start < prevEnd && prevStart < end) {
              errors.push(
                `Mod ranges [${prevStart}-${prevEnd}] and [${start}-${end}] overlap in experiment '${experiment.experimentId}'`
              );
            }
          }
          variantRanges.push([start, end]);
        }
      }
    });
  });


  return errors;
}

function validateExperimentData(data) {
  const errors = getErrors(data);

  return {
    errors: errors.length === 0 ? null : errors
  };
}

;// ./src/background/experiments.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */











let emitter = new lib_events.EventEmitter();
let experimentData = new PersistentState("ewe:split_experiments", browser_polyfill.storage.local);
let experimentUrl;
let experiments_scheduler;

let experiments_onChanged = new EventDispatcher(dispatch => {
  emitter.on("updated", async() => {
    dispatch(await getExperimentsInternal());
  });
});

async function hashString(str) {
  const sha1Buffer = await crypto.subtle.digest(
    "SHA-1",
    new TextEncoder().encode(str)
  );
  const bytes = new Uint8Array(sha1Buffer);
  const base64 = btoa(String.fromCharCode(...bytes));
  return base64.substring(0, 8);
}

async function modHashString(str) {
  const sha1Buffer = await crypto.subtle.digest(
    "SHA-1",
    new TextEncoder().encode(str)
  );
  const sha1DataView = new DataView(sha1Buffer);

  // For simplicity, we only use the first 32 bits of the sha1. This is enough
  // entropy to give us a good uniform distribution.
  const sha1Subset = sha1DataView.getUint32(0);
  const unscaledRangeSize = Math.pow(2, 32);

  // We get into the 0-1000 range by multiplying and dividing, rather than
  // modulo, because modulo would introduce a bias towards the lower ends of the
  // number range.
  const scaledRangeSize = 1000;
  const hash = Math.floor(sha1Subset * scaledRangeSize / unscaledRangeSize);

  return hash;
}

/**
 * @ignore
 * Sets the seed for the current client
 * @param {string} id - Seed ID
 */
async function setSeed(id) {
  const state = await experimentData.getStateLoaded();
  state.seed = id;
  state.etag = null; // This busts the cache to force reassignment.
  await experimentData.save();
}

async function getSeed() {
  const state = await experimentData.getStateLoaded();

  if (!state.seed) {
    state.seed = esm_browser_v4();
    await experimentData.save();
  }

  return state.seed;
}

async function assignVariants(experiments) {
  const seed = await getSeed();
  const flags = {};
  const assignments = {};

  for (const experiment of experiments) {
    if (experiment.enabled === false) {
      continue;
    }

    const mod = await modHashString(`${seed}:${experiment.experimentId}`);

    for (const variant of experiment.variants) {
      if (mod >= variant.mods[0] && mod < variant.mods[1]) {
        Object.assign(flags, variant.flags);
        assignments[experiment.experimentId] = variant.variantId;
        break;
      }
    }
  }

  return {flags, assignments};
}

async function getExperimentsInternal() {
  const state = await experimentData.getStateLoaded();
  const assignments = state.assignments || {};
  const rawData = state.rawData || {experiments: []};

  const experiments = rawData.experiments.map(experiment => {
    const variants = experiment.variants.map(variant => {
      return {
        id: variant.variantId,
        assigned: assignments[experiment.experimentId] === variant.variantId
      };
    });

    return {
      id: experiment.experimentId,
      variants
    };
  });

  return experiments;
}

/**
 *
 * @ignore
 * Starts the experiment system with periodic syncing
 * @param {string} url - URL endpoint for fetching experiment configurations
 * @param {number} [syncInterval=600000] - Interval in milliseconds between
 * syncs
 * @param {number} [errorRetryDelay=3600000] - Interval in milliseconds between
 * syncs if the last download had a network error.
 * @param {boolean} [disableAutosync=false] - If this is true, then syncing will
 * only happen if you call the sync function.
 */
function experiments_start(url, syncInterval = 10 * time.MILLIS_IN_MINUTE,
                      errorRetryDelay = time.MILLIS_IN_HOUR,
                      disableAutosync = false) {
  if (experiments_scheduler) {
    return;
  }

  experimentUrl = url;

  if (disableAutosync) {
    return;
  }

  experiments_scheduler = new Scheduler({
    async listener() {
      await syncData();
      return true;
    },
    async getNextTimestamp() {
      const state = await experimentData.getStateLoaded();

      let lastDownloaded = state.lastDownloaded;
      let lastNetworkError = state.lastNetworkError;

      if (lastNetworkError) {
        let nextRetryAfterError = new Date(lastNetworkError).getTime() +
            errorRetryDelay;
        let nowTimestamp = Date.now();
        let maxNextRetry = nowTimestamp + errorRetryDelay;
        if (nextRetryAfterError > maxNextRetry) {
          // This shouldn't happen if the clocks are working right. It implies
          // that the system clock has been set backwards since we stored that
          // timestamp. Let's correct the storage using our current clock
          // value. We shouldn't do this with lastPing because lastPing comes
          // from the server.
          nextRetryAfterError = maxNextRetry;
          state.lastNetworkError = new Date(nowTimestamp).toISOString();
          await experimentData.save();
        }

        return nextRetryAfterError;
      }
      else if (lastDownloaded) {
        return new Date(lastDownloaded).getTime() + syncInterval;
      }

      return null;
    },
    interval: syncInterval,
    errorRetryDelay
  });
}

/**
 * @ignore
 */
async function experiments_reset() {
  experiments_stop();
  experimentData.clearState();
  await experimentData.save();
}

/**
 * @ignore
 */
function experiments_stop() {
  if (!experiments_scheduler) {
    return;
  }

  experiments_scheduler.stop();
  experiments_scheduler = null;
}

async function downloadExperimentsFile() {
  const state = await experimentData.getStateLoaded();

  const headers = {};
  if (state.etag) {
    headers["if-none-match"] = state.etag;
  }

  try {
    const response = await fetch(experimentUrl, {headers});

    const date = response.headers.get("date");
    const etag = response.headers.get("etag");

    if (response.status === 304) {
      return {cacheFresh: true, date, etag};
    }

    if (!response.ok) {
      return {downloadError: true};
    }

    const data = await response.json();
    const revisionId = await hashString(JSON.stringify(data));

    return {newExperimentData: data, date, etag, revisionId};
  }
  catch (e) {
    return {downloadError: true};
  }
}

/**
 * Synchronizes experiment data using the experimentUrl configured
 * @returns {Promise<void>}
 */
async function syncData() {
  const state = await experimentData.getStateLoaded();

  if (!experimentUrl) {
    state.lastNetworkError = new Date().toISOString();
    await experimentData.save();
    return;
  }

  const {
    downloadError,
    cacheFresh,
    newExperimentData: data,
    date,
    etag,
    revisionId
  } = await downloadExperimentsFile();

  if (downloadError) {
    state.lastNetworkError = new Date().toISOString();
    await experimentData.save();
    return;
  }

  delete state.lastNetworkError;

  if (date) {
    state.lastDownloaded = new Date(date).toISOString();
  }
  else {
    state.lastDownloaded = new Date().toISOString();
  }

  if (cacheFresh) {
    // Data hasn't changed since last sync, so nothing to update except the
    // lastDownload timestamp.
    await experimentData.save();
    return;
  }

  state.etag = etag;
  state.rawData = data;

  const {errors} = validateExperimentData(data);

  if (errors && errors.length > 0) {
    state.errors = errors;
    await experimentData.save();
    return;
  }

  state.errors = [];
  state.revisionId = revisionId;
  const {flags, assignments} = await assignVariants(data.experiments);
  state.flags = flags;
  state.assignments = assignments;

  await experimentData.save();

  emitter.emit("updated");
}

/**
 * API to interact with split experiments
 * @namespace experiments
 */
/* harmony default export */ const experiments = ({
  /**
   * Represents an experiment
   * @typedef {Object} Experiment
   * @property {string} id Experiment ID.
   * @property {Array.<ExperimentVariant>} variants Experiment variants.
   */

  /**
   * Represents the experiment data synchronization status
   * @typedef {Object} ExperimentSyncStatus
   * @property {Array<string>} errors Errors from the last experiments
   *   synchronization.
   * @property {string?} lastDownloaded ISO formatting timestamp when experiment
   *   data was last successfully downloaded. This is also updated if the server
   *   returned a response of 304 - not modified. Undefined if there have been
   *   no successful downloads.
   * @property {string?} lastNetworkError ISO formatting timestamp of the last
   *   download attempt if that attempt had a network error. Undefined if the
   *   last sync was successful.
   */

  /**
   * Represents a variant of an experiment
   * @typedef {Object} ExperimentVariant
   * @property {string} id Experiment variant ID.
   * @property {boolean} assigned Indicates whether current user is assigned to
   *   the experiment variant.
   */

  /**
   * Manually triggers synchronization of experiment data
   * @returns {Promise<void>}
   */
  async sync() {
    await syncData();
  },

  /**
   * Retrieves the status of the latest synchronization of experiment data
   * @returns {Promise<ExperimentSyncStatus>} Experiment data synchronization
   *   status
   */
  async getSyncStatus() {
    const state = await experimentData.getStateLoaded();

    return {
      errors: state.errors || [],
      lastDownloaded: state.lastDownloaded,
      lastNetworkError: state.lastNetworkError
    };
  },

  /**
   * Retrieves the value of a feature flag
   * @param {string} flagId - Identifier of the feature flag
   * @returns {Promise<*|null>} Value of the feature flag or null if not found
   */
  async getFlag(flagId) {
    const state = await experimentData.getStateLoaded();

    if (state && state.overrides && typeof state.overrides[flagId] !== "undefined") {
      return state.overrides[flagId];
    }

    if (state && state.flags && typeof state.flags[flagId] !== "undefined") {
      return state.flags[flagId];
    }

    return null;
  },

  /**
   * Retrieves all feature flags, including overridden flags
   * @returns {Promise<Object>} Object specifying all of
   *          the feature flag IDs and their values
   *          (or an empty object)
   */
  async getFlags() {
    let state = await experimentData.getStateLoaded();

    if (!state) {
      return {};
    }

    return {...state.flags, ...state.overrides};
  },

  /**
   * Overrides a feature flag value
   * @param {string} flagId - Identifier of the feature flag to override
   * @param {*} value - New value for the feature flag
   * @returns {Promise<void>}
   */
  async overrideFlag(flagId, value) {
    const state = await experimentData.getStateLoaded();

    if (!state.overrides) {
      state.overrides = {};
    }

    if (state.overrides[flagId] === value) {
      return;
    }

    state.overrides[flagId] = value;
    await experimentData.save();

    emitter.emit("updated");
  },

  /**
   * Clears all feature flag overrides
   * @returns {Promise<void>}
   */
  async clearFlagOverrides() {
    const state = await experimentData.getStateLoaded();

    if (!state.overrides || Object.keys(state.overrides).length === 0) {
      return;
    }

    state.overrides = {};
    await experimentData.save();

    emitter.emit("updated");
  },

  /**
   * Retrieves current experiment variant assignments for the current client
   * @returns {Promise<Object.<string, string>>} Object specifying the assigned
   *   variant ID for each active assigned experiment ID
   * @example
   * await ewe.experiments.getAssignments();
   * // returns { "experiment1": "variant1", "experiment2": "variant2" }
   */
  async getAssignments() {
    const state = await experimentData.getStateLoaded();
    return state.assignments || {};
  },

  /**
   * Retrieves current experiments
   * @returns {Promise<Array.<Experiment>>} Current experiments
   * @example
   * await ewe.experiments.getExperiments();
   * // returns [ {
   * //   "id": "experiment1",
   * //   "variants": [ {
   * //     "id": "variant1",
   * //     "assigned": true
   * //   } ]
   * // } ]
   */
  async getExperiments() {
    return getExperimentsInternal();
  },

  /**
   * Retrieves current experiment data revision ID
   * @returns {string?} Experiment data revision ID
   */
  async getRevisionId() {
    const state = await experimentData.getStateLoaded();
    return state.revisionId || null;
  },

  /**
   * Emitted when experiment data has changed
   * @event
   * @type {EventDispatcher<Array<Experiment>>}
   */
  onChanged: experiments_onChanged
});

;// ./src/background/message-responder.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */
















async function handleMessage(message, sender) {
  debugging_trace({
    message, sender: {
      tabId: sender.tab ? sender.tab.id : null,
      frameId: sender.frameId,
      url: sender.url
    }
  });
  await initializer.start();
  switch (message.type) {
    case "ewe:content-hello":
      // Firefox mistakenly runs content scripts in non-web page context,
      // it does not happen in Chrome.
      // https://gitlab.com/eyeo/adblockplus/abc/webext-ad-filtering-solution/-/issues/174.
      // Messages sent from a non-web page context do not have an
      // associated tab and can be ignored.
      if (!sender.tab) {
        return;
      }

      onContentHelloReceived(sender.tab.id, sender.frameId);
      let filterData = await applyContentFilters(sender.tab.id, sender.frameId);
      return {...filterData};
    case "ewe:subscribe-link-clicked":
      subscribeLinkClicked(message.url, message.title);
      break;
    case "ewe:trace-elem-hide":
      logHiddenElements(message.selectors, message.filters, sender);
      break;
    case "ewe:inject-css":
      let styleSheet = (0,elemHide.createStyleSheet)([message.selector]);
      injectCSS(sender.tab.id, sender.frameId, styleSheet);
      break;
    case "ewe:allowlist-page":
      const {timestamp, signature, options} = message;
      return allowlistPage(
        sender.tab.id, sender.frameId, timestamp, signature, options
      );
    case "ewe:cdp-session-active":
      await markActive(sender.tab.id, sender.frameId);
      break;
    case "ewe:blockthrough-acceptable-ads-detection-event":
      await countBTAADetectionEvent(sender.tab.url, message.details);
      break;
    case "ewe:sentry-error":
      const error = fromSerializableError(message.error);
      sentry.reportError(error);
      break;
    case "ewe:get-experiment-flag":
      const {flagId} = message;
      return await experiments.getFlag(flagId);
    case "ewe:get-experiment-flags":
      return await experiments.getFlags();
  }
}

function onMessage(message, sender) {
  if (typeof message == "object" && message != null &&
      message.type && message.type.startsWith("ewe:")) {
    return handleMessage(message, sender);
  }
  return false;
}

/**
 * Start the message responder module. In MV3, this must be called in
 * the first turn of the event loop.
 */
function message_responder_start() {
  browser_polyfill.runtime.onMessage.addListener(onMessage);
}

;// ./src/background/popup-blocker-background-page.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */











let loadingPopups = new Map();

function forgetPopup(tabId) {
  loadingPopups.delete(tabId);

  if (loadingPopups.size == 0) {
    browser_polyfill.webRequest.onBeforeRequest.removeListener(onPopupURLChanged);
    browser_polyfill.webNavigation.onBeforeNavigate.removeListener(onPopupURLChanged);
    browser_polyfill.webNavigation.onCompleted.removeListener(popup_blocker_background_page_onCompleted);
    browser_polyfill.tabs.onRemoved.removeListener(onTabRemoved);
  }
}

function checkPotentialPopup(popupTabId, url, opener) {
  let {docDomain, sitekey, specificOnly} = opener;

  let filter = filterEngine.defaultMatcher.match(
    url || BLANK_PAGE_URL, contentTypes.contentTypes.POPUP,
    docDomain, sitekey, specificOnly
  );

  if (filter) {
    logItem({tabId: opener.tabId, frameId: 0, url}, filter,
            {docDomain, specificOnly, method: "popup"});

    if (filter instanceof filterClasses.BlockingFilter) {
      browser_polyfill.tabs.remove(popupTabId).catch(() => {});
    }

    forgetPopup(popupTabId);
  }
}

function onPopupURLChanged({frameId, tabId, url}) {
  debugging_trace({frameId, tabId, url});

  if (!isTopLevelFrameId(frameId)) {
    return;
  }

  let opener = loadingPopups.get(tabId);
  if (opener) {
    checkPotentialPopup(tabId, url, opener);
  }
}

function popup_blocker_background_page_onCompleted({frameId, tabId, url}) {
  debugging_trace({frameId, tabId, url});

  if (isTopLevelFrameId(frameId) && url != BLANK_PAGE_URL) {
    forgetPopup(tabId);
  }
}

function onTabRemoved(tabId) {
  debugging_trace({tabId});
  forgetPopup(tabId);
}

function onPopup({tabId, url, sourceTabId, sourceFrameId}) {
  debugging_trace({tabId, url, sourceTabId, sourceFrameId});

  let frame = getFrameInfo(sourceTabId, sourceFrameId) || {};

  if (frame.allowlisted & contentTypes.contentTypes.DOCUMENT) {
    return;
  }

  if (loadingPopups.size == 0) {
    browser_polyfill.webRequest.onBeforeRequest.addListener(
      onPopupURLChanged,
      {
        urls: ["http://*/*", "https://*/*"],
        types: ["main_frame"]
      }
    );
    browser_polyfill.webNavigation.onBeforeNavigate.addListener(onPopupURLChanged);
    browser_polyfill.webNavigation.onCompleted.addListener(popup_blocker_background_page_onCompleted);
    browser_polyfill.tabs.onRemoved.addListener(onTabRemoved);
  }

  let opener = {
    tabId: sourceTabId,
    specificOnly: Boolean(frame.allowlisted & contentTypes.contentTypes.GENERICBLOCK),
    docDomain: frame.hostname,
    sitekey: frame.sitekey
  };

  loadingPopups.set(tabId, opener);
  checkPotentialPopup(tabId, url, opener);
}

function onTabCreated({id, url, openerTabId}) {
  debugging_trace({id, url, openerTabId});

  if (openerTabId) {
    onPopup({tabId: id, url, sourceTabId: openerTabId, sourceFrameId: 0});
  }
}

/**
 * Starts blocking popups. Must only be called after filter engine and
 * frame state are initialized.
 */
function popup_blocker_background_page_start() {
  browser_polyfill.webNavigation.onCreatedNavigationTarget.addListener(onPopup);

  // On Firefox, clicking on a <a target="_blank" rel="noopener"> link doesn't
  // emit the webNavigation.onCreatedNavigationTarget event (and Firefox >=79,
  // implies "noopener" by default). But on Chrome, opening a new empty tab
  // emits the tabs.onCreated event with openerTabId set. So this would
  // cause new tabs created by the user to be considered popups too, on Chrome.
  if (typeof netscape != "undefined") {
    browser_polyfill.tabs.onCreated.addListener(onTabCreated);
  }
}

;// ./src/background/popup-blocker-service-worker.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */












const SESSION_STORAGE_KEY = "ewe:popupBlocker:loadingPopups";

class PotentialPopupMap {
  constructor() {
    this.openerPromiseMap = {};
    this.loaded = (async() => {
      let result = await browser_polyfill.storage.session.get([SESSION_STORAGE_KEY]);
      this.openerMap = result[SESSION_STORAGE_KEY] || {};
    })();
  }

  async saveMap() {
    await browser_polyfill.storage.session.set({
      [SESSION_STORAGE_KEY]: this.openerMap
    });
  }

  set(tabId, openerPromise) {
    if (this.openerPromiseMap[tabId] ||
        (this.openerMap && this.openerMap[tabId])) {
      return;
    }

    this.openerPromiseMap[tabId] = openerPromise;
    openerPromise.then(async opener => {
      await this.loaded;

      delete this.openerPromiseMap[tabId];
      if (opener) {
        this.openerMap[tabId] = opener;
        await this.saveMap();
      }
    });
  }

  async get(tabId) {
    let openerPromise = this.openerPromiseMap[tabId];
    if (openerPromise) {
      return await openerPromise;
    }

    await this.loaded;
    let opener = this.openerMap[tabId];
    return opener;
  }

  has(tabId) {
    return Object.hasOwnProperty.call(this.openerPromiseMap, tabId) ||
      (this.openerMap && Object.hasOwnProperty.call(this.openerMap, tabId));
  }

  async remove(tabId) {
    if (this.openerPromiseMap[tabId]) {
      delete this.openerPromiseMap[tabId];
    }

    await this.loaded;
    if (this.openerMap[tabId]) {
      delete this.openerMap[tabId];
      await this.saveMap();
    }
  }
}

let potentialPopups;

async function popup_blocker_service_worker_checkPotentialPopup(popupTabId, url, opener) {
  await initializer.start();
  let {docDomain, sitekey, specificOnly} = opener;

  // because of the async nature of getting to this point, it might
  // have been handled before we get here.
  if (!potentialPopups.has(popupTabId)) {
    return;
  }

  let filter = filterEngine.defaultMatcher.match(
    url || BLANK_PAGE_URL, contentTypes.contentTypes.POPUP, docDomain, sitekey, specificOnly
  );

  if (filter) {
    logItem({tabId: opener.tabId, frameId: 0, url}, filter,
            {docDomain, specificOnly, method: "popup"});

    if (filter instanceof filterClasses.BlockingFilter) {
      browser_polyfill.tabs.remove(popupTabId).catch(() => {});
    }

    await potentialPopups.remove(popupTabId);
  }
}

async function popup_blocker_service_worker_onPopupURLChanged({frameId, tabId, url}) {
  debugging_trace({frameId, tabId, url});

  if (!isTopLevelFrameId(frameId)) {
    return;
  }

  let opener = await potentialPopups.get(tabId);
  if (opener) {
    await popup_blocker_service_worker_checkPotentialPopup(tabId, url, opener);
  }
}

async function popup_blocker_service_worker_onCompleted({frameId, tabId, url}) {
  debugging_trace({frameId, tabId, url});

  if (!isTopLevelFrameId(frameId) || url == BLANK_PAGE_URL) {
    return;
  }

  let opener = await potentialPopups.get(tabId);
  if (opener) {
    await popup_blocker_service_worker_checkPotentialPopup(tabId, url, opener);
    await potentialPopups.remove(tabId);
  }
}

async function popup_blocker_service_worker_onTabRemoved(tabId) {
  debugging_trace({tabId});
  await potentialPopups.remove(tabId);
}

async function popup_blocker_service_worker_onPopup({tabId, url, sourceTabId, sourceFrameId}) {
  debugging_trace({tabId, url, sourceTabId, sourceFrameId});

  let openerPromise = (async() => {
    await initializer.start();
    let frame = getFrameInfo(sourceTabId, sourceFrameId) || {};

    if (frame.allowlisted & contentTypes.contentTypes.DOCUMENT) {
      return;
    }

    let opener = {
      tabId: sourceTabId,
      specificOnly: Boolean(frame.allowlisted & contentTypes.contentTypes.GENERICBLOCK),
      docDomain: frame.hostname,
      sitekey: frame.sitekey
    };
    return opener;
  })();

  potentialPopups.set(tabId, openerPromise);

  let opener = await openerPromise;
  if (opener) {
    await popup_blocker_service_worker_checkPotentialPopup(tabId, url, opener);
  }
}

/**
 * Starts blocking popups. Must be called in the first turn of the
 * event loop.
 */
function popup_blocker_service_worker_start() {
  potentialPopups = new PotentialPopupMap();

  browser_polyfill.webNavigation.onCreatedNavigationTarget.addListener(popup_blocker_service_worker_onPopup);
  browser_polyfill.webRequest.onBeforeRequest.addListener(
    popup_blocker_service_worker_onPopupURLChanged,
    {
      urls: ["http://*/*", "https://*/*"],
      types: ["main_frame"]
    }
  );
  browser_polyfill.webNavigation.onBeforeNavigate.addListener(popup_blocker_service_worker_onPopupURLChanged);
  browser_polyfill.webNavigation.onCommitted.addListener(popup_blocker_service_worker_onPopupURLChanged);
  browser_polyfill.webNavigation.onCompleted.addListener(popup_blocker_service_worker_onCompleted);
  browser_polyfill.tabs.onRemoved.addListener(popup_blocker_service_worker_onTabRemoved);
}

;// ./src/background/request-filter.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */















const EXTENSION_PROTOCOL = new URL(browser_polyfill.runtime.getURL("")).protocol;

let resourceTypes = new Map();
for (let type in contentTypes.contentTypes) {
  resourceTypes.set(type.toLowerCase(), contentTypes.contentTypes[type]);
}
resourceTypes.set("sub_frame", contentTypes.contentTypes.SUBDOCUMENT);
resourceTypes.set("beacon", contentTypes.contentTypes.PING);
resourceTypes.set("imageset", contentTypes.contentTypes.IMAGE);
resourceTypes.set("object_subrequest", contentTypes.contentTypes.OBJECT);
resourceTypes.set("main_frame", contentTypes.contentTypes.DOCUMENT);

let typeSelectors = new Map([
  [contentTypes.contentTypes.IMAGE, "img,input"],
  [contentTypes.contentTypes.MEDIA, "audio,video"],
  [contentTypes.contentTypes.SUBDOCUMENT, "frame,iframe,object,embed"],
  [contentTypes.contentTypes.OBJECT, "object,embed"]
]);

function getRequestContentType(details) {
  let contentType = resourceTypes.get(details.type) || contentTypes.contentTypes.OTHER;
  if (contentType == contentTypes.contentTypes.DOCUMENT) {
    return contentTypes.contentTypes.OTHER;
  }
  return contentType;
}

function getFrameId(details) {
  // sub_frame requests are loading the iframe document itself, so
  // from our point of view the initiating frame is actually the
  // parent of the iframe.
  return details.type == "sub_frame" ? details.parentFrameId :
    details.frameId;
}

function getParentFrameId(details) {
  if (details.type == "sub_frame") {
    // frameAncestors is exactly what we need, but it's only
    // available in Firefox so sometimes we just don't have what we
    // need :(
    if (!details.frameAncestors) {
      return null;
    }

    return details.frameAncestors.length > 1 ?
      details.frameAncestors[1].frameId : -1;
  }
  return details.parentFrameId;
}

// Initiators have this weird thing where they sometimes use the string "null"
// instead of just giving a value of null.
function sanitizeInitiator(initiator) {
  return initiator == "null" ? null : initiator;
}

function getFrameInfoFromWebrequestDetails(details) {
  let tabId = details.tabId;
  let frameId = getFrameId(details);
  let parentFrameId = getParentFrameId(details);
  let initiator = sanitizeInitiator(details.initiator) || details.documentUrl;
  let documentUrl = details.documentUrl || sanitizeInitiator(details.initiator);

  let frame = getFrameInfo(tabId, frameId, {
    initiator,
    parentFrameId,
    documentUrl
  });

  if (!frame || frame.isChangingURL) {
    // `isChangingURL` indicates that `onBeforeNavigate` was already
    // triggered, but `onCommited` was not yet triggered. Thus we don't really
    // know the actual allowlisting state.
    return null;
  }

  return frame;
}

function getParentFrameInfoFromWebrequestDetails(details) {
  if (!isValidFrameId(details.parentFrameId)) {
    return null;
  }

  let parentFrame = getFrameInfo(details.tabId, details.parentFrameId);
  // Due to a chrome bug, the parent frame might not exist. In this
  // case, we should fall back to the root frame. See
  // https://bugs.chromium.org/p/chromium/issues/detail?id=725917
  if (!parentFrame && isValidChildFrameId(details.parentFrameId)) {
    parentFrame = getFrameInfo(details.tabId, 0);
  }

  return parentFrame;
}

let pendingAllowlistedRequests = new Set();
let pendingCspRequests = new Set();

class BaseFilter {
  register() {
    if (!this.listener) {
      this.listener = this.filter.bind(this);
      this.event.addListener(this.listener, ...this.eventArgs);
    }
  }

  unregister() {
    if (this.listener) {
      this.event.removeListener(this.listener);
      this.listener = null;
    }
  }

  getDocDomain(type, hostname) {
    return type == "main_frame" ? null : hostname;
  }

  getInitiator(details) {
    // Chrome calls it initiator, Firefox calls it documentUrl
    return sanitizeInitiator(details.initiator) || details.documentUrl;
  }

  getDocumentUrl(details) {
    return details.documentUrl || sanitizeInitiator(details.initiator);
  }

  collapse(details) {
    let selector = typeSelectors.get(getRequestContentType(details));
    let frameId = getFrameId(details);

    if (selector && frameId != -1) {
      sendContentMessage(
        details.tabId, frameId,
        {type: "ewe:collapse", selector, url: details.url}
      );
    }
    else {
      warn("No selector or frameId", JSON.stringify(details));
    }
  }

  block(details, filter, matchInfo) {
    let value = (() => {
      if (typeof filter.rewrite == "string") {
        let rewrittenUrl = filter.rewriteUrl(details.url);
        // If no rewrite happened (error, different origin), we'll
        // return undefined in order to avoid an "infinite" loop.
        if (rewrittenUrl != details.url) {
          matchInfo.rewrittenUrl = rewrittenUrl;
          return {redirectUrl: rewrittenUrl};
        }
      }
      else {
        this.collapse(details);
        return {cancel: true};
      }
    })();
    logItem(details, filter, matchInfo);
    return value;
  }

  allow(details, filter, matchInfo) {
    pendingAllowlistedRequests.add(details.requestId);
    logItem(details, filter, matchInfo);
  }

  match(details, frame, specificOnly, contentType, docDomain) {
    // This does nothing in BaseFilter, but should be overridden in
    // any child class that uses the default implementation of
    // BaseFilter.filter.
  }

  filter(details) {
    if (pendingAllowlistedRequests.has(details.requestId)) {
      return;
    }

    let initiator = this.getInitiator(details);
    if (initiator && initiator.startsWith(EXTENSION_PROTOCOL)) {
      // These are requests sent by an extension, so if we block these
      // we could block our own ability to update subscriptions etc.
      return this.allow(details, null, {
        method: "allowing", allowingReason: "extensionInitiated"
      });
    }

    let frame = getFrameInfoFromWebrequestDetails(details);

    if (!frame) {
      return;
    }

    let specificOnly = (frame.allowlisted & contentTypes.contentTypes.GENERICBLOCK) != 0;
    let docDomain = this.getDocDomain(details.type, frame.hostname);
    if (frame.allowlisted & contentTypes.contentTypes.DOCUMENT) {
      return this.allow(details, frame.allowingDocumentFilter, {
        docDomain,
        method: "allowing",
        specificOnly
      });
    }

    let contentType = getRequestContentType(details);

    return this.match(details, frame, specificOnly, contentType, docDomain);
  }
}

class RequestFilter extends BaseFilter {
  getDocumentUrl(details) {
    // We can be more idealistic here since we are doing this check
    // again later if we don't have enough info. documentUrl SHOULD
    // only ever be documentUrl (not initiator).
    return details.documentUrl;
  }

  getFrameInfo(details) {
    let frame = super.getFrameInfo(details);

    // Chromium-based browsers sometimes emit onBeforeRequest events
    // for resources on a frame before we get the onCommitted event
    // for the frame itself. This could mean that we're missing some
    // frame-level allowlisting filters, and can't actually make a
    // blocking decision yet. We only do this wait in the
    // onBeforeRequest filter because we can still do the blocking /
    // allowing when we have all the necessary info later in the
    // onHeadersReceived event.
    //
    // As an aside, if in the future we only needed to support Firefox
    // here, Firefox supports asynchronous blocking responses in the
    // webRequest API.
    if (frame) {
      // We might be missing sitekeys if we haven't received headers yet.
      if (!frame.headersReceived) {
        return null;
      }

      // A wrong URL likely means that we've navigated to a new page
      // and frame-state hasn't caught up yet.
      let {documentUrl} = details;
      let initiator = sanitizeInitiator(details.initiator);
      if ((documentUrl && frame.url != documentUrl) ||
         (initiator && frame.hostname != (0,lib_url.parseURL)(initiator).hostname)) {
        return null;
      }
    }

    return frame;
  }

  match(details, frame, specificOnly, contentType, docDomain) {
    let filter = filterEngine.defaultMatcher.match(
      details.url, contentType, docDomain, frame.sitekey, specificOnly, true
    );
    if (filter) {
      let matchInfo = {docDomain, specificOnly, method: "request"};
      if (filter instanceof filterClasses.BlockingFilter) {
        return this.block(details, filter, matchInfo);
      }
      return this.allow(details, filter, matchInfo);
    }
  }
}

RequestFilter.prototype.event = browser_polyfill.webRequest.onBeforeRequest;
RequestFilter.prototype.eventArgs = [
  {
    types: Object.values(browser_polyfill.webRequest.ResourceType)
                 .filter(type => type != "main_frame"),
    urls: ["http://*/*", "https://*/*", "ws://*/*", "wss://*/*"]
  },
  ["blocking"]
];

class HeaderFilter extends BaseFilter {
  match(details, frame, specificOnly, contentType, docDomain) {
    let matcher = filterEngine.defaultMatcher;

    // This is a repeat of the RequestFilter check, in case it was
    // skipped due to not having enough frame information at the time.
    let requestFilter = matcher.match(
      details.url, contentType, docDomain, frame.sitekey, specificOnly, true
    );
    if (requestFilter) {
      let requestMatchInfo = {docDomain, specificOnly, method: "request"};
      if (requestFilter instanceof filterClasses.BlockingFilter) {
        return this.block(details, requestFilter, requestMatchInfo);
      }
      return this.allow(details, requestFilter, requestMatchInfo);
    }

    let matchInfo = {docDomain, specificOnly, method: "header"};
    let typeMask = contentTypes.contentTypes.HEADER | contentType;
    let allowingFilter = matcher.match(details.url, typeMask, docDomain,
                                       frame.sitekey, specificOnly, true);

    if (allowingFilter && allowingFilter instanceof filterClasses.AllowingFilter) {
      return this.allow(details, allowingFilter, matchInfo);
    }

    let matches = matcher.search(details.url, typeMask, docDomain,
                                 frame.sitekey, specificOnly, "blocking");

    let filter = matches.blocking.find(blockingFilter => {
      return blockingFilter.filterHeaders(details.responseHeaders);
    });

    if (filter) {
      return this.block(details, filter, matchInfo);
    }
  }
}

HeaderFilter.prototype.event = browser_polyfill.webRequest.onHeadersReceived;
HeaderFilter.prototype.eventArgs = [
  {
    types: Object.values(browser_polyfill.webRequest.ResourceType)
                 .filter(type => type != "main_frame"),
    urls: ["http://*/*", "https://*/*"]
  },
  browser_polyfill.declarativeNetRequest ? ["responseHeaders"] : ["blocking", "responseHeaders"]
];

class CSPFilter extends BaseFilter {
  filter(details) {
    let {requestId, tabId, frameId, responseHeaders, url, type} = details;

    if (pendingAllowlistedRequests.has(requestId)) {
      return;
    }

    let initiator = this.getInitiator(details);
    if (initiator && initiator.startsWith(EXTENSION_PROTOCOL)) {
      // These are requests sent by an extension, so if we block these
      // we could block our own ability to update subscriptions etc.
      return this.allow(details, null, {
        method: "allowing", allowingReason: "extensionInitiated"
      });
    }

    let parentFrame = getParentFrameInfoFromWebrequestDetails(details);
    let {hostname: parentHostname, sitekey: parentSitekey} = parentFrame || {};
    let matcher = filterEngine.defaultMatcher;

    let urlInfo = (0,lib_url.parseURL)(url);
    let hostname = parentHostname || urlInfo.hostname;
    let sitekey = setSitekeyFromHeaders(
      tabId, frameId, url, responseHeaders
    ) || parentSitekey;

    let specificOnlyFilter = matcher.match(
      url, contentTypes.contentTypes.GENERICBLOCK, hostname, sitekey
    );
    let documentFilter = matcher.match(
      url, contentTypes.contentTypes.DOCUMENT, hostname, sitekey
    );
    let specificOnly = !!specificOnlyFilter;
    let docDomain = this.getDocDomain(type, parentHostname);

    if (documentFilter) {
      return this.allow(details, documentFilter, {
        docDomain,
        method: "allowing",
        specificOnly
      });
    }

    let typeMask = contentTypes.contentTypes.CSP | getRequestContentType(details);
    let matchInfo = {docDomain: docDomain || urlInfo.hostname,
                     specificOnly, method: "csp"};

    let allowingFilter = matcher.match(url, typeMask, docDomain,
                                       sitekey, specificOnly, true);
    if (allowingFilter && allowingFilter instanceof filterClasses.AllowingFilter) {
      return this.allow(details, allowingFilter, matchInfo);
    }

    let matches = matcher.search(url, typeMask, hostname,
                                 sitekey, specificOnly, "blocking");

    if (matches.blocking.length > 0) {
      pendingCspRequests.add(requestId);
      for (let filter of matches.blocking) {
        logItem(details, filter, matchInfo);
        responseHeaders.push(
          {name: "Content-Security-Policy", value: filter.csp}
        );
      }
    }

    return {responseHeaders};
  }
}

CSPFilter.prototype.event = browser_polyfill.webRequest.onHeadersReceived;
CSPFilter.prototype.eventArgs = [
  {
    types: ["main_frame", "sub_frame"],
    urls: ["http://*/*", "https://*/*"]
  },
  browser_polyfill.declarativeNetRequest ? ["responseHeaders"] : ["blocking", "responseHeaders"]
];

class RequestCompletionFilter extends BaseFilter {
  filter(details) {
    let {requestId, tabId, frameId, url, type} = details;
    let wasAllowlisted = pendingAllowlistedRequests.delete(requestId);
    let wasCsp = pendingCspRequests.delete(requestId);
    if (wasAllowlisted || wasCsp) {
      return;
    }

    if (type == "main_frame" || type == "sub_frame") {
      // for these two types, it's unreliable if frame is there or not
      // yet. The request could be completed before or after the new
      // frame is committed.
      let parentFrame = getParentFrameInfoFromWebrequestDetails(details);
      let {hostname: parentHostname, sitekey: parentSitekey} =
          parentFrame || {};

      let hostname = parentHostname || (0,lib_url.parseURL)(url).hostname;
      let sitekey = getSitekey(tabId, frameId, url) || parentSitekey;
      let matcher = filterEngine.defaultMatcher;
      let specificOnlyFilter = matcher.match(
        url, contentTypes.contentTypes.GENERICBLOCK, hostname, sitekey
      );
      let specificOnly = !!specificOnlyFilter;

      if (isTopLevelFrameId(frameId)) {
        let popupFilter = matcher.match(
          url, contentTypes.contentTypes.POPUP, hostname, sitekey, specificOnly
        );
        if (popupFilter) {
          return;
        }
      }
      let matchInfo = {
        docDomain: this.getDocDomain(type, hostname),
        method: "unmatched",
        specificOnly
      };
      logItem(details, null, matchInfo);
    }
    else {
      let frame = getFrameInfoFromWebrequestDetails(details);
      if (!frame) {
        return;
      }

      let specificOnly = (frame.allowlisted & contentTypes.contentTypes.GENERICBLOCK) != 0;
      let matchInfo = {
        docDomain: this.getDocDomain(type, frame.hostname),
        method: "unmatched",
        specificOnly
      };
      logItem(details, null, matchInfo);
    }
  }
}

RequestCompletionFilter.prototype.event = browser_polyfill.webRequest.onCompleted;
RequestCompletionFilter.prototype.eventArgs = [
  {
    types: Object.values(browser_polyfill.webRequest.ResourceType),
    urls: ["http://*/*", "https://*/*", "ws://*/*", "wss://*/*"]
  }
];

class RequestErrorFilter extends BaseFilter {
  filter(details) {
    pendingAllowlistedRequests.delete(details.requestId);
    pendingCspRequests.delete(details.requestId);
  }
}

RequestErrorFilter.prototype.event = browser_polyfill.webRequest.onErrorOccurred;
RequestErrorFilter.prototype.eventArgs = [
  {
    types: Object.values(browser_polyfill.webRequest.ResourceType),
    urls: ["http://*/*", "https://*/*", "ws://*/*", "wss://*/*"]
  }
];

let request_filter_filters = [
  new RequestFilter(),
  new HeaderFilter(),
  new CSPFilter(),
  new RequestCompletionFilter(),
  new RequestErrorFilter()
];

function request_filter_onBeforeNavigate() {
  browser_polyfill.webNavigation.onBeforeNavigate.removeListener(request_filter_onBeforeNavigate);
  browser_polyfill.webRequest.handlerBehaviorChanged();
}

function onFilterChange() {
  browser_polyfill.webNavigation.onBeforeNavigate.addListener(request_filter_onBeforeNavigate);
}

const FILTER_EVENTS = ["subscription.added",
                       "subscription.removed",
                       "subscription.updated",
                       "subscription.disabled",
                       "filter.added",
                       "filter.removed",
                       "filterState.enabled"];

/**
 * Starts filtering requests. Must only be called after filter engine and
 * frame state are initialized.
 */
function request_filter_start() {
  if (browser_polyfill.declarativeNetRequest) {
    return;
  }

  for (let filter of request_filter_filters) {
    filter.register();
  }

  for (let event of FILTER_EVENTS) {
    if (!filterNotifier.filterNotifier.listeners(event).includes(onFilterChange)) {
      filterNotifier.filterNotifier.on(event, onFilterChange);
    }
  }
}

;// ./src/background/dnr-request-reporter.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */













function getContext(details) {
  let contentType = getRequestContentType(details);

  if (details.type == "main_frame" || details.type == "sub_frame") {
    let parentFrame = getParentFrameInfoFromWebrequestDetails(details);
    let {hostname: parentHostname} = parentFrame || {};
    let initiator = details.documentUrl || sanitizeInitiator(details.initiator);
    // In cross-origin requests, Chrome's initiator has the correct url domain
    let urlInfo = (0,lib_url.parseURL)(initiator || details.url);
    let hostname = parentHostname || urlInfo.hostname;

    let docDomain = details.type == "main_frame" ? null : hostname;

    let specificOnlyFilter = filterEngine.defaultMatcher.match(
      details.url, contentTypes.contentTypes.GENERICBLOCK, hostname, null
    );
    let allowingDocumentFilter = filterEngine.defaultMatcher.match(
      details.url, contentTypes.contentTypes.DOCUMENT, hostname, null
    );
    if (!allowingDocumentFilter && parentFrame &&
        parentFrame.allowingDocumentFilter) {
      allowingDocumentFilter = parentFrame.allowingDocumentFilter;
    }

    let specificOnly = !!specificOnlyFilter;

    return {
      allowingDocumentFilter,
      specificOnly,
      docDomain,
      contentType
    };
  }

  let frame = getFrameInfoFromWebrequestDetails(details);
  if (!frame) {
    let allowingDocumentFilter = null;
    let specificOnly = false;
    let docDomain = null;

    let documentUrl = details.documentUrl ||
        sanitizeInitiator(details.initiator);
    if (documentUrl) {
      let urlInfo = (0,lib_url.parseURL)(documentUrl);
      docDomain = urlInfo.hostname;

      allowingDocumentFilter = filterEngine.defaultMatcher.match(
        documentUrl, contentTypes.contentTypes.DOCUMENT, docDomain, null
      );

      specificOnly = Boolean(filterEngine.defaultMatcher.match(
        documentUrl, contentTypes.contentTypes.GENERICBLOCK, docDomain, null
      ));
    }

    return {
      allowingDocumentFilter,
      specificOnly,
      docDomain,
      contentType
    };
  }

  let allowingDocumentFilter = frame.allowingDocumentFilter;
  let specificOnly = (frame.allowlisted & contentTypes.contentTypes.GENERICBLOCK) != 0;
  let docDomain = frame.hostname;

  return {
    allowingDocumentFilter,
    specificOnly,
    docDomain,
    contentType
  };
}

async function onBeforeRedirect(details) {
  debugging_trace({details});

  if (!loggingEnabled(details.tabId)) {
    return;
  }

  await initializer.start();

  if (!details.redirectUrl.startsWith("data:")) {
    return;
  }

  let {
    allowingDocumentFilter,
    specificOnly,
    docDomain,
    contentType
  } = getContext(details);

  if (allowingDocumentFilter) {
    // Our filters would have allowlisted this, so the redirect isn't
    // our filters. Nothing to log here.
    return;
  }

  let potentialFilters = filterEngine.defaultMatcher.search(
    details.url, contentType, docDomain, null, specificOnly, "blocking"
  );
  for (let filter of potentialFilters.blocking) {
    if (filter instanceof filterClasses.BlockingFilter && typeof filter.rewrite == "string") {
      let rewrittenUrl = filter.rewriteUrl(details.url);
      if (rewrittenUrl == details.redirectUrl) {
        let matchInfo = {
          docDomain, specificOnly, method: "request", rewrittenUrl
        };
        logItem(details, filter, matchInfo);
        return;
      }
    }
  }
}

async function dnr_request_reporter_onErrorOccurred(details) {
  debugging_trace({details});

  if (!loggingEnabled(details.tabId)) {
    return;
  }

  await initializer.start();

  let {
    allowingDocumentFilter,
    specificOnly,
    docDomain,
    contentType
  } = getContext(details);

  if (allowingDocumentFilter) {
    // Our filters would have allowlisted this, so the error event
    // isn't from our filters blocking something. Nothing to log here.
    return;
  }

  let potentialFilters = filterEngine.defaultMatcher.search(
    details.url, contentType, docDomain, null, specificOnly, "blocking"
  );
  for (let filter of potentialFilters.blocking) {
    let matchInfo = {docDomain, specificOnly, method: "request"};
    if (filter instanceof filterClasses.BlockingFilter && typeof filter.rewrite != "string") {
      logItem(details, filter, matchInfo);
      return;
    }
  }
}

async function dnr_request_reporter_onCompleted(details) {
  debugging_trace({details});

  if (!loggingEnabled(details.tabId)) {
    return;
  }

  await initializer.start();

  let {
    allowingDocumentFilter,
    specificOnly,
    docDomain,
    contentType
  } = getContext(details);

  if (allowingDocumentFilter) {
    logItem(details, allowingDocumentFilter, {
      docDomain,
      method: "allowing",
      specificOnly
    });
    return;
  }

  let filter = filterEngine.defaultMatcher.match(
    details.url, contentType, docDomain, null, specificOnly, true
  );
  if (filter) {
    let matchInfo = {docDomain, specificOnly, method: "request"};
    if (filter instanceof filterClasses.AllowingFilter) {
      logItem(details, filter, matchInfo);
    }
    return;
  }

  if (details.type == "main_frame" || details.type == "sub_frame") {
    // CSP filters could apply in this case

    let cspTypeMask = contentTypes.contentTypes.CSP | getRequestContentType(details);
    let hostname = (0,lib_url.parseURL)(details.url).hostname;
    let cspMatchInfo = {docDomain: docDomain || hostname,
                        specificOnly, method: "csp"};

    let allowingCspFilter = filterEngine.defaultMatcher.match(
      details.url, cspTypeMask, docDomain, null, specificOnly, true
    );
    if (allowingCspFilter && allowingCspFilter instanceof filterClasses.AllowingFilter) {
      logItem(details, allowingCspFilter, cspMatchInfo);
      return;
    }

    let cspFilters = filterEngine.defaultMatcher.search(
      details.url, cspTypeMask, hostname, null, specificOnly, "blocking"
    );

    let appliedCspFilters = false;
    for (let cspFilter of cspFilters.blocking) {
      let cspFilterWasApplied = details.responseHeaders.some(header => {
        return header.name.toLowerCase() == "content-security-policy" &&
          header.value == cspFilter.csp;
      });
      if (cspFilterWasApplied) {
        logItem(details, cspFilter, cspMatchInfo);
        appliedCspFilters = true;
      }
    }

    if (appliedCspFilters) {
      return;
    }
  }

  let matchInfo = {
    docDomain,
    method: "unmatched",
    specificOnly
  };
  logItem(details, null, matchInfo);
}

let started = false;

/**
 * Starts listening for filters to log onBlockableItem events. Actual
 * blocking should be done using the declarativeNetRequest API.
 */
function dnr_request_reporter_start() {
  if (!browser_polyfill.declarativeNetRequest || started) {
    return;
  }

  let eventArgs = {
    types: Object.values(browser_polyfill.webRequest.ResourceType),
    urls: ["http://*/*", "https://*/*", "ws://*/*", "wss://*/*"]
  };

  browser_polyfill.webRequest.onBeforeRedirect.addListener(onBeforeRedirect, eventArgs);
  browser_polyfill.webRequest.onErrorOccurred.addListener(dnr_request_reporter_onErrorOccurred, eventArgs);
  browser_polyfill.webRequest.onCompleted.addListener(dnr_request_reporter_onCompleted, eventArgs, ["responseHeaders"]);

  started = true;
}

;// ./src/background/telemetry.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */















const TELEMETRY_STORAGE_KEY = "ewe:telemetry";

let telemetry_scheduler = null;
let onError = new EventDispatcher(dispatch => {});

async function clearStorage() {
  await browser_polyfill.storage.local.remove(TELEMETRY_STORAGE_KEY);
}

/**
 * @ignore
 * Starts the telemetry
 *
 * @param {Object} telemetry Telemetry configuration (URL, bearer)
 * @param {number} [interval]
 *        Ping interval in milliseconds (default: 12 hours)
 * @param {number} [errorRetryDelay]
 *        Error retry interval in milliseconds (default: 1 hour)
 */
async function telemetry_start(telemetry, interval = 12 * time.MILLIS_IN_HOUR,
                            errorRetryDelay = 1 * time.MILLIS_IN_HOUR) {
  if (!telemetry.url) {
    throw new Error("No telemetry `url` provided");
  }

  if (!telemetry.bearer) {
    throw new Error("No telemetry `bearer` provided");
  }

  if (telemetry_scheduler) {
    return;
  }

  await (0,prefs.init)();

  telemetry_scheduler = new Scheduler({
    interval,
    errorRetryDelay,
    listener: () => ping(telemetry),
    async getNextTimestamp() {
      if (prefs.Prefs.telemetry_opt_out) {
        return Date.now() + time.MILLIS_IN_DAY;
      }

      let storageResult = await browser_polyfill.storage.local.get(
        [TELEMETRY_STORAGE_KEY]
      );
      let storage = storageResult[TELEMETRY_STORAGE_KEY];
      let lastPing = storage && storage.lastPing;
      let lastError = storage && storage.lastError;

      if (lastError) {
        let nextRetryAfterError = new Date(lastError).getTime() +
            errorRetryDelay;
        let nowTimestamp = Date.now();
        let maxNextRetry = nowTimestamp + errorRetryDelay;
        if (nextRetryAfterError > maxNextRetry) {
          // This shouldn't happen if the clocks are working right. It implies
          // that the system clock has been set backwards since we stored that
          // timestamp. Let's correct the storage using our current clock
          // value. We shouldn't do this with lastPing because lastPing comes
          // from the server.
          nextRetryAfterError = maxNextRetry;
          await browser_polyfill.storage.local.set({
            [TELEMETRY_STORAGE_KEY]: {
              ...storage,
              lastError: (new Date(nowTimestamp)).toISOString()
            }
          });
        }

        return nextRetryAfterError;
      }
      else if (lastPing) {
        return new Date(lastPing).getTime() + interval;
      }

      return null;
    }
  });
}

/**
 * @ignore
 */
async function telemetry_reset() {
  telemetry_stop();
  await browser.storage.local.remove(TELEMETRY_STORAGE_KEY);
}

/**
 * @ignore
 */
function telemetry_stop() {
  if (!telemetry_scheduler) {
    return;
  }

  telemetry_scheduler.stop();
  telemetry_scheduler = null;
}

function truncateTimes(timestamp) {
  if (!timestamp) {
    return timestamp;
  }

  return timestamp.split("T")[0] + "T00:00:00Z";
}

async function ping(telemetry) {
  debugging_trace({telemetry});
  await initializer.start();

  // This is a last line to ensure that we don't ever send a ping if someone has
  // opted out, even if the details of the scheduler change in the future. The
  // main opt out mechanism is telling the scheduler if it's time to ping or
  // not.
  if (prefs.Prefs.telemetry_opt_out) {
    return false;
  }

  const storageResult = await browser_polyfill.storage.local.get(
    [TELEMETRY_STORAGE_KEY]
  );
  const storage = storageResult[TELEMETRY_STORAGE_KEY];

  let payload = await getExtensionMetadata();
  if (storage) {
    payload.first_ping = truncateTimes(storage.firstPing);
    payload.last_ping = truncateTimes(storage.lastPing);
    payload.previous_last_ping = truncateTimes(storage.previousLastPing);
    payload.last_ping_tag = storage.lastPingTag;
  }
  payload.ucid = (storage && storage.ucid) || esm_browser_v4();

  let pingToken;
  try {
    let serverResponse = await postWithBearerToken(
      telemetry.url,
      telemetry.bearer,
      {payload}
    );
    pingToken = serverResponse.token;

    if (!pingToken) {
      throw new Error("Telemetry server response did not include a token.");
    }
  }
  catch (e) {
    // Not being sent to Sentry for now. If we do, we should find a way to
    // filter between unavoidable network errors and something actually being
    // wrong on the server.
    error(`Telemetry error: ${e.message}`);

    let lastError = (new Date()).toISOString();
    await browser_polyfill.storage.local.set({
      [TELEMETRY_STORAGE_KEY]: {
        ...storage,
        lastError
      }
    });

    onError.emit({
      message: e.message,
      lastError
    });
    return false;
  }

  let newStorage = {
    firstPing: (storage && storage.firstPing) || pingToken,
    lastPing: pingToken,
    previousLastPing: storage && storage.lastPing,
    lastPingTag: esm_browser_v4(),
    ucid: payload.ucid
  };

  await browser_polyfill.storage.local.set({
    [TELEMETRY_STORAGE_KEY]: newStorage
  });
  return true;
}

/**
 * Uses the fetch API to make a POST request to the specified endpoint.
 *
 * @param {string} url URL for the request.
 * @param {string} bearer Bearer token for use in Authentication header.
 * @param {Object} body Request body, will be serialized into JSON to send.
 * @return {Promise<Object>} Promise resolves with the object returned from the
 *   server. Rejects if the request fails, or the response has an error status.
 * @ignore
 */
async function postWithBearerToken(url, bearer, body) {
  debugging_trace({url, bearer, body});
  const response = await fetch(url, {
    method: "POST",
    headers: {
      "Authorization": `Bearer ${bearer}`,
      "Content-Type": "application/json"
    },
    body: JSON.stringify(body)
  });

  if (!response.ok) {
    throw new Error(
      `Telemetry server responded with error status ${response.status}.`
    );
  }

  return await response.json();
}

async function getExperimentsAssignments() {
  const assignments = await experiments.getAssignments();
  return Object.entries(assignments).map(assignment => {
    return {
      experiment_id: assignment[0],
      variant_id: assignment[1]
    };
  });
}

async function getExtensionMetadata() {
  let platform;
  let platformVersion;

  if (navigator.userAgentData) {
    const platformInfo = await navigator.userAgentData.getHighEntropyValues([
      "platform",
      "platformVersion"
    ]);

    platform = platformInfo.platform;
    platformVersion = platformInfo.platformVersion;
  }
  else {
    const platformInfo = await browser_polyfill.runtime.getPlatformInfo();
    platform = platformInfo.os;
  }

  const payload = {
    // The OS. Windows, Linux, etc.
    platform,

    // The version of the system OS.
    platform_version: platformVersion,

    // The browser. Chrome, Firefox, etc.
    application: info.application,

    // The version of the browser.
    application_version: info.applicationVersion,

    // Used to identify this specific project.
    addon_name: info.sdkName,

    // The Engine's current version. See the Dotenv plugin in webpack.config.js
    addon_version: info.sdkVersion,

    // The name of the extension using the Engine.
    extension_name: info.addonName,

    // The extension's version.
    extension_version: info.addonVersion,

    // Depends on having the acceptable ads subscription enabled.
    aa_active: await hasAcceptableAdsEnabled(),

    // The currently assigned split experiments
    experiments: await getExperimentsAssignments()
  };

  if (premiumStatusCallback) {
    const premiumStatus = await premiumStatusCallback();
    payload.premium_status = premiumStatus ? "premium" : "free";
  }

  return payload;
}

/* harmony default export */ const telemetry = ({
  /**
  * @typedef {Object} TelemetryPingError
  * @property {string} message The error message, describing the failure.
  * @property {string} lastError The timestamp of the error.
  */

  /**
   * Emitted when sending a telemetry ping fails.
   *
   * @event
   * @type {EventDispatcher<TelemetryPingError>}
   */
  onError,

  /**
   * Opt-out from telemetry. Default is `true` (used opted out)
   * @param {boolean} value Pass `true` to opt-out, pass `false` to opt in.
   * @returns {Promise} Promise that resolves when the setting is set.
   */
  async setOptOut(value) {
    prefs.Prefs.telemetry_opt_out = value;

    if (telemetry_scheduler && !value) {
      telemetry_scheduler.checkNow();
    }

    if (value) {
      await clearStorage();
    }
  }
});

// EXTERNAL MODULE: ./adblockpluscore/lib/analytics.js
var analytics = __nested_webpack_require_678579__(1052);
;// ./src/background/reporting.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */








let contentTypesMap = new Map();

for (let item of resourceTypes) {
  let contentTypeObject = Object.keys(contentTypes.contentTypes).find(key =>
    contentTypes.contentTypes[key] === item[1]
  );

  contentTypesMap.set(item[0].toLowerCase(), contentTypeObject.toLowerCase());
}

/* harmony default export */ const reporting = ({
  /**
   * Returns the version of the first ever downloaded resource.
   * @return {string}
   * @see {@link https://gitlab.com/eyeo/adblockplus/abc/adblockpluscore/-/jobs/artifacts/0.6.0/file/build/docs/module-analytics-Analytics.html?job=docs#getFirstVersion|Adblock Plus core analytics documentation}
   * @external
   */
  getFirstVersion: analytics.analytics.getFirstVersion,

  /**
  * @typedef {Object} FilterMatchInfo
  * @property {string|null} docDomain The hostname of the document that caused
  *   the request. This will be null for "main_frame" requests since those
  *   create the top-level document in the first place.
  * @property {?string} rewrittenUrl The name of the internal resource to which
  *   to rewrite the URL.
  * @property {?boolean} specificOnly Whether selectors from generic filters
  *   should be included.
  * @property {string} method The method used to match this filter. This can be
  *   the string "request", "header", "csp", "popup", "elemhide", "snippet",
  *   "allowing", or "unmatched".
  * @property {?string} allowingReason When the type in request details is
  *   undefined, this contains the reason why the request/frame got
  *   allowlisted. That is either "document", "elemhide", "genericblock",
  *   "generichide", or "extensionInitiated". "extensionInitiated" refers to any
  *   web requests initiated by a browser extension rather than a web page
  *   (those requests are not blockable).
  */

  /**
   * Emitted when any blockable item is matched.
   *
   * This includes both filters being applied on a document level and web
   * requests. Multiple events may be emitted for a document, one for each
   * filter being applied to the document. There will generally only be one
   * event emitted for each web request. The exception to this is CSP filters,
   * where multiple CSP filters may be applied to a request at the same time,
   * and an event will be emitted for each filter applied.
   * @event
   * @param {object|{frameId: number, tabId: number, url: string}} request
   *   Either
   *   the {@link https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onBeforeRequest#details|onBeforeRequest details}
   *   object or the {@link https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/webRequest/onHeadersReceived#details|onHeadersReceived details}
   *   object from the web extensions API, or an object with the properties
   *   `frameId`, `tabId` and `url`.
   * @param {?Filter} filter The filter that matched, if any.
   * @param {FilterMatchInfo} matchInfo Extra information that might be
   *                                    relevant depending on the context.
   * @type {BlockableEventDispatcher<{request: object,
   *                                   filter: Filter,
   *                                   matchInfo: FilterMatchInfo}>}
   */
  onBlockableItem: new BlockableEventDispatcher(),

  /**
   * Returns a mapping between resourceTypes and contentTypes.
   * @return {Map<string, string>}
   */
  contentTypesMap,

  /**
   * Emitted when a subscribe link is clicked on a web page.
   *
   * A subscribe link has a URL pointing to `https://subscribe.adblockplus.org/`
   * or starting with `abp:subscribe` (deprecated), followed by a query string
   * with a `location` parameter, and optionally a `title` parameter. Subscribe
   * links can only be used on certain trusted domains (including `localhost`).
   * @example
   * <a href="https://subscribe.adblockplus.org?location=http%3A%2F%2Flocalhost%2Flist.txt&title=Example">Example</a>
   * <a href="abp:subscribe?location=location=http%3A%2F%2Flocalhost%2Flist.txt&title=Example">Example (deprecated)</a>
   * @event
   * @param {string} url The subscription URL from the subscribe link
   *                     `location`'s parameter.
   * @param {string} title The subscription title from the subscribe link
   *                       `title`'s parameter.
   * @type {EventDispatcher<{url: string, title: string}>}
   */
  onSubscribeLinkClicked: onSubscribeLinkClicked
});

;// ./src/background/testing-stub.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */

// The file is used as a production only stub for "testing.js",
// thus is empty.

/* harmony default export */ const testing_stub = ({
});

;// ../../node_modules/pako/dist/pako.esm.mjs

/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */
// (C) 1995-2013 Jean-loup Gailly and Mark Adler
// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin
//
// This software is provided 'as-is', without any express or implied
// warranty. In no event will the authors be held liable for any damages
// arising from the use of this software.
//
// Permission is granted to anyone to use this software for any purpose,
// including commercial applications, and to alter it and redistribute it
// freely, subject to the following restrictions:
//
// 1. The origin of this software must not be misrepresented; you must not
//   claim that you wrote the original software. If you use this software
//   in a product, an acknowledgment in the product documentation would be
//   appreciated but is not required.
// 2. Altered source versions must be plainly marked as such, and must not be
//   misrepresented as being the original software.
// 3. This notice may not be removed or altered from any source distribution.

/* eslint-disable space-unary-ops */

/* Public constants ==========================================================*/
/* ===========================================================================*/


//const Z_FILTERED          = 1;
//const Z_HUFFMAN_ONLY      = 2;
//const Z_RLE               = 3;
const Z_FIXED$1               = 4;
//const Z_DEFAULT_STRATEGY  = 0;

/* Possible values of the data_type field (though see inflate()) */
const Z_BINARY              = 0;
const Z_TEXT                = 1;
//const Z_ASCII             = 1; // = Z_TEXT
const Z_UNKNOWN$1             = 2;

/*============================================================================*/


function zero$1(buf) { let len = buf.length; while (--len >= 0) { buf[len] = 0; } }

// From zutil.h

const STORED_BLOCK = 0;
const STATIC_TREES = 1;
const DYN_TREES    = 2;
/* The three kinds of block type */

const MIN_MATCH$1    = 3;
const MAX_MATCH$1    = 258;
/* The minimum and maximum match lengths */

// From deflate.h
/* ===========================================================================
 * Internal compression state.
 */

const LENGTH_CODES$1  = 29;
/* number of length codes, not counting the special END_BLOCK code */

const LITERALS$1      = 256;
/* number of literal bytes 0..255 */

const L_CODES$1       = LITERALS$1 + 1 + LENGTH_CODES$1;
/* number of Literal or Length codes, including the END_BLOCK code */

const D_CODES$1       = 30;
/* number of distance codes */

const BL_CODES$1      = 19;
/* number of codes used to transfer the bit lengths */

const HEAP_SIZE$1     = 2 * L_CODES$1 + 1;
/* maximum heap size */

const MAX_BITS$1      = 15;
/* All codes must not exceed MAX_BITS bits */

const Buf_size      = 16;
/* size of bit buffer in bi_buf */


/* ===========================================================================
 * Constants
 */

const MAX_BL_BITS = 7;
/* Bit length codes must not exceed MAX_BL_BITS bits */

const END_BLOCK   = 256;
/* end of block literal code */

const REP_3_6     = 16;
/* repeat previous bit length 3-6 times (2 bits of repeat count) */

const REPZ_3_10   = 17;
/* repeat a zero length 3-10 times  (3 bits of repeat count) */

const REPZ_11_138 = 18;
/* repeat a zero length 11-138 times  (7 bits of repeat count) */

/* eslint-disable comma-spacing,array-bracket-spacing */
const extra_lbits =   /* extra bits for each length code */
  new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]);

const extra_dbits =   /* extra bits for each distance code */
  new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]);

const extra_blbits =  /* extra bits for each bit length code */
  new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]);

const bl_order =
  new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);
/* eslint-enable comma-spacing,array-bracket-spacing */

/* The lengths of the bit length codes are sent in order of decreasing
 * probability, to avoid transmitting the lengths for unused bit length codes.
 */

/* ===========================================================================
 * Local data. These are initialized only once.
 */

// We pre-fill arrays with 0 to avoid uninitialized gaps

const DIST_CODE_LEN = 512; /* see definition of array dist_code below */

// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1
const static_ltree  = new Array((L_CODES$1 + 2) * 2);
zero$1(static_ltree);
/* The static literal tree. Since the bit lengths are imposed, there is no
 * need for the L_CODES extra codes used during heap construction. However
 * The codes 286 and 287 are needed to build a canonical tree (see _tr_init
 * below).
 */

const static_dtree  = new Array(D_CODES$1 * 2);
zero$1(static_dtree);
/* The static distance tree. (Actually a trivial tree since all codes use
 * 5 bits.)
 */

const _dist_code    = new Array(DIST_CODE_LEN);
zero$1(_dist_code);
/* Distance codes. The first 256 values correspond to the distances
 * 3 .. 258, the last 256 values correspond to the top 8 bits of
 * the 15 bit distances.
 */

const _length_code  = new Array(MAX_MATCH$1 - MIN_MATCH$1 + 1);
zero$1(_length_code);
/* length code for each normalized match length (0 == MIN_MATCH) */

const base_length   = new Array(LENGTH_CODES$1);
zero$1(base_length);
/* First normalized length for each code (0 = MIN_MATCH) */

const base_dist     = new Array(D_CODES$1);
zero$1(base_dist);
/* First normalized distance for each code (0 = distance of 1) */


function StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {

  this.static_tree  = static_tree;  /* static tree or NULL */
  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */
  this.extra_base   = extra_base;   /* base index for extra_bits */
  this.elems        = elems;        /* max number of elements in the tree */
  this.max_length   = max_length;   /* max bit length for the codes */

  // show if `static_tree` has data or dummy - needed for monomorphic objects
  this.has_stree    = static_tree && static_tree.length;
}


let static_l_desc;
let static_d_desc;
let static_bl_desc;


function TreeDesc(dyn_tree, stat_desc) {
  this.dyn_tree = dyn_tree;     /* the dynamic tree */
  this.max_code = 0;            /* largest code with non zero frequency */
  this.stat_desc = stat_desc;   /* the corresponding static tree */
}



const d_code = (dist) => {

  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];
};


/* ===========================================================================
 * Output a short LSB first on the stream.
 * IN assertion: there is enough room in pendingBuf.
 */
const put_short = (s, w) => {
//    put_byte(s, (uch)((w) & 0xff));
//    put_byte(s, (uch)((ush)(w) >> 8));
  s.pending_buf[s.pending++] = (w) & 0xff;
  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;
};


/* ===========================================================================
 * Send a value on a given number of bits.
 * IN assertion: length <= 16 and value fits in length bits.
 */
const send_bits = (s, value, length) => {

  if (s.bi_valid > (Buf_size - length)) {
    s.bi_buf |= (value << s.bi_valid) & 0xffff;
    put_short(s, s.bi_buf);
    s.bi_buf = value >> (Buf_size - s.bi_valid);
    s.bi_valid += length - Buf_size;
  } else {
    s.bi_buf |= (value << s.bi_valid) & 0xffff;
    s.bi_valid += length;
  }
};


const send_code = (s, c, tree) => {

  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);
};


/* ===========================================================================
 * Reverse the first len bits of a code, using straightforward code (a faster
 * method would use a table)
 * IN assertion: 1 <= len <= 15
 */
const bi_reverse = (code, len) => {

  let res = 0;
  do {
    res |= code & 1;
    code >>>= 1;
    res <<= 1;
  } while (--len > 0);
  return res >>> 1;
};


/* ===========================================================================
 * Flush the bit buffer, keeping at most 7 bits in it.
 */
const bi_flush = (s) => {

  if (s.bi_valid === 16) {
    put_short(s, s.bi_buf);
    s.bi_buf = 0;
    s.bi_valid = 0;

  } else if (s.bi_valid >= 8) {
    s.pending_buf[s.pending++] = s.bi_buf & 0xff;
    s.bi_buf >>= 8;
    s.bi_valid -= 8;
  }
};


/* ===========================================================================
 * Compute the optimal bit lengths for a tree and update the total bit length
 * for the current block.
 * IN assertion: the fields freq and dad are set, heap[heap_max] and
 *    above are the tree nodes sorted by increasing frequency.
 * OUT assertions: the field len is set to the optimal bit length, the
 *     array bl_count contains the frequencies for each bit length.
 *     The length opt_len is updated; static_len is also updated if stree is
 *     not null.
 */
const gen_bitlen = (s, desc) => {
//    deflate_state *s;
//    tree_desc *desc;    /* the tree descriptor */

  const tree            = desc.dyn_tree;
  const max_code        = desc.max_code;
  const stree           = desc.stat_desc.static_tree;
  const has_stree       = desc.stat_desc.has_stree;
  const extra           = desc.stat_desc.extra_bits;
  const base            = desc.stat_desc.extra_base;
  const max_length      = desc.stat_desc.max_length;
  let h;              /* heap index */
  let n, m;           /* iterate over the tree elements */
  let bits;           /* bit length */
  let xbits;          /* extra bits */
  let f;              /* frequency */
  let overflow = 0;   /* number of elements with bit length too large */

  for (bits = 0; bits <= MAX_BITS$1; bits++) {
    s.bl_count[bits] = 0;
  }

  /* In a first pass, compute the optimal bit lengths (which may
   * overflow in the case of the bit length tree).
   */
  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */

  for (h = s.heap_max + 1; h < HEAP_SIZE$1; h++) {
    n = s.heap[h];
    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;
    if (bits > max_length) {
      bits = max_length;
      overflow++;
    }
    tree[n * 2 + 1]/*.Len*/ = bits;
    /* We overwrite tree[n].Dad which is no longer needed */

    if (n > max_code) { continue; } /* not a leaf node */

    s.bl_count[bits]++;
    xbits = 0;
    if (n >= base) {
      xbits = extra[n - base];
    }
    f = tree[n * 2]/*.Freq*/;
    s.opt_len += f * (bits + xbits);
    if (has_stree) {
      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);
    }
  }
  if (overflow === 0) { return; }

  // Tracev((stderr,"\nbit length overflow\n"));
  /* This happens for example on obj2 and pic of the Calgary corpus */

  /* Find the first bit length which could increase: */
  do {
    bits = max_length - 1;
    while (s.bl_count[bits] === 0) { bits--; }
    s.bl_count[bits]--;      /* move one leaf down the tree */
    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */
    s.bl_count[max_length]--;
    /* The brother of the overflow item also moves one step up,
     * but this does not affect bl_count[max_length]
     */
    overflow -= 2;
  } while (overflow > 0);

  /* Now recompute all bit lengths, scanning in increasing frequency.
   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all
   * lengths instead of fixing only the wrong ones. This idea is taken
   * from 'ar' written by Haruhiko Okumura.)
   */
  for (bits = max_length; bits !== 0; bits--) {
    n = s.bl_count[bits];
    while (n !== 0) {
      m = s.heap[--h];
      if (m > max_code) { continue; }
      if (tree[m * 2 + 1]/*.Len*/ !== bits) {
        // Tracev((stderr,"code %d bits %d->%d\n", m, tree[m].Len, bits));
        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;
        tree[m * 2 + 1]/*.Len*/ = bits;
      }
      n--;
    }
  }
};


/* ===========================================================================
 * Generate the codes for a given tree and bit counts (which need not be
 * optimal).
 * IN assertion: the array bl_count contains the bit length statistics for
 * the given tree and the field len is set for all tree elements.
 * OUT assertion: the field code is set for all tree elements of non
 *     zero code length.
 */
const gen_codes = (tree, max_code, bl_count) => {
//    ct_data *tree;             /* the tree to decorate */
//    int max_code;              /* largest code with non zero frequency */
//    ushf *bl_count;            /* number of codes at each bit length */

  const next_code = new Array(MAX_BITS$1 + 1); /* next code value for each bit length */
  let code = 0;              /* running code value */
  let bits;                  /* bit index */
  let n;                     /* code index */

  /* The distribution counts are first used to generate the code values
   * without bit reversal.
   */
  for (bits = 1; bits <= MAX_BITS$1; bits++) {
    code = (code + bl_count[bits - 1]) << 1;
    next_code[bits] = code;
  }
  /* Check that the bit counts in bl_count are consistent. The last code
   * must be all ones.
   */
  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,
  //        "inconsistent bit counts");
  //Tracev((stderr,"\ngen_codes: max_code %d ", max_code));

  for (n = 0;  n <= max_code; n++) {
    let len = tree[n * 2 + 1]/*.Len*/;
    if (len === 0) { continue; }
    /* Now reverse the bits */
    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);

    //Tracecv(tree != static_ltree, (stderr,"\nn %3d %c l %2d c %4x (%x) ",
    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));
  }
};


/* ===========================================================================
 * Initialize the various 'constant' tables.
 */
const tr_static_init = () => {

  let n;        /* iterates over tree elements */
  let bits;     /* bit counter */
  let length;   /* length value */
  let code;     /* code value */
  let dist;     /* distance index */
  const bl_count = new Array(MAX_BITS$1 + 1);
  /* number of codes at each bit length for an optimal tree */

  // do check in _tr_init()
  //if (static_init_done) return;

  /* For some embedded targets, global variables are not initialized: */
/*#ifdef NO_INIT_GLOBAL_POINTERS
  static_l_desc.static_tree = static_ltree;
  static_l_desc.extra_bits = extra_lbits;
  static_d_desc.static_tree = static_dtree;
  static_d_desc.extra_bits = extra_dbits;
  static_bl_desc.extra_bits = extra_blbits;
#endif*/

  /* Initialize the mapping length (0..255) -> length code (0..28) */
  length = 0;
  for (code = 0; code < LENGTH_CODES$1 - 1; code++) {
    base_length[code] = length;
    for (n = 0; n < (1 << extra_lbits[code]); n++) {
      _length_code[length++] = code;
    }
  }
  //Assert (length == 256, "tr_static_init: length != 256");
  /* Note that the length 255 (match length 258) can be represented
   * in two different ways: code 284 + 5 bits or code 285, so we
   * overwrite length_code[255] to use the best encoding:
   */
  _length_code[length - 1] = code;

  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */
  dist = 0;
  for (code = 0; code < 16; code++) {
    base_dist[code] = dist;
    for (n = 0; n < (1 << extra_dbits[code]); n++) {
      _dist_code[dist++] = code;
    }
  }
  //Assert (dist == 256, "tr_static_init: dist != 256");
  dist >>= 7; /* from now on, all distances are divided by 128 */
  for (; code < D_CODES$1; code++) {
    base_dist[code] = dist << 7;
    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {
      _dist_code[256 + dist++] = code;
    }
  }
  //Assert (dist == 256, "tr_static_init: 256+dist != 512");

  /* Construct the codes of the static literal tree */
  for (bits = 0; bits <= MAX_BITS$1; bits++) {
    bl_count[bits] = 0;
  }

  n = 0;
  while (n <= 143) {
    static_ltree[n * 2 + 1]/*.Len*/ = 8;
    n++;
    bl_count[8]++;
  }
  while (n <= 255) {
    static_ltree[n * 2 + 1]/*.Len*/ = 9;
    n++;
    bl_count[9]++;
  }
  while (n <= 279) {
    static_ltree[n * 2 + 1]/*.Len*/ = 7;
    n++;
    bl_count[7]++;
  }
  while (n <= 287) {
    static_ltree[n * 2 + 1]/*.Len*/ = 8;
    n++;
    bl_count[8]++;
  }
  /* Codes 286 and 287 do not exist, but we must include them in the
   * tree construction to get a canonical Huffman tree (longest code
   * all ones)
   */
  gen_codes(static_ltree, L_CODES$1 + 1, bl_count);

  /* The static distance tree is trivial: */
  for (n = 0; n < D_CODES$1; n++) {
    static_dtree[n * 2 + 1]/*.Len*/ = 5;
    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);
  }

  // Now data ready and we can init static trees
  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS$1 + 1, L_CODES$1, MAX_BITS$1);
  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES$1, MAX_BITS$1);
  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES$1, MAX_BL_BITS);

  //static_init_done = true;
};


/* ===========================================================================
 * Initialize a new block.
 */
const init_block = (s) => {

  let n; /* iterates over tree elements */

  /* Initialize the trees. */
  for (n = 0; n < L_CODES$1;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }
  for (n = 0; n < D_CODES$1;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }
  for (n = 0; n < BL_CODES$1; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }

  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;
  s.opt_len = s.static_len = 0;
  s.sym_next = s.matches = 0;
};


/* ===========================================================================
 * Flush the bit buffer and align the output on a byte boundary
 */
const bi_windup = (s) =>
{
  if (s.bi_valid > 8) {
    put_short(s, s.bi_buf);
  } else if (s.bi_valid > 0) {
    //put_byte(s, (Byte)s->bi_buf);
    s.pending_buf[s.pending++] = s.bi_buf;
  }
  s.bi_buf = 0;
  s.bi_valid = 0;
};

/* ===========================================================================
 * Compares to subtrees, using the tree depth as tie breaker when
 * the subtrees have equal frequency. This minimizes the worst case length.
 */
const smaller = (tree, n, m, depth) => {

  const _n2 = n * 2;
  const _m2 = m * 2;
  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||
         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));
};

/* ===========================================================================
 * Restore the heap property by moving down the tree starting at node k,
 * exchanging a node with the smallest of its two sons if necessary, stopping
 * when the heap property is re-established (each father smaller than its
 * two sons).
 */
const pqdownheap = (s, tree, k) => {
//    deflate_state *s;
//    ct_data *tree;  /* the tree to restore */
//    int k;               /* node to move down */

  const v = s.heap[k];
  let j = k << 1;  /* left son of k */
  while (j <= s.heap_len) {
    /* Set j to the smallest of the two sons: */
    if (j < s.heap_len &&
      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {
      j++;
    }
    /* Exit if v is smaller than both sons */
    if (smaller(tree, v, s.heap[j], s.depth)) { break; }

    /* Exchange v with the smallest son */
    s.heap[k] = s.heap[j];
    k = j;

    /* And continue down the tree, setting j to the left son of k */
    j <<= 1;
  }
  s.heap[k] = v;
};


// inlined manually
// const SMALLEST = 1;

/* ===========================================================================
 * Send the block data compressed using the given Huffman trees
 */
const compress_block = (s, ltree, dtree) => {
//    deflate_state *s;
//    const ct_data *ltree; /* literal tree */
//    const ct_data *dtree; /* distance tree */

  let dist;           /* distance of matched string */
  let lc;             /* match length or unmatched char (if dist == 0) */
  let sx = 0;         /* running index in sym_buf */
  let code;           /* the code to send */
  let extra;          /* number of extra bits to send */

  if (s.sym_next !== 0) {
    do {
      dist = s.pending_buf[s.sym_buf + sx++] & 0xff;
      dist += (s.pending_buf[s.sym_buf + sx++] & 0xff) << 8;
      lc = s.pending_buf[s.sym_buf + sx++];
      if (dist === 0) {
        send_code(s, lc, ltree); /* send a literal byte */
        //Tracecv(isgraph(lc), (stderr," '%c' ", lc));
      } else {
        /* Here, lc is the match length - MIN_MATCH */
        code = _length_code[lc];
        send_code(s, code + LITERALS$1 + 1, ltree); /* send the length code */
        extra = extra_lbits[code];
        if (extra !== 0) {
          lc -= base_length[code];
          send_bits(s, lc, extra);       /* send the extra length bits */
        }
        dist--; /* dist is now the match distance - 1 */
        code = d_code(dist);
        //Assert (code < D_CODES, "bad d_code");

        send_code(s, code, dtree);       /* send the distance code */
        extra = extra_dbits[code];
        if (extra !== 0) {
          dist -= base_dist[code];
          send_bits(s, dist, extra);   /* send the extra distance bits */
        }
      } /* literal or match pair ? */

      /* Check that the overlay between pending_buf and sym_buf is ok: */
      //Assert(s->pending < s->lit_bufsize + sx, "pendingBuf overflow");

    } while (sx < s.sym_next);
  }

  send_code(s, END_BLOCK, ltree);
};


/* ===========================================================================
 * Construct one Huffman tree and assigns the code bit strings and lengths.
 * Update the total bit length for the current block.
 * IN assertion: the field freq is set for all tree elements.
 * OUT assertions: the fields len and code are set to the optimal bit length
 *     and corresponding code. The length opt_len is updated; static_len is
 *     also updated if stree is not null. The field max_code is set.
 */
const build_tree = (s, desc) => {
//    deflate_state *s;
//    tree_desc *desc; /* the tree descriptor */

  const tree     = desc.dyn_tree;
  const stree    = desc.stat_desc.static_tree;
  const has_stree = desc.stat_desc.has_stree;
  const elems    = desc.stat_desc.elems;
  let n, m;          /* iterate over heap elements */
  let max_code = -1; /* largest code with non zero frequency */
  let node;          /* new node being created */

  /* Construct the initial heap, with least frequent element in
   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].
   * heap[0] is not used.
   */
  s.heap_len = 0;
  s.heap_max = HEAP_SIZE$1;

  for (n = 0; n < elems; n++) {
    if (tree[n * 2]/*.Freq*/ !== 0) {
      s.heap[++s.heap_len] = max_code = n;
      s.depth[n] = 0;

    } else {
      tree[n * 2 + 1]/*.Len*/ = 0;
    }
  }

  /* The pkzip format requires that at least one distance code exists,
   * and that at least one bit should be sent even if there is only one
   * possible code. So to avoid special checks later on we force at least
   * two codes of non zero frequency.
   */
  while (s.heap_len < 2) {
    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);
    tree[node * 2]/*.Freq*/ = 1;
    s.depth[node] = 0;
    s.opt_len--;

    if (has_stree) {
      s.static_len -= stree[node * 2 + 1]/*.Len*/;
    }
    /* node is 0 or 1 so it does not have extra bits */
  }
  desc.max_code = max_code;

  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,
   * establish sub-heaps of increasing lengths:
   */
  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }

  /* Construct the Huffman tree by repeatedly combining the least two
   * frequent nodes.
   */
  node = elems;              /* next internal node of the tree */
  do {
    //pqremove(s, tree, n);  /* n = node of least frequency */
    /*** pqremove ***/
    n = s.heap[1/*SMALLEST*/];
    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];
    pqdownheap(s, tree, 1/*SMALLEST*/);
    /***/

    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */

    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */
    s.heap[--s.heap_max] = m;

    /* Create a new node father of n and m */
    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;
    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;
    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;

    /* and insert the new node in the heap */
    s.heap[1/*SMALLEST*/] = node++;
    pqdownheap(s, tree, 1/*SMALLEST*/);

  } while (s.heap_len >= 2);

  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];

  /* At this point, the fields freq and dad are set. We can now
   * generate the bit lengths.
   */
  gen_bitlen(s, desc);

  /* The field len is now set, we can generate the bit codes */
  gen_codes(tree, max_code, s.bl_count);
};


/* ===========================================================================
 * Scan a literal or distance tree to determine the frequencies of the codes
 * in the bit length tree.
 */
const scan_tree = (s, tree, max_code) => {
//    deflate_state *s;
//    ct_data *tree;   /* the tree to be scanned */
//    int max_code;    /* and its largest code of non zero frequency */

  let n;                     /* iterates over all tree elements */
  let prevlen = -1;          /* last emitted length */
  let curlen;                /* length of current code */

  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */

  let count = 0;             /* repeat count of the current code */
  let max_count = 7;         /* max repeat count */
  let min_count = 4;         /* min repeat count */

  if (nextlen === 0) {
    max_count = 138;
    min_count = 3;
  }
  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */

  for (n = 0; n <= max_code; n++) {
    curlen = nextlen;
    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;

    if (++count < max_count && curlen === nextlen) {
      continue;

    } else if (count < min_count) {
      s.bl_tree[curlen * 2]/*.Freq*/ += count;

    } else if (curlen !== 0) {

      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }
      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;

    } else if (count <= 10) {
      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;

    } else {
      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;
    }

    count = 0;
    prevlen = curlen;

    if (nextlen === 0) {
      max_count = 138;
      min_count = 3;

    } else if (curlen === nextlen) {
      max_count = 6;
      min_count = 3;

    } else {
      max_count = 7;
      min_count = 4;
    }
  }
};


/* ===========================================================================
 * Send a literal or distance tree in compressed form, using the codes in
 * bl_tree.
 */
const send_tree = (s, tree, max_code) => {
//    deflate_state *s;
//    ct_data *tree; /* the tree to be scanned */
//    int max_code;       /* and its largest code of non zero frequency */

  let n;                     /* iterates over all tree elements */
  let prevlen = -1;          /* last emitted length */
  let curlen;                /* length of current code */

  let nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */

  let count = 0;             /* repeat count of the current code */
  let max_count = 7;         /* max repeat count */
  let min_count = 4;         /* min repeat count */

  /* tree[max_code+1].Len = -1; */  /* guard already set */
  if (nextlen === 0) {
    max_count = 138;
    min_count = 3;
  }

  for (n = 0; n <= max_code; n++) {
    curlen = nextlen;
    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;

    if (++count < max_count && curlen === nextlen) {
      continue;

    } else if (count < min_count) {
      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);

    } else if (curlen !== 0) {
      if (curlen !== prevlen) {
        send_code(s, curlen, s.bl_tree);
        count--;
      }
      //Assert(count >= 3 && count <= 6, " 3_6?");
      send_code(s, REP_3_6, s.bl_tree);
      send_bits(s, count - 3, 2);

    } else if (count <= 10) {
      send_code(s, REPZ_3_10, s.bl_tree);
      send_bits(s, count - 3, 3);

    } else {
      send_code(s, REPZ_11_138, s.bl_tree);
      send_bits(s, count - 11, 7);
    }

    count = 0;
    prevlen = curlen;
    if (nextlen === 0) {
      max_count = 138;
      min_count = 3;

    } else if (curlen === nextlen) {
      max_count = 6;
      min_count = 3;

    } else {
      max_count = 7;
      min_count = 4;
    }
  }
};


/* ===========================================================================
 * Construct the Huffman tree for the bit lengths and return the index in
 * bl_order of the last bit length code to send.
 */
const build_bl_tree = (s) => {

  let max_blindex;  /* index of last bit length code of non zero freq */

  /* Determine the bit length frequencies for literal and distance trees */
  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);
  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);

  /* Build the bit length tree: */
  build_tree(s, s.bl_desc);
  /* opt_len now includes the length of the tree representations, except
   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.
   */

  /* Determine the number of bit length codes to send. The pkzip format
   * requires that at least 4 bit length codes be sent. (appnote.txt says
   * 3 but the actual value used is 4.)
   */
  for (max_blindex = BL_CODES$1 - 1; max_blindex >= 3; max_blindex--) {
    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {
      break;
    }
  }
  /* Update opt_len to include the bit length tree and counts */
  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;
  //Tracev((stderr, "\ndyn trees: dyn %ld, stat %ld",
  //        s->opt_len, s->static_len));

  return max_blindex;
};


/* ===========================================================================
 * Send the header for a block using dynamic Huffman trees: the counts, the
 * lengths of the bit length codes, the literal tree and the distance tree.
 * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.
 */
const send_all_trees = (s, lcodes, dcodes, blcodes) => {
//    deflate_state *s;
//    int lcodes, dcodes, blcodes; /* number of codes for each tree */

  let rank;                    /* index in bl_order */

  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, "not enough codes");
  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,
  //        "too many codes");
  //Tracev((stderr, "\nbl counts: "));
  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */
  send_bits(s, dcodes - 1,   5);
  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */
  for (rank = 0; rank < blcodes; rank++) {
    //Tracev((stderr, "\nbl code %2d ", bl_order[rank]));
    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);
  }
  //Tracev((stderr, "\nbl tree: sent %ld", s->bits_sent));

  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */
  //Tracev((stderr, "\nlit tree: sent %ld", s->bits_sent));

  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */
  //Tracev((stderr, "\ndist tree: sent %ld", s->bits_sent));
};


/* ===========================================================================
 * Check if the data type is TEXT or BINARY, using the following algorithm:
 * - TEXT if the two conditions below are satisfied:
 *    a) There are no non-portable control characters belonging to the
 *       "block list" (0..6, 14..25, 28..31).
 *    b) There is at least one printable character belonging to the
 *       "allow list" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).
 * - BINARY otherwise.
 * - The following partially-portable control characters form a
 *   "gray list" that is ignored in this detection algorithm:
 *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).
 * IN assertion: the fields Freq of dyn_ltree are set.
 */
const detect_data_type = (s) => {
  /* block_mask is the bit mask of block-listed bytes
   * set bits 0..6, 14..25, and 28..31
   * 0xf3ffc07f = binary 11110011111111111100000001111111
   */
  let block_mask = 0xf3ffc07f;
  let n;

  /* Check for non-textual ("block-listed") bytes. */
  for (n = 0; n <= 31; n++, block_mask >>>= 1) {
    if ((block_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {
      return Z_BINARY;
    }
  }

  /* Check for textual ("allow-listed") bytes. */
  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||
      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {
    return Z_TEXT;
  }
  for (n = 32; n < LITERALS$1; n++) {
    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {
      return Z_TEXT;
    }
  }

  /* There are no "block-listed" or "allow-listed" bytes:
   * this stream either is empty or has tolerated ("gray-listed") bytes only.
   */
  return Z_BINARY;
};


let static_init_done = false;

/* ===========================================================================
 * Initialize the tree data structures for a new zlib stream.
 */
const _tr_init$1 = (s) =>
{

  if (!static_init_done) {
    tr_static_init();
    static_init_done = true;
  }

  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);
  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);
  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);

  s.bi_buf = 0;
  s.bi_valid = 0;

  /* Initialize the first block of the first file: */
  init_block(s);
};


/* ===========================================================================
 * Send a stored block
 */
const _tr_stored_block$1 = (s, buf, stored_len, last) => {
//DeflateState *s;
//charf *buf;       /* input block */
//ulg stored_len;   /* length of input block */
//int last;         /* one if this is the last block for a file */

  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */
  bi_windup(s);        /* align on byte boundary */
  put_short(s, stored_len);
  put_short(s, ~stored_len);
  if (stored_len) {
    s.pending_buf.set(s.window.subarray(buf, buf + stored_len), s.pending);
  }
  s.pending += stored_len;
};


/* ===========================================================================
 * Send one empty static block to give enough lookahead for inflate.
 * This takes 10 bits, of which 7 may remain in the bit buffer.
 */
const _tr_align$1 = (s) => {
  send_bits(s, STATIC_TREES << 1, 3);
  send_code(s, END_BLOCK, static_ltree);
  bi_flush(s);
};


/* ===========================================================================
 * Determine the best encoding for the current block: dynamic trees, static
 * trees or store, and write out the encoded block.
 */
const _tr_flush_block$1 = (s, buf, stored_len, last) => {
//DeflateState *s;
//charf *buf;       /* input block, or NULL if too old */
//ulg stored_len;   /* length of input block */
//int last;         /* one if this is the last block for a file */

  let opt_lenb, static_lenb;  /* opt_len and static_len in bytes */
  let max_blindex = 0;        /* index of last bit length code of non zero freq */

  /* Build the Huffman trees unless a stored block is forced */
  if (s.level > 0) {

    /* Check if the file is binary or text */
    if (s.strm.data_type === Z_UNKNOWN$1) {
      s.strm.data_type = detect_data_type(s);
    }

    /* Construct the literal and distance trees */
    build_tree(s, s.l_desc);
    // Tracev((stderr, "\nlit data: dyn %ld, stat %ld", s->opt_len,
    //        s->static_len));

    build_tree(s, s.d_desc);
    // Tracev((stderr, "\ndist data: dyn %ld, stat %ld", s->opt_len,
    //        s->static_len));
    /* At this point, opt_len and static_len are the total bit lengths of
     * the compressed block data, excluding the tree representations.
     */

    /* Build the bit length tree for the above two trees, and get the index
     * in bl_order of the last bit length code to send.
     */
    max_blindex = build_bl_tree(s);

    /* Determine the best encoding. Compute the block lengths in bytes. */
    opt_lenb = (s.opt_len + 3 + 7) >>> 3;
    static_lenb = (s.static_len + 3 + 7) >>> 3;

    // Tracev((stderr, "\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u ",
    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,
    //        s->sym_next / 3));

    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }

  } else {
    // Assert(buf != (char*)0, "lost buf");
    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */
  }

  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {
    /* 4: two words for the lengths */

    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.
     * Otherwise we can't have processed more than WSIZE input bytes since
     * the last block flush, because compression would have been
     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to
     * transform a block into a stored block.
     */
    _tr_stored_block$1(s, buf, stored_len, last);

  } else if (s.strategy === Z_FIXED$1 || static_lenb === opt_lenb) {

    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);
    compress_block(s, static_ltree, static_dtree);

  } else {
    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);
    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);
    compress_block(s, s.dyn_ltree, s.dyn_dtree);
  }
  // Assert (s->compressed_len == s->bits_sent, "bad compressed size");
  /* The above check is made mod 2^32, for files larger than 512 MB
   * and uLong implemented on 32 bits.
   */
  init_block(s);

  if (last) {
    bi_windup(s);
  }
  // Tracev((stderr,"\ncomprlen %lu(%lu) ", s->compressed_len>>3,
  //       s->compressed_len-7*last));
};

/* ===========================================================================
 * Save the match info and tally the frequency counts. Return true if
 * the current block must be flushed.
 */
const _tr_tally$1 = (s, dist, lc) => {
//    deflate_state *s;
//    unsigned dist;  /* distance of matched string */
//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */

  s.pending_buf[s.sym_buf + s.sym_next++] = dist;
  s.pending_buf[s.sym_buf + s.sym_next++] = dist >> 8;
  s.pending_buf[s.sym_buf + s.sym_next++] = lc;
  if (dist === 0) {
    /* lc is the unmatched char */
    s.dyn_ltree[lc * 2]/*.Freq*/++;
  } else {
    s.matches++;
    /* Here, lc is the match length - MIN_MATCH */
    dist--;             /* dist = match distance - 1 */
    //Assert((ush)dist < (ush)MAX_DIST(s) &&
    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&
    //       (ush)d_code(dist) < (ush)D_CODES,  "_tr_tally: bad match");

    s.dyn_ltree[(_length_code[lc] + LITERALS$1 + 1) * 2]/*.Freq*/++;
    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;
  }

  return (s.sym_next === s.sym_end);
};

var _tr_init_1  = _tr_init$1;
var _tr_stored_block_1 = _tr_stored_block$1;
var _tr_flush_block_1  = _tr_flush_block$1;
var _tr_tally_1 = _tr_tally$1;
var _tr_align_1 = _tr_align$1;

var trees = {
	_tr_init: _tr_init_1,
	_tr_stored_block: _tr_stored_block_1,
	_tr_flush_block: _tr_flush_block_1,
	_tr_tally: _tr_tally_1,
	_tr_align: _tr_align_1
};

// Note: adler32 takes 12% for level 0 and 2% for level 6.
// It isn't worth it to make additional optimizations as in original.
// Small size is preferable.

// (C) 1995-2013 Jean-loup Gailly and Mark Adler
// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin
//
// This software is provided 'as-is', without any express or implied
// warranty. In no event will the authors be held liable for any damages
// arising from the use of this software.
//
// Permission is granted to anyone to use this software for any purpose,
// including commercial applications, and to alter it and redistribute it
// freely, subject to the following restrictions:
//
// 1. The origin of this software must not be misrepresented; you must not
//   claim that you wrote the original software. If you use this software
//   in a product, an acknowledgment in the product documentation would be
//   appreciated but is not required.
// 2. Altered source versions must be plainly marked as such, and must not be
//   misrepresented as being the original software.
// 3. This notice may not be removed or altered from any source distribution.

const adler32 = (adler, buf, len, pos) => {
  let s1 = (adler & 0xffff) |0,
      s2 = ((adler >>> 16) & 0xffff) |0,
      n = 0;

  while (len !== 0) {
    // Set limit ~ twice less than 5552, to keep
    // s2 in 31-bits, because we force signed ints.
    // in other case %= will fail.
    n = len > 2000 ? 2000 : len;
    len -= n;

    do {
      s1 = (s1 + buf[pos++]) |0;
      s2 = (s2 + s1) |0;
    } while (--n);

    s1 %= 65521;
    s2 %= 65521;
  }

  return (s1 | (s2 << 16)) |0;
};


var adler32_1 = adler32;

// Note: we can't get significant speed boost here.
// So write code to minimize size - no pregenerated tables
// and array tools dependencies.

// (C) 1995-2013 Jean-loup Gailly and Mark Adler
// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin
//
// This software is provided 'as-is', without any express or implied
// warranty. In no event will the authors be held liable for any damages
// arising from the use of this software.
//
// Permission is granted to anyone to use this software for any purpose,
// including commercial applications, and to alter it and redistribute it
// freely, subject to the following restrictions:
//
// 1. The origin of this software must not be misrepresented; you must not
//   claim that you wrote the original software. If you use this software
//   in a product, an acknowledgment in the product documentation would be
//   appreciated but is not required.
// 2. Altered source versions must be plainly marked as such, and must not be
//   misrepresented as being the original software.
// 3. This notice may not be removed or altered from any source distribution.

// Use ordinary array, since untyped makes no boost here
const makeTable = () => {
  let c, table = [];

  for (var n = 0; n < 256; n++) {
    c = n;
    for (var k = 0; k < 8; k++) {
      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));
    }
    table[n] = c;
  }

  return table;
};

// Create table on load. Just 255 signed longs. Not a problem.
const crcTable = new Uint32Array(makeTable());


const crc32 = (crc, buf, len, pos) => {
  const t = crcTable;
  const end = pos + len;

  crc ^= -1;

  for (let i = pos; i < end; i++) {
    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];
  }

  return (crc ^ (-1)); // >>> 0;
};


var crc32_1 = crc32;

// (C) 1995-2013 Jean-loup Gailly and Mark Adler
// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin
//
// This software is provided 'as-is', without any express or implied
// warranty. In no event will the authors be held liable for any damages
// arising from the use of this software.
//
// Permission is granted to anyone to use this software for any purpose,
// including commercial applications, and to alter it and redistribute it
// freely, subject to the following restrictions:
//
// 1. The origin of this software must not be misrepresented; you must not
//   claim that you wrote the original software. If you use this software
//   in a product, an acknowledgment in the product documentation would be
//   appreciated but is not required.
// 2. Altered source versions must be plainly marked as such, and must not be
//   misrepresented as being the original software.
// 3. This notice may not be removed or altered from any source distribution.

var messages = {
  2:      'need dictionary',     /* Z_NEED_DICT       2  */
  1:      'stream end',          /* Z_STREAM_END      1  */
  0:      '',                    /* Z_OK              0  */
  '-1':   'file error',          /* Z_ERRNO         (-1) */
  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */
  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */
  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */
  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */
  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */
};

// (C) 1995-2013 Jean-loup Gailly and Mark Adler
// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin
//
// This software is provided 'as-is', without any express or implied
// warranty. In no event will the authors be held liable for any damages
// arising from the use of this software.
//
// Permission is granted to anyone to use this software for any purpose,
// including commercial applications, and to alter it and redistribute it
// freely, subject to the following restrictions:
//
// 1. The origin of this software must not be misrepresented; you must not
//   claim that you wrote the original software. If you use this software
//   in a product, an acknowledgment in the product documentation would be
//   appreciated but is not required.
// 2. Altered source versions must be plainly marked as such, and must not be
//   misrepresented as being the original software.
// 3. This notice may not be removed or altered from any source distribution.

var constants$2 = {

  /* Allowed flush values; see deflate() and inflate() below for details */
  Z_NO_FLUSH:         0,
  Z_PARTIAL_FLUSH:    1,
  Z_SYNC_FLUSH:       2,
  Z_FULL_FLUSH:       3,
  Z_FINISH:           4,
  Z_BLOCK:            5,
  Z_TREES:            6,

  /* Return codes for the compression/decompression functions. Negative values
  * are errors, positive values are used for special but normal events.
  */
  Z_OK:               0,
  Z_STREAM_END:       1,
  Z_NEED_DICT:        2,
  Z_ERRNO:           -1,
  Z_STREAM_ERROR:    -2,
  Z_DATA_ERROR:      -3,
  Z_MEM_ERROR:       -4,
  Z_BUF_ERROR:       -5,
  //Z_VERSION_ERROR: -6,

  /* compression levels */
  Z_NO_COMPRESSION:         0,
  Z_BEST_SPEED:             1,
  Z_BEST_COMPRESSION:       9,
  Z_DEFAULT_COMPRESSION:   -1,


  Z_FILTERED:               1,
  Z_HUFFMAN_ONLY:           2,
  Z_RLE:                    3,
  Z_FIXED:                  4,
  Z_DEFAULT_STRATEGY:       0,

  /* Possible values of the data_type field (though see inflate()) */
  Z_BINARY:                 0,
  Z_TEXT:                   1,
  //Z_ASCII:                1, // = Z_TEXT (deprecated)
  Z_UNKNOWN:                2,

  /* The deflate compression method */
  Z_DEFLATED:               8
  //Z_NULL:                 null // Use -1 or null inline, depending on var type
};

// (C) 1995-2013 Jean-loup Gailly and Mark Adler
// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin
//
// This software is provided 'as-is', without any express or implied
// warranty. In no event will the authors be held liable for any damages
// arising from the use of this software.
//
// Permission is granted to anyone to use this software for any purpose,
// including commercial applications, and to alter it and redistribute it
// freely, subject to the following restrictions:
//
// 1. The origin of this software must not be misrepresented; you must not
//   claim that you wrote the original software. If you use this software
//   in a product, an acknowledgment in the product documentation would be
//   appreciated but is not required.
// 2. Altered source versions must be plainly marked as such, and must not be
//   misrepresented as being the original software.
// 3. This notice may not be removed or altered from any source distribution.

const { _tr_init, _tr_stored_block, _tr_flush_block, _tr_tally, _tr_align } = trees;




/* Public constants ==========================================================*/
/* ===========================================================================*/

const {
  Z_NO_FLUSH: Z_NO_FLUSH$2, Z_PARTIAL_FLUSH, Z_FULL_FLUSH: Z_FULL_FLUSH$1, Z_FINISH: Z_FINISH$3, Z_BLOCK: Z_BLOCK$1,
  Z_OK: Z_OK$3, Z_STREAM_END: Z_STREAM_END$3, Z_STREAM_ERROR: Z_STREAM_ERROR$2, Z_DATA_ERROR: Z_DATA_ERROR$2, Z_BUF_ERROR: Z_BUF_ERROR$1,
  Z_DEFAULT_COMPRESSION: Z_DEFAULT_COMPRESSION$1,
  Z_FILTERED, Z_HUFFMAN_ONLY, Z_RLE, Z_FIXED, Z_DEFAULT_STRATEGY: Z_DEFAULT_STRATEGY$1,
  Z_UNKNOWN,
  Z_DEFLATED: Z_DEFLATED$2
} = constants$2;

/*============================================================================*/


const MAX_MEM_LEVEL = 9;
/* Maximum value for memLevel in deflateInit2 */
const MAX_WBITS$1 = 15;
/* 32K LZ77 window */
const DEF_MEM_LEVEL = 8;


const LENGTH_CODES  = 29;
/* number of length codes, not counting the special END_BLOCK code */
const LITERALS      = 256;
/* number of literal bytes 0..255 */
const L_CODES       = LITERALS + 1 + LENGTH_CODES;
/* number of Literal or Length codes, including the END_BLOCK code */
const D_CODES       = 30;
/* number of distance codes */
const BL_CODES      = 19;
/* number of codes used to transfer the bit lengths */
const HEAP_SIZE     = 2 * L_CODES + 1;
/* maximum heap size */
const MAX_BITS  = 15;
/* All codes must not exceed MAX_BITS bits */

const MIN_MATCH = 3;
const MAX_MATCH = 258;
const MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);

const PRESET_DICT = 0x20;

const INIT_STATE    =  42;    /* zlib header -> BUSY_STATE */
//#ifdef GZIP
const GZIP_STATE    =  57;    /* gzip header -> BUSY_STATE | EXTRA_STATE */
//#endif
const EXTRA_STATE   =  69;    /* gzip extra block -> NAME_STATE */
const NAME_STATE    =  73;    /* gzip file name -> COMMENT_STATE */
const COMMENT_STATE =  91;    /* gzip comment -> HCRC_STATE */
const HCRC_STATE    = 103;    /* gzip header CRC -> BUSY_STATE */
const BUSY_STATE    = 113;    /* deflate -> FINISH_STATE */
const FINISH_STATE  = 666;    /* stream complete */

const BS_NEED_MORE      = 1; /* block not completed, need more input or more output */
const BS_BLOCK_DONE     = 2; /* block flush performed */
const BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */
const BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */

const OS_CODE = 0x03; // Unix :) . Don't detect, use this default.

const err = (strm, errorCode) => {
  strm.msg = messages[errorCode];
  return errorCode;
};

const rank = (f) => {
  return ((f) * 2) - ((f) > 4 ? 9 : 0);
};

const zero = (buf) => {
  let len = buf.length; while (--len >= 0) { buf[len] = 0; }
};

/* ===========================================================================
 * Slide the hash table when sliding the window down (could be avoided with 32
 * bit values at the expense of memory usage). We slide even when level == 0 to
 * keep the hash table consistent if we switch back to level > 0 later.
 */
const slide_hash = (s) => {
  let n, m;
  let p;
  let wsize = s.w_size;

  n = s.hash_size;
  p = n;
  do {
    m = s.head[--p];
    s.head[p] = (m >= wsize ? m - wsize : 0);
  } while (--n);
  n = wsize;
//#ifndef FASTEST
  p = n;
  do {
    m = s.prev[--p];
    s.prev[p] = (m >= wsize ? m - wsize : 0);
    /* If n is not on any hash chain, prev[n] is garbage but
     * its value will never be used.
     */
  } while (--n);
//#endif
};

/* eslint-disable new-cap */
let HASH_ZLIB = (s, prev, data) => ((prev << s.hash_shift) ^ data) & s.hash_mask;
// This hash causes less collisions, https://github.com/nodeca/pako/issues/135
// But breaks binary compatibility
//let HASH_FAST = (s, prev, data) => ((prev << 8) + (prev >> 8) + (data << 4)) & s.hash_mask;
let HASH = HASH_ZLIB;


/* =========================================================================
 * Flush as much pending output as possible. All deflate() output, except for
 * some deflate_stored() output, goes through this function so some
 * applications may wish to modify it to avoid allocating a large
 * strm->next_out buffer and copying into it. (See also read_buf()).
 */
const flush_pending = (strm) => {
  const s = strm.state;

  //_tr_flush_bits(s);
  let len = s.pending;
  if (len > strm.avail_out) {
    len = strm.avail_out;
  }
  if (len === 0) { return; }

  strm.output.set(s.pending_buf.subarray(s.pending_out, s.pending_out + len), strm.next_out);
  strm.next_out  += len;
  s.pending_out  += len;
  strm.total_out += len;
  strm.avail_out -= len;
  s.pending      -= len;
  if (s.pending === 0) {
    s.pending_out = 0;
  }
};


const flush_block_only = (s, last) => {
  _tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);
  s.block_start = s.strstart;
  flush_pending(s.strm);
};


const put_byte = (s, b) => {
  s.pending_buf[s.pending++] = b;
};


/* =========================================================================
 * Put a short in the pending buffer. The 16-bit value is put in MSB order.
 * IN assertion: the stream state is correct and there is enough room in
 * pending_buf.
 */
const putShortMSB = (s, b) => {

  //  put_byte(s, (Byte)(b >> 8));
//  put_byte(s, (Byte)(b & 0xff));
  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;
  s.pending_buf[s.pending++] = b & 0xff;
};


/* ===========================================================================
 * Read a new buffer from the current input stream, update the adler32
 * and total number of bytes read.  All deflate() input goes through
 * this function so some applications may wish to modify it to avoid
 * allocating a large strm->input buffer and copying from it.
 * (See also flush_pending()).
 */
const read_buf = (strm, buf, start, size) => {

  let len = strm.avail_in;

  if (len > size) { len = size; }
  if (len === 0) { return 0; }

  strm.avail_in -= len;

  // zmemcpy(buf, strm->next_in, len);
  buf.set(strm.input.subarray(strm.next_in, strm.next_in + len), start);
  if (strm.state.wrap === 1) {
    strm.adler = adler32_1(strm.adler, buf, len, start);
  }

  else if (strm.state.wrap === 2) {
    strm.adler = crc32_1(strm.adler, buf, len, start);
  }

  strm.next_in += len;
  strm.total_in += len;

  return len;
};


/* ===========================================================================
 * Set match_start to the longest match starting at the given string and
 * return its length. Matches shorter or equal to prev_length are discarded,
 * in which case the result is equal to prev_length and match_start is
 * garbage.
 * IN assertions: cur_match is the head of the hash chain for the current
 *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1
 * OUT assertion: the match length is not greater than s->lookahead.
 */
const longest_match = (s, cur_match) => {

  let chain_length = s.max_chain_length;      /* max hash chain length */
  let scan = s.strstart; /* current string */
  let match;                       /* matched string */
  let len;                           /* length of current match */
  let best_len = s.prev_length;              /* best match length so far */
  let nice_match = s.nice_match;             /* stop if match long enough */
  const limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?
      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;

  const _win = s.window; // shortcut

  const wmask = s.w_mask;
  const prev  = s.prev;

  /* Stop when cur_match becomes <= limit. To simplify the code,
   * we prevent matches with the string of window index 0.
   */

  const strend = s.strstart + MAX_MATCH;
  let scan_end1  = _win[scan + best_len - 1];
  let scan_end   = _win[scan + best_len];

  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.
   * It is easy to get rid of this optimization if necessary.
   */
  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, "Code too clever");

  /* Do not waste too much time if we already have a good match: */
  if (s.prev_length >= s.good_match) {
    chain_length >>= 2;
  }
  /* Do not look for matches beyond the end of the input. This is necessary
   * to make deflate deterministic.
   */
  if (nice_match > s.lookahead) { nice_match = s.lookahead; }

  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, "need lookahead");

  do {
    // Assert(cur_match < s->strstart, "no future");
    match = cur_match;

    /* Skip to next match if the match length cannot increase
     * or if the match length is less than 2.  Note that the checks below
     * for insufficient lookahead only occur occasionally for performance
     * reasons.  Therefore uninitialized memory will be accessed, and
     * conditional jumps will be made that depend on those values.
     * However the length of the match is limited to the lookahead, so
     * the output of deflate is not affected by the uninitialized values.
     */

    if (_win[match + best_len]     !== scan_end  ||
        _win[match + best_len - 1] !== scan_end1 ||
        _win[match]                !== _win[scan] ||
        _win[++match]              !== _win[scan + 1]) {
      continue;
    }

    /* The check at best_len-1 can be removed because it will be made
     * again later. (This heuristic is not always a win.)
     * It is not necessary to compare scan[2] and match[2] since they
     * are always equal when the other bytes match, given that
     * the hash keys are equal and that HASH_BITS >= 8.
     */
    scan += 2;
    match++;
    // Assert(*scan == *match, "match[2]?");

    /* We check for insufficient lookahead only every 8th comparison;
     * the 256th check will be made at strstart+258.
     */
    do {
      /*jshint noempty:false*/
    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&
             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&
             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&
             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&
             scan < strend);

    // Assert(scan <= s->window+(unsigned)(s->window_size-1), "wild scan");

    len = MAX_MATCH - (strend - scan);
    scan = strend - MAX_MATCH;

    if (len > best_len) {
      s.match_start = cur_match;
      best_len = len;
      if (len >= nice_match) {
        break;
      }
      scan_end1  = _win[scan + best_len - 1];
      scan_end   = _win[scan + best_len];
    }
  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);

  if (best_len <= s.lookahead) {
    return best_len;
  }
  return s.lookahead;
};


/* ===========================================================================
 * Fill the window when the lookahead becomes insufficient.
 * Updates strstart and lookahead.
 *
 * IN assertion: lookahead < MIN_LOOKAHEAD
 * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD
 *    At least one byte has been read, or avail_in == 0; reads are
 *    performed for at least two bytes (required for the zip translate_eol
 *    option -- not supported here).
 */
const fill_window = (s) => {

  const _w_size = s.w_size;
  let n, more, str;

  //Assert(s->lookahead < MIN_LOOKAHEAD, "already enough lookahead");

  do {
    more = s.window_size - s.lookahead - s.strstart;

    // JS ints have 32 bit, block below not needed
    /* Deal with !@#$% 64K limit: */
    //if (sizeof(int) <= 2) {
    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {
    //        more = wsize;
    //
    //  } else if (more == (unsigned)(-1)) {
    //        /* Very unlikely, but possible on 16 bit machine if
    //         * strstart == 0 && lookahead == 1 (input done a byte at time)
    //         */
    //        more--;
    //    }
    //}


    /* If the window is almost full and there is insufficient lookahead,
     * move the upper half to the lower one to make room in the upper half.
     */
    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {

      s.window.set(s.window.subarray(_w_size, _w_size + _w_size - more), 0);
      s.match_start -= _w_size;
      s.strstart -= _w_size;
      /* we now have strstart >= MAX_DIST */
      s.block_start -= _w_size;
      if (s.insert > s.strstart) {
        s.insert = s.strstart;
      }
      slide_hash(s);
      more += _w_size;
    }
    if (s.strm.avail_in === 0) {
      break;
    }

    /* If there was no sliding:
     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&
     *    more == window_size - lookahead - strstart
     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)
     * => more >= window_size - 2*WSIZE + 2
     * In the BIG_MEM or MMAP case (not yet supported),
     *   window_size == input_size + MIN_LOOKAHEAD  &&
     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.
     * Otherwise, window_size == 2*WSIZE so more >= 2.
     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.
     */
    //Assert(more >= 2, "more < 2");
    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);
    s.lookahead += n;

    /* Initialize the hash value now that we have some input: */
    if (s.lookahead + s.insert >= MIN_MATCH) {
      str = s.strstart - s.insert;
      s.ins_h = s.window[str];

      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */
      s.ins_h = HASH(s, s.ins_h, s.window[str + 1]);
//#if MIN_MATCH != 3
//        Call update_hash() MIN_MATCH-3 more times
//#endif
      while (s.insert) {
        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */
        s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);

        s.prev[str & s.w_mask] = s.head[s.ins_h];
        s.head[s.ins_h] = str;
        str++;
        s.insert--;
        if (s.lookahead + s.insert < MIN_MATCH) {
          break;
        }
      }
    }
    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,
     * but this is not important since only literal bytes will be emitted.
     */

  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);

  /* If the WIN_INIT bytes after the end of the current data have never been
   * written, then zero those bytes in order to avoid memory check reports of
   * the use of uninitialized (or uninitialised as Julian writes) bytes by
   * the longest match routines.  Update the high water mark for the next
   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match
   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.
   */
//  if (s.high_water < s.window_size) {
//    const curr = s.strstart + s.lookahead;
//    let init = 0;
//
//    if (s.high_water < curr) {
//      /* Previous high water mark below current data -- zero WIN_INIT
//       * bytes or up to end of window, whichever is less.
//       */
//      init = s.window_size - curr;
//      if (init > WIN_INIT)
//        init = WIN_INIT;
//      zmemzero(s->window + curr, (unsigned)init);
//      s->high_water = curr + init;
//    }
//    else if (s->high_water < (ulg)curr + WIN_INIT) {
//      /* High water mark at or above current data, but below current data
//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up
//       * to end of window, whichever is less.
//       */
//      init = (ulg)curr + WIN_INIT - s->high_water;
//      if (init > s->window_size - s->high_water)
//        init = s->window_size - s->high_water;
//      zmemzero(s->window + s->high_water, (unsigned)init);
//      s->high_water += init;
//    }
//  }
//
//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,
//    "not enough room for search");
};

/* ===========================================================================
 * Copy without compression as much as possible from the input stream, return
 * the current block state.
 *
 * In case deflateParams() is used to later switch to a non-zero compression
 * level, s->matches (otherwise unused when storing) keeps track of the number
 * of hash table slides to perform. If s->matches is 1, then one hash table
 * slide will be done when switching. If s->matches is 2, the maximum value
 * allowed here, then the hash table will be cleared, since two or more slides
 * is the same as a clear.
 *
 * deflate_stored() is written to minimize the number of times an input byte is
 * copied. It is most efficient with large input and output buffers, which
 * maximizes the opportunites to have a single copy from next_in to next_out.
 */
const deflate_stored = (s, flush) => {

  /* Smallest worthy block size when not flushing or finishing. By default
   * this is 32K. This can be as small as 507 bytes for memLevel == 1. For
   * large input and output buffers, the stored block size will be larger.
   */
  let min_block = s.pending_buf_size - 5 > s.w_size ? s.w_size : s.pending_buf_size - 5;

  /* Copy as many min_block or larger stored blocks directly to next_out as
   * possible. If flushing, copy the remaining available input to next_out as
   * stored blocks, if there is enough space.
   */
  let len, left, have, last = 0;
  let used = s.strm.avail_in;
  do {
    /* Set len to the maximum size block that we can copy directly with the
     * available input data and output space. Set left to how much of that
     * would be copied from what's left in the window.
     */
    len = 65535/* MAX_STORED */;     /* maximum deflate stored block length */
    have = (s.bi_valid + 42) >> 3;     /* number of header bytes */
    if (s.strm.avail_out < have) {         /* need room for header */
      break;
    }
      /* maximum stored block length that will fit in avail_out: */
    have = s.strm.avail_out - have;
    left = s.strstart - s.block_start;  /* bytes left in window */
    if (len > left + s.strm.avail_in) {
      len = left + s.strm.avail_in;   /* limit len to the input */
    }
    if (len > have) {
      len = have;             /* limit len to the output */
    }

    /* If the stored block would be less than min_block in length, or if
     * unable to copy all of the available input when flushing, then try
     * copying to the window and the pending buffer instead. Also don't
     * write an empty block when flushing -- deflate() does that.
     */
    if (len < min_block && ((len === 0 && flush !== Z_FINISH$3) ||
                        flush === Z_NO_FLUSH$2 ||
                        len !== left + s.strm.avail_in)) {
      break;
    }

    /* Make a dummy stored block in pending to get the header bytes,
     * including any pending bits. This also updates the debugging counts.
     */
    last = flush === Z_FINISH$3 && len === left + s.strm.avail_in ? 1 : 0;
    _tr_stored_block(s, 0, 0, last);

    /* Replace the lengths in the dummy stored block with len. */
    s.pending_buf[s.pending - 4] = len;
    s.pending_buf[s.pending - 3] = len >> 8;
    s.pending_buf[s.pending - 2] = ~len;
    s.pending_buf[s.pending - 1] = ~len >> 8;

    /* Write the stored block header bytes. */
    flush_pending(s.strm);

//#ifdef ZLIB_DEBUG
//    /* Update debugging counts for the data about to be copied. */
//    s->compressed_len += len << 3;
//    s->bits_sent += len << 3;
//#endif

    /* Copy uncompressed bytes from the window to next_out. */
    if (left) {
      if (left > len) {
        left = len;
      }
      //zmemcpy(s->strm->next_out, s->window + s->block_start, left);
      s.strm.output.set(s.window.subarray(s.block_start, s.block_start + left), s.strm.next_out);
      s.strm.next_out += left;
      s.strm.avail_out -= left;
      s.strm.total_out += left;
      s.block_start += left;
      len -= left;
    }

    /* Copy uncompressed bytes directly from next_in to next_out, updating
     * the check value.
     */
    if (len) {
      read_buf(s.strm, s.strm.output, s.strm.next_out, len);
      s.strm.next_out += len;
      s.strm.avail_out -= len;
      s.strm.total_out += len;
    }
  } while (last === 0);

  /* Update the sliding window with the last s->w_size bytes of the copied
   * data, or append all of the copied data to the existing window if less
   * than s->w_size bytes were copied. Also update the number of bytes to
   * insert in the hash tables, in the event that deflateParams() switches to
   * a non-zero compression level.
   */
  used -= s.strm.avail_in;    /* number of input bytes directly copied */
  if (used) {
    /* If any input was used, then no unused input remains in the window,
     * therefore s->block_start == s->strstart.
     */
    if (used >= s.w_size) {  /* supplant the previous history */
      s.matches = 2;     /* clear hash */
      //zmemcpy(s->window, s->strm->next_in - s->w_size, s->w_size);
      s.window.set(s.strm.input.subarray(s.strm.next_in - s.w_size, s.strm.next_in), 0);
      s.strstart = s.w_size;
      s.insert = s.strstart;
    }
    else {
      if (s.window_size - s.strstart <= used) {
        /* Slide the window down. */
        s.strstart -= s.w_size;
        //zmemcpy(s->window, s->window + s->w_size, s->strstart);
        s.window.set(s.window.subarray(s.w_size, s.w_size + s.strstart), 0);
        if (s.matches < 2) {
          s.matches++;   /* add a pending slide_hash() */
        }
        if (s.insert > s.strstart) {
          s.insert = s.strstart;
        }
      }
      //zmemcpy(s->window + s->strstart, s->strm->next_in - used, used);
      s.window.set(s.strm.input.subarray(s.strm.next_in - used, s.strm.next_in), s.strstart);
      s.strstart += used;
      s.insert += used > s.w_size - s.insert ? s.w_size - s.insert : used;
    }
    s.block_start = s.strstart;
  }
  if (s.high_water < s.strstart) {
    s.high_water = s.strstart;
  }

  /* If the last block was written to next_out, then done. */
  if (last) {
    return BS_FINISH_DONE;
  }

  /* If flushing and all input has been consumed, then done. */
  if (flush !== Z_NO_FLUSH$2 && flush !== Z_FINISH$3 &&
    s.strm.avail_in === 0 && s.strstart === s.block_start) {
    return BS_BLOCK_DONE;
  }

  /* Fill the window with any remaining input. */
  have = s.window_size - s.strstart;
  if (s.strm.avail_in > have && s.block_start >= s.w_size) {
    /* Slide the window down. */
    s.block_start -= s.w_size;
    s.strstart -= s.w_size;
    //zmemcpy(s->window, s->window + s->w_size, s->strstart);
    s.window.set(s.window.subarray(s.w_size, s.w_size + s.strstart), 0);
    if (s.matches < 2) {
      s.matches++;       /* add a pending slide_hash() */
    }
    have += s.w_size;      /* more space now */
    if (s.insert > s.strstart) {
      s.insert = s.strstart;
    }
  }
  if (have > s.strm.avail_in) {
    have = s.strm.avail_in;
  }
  if (have) {
    read_buf(s.strm, s.window, s.strstart, have);
    s.strstart += have;
    s.insert += have > s.w_size - s.insert ? s.w_size - s.insert : have;
  }
  if (s.high_water < s.strstart) {
    s.high_water = s.strstart;
  }

  /* There was not enough avail_out to write a complete worthy or flushed
   * stored block to next_out. Write a stored block to pending instead, if we
   * have enough input for a worthy block, or if flushing and there is enough
   * room for the remaining input as a stored block in the pending buffer.
   */
  have = (s.bi_valid + 42) >> 3;     /* number of header bytes */
    /* maximum stored block length that will fit in pending: */
  have = s.pending_buf_size - have > 65535/* MAX_STORED */ ? 65535/* MAX_STORED */ : s.pending_buf_size - have;
  min_block = have > s.w_size ? s.w_size : have;
  left = s.strstart - s.block_start;
  if (left >= min_block ||
     ((left || flush === Z_FINISH$3) && flush !== Z_NO_FLUSH$2 &&
     s.strm.avail_in === 0 && left <= have)) {
    len = left > have ? have : left;
    last = flush === Z_FINISH$3 && s.strm.avail_in === 0 &&
         len === left ? 1 : 0;
    _tr_stored_block(s, s.block_start, len, last);
    s.block_start += len;
    flush_pending(s.strm);
  }

  /* We've done all we can with the available input and output. */
  return last ? BS_FINISH_STARTED : BS_NEED_MORE;
};


/* ===========================================================================
 * Compress as much as possible from the input stream, return the current
 * block state.
 * This function does not perform lazy evaluation of matches and inserts
 * new strings in the dictionary only for unmatched strings or for short
 * matches. It is used only for the fast compression options.
 */
const deflate_fast = (s, flush) => {

  let hash_head;        /* head of the hash chain */
  let bflush;           /* set if current block must be flushed */

  for (;;) {
    /* Make sure that we always have enough lookahead, except
     * at the end of the input file. We need MAX_MATCH bytes
     * for the next match, plus MIN_MATCH bytes to insert the
     * string following the next match.
     */
    if (s.lookahead < MIN_LOOKAHEAD) {
      fill_window(s);
      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {
        return BS_NEED_MORE;
      }
      if (s.lookahead === 0) {
        break; /* flush the current block */
      }
    }

    /* Insert the string window[strstart .. strstart+2] in the
     * dictionary, and set hash_head to the head of the hash chain:
     */
    hash_head = 0/*NIL*/;
    if (s.lookahead >= MIN_MATCH) {
      /*** INSERT_STRING(s, s.strstart, hash_head); ***/
      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);
      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];
      s.head[s.ins_h] = s.strstart;
      /***/
    }

    /* Find the longest match, discarding those <= prev_length.
     * At this point we have always match_length < MIN_MATCH
     */
    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {
      /* To simplify the code, we prevent matches with the string
       * of window index 0 (in particular we have to avoid a match
       * of the string with itself at the start of the input file).
       */
      s.match_length = longest_match(s, hash_head);
      /* longest_match() sets match_start */
    }
    if (s.match_length >= MIN_MATCH) {
      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only

      /*** _tr_tally_dist(s, s.strstart - s.match_start,
                     s.match_length - MIN_MATCH, bflush); ***/
      bflush = _tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);

      s.lookahead -= s.match_length;

      /* Insert new strings in the hash table only if the match length
       * is not too large. This saves time but degrades compression.
       */
      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {
        s.match_length--; /* string at strstart already in table */
        do {
          s.strstart++;
          /*** INSERT_STRING(s, s.strstart, hash_head); ***/
          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);
          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];
          s.head[s.ins_h] = s.strstart;
          /***/
          /* strstart never exceeds WSIZE-MAX_MATCH, so there are
           * always MIN_MATCH bytes ahead.
           */
        } while (--s.match_length !== 0);
        s.strstart++;
      } else
      {
        s.strstart += s.match_length;
        s.match_length = 0;
        s.ins_h = s.window[s.strstart];
        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */
        s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + 1]);

//#if MIN_MATCH != 3
//                Call UPDATE_HASH() MIN_MATCH-3 more times
//#endif
        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not
         * matter since it will be recomputed at next deflate call.
         */
      }
    } else {
      /* No match, output a literal byte */
      //Tracevv((stderr,"%c", s.window[s.strstart]));
      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/
      bflush = _tr_tally(s, 0, s.window[s.strstart]);

      s.lookahead--;
      s.strstart++;
    }
    if (bflush) {
      /*** FLUSH_BLOCK(s, 0); ***/
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
      /***/
    }
  }
  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);
  if (flush === Z_FINISH$3) {
    /*** FLUSH_BLOCK(s, 1); ***/
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    /***/
    return BS_FINISH_DONE;
  }
  if (s.sym_next) {
    /*** FLUSH_BLOCK(s, 0); ***/
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
    /***/
  }
  return BS_BLOCK_DONE;
};

/* ===========================================================================
 * Same as above, but achieves better compression. We use a lazy
 * evaluation for matches: a match is finally adopted only if there is
 * no better match at the next window position.
 */
const deflate_slow = (s, flush) => {

  let hash_head;          /* head of hash chain */
  let bflush;              /* set if current block must be flushed */

  let max_insert;

  /* Process the input block. */
  for (;;) {
    /* Make sure that we always have enough lookahead, except
     * at the end of the input file. We need MAX_MATCH bytes
     * for the next match, plus MIN_MATCH bytes to insert the
     * string following the next match.
     */
    if (s.lookahead < MIN_LOOKAHEAD) {
      fill_window(s);
      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH$2) {
        return BS_NEED_MORE;
      }
      if (s.lookahead === 0) { break; } /* flush the current block */
    }

    /* Insert the string window[strstart .. strstart+2] in the
     * dictionary, and set hash_head to the head of the hash chain:
     */
    hash_head = 0/*NIL*/;
    if (s.lookahead >= MIN_MATCH) {
      /*** INSERT_STRING(s, s.strstart, hash_head); ***/
      s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);
      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];
      s.head[s.ins_h] = s.strstart;
      /***/
    }

    /* Find the longest match, discarding those <= prev_length.
     */
    s.prev_length = s.match_length;
    s.prev_match = s.match_start;
    s.match_length = MIN_MATCH - 1;

    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&
        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {
      /* To simplify the code, we prevent matches with the string
       * of window index 0 (in particular we have to avoid a match
       * of the string with itself at the start of the input file).
       */
      s.match_length = longest_match(s, hash_head);
      /* longest_match() sets match_start */

      if (s.match_length <= 5 &&
         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {

        /* If prev_match is also MIN_MATCH, match_start is garbage
         * but we will ignore the current match anyway.
         */
        s.match_length = MIN_MATCH - 1;
      }
    }
    /* If there was a match at the previous step and the current
     * match is not better, output the previous match:
     */
    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {
      max_insert = s.strstart + s.lookahead - MIN_MATCH;
      /* Do not insert strings in hash table beyond this. */

      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);

      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,
                     s.prev_length - MIN_MATCH, bflush);***/
      bflush = _tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);
      /* Insert in hash table all strings up to the end of the match.
       * strstart-1 and strstart are already inserted. If there is not
       * enough lookahead, the last two strings are not inserted in
       * the hash table.
       */
      s.lookahead -= s.prev_length - 1;
      s.prev_length -= 2;
      do {
        if (++s.strstart <= max_insert) {
          /*** INSERT_STRING(s, s.strstart, hash_head); ***/
          s.ins_h = HASH(s, s.ins_h, s.window[s.strstart + MIN_MATCH - 1]);
          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];
          s.head[s.ins_h] = s.strstart;
          /***/
        }
      } while (--s.prev_length !== 0);
      s.match_available = 0;
      s.match_length = MIN_MATCH - 1;
      s.strstart++;

      if (bflush) {
        /*** FLUSH_BLOCK(s, 0); ***/
        flush_block_only(s, false);
        if (s.strm.avail_out === 0) {
          return BS_NEED_MORE;
        }
        /***/
      }

    } else if (s.match_available) {
      /* If there was no match at the previous position, output a
       * single literal. If there was a match but the current match
       * is longer, truncate the previous match to a single literal.
       */
      //Tracevv((stderr,"%c", s->window[s->strstart-1]));
      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/
      bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);

      if (bflush) {
        /*** FLUSH_BLOCK_ONLY(s, 0) ***/
        flush_block_only(s, false);
        /***/
      }
      s.strstart++;
      s.lookahead--;
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
    } else {
      /* There is no previous match to compare with, wait for
       * the next step to decide.
       */
      s.match_available = 1;
      s.strstart++;
      s.lookahead--;
    }
  }
  //Assert (flush != Z_NO_FLUSH, "no flush?");
  if (s.match_available) {
    //Tracevv((stderr,"%c", s->window[s->strstart-1]));
    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/
    bflush = _tr_tally(s, 0, s.window[s.strstart - 1]);

    s.match_available = 0;
  }
  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;
  if (flush === Z_FINISH$3) {
    /*** FLUSH_BLOCK(s, 1); ***/
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    /***/
    return BS_FINISH_DONE;
  }
  if (s.sym_next) {
    /*** FLUSH_BLOCK(s, 0); ***/
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
    /***/
  }

  return BS_BLOCK_DONE;
};


/* ===========================================================================
 * For Z_RLE, simply look for runs of bytes, generate matches only of distance
 * one.  Do not maintain a hash table.  (It will be regenerated if this run of
 * deflate switches away from Z_RLE.)
 */
const deflate_rle = (s, flush) => {

  let bflush;            /* set if current block must be flushed */
  let prev;              /* byte at distance one to match */
  let scan, strend;      /* scan goes up to strend for length of run */

  const _win = s.window;

  for (;;) {
    /* Make sure that we always have enough lookahead, except
     * at the end of the input file. We need MAX_MATCH bytes
     * for the longest run, plus one for the unrolled loop.
     */
    if (s.lookahead <= MAX_MATCH) {
      fill_window(s);
      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH$2) {
        return BS_NEED_MORE;
      }
      if (s.lookahead === 0) { break; } /* flush the current block */
    }

    /* See how many times the previous byte repeats */
    s.match_length = 0;
    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {
      scan = s.strstart - 1;
      prev = _win[scan];
      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {
        strend = s.strstart + MAX_MATCH;
        do {
          /*jshint noempty:false*/
        } while (prev === _win[++scan] && prev === _win[++scan] &&
                 prev === _win[++scan] && prev === _win[++scan] &&
                 prev === _win[++scan] && prev === _win[++scan] &&
                 prev === _win[++scan] && prev === _win[++scan] &&
                 scan < strend);
        s.match_length = MAX_MATCH - (strend - scan);
        if (s.match_length > s.lookahead) {
          s.match_length = s.lookahead;
        }
      }
      //Assert(scan <= s->window+(uInt)(s->window_size-1), "wild scan");
    }

    /* Emit match if have run of MIN_MATCH or longer, else emit literal */
    if (s.match_length >= MIN_MATCH) {
      //check_match(s, s.strstart, s.strstart - 1, s.match_length);

      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/
      bflush = _tr_tally(s, 1, s.match_length - MIN_MATCH);

      s.lookahead -= s.match_length;
      s.strstart += s.match_length;
      s.match_length = 0;
    } else {
      /* No match, output a literal byte */
      //Tracevv((stderr,"%c", s->window[s->strstart]));
      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/
      bflush = _tr_tally(s, 0, s.window[s.strstart]);

      s.lookahead--;
      s.strstart++;
    }
    if (bflush) {
      /*** FLUSH_BLOCK(s, 0); ***/
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
      /***/
    }
  }
  s.insert = 0;
  if (flush === Z_FINISH$3) {
    /*** FLUSH_BLOCK(s, 1); ***/
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    /***/
    return BS_FINISH_DONE;
  }
  if (s.sym_next) {
    /*** FLUSH_BLOCK(s, 0); ***/
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
    /***/
  }
  return BS_BLOCK_DONE;
};

/* ===========================================================================
 * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.
 * (It will be regenerated if this run of deflate switches away from Huffman.)
 */
const deflate_huff = (s, flush) => {

  let bflush;             /* set if current block must be flushed */

  for (;;) {
    /* Make sure that we have a literal to write. */
    if (s.lookahead === 0) {
      fill_window(s);
      if (s.lookahead === 0) {
        if (flush === Z_NO_FLUSH$2) {
          return BS_NEED_MORE;
        }
        break;      /* flush the current block */
      }
    }

    /* Output a literal byte */
    s.match_length = 0;
    //Tracevv((stderr,"%c", s->window[s->strstart]));
    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/
    bflush = _tr_tally(s, 0, s.window[s.strstart]);
    s.lookahead--;
    s.strstart++;
    if (bflush) {
      /*** FLUSH_BLOCK(s, 0); ***/
      flush_block_only(s, false);
      if (s.strm.avail_out === 0) {
        return BS_NEED_MORE;
      }
      /***/
    }
  }
  s.insert = 0;
  if (flush === Z_FINISH$3) {
    /*** FLUSH_BLOCK(s, 1); ***/
    flush_block_only(s, true);
    if (s.strm.avail_out === 0) {
      return BS_FINISH_STARTED;
    }
    /***/
    return BS_FINISH_DONE;
  }
  if (s.sym_next) {
    /*** FLUSH_BLOCK(s, 0); ***/
    flush_block_only(s, false);
    if (s.strm.avail_out === 0) {
      return BS_NEED_MORE;
    }
    /***/
  }
  return BS_BLOCK_DONE;
};

/* Values for max_lazy_match, good_match and max_chain_length, depending on
 * the desired pack level (0..9). The values given below have been tuned to
 * exclude worst case performance for pathological files. Better values may be
 * found for specific files.
 */
function Config(good_length, max_lazy, nice_length, max_chain, func) {

  this.good_length = good_length;
  this.max_lazy = max_lazy;
  this.nice_length = nice_length;
  this.max_chain = max_chain;
  this.func = func;
}

const configuration_table = [
  /*      good lazy nice chain */
  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */
  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */
  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */
  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */

  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */
  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */
  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */
  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */
  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */
  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */
];


/* ===========================================================================
 * Initialize the "longest match" routines for a new zlib stream
 */
const lm_init = (s) => {

  s.window_size = 2 * s.w_size;

  /*** CLEAR_HASH(s); ***/
  zero(s.head); // Fill with NIL (= 0);

  /* Set the default configuration parameters:
   */
  s.max_lazy_match = configuration_table[s.level].max_lazy;
  s.good_match = configuration_table[s.level].good_length;
  s.nice_match = configuration_table[s.level].nice_length;
  s.max_chain_length = configuration_table[s.level].max_chain;

  s.strstart = 0;
  s.block_start = 0;
  s.lookahead = 0;
  s.insert = 0;
  s.match_length = s.prev_length = MIN_MATCH - 1;
  s.match_available = 0;
  s.ins_h = 0;
};


function DeflateState() {
  this.strm = null;            /* pointer back to this zlib stream */
  this.status = 0;            /* as the name implies */
  this.pending_buf = null;      /* output still pending */
  this.pending_buf_size = 0;  /* size of pending_buf */
  this.pending_out = 0;       /* next pending byte to output to the stream */
  this.pending = 0;           /* nb of bytes in the pending buffer */
  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */
  this.gzhead = null;         /* gzip header information to write */
  this.gzindex = 0;           /* where in extra, name, or comment */
  this.method = Z_DEFLATED$2; /* can only be DEFLATED */
  this.last_flush = -1;   /* value of flush param for previous deflate call */

  this.w_size = 0;  /* LZ77 window size (32K by default) */
  this.w_bits = 0;  /* log2(w_size)  (8..16) */
  this.w_mask = 0;  /* w_size - 1 */

  this.window = null;
  /* Sliding window. Input bytes are read into the second half of the window,
   * and move to the first half later to keep a dictionary of at least wSize
   * bytes. With this organization, matches are limited to a distance of
   * wSize-MAX_MATCH bytes, but this ensures that IO is always
   * performed with a length multiple of the block size.
   */

  this.window_size = 0;
  /* Actual size of window: 2*wSize, except when the user input buffer
   * is directly used as sliding window.
   */

  this.prev = null;
  /* Link to older string with same hash index. To limit the size of this
   * array to 64K, this link is maintained only for the last 32K strings.
   * An index in this array is thus a window index modulo 32K.
   */

  this.head = null;   /* Heads of the hash chains or NIL. */

  this.ins_h = 0;       /* hash index of string to be inserted */
  this.hash_size = 0;   /* number of elements in hash table */
  this.hash_bits = 0;   /* log2(hash_size) */
  this.hash_mask = 0;   /* hash_size-1 */

  this.hash_shift = 0;
  /* Number of bits by which ins_h must be shifted at each input
   * step. It must be such that after MIN_MATCH steps, the oldest
   * byte no longer takes part in the hash key, that is:
   *   hash_shift * MIN_MATCH >= hash_bits
   */

  this.block_start = 0;
  /* Window position at the beginning of the current output block. Gets
   * negative when the window is moved backwards.
   */

  this.match_length = 0;      /* length of best match */
  this.prev_match = 0;        /* previous match */
  this.match_available = 0;   /* set if previous match exists */
  this.strstart = 0;          /* start of string to insert */
  this.match_start = 0;       /* start of matching string */
  this.lookahead = 0;         /* number of valid bytes ahead in window */

  this.prev_length = 0;
  /* Length of the best match at previous step. Matches not greater than this
   * are discarded. This is used in the lazy match evaluation.
   */

  this.max_chain_length = 0;
  /* To speed up deflation, hash chains are never searched beyond this
   * length.  A higher limit improves compression ratio but degrades the
   * speed.
   */

  this.max_lazy_match = 0;
  /* Attempt to find a better match only when the current match is strictly
   * smaller than this value. This mechanism is used only for compression
   * levels >= 4.
   */
  // That's alias to max_lazy_match, don't use directly
  //this.max_insert_length = 0;
  /* Insert new strings in the hash table only if the match length is not
   * greater than this length. This saves time but degrades compression.
   * max_insert_length is used only for compression levels <= 3.
   */

  this.level = 0;     /* compression level (1..9) */
  this.strategy = 0;  /* favor or force Huffman coding*/

  this.good_match = 0;
  /* Use a faster search when the previous match is longer than this */

  this.nice_match = 0; /* Stop searching when current match exceeds this */

              /* used by trees.c: */

  /* Didn't use ct_data typedef below to suppress compiler warning */

  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */
  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */
  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */

  // Use flat array of DOUBLE size, with interleaved fata,
  // because JS does not support effective
  this.dyn_ltree  = new Uint16Array(HEAP_SIZE * 2);
  this.dyn_dtree  = new Uint16Array((2 * D_CODES + 1) * 2);
  this.bl_tree    = new Uint16Array((2 * BL_CODES + 1) * 2);
  zero(this.dyn_ltree);
  zero(this.dyn_dtree);
  zero(this.bl_tree);

  this.l_desc   = null;         /* desc. for literal tree */
  this.d_desc   = null;         /* desc. for distance tree */
  this.bl_desc  = null;         /* desc. for bit length tree */

  //ush bl_count[MAX_BITS+1];
  this.bl_count = new Uint16Array(MAX_BITS + 1);
  /* number of codes at each bit length for an optimal tree */

  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */
  this.heap = new Uint16Array(2 * L_CODES + 1);  /* heap used to build the Huffman trees */
  zero(this.heap);

  this.heap_len = 0;               /* number of elements in the heap */
  this.heap_max = 0;               /* element of largest frequency */
  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.
   * The same heap array is used to build all trees.
   */

  this.depth = new Uint16Array(2 * L_CODES + 1); //uch depth[2*L_CODES+1];
  zero(this.depth);
  /* Depth of each subtree used as tie breaker for trees of equal frequency
   */

  this.sym_buf = 0;        /* buffer for distances and literals/lengths */

  this.lit_bufsize = 0;
  /* Size of match buffer for literals/lengths.  There are 4 reasons for
   * limiting lit_bufsize to 64K:
   *   - frequencies can be kept in 16 bit counters
   *   - if compression is not successful for the first block, all input
   *     data is still in the window so we can still emit a stored block even
   *     when input comes from standard input.  (This can also be done for
   *     all blocks if lit_bufsize is not greater than 32K.)
   *   - if compression is not successful for a file smaller than 64K, we can
   *     even emit a stored file instead of a stored block (saving 5 bytes).
   *     This is applicable only for zip (not gzip or zlib).
   *   - creating new Huffman trees less frequently may not provide fast
   *     adaptation to changes in the input data statistics. (Take for
   *     example a binary file with poorly compressible code followed by
   *     a highly compressible string table.) Smaller buffer sizes give
   *     fast adaptation but have of course the overhead of transmitting
   *     trees more frequently.
   *   - I can't count above 4
   */

  this.sym_next = 0;      /* running index in sym_buf */
  this.sym_end = 0;       /* symbol table full when sym_next reaches this */

  this.opt_len = 0;       /* bit length of current block with optimal trees */
  this.static_len = 0;    /* bit length of current block with static trees */
  this.matches = 0;       /* number of string matches in current block */
  this.insert = 0;        /* bytes at end of window left to insert */


  this.bi_buf = 0;
  /* Output buffer. bits are inserted starting at the bottom (least
   * significant bits).
   */
  this.bi_valid = 0;
  /* Number of valid bits in bi_buf.  All bits above the last valid bit
   * are always zero.
   */

  // Used for window memory init. We safely ignore it for JS. That makes
  // sense only for pointers and memory check tools.
  //this.high_water = 0;
  /* High water mark offset in window for initialized bytes -- bytes above
   * this are set to zero in order to avoid memory check warnings when
   * longest match routines access bytes past the input.  This is then
   * updated to the new high water mark.
   */
}


/* =========================================================================
 * Check for a valid deflate stream state. Return 0 if ok, 1 if not.
 */
const deflateStateCheck = (strm) => {

  if (!strm) {
    return 1;
  }
  const s = strm.state;
  if (!s || s.strm !== strm || (s.status !== INIT_STATE &&
//#ifdef GZIP
                                s.status !== GZIP_STATE &&
//#endif
                                s.status !== EXTRA_STATE &&
                                s.status !== NAME_STATE &&
                                s.status !== COMMENT_STATE &&
                                s.status !== HCRC_STATE &&
                                s.status !== BUSY_STATE &&
                                s.status !== FINISH_STATE)) {
    return 1;
  }
  return 0;
};


const deflateResetKeep = (strm) => {

  if (deflateStateCheck(strm)) {
    return err(strm, Z_STREAM_ERROR$2);
  }

  strm.total_in = strm.total_out = 0;
  strm.data_type = Z_UNKNOWN;

  const s = strm.state;
  s.pending = 0;
  s.pending_out = 0;

  if (s.wrap < 0) {
    s.wrap = -s.wrap;
    /* was made negative by deflate(..., Z_FINISH); */
  }
  s.status =
//#ifdef GZIP
    s.wrap === 2 ? GZIP_STATE :
//#endif
    s.wrap ? INIT_STATE : BUSY_STATE;
  strm.adler = (s.wrap === 2) ?
    0  // crc32(0, Z_NULL, 0)
  :
    1; // adler32(0, Z_NULL, 0)
  s.last_flush = -2;
  _tr_init(s);
  return Z_OK$3;
};


const deflateReset = (strm) => {

  const ret = deflateResetKeep(strm);
  if (ret === Z_OK$3) {
    lm_init(strm.state);
  }
  return ret;
};


const deflateSetHeader = (strm, head) => {

  if (deflateStateCheck(strm) || strm.state.wrap !== 2) {
    return Z_STREAM_ERROR$2;
  }
  strm.state.gzhead = head;
  return Z_OK$3;
};


const deflateInit2 = (strm, level, method, windowBits, memLevel, strategy) => {

  if (!strm) { // === Z_NULL
    return Z_STREAM_ERROR$2;
  }
  let wrap = 1;

  if (level === Z_DEFAULT_COMPRESSION$1) {
    level = 6;
  }

  if (windowBits < 0) { /* suppress zlib wrapper */
    wrap = 0;
    windowBits = -windowBits;
  }

  else if (windowBits > 15) {
    wrap = 2;           /* write gzip wrapper instead */
    windowBits -= 16;
  }


  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED$2 ||
    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||
    strategy < 0 || strategy > Z_FIXED || (windowBits === 8 && wrap !== 1)) {
    return err(strm, Z_STREAM_ERROR$2);
  }


  if (windowBits === 8) {
    windowBits = 9;
  }
  /* until 256-byte window bug fixed */

  const s = new DeflateState();

  strm.state = s;
  s.strm = strm;
  s.status = INIT_STATE;     /* to pass state test in deflateReset() */

  s.wrap = wrap;
  s.gzhead = null;
  s.w_bits = windowBits;
  s.w_size = 1 << s.w_bits;
  s.w_mask = s.w_size - 1;

  s.hash_bits = memLevel + 7;
  s.hash_size = 1 << s.hash_bits;
  s.hash_mask = s.hash_size - 1;
  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);

  s.window = new Uint8Array(s.w_size * 2);
  s.head = new Uint16Array(s.hash_size);
  s.prev = new Uint16Array(s.w_size);

  // Don't need mem init magic for JS.
  //s.high_water = 0;  /* nothing written to s->window yet */

  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */

  /* We overlay pending_buf and sym_buf. This works since the average size
   * for length/distance pairs over any compressed block is assured to be 31
   * bits or less.
   *
   * Analysis: The longest fixed codes are a length code of 8 bits plus 5
   * extra bits, for lengths 131 to 257. The longest fixed distance codes are
   * 5 bits plus 13 extra bits, for distances 16385 to 32768. The longest
   * possible fixed-codes length/distance pair is then 31 bits total.
   *
   * sym_buf starts one-fourth of the way into pending_buf. So there are
   * three bytes in sym_buf for every four bytes in pending_buf. Each symbol
   * in sym_buf is three bytes -- two for the distance and one for the
   * literal/length. As each symbol is consumed, the pointer to the next
   * sym_buf value to read moves forward three bytes. From that symbol, up to
   * 31 bits are written to pending_buf. The closest the written pending_buf
   * bits gets to the next sym_buf symbol to read is just before the last
   * code is written. At that time, 31*(n-2) bits have been written, just
   * after 24*(n-2) bits have been consumed from sym_buf. sym_buf starts at
   * 8*n bits into pending_buf. (Note that the symbol buffer fills when n-1
   * symbols are written.) The closest the writing gets to what is unread is
   * then n+14 bits. Here n is lit_bufsize, which is 16384 by default, and
   * can range from 128 to 32768.
   *
   * Therefore, at a minimum, there are 142 bits of space between what is
   * written and what is read in the overlain buffers, so the symbols cannot
   * be overwritten by the compressed data. That space is actually 139 bits,
   * due to the three-bit fixed-code block header.
   *
   * That covers the case where either Z_FIXED is specified, forcing fixed
   * codes, or when the use of fixed codes is chosen, because that choice
   * results in a smaller compressed block than dynamic codes. That latter
   * condition then assures that the above analysis also covers all dynamic
   * blocks. A dynamic-code block will only be chosen to be emitted if it has
   * fewer bits than a fixed-code block would for the same set of symbols.
   * Therefore its average symbol length is assured to be less than 31. So
   * the compressed data for a dynamic block also cannot overwrite the
   * symbols from which it is being constructed.
   */

  s.pending_buf_size = s.lit_bufsize * 4;
  s.pending_buf = new Uint8Array(s.pending_buf_size);

  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)
  //s->sym_buf = s->pending_buf + s->lit_bufsize;
  s.sym_buf = s.lit_bufsize;

  //s->sym_end = (s->lit_bufsize - 1) * 3;
  s.sym_end = (s.lit_bufsize - 1) * 3;
  /* We avoid equality with lit_bufsize*3 because of wraparound at 64K
   * on 16 bit machines and because stored blocks are restricted to
   * 64K-1 bytes.
   */

  s.level = level;
  s.strategy = strategy;
  s.method = method;

  return deflateReset(strm);
};

const deflateInit = (strm, level) => {

  return deflateInit2(strm, level, Z_DEFLATED$2, MAX_WBITS$1, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY$1);
};


/* ========================================================================= */
const deflate$2 = (strm, flush) => {

  if (deflateStateCheck(strm) || flush > Z_BLOCK$1 || flush < 0) {
    return strm ? err(strm, Z_STREAM_ERROR$2) : Z_STREAM_ERROR$2;
  }

  const s = strm.state;

  if (!strm.output ||
      (strm.avail_in !== 0 && !strm.input) ||
      (s.status === FINISH_STATE && flush !== Z_FINISH$3)) {
    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR$1 : Z_STREAM_ERROR$2);
  }

  const old_flush = s.last_flush;
  s.last_flush = flush;

  /* Flush as much pending output as possible */
  if (s.pending !== 0) {
    flush_pending(strm);
    if (strm.avail_out === 0) {
      /* Since avail_out is 0, deflate will be called again with
       * more output space, but possibly with both pending and
       * avail_in equal to zero. There won't be anything to do,
       * but this is not an error situation so make sure we
       * return OK instead of BUF_ERROR at next call of deflate:
       */
      s.last_flush = -1;
      return Z_OK$3;
    }

    /* Make sure there is something to do and avoid duplicate consecutive
     * flushes. For repeated and useless calls with Z_FINISH, we keep
     * returning Z_STREAM_END instead of Z_BUF_ERROR.
     */
  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&
    flush !== Z_FINISH$3) {
    return err(strm, Z_BUF_ERROR$1);
  }

  /* User must not provide more input after the first FINISH: */
  if (s.status === FINISH_STATE && strm.avail_in !== 0) {
    return err(strm, Z_BUF_ERROR$1);
  }

  /* Write the header */
  if (s.status === INIT_STATE && s.wrap === 0) {
    s.status = BUSY_STATE;
  }
  if (s.status === INIT_STATE) {
    /* zlib header */
    let header = (Z_DEFLATED$2 + ((s.w_bits - 8) << 4)) << 8;
    let level_flags = -1;

    if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {
      level_flags = 0;
    } else if (s.level < 6) {
      level_flags = 1;
    } else if (s.level === 6) {
      level_flags = 2;
    } else {
      level_flags = 3;
    }
    header |= (level_flags << 6);
    if (s.strstart !== 0) { header |= PRESET_DICT; }
    header += 31 - (header % 31);

    putShortMSB(s, header);

    /* Save the adler32 of the preset dictionary: */
    if (s.strstart !== 0) {
      putShortMSB(s, strm.adler >>> 16);
      putShortMSB(s, strm.adler & 0xffff);
    }
    strm.adler = 1; // adler32(0L, Z_NULL, 0);
    s.status = BUSY_STATE;

    /* Compression must start with an empty pending buffer */
    flush_pending(strm);
    if (s.pending !== 0) {
      s.last_flush = -1;
      return Z_OK$3;
    }
  }
//#ifdef GZIP
  if (s.status === GZIP_STATE) {
    /* gzip header */
    strm.adler = 0;  //crc32(0L, Z_NULL, 0);
    put_byte(s, 31);
    put_byte(s, 139);
    put_byte(s, 8);
    if (!s.gzhead) { // s->gzhead == Z_NULL
      put_byte(s, 0);
      put_byte(s, 0);
      put_byte(s, 0);
      put_byte(s, 0);
      put_byte(s, 0);
      put_byte(s, s.level === 9 ? 2 :
                  (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?
                   4 : 0));
      put_byte(s, OS_CODE);
      s.status = BUSY_STATE;

      /* Compression must start with an empty pending buffer */
      flush_pending(strm);
      if (s.pending !== 0) {
        s.last_flush = -1;
        return Z_OK$3;
      }
    }
    else {
      put_byte(s, (s.gzhead.text ? 1 : 0) +
                  (s.gzhead.hcrc ? 2 : 0) +
                  (!s.gzhead.extra ? 0 : 4) +
                  (!s.gzhead.name ? 0 : 8) +
                  (!s.gzhead.comment ? 0 : 16)
      );
      put_byte(s, s.gzhead.time & 0xff);
      put_byte(s, (s.gzhead.time >> 8) & 0xff);
      put_byte(s, (s.gzhead.time >> 16) & 0xff);
      put_byte(s, (s.gzhead.time >> 24) & 0xff);
      put_byte(s, s.level === 9 ? 2 :
                  (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?
                   4 : 0));
      put_byte(s, s.gzhead.os & 0xff);
      if (s.gzhead.extra && s.gzhead.extra.length) {
        put_byte(s, s.gzhead.extra.length & 0xff);
        put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);
      }
      if (s.gzhead.hcrc) {
        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending, 0);
      }
      s.gzindex = 0;
      s.status = EXTRA_STATE;
    }
  }
  if (s.status === EXTRA_STATE) {
    if (s.gzhead.extra/* != Z_NULL*/) {
      let beg = s.pending;   /* start of bytes to update crc */
      let left = (s.gzhead.extra.length & 0xffff) - s.gzindex;
      while (s.pending + left > s.pending_buf_size) {
        let copy = s.pending_buf_size - s.pending;
        // zmemcpy(s.pending_buf + s.pending,
        //    s.gzhead.extra + s.gzindex, copy);
        s.pending_buf.set(s.gzhead.extra.subarray(s.gzindex, s.gzindex + copy), s.pending);
        s.pending = s.pending_buf_size;
        //--- HCRC_UPDATE(beg) ---//
        if (s.gzhead.hcrc && s.pending > beg) {
          strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);
        }
        //---//
        s.gzindex += copy;
        flush_pending(strm);
        if (s.pending !== 0) {
          s.last_flush = -1;
          return Z_OK$3;
        }
        beg = 0;
        left -= copy;
      }
      // JS specific: s.gzhead.extra may be TypedArray or Array for backward compatibility
      //              TypedArray.slice and TypedArray.from don't exist in IE10-IE11
      let gzhead_extra = new Uint8Array(s.gzhead.extra);
      // zmemcpy(s->pending_buf + s->pending,
      //     s->gzhead->extra + s->gzindex, left);
      s.pending_buf.set(gzhead_extra.subarray(s.gzindex, s.gzindex + left), s.pending);
      s.pending += left;
      //--- HCRC_UPDATE(beg) ---//
      if (s.gzhead.hcrc && s.pending > beg) {
        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);
      }
      //---//
      s.gzindex = 0;
    }
    s.status = NAME_STATE;
  }
  if (s.status === NAME_STATE) {
    if (s.gzhead.name/* != Z_NULL*/) {
      let beg = s.pending;   /* start of bytes to update crc */
      let val;
      do {
        if (s.pending === s.pending_buf_size) {
          //--- HCRC_UPDATE(beg) ---//
          if (s.gzhead.hcrc && s.pending > beg) {
            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);
          }
          //---//
          flush_pending(strm);
          if (s.pending !== 0) {
            s.last_flush = -1;
            return Z_OK$3;
          }
          beg = 0;
        }
        // JS specific: little magic to add zero terminator to end of string
        if (s.gzindex < s.gzhead.name.length) {
          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;
        } else {
          val = 0;
        }
        put_byte(s, val);
      } while (val !== 0);
      //--- HCRC_UPDATE(beg) ---//
      if (s.gzhead.hcrc && s.pending > beg) {
        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);
      }
      //---//
      s.gzindex = 0;
    }
    s.status = COMMENT_STATE;
  }
  if (s.status === COMMENT_STATE) {
    if (s.gzhead.comment/* != Z_NULL*/) {
      let beg = s.pending;   /* start of bytes to update crc */
      let val;
      do {
        if (s.pending === s.pending_buf_size) {
          //--- HCRC_UPDATE(beg) ---//
          if (s.gzhead.hcrc && s.pending > beg) {
            strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);
          }
          //---//
          flush_pending(strm);
          if (s.pending !== 0) {
            s.last_flush = -1;
            return Z_OK$3;
          }
          beg = 0;
        }
        // JS specific: little magic to add zero terminator to end of string
        if (s.gzindex < s.gzhead.comment.length) {
          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;
        } else {
          val = 0;
        }
        put_byte(s, val);
      } while (val !== 0);
      //--- HCRC_UPDATE(beg) ---//
      if (s.gzhead.hcrc && s.pending > beg) {
        strm.adler = crc32_1(strm.adler, s.pending_buf, s.pending - beg, beg);
      }
      //---//
    }
    s.status = HCRC_STATE;
  }
  if (s.status === HCRC_STATE) {
    if (s.gzhead.hcrc) {
      if (s.pending + 2 > s.pending_buf_size) {
        flush_pending(strm);
        if (s.pending !== 0) {
          s.last_flush = -1;
          return Z_OK$3;
        }
      }
      put_byte(s, strm.adler & 0xff);
      put_byte(s, (strm.adler >> 8) & 0xff);
      strm.adler = 0; //crc32(0L, Z_NULL, 0);
    }
    s.status = BUSY_STATE;

    /* Compression must start with an empty pending buffer */
    flush_pending(strm);
    if (s.pending !== 0) {
      s.last_flush = -1;
      return Z_OK$3;
    }
  }
//#endif

  /* Start a new block or continue the current one.
   */
  if (strm.avail_in !== 0 || s.lookahead !== 0 ||
    (flush !== Z_NO_FLUSH$2 && s.status !== FINISH_STATE)) {
    let bstate = s.level === 0 ? deflate_stored(s, flush) :
                 s.strategy === Z_HUFFMAN_ONLY ? deflate_huff(s, flush) :
                 s.strategy === Z_RLE ? deflate_rle(s, flush) :
                 configuration_table[s.level].func(s, flush);

    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {
      s.status = FINISH_STATE;
    }
    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {
      if (strm.avail_out === 0) {
        s.last_flush = -1;
        /* avoid BUF_ERROR next call, see above */
      }
      return Z_OK$3;
      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call
       * of deflate should use the same flush parameter to make sure
       * that the flush is complete. So we don't have to output an
       * empty block here, this will be done at next call. This also
       * ensures that for a very small output buffer, we emit at most
       * one empty block.
       */
    }
    if (bstate === BS_BLOCK_DONE) {
      if (flush === Z_PARTIAL_FLUSH) {
        _tr_align(s);
      }
      else if (flush !== Z_BLOCK$1) { /* FULL_FLUSH or SYNC_FLUSH */

        _tr_stored_block(s, 0, 0, false);
        /* For a full flush, this empty block will be recognized
         * as a special marker by inflate_sync().
         */
        if (flush === Z_FULL_FLUSH$1) {
          /*** CLEAR_HASH(s); ***/             /* forget history */
          zero(s.head); // Fill with NIL (= 0);

          if (s.lookahead === 0) {
            s.strstart = 0;
            s.block_start = 0;
            s.insert = 0;
          }
        }
      }
      flush_pending(strm);
      if (strm.avail_out === 0) {
        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */
        return Z_OK$3;
      }
    }
  }

  if (flush !== Z_FINISH$3) { return Z_OK$3; }
  if (s.wrap <= 0) { return Z_STREAM_END$3; }

  /* Write the trailer */
  if (s.wrap === 2) {
    put_byte(s, strm.adler & 0xff);
    put_byte(s, (strm.adler >> 8) & 0xff);
    put_byte(s, (strm.adler >> 16) & 0xff);
    put_byte(s, (strm.adler >> 24) & 0xff);
    put_byte(s, strm.total_in & 0xff);
    put_byte(s, (strm.total_in >> 8) & 0xff);
    put_byte(s, (strm.total_in >> 16) & 0xff);
    put_byte(s, (strm.total_in >> 24) & 0xff);
  }
  else
  {
    putShortMSB(s, strm.adler >>> 16);
    putShortMSB(s, strm.adler & 0xffff);
  }

  flush_pending(strm);
  /* If avail_out is zero, the application will call deflate again
   * to flush the rest.
   */
  if (s.wrap > 0) { s.wrap = -s.wrap; }
  /* write the trailer only once! */
  return s.pending !== 0 ? Z_OK$3 : Z_STREAM_END$3;
};


const deflateEnd = (strm) => {

  if (deflateStateCheck(strm)) {
    return Z_STREAM_ERROR$2;
  }

  const status = strm.state.status;

  strm.state = null;

  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR$2) : Z_OK$3;
};


/* =========================================================================
 * Initializes the compression dictionary from the given byte
 * sequence without producing any compressed output.
 */
const deflateSetDictionary = (strm, dictionary) => {

  let dictLength = dictionary.length;

  if (deflateStateCheck(strm)) {
    return Z_STREAM_ERROR$2;
  }

  const s = strm.state;
  const wrap = s.wrap;

  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {
    return Z_STREAM_ERROR$2;
  }

  /* when using zlib wrappers, compute Adler-32 for provided dictionary */
  if (wrap === 1) {
    /* adler32(strm->adler, dictionary, dictLength); */
    strm.adler = adler32_1(strm.adler, dictionary, dictLength, 0);
  }

  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */

  /* if dictionary would fill window, just replace the history */
  if (dictLength >= s.w_size) {
    if (wrap === 0) {            /* already empty otherwise */
      /*** CLEAR_HASH(s); ***/
      zero(s.head); // Fill with NIL (= 0);
      s.strstart = 0;
      s.block_start = 0;
      s.insert = 0;
    }
    /* use the tail */
    // dictionary = dictionary.slice(dictLength - s.w_size);
    let tmpDict = new Uint8Array(s.w_size);
    tmpDict.set(dictionary.subarray(dictLength - s.w_size, dictLength), 0);
    dictionary = tmpDict;
    dictLength = s.w_size;
  }
  /* insert dictionary into window and hash */
  const avail = strm.avail_in;
  const next = strm.next_in;
  const input = strm.input;
  strm.avail_in = dictLength;
  strm.next_in = 0;
  strm.input = dictionary;
  fill_window(s);
  while (s.lookahead >= MIN_MATCH) {
    let str = s.strstart;
    let n = s.lookahead - (MIN_MATCH - 1);
    do {
      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */
      s.ins_h = HASH(s, s.ins_h, s.window[str + MIN_MATCH - 1]);

      s.prev[str & s.w_mask] = s.head[s.ins_h];

      s.head[s.ins_h] = str;
      str++;
    } while (--n);
    s.strstart = str;
    s.lookahead = MIN_MATCH - 1;
    fill_window(s);
  }
  s.strstart += s.lookahead;
  s.block_start = s.strstart;
  s.insert = s.lookahead;
  s.lookahead = 0;
  s.match_length = s.prev_length = MIN_MATCH - 1;
  s.match_available = 0;
  strm.next_in = next;
  strm.input = input;
  strm.avail_in = avail;
  s.wrap = wrap;
  return Z_OK$3;
};


var deflateInit_1 = deflateInit;
var deflateInit2_1 = deflateInit2;
var deflateReset_1 = deflateReset;
var deflateResetKeep_1 = deflateResetKeep;
var deflateSetHeader_1 = deflateSetHeader;
var deflate_2$1 = deflate$2;
var deflateEnd_1 = deflateEnd;
var deflateSetDictionary_1 = deflateSetDictionary;
var deflateInfo = 'pako deflate (from Nodeca project)';

/* Not implemented
module.exports.deflateBound = deflateBound;
module.exports.deflateCopy = deflateCopy;
module.exports.deflateGetDictionary = deflateGetDictionary;
module.exports.deflateParams = deflateParams;
module.exports.deflatePending = deflatePending;
module.exports.deflatePrime = deflatePrime;
module.exports.deflateTune = deflateTune;
*/

var deflate_1$2 = {
	deflateInit: deflateInit_1,
	deflateInit2: deflateInit2_1,
	deflateReset: deflateReset_1,
	deflateResetKeep: deflateResetKeep_1,
	deflateSetHeader: deflateSetHeader_1,
	deflate: deflate_2$1,
	deflateEnd: deflateEnd_1,
	deflateSetDictionary: deflateSetDictionary_1,
	deflateInfo: deflateInfo
};

const _has = (obj, key) => {
  return Object.prototype.hasOwnProperty.call(obj, key);
};

var pako_esm_assign = function (obj /*from1, from2, from3, ...*/) {
  const sources = Array.prototype.slice.call(arguments, 1);
  while (sources.length) {
    const source = sources.shift();
    if (!source) { continue; }

    if (typeof source !== 'object') {
      throw new TypeError(source + 'must be non-object');
    }

    for (const p in source) {
      if (_has(source, p)) {
        obj[p] = source[p];
      }
    }
  }

  return obj;
};


// Join array of chunks to single array.
var flattenChunks = (chunks) => {
  // calculate data length
  let len = 0;

  for (let i = 0, l = chunks.length; i < l; i++) {
    len += chunks[i].length;
  }

  // join chunks
  const result = new Uint8Array(len);

  for (let i = 0, pos = 0, l = chunks.length; i < l; i++) {
    let chunk = chunks[i];
    result.set(chunk, pos);
    pos += chunk.length;
  }

  return result;
};

var common = {
	assign: pako_esm_assign,
	flattenChunks: flattenChunks
};

// String encode/decode helpers


// Quick check if we can use fast array to bin string conversion
//
// - apply(Array) can fail on Android 2.2
// - apply(Uint8Array) can fail on iOS 5.1 Safari
//
let STR_APPLY_UIA_OK = true;

try { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }


// Table with utf8 lengths (calculated by first byte of sequence)
// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,
// because max possible codepoint is 0x10ffff
const _utf8len = new Uint8Array(256);
for (let q = 0; q < 256; q++) {
  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);
}
_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start


// convert string to array (typed, when possible)
var string2buf = (str) => {
  if (typeof TextEncoder === 'function' && TextEncoder.prototype.encode) {
    return new TextEncoder().encode(str);
  }

  let buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;

  // count binary size
  for (m_pos = 0; m_pos < str_len; m_pos++) {
    c = str.charCodeAt(m_pos);
    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {
      c2 = str.charCodeAt(m_pos + 1);
      if ((c2 & 0xfc00) === 0xdc00) {
        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);
        m_pos++;
      }
    }
    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;
  }

  // allocate buffer
  buf = new Uint8Array(buf_len);

  // convert
  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {
    c = str.charCodeAt(m_pos);
    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {
      c2 = str.charCodeAt(m_pos + 1);
      if ((c2 & 0xfc00) === 0xdc00) {
        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);
        m_pos++;
      }
    }
    if (c < 0x80) {
      /* one byte */
      buf[i++] = c;
    } else if (c < 0x800) {
      /* two bytes */
      buf[i++] = 0xC0 | (c >>> 6);
      buf[i++] = 0x80 | (c & 0x3f);
    } else if (c < 0x10000) {
      /* three bytes */
      buf[i++] = 0xE0 | (c >>> 12);
      buf[i++] = 0x80 | (c >>> 6 & 0x3f);
      buf[i++] = 0x80 | (c & 0x3f);
    } else {
      /* four bytes */
      buf[i++] = 0xf0 | (c >>> 18);
      buf[i++] = 0x80 | (c >>> 12 & 0x3f);
      buf[i++] = 0x80 | (c >>> 6 & 0x3f);
      buf[i++] = 0x80 | (c & 0x3f);
    }
  }

  return buf;
};

// Helper
const buf2binstring = (buf, len) => {
  // On Chrome, the arguments in a function call that are allowed is `65534`.
  // If the length of the buffer is smaller than that, we can use this optimization,
  // otherwise we will take a slower path.
  if (len < 65534) {
    if (buf.subarray && STR_APPLY_UIA_OK) {
      return String.fromCharCode.apply(null, buf.length === len ? buf : buf.subarray(0, len));
    }
  }

  let result = '';
  for (let i = 0; i < len; i++) {
    result += String.fromCharCode(buf[i]);
  }
  return result;
};


// convert array to string
var buf2string = (buf, max) => {
  const len = max || buf.length;

  if (typeof TextDecoder === 'function' && TextDecoder.prototype.decode) {
    return new TextDecoder().decode(buf.subarray(0, max));
  }

  let i, out;

  // Reserve max possible length (2 words per char)
  // NB: by unknown reasons, Array is significantly faster for
  //     String.fromCharCode.apply than Uint16Array.
  const utf16buf = new Array(len * 2);

  for (out = 0, i = 0; i < len;) {
    let c = buf[i++];
    // quick process ascii
    if (c < 0x80) { utf16buf[out++] = c; continue; }

    let c_len = _utf8len[c];
    // skip 5 & 6 byte codes
    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }

    // apply mask on first byte
    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;
    // join the rest
    while (c_len > 1 && i < len) {
      c = (c << 6) | (buf[i++] & 0x3f);
      c_len--;
    }

    // terminated by end of string?
    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }

    if (c < 0x10000) {
      utf16buf[out++] = c;
    } else {
      c -= 0x10000;
      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);
      utf16buf[out++] = 0xdc00 | (c & 0x3ff);
    }
  }

  return buf2binstring(utf16buf, out);
};


// Calculate max possible position in utf8 buffer,
// that will not break sequence. If that's not possible
// - (very small limits) return max size as is.
//
// buf[] - utf8 bytes array
// max   - length limit (mandatory);
var utf8border = (buf, max) => {

  max = max || buf.length;
  if (max > buf.length) { max = buf.length; }

  // go back from last position, until start of sequence found
  let pos = max - 1;
  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }

  // Very small and broken sequence,
  // return max, because we should return something anyway.
  if (pos < 0) { return max; }

  // If we came to start of buffer - that means buffer is too small,
  // return max too.
  if (pos === 0) { return max; }

  return (pos + _utf8len[buf[pos]] > max) ? pos : max;
};

var strings = {
	string2buf: string2buf,
	buf2string: buf2string,
	utf8border: utf8border
};

// (C) 1995-2013 Jean-loup Gailly and Mark Adler
// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin
//
// This software is provided 'as-is', without any express or implied
// warranty. In no event will the authors be held liable for any damages
// arising from the use of this software.
//
// Permission is granted to anyone to use this software for any purpose,
// including commercial applications, and to alter it and redistribute it
// freely, subject to the following restrictions:
//
// 1. The origin of this software must not be misrepresented; you must not
//   claim that you wrote the original software. If you use this software
//   in a product, an acknowledgment in the product documentation would be
//   appreciated but is not required.
// 2. Altered source versions must be plainly marked as such, and must not be
//   misrepresented as being the original software.
// 3. This notice may not be removed or altered from any source distribution.

function ZStream() {
  /* next input byte */
  this.input = null; // JS specific, because we have no pointers
  this.next_in = 0;
  /* number of bytes available at input */
  this.avail_in = 0;
  /* total number of input bytes read so far */
  this.total_in = 0;
  /* next output byte should be put there */
  this.output = null; // JS specific, because we have no pointers
  this.next_out = 0;
  /* remaining free space at output */
  this.avail_out = 0;
  /* total number of bytes output so far */
  this.total_out = 0;
  /* last error message, NULL if no error */
  this.msg = ''/*Z_NULL*/;
  /* not visible by applications */
  this.state = null;
  /* best guess about the data type: binary or text */
  this.data_type = 2/*Z_UNKNOWN*/;
  /* adler32 value of the uncompressed data */
  this.adler = 0;
}

var zstream = ZStream;

const toString$1 = Object.prototype.toString;

/* Public constants ==========================================================*/
/* ===========================================================================*/

const {
  Z_NO_FLUSH: Z_NO_FLUSH$1, Z_SYNC_FLUSH, Z_FULL_FLUSH, Z_FINISH: Z_FINISH$2,
  Z_OK: Z_OK$2, Z_STREAM_END: Z_STREAM_END$2,
  Z_DEFAULT_COMPRESSION,
  Z_DEFAULT_STRATEGY,
  Z_DEFLATED: Z_DEFLATED$1
} = constants$2;

/* ===========================================================================*/


/**
 * class Deflate
 *
 * Generic JS-style wrapper for zlib calls. If you don't need
 * streaming behaviour - use more simple functions: [[deflate]],
 * [[deflateRaw]] and [[gzip]].
 **/

/* internal
 * Deflate.chunks -> Array
 *
 * Chunks of output data, if [[Deflate#onData]] not overridden.
 **/

/**
 * Deflate.result -> Uint8Array
 *
 * Compressed result, generated by default [[Deflate#onData]]
 * and [[Deflate#onEnd]] handlers. Filled after you push last chunk
 * (call [[Deflate#push]] with `Z_FINISH` / `true` param).
 **/

/**
 * Deflate.err -> Number
 *
 * Error code after deflate finished. 0 (Z_OK) on success.
 * You will not need it in real life, because deflate errors
 * are possible only on wrong options or bad `onData` / `onEnd`
 * custom handlers.
 **/

/**
 * Deflate.msg -> String
 *
 * Error message, if [[Deflate.err]] != 0
 **/


/**
 * new Deflate(options)
 * - options (Object): zlib deflate options.
 *
 * Creates new deflator instance with specified params. Throws exception
 * on bad params. Supported options:
 *
 * - `level`
 * - `windowBits`
 * - `memLevel`
 * - `strategy`
 * - `dictionary`
 *
 * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)
 * for more information on these.
 *
 * Additional options, for internal needs:
 *
 * - `chunkSize` - size of generated data chunks (16K by default)
 * - `raw` (Boolean) - do raw deflate
 * - `gzip` (Boolean) - create gzip wrapper
 * - `header` (Object) - custom header for gzip
 *   - `text` (Boolean) - true if compressed data believed to be text
 *   - `time` (Number) - modification time, unix timestamp
 *   - `os` (Number) - operation system code
 *   - `extra` (Array) - array of bytes with extra data (max 65536)
 *   - `name` (String) - file name (binary string)
 *   - `comment` (String) - comment (binary string)
 *   - `hcrc` (Boolean) - true if header crc should be added
 *
 * ##### Example:
 *
 * ```javascript
 * const pako = require('pako')
 *   , chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])
 *   , chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);
 *
 * const deflate = new pako.Deflate({ level: 3});
 *
 * deflate.push(chunk1, false);
 * deflate.push(chunk2, true);  // true -> last chunk
 *
 * if (deflate.err) { throw new Error(deflate.err); }
 *
 * console.log(deflate.result);
 * ```
 **/
function Deflate$1(options) {
  this.options = common.assign({
    level: Z_DEFAULT_COMPRESSION,
    method: Z_DEFLATED$1,
    chunkSize: 16384,
    windowBits: 15,
    memLevel: 8,
    strategy: Z_DEFAULT_STRATEGY
  }, options || {});

  let opt = this.options;

  if (opt.raw && (opt.windowBits > 0)) {
    opt.windowBits = -opt.windowBits;
  }

  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {
    opt.windowBits += 16;
  }

  this.err    = 0;      // error code, if happens (0 = Z_OK)
  this.msg    = '';     // error message
  this.ended  = false;  // used to avoid multiple onEnd() calls
  this.chunks = [];     // chunks of compressed data

  this.strm = new zstream();
  this.strm.avail_out = 0;

  let status = deflate_1$2.deflateInit2(
    this.strm,
    opt.level,
    opt.method,
    opt.windowBits,
    opt.memLevel,
    opt.strategy
  );

  if (status !== Z_OK$2) {
    throw new Error(messages[status]);
  }

  if (opt.header) {
    deflate_1$2.deflateSetHeader(this.strm, opt.header);
  }

  if (opt.dictionary) {
    let dict;
    // Convert data if needed
    if (typeof opt.dictionary === 'string') {
      // If we need to compress text, change encoding to utf8.
      dict = strings.string2buf(opt.dictionary);
    } else if (toString$1.call(opt.dictionary) === '[object ArrayBuffer]') {
      dict = new Uint8Array(opt.dictionary);
    } else {
      dict = opt.dictionary;
    }

    status = deflate_1$2.deflateSetDictionary(this.strm, dict);

    if (status !== Z_OK$2) {
      throw new Error(messages[status]);
    }

    this._dict_set = true;
  }
}

/**
 * Deflate#push(data[, flush_mode]) -> Boolean
 * - data (Uint8Array|ArrayBuffer|String): input data. Strings will be
 *   converted to utf8 byte sequence.
 * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.
 *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.
 *
 * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with
 * new compressed chunks. Returns `true` on success. The last data block must
 * have `flush_mode` Z_FINISH (or `true`). That will flush internal pending
 * buffers and call [[Deflate#onEnd]].
 *
 * On fail call [[Deflate#onEnd]] with error code and return false.
 *
 * ##### Example
 *
 * ```javascript
 * push(chunk, false); // push one of data chunks
 * ...
 * push(chunk, true);  // push last chunk
 * ```
 **/
Deflate$1.prototype.push = function (data, flush_mode) {
  const strm = this.strm;
  const chunkSize = this.options.chunkSize;
  let status, _flush_mode;

  if (this.ended) { return false; }

  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;
  else _flush_mode = flush_mode === true ? Z_FINISH$2 : Z_NO_FLUSH$1;

  // Convert data if needed
  if (typeof data === 'string') {
    // If we need to compress text, change encoding to utf8.
    strm.input = strings.string2buf(data);
  } else if (toString$1.call(data) === '[object ArrayBuffer]') {
    strm.input = new Uint8Array(data);
  } else {
    strm.input = data;
  }

  strm.next_in = 0;
  strm.avail_in = strm.input.length;

  for (;;) {
    if (strm.avail_out === 0) {
      strm.output = new Uint8Array(chunkSize);
      strm.next_out = 0;
      strm.avail_out = chunkSize;
    }

    // Make sure avail_out > 6 to avoid repeating markers
    if ((_flush_mode === Z_SYNC_FLUSH || _flush_mode === Z_FULL_FLUSH) && strm.avail_out <= 6) {
      this.onData(strm.output.subarray(0, strm.next_out));
      strm.avail_out = 0;
      continue;
    }

    status = deflate_1$2.deflate(strm, _flush_mode);

    // Ended => flush and finish
    if (status === Z_STREAM_END$2) {
      if (strm.next_out > 0) {
        this.onData(strm.output.subarray(0, strm.next_out));
      }
      status = deflate_1$2.deflateEnd(this.strm);
      this.onEnd(status);
      this.ended = true;
      return status === Z_OK$2;
    }

    // Flush if out buffer full
    if (strm.avail_out === 0) {
      this.onData(strm.output);
      continue;
    }

    // Flush if requested and has data
    if (_flush_mode > 0 && strm.next_out > 0) {
      this.onData(strm.output.subarray(0, strm.next_out));
      strm.avail_out = 0;
      continue;
    }

    if (strm.avail_in === 0) break;
  }

  return true;
};


/**
 * Deflate#onData(chunk) -> Void
 * - chunk (Uint8Array): output data.
 *
 * By default, stores data blocks in `chunks[]` property and glue
 * those in `onEnd`. Override this handler, if you need another behaviour.
 **/
Deflate$1.prototype.onData = function (chunk) {
  this.chunks.push(chunk);
};


/**
 * Deflate#onEnd(status) -> Void
 * - status (Number): deflate status. 0 (Z_OK) on success,
 *   other if not.
 *
 * Called once after you tell deflate that the input stream is
 * complete (Z_FINISH). By default - join collected chunks,
 * free memory and fill `results` / `err` properties.
 **/
Deflate$1.prototype.onEnd = function (status) {
  // On success - join
  if (status === Z_OK$2) {
    this.result = common.flattenChunks(this.chunks);
  }
  this.chunks = [];
  this.err = status;
  this.msg = this.strm.msg;
};


/**
 * deflate(data[, options]) -> Uint8Array
 * - data (Uint8Array|ArrayBuffer|String): input data to compress.
 * - options (Object): zlib deflate options.
 *
 * Compress `data` with deflate algorithm and `options`.
 *
 * Supported options are:
 *
 * - level
 * - windowBits
 * - memLevel
 * - strategy
 * - dictionary
 *
 * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)
 * for more information on these.
 *
 * Sugar (options):
 *
 * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify
 *   negative windowBits implicitly.
 *
 * ##### Example:
 *
 * ```javascript
 * const pako = require('pako')
 * const data = new Uint8Array([1,2,3,4,5,6,7,8,9]);
 *
 * console.log(pako.deflate(data));
 * ```
 **/
function deflate$1(input, options) {
  const deflator = new Deflate$1(options);

  deflator.push(input, true);

  // That will never happens, if you don't cheat with options :)
  if (deflator.err) { throw deflator.msg || messages[deflator.err]; }

  return deflator.result;
}


/**
 * deflateRaw(data[, options]) -> Uint8Array
 * - data (Uint8Array|ArrayBuffer|String): input data to compress.
 * - options (Object): zlib deflate options.
 *
 * The same as [[deflate]], but creates raw data, without wrapper
 * (header and adler32 crc).
 **/
function deflateRaw$1(input, options) {
  options = options || {};
  options.raw = true;
  return deflate$1(input, options);
}


/**
 * gzip(data[, options]) -> Uint8Array
 * - data (Uint8Array|ArrayBuffer|String): input data to compress.
 * - options (Object): zlib deflate options.
 *
 * The same as [[deflate]], but create gzip wrapper instead of
 * deflate one.
 **/
function gzip$1(input, options) {
  options = options || {};
  options.gzip = true;
  return deflate$1(input, options);
}


var Deflate_1$1 = Deflate$1;
var deflate_2 = deflate$1;
var deflateRaw_1$1 = deflateRaw$1;
var gzip_1$1 = gzip$1;
var constants$1 = constants$2;

var deflate_1$1 = {
	Deflate: Deflate_1$1,
	deflate: deflate_2,
	deflateRaw: deflateRaw_1$1,
	gzip: gzip_1$1,
	constants: constants$1
};

// (C) 1995-2013 Jean-loup Gailly and Mark Adler
// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin
//
// This software is provided 'as-is', without any express or implied
// warranty. In no event will the authors be held liable for any damages
// arising from the use of this software.
//
// Permission is granted to anyone to use this software for any purpose,
// including commercial applications, and to alter it and redistribute it
// freely, subject to the following restrictions:
//
// 1. The origin of this software must not be misrepresented; you must not
//   claim that you wrote the original software. If you use this software
//   in a product, an acknowledgment in the product documentation would be
//   appreciated but is not required.
// 2. Altered source versions must be plainly marked as such, and must not be
//   misrepresented as being the original software.
// 3. This notice may not be removed or altered from any source distribution.

// See state defs from inflate.js
const BAD$1 = 16209;       /* got a data error -- remain here until reset */
const TYPE$1 = 16191;      /* i: waiting for type bits, including last-flag bit */

/*
   Decode literal, length, and distance codes and write out the resulting
   literal and match bytes until either not enough input or output is
   available, an end-of-block is encountered, or a data error is encountered.
   When large enough input and output buffers are supplied to inflate(), for
   example, a 16K input buffer and a 64K output buffer, more than 95% of the
   inflate execution time is spent in this routine.

   Entry assumptions:

        state.mode === LEN
        strm.avail_in >= 6
        strm.avail_out >= 258
        start >= strm.avail_out
        state.bits < 8

   On return, state.mode is one of:

        LEN -- ran out of enough output space or enough available input
        TYPE -- reached end of block code, inflate() to interpret next block
        BAD -- error in block data

   Notes:

    - The maximum input bits used by a length/distance pair is 15 bits for the
      length code, 5 bits for the length extra, 15 bits for the distance code,
      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.
      Therefore if strm.avail_in >= 6, then there is enough input to avoid
      checking for available input while decoding.

    - The maximum bytes that a single length/distance pair can output is 258
      bytes, which is the maximum length that can be coded.  inflate_fast()
      requires strm.avail_out >= 258 for each loop to avoid checking for
      output space.
 */
var inffast = function inflate_fast(strm, start) {
  let _in;                    /* local strm.input */
  let last;                   /* have enough input while in < last */
  let _out;                   /* local strm.output */
  let beg;                    /* inflate()'s initial strm.output */
  let end;                    /* while out < end, enough space available */
//#ifdef INFLATE_STRICT
  let dmax;                   /* maximum distance from zlib header */
//#endif
  let wsize;                  /* window size or zero if not using window */
  let whave;                  /* valid bytes in the window */
  let wnext;                  /* window write index */
  // Use `s_window` instead `window`, avoid conflict with instrumentation tools
  let s_window;               /* allocated sliding window, if wsize != 0 */
  let hold;                   /* local strm.hold */
  let bits;                   /* local strm.bits */
  let lcode;                  /* local strm.lencode */
  let dcode;                  /* local strm.distcode */
  let lmask;                  /* mask for first level of length codes */
  let dmask;                  /* mask for first level of distance codes */
  let here;                   /* retrieved table entry */
  let op;                     /* code bits, operation, extra bits, or */
                              /*  window position, window bytes to copy */
  let len;                    /* match length, unused bytes */
  let dist;                   /* match distance */
  let from;                   /* where to copy match from */
  let from_source;


  let input, output; // JS specific, because we have no pointers

  /* copy state to local variables */
  const state = strm.state;
  //here = state.here;
  _in = strm.next_in;
  input = strm.input;
  last = _in + (strm.avail_in - 5);
  _out = strm.next_out;
  output = strm.output;
  beg = _out - (start - strm.avail_out);
  end = _out + (strm.avail_out - 257);
//#ifdef INFLATE_STRICT
  dmax = state.dmax;
//#endif
  wsize = state.wsize;
  whave = state.whave;
  wnext = state.wnext;
  s_window = state.window;
  hold = state.hold;
  bits = state.bits;
  lcode = state.lencode;
  dcode = state.distcode;
  lmask = (1 << state.lenbits) - 1;
  dmask = (1 << state.distbits) - 1;


  /* decode literals and length/distances until end-of-block or not enough
     input data or output space */

  top:
  do {
    if (bits < 15) {
      hold += input[_in++] << bits;
      bits += 8;
      hold += input[_in++] << bits;
      bits += 8;
    }

    here = lcode[hold & lmask];

    dolen:
    for (;;) { // Goto emulation
      op = here >>> 24/*here.bits*/;
      hold >>>= op;
      bits -= op;
      op = (here >>> 16) & 0xff/*here.op*/;
      if (op === 0) {                          /* literal */
        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?
        //        "inflate:         literal '%c'\n" :
        //        "inflate:         literal 0x%02x\n", here.val));
        output[_out++] = here & 0xffff/*here.val*/;
      }
      else if (op & 16) {                     /* length base */
        len = here & 0xffff/*here.val*/;
        op &= 15;                           /* number of extra bits */
        if (op) {
          if (bits < op) {
            hold += input[_in++] << bits;
            bits += 8;
          }
          len += hold & ((1 << op) - 1);
          hold >>>= op;
          bits -= op;
        }
        //Tracevv((stderr, "inflate:         length %u\n", len));
        if (bits < 15) {
          hold += input[_in++] << bits;
          bits += 8;
          hold += input[_in++] << bits;
          bits += 8;
        }
        here = dcode[hold & dmask];

        dodist:
        for (;;) { // goto emulation
          op = here >>> 24/*here.bits*/;
          hold >>>= op;
          bits -= op;
          op = (here >>> 16) & 0xff/*here.op*/;

          if (op & 16) {                      /* distance base */
            dist = here & 0xffff/*here.val*/;
            op &= 15;                       /* number of extra bits */
            if (bits < op) {
              hold += input[_in++] << bits;
              bits += 8;
              if (bits < op) {
                hold += input[_in++] << bits;
                bits += 8;
              }
            }
            dist += hold & ((1 << op) - 1);
//#ifdef INFLATE_STRICT
            if (dist > dmax) {
              strm.msg = 'invalid distance too far back';
              state.mode = BAD$1;
              break top;
            }
//#endif
            hold >>>= op;
            bits -= op;
            //Tracevv((stderr, "inflate:         distance %u\n", dist));
            op = _out - beg;                /* max distance in output */
            if (dist > op) {                /* see if copy from window */
              op = dist - op;               /* distance back in window */
              if (op > whave) {
                if (state.sane) {
                  strm.msg = 'invalid distance too far back';
                  state.mode = BAD$1;
                  break top;
                }

// (!) This block is disabled in zlib defaults,
// don't enable it for binary compatibility
//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR
//                if (len <= op - whave) {
//                  do {
//                    output[_out++] = 0;
//                  } while (--len);
//                  continue top;
//                }
//                len -= op - whave;
//                do {
//                  output[_out++] = 0;
//                } while (--op > whave);
//                if (op === 0) {
//                  from = _out - dist;
//                  do {
//                    output[_out++] = output[from++];
//                  } while (--len);
//                  continue top;
//                }
//#endif
              }
              from = 0; // window index
              from_source = s_window;
              if (wnext === 0) {           /* very common case */
                from += wsize - op;
                if (op < len) {         /* some from window */
                  len -= op;
                  do {
                    output[_out++] = s_window[from++];
                  } while (--op);
                  from = _out - dist;  /* rest from output */
                  from_source = output;
                }
              }
              else if (wnext < op) {      /* wrap around window */
                from += wsize + wnext - op;
                op -= wnext;
                if (op < len) {         /* some from end of window */
                  len -= op;
                  do {
                    output[_out++] = s_window[from++];
                  } while (--op);
                  from = 0;
                  if (wnext < len) {  /* some from start of window */
                    op = wnext;
                    len -= op;
                    do {
                      output[_out++] = s_window[from++];
                    } while (--op);
                    from = _out - dist;      /* rest from output */
                    from_source = output;
                  }
                }
              }
              else {                      /* contiguous in window */
                from += wnext - op;
                if (op < len) {         /* some from window */
                  len -= op;
                  do {
                    output[_out++] = s_window[from++];
                  } while (--op);
                  from = _out - dist;  /* rest from output */
                  from_source = output;
                }
              }
              while (len > 2) {
                output[_out++] = from_source[from++];
                output[_out++] = from_source[from++];
                output[_out++] = from_source[from++];
                len -= 3;
              }
              if (len) {
                output[_out++] = from_source[from++];
                if (len > 1) {
                  output[_out++] = from_source[from++];
                }
              }
            }
            else {
              from = _out - dist;          /* copy direct from output */
              do {                        /* minimum length is three */
                output[_out++] = output[from++];
                output[_out++] = output[from++];
                output[_out++] = output[from++];
                len -= 3;
              } while (len > 2);
              if (len) {
                output[_out++] = output[from++];
                if (len > 1) {
                  output[_out++] = output[from++];
                }
              }
            }
          }
          else if ((op & 64) === 0) {          /* 2nd level distance code */
            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];
            continue dodist;
          }
          else {
            strm.msg = 'invalid distance code';
            state.mode = BAD$1;
            break top;
          }

          break; // need to emulate goto via "continue"
        }
      }
      else if ((op & 64) === 0) {              /* 2nd level length code */
        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];
        continue dolen;
      }
      else if (op & 32) {                     /* end-of-block */
        //Tracevv((stderr, "inflate:         end of block\n"));
        state.mode = TYPE$1;
        break top;
      }
      else {
        strm.msg = 'invalid literal/length code';
        state.mode = BAD$1;
        break top;
      }

      break; // need to emulate goto via "continue"
    }
  } while (_in < last && _out < end);

  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */
  len = bits >> 3;
  _in -= len;
  bits -= len << 3;
  hold &= (1 << bits) - 1;

  /* update state and return */
  strm.next_in = _in;
  strm.next_out = _out;
  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));
  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));
  state.hold = hold;
  state.bits = bits;
  return;
};

// (C) 1995-2013 Jean-loup Gailly and Mark Adler
// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin
//
// This software is provided 'as-is', without any express or implied
// warranty. In no event will the authors be held liable for any damages
// arising from the use of this software.
//
// Permission is granted to anyone to use this software for any purpose,
// including commercial applications, and to alter it and redistribute it
// freely, subject to the following restrictions:
//
// 1. The origin of this software must not be misrepresented; you must not
//   claim that you wrote the original software. If you use this software
//   in a product, an acknowledgment in the product documentation would be
//   appreciated but is not required.
// 2. Altered source versions must be plainly marked as such, and must not be
//   misrepresented as being the original software.
// 3. This notice may not be removed or altered from any source distribution.

const MAXBITS = 15;
const ENOUGH_LENS$1 = 852;
const ENOUGH_DISTS$1 = 592;
//const ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);

const CODES$1 = 0;
const LENS$1 = 1;
const DISTS$1 = 2;

const lbase = new Uint16Array([ /* Length codes 257..285 base */
  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,
  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0
]);

const lext = new Uint8Array([ /* Length codes 257..285 extra */
  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,
  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78
]);

const dbase = new Uint16Array([ /* Distance codes 0..29 base */
  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,
  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,
  8193, 12289, 16385, 24577, 0, 0
]);

const dext = new Uint8Array([ /* Distance codes 0..29 extra */
  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,
  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,
  28, 28, 29, 29, 64, 64
]);

const inflate_table = (type, lens, lens_index, codes, table, table_index, work, opts) =>
{
  const bits = opts.bits;
      //here = opts.here; /* table entry for duplication */

  let len = 0;               /* a code's length in bits */
  let sym = 0;               /* index of code symbols */
  let min = 0, max = 0;          /* minimum and maximum code lengths */
  let root = 0;              /* number of index bits for root table */
  let curr = 0;              /* number of index bits for current table */
  let drop = 0;              /* code bits to drop for sub-table */
  let left = 0;                   /* number of prefix codes available */
  let used = 0;              /* code entries in table used */
  let huff = 0;              /* Huffman code */
  let incr;              /* for incrementing code, index */
  let fill;              /* index for replicating entries */
  let low;               /* low bits for current root entry */
  let mask;              /* mask for low root bits */
  let next;             /* next available space in table */
  let base = null;     /* base value table to use */
//  let shoextra;    /* extra bits table to use */
  let match;                  /* use base and extra for symbol >= match */
  const count = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */
  const offs = new Uint16Array(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */
  let extra = null;

  let here_bits, here_op, here_val;

  /*
   Process a set of code lengths to create a canonical Huffman code.  The
   code lengths are lens[0..codes-1].  Each length corresponds to the
   symbols 0..codes-1.  The Huffman code is generated by first sorting the
   symbols by length from short to long, and retaining the symbol order
   for codes with equal lengths.  Then the code starts with all zero bits
   for the first code of the shortest length, and the codes are integer
   increments for the same length, and zeros are appended as the length
   increases.  For the deflate format, these bits are stored backwards
   from their more natural integer increment ordering, and so when the
   decoding tables are built in the large loop below, the integer codes
   are incremented backwards.

   This routine assumes, but does not check, that all of the entries in
   lens[] are in the range 0..MAXBITS.  The caller must assure this.
   1..MAXBITS is interpreted as that code length.  zero means that that
   symbol does not occur in this code.

   The codes are sorted by computing a count of codes for each length,
   creating from that a table of starting indices for each length in the
   sorted table, and then entering the symbols in order in the sorted
   table.  The sorted table is work[], with that space being provided by
   the caller.

   The length counts are used for other purposes as well, i.e. finding
   the minimum and maximum length codes, determining if there are any
   codes at all, checking for a valid set of lengths, and looking ahead
   at length counts to determine sub-table sizes when building the
   decoding tables.
   */

  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */
  for (len = 0; len <= MAXBITS; len++) {
    count[len] = 0;
  }
  for (sym = 0; sym < codes; sym++) {
    count[lens[lens_index + sym]]++;
  }

  /* bound code lengths, force root to be within code lengths */
  root = bits;
  for (max = MAXBITS; max >= 1; max--) {
    if (count[max] !== 0) { break; }
  }
  if (root > max) {
    root = max;
  }
  if (max === 0) {                     /* no symbols to code at all */
    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */
    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;
    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;
    table[table_index++] = (1 << 24) | (64 << 16) | 0;


    //table.op[opts.table_index] = 64;
    //table.bits[opts.table_index] = 1;
    //table.val[opts.table_index++] = 0;
    table[table_index++] = (1 << 24) | (64 << 16) | 0;

    opts.bits = 1;
    return 0;     /* no symbols, but wait for decoding to report error */
  }
  for (min = 1; min < max; min++) {
    if (count[min] !== 0) { break; }
  }
  if (root < min) {
    root = min;
  }

  /* check for an over-subscribed or incomplete set of lengths */
  left = 1;
  for (len = 1; len <= MAXBITS; len++) {
    left <<= 1;
    left -= count[len];
    if (left < 0) {
      return -1;
    }        /* over-subscribed */
  }
  if (left > 0 && (type === CODES$1 || max !== 1)) {
    return -1;                      /* incomplete set */
  }

  /* generate offsets into symbol table for each length for sorting */
  offs[1] = 0;
  for (len = 1; len < MAXBITS; len++) {
    offs[len + 1] = offs[len] + count[len];
  }

  /* sort symbols by length, by symbol order within each length */
  for (sym = 0; sym < codes; sym++) {
    if (lens[lens_index + sym] !== 0) {
      work[offs[lens[lens_index + sym]]++] = sym;
    }
  }

  /*
   Create and fill in decoding tables.  In this loop, the table being
   filled is at next and has curr index bits.  The code being used is huff
   with length len.  That code is converted to an index by dropping drop
   bits off of the bottom.  For codes where len is less than drop + curr,
   those top drop + curr - len bits are incremented through all values to
   fill the table with replicated entries.

   root is the number of index bits for the root table.  When len exceeds
   root, sub-tables are created pointed to by the root entry with an index
   of the low root bits of huff.  This is saved in low to check for when a
   new sub-table should be started.  drop is zero when the root table is
   being filled, and drop is root when sub-tables are being filled.

   When a new sub-table is needed, it is necessary to look ahead in the
   code lengths to determine what size sub-table is needed.  The length
   counts are used for this, and so count[] is decremented as codes are
   entered in the tables.

   used keeps track of how many table entries have been allocated from the
   provided *table space.  It is checked for LENS and DIST tables against
   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in
   the initial root table size constants.  See the comments in inftrees.h
   for more information.

   sym increments through all symbols, and the loop terminates when
   all codes of length max, i.e. all codes, have been processed.  This
   routine permits incomplete codes, so another loop after this one fills
   in the rest of the decoding tables with invalid code markers.
   */

  /* set up for code type */
  // poor man optimization - use if-else instead of switch,
  // to avoid deopts in old v8
  if (type === CODES$1) {
    base = extra = work;    /* dummy value--not used */
    match = 20;

  } else if (type === LENS$1) {
    base = lbase;
    extra = lext;
    match = 257;

  } else {                    /* DISTS */
    base = dbase;
    extra = dext;
    match = 0;
  }

  /* initialize opts for loop */
  huff = 0;                   /* starting code */
  sym = 0;                    /* starting code symbol */
  len = min;                  /* starting code length */
  next = table_index;              /* current table to fill in */
  curr = root;                /* current table index bits */
  drop = 0;                   /* current bits to drop from code for index */
  low = -1;                   /* trigger new sub-table when len > root */
  used = 1 << root;          /* use root table entries */
  mask = used - 1;            /* mask for comparing low */

  /* check available table space */
  if ((type === LENS$1 && used > ENOUGH_LENS$1) ||
    (type === DISTS$1 && used > ENOUGH_DISTS$1)) {
    return 1;
  }

  /* process all codes and make table entries */
  for (;;) {
    /* create table entry */
    here_bits = len - drop;
    if (work[sym] + 1 < match) {
      here_op = 0;
      here_val = work[sym];
    }
    else if (work[sym] >= match) {
      here_op = extra[work[sym] - match];
      here_val = base[work[sym] - match];
    }
    else {
      here_op = 32 + 64;         /* end of block */
      here_val = 0;
    }

    /* replicate for those indices with low len bits equal to huff */
    incr = 1 << (len - drop);
    fill = 1 << curr;
    min = fill;                 /* save offset to next table */
    do {
      fill -= incr;
      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;
    } while (fill !== 0);

    /* backwards increment the len-bit code huff */
    incr = 1 << (len - 1);
    while (huff & incr) {
      incr >>= 1;
    }
    if (incr !== 0) {
      huff &= incr - 1;
      huff += incr;
    } else {
      huff = 0;
    }

    /* go to next symbol, update count, len */
    sym++;
    if (--count[len] === 0) {
      if (len === max) { break; }
      len = lens[lens_index + work[sym]];
    }

    /* create new sub-table if needed */
    if (len > root && (huff & mask) !== low) {
      /* if first time, transition to sub-tables */
      if (drop === 0) {
        drop = root;
      }

      /* increment past last table */
      next += min;            /* here min is 1 << curr */

      /* determine length of next table */
      curr = len - drop;
      left = 1 << curr;
      while (curr + drop < max) {
        left -= count[curr + drop];
        if (left <= 0) { break; }
        curr++;
        left <<= 1;
      }

      /* check for enough space */
      used += 1 << curr;
      if ((type === LENS$1 && used > ENOUGH_LENS$1) ||
        (type === DISTS$1 && used > ENOUGH_DISTS$1)) {
        return 1;
      }

      /* point entry in root table to sub-table */
      low = huff & mask;
      /*table.op[low] = curr;
      table.bits[low] = root;
      table.val[low] = next - opts.table_index;*/
      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;
    }
  }

  /* fill in remaining table entry if code is incomplete (guaranteed to have
   at most one remaining entry, since if the code is incomplete, the
   maximum code length that was allowed to get this far is one bit) */
  if (huff !== 0) {
    //table.op[next + huff] = 64;            /* invalid code marker */
    //table.bits[next + huff] = len - drop;
    //table.val[next + huff] = 0;
    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;
  }

  /* set return parameters */
  //opts.table_index += used;
  opts.bits = root;
  return 0;
};


var inftrees = inflate_table;

// (C) 1995-2013 Jean-loup Gailly and Mark Adler
// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin
//
// This software is provided 'as-is', without any express or implied
// warranty. In no event will the authors be held liable for any damages
// arising from the use of this software.
//
// Permission is granted to anyone to use this software for any purpose,
// including commercial applications, and to alter it and redistribute it
// freely, subject to the following restrictions:
//
// 1. The origin of this software must not be misrepresented; you must not
//   claim that you wrote the original software. If you use this software
//   in a product, an acknowledgment in the product documentation would be
//   appreciated but is not required.
// 2. Altered source versions must be plainly marked as such, and must not be
//   misrepresented as being the original software.
// 3. This notice may not be removed or altered from any source distribution.






const CODES = 0;
const LENS = 1;
const DISTS = 2;

/* Public constants ==========================================================*/
/* ===========================================================================*/

const {
  Z_FINISH: Z_FINISH$1, Z_BLOCK, Z_TREES,
  Z_OK: Z_OK$1, Z_STREAM_END: Z_STREAM_END$1, Z_NEED_DICT: Z_NEED_DICT$1, Z_STREAM_ERROR: Z_STREAM_ERROR$1, Z_DATA_ERROR: Z_DATA_ERROR$1, Z_MEM_ERROR: Z_MEM_ERROR$1, Z_BUF_ERROR,
  Z_DEFLATED
} = constants$2;


/* STATES ====================================================================*/
/* ===========================================================================*/


const    HEAD = 16180;       /* i: waiting for magic header */
const    FLAGS = 16181;      /* i: waiting for method and flags (gzip) */
const    TIME = 16182;       /* i: waiting for modification time (gzip) */
const    OS = 16183;         /* i: waiting for extra flags and operating system (gzip) */
const    EXLEN = 16184;      /* i: waiting for extra length (gzip) */
const    EXTRA = 16185;      /* i: waiting for extra bytes (gzip) */
const    NAME = 16186;       /* i: waiting for end of file name (gzip) */
const    COMMENT = 16187;    /* i: waiting for end of comment (gzip) */
const    HCRC = 16188;       /* i: waiting for header crc (gzip) */
const    DICTID = 16189;    /* i: waiting for dictionary check value */
const    DICT = 16190;      /* waiting for inflateSetDictionary() call */
const        TYPE = 16191;      /* i: waiting for type bits, including last-flag bit */
const        TYPEDO = 16192;    /* i: same, but skip check to exit inflate on new block */
const        STORED = 16193;    /* i: waiting for stored size (length and complement) */
const        COPY_ = 16194;     /* i/o: same as COPY below, but only first time in */
const        COPY = 16195;      /* i/o: waiting for input or output to copy stored block */
const        TABLE = 16196;     /* i: waiting for dynamic block table lengths */
const        LENLENS = 16197;   /* i: waiting for code length code lengths */
const        CODELENS = 16198;  /* i: waiting for length/lit and distance code lengths */
const            LEN_ = 16199;      /* i: same as LEN below, but only first time in */
const            LEN = 16200;       /* i: waiting for length/lit/eob code */
const            LENEXT = 16201;    /* i: waiting for length extra bits */
const            DIST = 16202;      /* i: waiting for distance code */
const            DISTEXT = 16203;   /* i: waiting for distance extra bits */
const            MATCH = 16204;     /* o: waiting for output space to copy string */
const            LIT = 16205;       /* o: waiting for output space to write literal */
const    CHECK = 16206;     /* i: waiting for 32-bit check value */
const    LENGTH = 16207;    /* i: waiting for 32-bit length (gzip) */
const    DONE = 16208;      /* finished check, done -- remain here until reset */
const    BAD = 16209;       /* got a data error -- remain here until reset */
const    MEM = 16210;       /* got an inflate() memory error -- remain here until reset */
const    SYNC = 16211;      /* looking for synchronization bytes to restart inflate() */

/* ===========================================================================*/



const ENOUGH_LENS = 852;
const ENOUGH_DISTS = 592;
//const ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);

const MAX_WBITS = 15;
/* 32K LZ77 window */
const DEF_WBITS = MAX_WBITS;


const zswap32 = (q) => {

  return  (((q >>> 24) & 0xff) +
          ((q >>> 8) & 0xff00) +
          ((q & 0xff00) << 8) +
          ((q & 0xff) << 24));
};


function InflateState() {
  this.strm = null;           /* pointer back to this zlib stream */
  this.mode = 0;              /* current inflate mode */
  this.last = false;          /* true if processing last block */
  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip,
                                 bit 2 true to validate check value */
  this.havedict = false;      /* true if dictionary provided */
  this.flags = 0;             /* gzip header method and flags (0 if zlib), or
                                 -1 if raw or no header yet */
  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */
  this.check = 0;             /* protected copy of check value */
  this.total = 0;             /* protected copy of output count */
  // TODO: may be {}
  this.head = null;           /* where to save gzip header information */

  /* sliding window */
  this.wbits = 0;             /* log base 2 of requested window size */
  this.wsize = 0;             /* window size or zero if not using window */
  this.whave = 0;             /* valid bytes in the window */
  this.wnext = 0;             /* window write index */
  this.window = null;         /* allocated sliding window, if needed */

  /* bit accumulator */
  this.hold = 0;              /* input bit accumulator */
  this.bits = 0;              /* number of bits in "in" */

  /* for string and stored block copying */
  this.length = 0;            /* literal or length of data to copy */
  this.offset = 0;            /* distance back to copy string from */

  /* for table and code decoding */
  this.extra = 0;             /* extra bits needed */

  /* fixed and dynamic code tables */
  this.lencode = null;          /* starting table for length/literal codes */
  this.distcode = null;         /* starting table for distance codes */
  this.lenbits = 0;           /* index bits for lencode */
  this.distbits = 0;          /* index bits for distcode */

  /* dynamic table building */
  this.ncode = 0;             /* number of code length code lengths */
  this.nlen = 0;              /* number of length code lengths */
  this.ndist = 0;             /* number of distance code lengths */
  this.have = 0;              /* number of code lengths in lens[] */
  this.next = null;              /* next available space in codes[] */

  this.lens = new Uint16Array(320); /* temporary storage for code lengths */
  this.work = new Uint16Array(288); /* work area for code table building */

  /*
   because we don't have pointers in js, we use lencode and distcode directly
   as buffers so we don't need codes
  */
  //this.codes = new Int32Array(ENOUGH);       /* space for code tables */
  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */
  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */
  this.sane = 0;                   /* if false, allow invalid distance too far */
  this.back = 0;                   /* bits back of last unprocessed length/lit */
  this.was = 0;                    /* initial length of match */
}


const inflateStateCheck = (strm) => {

  if (!strm) {
    return 1;
  }
  const state = strm.state;
  if (!state || state.strm !== strm ||
    state.mode < HEAD || state.mode > SYNC) {
    return 1;
  }
  return 0;
};


const inflateResetKeep = (strm) => {

  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }
  const state = strm.state;
  strm.total_in = strm.total_out = state.total = 0;
  strm.msg = ''; /*Z_NULL*/
  if (state.wrap) {       /* to support ill-conceived Java test suite */
    strm.adler = state.wrap & 1;
  }
  state.mode = HEAD;
  state.last = 0;
  state.havedict = 0;
  state.flags = -1;
  state.dmax = 32768;
  state.head = null/*Z_NULL*/;
  state.hold = 0;
  state.bits = 0;
  //state.lencode = state.distcode = state.next = state.codes;
  state.lencode = state.lendyn = new Int32Array(ENOUGH_LENS);
  state.distcode = state.distdyn = new Int32Array(ENOUGH_DISTS);

  state.sane = 1;
  state.back = -1;
  //Tracev((stderr, "inflate: reset\n"));
  return Z_OK$1;
};


const inflateReset = (strm) => {

  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }
  const state = strm.state;
  state.wsize = 0;
  state.whave = 0;
  state.wnext = 0;
  return inflateResetKeep(strm);

};


const inflateReset2 = (strm, windowBits) => {
  let wrap;

  /* get the state */
  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }
  const state = strm.state;

  /* extract wrap request from windowBits parameter */
  if (windowBits < 0) {
    wrap = 0;
    windowBits = -windowBits;
  }
  else {
    wrap = (windowBits >> 4) + 5;
    if (windowBits < 48) {
      windowBits &= 15;
    }
  }

  /* set number of window bits, free window if different */
  if (windowBits && (windowBits < 8 || windowBits > 15)) {
    return Z_STREAM_ERROR$1;
  }
  if (state.window !== null && state.wbits !== windowBits) {
    state.window = null;
  }

  /* update state and reset the rest of it */
  state.wrap = wrap;
  state.wbits = windowBits;
  return inflateReset(strm);
};


const inflateInit2 = (strm, windowBits) => {

  if (!strm) { return Z_STREAM_ERROR$1; }
  //strm.msg = Z_NULL;                 /* in case we return an error */

  const state = new InflateState();

  //if (state === Z_NULL) return Z_MEM_ERROR;
  //Tracev((stderr, "inflate: allocated\n"));
  strm.state = state;
  state.strm = strm;
  state.window = null/*Z_NULL*/;
  state.mode = HEAD;     /* to pass state test in inflateReset2() */
  const ret = inflateReset2(strm, windowBits);
  if (ret !== Z_OK$1) {
    strm.state = null/*Z_NULL*/;
  }
  return ret;
};


const inflateInit = (strm) => {

  return inflateInit2(strm, DEF_WBITS);
};


/*
 Return state with length and distance decoding tables and index sizes set to
 fixed code decoding.  Normally this returns fixed tables from inffixed.h.
 If BUILDFIXED is defined, then instead this routine builds the tables the
 first time it's called, and returns those tables the first time and
 thereafter.  This reduces the size of the code by about 2K bytes, in
 exchange for a little execution time.  However, BUILDFIXED should not be
 used for threaded applications, since the rewriting of the tables and virgin
 may not be thread-safe.
 */
let virgin = true;

let lenfix, distfix; // We have no pointers in JS, so keep tables separate


const fixedtables = (state) => {

  /* build fixed huffman tables if first call (may not be thread safe) */
  if (virgin) {
    lenfix = new Int32Array(512);
    distfix = new Int32Array(32);

    /* literal/length table */
    let sym = 0;
    while (sym < 144) { state.lens[sym++] = 8; }
    while (sym < 256) { state.lens[sym++] = 9; }
    while (sym < 280) { state.lens[sym++] = 7; }
    while (sym < 288) { state.lens[sym++] = 8; }

    inftrees(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });

    /* distance table */
    sym = 0;
    while (sym < 32) { state.lens[sym++] = 5; }

    inftrees(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });

    /* do this just once */
    virgin = false;
  }

  state.lencode = lenfix;
  state.lenbits = 9;
  state.distcode = distfix;
  state.distbits = 5;
};


/*
 Update the window with the last wsize (normally 32K) bytes written before
 returning.  If window does not exist yet, create it.  This is only called
 when a window is already in use, or when output has been written during this
 inflate call, but the end of the deflate stream has not been reached yet.
 It is also called to create a window for dictionary data when a dictionary
 is loaded.

 Providing output buffers larger than 32K to inflate() should provide a speed
 advantage, since only the last 32K of output is copied to the sliding window
 upon return from inflate(), and since all distances after the first 32K of
 output will fall in the output data, making match copies simpler and faster.
 The advantage may be dependent on the size of the processor's data caches.
 */
const updatewindow = (strm, src, end, copy) => {

  let dist;
  const state = strm.state;

  /* if it hasn't been done already, allocate space for the window */
  if (state.window === null) {
    state.wsize = 1 << state.wbits;
    state.wnext = 0;
    state.whave = 0;

    state.window = new Uint8Array(state.wsize);
  }

  /* copy state->wsize or less output bytes into the circular window */
  if (copy >= state.wsize) {
    state.window.set(src.subarray(end - state.wsize, end), 0);
    state.wnext = 0;
    state.whave = state.wsize;
  }
  else {
    dist = state.wsize - state.wnext;
    if (dist > copy) {
      dist = copy;
    }
    //zmemcpy(state->window + state->wnext, end - copy, dist);
    state.window.set(src.subarray(end - copy, end - copy + dist), state.wnext);
    copy -= dist;
    if (copy) {
      //zmemcpy(state->window, end - copy, copy);
      state.window.set(src.subarray(end - copy, end), 0);
      state.wnext = copy;
      state.whave = state.wsize;
    }
    else {
      state.wnext += dist;
      if (state.wnext === state.wsize) { state.wnext = 0; }
      if (state.whave < state.wsize) { state.whave += dist; }
    }
  }
  return 0;
};


const inflate$2 = (strm, flush) => {

  let state;
  let input, output;          // input/output buffers
  let next;                   /* next input INDEX */
  let put;                    /* next output INDEX */
  let have, left;             /* available input and output */
  let hold;                   /* bit buffer */
  let bits;                   /* bits in bit buffer */
  let _in, _out;              /* save starting available input and output */
  let copy;                   /* number of stored or match bytes to copy */
  let from;                   /* where to copy match bytes from */
  let from_source;
  let here = 0;               /* current decoding table entry */
  let here_bits, here_op, here_val; // paked "here" denormalized (JS specific)
  //let last;                   /* parent table entry */
  let last_bits, last_op, last_val; // paked "last" denormalized (JS specific)
  let len;                    /* length to copy for repeats, bits to drop */
  let ret;                    /* return code */
  const hbuf = new Uint8Array(4);    /* buffer for gzip header crc calculation */
  let opts;

  let n; // temporary variable for NEED_BITS

  const order = /* permutation of code lengths */
    new Uint8Array([ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ]);


  if (inflateStateCheck(strm) || !strm.output ||
      (!strm.input && strm.avail_in !== 0)) {
    return Z_STREAM_ERROR$1;
  }

  state = strm.state;
  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */


  //--- LOAD() ---
  put = strm.next_out;
  output = strm.output;
  left = strm.avail_out;
  next = strm.next_in;
  input = strm.input;
  have = strm.avail_in;
  hold = state.hold;
  bits = state.bits;
  //---

  _in = have;
  _out = left;
  ret = Z_OK$1;

  inf_leave: // goto emulation
  for (;;) {
    switch (state.mode) {
      case HEAD:
        if (state.wrap === 0) {
          state.mode = TYPEDO;
          break;
        }
        //=== NEEDBITS(16);
        while (bits < 16) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */
          if (state.wbits === 0) {
            state.wbits = 15;
          }
          state.check = 0/*crc32(0L, Z_NULL, 0)*/;
          //=== CRC2(state.check, hold);
          hbuf[0] = hold & 0xff;
          hbuf[1] = (hold >>> 8) & 0xff;
          state.check = crc32_1(state.check, hbuf, 2, 0);
          //===//

          //=== INITBITS();
          hold = 0;
          bits = 0;
          //===//
          state.mode = FLAGS;
          break;
        }
        if (state.head) {
          state.head.done = false;
        }
        if (!(state.wrap & 1) ||   /* check if zlib header allowed */
          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {
          strm.msg = 'incorrect header check';
          state.mode = BAD;
          break;
        }
        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {
          strm.msg = 'unknown compression method';
          state.mode = BAD;
          break;
        }
        //--- DROPBITS(4) ---//
        hold >>>= 4;
        bits -= 4;
        //---//
        len = (hold & 0x0f)/*BITS(4)*/ + 8;
        if (state.wbits === 0) {
          state.wbits = len;
        }
        if (len > 15 || len > state.wbits) {
          strm.msg = 'invalid window size';
          state.mode = BAD;
          break;
        }

        // !!! pako patch. Force use `options.windowBits` if passed.
        // Required to always use max window size by default.
        state.dmax = 1 << state.wbits;
        //state.dmax = 1 << len;

        state.flags = 0;               /* indicate zlib header */
        //Tracev((stderr, "inflate:   zlib header ok\n"));
        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;
        state.mode = hold & 0x200 ? DICTID : TYPE;
        //=== INITBITS();
        hold = 0;
        bits = 0;
        //===//
        break;
      case FLAGS:
        //=== NEEDBITS(16); */
        while (bits < 16) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        state.flags = hold;
        if ((state.flags & 0xff) !== Z_DEFLATED) {
          strm.msg = 'unknown compression method';
          state.mode = BAD;
          break;
        }
        if (state.flags & 0xe000) {
          strm.msg = 'unknown header flags set';
          state.mode = BAD;
          break;
        }
        if (state.head) {
          state.head.text = ((hold >> 8) & 1);
        }
        if ((state.flags & 0x0200) && (state.wrap & 4)) {
          //=== CRC2(state.check, hold);
          hbuf[0] = hold & 0xff;
          hbuf[1] = (hold >>> 8) & 0xff;
          state.check = crc32_1(state.check, hbuf, 2, 0);
          //===//
        }
        //=== INITBITS();
        hold = 0;
        bits = 0;
        //===//
        state.mode = TIME;
        /* falls through */
      case TIME:
        //=== NEEDBITS(32); */
        while (bits < 32) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        if (state.head) {
          state.head.time = hold;
        }
        if ((state.flags & 0x0200) && (state.wrap & 4)) {
          //=== CRC4(state.check, hold)
          hbuf[0] = hold & 0xff;
          hbuf[1] = (hold >>> 8) & 0xff;
          hbuf[2] = (hold >>> 16) & 0xff;
          hbuf[3] = (hold >>> 24) & 0xff;
          state.check = crc32_1(state.check, hbuf, 4, 0);
          //===
        }
        //=== INITBITS();
        hold = 0;
        bits = 0;
        //===//
        state.mode = OS;
        /* falls through */
      case OS:
        //=== NEEDBITS(16); */
        while (bits < 16) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        if (state.head) {
          state.head.xflags = (hold & 0xff);
          state.head.os = (hold >> 8);
        }
        if ((state.flags & 0x0200) && (state.wrap & 4)) {
          //=== CRC2(state.check, hold);
          hbuf[0] = hold & 0xff;
          hbuf[1] = (hold >>> 8) & 0xff;
          state.check = crc32_1(state.check, hbuf, 2, 0);
          //===//
        }
        //=== INITBITS();
        hold = 0;
        bits = 0;
        //===//
        state.mode = EXLEN;
        /* falls through */
      case EXLEN:
        if (state.flags & 0x0400) {
          //=== NEEDBITS(16); */
          while (bits < 16) {
            if (have === 0) { break inf_leave; }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          //===//
          state.length = hold;
          if (state.head) {
            state.head.extra_len = hold;
          }
          if ((state.flags & 0x0200) && (state.wrap & 4)) {
            //=== CRC2(state.check, hold);
            hbuf[0] = hold & 0xff;
            hbuf[1] = (hold >>> 8) & 0xff;
            state.check = crc32_1(state.check, hbuf, 2, 0);
            //===//
          }
          //=== INITBITS();
          hold = 0;
          bits = 0;
          //===//
        }
        else if (state.head) {
          state.head.extra = null/*Z_NULL*/;
        }
        state.mode = EXTRA;
        /* falls through */
      case EXTRA:
        if (state.flags & 0x0400) {
          copy = state.length;
          if (copy > have) { copy = have; }
          if (copy) {
            if (state.head) {
              len = state.head.extra_len - state.length;
              if (!state.head.extra) {
                // Use untyped array for more convenient processing later
                state.head.extra = new Uint8Array(state.head.extra_len);
              }
              state.head.extra.set(
                input.subarray(
                  next,
                  // extra field is limited to 65536 bytes
                  // - no need for additional size check
                  next + copy
                ),
                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/
                len
              );
              //zmemcpy(state.head.extra + len, next,
              //        len + copy > state.head.extra_max ?
              //        state.head.extra_max - len : copy);
            }
            if ((state.flags & 0x0200) && (state.wrap & 4)) {
              state.check = crc32_1(state.check, input, copy, next);
            }
            have -= copy;
            next += copy;
            state.length -= copy;
          }
          if (state.length) { break inf_leave; }
        }
        state.length = 0;
        state.mode = NAME;
        /* falls through */
      case NAME:
        if (state.flags & 0x0800) {
          if (have === 0) { break inf_leave; }
          copy = 0;
          do {
            // TODO: 2 or 1 bytes?
            len = input[next + copy++];
            /* use constant limit because in js we should not preallocate memory */
            if (state.head && len &&
                (state.length < 65536 /*state.head.name_max*/)) {
              state.head.name += String.fromCharCode(len);
            }
          } while (len && copy < have);

          if ((state.flags & 0x0200) && (state.wrap & 4)) {
            state.check = crc32_1(state.check, input, copy, next);
          }
          have -= copy;
          next += copy;
          if (len) { break inf_leave; }
        }
        else if (state.head) {
          state.head.name = null;
        }
        state.length = 0;
        state.mode = COMMENT;
        /* falls through */
      case COMMENT:
        if (state.flags & 0x1000) {
          if (have === 0) { break inf_leave; }
          copy = 0;
          do {
            len = input[next + copy++];
            /* use constant limit because in js we should not preallocate memory */
            if (state.head && len &&
                (state.length < 65536 /*state.head.comm_max*/)) {
              state.head.comment += String.fromCharCode(len);
            }
          } while (len && copy < have);
          if ((state.flags & 0x0200) && (state.wrap & 4)) {
            state.check = crc32_1(state.check, input, copy, next);
          }
          have -= copy;
          next += copy;
          if (len) { break inf_leave; }
        }
        else if (state.head) {
          state.head.comment = null;
        }
        state.mode = HCRC;
        /* falls through */
      case HCRC:
        if (state.flags & 0x0200) {
          //=== NEEDBITS(16); */
          while (bits < 16) {
            if (have === 0) { break inf_leave; }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          //===//
          if ((state.wrap & 4) && hold !== (state.check & 0xffff)) {
            strm.msg = 'header crc mismatch';
            state.mode = BAD;
            break;
          }
          //=== INITBITS();
          hold = 0;
          bits = 0;
          //===//
        }
        if (state.head) {
          state.head.hcrc = ((state.flags >> 9) & 1);
          state.head.done = true;
        }
        strm.adler = state.check = 0;
        state.mode = TYPE;
        break;
      case DICTID:
        //=== NEEDBITS(32); */
        while (bits < 32) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        strm.adler = state.check = zswap32(hold);
        //=== INITBITS();
        hold = 0;
        bits = 0;
        //===//
        state.mode = DICT;
        /* falls through */
      case DICT:
        if (state.havedict === 0) {
          //--- RESTORE() ---
          strm.next_out = put;
          strm.avail_out = left;
          strm.next_in = next;
          strm.avail_in = have;
          state.hold = hold;
          state.bits = bits;
          //---
          return Z_NEED_DICT$1;
        }
        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;
        state.mode = TYPE;
        /* falls through */
      case TYPE:
        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }
        /* falls through */
      case TYPEDO:
        if (state.last) {
          //--- BYTEBITS() ---//
          hold >>>= bits & 7;
          bits -= bits & 7;
          //---//
          state.mode = CHECK;
          break;
        }
        //=== NEEDBITS(3); */
        while (bits < 3) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        state.last = (hold & 0x01)/*BITS(1)*/;
        //--- DROPBITS(1) ---//
        hold >>>= 1;
        bits -= 1;
        //---//

        switch ((hold & 0x03)/*BITS(2)*/) {
          case 0:                             /* stored block */
            //Tracev((stderr, "inflate:     stored block%s\n",
            //        state.last ? " (last)" : ""));
            state.mode = STORED;
            break;
          case 1:                             /* fixed block */
            fixedtables(state);
            //Tracev((stderr, "inflate:     fixed codes block%s\n",
            //        state.last ? " (last)" : ""));
            state.mode = LEN_;             /* decode codes */
            if (flush === Z_TREES) {
              //--- DROPBITS(2) ---//
              hold >>>= 2;
              bits -= 2;
              //---//
              break inf_leave;
            }
            break;
          case 2:                             /* dynamic block */
            //Tracev((stderr, "inflate:     dynamic codes block%s\n",
            //        state.last ? " (last)" : ""));
            state.mode = TABLE;
            break;
          case 3:
            strm.msg = 'invalid block type';
            state.mode = BAD;
        }
        //--- DROPBITS(2) ---//
        hold >>>= 2;
        bits -= 2;
        //---//
        break;
      case STORED:
        //--- BYTEBITS() ---// /* go to byte boundary */
        hold >>>= bits & 7;
        bits -= bits & 7;
        //---//
        //=== NEEDBITS(32); */
        while (bits < 32) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {
          strm.msg = 'invalid stored block lengths';
          state.mode = BAD;
          break;
        }
        state.length = hold & 0xffff;
        //Tracev((stderr, "inflate:       stored length %u\n",
        //        state.length));
        //=== INITBITS();
        hold = 0;
        bits = 0;
        //===//
        state.mode = COPY_;
        if (flush === Z_TREES) { break inf_leave; }
        /* falls through */
      case COPY_:
        state.mode = COPY;
        /* falls through */
      case COPY:
        copy = state.length;
        if (copy) {
          if (copy > have) { copy = have; }
          if (copy > left) { copy = left; }
          if (copy === 0) { break inf_leave; }
          //--- zmemcpy(put, next, copy); ---
          output.set(input.subarray(next, next + copy), put);
          //---//
          have -= copy;
          next += copy;
          left -= copy;
          put += copy;
          state.length -= copy;
          break;
        }
        //Tracev((stderr, "inflate:       stored end\n"));
        state.mode = TYPE;
        break;
      case TABLE:
        //=== NEEDBITS(14); */
        while (bits < 14) {
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
        }
        //===//
        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;
        //--- DROPBITS(5) ---//
        hold >>>= 5;
        bits -= 5;
        //---//
        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;
        //--- DROPBITS(5) ---//
        hold >>>= 5;
        bits -= 5;
        //---//
        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;
        //--- DROPBITS(4) ---//
        hold >>>= 4;
        bits -= 4;
        //---//
//#ifndef PKZIP_BUG_WORKAROUND
        if (state.nlen > 286 || state.ndist > 30) {
          strm.msg = 'too many length or distance symbols';
          state.mode = BAD;
          break;
        }
//#endif
        //Tracev((stderr, "inflate:       table sizes ok\n"));
        state.have = 0;
        state.mode = LENLENS;
        /* falls through */
      case LENLENS:
        while (state.have < state.ncode) {
          //=== NEEDBITS(3);
          while (bits < 3) {
            if (have === 0) { break inf_leave; }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          //===//
          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);
          //--- DROPBITS(3) ---//
          hold >>>= 3;
          bits -= 3;
          //---//
        }
        while (state.have < 19) {
          state.lens[order[state.have++]] = 0;
        }
        // We have separate tables & no pointers. 2 commented lines below not needed.
        //state.next = state.codes;
        //state.lencode = state.next;
        // Switch to use dynamic table
        state.lencode = state.lendyn;
        state.lenbits = 7;

        opts = { bits: state.lenbits };
        ret = inftrees(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);
        state.lenbits = opts.bits;

        if (ret) {
          strm.msg = 'invalid code lengths set';
          state.mode = BAD;
          break;
        }
        //Tracev((stderr, "inflate:       code lengths ok\n"));
        state.have = 0;
        state.mode = CODELENS;
        /* falls through */
      case CODELENS:
        while (state.have < state.nlen + state.ndist) {
          for (;;) {
            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/
            here_bits = here >>> 24;
            here_op = (here >>> 16) & 0xff;
            here_val = here & 0xffff;

            if ((here_bits) <= bits) { break; }
            //--- PULLBYTE() ---//
            if (have === 0) { break inf_leave; }
            have--;
            hold += input[next++] << bits;
            bits += 8;
            //---//
          }
          if (here_val < 16) {
            //--- DROPBITS(here.bits) ---//
            hold >>>= here_bits;
            bits -= here_bits;
            //---//
            state.lens[state.have++] = here_val;
          }
          else {
            if (here_val === 16) {
              //=== NEEDBITS(here.bits + 2);
              n = here_bits + 2;
              while (bits < n) {
                if (have === 0) { break inf_leave; }
                have--;
                hold += input[next++] << bits;
                bits += 8;
              }
              //===//
              //--- DROPBITS(here.bits) ---//
              hold >>>= here_bits;
              bits -= here_bits;
              //---//
              if (state.have === 0) {
                strm.msg = 'invalid bit length repeat';
                state.mode = BAD;
                break;
              }
              len = state.lens[state.have - 1];
              copy = 3 + (hold & 0x03);//BITS(2);
              //--- DROPBITS(2) ---//
              hold >>>= 2;
              bits -= 2;
              //---//
            }
            else if (here_val === 17) {
              //=== NEEDBITS(here.bits + 3);
              n = here_bits + 3;
              while (bits < n) {
                if (have === 0) { break inf_leave; }
                have--;
                hold += input[next++] << bits;
                bits += 8;
              }
              //===//
              //--- DROPBITS(here.bits) ---//
              hold >>>= here_bits;
              bits -= here_bits;
              //---//
              len = 0;
              copy = 3 + (hold & 0x07);//BITS(3);
              //--- DROPBITS(3) ---//
              hold >>>= 3;
              bits -= 3;
              //---//
            }
            else {
              //=== NEEDBITS(here.bits + 7);
              n = here_bits + 7;
              while (bits < n) {
                if (have === 0) { break inf_leave; }
                have--;
                hold += input[next++] << bits;
                bits += 8;
              }
              //===//
              //--- DROPBITS(here.bits) ---//
              hold >>>= here_bits;
              bits -= here_bits;
              //---//
              len = 0;
              copy = 11 + (hold & 0x7f);//BITS(7);
              //--- DROPBITS(7) ---//
              hold >>>= 7;
              bits -= 7;
              //---//
            }
            if (state.have + copy > state.nlen + state.ndist) {
              strm.msg = 'invalid bit length repeat';
              state.mode = BAD;
              break;
            }
            while (copy--) {
              state.lens[state.have++] = len;
            }
          }
        }

        /* handle error breaks in while */
        if (state.mode === BAD) { break; }

        /* check for end-of-block code (better have one) */
        if (state.lens[256] === 0) {
          strm.msg = 'invalid code -- missing end-of-block';
          state.mode = BAD;
          break;
        }

        /* build code tables -- note: do not change the lenbits or distbits
           values here (9 and 6) without reading the comments in inftrees.h
           concerning the ENOUGH constants, which depend on those values */
        state.lenbits = 9;

        opts = { bits: state.lenbits };
        ret = inftrees(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);
        // We have separate tables & no pointers. 2 commented lines below not needed.
        // state.next_index = opts.table_index;
        state.lenbits = opts.bits;
        // state.lencode = state.next;

        if (ret) {
          strm.msg = 'invalid literal/lengths set';
          state.mode = BAD;
          break;
        }

        state.distbits = 6;
        //state.distcode.copy(state.codes);
        // Switch to use dynamic table
        state.distcode = state.distdyn;
        opts = { bits: state.distbits };
        ret = inftrees(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);
        // We have separate tables & no pointers. 2 commented lines below not needed.
        // state.next_index = opts.table_index;
        state.distbits = opts.bits;
        // state.distcode = state.next;

        if (ret) {
          strm.msg = 'invalid distances set';
          state.mode = BAD;
          break;
        }
        //Tracev((stderr, 'inflate:       codes ok\n'));
        state.mode = LEN_;
        if (flush === Z_TREES) { break inf_leave; }
        /* falls through */
      case LEN_:
        state.mode = LEN;
        /* falls through */
      case LEN:
        if (have >= 6 && left >= 258) {
          //--- RESTORE() ---
          strm.next_out = put;
          strm.avail_out = left;
          strm.next_in = next;
          strm.avail_in = have;
          state.hold = hold;
          state.bits = bits;
          //---
          inffast(strm, _out);
          //--- LOAD() ---
          put = strm.next_out;
          output = strm.output;
          left = strm.avail_out;
          next = strm.next_in;
          input = strm.input;
          have = strm.avail_in;
          hold = state.hold;
          bits = state.bits;
          //---

          if (state.mode === TYPE) {
            state.back = -1;
          }
          break;
        }
        state.back = 0;
        for (;;) {
          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/
          here_bits = here >>> 24;
          here_op = (here >>> 16) & 0xff;
          here_val = here & 0xffff;

          if (here_bits <= bits) { break; }
          //--- PULLBYTE() ---//
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
          //---//
        }
        if (here_op && (here_op & 0xf0) === 0) {
          last_bits = here_bits;
          last_op = here_op;
          last_val = here_val;
          for (;;) {
            here = state.lencode[last_val +
                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];
            here_bits = here >>> 24;
            here_op = (here >>> 16) & 0xff;
            here_val = here & 0xffff;

            if ((last_bits + here_bits) <= bits) { break; }
            //--- PULLBYTE() ---//
            if (have === 0) { break inf_leave; }
            have--;
            hold += input[next++] << bits;
            bits += 8;
            //---//
          }
          //--- DROPBITS(last.bits) ---//
          hold >>>= last_bits;
          bits -= last_bits;
          //---//
          state.back += last_bits;
        }
        //--- DROPBITS(here.bits) ---//
        hold >>>= here_bits;
        bits -= here_bits;
        //---//
        state.back += here_bits;
        state.length = here_val;
        if (here_op === 0) {
          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?
          //        "inflate:         literal '%c'\n" :
          //        "inflate:         literal 0x%02x\n", here.val));
          state.mode = LIT;
          break;
        }
        if (here_op & 32) {
          //Tracevv((stderr, "inflate:         end of block\n"));
          state.back = -1;
          state.mode = TYPE;
          break;
        }
        if (here_op & 64) {
          strm.msg = 'invalid literal/length code';
          state.mode = BAD;
          break;
        }
        state.extra = here_op & 15;
        state.mode = LENEXT;
        /* falls through */
      case LENEXT:
        if (state.extra) {
          //=== NEEDBITS(state.extra);
          n = state.extra;
          while (bits < n) {
            if (have === 0) { break inf_leave; }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          //===//
          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;
          //--- DROPBITS(state.extra) ---//
          hold >>>= state.extra;
          bits -= state.extra;
          //---//
          state.back += state.extra;
        }
        //Tracevv((stderr, "inflate:         length %u\n", state.length));
        state.was = state.length;
        state.mode = DIST;
        /* falls through */
      case DIST:
        for (;;) {
          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/
          here_bits = here >>> 24;
          here_op = (here >>> 16) & 0xff;
          here_val = here & 0xffff;

          if ((here_bits) <= bits) { break; }
          //--- PULLBYTE() ---//
          if (have === 0) { break inf_leave; }
          have--;
          hold += input[next++] << bits;
          bits += 8;
          //---//
        }
        if ((here_op & 0xf0) === 0) {
          last_bits = here_bits;
          last_op = here_op;
          last_val = here_val;
          for (;;) {
            here = state.distcode[last_val +
                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];
            here_bits = here >>> 24;
            here_op = (here >>> 16) & 0xff;
            here_val = here & 0xffff;

            if ((last_bits + here_bits) <= bits) { break; }
            //--- PULLBYTE() ---//
            if (have === 0) { break inf_leave; }
            have--;
            hold += input[next++] << bits;
            bits += 8;
            //---//
          }
          //--- DROPBITS(last.bits) ---//
          hold >>>= last_bits;
          bits -= last_bits;
          //---//
          state.back += last_bits;
        }
        //--- DROPBITS(here.bits) ---//
        hold >>>= here_bits;
        bits -= here_bits;
        //---//
        state.back += here_bits;
        if (here_op & 64) {
          strm.msg = 'invalid distance code';
          state.mode = BAD;
          break;
        }
        state.offset = here_val;
        state.extra = (here_op) & 15;
        state.mode = DISTEXT;
        /* falls through */
      case DISTEXT:
        if (state.extra) {
          //=== NEEDBITS(state.extra);
          n = state.extra;
          while (bits < n) {
            if (have === 0) { break inf_leave; }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          //===//
          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;
          //--- DROPBITS(state.extra) ---//
          hold >>>= state.extra;
          bits -= state.extra;
          //---//
          state.back += state.extra;
        }
//#ifdef INFLATE_STRICT
        if (state.offset > state.dmax) {
          strm.msg = 'invalid distance too far back';
          state.mode = BAD;
          break;
        }
//#endif
        //Tracevv((stderr, "inflate:         distance %u\n", state.offset));
        state.mode = MATCH;
        /* falls through */
      case MATCH:
        if (left === 0) { break inf_leave; }
        copy = _out - left;
        if (state.offset > copy) {         /* copy from window */
          copy = state.offset - copy;
          if (copy > state.whave) {
            if (state.sane) {
              strm.msg = 'invalid distance too far back';
              state.mode = BAD;
              break;
            }
// (!) This block is disabled in zlib defaults,
// don't enable it for binary compatibility
//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR
//          Trace((stderr, "inflate.c too far\n"));
//          copy -= state.whave;
//          if (copy > state.length) { copy = state.length; }
//          if (copy > left) { copy = left; }
//          left -= copy;
//          state.length -= copy;
//          do {
//            output[put++] = 0;
//          } while (--copy);
//          if (state.length === 0) { state.mode = LEN; }
//          break;
//#endif
          }
          if (copy > state.wnext) {
            copy -= state.wnext;
            from = state.wsize - copy;
          }
          else {
            from = state.wnext - copy;
          }
          if (copy > state.length) { copy = state.length; }
          from_source = state.window;
        }
        else {                              /* copy from output */
          from_source = output;
          from = put - state.offset;
          copy = state.length;
        }
        if (copy > left) { copy = left; }
        left -= copy;
        state.length -= copy;
        do {
          output[put++] = from_source[from++];
        } while (--copy);
        if (state.length === 0) { state.mode = LEN; }
        break;
      case LIT:
        if (left === 0) { break inf_leave; }
        output[put++] = state.length;
        left--;
        state.mode = LEN;
        break;
      case CHECK:
        if (state.wrap) {
          //=== NEEDBITS(32);
          while (bits < 32) {
            if (have === 0) { break inf_leave; }
            have--;
            // Use '|' instead of '+' to make sure that result is signed
            hold |= input[next++] << bits;
            bits += 8;
          }
          //===//
          _out -= left;
          strm.total_out += _out;
          state.total += _out;
          if ((state.wrap & 4) && _out) {
            strm.adler = state.check =
                /*UPDATE_CHECK(state.check, put - _out, _out);*/
                (state.flags ? crc32_1(state.check, output, _out, put - _out) : adler32_1(state.check, output, _out, put - _out));

          }
          _out = left;
          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too
          if ((state.wrap & 4) && (state.flags ? hold : zswap32(hold)) !== state.check) {
            strm.msg = 'incorrect data check';
            state.mode = BAD;
            break;
          }
          //=== INITBITS();
          hold = 0;
          bits = 0;
          //===//
          //Tracev((stderr, "inflate:   check matches trailer\n"));
        }
        state.mode = LENGTH;
        /* falls through */
      case LENGTH:
        if (state.wrap && state.flags) {
          //=== NEEDBITS(32);
          while (bits < 32) {
            if (have === 0) { break inf_leave; }
            have--;
            hold += input[next++] << bits;
            bits += 8;
          }
          //===//
          if ((state.wrap & 4) && hold !== (state.total & 0xffffffff)) {
            strm.msg = 'incorrect length check';
            state.mode = BAD;
            break;
          }
          //=== INITBITS();
          hold = 0;
          bits = 0;
          //===//
          //Tracev((stderr, "inflate:   length matches trailer\n"));
        }
        state.mode = DONE;
        /* falls through */
      case DONE:
        ret = Z_STREAM_END$1;
        break inf_leave;
      case BAD:
        ret = Z_DATA_ERROR$1;
        break inf_leave;
      case MEM:
        return Z_MEM_ERROR$1;
      case SYNC:
        /* falls through */
      default:
        return Z_STREAM_ERROR$1;
    }
  }

  // inf_leave <- here is real place for "goto inf_leave", emulated via "break inf_leave"

  /*
     Return from inflate(), updating the total counts and the check value.
     If there was no progress during the inflate() call, return a buffer
     error.  Call updatewindow() to create and/or update the window state.
     Note: a memory error from inflate() is non-recoverable.
   */

  //--- RESTORE() ---
  strm.next_out = put;
  strm.avail_out = left;
  strm.next_in = next;
  strm.avail_in = have;
  state.hold = hold;
  state.bits = bits;
  //---

  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&
                      (state.mode < CHECK || flush !== Z_FINISH$1))) {
    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) ;
  }
  _in -= strm.avail_in;
  _out -= strm.avail_out;
  strm.total_in += _in;
  strm.total_out += _out;
  state.total += _out;
  if ((state.wrap & 4) && _out) {
    strm.adler = state.check = /*UPDATE_CHECK(state.check, strm.next_out - _out, _out);*/
      (state.flags ? crc32_1(state.check, output, _out, strm.next_out - _out) : adler32_1(state.check, output, _out, strm.next_out - _out));
  }
  strm.data_type = state.bits + (state.last ? 64 : 0) +
                    (state.mode === TYPE ? 128 : 0) +
                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);
  if (((_in === 0 && _out === 0) || flush === Z_FINISH$1) && ret === Z_OK$1) {
    ret = Z_BUF_ERROR;
  }
  return ret;
};


const inflateEnd = (strm) => {

  if (inflateStateCheck(strm)) {
    return Z_STREAM_ERROR$1;
  }

  let state = strm.state;
  if (state.window) {
    state.window = null;
  }
  strm.state = null;
  return Z_OK$1;
};


const inflateGetHeader = (strm, head) => {

  /* check state */
  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }
  const state = strm.state;
  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR$1; }

  /* save header structure */
  state.head = head;
  head.done = false;
  return Z_OK$1;
};


const inflateSetDictionary = (strm, dictionary) => {
  const dictLength = dictionary.length;

  let state;
  let dictid;
  let ret;

  /* check state */
  if (inflateStateCheck(strm)) { return Z_STREAM_ERROR$1; }
  state = strm.state;

  if (state.wrap !== 0 && state.mode !== DICT) {
    return Z_STREAM_ERROR$1;
  }

  /* check for correct dictionary identifier */
  if (state.mode === DICT) {
    dictid = 1; /* adler32(0, null, 0)*/
    /* dictid = adler32(dictid, dictionary, dictLength); */
    dictid = adler32_1(dictid, dictionary, dictLength, 0);
    if (dictid !== state.check) {
      return Z_DATA_ERROR$1;
    }
  }
  /* copy dictionary to window using updatewindow(), which will amend the
   existing dictionary if appropriate */
  ret = updatewindow(strm, dictionary, dictLength, dictLength);
  if (ret) {
    state.mode = MEM;
    return Z_MEM_ERROR$1;
  }
  state.havedict = 1;
  // Tracev((stderr, "inflate:   dictionary set\n"));
  return Z_OK$1;
};


var inflateReset_1 = inflateReset;
var inflateReset2_1 = inflateReset2;
var inflateResetKeep_1 = inflateResetKeep;
var inflateInit_1 = inflateInit;
var inflateInit2_1 = inflateInit2;
var inflate_2$1 = inflate$2;
var inflateEnd_1 = inflateEnd;
var inflateGetHeader_1 = inflateGetHeader;
var inflateSetDictionary_1 = inflateSetDictionary;
var inflateInfo = 'pako inflate (from Nodeca project)';

/* Not implemented
module.exports.inflateCodesUsed = inflateCodesUsed;
module.exports.inflateCopy = inflateCopy;
module.exports.inflateGetDictionary = inflateGetDictionary;
module.exports.inflateMark = inflateMark;
module.exports.inflatePrime = inflatePrime;
module.exports.inflateSync = inflateSync;
module.exports.inflateSyncPoint = inflateSyncPoint;
module.exports.inflateUndermine = inflateUndermine;
module.exports.inflateValidate = inflateValidate;
*/

var inflate_1$2 = {
	inflateReset: inflateReset_1,
	inflateReset2: inflateReset2_1,
	inflateResetKeep: inflateResetKeep_1,
	inflateInit: inflateInit_1,
	inflateInit2: inflateInit2_1,
	inflate: inflate_2$1,
	inflateEnd: inflateEnd_1,
	inflateGetHeader: inflateGetHeader_1,
	inflateSetDictionary: inflateSetDictionary_1,
	inflateInfo: inflateInfo
};

// (C) 1995-2013 Jean-loup Gailly and Mark Adler
// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin
//
// This software is provided 'as-is', without any express or implied
// warranty. In no event will the authors be held liable for any damages
// arising from the use of this software.
//
// Permission is granted to anyone to use this software for any purpose,
// including commercial applications, and to alter it and redistribute it
// freely, subject to the following restrictions:
//
// 1. The origin of this software must not be misrepresented; you must not
//   claim that you wrote the original software. If you use this software
//   in a product, an acknowledgment in the product documentation would be
//   appreciated but is not required.
// 2. Altered source versions must be plainly marked as such, and must not be
//   misrepresented as being the original software.
// 3. This notice may not be removed or altered from any source distribution.

function GZheader() {
  /* true if compressed data believed to be text */
  this.text       = 0;
  /* modification time */
  this.time       = 0;
  /* extra flags (not used when writing a gzip file) */
  this.xflags     = 0;
  /* operating system */
  this.os         = 0;
  /* pointer to extra field or Z_NULL if none */
  this.extra      = null;
  /* extra field length (valid if extra != Z_NULL) */
  this.extra_len  = 0; // Actually, we don't need it in JS,
                       // but leave for few code modifications

  //
  // Setup limits is not necessary because in js we should not preallocate memory
  // for inflate use constant limit in 65536 bytes
  //

  /* space at extra (only when reading header) */
  // this.extra_max  = 0;
  /* pointer to zero-terminated file name or Z_NULL */
  this.name       = '';
  /* space at name (only when reading header) */
  // this.name_max   = 0;
  /* pointer to zero-terminated comment or Z_NULL */
  this.comment    = '';
  /* space at comment (only when reading header) */
  // this.comm_max   = 0;
  /* true if there was or will be a header crc */
  this.hcrc       = 0;
  /* true when done reading gzip header (not used when writing a gzip file) */
  this.done       = false;
}

var gzheader = GZheader;

const pako_esm_toString = Object.prototype.toString;

/* Public constants ==========================================================*/
/* ===========================================================================*/

const {
  Z_NO_FLUSH, Z_FINISH,
  Z_OK, Z_STREAM_END, Z_NEED_DICT, Z_STREAM_ERROR, Z_DATA_ERROR, Z_MEM_ERROR
} = constants$2;

/* ===========================================================================*/


/**
 * class Inflate
 *
 * Generic JS-style wrapper for zlib calls. If you don't need
 * streaming behaviour - use more simple functions: [[inflate]]
 * and [[inflateRaw]].
 **/

/* internal
 * inflate.chunks -> Array
 *
 * Chunks of output data, if [[Inflate#onData]] not overridden.
 **/

/**
 * Inflate.result -> Uint8Array|String
 *
 * Uncompressed result, generated by default [[Inflate#onData]]
 * and [[Inflate#onEnd]] handlers. Filled after you push last chunk
 * (call [[Inflate#push]] with `Z_FINISH` / `true` param).
 **/

/**
 * Inflate.err -> Number
 *
 * Error code after inflate finished. 0 (Z_OK) on success.
 * Should be checked if broken data possible.
 **/

/**
 * Inflate.msg -> String
 *
 * Error message, if [[Inflate.err]] != 0
 **/


/**
 * new Inflate(options)
 * - options (Object): zlib inflate options.
 *
 * Creates new inflator instance with specified params. Throws exception
 * on bad params. Supported options:
 *
 * - `windowBits`
 * - `dictionary`
 *
 * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)
 * for more information on these.
 *
 * Additional options, for internal needs:
 *
 * - `chunkSize` - size of generated data chunks (16K by default)
 * - `raw` (Boolean) - do raw inflate
 * - `to` (String) - if equal to 'string', then result will be converted
 *   from utf8 to utf16 (javascript) string. When string output requested,
 *   chunk length can differ from `chunkSize`, depending on content.
 *
 * By default, when no options set, autodetect deflate/gzip data format via
 * wrapper header.
 *
 * ##### Example:
 *
 * ```javascript
 * const pako = require('pako')
 * const chunk1 = new Uint8Array([1,2,3,4,5,6,7,8,9])
 * const chunk2 = new Uint8Array([10,11,12,13,14,15,16,17,18,19]);
 *
 * const inflate = new pako.Inflate({ level: 3});
 *
 * inflate.push(chunk1, false);
 * inflate.push(chunk2, true);  // true -> last chunk
 *
 * if (inflate.err) { throw new Error(inflate.err); }
 *
 * console.log(inflate.result);
 * ```
 **/
function Inflate$1(options) {
  this.options = common.assign({
    chunkSize: 1024 * 64,
    windowBits: 15,
    to: ''
  }, options || {});

  const opt = this.options;

  // Force window size for `raw` data, if not set directly,
  // because we have no header for autodetect.
  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {
    opt.windowBits = -opt.windowBits;
    if (opt.windowBits === 0) { opt.windowBits = -15; }
  }

  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate
  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&
      !(options && options.windowBits)) {
    opt.windowBits += 32;
  }

  // Gzip header has no info about windows size, we can do autodetect only
  // for deflate. So, if window size not set, force it to max when gzip possible
  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {
    // bit 3 (16) -> gzipped data
    // bit 4 (32) -> autodetect gzip/deflate
    if ((opt.windowBits & 15) === 0) {
      opt.windowBits |= 15;
    }
  }

  this.err    = 0;      // error code, if happens (0 = Z_OK)
  this.msg    = '';     // error message
  this.ended  = false;  // used to avoid multiple onEnd() calls
  this.chunks = [];     // chunks of compressed data

  this.strm   = new zstream();
  this.strm.avail_out = 0;

  let status  = inflate_1$2.inflateInit2(
    this.strm,
    opt.windowBits
  );

  if (status !== Z_OK) {
    throw new Error(messages[status]);
  }

  this.header = new gzheader();

  inflate_1$2.inflateGetHeader(this.strm, this.header);

  // Setup dictionary
  if (opt.dictionary) {
    // Convert data if needed
    if (typeof opt.dictionary === 'string') {
      opt.dictionary = strings.string2buf(opt.dictionary);
    } else if (pako_esm_toString.call(opt.dictionary) === '[object ArrayBuffer]') {
      opt.dictionary = new Uint8Array(opt.dictionary);
    }
    if (opt.raw) { //In raw mode we need to set the dictionary early
      status = inflate_1$2.inflateSetDictionary(this.strm, opt.dictionary);
      if (status !== Z_OK) {
        throw new Error(messages[status]);
      }
    }
  }
}

/**
 * Inflate#push(data[, flush_mode]) -> Boolean
 * - data (Uint8Array|ArrayBuffer): input data
 * - flush_mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE
 *   flush modes. See constants. Skipped or `false` means Z_NO_FLUSH,
 *   `true` means Z_FINISH.
 *
 * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with
 * new output chunks. Returns `true` on success. If end of stream detected,
 * [[Inflate#onEnd]] will be called.
 *
 * `flush_mode` is not needed for normal operation, because end of stream
 * detected automatically. You may try to use it for advanced things, but
 * this functionality was not tested.
 *
 * On fail call [[Inflate#onEnd]] with error code and return false.
 *
 * ##### Example
 *
 * ```javascript
 * push(chunk, false); // push one of data chunks
 * ...
 * push(chunk, true);  // push last chunk
 * ```
 **/
Inflate$1.prototype.push = function (data, flush_mode) {
  const strm = this.strm;
  const chunkSize = this.options.chunkSize;
  const dictionary = this.options.dictionary;
  let status, _flush_mode, last_avail_out;

  if (this.ended) return false;

  if (flush_mode === ~~flush_mode) _flush_mode = flush_mode;
  else _flush_mode = flush_mode === true ? Z_FINISH : Z_NO_FLUSH;

  // Convert data if needed
  if (pako_esm_toString.call(data) === '[object ArrayBuffer]') {
    strm.input = new Uint8Array(data);
  } else {
    strm.input = data;
  }

  strm.next_in = 0;
  strm.avail_in = strm.input.length;

  for (;;) {
    if (strm.avail_out === 0) {
      strm.output = new Uint8Array(chunkSize);
      strm.next_out = 0;
      strm.avail_out = chunkSize;
    }

    status = inflate_1$2.inflate(strm, _flush_mode);

    if (status === Z_NEED_DICT && dictionary) {
      status = inflate_1$2.inflateSetDictionary(strm, dictionary);

      if (status === Z_OK) {
        status = inflate_1$2.inflate(strm, _flush_mode);
      } else if (status === Z_DATA_ERROR) {
        // Replace code with more verbose
        status = Z_NEED_DICT;
      }
    }

    // Skip snyc markers if more data follows and not raw mode
    while (strm.avail_in > 0 &&
           status === Z_STREAM_END &&
           strm.state.wrap > 0 &&
           data[strm.next_in] !== 0)
    {
      inflate_1$2.inflateReset(strm);
      status = inflate_1$2.inflate(strm, _flush_mode);
    }

    switch (status) {
      case Z_STREAM_ERROR:
      case Z_DATA_ERROR:
      case Z_NEED_DICT:
      case Z_MEM_ERROR:
        this.onEnd(status);
        this.ended = true;
        return false;
    }

    // Remember real `avail_out` value, because we may patch out buffer content
    // to align utf8 strings boundaries.
    last_avail_out = strm.avail_out;

    if (strm.next_out) {
      if (strm.avail_out === 0 || status === Z_STREAM_END) {

        if (this.options.to === 'string') {

          let next_out_utf8 = strings.utf8border(strm.output, strm.next_out);

          let tail = strm.next_out - next_out_utf8;
          let utf8str = strings.buf2string(strm.output, next_out_utf8);

          // move tail & realign counters
          strm.next_out = tail;
          strm.avail_out = chunkSize - tail;
          if (tail) strm.output.set(strm.output.subarray(next_out_utf8, next_out_utf8 + tail), 0);

          this.onData(utf8str);

        } else {
          this.onData(strm.output.length === strm.next_out ? strm.output : strm.output.subarray(0, strm.next_out));
        }
      }
    }

    // Must repeat iteration if out buffer is full
    if (status === Z_OK && last_avail_out === 0) continue;

    // Finalize if end of stream reached.
    if (status === Z_STREAM_END) {
      status = inflate_1$2.inflateEnd(this.strm);
      this.onEnd(status);
      this.ended = true;
      return true;
    }

    if (strm.avail_in === 0) break;
  }

  return true;
};


/**
 * Inflate#onData(chunk) -> Void
 * - chunk (Uint8Array|String): output data. When string output requested,
 *   each chunk will be string.
 *
 * By default, stores data blocks in `chunks[]` property and glue
 * those in `onEnd`. Override this handler, if you need another behaviour.
 **/
Inflate$1.prototype.onData = function (chunk) {
  this.chunks.push(chunk);
};


/**
 * Inflate#onEnd(status) -> Void
 * - status (Number): inflate status. 0 (Z_OK) on success,
 *   other if not.
 *
 * Called either after you tell inflate that the input stream is
 * complete (Z_FINISH). By default - join collected chunks,
 * free memory and fill `results` / `err` properties.
 **/
Inflate$1.prototype.onEnd = function (status) {
  // On success - join
  if (status === Z_OK) {
    if (this.options.to === 'string') {
      this.result = this.chunks.join('');
    } else {
      this.result = common.flattenChunks(this.chunks);
    }
  }
  this.chunks = [];
  this.err = status;
  this.msg = this.strm.msg;
};


/**
 * inflate(data[, options]) -> Uint8Array|String
 * - data (Uint8Array|ArrayBuffer): input data to decompress.
 * - options (Object): zlib inflate options.
 *
 * Decompress `data` with inflate/ungzip and `options`. Autodetect
 * format via wrapper header by default. That's why we don't provide
 * separate `ungzip` method.
 *
 * Supported options are:
 *
 * - windowBits
 *
 * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)
 * for more information.
 *
 * Sugar (options):
 *
 * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify
 *   negative windowBits implicitly.
 * - `to` (String) - if equal to 'string', then result will be converted
 *   from utf8 to utf16 (javascript) string. When string output requested,
 *   chunk length can differ from `chunkSize`, depending on content.
 *
 *
 * ##### Example:
 *
 * ```javascript
 * const pako = require('pako');
 * const input = pako.deflate(new Uint8Array([1,2,3,4,5,6,7,8,9]));
 * let output;
 *
 * try {
 *   output = pako.inflate(input);
 * } catch (err) {
 *   console.log(err);
 * }
 * ```
 **/
function inflate$1(input, options) {
  const inflator = new Inflate$1(options);

  inflator.push(input);

  // That will never happens, if you don't cheat with options :)
  if (inflator.err) throw inflator.msg || messages[inflator.err];

  return inflator.result;
}


/**
 * inflateRaw(data[, options]) -> Uint8Array|String
 * - data (Uint8Array|ArrayBuffer): input data to decompress.
 * - options (Object): zlib inflate options.
 *
 * The same as [[inflate]], but creates raw data, without wrapper
 * (header and adler32 crc).
 **/
function inflateRaw$1(input, options) {
  options = options || {};
  options.raw = true;
  return inflate$1(input, options);
}


/**
 * ungzip(data[, options]) -> Uint8Array|String
 * - data (Uint8Array|ArrayBuffer): input data to decompress.
 * - options (Object): zlib inflate options.
 *
 * Just shortcut to [[inflate]], because it autodetects format
 * by header.content. Done for convenience.
 **/


var Inflate_1$1 = Inflate$1;
var inflate_2 = inflate$1;
var inflateRaw_1$1 = inflateRaw$1;
var ungzip$1 = inflate$1;
var constants = constants$2;

var inflate_1$1 = {
	Inflate: Inflate_1$1,
	inflate: inflate_2,
	inflateRaw: inflateRaw_1$1,
	ungzip: ungzip$1,
	constants: constants
};

const { Deflate, deflate, deflateRaw, gzip } = deflate_1$1;

const { Inflate, inflate, inflateRaw, ungzip } = inflate_1$1;



var Deflate_1 = Deflate;
var deflate_1 = deflate;
var deflateRaw_1 = deflateRaw;
var gzip_1 = gzip;
var Inflate_1 = Inflate;
var inflate_1 = inflate;
var inflateRaw_1 = inflateRaw;
var ungzip_1 = ungzip;
var constants_1 = constants$2;

var pako = {
	Deflate: Deflate_1,
	deflate: deflate_1,
	deflateRaw: deflateRaw_1,
	gzip: gzip_1,
	Inflate: Inflate_1,
	inflate: inflate_1,
	inflateRaw: inflateRaw_1,
	ungzip: ungzip_1,
	constants: constants_1
};



;// ./src/background/cdp-encryption.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */



const RSA_ALGORITHM = {
  name: "RSA-OAEP",
  hash: "SHA-256"
};

const PEM_PUBLIC_KEY_HEADER = "-----BEGIN PUBLIC KEY-----";
const PEM_PUBLIC_KEY_FOOTER = "-----END PUBLIC KEY-----";

function toArrayBuffer(dataString) {
  return Uint8Array.from(dataString, x => x.charCodeAt(0));
}

/**
 * Import RSA public key
 *
 * @param {String} pem Pem-encoded public key
 * @returns {CryptoKey} public key
 * @ignore
 */
async function importRSAPublicKey(pem) {
  // fetch the part of the PEM string between header and footer
  const pemContents = pem.substring(
    PEM_PUBLIC_KEY_HEADER.length,
    pem.length - PEM_PUBLIC_KEY_FOOTER.length - 1);

  return await crypto.subtle.importKey(
    "spki",
    (0,rsa/* base64ToArrayBuffer */.Ms)(pemContents),
    RSA_ALGORITHM,
    true,
    ["encrypt"]);
}

/**
 * Encrypt data with RSA
 *
 * @param {CryptoKey} publicKey Public key
 * @param {String|ArrayBuffer} data Data to encrypt
 * @returns {ArrayBuffer} Encrypted data
 * @ignore
 */
async function encryptRSA(publicKey, data) {
  return await crypto.subtle.encrypt(
    RSA_ALGORITHM,
    publicKey,
    typeof data == "string" ? toArrayBuffer(data) : data);
}

/**
 * Decrypt RSA encrypted data
 *
 * @param {CryptoKey} privateKey Private key
 * @param {ArrayBuffer} data Encrypted data
 * @returns {ArrayBuffer} Decrypted data
 * @ignore
 */
async function decryptRSA(privateKey, data) {
  return await crypto.subtle.decrypt(
    RSA_ALGORITHM,
    privateKey,
    data);
}

const AES_LENGTH = 256;

const CREATE_AES_KEY_ALGORITHM = {
  name: "AES-GCM",
  length: AES_LENGTH
};

/**
 * Generate AES key
 * @returns {CryptoKey} Generated key
 * @ignore
 */
async function createAESKey() {
  return await crypto.subtle.generateKey(
    CREATE_AES_KEY_ALGORITHM,
    true,
    ["encrypt", "decrypt"]);
}

/**
 * Prepare binary key representation
 *
 * @param {CryptoKey} key Key
 * @returns {ArrayBuffer} binary representation of the key
 * @ignore
 */
async function AESkeyToBinary(key) {
  return await crypto.subtle.exportKey("raw", key);
}

/**
 * Generate AES nonce
 * @returns {Uint8Array} Generated nonce
 */
function generateAESNonce() {
  return crypto.getRandomValues(new Uint8Array(16));
}

/**
 * Encrypt with AES
 *
 * @param {Uint8Array} nonce Nonce
 * @param {CryptoKey} key Key
 * @param {String|ArrayBuffer} data Data to encrypt
 * @returns {ArrayBuffer} Encrypted data
 * @ignore
 */
async function encryptAES(nonce, key, data) {
  const ENCRYPT_ALGORITHM = {
    name: "AES-GCM",
    iv: nonce
  };
  return await crypto.subtle.encrypt(
    ENCRYPT_ALGORITHM,
    key,
    typeof data == "string" ? toArrayBuffer(data) : data);
}

/**
 * Decrypt with AES
 *
 * @param {Uint8Array} nonce Nonce
 * @param {CryptoKey} key Key
 * @param {ArrayBuffer} data Data to decrypt
 * @returns {ArrayBuffer} Decrypted data
 * @ignore
 */
async function decryptAES(nonce, key, data) {
  const DECRYPT_ALGORITHM = {
    name: "AES-GCM",
    iv: nonce
  };
  return await crypto.subtle.decrypt(
    DECRYPT_ALGORITHM,
    key,
    data);
}

;// ./src/background/cdp-metrics-uploader.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */

















let cdp_metrics_uploader_manifest = browser_polyfill.runtime.getManifest();
const extensionVersion = cdp_metrics_uploader_manifest.version;

const CDP_STORAGE_KEY = "ewe:cdp-metrics-uploader-3";
const cdp_metrics_uploader_storage = new PersistentState(CDP_STORAGE_KEY, browser_polyfill.storage.local);

let _cdp;
let _scheduler = null;

/**
 * Request public key from the backend
 * @ignore
 */
async function requestPublicKey() {
  const response = await fetch(_cdp.publicKeyUrl);
  if (!response.ok) {
    throw new Error(`Failed to get public key: ${response.status}`);
  }
  const publicKey = await response.text();
  const keyId = response.headers.get("PubKey-Id");
  if (!keyId) {
    throw new Error("Failed to get public key: no pubkey-id");
  }
  return {publicKey, keyId};
}

async function compressDomainStats(domainStats) {
  const gzippedArray = pako.gzip(domainStats, {level: 9});
  return gzippedArray.buffer;
}

async function encryptDomainStats(publicKeyPem, domainStats) {
  debugging_trace({publicKeyPem});

  const publicKey = await importRSAPublicKey(publicKeyPem);
  const aesKey = await createAESKey();
  const aesKeyBinary = await AESkeyToBinary(aesKey);
  const aesNonce = generateAESNonce();
  const aesKeyBinaryBuffer = await encryptRSA(publicKey, aesKeyBinary);
  const aesKeyBinaryArray = new Uint8Array(aesKeyBinaryBuffer);

  const encryptedDataBuffer = await encryptAES(aesNonce, aesKey, domainStats);
  const encryptedDataArray = new Uint8Array(encryptedDataBuffer);

  const encryptedCombo = new Uint8Array(
    aesKeyBinaryArray.length + aesNonce.length + encryptedDataArray.length);
  encryptedCombo.set(aesKeyBinaryArray);
  encryptedCombo.set(aesNonce, aesKeyBinaryArray.length);
  encryptedCombo.set(encryptedDataArray,
                     aesKeyBinaryArray.length + aesNonce.length);
  // to Base64
  const result = btoa(String.fromCharCode.apply(null, encryptedCombo));
  debugging_debug(() => result);
  return result;
}

async function cdp_metrics_uploader_getExperimentsAssignments() {
  const assignments = await experiments.getAssignments();
  return Object.entries(assignments).map(assignment => {
    return {
      experiment_id: assignment[0],
      variant_id: assignment[1]
    };
  });
}

async function buildPayload(publicKey, keyId, domainStats, utid) {
  debugging_trace({publicKey, keyId, utid});

  const state = cdp_metrics_uploader_storage.getState();
  const payload = {
    public_key_id: keyId,
    addon_name: info.sdkName,
    addon_version: info.sdkVersion,
    application: info.application,
    application_version: info.applicationVersion,
    extension_name: browser_polyfill.runtime.id,
    extension_version: extensionVersion,
    utid,
    ucid: state.ucid,
    encryption_scheme: `rsa:2048:aes:${AES_LENGTH}`,
    // schema #4
    aa_active: await hasAcceptableAdsEnabled(),
    experiments: await cdp_metrics_uploader_getExperimentsAssignments()
  };

  if (premiumStatusCallback) {
    const premiumStatus = await premiumStatusCallback();
    payload.premium_status = premiumStatus ? "premium" : "free";
  }

  // the very first run is expected not to have `encrypted_data` and `last_ping`
  if (state.lastPing) {
    const gzippedDS = await compressDomainStats(domainStats);
    payload.encrypted_data = await encryptDomainStats(publicKey, gzippedDS);
    payload.last_ping = new Date(state.lastPing).toISOString();
  }

  debugging_debug(() => "CDP payload: " + JSON.stringify(payload));
  return payload;
}

function getNextPing() {
  const state = cdp_metrics_uploader_storage.getState();
  const now = Date.now();

  // The default rate is 1 ping every 24 hours.
  // If there were no data to send we might have skipped ping(s).
  // So `nextPing` is calculated in the future starting `lastPing`
  // with 24 hours step.
  let nextPing;
  let days = 0;
  do {
    days += 1;
    nextPing = (state.lastPing || now) + days * time.MILLIS_IN_DAY;
  }
  while (nextPing < now);
  return nextPing;
}

async function updateTimestamps(updateLastPing) {
  debugging_trace({});

  const state = cdp_metrics_uploader_storage.getState();
  state.nextPing = getNextPing();
  if (updateLastPing) {
    state.lastPing = Date.now();
  }

  // clean-up the error if any
  if (state.lastError) {
    delete state.lastError;
  }
  if (hasLastDomainStats(state)) {
    delete state.lastDomainStats;
  }
  if (state.lastUtid) {
    delete state.lastUtid;
  }

  if (state.retryCounter) {
    delete state.retryCounter;
  }

  await cdp_metrics_uploader_storage.save();
}

function hasLastDomainStats(state) {
  return Object.prototype.hasOwnProperty.call(state, "lastDomainStats");
}

/**
 * @ignore
 */
async function upload() {
  debugging_trace({});

  if (await cdp.isOptOut()) {
    warn("CDP opted out, skipping");
    return false;
  }

  const state = cdp_metrics_uploader_storage.getState();
  let domainStats;
  let utid;
  try {
    const isRetryPing = hasLastDomainStats(state);

    // for the very first ping domainStats is `null`,
    // but we save it as `null` anyway to signal that's the last sent payload,
    // so we can't use the check `if (state.lastDomainStats)`
    if (isRetryPing) {
      domainStats = state.lastDomainStats;
      utid = state.lastUtid;
      warn("Resending payload " + utid);
    }
    else {
      // for the very first ping `lastPing` is null
      if (state.lastPing) {
        domainStats = getDomainStats();

        // we don't need the data anymore:
        // it will be either successfully sent or saved for retry in
        // `browser.storage.local`
        await clearData();
      }
      else {
        // the very first ping
        domainStats = null;
      }
      utid = esm_browser_v4();
      debugging_debug("New payload " + utid);
    }

    // if we don't have domain stats, domainStats = "{"ds":[]}"
    // (empty JSON array, 2 characters)
    if (!state.lastPing || (domainStats && domainStats.length > 9)) {
      const {publicKey, keyId} = await requestPublicKey();
      const payload = await buildPayload(publicKey, keyId, domainStats, utid);
      await postWithBearerToken(_cdp.pingUrl, _cdp.bearer, {payload});
      await updateTimestamps(true);
    }
    else {
      warn("No data to upload, skipping");
      await updateTimestamps(false);
    }
  }
  catch (e) {
    // Not being sent to Sentry for now. If we do, we should find a way to
    // filter between unavoidable network errors and something actually being
    // wrong on the server.
    error(`CDP error: ${e.message} for payload with utid=${utid}`);

    state.retryCounter = (state.retryCounter || 0) + 1;
    if (state.retryCounter >= 3) {
      error("Retried sending too much times");
      await updateTimestamps(true);
      await cdp_metrics_uploader_storage.save();
      return true;
    }

    state.lastError = Date.now();
    if (!hasLastDomainStats(state)) {
      state.lastDomainStats = domainStats;
      state.lastUtid = utid;
    }
    await cdp_metrics_uploader_storage.save();

    return false;
  }
  return true;
}

function initializeScheduler(errorRetryDelay) {
  if (_scheduler) {
    return;
  }

  _scheduler = new Scheduler({
    interval: 0, // this causes the scheduler to always call getNextTimestamp
    errorRetryDelay,
    listener: () => upload(),
    async getNextTimestamp() {
      let state = cdp_metrics_uploader_storage.getState();
      let lastError = state.lastError;
      let now = Date.now();

      if (lastError) {
        let nextRetryAfterError = lastError + errorRetryDelay;
        warn(`CDP ping retrying in ${errorRetryDelay} millis`);
        let maxNextRetry = now + errorRetryDelay;
        if (nextRetryAfterError > maxNextRetry) {
          // This shouldn't happen if the clocks are working right. It implies
          // that the system clock has been set backwards since we stored that
          // timestamp. Let's correct the storage using our current clock
          // value.
          state.lastError = now;
          await cdp_metrics_uploader_storage.save();
        }
        return nextRetryAfterError;
      }

      if (!state.nextPing) {
        // first run ever
        state.nextPing = getNextPing();
        await cdp_metrics_uploader_storage.save();
        return 0; // now!
      }

      return state.nextPing; // updated on a successful upload
    }
  });
}

async function initializeUcid() {
  if (!cdp_metrics_uploader_storage.getState().ucid) {
    cdp_metrics_uploader_storage.getState().ucid = esm_browser_v4();
    await cdp_metrics_uploader_storage.save();
  }
}

/**
 * Starts CDP, which will trigger sending aggregated metrics to the CDP
 * server on a schedule.
 *
 * @param {Object} cdp CDP configuration (URLs, bearer)
 * @param {number} errorRetryDelay
 *        Error retry interval in milliseconds
 * @ignore
 */
async function cdp_metrics_uploader_start(cdp, errorRetryDelay = 1 * time.MILLIS_IN_HOUR) {
  if (!cdp.pingUrl) {
    throw new Error("No CDP `pingUrl` provided");
  }

  if (!cdp.publicKeyUrl) {
    throw new Error("No CDP `publicKeyUrl` provided");
  }

  if (!cdp.bearer) {
    throw new Error("No CDP `bearer` provided");
  }

  _cdp = cdp;

  cdp_metrics_uploader_storage.clearState();
  await cdp_metrics_uploader_storage.load();
  await initializeUcid();
  initializeScheduler(errorRetryDelay);
}

async function cdp_metrics_uploader_reset() {
  cdp_metrics_uploader_stop();
  cdp_metrics_uploader_storage.clearState();
  await cdp_metrics_uploader_storage.save();
}

function cdp_metrics_uploader_stop() {
  if (!_scheduler) {
    return;
  }

  _scheduler.stop();
  _scheduler = null;
}

// EXTERNAL MODULE: ./adblockpluscore/lib/notifications.js
var notifications = __nested_webpack_require_678579__(7544);
;// ./src/background/notifications.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */







const NOTIFICATION_KEY = "ewe:notifications";
class NotificationSessionStorageBackend {
  constructor() {
    this.local = new Set();
    this.loaded = this.load();
  }

  add(notification) {
    this.local.add(notification);
    this.save();
  }

  delete(notification) {
    let removed = this.local.delete(notification);
    if (removed) {
      this.save();
    }

    return removed;
  }

  [Symbol.iterator]() {
    return this.local[Symbol.iterator]();
  }

  async load() {
    let result = await browser_polyfill.storage.session.get([NOTIFICATION_KEY]);
    let loadedNotifications = result[NOTIFICATION_KEY] || [];
    for (let notification of loadedNotifications) {
      this.local.add(notification);
    }
  }

  async save() {
    await this.loaded;
    if (!this.debounceTimer) {
      this.debounceTimer = setTimeout(() => {
        this.debounceTimer = null;
        this.saveImmediate();
      }, 0);
    }
  }

  async saveImmediate() {
    await browser_polyfill.storage.session.set({
      [NOTIFICATION_KEY]: [...this.local]
    });
  }
}

if (browser_polyfill.storage.session) {
  notifications/* notifications */.$.setLocalNotificationStorage(
    new NotificationSessionStorageBackend()
  );
}

let funcsThatRequirePrefs = [
  "start",
  "shouldIgnoreNotifications",
  "showNotification",
  "showNext",
  "markAsShown",
  "toggleIgnoreCategory",
  "getDownloadCount",
  "getIgnoredCategories"
];

/**
 * The notifications API (optional usage).
 *
 * Call `notifications.start()` to start downloading remote
 * notifications. Local notifications functions such as
 * `notifications.addNotification(notification)` and
 * `notifications.showNotification(notification)` can be used even if
 * `notifications.start()` has not been called.
 *
 *  Please also notice that notification events are **not** using the
 * {@link #eventdispatcher|EventDispatcher} interface.
 *
 * Note that, when used through EWE, the following notifications
 * functions are asynchronous and return the values specified in the
 * Core documentation wrapped in promises:
 * - start
 * - shouldIgnoreNotifications
 * - showNotification
 * - showNext
 * - markAsShown
 * - toggleIgnoreCategory
 * - getDownloadCount
 * - getIgnoredCategories
 *
 * @see {@link https://eyeo.gitlab.io/adblockplus/abc/adblockpluscore/master/docs/module-notifications.html?job=docs|Adblock Plus core notifications documentation}
 */
let notifications_notifications = new Proxy(notifications/* notifications */.$, {
  get(target, prop, receiver) {
    if (funcsThatRequirePrefs.includes(prop)) {
      return async function(...args) {
        await (0,prefs.init)();
        return target[prop](...args);
      };
    }
    return target[prop];
  }
});

;// ./src/background/index.js
/*
 * This file is part of eyeo's Web Extension Ad Blocking Toolkit (EWE),
 * Copyright (C) 2006-present eyeo GmbH
 *
 * EWE is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 3 as
 * published by the Free Software Foundation.
 *
 * EWE is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with EWE.  If not, see <http://www.gnu.org/licenses/>.
 */






























// "Allowlisting" might be used before EWE is actually started
// and it does not require pre- and post- actions.


// "Notifications" namespace is already a Proxy


// "Sentry" might be used before EWE is actually started


async function preApiCall() {
  // Service worker can be shut down and we might need
  // to initialize it before the usage.
  await initializer.start();
}

async function postApiCall() {
  if (!browser_polyfill.declarativeNetRequest) {
    return;
  }

  await prefs.awaitSavingComplete();
  await filterEngine.filterStorage.awaitSavingComplete();
  await _awaitSavingComplete();
  await content_message_deferrer_awaitSavingComplete();
  await cdp_awaitSavingComplete();
}

function isAsync(func) {
  return func.constructor && func.constructor.name === "AsyncFunction";
}

function wrapApiNamespace(target) {
  return new Proxy(target, {
    get(_target, prop, receiver) {
      // wrapping only asynchronous functions
      if (typeof _target[prop] === "function" && isAsync(_target[prop])) {
        return async function(...args) {
          debugging_debug(() => "API call: " + JSON.stringify({
            method: prop,
            args: [...args]})
          , LOG_COLOR_CYAN);
          await preApiCall();
          let result = await _target[prop](...args);
          await postApiCall();
          return result;
        };
      }
      return _target[prop];
    }
  });
}

/**
 * @ignore
 */
const wrappedSubscriptions = wrapApiNamespace(subscriptions);


/**
 * @ignore
 */
const wrappedFilters = wrapApiNamespace(filters);


/**
 * @ignore
 */
const wrappedReporting = wrapApiNamespace(reporting);


/**
 * @ignore
 */
const wrappedDebugging = wrapApiNamespace(debugging);


/**
 * @ignore
 */
const wrappedTelemetry = wrapApiNamespace(telemetry);


/**
 * @ignore
 */
const wrappedTesting = wrapApiNamespace(testing_stub);


/**
 * @ignore
 */
const wrappedCdp = wrapApiNamespace(cdp);


/**
 * @ignore
 */
const wrappedExperiments = wrapApiNamespace(experiments);


let background_snippets = {
  /**
   * Snippet callback.
   * @callback SnippetCallback
   * @param {Object} environment
   *   The environment variables
   * @param {...Array.<Array.<string>>} _
   *   The snippets names and arguments.
   */

  /**
   * Enables support for snippet filters.
   * @param {Object} [snippetInfo]
   * @param {SnippetCallback} [snippetInfo.isolatedCode]
   *   The code defining the available snippets to be executed in the isolated
   *   content script context.
   * @param {SnippetCallback} [snippetInfo.injectedCode]
   *   The code defining the available snippets to be injected and executed in
   *   the main context.
   */
  setLibrary: setSnippetLibrary
};

const SKIP_INIT_RULESETS_STORAGE_KEY = "ewe:skip_init_rulesets";

/**
 * @ignore
 */
async function clearSkipInitRulesets() {
  await browser_polyfill.storage.local.remove(SKIP_INIT_RULESETS_STORAGE_KEY);
}

async function onInstalled(details) {
  // Web extension update (with potential subscriptions filter
  // text changed and repacked) can happen in the same browser session.
  // So in order to not skip the next subscriptions filter text update
  // the flag is removed.
  let manifest = browser_polyfill.runtime.getManifest();
  if (details.reason != browser_polyfill.runtime.OnInstalledReason.UPDATE ||
    !details.previousVersion || details.previousVersion == manifest.version) {
    return;
  }

  await clearSkipInitRulesets();
}

/**
* @typedef {Object} FirstRunInfo
* @property {boolean} foundStorage Whether the subscriptions storage was
*                                  initialized or not.
* @property {boolean} foundSubscriptions True when pre-existing subscriptions
*                                        were found, false otherwise.
*                                        Considers also whether custom filters
*                                        exist.
* @property {Array.<string>?} [warnings] An array of warnings.
*/

/**
 * Defines the recommended filter subscriptions per language.
 * @typedef {Object} BundledSubscription
 * @property {string} id The identifier for this subscription.
 * @property {Array<string>} languages The languages that this subscription
 *   would match to.
 * @property {string} title The display name of the recommended subscription.
 * @property {string} homepage The home page of the recommended subscription.
 * @property {Array<string>} requires A list of subscriptions that this one
 *   depends on.
 * @property {Array<string>} includes A list of subscriptions that this
 *   one also contains.
 * @property {?boolean} privileged True if this subscription can load filters
 *   that require privileged access, like snippets.
 * @property {string} type The kind of content targeted by this recommended
 *   subscription.
 * @property {string} url Where the recommended subscription can be found in
 *   plain text.
 * @property {?string} mv2_url Where the recommended subscription can be found
 *   for MV2 in plain text (Manifest V3 only).
 * @property {?string} diff_url Where this recommendation will get updates
 *   from. Required for MV3 subscriptions to update.
 * @property {?string} expires Expiration interval from the subscription
 *   header. Usually the number of days or hours between expirations.
 */

/**
 * Initializes the filter engine and starts blocking content.
 *
 * Calling this function is required for the other API calls to work, except for
 * API event listener calls, which could also be done before `start()`.
 *
 * In MV3 extensions, this must be called in the first turn of the
 * event loop.
 *
 * @param {Object?} [addonInfo] An object containing addon
 *   information belonging to sdk consumer, that can be accessed via
 *   `debugging` module. (It is usually used as an identifier in
 *   network requests, etc.). This object can be undefined for MV2. If it is,
 *   name and version will default to the extension's name and version.
 * @param {string} [addonInfo.name] Name of the addon/extension.
 * @param {string} [addonInfo.version] Version of the addon/extension.
 * @param {Array<BundledSubscription>?} [addonInfo.bundledSubscriptions]
 *   A list of subscriptions provided by the integrator. Cannot be undefined
 *   for MV3.
 * @param {string?} [addonInfo.bundledSubscriptionsPath]
 *   A path to subscription files provided by the integrator. Cannot be
 *   undefined for MV3.
 * @param {Object?} [addonInfo.telemetry] Settings for telemetry. The telemetry
 *   module will only be started if this is provided. This module will send a
 *   POST request to the specified telemetry URL every 24 hours with metadata
 *   about the extension. Pings will only happen if `EWE.telemetry.setOptOut`
 *   has been called to opt the user in.
 * @param {string} [addonInfo.telemetry.url] The URL of the location where user
 * active pings will be sent to.
 * @param {string} [addonInfo.telemetry.bearer] The Bearer token accompanying
 *   telemetry API calls.
 * @param {Object?} [addonInfo.cdp] Settings for CDP.
 * @param {string} [addonInfo.cdp.aggregateUrl] The URL to send aggregate
 *   metrics to CDP.
 * @param {string} [addonInfo.cdp.pingUrl] The URL to do the user counting ping
 *   to CDP.
 * @param {string} [addonInfo.cdp.bearer] The Bearer token accompanying CDP API
 *   calls.
 * @param {Object?} [addonInfo.featureFlags] Boolean flags for enabling and
 *   disabling features. If a flag is not set here, the default value will be
 *   used. The default value is the correct state for the flag according to the
 *   SDK at time of release, so under normal circumstances these flags do not
 *   need to be set. Options may be removed from this object without it being
 *   considered a breaking change as features stabilitze and can no longer by
 *   dynamically enabled or disabled. If any features are set here which are
 *   not known features, a warning will be added to the `warnings` property
 *   of the returned `FirstRunInfo`.
 * @param {bool?} [addonInfo.featureFlags.inlineCss] Enable inline CSS in
 *   element hiding and element hiding emulation filters.
 * @param {Object?} [addonInfo.experiments] Settings for split experiments.
 * @param {string} [addonInfo.experiments.url] The URL to make a GET request to
 *   for getting experiment data.
 * @return {Promise<FirstRunInfo>} Promise that is resolved after starting up
 *                                 is completed.
 */
async function background_start(addonInfo) {
  let warnings = [];

  let addonInfoResult = (0,info.setAddonInfo)(addonInfo);
  if (addonInfoResult.warnings) {
    warnings.push(...addonInfoResult.warnings);
  }

  startSubmodulesWithListeners();

  if (browser_polyfill.declarativeNetRequest) {
    browser_polyfill.runtime.onInstalled.addListener(onInstalled);
    let validateSubscriptionWarnings = await subscriptions_validate(
      addonInfo.bundledSubscriptions, addonInfo.bundledSubscriptionsPath);

    if (validateSubscriptionWarnings) {
      warnings.push(...validateSubscriptionWarnings);
    }
  }

  await startSubmodules(addonInfo);

  let {filterStorage} = filterEngine;
  let firstRun = {
    foundSubscriptions: filterStorage.getSubscriptionCount() != 0,
    foundStorage: !filterStorage.firstRun,
    warnings
  };

  if (browser_polyfill.declarativeNetRequest) {
    let migratedToMv3 = await checkAndMigrateSubscriptions();
    // If it has just migrated to MV3 there is no diff updates data,
    // so we can skip wiping it.
    await checkAndInitSubscriptions(migratedToMv3);
  }

  if (addonInfo && addonInfo.telemetry) {
    await telemetry_start(addonInfo.telemetry);
  }

  if (addonInfo && addonInfo.cdp) {
    await cdp_metrics_uploader_start(addonInfo.cdp);
  }

  // This function is invoked at the latest
  // possible moment during engine startup processing to prevent
  // errors when getting and removing custom rules.
  deferredStart();

  return firstRun;
}

function startSubmodulesWithListeners() {
  // for MV3, submodules that register event listeners generally need
  // to register their events in the first turn of the event loop to
  // register their event listeners.
  message_responder_start();
  content_message_deferrer_start();
  if (isRunningInServiceWorker()) {
    popup_blocker_service_worker_start();
  }

  if (browser_polyfill.declarativeNetRequest) {
    dnr_request_reporter_start();
  }

  start();
  filters_start();
}

async function startSubmodules(addonInfo) {
  await initializer.start();

  // MV2-style popup and request blocking assume that initializer is
  // started first.
  if (!isRunningInServiceWorker()) {
    popup_blocker_background_page_start();
  }

  if (!browser_polyfill.declarativeNetRequest) {
    request_filter_start();
  }

  filterEngine.filterStorage.synchronizer.start();

  if (addonInfo && addonInfo.experiments && addonInfo.experiments.url) {
    experiments_start(addonInfo.experiments.url);
  }
}

async function checkAndMigrateSubscriptions() {
  if (prefs.Prefs.migration_state !== prefs.MIGRATED_TO_MV3) {
    await migrate();

    if (prefs.Prefs.migration_state === prefs.MIGRATED_TO_MV2) {
      await migrateCustomFilters();
    }

    prefs.Prefs.migration_state = prefs.MIGRATED_TO_MV3;
    return true;
  }
  return false;
}

/**
 * @ignore
 * @param {boolean} skipWipeOutDiffs Skip wiping diff updates data
 */
async function checkAndInitSubscriptions(skipWipeOutDiffs) {
  // Loading the subcriptions filter text wipes out diff updates,
  // so we do it in case of web extension update only.
  let skipInit = await browser_polyfill.storage.local.get(
    [SKIP_INIT_RULESETS_STORAGE_KEY]
  );
  if (skipInit[SKIP_INIT_RULESETS_STORAGE_KEY]) {
    // Rulesets state is not persisted between webext updates
    await ensureDNRRulesetsEnabled();
    return;
  }

  // Update subscription information before calling
  // enableAllDisabledStaticRules() or otherwise
  // browser.declarativeNetRequest.getDisabledRuleIds will throw an error
  await updateSubscriptionInformation();

  if (!skipWipeOutDiffs) {
    // It's a webext update, so we need to wipe out all diffs
    // and start from scratch: full state provided in bundled data.
    await clearRulesetUpdates();
    await removeSubscriptionsDynamicFilters();
    await enableAllDisabledStaticRules();
  }

  await recoverMigrationErrorSubscriptions();
  await ensureDNRRulesetsEnabled();

  await subscriptions.sync();

  await browser_polyfill.storage.local.set(
    {[SKIP_INIT_RULESETS_STORAGE_KEY]: true}
  );
}

})();

/******/ 	return __nested_webpack_exports__;
/******/ })()
;
});


/***/ }),

/***/ 6501:
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  Hu: () => (/* reexport */ getNumberPartnerExt),
  ni: () => (/* reexport */ start)
});

// UNUSED EXPORTS: PartnerExtensionIds, PingMessage, addAlarmListener, alarmName, intervalKey, lastPingKey, partnerExtensionFoundKey, partnerExtensionIdsKey, sendPingToParterExtension, sendSavePingResponses, startPartnerDetection, uboDetectedKey, uboDetectionLastRunKey, uboExtensionIds

// EXTERNAL MODULE: ../../node_modules/webextension-polyfill/src/browser-polyfill.js
var browser_polyfill = __webpack_require__(2558);
;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/conflict-detection/dist/background/detection.types.js
const alarmName = "pd:ping_schedule";
const intervalKey = "pd_ping_interval";
const partnerExtensionIdsKey = "partnerExtensionIds";
const partnerExtensionFoundKey = "partnerExtensionFound";
const lastPingKey = "pd_last_ping";
const uboDetectedKey = "uboDetected";
const uboDetectionLastRunKey = "uboDetectionLastRun";
const PingMessage = {
    type: "ping",
};
const PartnerExtensionIds = [
    "cfhdojbkjhnklbpkdaibdccddilifddb",
    "gighmmpiobklfepjocnamgkkbiglidom",
    "gmgoamodcdcjnbaobigkjelfplakmdhh",
    "ndcileolkflehcjpmjnfbnaibdcgglog",
    "oidhhegpmlfpoeialbgcdocjalghfpkp",
    "{d10d0bf8-f5b5-c8b4-a8b2-2b9879e08c5d}",
    "jid1-NIfFY2CA8fy1tg@jetpack",
];
const uboExtensionIds = [
    "cjpalhdlnbpafiamejdnhcphjbkeiagm",
    "ddkjiahejlhfcafbddmgiahcphecmpfh",
    "odfafepnkmbhccpbejgmiehpchacaeak",
    "cimighlppcgcoapaliogpjjdehbnofhn",
    "kccohkcpppjjkkjppopfnflnebibpida",
    "99f80bf7-2581-4e03-a191-3013e8d65551",
];

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/conflict-detection/dist/background/partner-detection.js


async function sendPingToParterExtension() {
    const promises = [];
    const foundExtensionIds = [];
    for (const extensionId of PartnerExtensionIds) {
        const response = browser_polyfill.runtime
            .sendMessage(extensionId, PingMessage, undefined)
            .then((result) => {
            foundExtensionIds.push(extensionId);
            const pingResult = result;
            return !!(pingResult === null || pingResult === void 0 ? void 0 : pingResult.pingResponse);
        })
            .catch(() => {
            return false;
        });
        promises.push(response);
    }
    await Promise.all(promises);
    return foundExtensionIds;
}
async function sendSavePingResponses(parameters) {
    await (parameters === null || parameters === void 0 ? void 0 : parameters.prefs.untilLoaded);
    const lastPingTimestamp = parameters === null || parameters === void 0 ? void 0 : parameters.prefs.get(lastPingKey);
    const intervalTime = parameters === null || parameters === void 0 ? void 0 : parameters.prefs.get(intervalKey);
    if (Date.now() - lastPingTimestamp < intervalTime) {
        parameters === null || parameters === void 0 ? void 0 : parameters.logger.debug("[conflict-detection]: Ping time too early, not pinging.");
        return;
    }
    parameters === null || parameters === void 0 ? void 0 : parameters.logger.debug("[conflict-detection]: pinging.");
    const foundExtensionIds = await sendPingToParterExtension();
    await (parameters === null || parameters === void 0 ? void 0 : parameters.prefs.set(partnerExtensionFoundKey, {
        extesnionsIdsFound: foundExtensionIds,
        detectionTimestamp: Date.now(),
    }));
    await (parameters === null || parameters === void 0 ? void 0 : parameters.prefs.set(lastPingKey, Date.now()));
    parameters === null || parameters === void 0 ? void 0 : parameters.logger.debug(`[conflict-detection]: foundExtensionIds : ${foundExtensionIds.toString()}`);
}
async function addAlarmListener(parameters) {
    browser_polyfill.alarms.onAlarm.addListener((alarm) => {
        if (alarm.name !== alarmName) {
            return;
        }
        void sendSavePingResponses(parameters);
    });
}
async function getNumberPartnerExtTemp(parameters) {
    var _a, _b;
    await (parameters === null || parameters === void 0 ? void 0 : parameters.prefs.untilLoaded);
    return (((_b = (_a = parameters === null || parameters === void 0 ? void 0 : parameters.prefs.get(partnerExtensionFoundKey)) === null || _a === void 0 ? void 0 : _a.extesnionsIdsFound) === null || _b === void 0 ? void 0 : _b.length) || 0);
}
let getNumberPartnerExt = async () => null;
async function startPartnerDetection(parameters) {
    void addAlarmListener(parameters);
    getNumberPartnerExt = getNumberPartnerExtTemp.bind(null, parameters);
    await (parameters === null || parameters === void 0 ? void 0 : parameters.prefs.untilLoaded);
    const intervalTime = parameters.prefs.get(intervalKey);
    if (typeof intervalTime !== "number") {
        parameters === null || parameters === void 0 ? void 0 : parameters.logger.debug("[conflict-detection]: no intervalKey found in Prefs");
        return;
    }
    const partnerAlarm = await browser_polyfill.alarms.get(alarmName);
    if (partnerAlarm) {
        parameters === null || parameters === void 0 ? void 0 : parameters.logger.debug(`[conflict-detection]: alarm found, scheduled for ${new Date(partnerAlarm.scheduledTime).toLocaleString()}`);
        return;
    }
    browser_polyfill.alarms.create(alarmName, {
        periodInMinutes: intervalTime / 1000 / 60,
    });
    void sendSavePingResponses(parameters);
}
function isMessage(candidate) {
    return (candidate !== null && typeof candidate === "object" && "type" in candidate);
}
function isKnownSender(sender) {
    return (typeof (sender === null || sender === void 0 ? void 0 : sender.id) === "string" &&
        PartnerExtensionIds.includes(sender.id));
}
browser_polyfill.runtime.onMessageExternal.addListener(function (message, sender, sendResponse) {
    if (!isMessage(message) || !isKnownSender(sender)) {
        return;
    }
    sendResponse({ pingResponse: true });
    return true;
});

// EXTERNAL MODULE: ../../node_modules/@eyeo/webext-ad-filtering-solution/adblockpluscore/lib/snippets.js
var snippets = __webpack_require__(5801);
;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/conflict-detection/dist/shared/messages.types.js
const detectionEvent = "conflict-detection.ubo-detected";

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/conflict-detection/dist/background/nonpartner-detection.js




const urlMatches = [
    { hostEquals: "www.youtube.com" },
    { hostEquals: "youtube.com" },
    { hostEquals: "www.facebook.com" },
    { hostEquals: "facebook.com" },
];
function uboDetection(eventName) {
    const jsonIn = `{"require":{"0":{"3":{"0":{"__bbox":{"require":[{"3":{"1":{"__bbox":{"result":{"data":[{"ads_data":{"__typename":"this_will_be_removed"}}]}}}}}]}}}}}}`;
    const jsonOut = JSON.stringify(JSON.parse(jsonIn));
    const XHRChanged = XMLHttpRequest.toString().includes("uboLog");
    const result = jsonIn !== jsonOut || XHRChanged;
    if (!result) {
        return false;
    }
    if (eventName) {
        document.dispatchEvent(new CustomEvent(eventName));
    }
    return result;
}
async function saveResultInPrefs(prefs, key) {
    await prefs.untilLoaded;
    await prefs.set(key, Date.now());
}
async function runMV3Detection(logger, prefs, tabId) {
    const [{ result }] = await browser_polyfill.scripting.executeScript({
        target: { tabId },
        func: uboDetection,
        world: "MAIN",
    });
    logger.debug("[conflict-detection]: non-partner extension MV3 detection script was injected");
    if (!result) {
        logger.debug("[conflict-detection]: NO non-partner extension was found on MV3");
        return;
    }
    logger.debug("[conflict-detection]: non-partner extension found on MV3");
    await saveResultInPrefs(prefs, uboDetectedKey);
}
async function runMV2Detection(logger, tabId) {
    const executable = (0,snippets/* prepareInlineScriptForInjection */.Gn)(uboDetection, detectionEvent);
    await browser_polyfill.tabs.executeScript(tabId, {
        frameId: 0,
        code: executable,
        matchAboutBlank: true,
        runAt: "document_end",
    });
    logger.debug("[conflict-detection]: non-partner extension MV2 detection script was injected");
}
function startNonPartnerDetection(parameters) {
    const { logger, port, addTrustedMessageTypes, prefs } = parameters;
    browser_polyfill.webNavigation.onCompleted.addListener(async (details) => {
        var _a, _b;
        const { tabId, frameId } = details;
        if (frameId !== 0 || tabId === -1) {
            return;
        }
        if (((_a = browser_polyfill.scripting) === null || _a === void 0 ? void 0 : _a.executeScript) &&
            Object.values((_b = browser_polyfill.scripting.ExecutionWorld) !== null && _b !== void 0 ? _b : {}).includes("MAIN")) {
            await runMV3Detection(logger, prefs, tabId);
        }
        else {
            await runMV2Detection(logger, tabId);
        }
        await saveResultInPrefs(prefs, uboDetectionLastRunKey);
    }, {
        url: urlMatches,
    });
    urlMatches.forEach(({ hostEquals: host }) => {
        addTrustedMessageTypes(`https://${host}`, [detectionEvent]);
    });
    port.on(detectionEvent, async () => {
        await saveResultInPrefs(prefs, uboDetectedKey);
        logger.debug("[conflict-detection]: non-partner extension found on MV2");
    });
    browser_polyfill.tabs.onCreated.addListener(async (tab) => {
        const { url, pendingUrl, title } = tab;
        const tabUrl = url && url !== "" ? url : pendingUrl;
        if (!tabUrl) {
            return;
        }
        const isPartnerExtension = uboExtensionIds.some((extensionId) => tabUrl.includes(`/${extensionId}/`) || (title === null || title === void 0 ? void 0 : title.includes(extensionId)));
        if (isPartnerExtension) {
            logger.debug("[conflict-detection]: non-partner extension found by options page");
            await saveResultInPrefs(prefs, uboDetectionLastRunKey);
            await saveResultInPrefs(prefs, uboDetectedKey);
        }
    });
}

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/conflict-detection/dist/background/detection.js


async function start(parameters) {
    void startPartnerDetection(parameters);
    startNonPartnerDetection(parameters);
}

;// CONCATENATED MODULE: ../../node_modules/@eyeo-fragments/conflict-detection/dist/background/index.js





/***/ }),

/***/ 2058:
/***/ ((module) => {

"use strict";
module.exports = /*#__PURE__*/JSON.parse('{"alarms":{"clear":{"minArgs":0,"maxArgs":1},"clearAll":{"minArgs":0,"maxArgs":0},"get":{"minArgs":0,"maxArgs":1},"getAll":{"minArgs":0,"maxArgs":0}},"bookmarks":{"create":{"minArgs":1,"maxArgs":1},"get":{"minArgs":1,"maxArgs":1},"getChildren":{"minArgs":1,"maxArgs":1},"getRecent":{"minArgs":1,"maxArgs":1},"getSubTree":{"minArgs":1,"maxArgs":1},"getTree":{"minArgs":0,"maxArgs":0},"move":{"minArgs":2,"maxArgs":2},"remove":{"minArgs":1,"maxArgs":1},"removeTree":{"minArgs":1,"maxArgs":1},"search":{"minArgs":1,"maxArgs":1},"update":{"minArgs":2,"maxArgs":2}},"browserAction":{"disable":{"minArgs":0,"maxArgs":1,"fallbackToNoCallback":true},"enable":{"minArgs":0,"maxArgs":1,"fallbackToNoCallback":true},"getBadgeBackgroundColor":{"minArgs":1,"maxArgs":1},"getBadgeText":{"minArgs":1,"maxArgs":1},"getPopup":{"minArgs":1,"maxArgs":1},"getTitle":{"minArgs":1,"maxArgs":1},"openPopup":{"minArgs":0,"maxArgs":0},"setBadgeBackgroundColor":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setBadgeText":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setIcon":{"minArgs":1,"maxArgs":1},"setPopup":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setTitle":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true}},"browsingData":{"remove":{"minArgs":2,"maxArgs":2},"removeCache":{"minArgs":1,"maxArgs":1},"removeCookies":{"minArgs":1,"maxArgs":1},"removeDownloads":{"minArgs":1,"maxArgs":1},"removeFormData":{"minArgs":1,"maxArgs":1},"removeHistory":{"minArgs":1,"maxArgs":1},"removeLocalStorage":{"minArgs":1,"maxArgs":1},"removePasswords":{"minArgs":1,"maxArgs":1},"removePluginData":{"minArgs":1,"maxArgs":1},"settings":{"minArgs":0,"maxArgs":0}},"commands":{"getAll":{"minArgs":0,"maxArgs":0}},"contextMenus":{"remove":{"minArgs":1,"maxArgs":1},"removeAll":{"minArgs":0,"maxArgs":0},"update":{"minArgs":2,"maxArgs":2}},"cookies":{"get":{"minArgs":1,"maxArgs":1},"getAll":{"minArgs":1,"maxArgs":1},"getAllCookieStores":{"minArgs":0,"maxArgs":0},"remove":{"minArgs":1,"maxArgs":1},"set":{"minArgs":1,"maxArgs":1}},"devtools":{"inspectedWindow":{"eval":{"minArgs":1,"maxArgs":2,"singleCallbackArg":false}},"panels":{"create":{"minArgs":3,"maxArgs":3,"singleCallbackArg":true},"elements":{"createSidebarPane":{"minArgs":1,"maxArgs":1}}}},"downloads":{"cancel":{"minArgs":1,"maxArgs":1},"download":{"minArgs":1,"maxArgs":1},"erase":{"minArgs":1,"maxArgs":1},"getFileIcon":{"minArgs":1,"maxArgs":2},"open":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"pause":{"minArgs":1,"maxArgs":1},"removeFile":{"minArgs":1,"maxArgs":1},"resume":{"minArgs":1,"maxArgs":1},"search":{"minArgs":1,"maxArgs":1},"show":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true}},"extension":{"isAllowedFileSchemeAccess":{"minArgs":0,"maxArgs":0},"isAllowedIncognitoAccess":{"minArgs":0,"maxArgs":0}},"history":{"addUrl":{"minArgs":1,"maxArgs":1},"deleteAll":{"minArgs":0,"maxArgs":0},"deleteRange":{"minArgs":1,"maxArgs":1},"deleteUrl":{"minArgs":1,"maxArgs":1},"getVisits":{"minArgs":1,"maxArgs":1},"search":{"minArgs":1,"maxArgs":1}},"i18n":{"detectLanguage":{"minArgs":1,"maxArgs":1},"getAcceptLanguages":{"minArgs":0,"maxArgs":0}},"identity":{"launchWebAuthFlow":{"minArgs":1,"maxArgs":1}},"idle":{"queryState":{"minArgs":1,"maxArgs":1}},"management":{"get":{"minArgs":1,"maxArgs":1},"getAll":{"minArgs":0,"maxArgs":0},"getSelf":{"minArgs":0,"maxArgs":0},"setEnabled":{"minArgs":2,"maxArgs":2},"uninstallSelf":{"minArgs":0,"maxArgs":1}},"notifications":{"clear":{"minArgs":1,"maxArgs":1},"create":{"minArgs":1,"maxArgs":2},"getAll":{"minArgs":0,"maxArgs":0},"getPermissionLevel":{"minArgs":0,"maxArgs":0},"update":{"minArgs":2,"maxArgs":2}},"pageAction":{"getPopup":{"minArgs":1,"maxArgs":1},"getTitle":{"minArgs":1,"maxArgs":1},"hide":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setIcon":{"minArgs":1,"maxArgs":1},"setPopup":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"setTitle":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true},"show":{"minArgs":1,"maxArgs":1,"fallbackToNoCallback":true}},"permissions":{"contains":{"minArgs":1,"maxArgs":1},"getAll":{"minArgs":0,"maxArgs":0},"remove":{"minArgs":1,"maxArgs":1},"request":{"minArgs":1,"maxArgs":1}},"runtime":{"getBackgroundPage":{"minArgs":0,"maxArgs":0},"getPlatformInfo":{"minArgs":0,"maxArgs":0},"openOptionsPage":{"minArgs":0,"maxArgs":0},"requestUpdateCheck":{"minArgs":0,"maxArgs":0},"sendMessage":{"minArgs":1,"maxArgs":3},"sendNativeMessage":{"minArgs":2,"maxArgs":2},"setUninstallURL":{"minArgs":1,"maxArgs":1}},"sessions":{"getDevices":{"minArgs":0,"maxArgs":1},"getRecentlyClosed":{"minArgs":0,"maxArgs":1},"restore":{"minArgs":0,"maxArgs":1}},"storage":{"local":{"clear":{"minArgs":0,"maxArgs":0},"get":{"minArgs":0,"maxArgs":1},"getBytesInUse":{"minArgs":0,"maxArgs":1},"remove":{"minArgs":1,"maxArgs":1},"set":{"minArgs":1,"maxArgs":1}},"managed":{"get":{"minArgs":0,"maxArgs":1},"getBytesInUse":{"minArgs":0,"maxArgs":1}},"sync":{"clear":{"minArgs":0,"maxArgs":0},"get":{"minArgs":0,"maxArgs":1},"getBytesInUse":{"minArgs":0,"maxArgs":1},"remove":{"minArgs":1,"maxArgs":1},"set":{"minArgs":1,"maxArgs":1}}},"tabs":{"captureVisibleTab":{"minArgs":0,"maxArgs":2},"create":{"minArgs":1,"maxArgs":1},"detectLanguage":{"minArgs":0,"maxArgs":1},"discard":{"minArgs":0,"maxArgs":1},"duplicate":{"minArgs":1,"maxArgs":1},"executeScript":{"minArgs":1,"maxArgs":2},"get":{"minArgs":1,"maxArgs":1},"getCurrent":{"minArgs":0,"maxArgs":0},"getZoom":{"minArgs":0,"maxArgs":1},"getZoomSettings":{"minArgs":0,"maxArgs":1},"goBack":{"minArgs":0,"maxArgs":1},"goForward":{"minArgs":0,"maxArgs":1},"highlight":{"minArgs":1,"maxArgs":1},"insertCSS":{"minArgs":1,"maxArgs":2},"move":{"minArgs":2,"maxArgs":2},"query":{"minArgs":1,"maxArgs":1},"reload":{"minArgs":0,"maxArgs":2},"remove":{"minArgs":1,"maxArgs":1},"removeCSS":{"minArgs":1,"maxArgs":2},"sendMessage":{"minArgs":2,"maxArgs":3},"setZoom":{"minArgs":1,"maxArgs":2},"setZoomSettings":{"minArgs":1,"maxArgs":2},"update":{"minArgs":1,"maxArgs":2}},"topSites":{"get":{"minArgs":0,"maxArgs":0}},"webNavigation":{"getAllFrames":{"minArgs":1,"maxArgs":1},"getFrame":{"minArgs":1,"maxArgs":1}},"webRequest":{"handlerBehaviorChanged":{"minArgs":0,"maxArgs":0}},"windows":{"create":{"minArgs":0,"maxArgs":1},"get":{"minArgs":1,"maxArgs":2},"getAll":{"minArgs":0,"maxArgs":1},"getCurrent":{"minArgs":0,"maxArgs":1},"getLastFocused":{"minArgs":0,"maxArgs":1},"remove":{"minArgs":1,"maxArgs":1},"update":{"minArgs":2,"maxArgs":2}}}');

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	__webpack_require__(9973);
/******/ 	__webpack_require__(7240);
/******/ 	__webpack_require__(453);
/******/ 	__webpack_require__(8796);
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	__webpack_require__(7802);
/******/ 	__webpack_require__(1589);
/******/ 	__webpack_require__(1960);
/******/ 	__webpack_require__(2189);
/******/ 	__webpack_require__(5722);
/******/ 	__webpack_require__(8097);
/******/ 	__webpack_require__(8691);
/******/ 	__webpack_require__(8806);
/******/ 	__webpack_require__(7326);
/******/ 	__webpack_require__(4076);
/******/ 	__webpack_require__(4761);
/******/ 	__webpack_require__(4008);
/******/ 	__webpack_require__(5412);
/******/ 	__webpack_require__(8772);
/******/ 	__webpack_require__(9264);
/******/ 	__webpack_require__(1287);
/******/ 	__webpack_require__(2458);
/******/ 	__webpack_require__(6739);
/******/ 	__webpack_require__(3344);
/******/ 	__webpack_require__(8146);
/******/ 	__webpack_require__(8558);
/******/ 	var __webpack_exports__ = __webpack_require__(5997);
/******/ 	
/******/ })()
;
//# sourceMappingURL=abp-background.js.map