import"./_virtual_wxt-html-plugins-DPbbfBKe.js";import{o as l}from"./offscreen-i9sD5ilY.js";import"./_commonjsHelpers-BosuxZz1.js";let n;function i(e,u){let t="";return e=="2"?t=chrome.runtime.getURL("assets/sound/sound1.mp3"):e=="3"?t=chrome.runtime.getURL("assets/sound/sound2.mp3"):e=="4"&&(t=u||chrome.runtime.getURL("assets/sound/sound1.mp3")),t}function r(e){e==null&&(e=document.querySelector("audio")),m(e)}function s(e){const u=i(e.sound,e.soundurl),t=document.createElement("audio"),o=document.querySelector("audio");o&&(o.pause(),o.remove()),u&&(t.src=u,t.loop=e.pm_sound_til!="sound",t.volume=e.soundvolume,document.documentElement.appendChild(t),t.play(),e.pm_sound_til=="timeout"&&setTimeout(()=>{r(null)},e.pm_sound_timeout*1e3||5e3))}function d(){const e=document.querySelector("audio");m(e)}function m(e,u){if(!e)return;let t=e.volume;n=setInterval(function(){t>0?(t-=.05,e.volume=Math.max(t,0)):e!=null&&e.parentNode&&(clearInterval(n),e.pause(),e.parentNode.removeChild(e))},50)}l("startAudio",({data:e})=>{s(e)});l("stopAudio",()=>{d()});
