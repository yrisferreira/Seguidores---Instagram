/*!
 * Copyright UiPath 2024
 * This file contains code from WebPack - https://github.com/webpack/webpack - MIT license
 */
(()=>{"use strict";var __webpack_modules__=([,((__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.TimedMethodLogger=exports.MethodLogger=exports.ClassLogger=exports.FuncLogPrefix=exports.LogPrefix=exports.Logger=void 0;const tslib_1=__webpack_require__(2);const Timer_1=__webpack_require__(3);class Logger{}exports.Logger=Logger;Logger.Log=console.log.bind(console);Logger.Warn=console.warn.bind(console);Logger.Error=console.error.bind(console);class LogPrefix{constructor(...data){this.Log=Logger.Log.bind(Logger,...data);this.Warn=Logger.Warn.bind(Logger,...data);this.Error=Logger.Error.bind(Logger,...data)}}exports.LogPrefix=LogPrefix;class FuncLogPrefix{constructor(func){const functionPrefix="["+func.name+"]";this.Log=Logger.Log.bind(Logger,functionPrefix);this.Warn=Logger.Warn.bind(Logger,functionPrefix);this.Error=Logger.Error.bind(Logger,functionPrefix)}}exports.FuncLogPrefix=FuncLogPrefix;class ClassLogger{constructor(classFunc,...prefixArgs){this.className=classFunc.name;this.prefixArgs=prefixArgs}Log(method,...data){Logger.Log(this.GetMessagePrefix(method),...this.prefixArgs,...data)}Warn(method,...data){Logger.Warn(this.GetMessagePrefix(method),...this.prefixArgs,...data)}Error(method,...data){Logger.Error(this.GetMessagePrefix(method),...this.prefixArgs,...data)}GetMessagePrefix(method){return`[${this.className}.${method.name}]`}}exports.ClassLogger=ClassLogger;class MethodLogger{constructor(classLogger,method){this.classLogger=classLogger;this.method=method}Log(...args){this.classLogger.Log(this.method,...args)}Error(...args){this.classLogger.Error(this.method,...args)}Warn(...args){this.classLogger.Warn(this.method,...args)}DoTimed_Async(action){return tslib_1.__awaiter(this,void 0,void 0,function*(){let timedLogger=new TimedMethodLogger(this);try{let result=yield action();return result}finally{timedLogger.LogFinish()}})}DoTimed(action){let timedLogger=new TimedMethodLogger(this);try{return action()}finally{timedLogger.LogFinish()}}}exports.MethodLogger=MethodLogger;class TimedMethodLogger{constructor(methodLogger,...initialArgs){this.methodLogger=methodLogger;this.methodLogger.Log("Started...",...initialArgs);this.timer=new Timer_1.Timer}LogFinish(...args){this.methodLogger.Log(...args,"Finished!","durationMs:",this.timer.ElapsedTimeMs())}Log(...args){this.methodLogger.Log(...args,"durationMs:",this.timer.ElapsedTimeMs())}ErrorFinish(...args){this.methodLogger.Error(...args,"Finished!","durationMs:",this.timer.ElapsedTimeMs())}Error(...args){this.methodLogger.Error(...args,"durationMs:",this.timer.ElapsedTimeMs())}WarnFinish(...args){this.methodLogger.Warn(...args,"Finished!","durationMs:",this.timer.ElapsedTimeMs())}Warn(...args){this.methodLogger.Warn(...args,"durationMs:",this.timer.ElapsedTimeMs())}}exports.TimedMethodLogger=TimedMethodLogger}),((__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,{__assign:()=>(__assign),__asyncDelegator:()=>(__asyncDelegator),__asyncGenerator:()=>(__asyncGenerator),__asyncValues:()=>(__asyncValues),__await:()=>(__await),__awaiter:()=>(__awaiter),__classPrivateFieldGet:()=>(__classPrivateFieldGet),__classPrivateFieldSet:()=>(__classPrivateFieldSet),__createBinding:()=>(__createBinding),__decorate:()=>(__decorate),__exportStar:()=>(__exportStar),__extends:()=>(__extends),__generator:()=>(__generator),__importDefault:()=>(__importDefault),__importStar:()=>(__importStar),__makeTemplateObject:()=>(__makeTemplateObject),__metadata:()=>(__metadata),__param:()=>(__param),__read:()=>(__read),__rest:()=>(__rest),__spread:()=>(__spread),__spreadArray:()=>(__spreadArray),__spreadArrays:()=>(__spreadArrays),__values:()=>(__values)});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.
Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.
THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var extendStatics=function(d,b){extendStatics=Object.setPrototypeOf||({__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b})||function(d,b){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p))d[p]=b[p]};return extendStatics(d,b)};function __extends(d,b){if(typeof b!=="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};function __rest(s,e){var t={};for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0)t[p]=s[p];if(s!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++){if(e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i]))t[p[i]]=s[p[i]]}return t}function __decorate(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)if(d=decorators[i])r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r;return c>3&&r&&Object.defineProperty(target,key,r),r}function __param(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}}function __metadata(metadataKey,metadataValue){if(typeof Reflect==="object"&&typeof Reflect.metadata==="function")return Reflect.metadata(metadataKey,metadataValue)}function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator["throw"](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())})}function __generator(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),"throw":verb(1),"return":verb(2)},typeof Symbol==="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");while(_)try{if(f=1,y&&(t=op[0]&2?y["return"]:op[0]?y["throw"]||((t=y["return"])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||(op[1]>t[0]&&op[1]<t[3]))){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}var __createBinding=Object.create?(function(o,m,k,k2){if(k2===undefined)k2=k;Object.defineProperty(o,k2,{enumerable:true,get:function(){return m[k]}})}):(function(o,m,k,k2){if(k2===undefined)k2=k;o[k2]=m[k]});function __exportStar(m,o){for(var p in m)if(p!=="default"&&!Object.prototype.hasOwnProperty.call(o,p))__createBinding(o,m,p)}function __values(o){var s=typeof Symbol==="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length==="number")return{next:function(){if(o&&i>=o.length)o=void 0;return{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.");}function __read(o,n){var m=typeof Symbol==="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{while((n===void 0||n-->0)&&!(r=i.next()).done)ar.push(r.value)}catch(error){e={error:error}}finally{try{if(r&&!r.done&&(m=i["return"]))m.call(i)}finally{if(e)throw e.error;}}return ar}function __spread(){for(var ar=[],i=0;i<arguments.length;i++)ar=ar.concat(__read(arguments[i]));return ar}function __spreadArrays(){for(var s=0,i=0,il=arguments.length;i<il;i++)s+=arguments[i].length;for(var r=Array(s),k=0,i=0;i<il;i++)for(var a=arguments[i],j=0,jl=a.length;j<jl;j++,k++)r[k]=a[j];return r}function __spreadArray(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++){if(ar||!(i in from)){if(!ar)ar=Array.prototype.slice.call(from,0,i);ar[i]=from[i]}}return to.concat(ar||Array.prototype.slice.call(from))}function __await(v){return this instanceof __await?(this.v=v,this):new __await(v)}function __asyncGenerator(thisArg,_arguments,generator){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var g=generator.apply(thisArg,_arguments||[]),i,q=[];return i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i;function verb(n){if(g[n])i[n]=function(v){return new Promise(function(a,b){q.push([n,v,a,b])>1||resume(n,v)})}}function resume(n,v){try{step(g[n](v))}catch(e){settle(q[0][3],e)}}function step(r){r.value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(q[0][2],r)}function fulfill(value){resume("next",value)}function reject(value){resume("throw",value)}function settle(f,v){if(f(v),q.shift(),q.length)resume(q[0][0],q[0][1])}}function __asyncDelegator(o){var i,p;return i={},verb("next"),verb("throw",function(e){throw e;}),verb("return"),i[Symbol.iterator]=function(){return this},i;function verb(n,f){i[n]=o[n]?function(v){return(p=!p)?{value:__await(o[n](v)),done:n==="return"}:f?f(v):v}:f}}function __asyncValues(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var m=o[Symbol.asyncIterator],i;return m?m.call(o):(o=typeof __values==="function"?__values(o):o[Symbol.iterator](),i={},verb("next"),verb("throw"),verb("return"),i[Symbol.asyncIterator]=function(){return this},i);function verb(n){i[n]=o[n]&&function(v){return new Promise(function(resolve,reject){v=o[n](v),settle(resolve,reject,v.done,v.value)})}}function settle(resolve,reject,d,v){Promise.resolve(v).then(function(v){resolve({value:v,done:d})},reject)}}function __makeTemplateObject(cooked,raw){if(Object.defineProperty){Object.defineProperty(cooked,"raw",{value:raw})}else{cooked.raw=raw}return cooked};var __setModuleDefault=Object.create?(function(o,v){Object.defineProperty(o,"default",{enumerable:true,value:v})}):function(o,v){o["default"]=v};function __importStar(mod){if(mod&&mod.__esModule)return mod;var result={};if(mod!=null)for(var k in mod)if(k!=="default"&&Object.prototype.hasOwnProperty.call(mod,k))__createBinding(result,mod,k);__setModuleDefault(result,mod);return result}function __importDefault(mod){return(mod&&mod.__esModule)?mod:{default:mod}}function __classPrivateFieldGet(receiver,state,kind,f){if(kind==="a"&&!f)throw new TypeError("Private accessor was defined without a getter");if(typeof state==="function"?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot read private member from an object whose class did not declare it");return kind==="m"?f:kind==="a"?f.call(receiver):f?f.value:state.get(receiver)}function __classPrivateFieldSet(receiver,state,value,kind,f){if(kind==="m")throw new TypeError("Private method is not writable");if(kind==="a"&&!f)throw new TypeError("Private accessor was defined without a setter");if(typeof state==="function"?receiver!==state||!f:!state.has(receiver))throw new TypeError("Cannot write private member to an object whose class did not declare it");return(kind==="a"?f.call(receiver,value):f?f.value=value:state.set(receiver,value)),value}}),((__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.Timer=void 0;const BrowserTools_1=__webpack_require__(4);class Timer{constructor(){this.startTimeMs=BrowserTools_1.BrowserTools.GetGlobalThis().performance.now()}ElapsedTimeMs(){return Math.ceil(BrowserTools_1.BrowserTools.GetGlobalThis().performance.now()-this.startTimeMs)}}exports.Timer=Timer}),((__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.BrowserTools=void 0;const Logger_1=__webpack_require__(1);const StringTools_1=__webpack_require__(5);const Tools_1=__webpack_require__(6);var BrowserTools;(function(BrowserTools){function GetTabWindowInfo_Async(tabs){let finalResults=[];let mapWindowIdToRequestInfos={};let windowIdsToCheck={};for(let tab of tabs){let info={tab:tab,window:null};finalResults.push(info);let requestedInfos=mapWindowIdToRequestInfos[tab.windowId];if(!requestedInfos){requestedInfos=[];mapWindowIdToRequestInfos[tab.windowId]=requestedInfos;windowIdsToCheck[tab.windowId]=true}requestedInfos.push(info)}return Tools_1.Tools.ToPromise(resolvePromiseCb=>{chrome.windows.getAll(allWindows=>{for(let window of allWindows){if(Tools_1.Tools.isNil(window.id)||!windowIdsToCheck[window.id]){continue}let requestedInfos=mapWindowIdToRequestInfos[window.id];for(let requestInfo of requestedInfos){requestInfo.window=window}}resolvePromiseCb(finalResults)})})}BrowserTools.GetTabWindowInfo_Async=GetTabWindowInfo_Async;function ForAllParallel(values,processValueCb,onCompletedAllCb){var OnAllCompleted=()=>{if(onCompletedAllCb){onCompletedAllCb()}};var valuesCount=values?values.length:0;if(valuesCount==0){OnAllCompleted();return}let remainingValues=values.length;let OnValueProcessed=()=>{--remainingValues;if(remainingValues<=0){OnAllCompleted()}};for(let value of values){try{processValueCb(value,()=>{OnValueProcessed()})}catch(ex){Logger_1.Logger.Error(String(ex));OnValueProcessed()}}}BrowserTools.ForAllParallel=ForAllParallel;function ForAllSequential(values,processValueCb,onCompletedAllCb){let valueIndex=0;const doNextAction=function(){if(valueIndex>=values.length){if(onCompletedAllCb){onCompletedAllCb()}return}processValueCb(values[valueIndex++],function(){doNextAction()})};doNextAction()}BrowserTools.ForAllSequential=ForAllSequential;function IsBrowserSettingsUrl(url){if(url==null){return false}if(Tools_1.Tools.StringStartsWith(url,"about:blank")){return false}if(Tools_1.Tools.StringStartsWith(url,"chrome://")||Tools_1.Tools.StringStartsWith(url,"chrome-extension://")){return true}if(Tools_1.Tools.StringStartsWith(url,"edge://")||Tools_1.Tools.StringStartsWith(url,"edge-extension://")){return true}if(Tools_1.Tools.StringStartsWith(url,"about:")){return true}return false}BrowserTools.IsBrowserSettingsUrl=IsBrowserSettingsUrl;function GetTabsWithUrl(tabs,targetUrl){let matchedTabs=[];for(let tab of tabs){if(TabHasUrl(tab,targetUrl)){matchedTabs.push(tab)}}return matchedTabs}BrowserTools.GetTabsWithUrl=GetTabsWithUrl;function ExcludeTabsWithUrl(tabs,targetUrl){let matchedTabs=[];for(let tab of tabs){if(!TabHasUrl(tab,targetUrl)){matchedTabs.push(tab)}}return matchedTabs}BrowserTools.ExcludeTabsWithUrl=ExcludeTabsWithUrl;function IsBackgroundPageTab(tab){let backgroundPageUrl=chrome.runtime.getURL("BackgroundPage.html");return TabHasUrl(tab,backgroundPageUrl)}BrowserTools.IsBackgroundPageTab=IsBackgroundPageTab;function TabHasUrl(tab,targetUrl){var _a;let tabUrl=(_a=tab.url)!==null&&_a!==void 0?_a:"";return StringTools_1.StringTools.AreEqual(targetUrl,tabUrl,true)}BrowserTools.TabHasUrl=TabHasUrl;function IsAccessibleTab(tabId,onResultCb){chrome.tabs.get(tabId,tab=>{let canAccessUrl=tab&&!Tools_1.Tools.isNil(tab.url)&&!BrowserTools.IsBrowserSettingsUrl(tab.url);onResultCb(canAccessUrl,tab)})}BrowserTools.IsAccessibleTab=IsAccessibleTab;function IsFirefoxBrowser(){let globalThis=BrowserTools.GetGlobalThis();let isFirefox=(globalThis["mozInnerScreenX"]!==undefined);return isFirefox}BrowserTools.IsFirefoxBrowser=IsFirefoxBrowser;function IsChromeBrowser(){let isChromeBrowser=true;if(IsFirefoxBrowser()){isChromeBrowser=false}return isChromeBrowser}BrowserTools.IsChromeBrowser=IsChromeBrowser;function GetGlobalThis(){return globalThis}BrowserTools.GetGlobalThis=GetGlobalThis;function GetDefaultTab(){return{index:-1,title:"",url:"",pinned:false,highlighted:false,windowId:-1,active:false,id:-1,incognito:false,selected:false,discarded:false,autoDiscardable:false,groupId:-1}}BrowserTools.GetDefaultTab=GetDefaultTab;function GetBrowserWindowData(wnd){var _a,_b,_c,_d,_e,_f;let windowData={windowId:(_a=wnd.id)!==null&&_a!==void 0?_a:0,windowX:(_b=wnd.left)!==null&&_b!==void 0?_b:0,windowY:(_c=wnd.top)!==null&&_c!==void 0?_c:0,windowWidth:(_d=wnd.width)!==null&&_d!==void 0?_d:0,windowHeight:(_e=wnd.height)!==null&&_e!==void 0?_e:0,windowState:(_f=wnd.state)!==null&&_f!==void 0?_f:""};return windowData}BrowserTools.GetBrowserWindowData=GetBrowserWindowData;function WrapWithChromeLastError(lastErrorMsg,actionCb){let logger=new Logger_1.LogPrefix("[WrapWithChromeLastError]");if(chrome.runtime.lastError){logger.Warn("Removing existing chrome.runtime.lastError:",chrome.runtime.lastError.message);delete chrome.runtime.lastError}logger.Log("Setting chrome.runtime.lastError:",lastErrorMsg);chrome.runtime.lastError={message:lastErrorMsg};try{actionCb()}finally{delete chrome.runtime.lastError}}BrowserTools.WrapWithChromeLastError=WrapWithChromeLastError;function _ValidatePermissions(){if(chrome.cookies&&chrome.cookies.getAllCookieStores){chrome.cookies.getAllCookieStores(function(cookieStores){if(!cookieStores){return}for(var i=0;i<cookieStores.length;++i){Logger_1.Logger.Log("Cookie Store Id: "+cookieStores[i].id)}})}if(chrome.webNavigation&&chrome.webNavigation.getAllFrames){chrome.tabs.query({active:true},function(tabs){var _a;if(!tabs||tabs.length===0){return}var activeTab=tabs[0];chrome.webNavigation.getAllFrames({tabId:(_a=activeTab===null||activeTab===void 0?void 0:activeTab.id)!==null&&_a!==void 0?_a:0},function(detailsArray){if(!detailsArray||detailsArray.length===0){return}var activeFrameDetails=detailsArray[0];Logger_1.Logger.Log("Active Tab Frame URL: "+activeFrameDetails.url)})})}if(chrome.debugger&&chrome.debugger.getTargets){chrome.debugger.getTargets(function(targets){if(!targets){return}for(var i=0;i<targets.length;++i){Logger_1.Logger.Log("Debug Target Id: "+targets[i].id)}})}}BrowserTools._ValidatePermissions=_ValidatePermissions})(BrowserTools=exports.BrowserTools||(exports.BrowserTools={}))}),((__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.StringTools=void 0;var StringTools;(function(StringTools){function AreEqual(valueA,valueB,ignoreCase){if(valueA===valueB){return true}else if(!valueA||!valueB){return false}if(ignoreCase){valueA=valueA.toLowerCase();valueB=valueB.toLowerCase()}return(valueA===valueB)}StringTools.AreEqual=AreEqual;function AreEqualAsCode(valueA,valueB,ignoreCase){valueA=valueA.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,'');valueB=valueB.replace(/\/\*[\s\S]*?\*\/|\/\/.*/g,'');valueA=valueA.replace(/[^a-zA-Z0-9]+/g,'');valueB=valueB.replace(/[^a-zA-Z0-9]+/g,'');return AreEqual(valueA,valueB,ignoreCase)}StringTools.AreEqualAsCode=AreEqualAsCode;function SafeReplaceString(str,valueToReplace,replacement){let startIndex=str.indexOf(valueToReplace);let beginStr=str.slice(0,startIndex);let endStr=str.slice(startIndex+valueToReplace.length);let result=beginStr;result+=replacement;result+=endStr;return result}StringTools.SafeReplaceString=SafeReplaceString;function Contains(str,subStringToCheck){return str.indexOf(subStringToCheck)>=0}StringTools.Contains=Contains;function GetFunctionBody(func){const functionCode=func.toString();const openBracketIndex=functionCode.indexOf("{");const closeBracketIndex=functionCode.lastIndexOf("}");const functionBody=functionCode.substring(openBracketIndex+1,closeBracketIndex);return functionBody}StringTools.GetFunctionBody=GetFunctionBody})(StringTools=exports.StringTools||(exports.StringTools={}))}),((__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.Tools=void 0;var Tools;(function(Tools){function IsFunction(value){return(typeof(value)==="function")}Tools.IsFunction=IsFunction;function isNil(value){return value===null||value===undefined}Tools.isNil=isNil;function IsDefined(value){return!isNil(value)}Tools.IsDefined=IsDefined;function IsUndefined(type){return type==="undefined"}Tools.IsUndefined=IsUndefined;function UnsafeCast(value){return value}Tools.UnsafeCast=UnsafeCast;function ToPromise(actionWithCallback){let promise=new Promise(resolvePromiseCb=>{actionWithCallback(resolvePromiseCb)});return promise}Tools.ToPromise=ToPromise;function ToTimedPromise(actionWithCallback,timeoutMs){return Promise.race([ToPromise(actionWithCallback),new Promise((_resolvePromiseCb,rejectPromiseCb)=>{setTimeout(()=>{rejectPromiseCb("Action timeout out!")},timeoutMs)})])}Tools.ToTimedPromise=ToTimedPromise;function SafeIncrementWithWrapAround(value){if(value>=Number.MAX_SAFE_INTEGER){value=0}return(value+1)}Tools.SafeIncrementWithWrapAround=SafeIncrementWithWrapAround;let LoopAction;(function(LoopAction){LoopAction[LoopAction["Stop"]=0]="Stop";LoopAction[LoopAction["Continue"]=1]="Continue"})(LoopAction=Tools.LoopAction||(Tools.LoopAction={}));function RetryWithTimeout(actionCb,timeoutMs){let wrapperFunc=()=>{let loopAction=actionCb();if(loopAction===LoopAction.Continue){setTimeout(wrapperFunc,timeoutMs)}};wrapperFunc()}Tools.RetryWithTimeout=RetryWithTimeout;function RetryWithTimeoutAsync(actionCb,timeoutMs){let wrapperFunc=()=>{actionCb().then(loopAction=>{if(loopAction===LoopAction.Continue){setTimeout(wrapperFunc,timeoutMs)}})};wrapperFunc()}Tools.RetryWithTimeoutAsync=RetryWithTimeoutAsync;function StringStartsWith(value,prefix){return(value.indexOf(prefix)===0)}Tools.StringStartsWith=StringStartsWith;function UiRect(left,top,width,height){let obj={left:left,top:top,right:left+width,bottom:top+height,getWidth:function(){return this.right-this.left},getHeight:function(){return this.bottom-this.top},Intersects:function(rc2){return(this.right>rc2.left&&this.left<rc2.right)&&(this.bottom>rc2.top&&this.top<rc2.bottom)},Intersection:function(rc2){if(!this.Intersects(rc2))return UiRect(0,0,0,0);var left=Math.max(this.left,rc2.left);var top=Math.max(this.top,rc2.top);var right=Math.min(this.right,rc2.right);var bottom=Math.min(this.bottom,rc2.bottom);return UiRect(left,top,right-left,bottom-top)},Contains:function(point){return((point.x>=this.left&&point.x<=this.right)&&(point.y>=this.top&&point.y<=this.bottom))},Scale:function(factor){return UiRect(this.left*factor,this.top*factor,this.getWidth()*factor,this.getHeight()*factor)},ScaleInv:function(factor){return UiRect(this.left/factor,this.top/factor,this.getWidth()/factor,this.getHeight()/factor)},IsEqual:function(rc2){return this.left===rc2.left&&this.top===rc2.top&&this.right===rc2.right&&this.bottom===rc2.bottom},Offset:function(dx,dy){return UiRect(this.left+dx,this.top+dy,this.getWidth(),this.getHeight())},MathRound:function(){return UiRect(Math.round(this.left),Math.round(this.top),Math.round(this.getWidth()),Math.round(this.getHeight()))},MathCeil:function(){return UiRect(Math.ceil(this.left),Math.ceil(this.top),Math.ceil(this.getWidth()),Math.ceil(this.getHeight()))},Union:function(rc2){var resultLeft=Math.min(this.left,rc2.left);var resultTop=Math.min(this.top,rc2.top);var resultRight=Math.max(this.right,rc2.right);var resultBottom=Math.max(this.bottom,rc2.bottom);return UiRect(resultLeft,resultTop,resultRight-resultLeft,resultBottom-resultTop)},ContainsRect:function(rc2){var p1={x:rc2.left,y:rc2.top};var p2={x:rc2.left,y:rc2.bottom};var p3={x:rc2.right,y:rc2.top};var p4={x:rc2.right,y:rc2.bottom};return this.Contains(p1)&&this.Contains(p2)&&this.Contains(p3)&&this.Contains(p4)},TopLeft:function(){return{x:this.left,y:this.top}},BottomRight:function(){return{x:this.right,y:this.bottom}},AsBounds:function(){return{top:this.top,left:this.left,right:this.right,bottom:this.bottom}},toString:function(){return"("+left+" "+top+" "+width+" "+height+")"}};return obj}Tools.UiRect=UiRect})(Tools=exports.Tools||(exports.Tools={}))}),,,((__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.ExtensionConfigService=void 0;const Tools_1=__webpack_require__(6);const EXTENSION_CONFIG_STUDIO_DESKTOP="WebStore_StudioDesktop";const EXTENSION_CONFIG_STUDIO_WEB="WebStore_StudioWeb";const EXTENSION_CONFIG_SELF_HOSTED="SelfHosted_StudioDesktop";class ExtensionConfigService{static GetConfig(){const extensionConfigName=this.GetConfigName();if(extensionConfigName===EXTENSION_CONFIG_STUDIO_DESKTOP){return this.studioDesktopConfig}else if(extensionConfigName===EXTENSION_CONFIG_STUDIO_WEB){return this.studioWebConfig}else if(extensionConfigName===EXTENSION_CONFIG_SELF_HOSTED){return this.selfHostedConfig}else{let unhandledType=extensionConfigName;return this.studioDesktopConfig}}static GetConfigName(){if(Tools_1.Tools.IsUndefined(typeof "WebStore_StudioWeb")){return EXTENSION_CONFIG_STUDIO_DESKTOP}return "WebStore_StudioWeb"}}exports.ExtensionConfigService=ExtensionConfigService;ExtensionConfigService.selfHostedConfig={AllowInteropWithStudioWeb:false,AllowExtensionAutoUpdate:false,AllowInteropWithNativeHostsOnWindows:true,RegisterContentEventListeners:false};ExtensionConfigService.studioDesktopConfig={AllowInteropWithStudioWeb:false,AllowExtensionAutoUpdate:false,AllowInteropWithNativeHostsOnWindows:true,RegisterContentEventListeners:false};ExtensionConfigService.studioWebConfig={AllowInteropWithStudioWeb:true,AllowExtensionAutoUpdate:false,AllowInteropWithNativeHostsOnWindows:false,RegisterContentEventListeners:true}}),((__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.ContentEventListeners=void 0;class ContentEventListeners{constructor(){this.m_externalEventHandler=null;this.m_eventListener=this.EventListener.bind(this);this.RegisterMouseEventHandlers();this.RegisterKeyboardEventHandlers();this.RegisterPassiveEventHandlers();this.RegisterFocusEventHandlers()}RegisterExternalEventHandler(eventHandler){this.m_externalEventHandler=eventHandler}UnregisterExternalEventHandler(){this.m_externalEventHandler=null}GetExternalEventHandler(){return this.m_externalEventHandler}RegisterMouseEventHandlers(){for(let eventType of ContentEventListeners.MouseEventTypes){this.RegisterEventHandler(eventType)}}RegisterKeyboardEventHandlers(){for(let eventType of ContentEventListeners.KeyboardEventTypes){this.RegisterEventHandler(eventType)}}RegisterFocusEventHandlers(){for(let eventType of ContentEventListeners.FocusEventTypes){this.RegisterEventHandler(eventType)}}RegisterPassiveEventHandlers(){let supportsPassive=this.DoesBrowserSupportPassiveEvents();for(let eventType of ContentEventListeners.PassiveEventTypes){if(supportsPassive){this.RegisterPassiveEventHandler(eventType)}else{this.RegisterEventHandler(eventType)}}}DoesBrowserSupportPassiveEvents(){let supportsPassive=false;try{let opts=Object.defineProperty({},'passive',{get:function(){supportsPassive=true}});let emptyListener=()=>{};window.addEventListener("testPassive",emptyListener,opts);window.removeEventListener("testPassive",emptyListener,opts)}catch(e){}return supportsPassive}RegisterEventHandler(eventType){window.addEventListener(eventType,this.m_eventListener,true);window.addEventListener(eventType,this.m_eventListener,false)}RegisterPassiveEventHandler(eventType){window.addEventListener(eventType,this.m_eventListener,{passive:true,capture:true});window.addEventListener(eventType,this.m_eventListener,{passive:true,capture:false})}EventListener(event){if(this.m_externalEventHandler&&this.m_externalEventHandler[event.type]){this.m_externalEventHandler[event.type](event)}}}exports.ContentEventListeners=ContentEventListeners;ContentEventListeners.MouseEventTypes=["mousedown","mouseup","mouseout","mouseover","mousemove","mouseenter","mouseleave","click","dblclick","contextmenu"];ContentEventListeners.KeyboardEventTypes=["keydown","keypress","keyup"];ContentEventListeners.PassiveEventTypes=["mousewheel","wheel","scroll"];ContentEventListeners.FocusEventTypes=["focus","focusin","blur","focusout"]}),((__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.ContentPackageManager=void 0;const BrowserTools_1=__webpack_require__(4);const ContentTarget_1=__webpack_require__(12);const Logger_1=__webpack_require__(1);const ContentDriverPackage_1=__webpack_require__(13);class ContentPackageManager{constructor(){this.target=new ContentTarget_1.ContentTarget(0,0);this.sharedStateFromPreviousDriver=null;this.driverPackagesCache=new Map;this.activeDriver=null;this.tab=BrowserTools_1.BrowserTools.GetDefaultTab();this.classLogger=new Logger_1.ClassLogger(ContentPackageManager)}SetTabInfo(target,tab){this.target=target;this.tab=tab}ActivateDriver(driverVersion){var _a;if(((_a=this.activeDriver)===null||_a===void 0?void 0:_a.GetVersion())==driverVersion){return this.activeDriver}let requestedDriverPackage=this.GetDriverPackage(driverVersion);if(!requestedDriverPackage){return null}if(this.activeDriver){this.DeactivateDriver(this.activeDriver.GetVersion())}this.activeDriver=requestedDriverPackage;requestedDriverPackage.Activate(this.sharedStateFromPreviousDriver,this.tab);this.classLogger.Log(this.ActivateDriver,"target:",this.target.toString(),"driverVersion:",driverVersion);return requestedDriverPackage}DeactivateDriver(driverVersionToDeactivate){if(!this.activeDriver){return}let previousVersion=this.activeDriver.GetVersion();if(previousVersion===driverVersionToDeactivate){this.classLogger.Log(this.DeactivateDriver,"target:",this.target.toString(),"driverVersion:",driverVersionToDeactivate);this.sharedStateFromPreviousDriver=this.activeDriver.DeactivateAndGetSharedState(this.tab);this.activeDriver=null}}GetDriverPackage(driverVersion){let requestedDriverPackage=this.driverPackagesCache.get(driverVersion);if(!requestedDriverPackage){requestedDriverPackage=this.GetDriverPackageFromGlobalCache(driverVersion);if(requestedDriverPackage){this.driverPackagesCache.set(driverVersion,requestedDriverPackage)}}if(!requestedDriverPackage){return null}return requestedDriverPackage}GetDriverPackageFromGlobalCache(version){let driverAdapterGlobalsCache=window["__uiPathContent"];if(!driverAdapterGlobalsCache){return undefined}let driverAdapter=driverAdapterGlobalsCache[version];if(!driverAdapter){this.classLogger.Log(this.GetDriverPackageFromGlobalCache,"No entry found for version:",version);return undefined}return new ContentDriverPackage_1.ContentDriverPackage(version,driverAdapter)}}exports.ContentPackageManager=ContentPackageManager}),((__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.ContentTarget=void 0;class ContentTarget{constructor(tabId,frameId){this.TabId=tabId;this.FrameId=frameId}toString(){return`{ TabId: ${this.TabId}, FrameId: ${this.FrameId}}`}Equals(other){return(this.TabId==other.TabId)&&(this.FrameId==other.FrameId)}}exports.ContentTarget=ContentTarget}),((__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.ContentDriverPackage=void 0;const InjectAndRunJS_AdapterToMV3_1=__webpack_require__(14);const Logger_1=__webpack_require__(1);const DriverVersion_1=__webpack_require__(16);class ContentDriverPackage{constructor(version,driverAdapter){this.classLogger=new Logger_1.ClassLogger(ContentDriverPackage);this.sharedStateFromPreviousDriver=null;this.version=version;this.detailedVersion=DriverVersion_1.DriverVersion.FromVersionString(version);this.isDriverOlder_Than_v23_12=this.IsDriverOlder_Than_v23_12(this.detailedVersion);this.driverAdapter=driverAdapter}GetVersion(){return this.version}Activate(sharedStateFromPreviousDriver,tab){if(sharedStateFromPreviousDriver){this.sharedStateFromPreviousDriver=sharedStateFromPreviousDriver;if(this.driverAdapter.AdapterType===0){this.driverAdapter.SetSharedState(sharedStateFromPreviousDriver)}}let globalContext=this.driverAdapter.GetGlobalContext();if((globalContext!=null)&&this.isDriverOlder_Than_v23_12){this.classLogger.Log(this.Activate,"Registering window.g_globalContext for Driver version:",this.version);window["g_globalContext"]=globalContext}this.driverAdapter.Activate(tab)}DeactivateAndGetSharedState(tab){let sharedState=this.sharedStateFromPreviousDriver;if(this.driverAdapter.AdapterType===0){sharedState=this.driverAdapter.GetSharedState()}this.driverAdapter.Deactivate(tab);return sharedState}ExecuteRequest(requestData,sender,sendRespose){return this.driverAdapter.ExecuteRequest(requestData,sender,sendRespose)}ExecuteScript(scriptName){let scriptFunc=undefined;if(this.driverAdapter.AdapterType===0){let requestMap=this.driverAdapter.GetDriverRequestMap();scriptFunc=requestMap[scriptName]}if(!scriptFunc){this.classLogger.Error(this.ExecuteScript,"Could not find script: "+scriptName);return{ReturnCode:3}}try{scriptFunc();return{ReturnCode:1}}catch(ex){this.classLogger.Error(this.ExecuteScript,"Executing script:",scriptName,"has thrown:",String(ex));return{ReturnCode:3}}}ExecuteInlineCode(requestId){let scriptFunc=null;if(this.driverAdapter.AdapterType===0){let inlineCodeMap=this.driverAdapter.GetDriverInlineRequests();switch(requestId){case 1:scriptFunc=inlineCodeMap.GetCrossFrameOriginInfo;break;case 2:scriptFunc=inlineCodeMap.GetWindowName;break;case 3:scriptFunc=inlineCodeMap.IsTabAccessible;break;case 4:scriptFunc=inlineCodeMap.EnableTracing;break;default:{let unhandledType=requestId;this.classLogger.Error(this.ExecuteInlineCode,"unhandledType:",unhandledType)}break}}if(!scriptFunc){this.classLogger.Error(this.ExecuteInlineCode,"Could not find script: ",requestId);return{ReturnCode:3,ResponseData:undefined}}try{let result=scriptFunc();return{ReturnCode:1,ResponseData:result}}catch(ex){this.classLogger.Error(this.ExecuteInlineCode,"Executing script: ",requestId,"has thrown: ",String(ex));return{ReturnCode:3,ResponseData:undefined}}}ExecuteInjectJs(request){if(this.driverAdapter.AdapterType!==0){return{ReturnCode:3}}let gcontext=this.GetInjectJsDriverContext(this.driverAdapter);let response=(0,InjectAndRunJS_AdapterToMV3_1.InjectAndRunJS_AdapterToMV3)(this.driverAdapter.InjectJsRequests,gcontext,request.InjectJsData);return{ReturnCode:1,ResponseData:response}}GetInjectJsDriverContext(adapter){var _a;let getElementFromCustomId=(_a=adapter.GetGlobalContext())===null||_a===void 0?void 0:_a.GetElementFromCustomId;let customIdCache=this.GetDriverCustomIdCache(adapter);let gcontext={TraceMessage:msg=>{Logger_1.Logger.Log(msg)},TraceError:msg=>{Logger_1.Logger.Error(msg)},GetElementFromCustomId:id=>{if(getElementFromCustomId){return getElementFromCustomId(id)}else{return customIdCache[id]}}};return gcontext}GetDriverCustomIdCache(adapter){let customIdCache=adapter.GetSharedState().ElementCacheData.CustomIdCache;if(!customIdCache){customIdCache={}}return customIdCache}IsDriverOlder_Than_v23_12(driverVersion){const v23_12={versionMajor:23,versionMinor:12,buildNumberMajor:0,buildNumberMinor:0};return driverVersion.IsOlderThan(v23_12)}}exports.ContentDriverPackage=ContentDriverPackage}),((__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.Get_InjectJs_EvalWrapper=exports.InjectAndRunJS_AdapterToMV3=void 0;const ContentDriverContracts_1=__webpack_require__(15);const StringTools_1=__webpack_require__(5);function InjectAndRunJS_AdapterToMV3(injectJsRequests,gcontext,message){var _a;const N_FALSE=0;const N_TRUE=1;let getRetValueForScriptException=hasThrown=>{let hasExceptionRetCode=N_TRUE;let hasNoExceptionRetCode=N_FALSE;if(!message.hasFixForIsScriptErr){hasExceptionRetCode=N_FALSE;hasNoExceptionRetCode=N_TRUE}return hasThrown?hasExceptionRetCode:hasNoExceptionRetCode};let makeResponse_Success=result=>{return{result:result,retCode:N_TRUE,isScriptErr:getRetValueForScriptException(false)}};let makeResponse_ScriptSyntaxError=errMsg=>{return{result:errMsg,retCode:N_TRUE,isScriptErr:N_TRUE}};let makeResponse_ScriptHasThrown=errMsg=>{return{result:errMsg,retCode:N_TRUE,isScriptErr:getRetValueForScriptException(true)}};let makeResponse_RequestError=()=>{return{result:"",retCode:N_FALSE,isScriptErr:N_FALSE}};if(message.evalInjectJsErrorMsg){return makeResponse_ScriptSyntaxError(message.evalInjectJsErrorMsg)}try{let targetElement=null;if(message.customId.length!==0){targetElement=(_a=gcontext.GetElementFromCustomId(message.customId))!==null&&_a!==void 0?_a:null;if(!targetElement){gcontext.TraceMessage("[InjectAndRunJS_AdapterToMV3] customId="+message.customId+" not found in the cache");return makeResponse_RequestError()}}let injectJsFunc=GetInjectJsScriptFromId(injectJsRequests,message.requestId);if(!injectJsFunc){gcontext.TraceError("[InjectAndRunJS_AdapterToMV3] No script available for request id: "+message.requestId);return makeResponse_RequestError()}try{gcontext.TraceMessage("[InjectAndRunJS_AdapterToMV3] Calling WrapperFunction");let result=injectJsFunc(targetElement,message.inputData,message.tabId);let out_value=(result==null)?result:String(result);return makeResponse_Success(out_value)}catch(ex){let errAsString=String(ex);gcontext.TraceError("[InjectAndRunJS_AdapterToMV3] WrapperFunc exception: "+errAsString);return makeResponse_ScriptHasThrown(errAsString)}}catch(e){gcontext.TraceError("[InjectAndRunJS_AdapterToMV3] exception: "+e);return makeResponse_RequestError()}}exports.InjectAndRunJS_AdapterToMV3=InjectAndRunJS_AdapterToMV3;function GetInjectJsScriptFromId(injectJsRequests,requestId){let func;switch(requestId){case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.Invalid:func=undefined;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.SetHighlight:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.SetHighlight;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.SetHighlightModern:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.SetHighlightModern;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.SetHighlightModernV2:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.SetHighlightModernV2;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.RemoveHighlight:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.RemoveHighlight;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.RemoveHighlightModern:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.RemoveHighlightModern;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.IsTableHeader:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.IsTableHeader;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.IsVisibleFromStyle:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.IsVisibleFromStyle;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.IsVisibleFromStyleModern:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.IsVisibleFromStyleModern;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.ScrollNative:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.ScrollNative;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.MatchCssSelector:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.MatchCssSelector;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.ExtractMetadata:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.ExtractMetadata;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.ExtractData:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.ExtractData;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.ExtractDataCleanup:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.ExtractDataCleanup;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.IsVisible:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.IsVisible;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.SelectMultiple:func=injectJsRequests===null||injectJsRequests===void 0?void 0:injectJsRequests.SelectMultiple;break;case ContentDriverContracts_1.ContentDriver.InjectJsScriptRequestId.EvaluatedInjectJsFunc:func=window["g_eval_Content_InjectJsFunc"];window["g_eval_Content_InjectJsFunc"]=null;break;default:let _unhandledType=requestId;break}return func}function Get_InjectJs_EvalWrapper(clientFuncCodeToEval){let __clientFuncCodeToEval=()=>{};let functionTemplate=function(){window["g_eval_Content_InjectJsFunc"]=function(targetElement,inputData,tabId){let clientFunc=__clientFuncCodeToEval;return clientFunc(targetElement,inputData,tabId)}};let template=StringTools_1.StringTools.GetFunctionBody(functionTemplate);let evalWrapper=StringTools_1.StringTools.SafeReplaceString(template,"__clientFuncCodeToEval",clientFuncCodeToEval);return evalWrapper}exports.Get_InjectJs_EvalWrapper=Get_InjectJs_EvalWrapper}),((__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.ContentDriver=void 0;var ContentDriver;(function(ContentDriver){let InjectJsScriptRequestId;(function(InjectJsScriptRequestId){InjectJsScriptRequestId[InjectJsScriptRequestId["Invalid"]=0]="Invalid";InjectJsScriptRequestId[InjectJsScriptRequestId["SetHighlight"]=1]="SetHighlight";InjectJsScriptRequestId[InjectJsScriptRequestId["SetHighlightModern"]=2]="SetHighlightModern";InjectJsScriptRequestId[InjectJsScriptRequestId["SetHighlightModernV2"]=3]="SetHighlightModernV2";InjectJsScriptRequestId[InjectJsScriptRequestId["RemoveHighlight"]=4]="RemoveHighlight";InjectJsScriptRequestId[InjectJsScriptRequestId["RemoveHighlightModern"]=5]="RemoveHighlightModern";InjectJsScriptRequestId[InjectJsScriptRequestId["IsTableHeader"]=6]="IsTableHeader";InjectJsScriptRequestId[InjectJsScriptRequestId["IsVisibleFromStyle"]=7]="IsVisibleFromStyle";InjectJsScriptRequestId[InjectJsScriptRequestId["IsVisibleFromStyleModern"]=8]="IsVisibleFromStyleModern";InjectJsScriptRequestId[InjectJsScriptRequestId["ScrollNative"]=9]="ScrollNative";InjectJsScriptRequestId[InjectJsScriptRequestId["MatchCssSelector"]=10]="MatchCssSelector";InjectJsScriptRequestId[InjectJsScriptRequestId["ExtractMetadata"]=11]="ExtractMetadata";InjectJsScriptRequestId[InjectJsScriptRequestId["ExtractData"]=12]="ExtractData";InjectJsScriptRequestId[InjectJsScriptRequestId["ExtractDataCleanup"]=13]="ExtractDataCleanup";InjectJsScriptRequestId[InjectJsScriptRequestId["IsVisible"]=14]="IsVisible";InjectJsScriptRequestId[InjectJsScriptRequestId["SelectMultiple"]=15]="SelectMultiple";InjectJsScriptRequestId[InjectJsScriptRequestId["EvaluatedInjectJsFunc"]=16]="EvaluatedInjectJsFunc"})(InjectJsScriptRequestId=ContentDriver.InjectJsScriptRequestId||(ContentDriver.InjectJsScriptRequestId={}))})(ContentDriver=exports.ContentDriver||(exports.ContentDriver={}))}),((__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.DriverVersion=void 0;class DriverVersion{constructor(versionMajor,versionMinor,buildNumberMajor,buildNumberMinor){this.versionMajor=versionMajor;this.versionMinor=versionMinor;this.buildNumberMajor=buildNumberMajor;this.buildNumberMinor=buildNumberMinor}static FromVersion(version){return new DriverVersion(version.versionMajor,version.versionMinor,version.buildNumberMajor,version.buildNumberMinor)}static FromVersionString(codeVersion){const versionParametersCount=4;let detailedDriveVersion=new DriverVersion(0,0,0,0);let versionSuffixStart=codeVersion.indexOf('-');if(versionSuffixStart>0){codeVersion=codeVersion.substring(0,versionSuffixStart)}const chunks=codeVersion.trim().split('.').map(chunk=>Number(chunk));if((chunks.length==versionParametersCount)&&chunks.every(chunk=>Number.isInteger(chunk))){detailedDriveVersion=new DriverVersion(chunks[0],chunks[1],chunks[2],chunks[3])}return detailedDriveVersion}ToString(){return this.versionMajor+"."+this.versionMinor+"."+this.buildNumberMajor+"."+this.buildNumberMinor}IsCompatibleWith(other){return(this.versionMajor===other.versionMajor)&&(this.versionMinor===other.versionMinor)}IsOlderThan(otherValue){let versionValuesA=[this.versionMajor,this.versionMinor,this.buildNumberMajor,this.buildNumberMinor];let versionValuesB=[otherValue.versionMajor,otherValue.versionMinor,otherValue.buildNumberMajor,otherValue.buildNumberMinor];for(let i=0;i<versionValuesA.length;++i){let versionValueA=versionValuesA[i];let versionValueB=versionValuesB[i];if(versionValueA<versionValueB){return true}else if(versionValueA>versionValueB){return false}}return false}}exports.DriverVersion=DriverVersion}),((__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",({value:true}));exports.ContentService=void 0;const tslib_1=__webpack_require__(2);const ContentTarget_1=__webpack_require__(12);const Logger_1=__webpack_require__(1);const Tools_1=__webpack_require__(6);const BrowserExtensionConfig_1=__webpack_require__(9);class ContentService{constructor(packageManager){this.target=new ContentTarget_1.ContentTarget(0,0);this.classLogger=new Logger_1.ClassLogger(ContentService);Logger_1.Logger.Log("[ContentService] document.readyState:",document.readyState);this.packageManager=packageManager;this.ExportExtensionIdForStudioWeb();chrome.runtime.onMessage.addListener((message,sender,sendResponse)=>{let request=Tools_1.Tools.UnsafeCast(message);let isResponseSentAsync=false;if(this.IsRequestToContent(request)){let response=this.HandleRequestToContent(request);sendResponse(response)}else if(this.IsRequestToContentDriver(request)){isResponseSentAsync=this.HandleRequestToContentDriver(request,sender,sendResponse)}else if(this.IsRequestToContentPublic(request)){let response=this.HandleRequestToContentPublic(request);sendResponse(response)}return isResponseSentAsync});this.SendHandshakeToBackground()}SendHandshakeToBackground(){let actionCb=()=>tslib_1.__awaiter(this,void 0,void 0,function*(){let response=yield this.GetContentInitData_Async();if(!response){return Tools_1.Tools.LoopAction.Continue}this.SetContentInitData(response.Data);return Tools_1.Tools.LoopAction.Stop});let timeoutMs=50;Tools_1.Tools.RetryWithTimeoutAsync(actionCb,timeoutMs)}GetContentInitData_Async(){return Tools_1.Tools.ToPromise(resolvePromiseCb=>{let request={ChannelId:"Extension_RequestToBackground",RequestId:1};chrome.runtime.sendMessage(request,response=>{if(chrome.runtime.lastError){this.classLogger.Log(this.GetContentInitData_Async,"chrome.runtime.lastError:",chrome.runtime.lastError.message)}return resolvePromiseCb(response)})})}SetContentInitData(response){this.target=new ContentTarget_1.ContentTarget(response.TabId,response.FrameId);this.packageManager.SetTabInfo(this.target,response.Tab);this.classLogger.Log(this.SetContentInitData,"target:",this.target.toString())}HandleRequestToContent(message){if(message.Type==3){let request=Tools_1.Tools.UnsafeCast(message);return this.ExecuteDriverScript(request)}else if(message.Type==4){let request=Tools_1.Tools.UnsafeCast(message);return this.ExecuteDriverInlineCode(request)}else if(message.Type==1){let request=Tools_1.Tools.UnsafeCast(message);let activeDriver=this.packageManager.ActivateDriver(request.DriverCodeVersion);let returnCode=activeDriver?1:2;let response={ReturnCode:returnCode};return response}else if(message.Type==2){let request=Tools_1.Tools.UnsafeCast(message);this.packageManager.DeactivateDriver(request.DriverCodeVersion);let response={ReturnCode:1};return response}else if(message.Type==5){let request=Tools_1.Tools.UnsafeCast(message);return this.ExecuteDriverInjectJs(request)}else{let unhandledType=message.Type;this.classLogger.Error(this.HandleRequestToContent,"Unhandled message.Type:",unhandledType);return{ReturnCode:3}}}HandleRequestToContentDriver(message,sender,sendRespose){let driver=this.packageManager.ActivateDriver(message.DriverCodeVersion);if(!driver){this.classLogger.Log(this.DoWithDriver,"driverVersion:",message.DriverCodeVersion," is not available; requesting it now");sendRespose({ReturnCode:2});return false}if(message.Type===1){let request=Tools_1.Tools.UnsafeCast(message);return driver.ExecuteRequest(request.RequestData,sender,responseData=>{let response={ReturnCode:1,ResponseData:responseData};sendRespose(response)})}else{let unhandledType=message.Type;this.classLogger.Error(this.HandleRequestToContent,"Unhandled message.Type:",unhandledType);let response={ReturnCode:3};sendRespose(response);return false}}ExecuteDriverScript(request){return this.DoWithDriver(request.DriverCodeVersion,driver=>{return driver.ExecuteScript(request.ScriptToExecute)})}ExecuteDriverInlineCode(request){return this.DoWithDriver(request.DriverCodeVersion,driver=>{return driver.ExecuteInlineCode(request.RequestId)})}ExecuteDriverInjectJs(request){return this.DoWithDriver(request.DriverCodeVersion,driver=>{return driver.ExecuteInjectJs(request)})}DoWithDriver(driverVersion,actionCb){let activeDriver=this.packageManager.ActivateDriver(driverVersion);if(!activeDriver){this.classLogger.Log(this.DoWithDriver,"driverVersion:",driverVersion," is not available; requesting it now");return{ReturnCode:2}}return actionCb(activeDriver)}IsRequestToContent(message){return((message===null||message===void 0?void 0:message.ChannelId)==="Extension_RequestToContent")}IsRequestToContentDriver(message){return((message===null||message===void 0?void 0:message.ChannelId)==="Extension_RequestToDriver")}IsRequestToContentPublic(message){return((message===null||message===void 0?void 0:message.ChannelId)==="Extension_RequestToContentPublic")}HandleRequestToContentPublic(message){if(message.RequestId==1){let index=this.GetTabFrameIndex(window);let response={indexInParent:index};return response}else{let unhandledType=message.RequestId;this.classLogger.Error(this.HandleRequestToContentPublic,"Unhandled message.Type:",unhandledType);return undefined}}GetTabFrameIndex(frameWindow){if(this.IsMainFrame(frameWindow)){return-1}let childrenArray=frameWindow.parent.frames;for(let i=0;i<childrenArray.length;i++){if(childrenArray[i]===frameWindow){return i}}return-1}IsMainFrame(frameWindow){return(frameWindow.parent===frameWindow||frameWindow.parent===null)}ExportExtensionIdForStudioWeb(){if(!BrowserExtensionConfig_1.ExtensionConfigService.GetConfig().AllowInteropWithStudioWeb){return}this.classLogger.Log(this.ExportExtensionIdForStudioWeb);let exportExtensionId=()=>{if(document.head===null){return Tools_1.Tools.LoopAction.Continue}var comment=document.createComment(`UIPATH_EXTENSION_ID: ${chrome.runtime.id}`);document.head.appendChild(comment);return Tools_1.Tools.LoopAction.Stop};let retryIntervalInMs=200;Tools_1.Tools.RetryWithTimeout(exportExtensionId,retryIntervalInMs)}}exports.ContentService=ContentService})]);var __webpack_module_cache__={};function __webpack_require__(moduleId){var cachedModule=__webpack_module_cache__[moduleId];if(cachedModule!==undefined){return cachedModule.exports}var module=__webpack_module_cache__[moduleId]={exports:{}};__webpack_modules__[moduleId](module,module.exports,__webpack_require__);return module.exports}(()=>{__webpack_require__.d=(exports,definition)=>{for(var key in definition){if(__webpack_require__.o(definition,key)&&!__webpack_require__.o(exports,key)){Object.defineProperty(exports,key,{enumerable:true,get:definition[key]})}}}})();(()=>{__webpack_require__.o=(obj,prop)=>(Object.prototype.hasOwnProperty.call(obj,prop))})();(()=>{__webpack_require__.r=exports=>{if(typeof Symbol!=='undefined'&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'})}Object.defineProperty(exports,'__esModule',{value:true})}})();var __webpack_exports__={};(()=>{var exports=__webpack_exports__;Object.defineProperty(exports,"__esModule",({value:true}));const BrowserExtensionConfig_1=__webpack_require__(9);const Logger_1=__webpack_require__(1);const ContentEventListeners_1=__webpack_require__(10);const ContentPackageManager_1=__webpack_require__(11);const ContentService_1=__webpack_require__(17);Logger_1.Logger.Log("[ContentMain]");let globalScope=window;globalScope["chrome"]=globalScope["chrome"]||globalScope["browser"];let contentPackageManager=new ContentPackageManager_1.ContentPackageManager;let contentService=new ContentService_1.ContentService(contentPackageManager);if(BrowserExtensionConfig_1.ExtensionConfigService.GetConfig().RegisterContentEventListeners){let contentEventListeners=new ContentEventListeners_1.ContentEventListeners;globalScope["g_uiPath_ContentEventListeners"]=contentEventListeners}globalScope["g_uiPath_ContentPackageManager"]=contentPackageManager;globalScope["g_uiPath_ContentService"]=contentService})()})();