import{H as e,c as n}from"./5b6d41c8f3d086816edf7147d0e5be66.js";import"./a6d0ee077b9cc3485bbd70404dec4c25.js";import"./1a1e12b85f9de6c453175456e6b03dc3.js";import"./a917ecdde6f9bd006481134216d18309.js";import"./989aa6bb6448c33c925f59d410861c78.js";import"./2f0ba330a9fe20d9e75da86d9009bc02.js";import"./6e99284c7e89ef9d925f62c5923f9505.js";import"./ead41015014512fa5b1aedaebaed4448.js";import"./627790d07d05a1e3f1edac3d8d9e5374.js";import"./5900820d402351b6ced9644caf1aeb74.js";import"./3b977fb3d05d7c837f2c2a36b962aba8.js";import"./215b80e923e12745f9ed657e17d445e9.js";import"./fa33a1d8cfa1706fa45935e4b38d2e4a.js";import"./5e85fbd0320a36c22ba51601e1fd6d3e.js";import"./0a746d69d1501f25fe490072865698ea.js";import"./b609051c1488d7e4ca471541f0ea26a4.js";import"./01a6239c2b482162212963ea19da43eb.js";import"./4b8810a6f832399ec9a72af40c647dde.js";import"./ee34ee5b9c5753935e961eee233a62fc.js";import"./1c2cb1f3d9fae674ab65fc85b988f036.js";let h=!1;if(typeof window>"u"){var m=r=>{fetch("/partner.json").then(a=>a.json()).then(a=>{let o={app_name:n.app_name,app_title:n.app_title,app_description:n.app_description,app_logo:n.app_logo,app_logo_full:n.app_logo_full,app_search_title:n.app_search_title,app_main_color:n.app_main_color,app_main_color_dark:n.app_main_color_dark,app_main_link_color:n.app_main_link_color,app_main_link_color_dark:n.app_main_link_color_dark,app_store_url:n.app_store_url,app_install:!1,app_uninstall:!1,app_context:!1},i=[];Object.keys(a).forEach(t=>{a[t]!==null&&(typeof a[t]=="string"&&(a[t].indexOf(".svg")!==-1&&i.push(`app_${t}`),t.indexOf("color")&&a[t].indexOf("#")===0&&(a[t]=e.hex2rgb(a[t]))),o[`app_${t}`]=a[t])}),i.forEach(t=>{fetch(o[t]).then(p=>p.text()).then(p=>{o[t]=p.trim().replace(/[\r\n]+/gm,""),e.Browser().storage.local.set({app_details:o})})}),e.Browser().storage.local.set({app_details:o})}).catch(a=>{console.log(a)}).finally(()=>{e.Browser().storage.local.get("app_details").then(a=>{let o=a.app_details??{app_install:!1,app_uninstall:!1,app_context:!1};o.app_uninstall&&e.Browser().runtime.setUninstallURL(n.site+"/uninstall?ex="+n.extension_id),!h&&(h=!0,e.settingsBuild(!0).then(i=>{let t=i;typeof i.settings<"u"&&(t=i.settings),typeof t.ai_key<"u"&&(r.reason=="install"&&(t=Object.assign(t,{context_reading:o.app_context,context_writing:o.app_context,context_writing_input:o.app_context})),e.Browser().storage.local.set({settings:t})),r.reason=="install"&&o.app_install&&e.openPage({url:n.extension_main_dir+"/setup.html"})}))})})};e.onMessageListener(),e.Browser().runtime.onInstalled.addListener(async r=>m(r)),e.Browser().runtime.onUpdateAvailable.addListener(r=>m(r)),e.Browser().runtime.onMessage.addListener(async r=>{if(r.fn=="action.onCaptureScreen"){const{data:a}=r.data,{x:o,y:i,width:t,height:p,windowWidth:w}=a;if(!t||!p)return;e.captureCurrentViewport().then(s=>{fetch(s).then(_=>_.blob()).then(_=>{createImageBitmap(_).then(u=>{const l=u.width/w,x=o*l,B=i*l,c=t*l,d=p*l,g=new OffscreenCanvas(c,d);g.getContext("2d").drawImage(u,x,B,c,d,0,0,c,d),g.convertToBlob().then(k=>{const f=new FileReader;f.readAsDataURL(k),f.onloadend=()=>{const y=f.result;e.Browser().storage.local.set({ai_image_url:y}).then()}})})})}).catch(s=>console.error(s))}}),e.Browser().storage.local.set({migrate_test:1}),e.Browser().storage.local.get("uuid_hopekey").then(r=>{if(r.uuid_hopekey==null)return e.uuid(1)})}
